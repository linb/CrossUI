    /*support
    tab: to 4 space
    enter: add head space
    {enter: add head+4 space
    }:add head-4 space
    */
Class("xui.UI.TextEditor", ["xui.UI.Widget","xui.absValue"] ,{
    Instance:{
        activate:function(){
            var profile = this.get(0);
            profile.getSubNode('INPUT').focus();
            return this;
        },
        _setCtrlValue:function(value){
            if(_.isNull(value) || !_.isDefined(value))value='';
            return this.each(function(profile){
                var node=profile.getSubNode('INPUT').get(0);
                if(node.value.replace(/(\r\n|\r)/g, "\n")!=value.replace(/(\r\n|\r)/g, "\n")){
                    var st=node.scrollTop;
                    node.value=value;
                    node.scrollTop=st;
                }
            });
        },
        _getCtrlValue:function(value){
            var profile = this.get(0);
            return profile.getSubNode('INPUT').attr('value').replace(/(\r\n|\r)/g, "\n").replace(/( +)(\n)/g, "$2").replace(/\t/g, "    ");
        }
    },
    Initialize:function(){
        //modify default template for shell
        var t = this.getTemplate();
        _.merge(t.FRAME.BORDER,{
            BOX:{
                tagName:'div',
                INPUT:{
                    tagName:'textarea',
                    tabindex:'{tabindex}',
                    style:'{_css}'
                }
            },
            BAK1:{},
            BAK2:{tagName:'div'}
        },'all');
        this.setTemplate(t);
    },
    Static:{
        Appearances:{
            BOX:{
                width:'100%',
                height:'100%',
                left:0,
                top:0,
                //for firefox bug: cursor not show
                position:'absolute',
                overflow:(xui.browser.gek&&xui.browser.ver<3)?'auto':'hidden',
                'z-index':'10'
            },
            INPUT:{
                'font-family': 'Courier New, Courier, monospace',
                'font-size':'12px',
                'line-height':'14px',
                position:'absolute',
                'background-color':'#fff',
                left:0,
                top:0,
                border:0,
                margin:0,
                padding:0,
                overflow:'auto',
                'overflow-y':'auto',
                'overflow-x':'hidden',
                resize:'none'
            },
            'BAK1, BAK2':{
                'font-family': 'Courier New, Courier, monospace',
                'font-size':'12px',
                position:'absolute',
                visibility:'hidden',
                left:'-10000px',
                top:'-10000px'
            }
        },
        Behaviors:{
            INPUT:{
                onFocus:function(profile,e,src){
                    profile.box._onchange(profile,xui.use(src).get(0));
                },
                onChange:function(profile, e, src){
                    profile.boxing().setUIValue(xui.use(src).get(0).value,null,null,'onchange');
                    profile.box._onchange(profile,xui.use(src).get(0));
                },
                afterKeydown:function(profile, e, src){
                    var pro=profile.properties,str,t;
                    if(pro.disabled || pro.readonly)return;
                    if(profile.$change)delete profile.$change;
                    var key = xui.Event.getKey(e),
                    node=xui.use(src).get(0),
                    k=key.key;
                    switch(k){
                        case 'tab':
                            var r=xui.use(src).caret(),
                                sel=node.value.slice(r[0],r[1]);
                            if(/(\n|\r)/.test(sel)){
                                //previous
                                str=node.value.slice(0,r[0]);
                                if(sel.charAt(0)!='\n' && sel.charAt(0)!='\r'){
                                    //change sel
                                    sel=str.slice(r[0]=str.lastIndexOf('\n'))+sel;
                                }
                                //
                                if(xui.browser.ie){
                                    t= (t=str.match(/\r/g))?t.length:0;
                                    r[0]-=t;
                                    t= (t=(node.value.slice(0,r[1])).match(/\r/g))?t.length:0;
                                    r[1]-=t;
                                }

                                //re caret
                                xui.use(src).caret(r[0],r[1]);

                                if(key.shiftKey){
                                    sel=sel.replace(/(\n|\n\r)    /g,'$1');
                                }else{
                                    sel=sel.replace(/(\n|\n\r)/g,'$1    ');
                                }
                                //insert
                                profile.box.insertAtCaret(profile,sel);

                                r[1]=r[0]+sel.length;
                                if(xui.browser.ie){
                                    t= (t=sel.match(/\r/g))?t.length:0;
                                    r[1]-=t;
                                }
                                //caret
                                xui.use(src).caret(r[0],r[1]);
                            }else{
                                if(key.shiftKey){
                                    xui.use(src).caret(r[0]-4,r[0]-4);
                                    r[0]-=4;
                                    r[1]-=4;
                                }else{
                                    profile.box.insertAtCaret(profile,'    ');
                                    r[0]+=4;
                                    r[1]+=4;
                                }
                            }
                            profile.$pos=r;
                            return false;
                        case 'enter':
                            var paras = profile.box.getParas(profile);
                            str = paras[1];
                            var len = str.length - _.str.ltrim(str).length;

                            if(str.charAt(str.length-1)=="{")
                                len +=4;
                            if(len){
                                profile.box.insertAtCaret(profile, '\n'+_.str.repeat(' ',len));
                                profile.$enter=true;
                                return false;
                            }
                            break;
                        default:
                            if(profile.tips){
                                profile.tips.destroy(true);
                                profile.tips=null;
                            }
                    }
                    node=null;
                },
                afterKeypress:function(profile, e, src){
                    if(profile.properties.disabled || profile.properties.readonly)return;
                    var key = xui.Event.getKey(e), k=key.key;
                    var me=arguments.callee, map=me.map || (me.map={space:1,enter:1,backspace:1,tab:1,"delete":1});
                    if(k.length==1 || map[k])
                        profile.$change=true;

                    switch(k){
                        case 'tab':
                            if(xui.browser.opr)
                                _.asyRun(function(){
                                    xui.use(src).caret(profile.$pos[0], profile.$pos[1]);
                                });
                            return false;
                        case 'enter':
                            if(profile.$enter){
                                delete profile.$enter;
                                return false;
                            }
                        case '}':
                            if(key.shiftKey){
                                var paras = profile.box.getParas(profile);
                                var
                                loc = paras[0],
                                str = paras[1],
                                pos=paras[2],
                                input=paras[3];
                                if(/ {4}$/.test(str)){
                                    var st=xui(src).scrollTop();
                                    input.value =
                                    input.value.substr(0,loc).replace(/ {4}$/,'}') +
                                    input.value.substr(loc, input.value.length);

                                    //fire event manully
                                    xui(input).onChange();

                                    profile.box.setCaretTo(input, loc - 4 + 1, st);

                                    return false;
                                }
                            }
                            break;
                    }
                },
                afterKeyup:function(profile, e, src){
                    var key = xui.Event.getKey(e),k=key.key;
                    var me=arguments.callee, map=me.map || (me.map={space:1,enter:1,backspace:1,tab:1,"delete":1});
                    if(k.length==1 || map[k])
                        profile.$change=true;

                    if(profile.$change){
                        delete profile.$change;
                        profile.box._onchange(profile,xui.use(src).get(0));
                    }
                }
            }
        },
        DataModel:{
            selectable:true,
            left:0,
            top:0,
            width:200,
            height:200,
            position:'absolute',
            disabled:{
                ini:false,
                action: function(v){
                    b.boxing().setReadonly(v);
                }
            },
            readonly:{
                ini:false,
                action: function(v){
                    this.getSubNode('INPUT').attr('readonly',v).css('background',v?'#EBEADB':'');
                }
            }
        },
        EventHandlers:{
            onChange:function(profile, oV, nV){}
        },
        RenderTrigger:function(){
            var ns=this;
            if(ns.properties.readonly)
                ns.boxing().setReadonly(true,true);

            var ie=xui.browser.ie,
                src=ns.getSubNode('INPUT').get(0),
                f=function(o){
                    //only for value in IE
                    if(ie && o.propertyName!='value')return true;

                    var src=ie?o.srcElement:this;
                    ns.box._onchange(ns,src);
                };
            if(ie){
                src.attachEvent("onpropertychange",f);
                src.attachEvent("ondrop",f);
                ns.$ondestory=function(){
                    src.detachEvent("onpropertychange",f);
                    src.detachEvent("ondrop",f);
                    src=f=null;
                }
            }else{
                src.addEventListener("input",f,false);
                src.addEventListener("dragdrop",f,false);
                ns.$ondestory=function(){
                    var src=this.getSubNode('INPUT').get(0);
                    if(src){
                        src.removeEventListener("input",f,false);
                        src.addEventListener("dragdrop",f,false);
                    }
                    src=f=null;
                }
                ns.getSubNode('BOX').$firfox2();
            }
        },
        _onchange:function(profile,src){
            if(profile.onChange){
                var v=src.id;
                _.resetRun(profile.$xid+'_drop', function(){
                    v=xui.Dom.byId(v).value||'';
                    profile.$prevV=profile.$prevV||'';
                    if(v!=profile.$prevV){
                        profile.boxing().onChange(profile, profile.$prevV, v);
                        profile.$prevV=v;
                    }
                });
            }
        },
        _prepareData:function(profile){
            var d=arguments.callee.upper.call(this, profile);
            if(xui.browser.kde)
                d._css='resize:none;';
            return d;
        },
        //
        _onresize:function(profile,width,height){
            var upper=arguments.callee.upper,
                size = upper.apply(this,_.toArr(arguments));
            upper=null;
            profile.getSubNode('BOX').cssSize(size);
            profile.getSubNode('INPUT').cssSize(size);
        },
        //for
        insertAtCaret:function(profile, text) {
            var input = profile.getSubNode('INPUT'),
                scrollTop = input.scrollTop() || null,
                ret;
            //fire onChange manully
            input.onChange();
            //replace text
            ret=input.caret(text);
            //set cursor
    	    this.setCaretTo(input.get(0), ret||0, scrollTop);
    	},
        //set cursor to textarea
        setCaretTo:function(input, pos, scrollTop){
            input.focus()
            var s,c,h,o=xui([input]);

            //opera not support scrollTop in textarea
            if(_.isNumb(scrollTop))
                o.scrollTop(scrollTop);

            if(scrollTop===true){
                if(o.get(0).tagName.toLowerCase() == 'textarea' && o.scrollHeight() !== o.offsetHeight()){
                    s = o.attr('value').substr(0,pos);
                    c = o.clone().id('').css({visibility:'hidden',position:'absolute',left:5000+'px'}).attr('value',s);
                    xui('body').append(c);
                    h = Math.max((c.scrollHeight() > c.offsetHeight()) ? c.scrollHeight() - 30 : 0,0);
                    o.scrollTop(h);
                    c.remove();
                }
            }
            o.caret(pos,pos);
        },
        /*
        return array
        [0] char number before caret
        [1] line number of caret
        [2] absPos of caret
        [3] text before caret
        */
        getParas:function(profile){
            var o = profile.getSubNode('INPUT'), 
                me=arguments.callee, 
                reg = me.reg ||(me.reg=/\r\n/g),
                v = o.get(0).value,
                loc = o.caret();

            if(loc[0]<0)loc[0]=0;

            //for ie/opera
            var l=0, m = v.substr(0,loc[0]).match(reg);
            if(m)l=m.length;
            v = v.replace(reg,'\n');
            var txt = v.substr(0,loc[0]-l);

            var
            li = txt.lastIndexOf('\n') ,
            line = txt.substr(li+1, loc[0]-li),
            w=o.innerWidth(),
            bak1 = profile.getSubNode('BAK1'),
            bak2 = profile.getSubNode('BAK2')
            ;
            if(txt.charAt(txt.length-1)=='\n')txt+='*';

            bak2.width(w);
            var
            x = bak1.html(line.replace(/ /g,'&nbsp;'),false).width(),
            y = bak2.html(txt.replace(/\n/g,'<br />'),false).height() - o.scrollTop();

            if(x>w){
                bak2.html(line,false);
                var lbak = line;
                var bl = bak2.height();
                while(lbak){
                    //delete last words
                    lbak=lbak.replace(/ [^ ]*$/,'');
                    bak2.html(lbak,false);
                    if(bak2.height()!=bl)break;
                }
                lbak = line.substr(lbak.length, line.length-lbak.length);
                x = bak1.html(lbak,true).width();
            }

            bak1.html('',false);
            bak2.html('',false);

            var pos = profile.getRoot().offset();
            pos.left+=x;
            pos.top+=y;
            return [loc[0],line,pos,o.get(0),txt];
        }
    }
});
Class("xui.UI.FoldingTabs", "xui.UI.Tabs",{
    Initialize:function(){
        var t=this.getTemplate(),keys=this.$Keys;
        delete t.LIST;
        delete keys.PNAELS;
        this.setTemplate(t);
        delete keys.LEFT;delete keys.RIGHT;delete keys.DROP;delete keys.LIST;delete keys.PNAELS;
    },    
    Instance:{
        _setCtrlValue:function(value,init){
            this.each(function(profile){
                var id=profile.domId,
                    box = profile.boxing(),
                    uiv = init?'':box.getUIValue(),
                    prop = profile.properties,

                    fold=function(itemId, arr){
                        var subId = profile.getSubIdByItemId(itemId),
                            item=profile.getItemByItemId(itemId);
                        if(subId){
                            arr.push(subId);
                            
                            var itemnode=profile.getSubNode('BODY',subId);
                            if(itemnode.css('display')!='none'){
                                item._scrollTop=itemnode.get(0).scrollTop||0;
                                if(item._scrollTop)
                                    itemnode.get(0).scrollTop=0;
                                itemnode.css('display','none');
                            }
                        }
                    },
                    expand = function(itemId, arr){
                        var subId = profile.getSubIdByItemId(itemId),
                            item=profile.getItemByItemId(itemId);
                        if(subId){
                            arr.push(subId);
                            
                            var itemnode=profile.getSubNode('BODY',subId);
                            if(itemnode.css('display')=='none'){
                                 // show pane
                                //box.getPanel(itemId).css('position','relative').show('auto','auto');
                                itemnode.css('display','block');
                                if(item._scrollTop)
                                    itemnode.get(0).scrollTop=item._scrollTop;
    
                                profile.box._forLazyAppend(profile, item, itemId);
                                profile.box._forIniPanelView(profile, item, itemId);
                            }
                        }
                    };
                var arr1=[], arr2=[];
                if(prop.selMode=="multi"){
                    uiv = uiv?uiv.split(prop.valueSeparator):[];
                    value = value?value.split(prop.valueSeparator):[];

                    _.arr.each(uiv,function(key){
                        if(_.arr.indexOf(value,key)==-1)
                            fold(key, arr1);
                    });
                    _.arr.each(value,function(key){
                        if(_.arr.indexOf(uiv,key)==-1)
                            expand(key, arr2);
                    });
                }else{
                    fold(uiv, arr1);
                    expand(value, arr2);
                }
                if(arr1.length){
                    profile.getSubNodes(['ITEM','TOGGLE'],arr1).tagClass('-checked',false);
                    profile.getSubNodes('ITEM',arr1).next().tagClass('-prechecked',false);
                }
                if(arr2.length){
                    profile.getSubNodes(['ITEM','TOGGLE'],arr2).tagClass('-checked');
                    profile.getSubNodes('ITEM',arr2).next().tagClass('-prechecked');
                }

                var t=profile.getRootNode().style;
                xui.UI.$tryResize(profile, t.width, t.height, true);
            });
        },
        _afterInsertItems:null
    },
    Static:{
        Templates:{
            tagName : 'div',
            style:'{_style};',
            BOX:{
                $order:0,
                tagName : 'div',
                className:'xui-uibg-base',
                ITEMS:{
                    tagName : 'div',
                    text:"{items}"
                }
            },
            $submap:{
                items:{
                    ITEM:{
                        tagName : 'div',
                        className:'{_checked} {_precheked} {itemClass} {disabled} {readonly}',
                        style:'{_itemDisplay} {itemStyle}',
                        HANDLE:{
                            tagName : 'div',
                            HL:{tagName : 'div'},
                            HR:{tagName : 'div'},
                            TITLE:{
                                tabindex: '{_tabindex}',
                                TLEFT:{
                                    $order:0,
                                    tagName:'div',
                                    TOGGLE:{
                                        $order:0,
                                        className:'xui-uicmd-toggle {_tlgchecked}'
                                    },
                                    ICON:{
                                        $order:2,
                                        className:'xui-ui-icon {imageClass}',
                                        style:'{backgroundImage} {backgroundPosition} {backgroundRepeat} {imageDisplay}'
                                    },
                                    CAPTION:{
                                        $order:3,
                                        text:'{caption}'
                                    }
                                },
                                TRIGHT:{
                                    $order:1,
                                    tagName:'div',
                                    style:'{_capDisplay}',
                                    MESSAGE:{
                                        $order:0,
                                        text:'{message}'
                                    },
                                    CMDS:{
                                        $order:2,
                                        OPT:{
                                            $order:1,
                                            className:'xui-uicmd-opt',
                                            style:'{_opt}'
                                        },
                                        POP:{
                                            className:'xui-uicmd-pop',
                                            style:'{popDisplay}',
                                            $order:1
                                        },
                                        CLOSE:{
                                            className:'xui-uicmd-close ',
                                            style:'{closeDisplay}',
                                            $order:2
                                        }
                                    }
                                }/*,
                                TCLEAR:{
                                    $order:2,
                                    tagName:'div'
                                }*/
                            }
                        },
                        BODY:{
                            $order:1,
                            tagName : 'div',
                            BODYI:{
                                tagName : 'div',
                                PANEL:{
                                    tagName : 'div',
                                    style:'{_itemHeight};{_overflow};{_bginfo}',
                                    className:'xui-uibg-base',
                                    text:xui.UI.$childTag
                                }
                            }
                        },
                        TAIL:{
                            $order:4,
                            tagName : 'div',
                            TL:{tagName : 'div'},
                            TR:{tagName : 'div'}
                        }
                    }
                }
            }
        },
        Appearances:{
            KEY:{
            },
            BOX:{
                    
            },
            ITEMS:{
                border:0,
                position:'relative',
                zoom:xui.browser.ie?1:null,
                'padding-top':'8px'//,
                //for ie6 1px bug,  HR/TR(position:absolute;right:0;)
                //'margin-right':xui.browser.ie6?'expression(this.parentNode.offsetWidth?(this.parentNode.offsetWidth-(parseInt(this.parentNode.style.paddingLeft,10)||0)-(parseInt(this.parentNode.style.paddingRight,10)||0) )%2+"px":"auto")':null
            },
            ITEM:{
                border:0,
                //for ie6 bug
                zoom:xui.browser.ie?1:null,
                'margin-top':'-9px',
                padding:0,
                'font-family': '"Verdana", "Helvetica", "sans-serif"',
                position:'relative',
                overflow:'hidden'
            },
            'HANDLE, BODY, BODYI, PANEL, TAIL':{
                position:'relative'
            },

            CMDS:{
                padding:'2px 0 0 4px',
                'vertical-align':'middle',
                position:'relative'
            },
            BODY:{
                display:'none',
                'border-right': 'solid 1px #CCC',
                zoom:xui.browser.ie?1:null,
                position:'relative',
                overflow:'auto',
                'background-image':xui.UI.$bg('border_left.gif', '','FoldingList'),
                'background-repeat':'repeat-y',
                'background-position':'left top'
            },
            BODYI:{
                padding:'0 8px',
                'background-image':xui.UI.$bg('border_left.gif', '','FoldingList'),
                'background-repeat':'repeat-y',
                'background-position':'left top'
            },
            PANEL:{
                overflow:'auto',
                padding:'2px'
            },
            'ITEM-mouseover':{
            },
            'ITEM-mousedown, ITEM-checked':{
            },
            'ITEM-checked':{
                $order:2,
                'margin-bottom':'12px'
             },
            'ITEM-checked BODY':{
                $order:2,
                display:'block'
            },
            'HL, HR, TL, TR':{
                position:'absolute',
                'font-size':0,
                'line-height':0,
                width:'8px',
                'background-image':xui.UI.$bg('corner.gif', '','FoldingList'),
                'background-repeat':'no-repeat'
            },
            'HL, HR':{
                height:'30px'
            },
            'ITEM-prechecked HL':{
                $order:1,
                'background-position': 'left top'
            },
            'ITEM-prechecked HR':{
                $order:1,
                'background-position': 'right top'
            },
            'TL, TR':{
                height:'20px'
            },
            HL:{
                $order:1,
                top:0,
                left:0,
                'background-position': 'left -37px'
            },
            HR:{
                $order:1,
                top:0,
                right:0,
                'background-position': 'right -37px'
            },
            TL:{
                $order:1,
                bottom:0,
                left:0,
                'background-position': 'left bottom'
            },
            TR:{
                $order:1,
                bottom:0,
                right:0,
                'background-position': 'right bottom'
            },
            HANDLE:{
                position:'relative',
                zoom:xui.browser.ie?1:null,
                'background-image':xui.UI.$bg('border_top.gif', '','FoldingList'),
                'background-repeat':'repeat-x',
                'background-color':'#fff',
                'background-position':'left top',
                overflow:'hidden'
            },
            TITLE:{
                $order:1,
                height:'26px',
                display:'block',
                position:'relative',
                'white-space':'nowrap',
                overflow:'hidden'
            },
            'BODY, BODYI, PANEL':{
                'font-size':0,
                'line-height':0
            },
            TAIL:{
                'font-size':0,
                'line-height':0,
                height:'5px',
                'background-image':xui.UI.$bg('border_bottom.gif', '','FoldingList'),
                'background-repeat':'repeat-x',
                'background-color':'#EEE',
                'background-position':'left bottom'
            },
            'CAPTION, MESSAGE':{
                padding:'3px',
                'vertical-align':'middle'
            },
            CAPTION:{
                color:'#666',
                cursor:'pointer',
                'white-space':'nowrap',
            	font: '12px arial,sans-serif',
            	color: '#00681C'
            },
            'ITEM-checked CAPTION':{
                $order:2,
                'font-weight':'bold'
            },
            TLEFT:{
                //position:xui.browser.ie6?'relative':null,
                //'float':'left',
                position:'absolute',
                left:'4px',
                top:'2px',
                padding:"0 0 0 4px",
                'white-space':'nowrap',
                overflow:'hidden'
            },
            TRIGHT:{
                //position:xui.browser.ie6?'relative':null,
                //'float':'right',

                position:'absolute',
                right:'4px',
                top:'2px',
                'white-space':'nowrap',
                overflow:'hidden'
            }
        },
        Behaviors:{
            DraggableKeys:['HANDLE'],
            HoverEffected:{OPT:'OPT',CLOSE:'CLOSE',POP:'POP'},
            ClickEffected:{OPT:'OPT',CLOSE:'CLOSE',POP:'POP'},
            ITEM:{onClick:null},
            ITEMS:{onMousedown:null,onDrag:null,onDragstop:null},
            HANDLE:{
                onClick:function(profile, e, src){
                    if(xui.Event.getBtn(e)!='left')return;

                    var prop = profile.properties,
                        item = profile.getItemByDom(src),
                        itemId =profile.getSubId(src),
                        box = profile.boxing();
                    if(!item)return;

                    if(prop.disabled|| item.disabled)return false;
                    if(prop.readonly|| item.readonly)return false;

                    profile.getSubNode('TITLE').focus();

                    switch(prop.selMode){
                    case 'multi':
                        var value = box.getUIValue(),
                            arr = value?value.split(prop.valueSeparator):[],
                            checktype=1;

                        if(arr.length){
                            //for select
                            if(_.arr.indexOf(arr,item.id)!=-1){
                                _.arr.removeValue(arr,item.id);
                                checktype=-1
                            }else
                                arr.push(item.id);

                            arr.sort();
                            value = arr.join(prop.valueSeparator);

                            //update string value only for setCtrlValue
                            if(box.getUIValue() !== value){
                                box.setUIValue(value,null,null,'click');
                                if(box.get(0) && box.getUIValue() == value)
                                    box.onItemSelected(profile, item, e, src, checktype);
                            }
                            break;
                        }
                    case 'single':

                        if(box.getUIValue() !== item.id){
                            box.setUIValue(item.id,null,null,'click');
                            if(box.get(0) && box.getUIValue() == item.id)
                                box.onItemSelected(profile, item, e, src, 1);
                        }
                        break;
                    }
                },
                onKeydown:function(profile, e, src){
                    var keys=xui.Event.getKey(e), key = keys.key, shift=keys.shiftKey;
                    if(key==' '||key=='enter'){
                        profile.getSubNode('HANDLE',profile.getSubId(src)).onClick();
                        return false;
                    }
                }
            }
        },
        DataModel:{
            $border:0,
            noPanel:null,
            noHandler:null,
            HAlign:null,
            selMode:{
                ini:'single',
                listbox:['single', 'multi']
            }
        },
        _prepareItems:function(profile, arr, pid){
            if(arr.length)
                arr[0]._precheked = profile.getClass('ITEM','-prechecked');
            return arguments.callee.upper.apply(this, arguments);
        },
        _prepareItem:function(profile, item){            
            var dpn = 'display:none',p=profile.properties,t;
            item.closeDisplay = item.closeBtn?'':dpn;
            item.popDisplay = item.popBtn?'':dpn;
            item._opt = item.optBtn?'':dpn;
            item._itemDisplay = item.hidden?dpn:'';

            if(item.height && item.height!='auto'){
                item._itemHeight="height:"+item.height+"px;";
            }

            var prop = profile.properties,o;
            item._tabindex = prop.tabindex;
            if(!item.caption)
                item._capDisplay=dpn;
            else
                item.caption = item.caption.replace(/</g,"&lt;");

            item._bginfo="";
            if(t=item.panelBgClr||p.panelBgClr)
                item._bginfo+="background-color:"+t+";";
            if(t=item.panelBgImg||p.panelBgImg)
                item._bginfo+="background-image:url("+xui.adjustRes(t)+");";
            if(t=item.panelBgImgPos||p.panelBgImgPos)
                item._bginfo+="background-position:"+t+";";
            if(t=item.panelBgImgRepeat||p.panelBgImgRepeat)
                item._bginfo+="background-repeat:"+t+";";
            if(t=item.panelBgImgAttachment||p.panelBgImgAttachment)
                item._bginfo+="background-attachment:"+t+";";

            if(item._show){
                item._checked = profile.getClass('ITEM','-checked');
                item._tlgchecked = profile.getClass('TOGGLE','-checked');
            }
        },
        _onresize:function(profile,width,height,force,key){
            if(force){profile._w=profile._h=null;}
            if(width && profile._w!=width){
                profile._w=width;
                profile.getSubNode("PANEL",true).each(function(panel){
                    if(panel.offsetWidth)
                        xui(panel).width('auto').width(xui(panel).width());
                });
            }
        },
        _adjustScroll:null
    }
});
Class("xui.UI.ColLayout",["xui.UI","xui.absList"],{
    Dependencies:['xui.UI.Panel'],
    Instance:{
        addPanel:function(args, col, basePrf, before, type){
            var profile=this.get(0),
                items=profile.properties.items,
                prop=profile.properties;
            if(!col)
                col=items[0].id;

            if(!type)type="manual";

            if(_.arr.subIndexOf(items, 'id',col)==-1)
                return this;
            
            if(!args.properties)args.properties={};
            var ns=this, profile=ns.get(0);
            _.merge(args.properties,{   
                dock:'none',
                position:'relative',
                left:0,
                top:0,
                width:'auto',
                height:'auto',
                
                toggle:true,
                toggleBtn:true,
                
                dragKey: prop.disabled?null:profile.box.KEY+":"+profile.$xid,                
                closeBtn:!prop.disabled 
            });
            _.set(args,['CC','TBAR'],"");
            args.CC['TBAR']+=" xui-ui-unselectable";

            var panel=new xui.UI.Panel(args.properties, args.events, args.host, args.theme, args.CS, args.CC, args.CB, args.CF);

            return this.movePanel(panel.get(0), col, basePrf, before,type);
        },
        movePanel:function(prf, col, basePrf, before,type){
            var profile=this.get(0);
            if(!type)type="manual";
            prf.ColLayoutColumn=parseInt(col,10)-1;
            var old=prf.ColLayoutSize;            
            prf.ColLayoutSize=profile._warr?profile._warr[prf.ColLayoutColumn]:300;

            if(prf["xui.UI"])prf=prf.get(0);
            if(basePrf && basePrf["xui.UI"])basePrf=basePrf.get(0);

            if(prf && prf!=basePrf){
                var flag2,items=profile.children;

                // add to collayout, or move to the right container first
                if(prf.parent!=profile || prf.childrenId != col){
                    this.append(prf, col);
                    flag2=1;
                }
                
                var node,
                    tnode=prf.getRootNode();

                // reposition
                if(!basePrf){
                    node=this.getSubNodeByItemId('PANEL', col);
                    if(node.last().isEmpty() || node.last().id()!=tnode.id){
                        node.append(tnode);
                        flag2=1;
                    }
                }else if(before){
                    node=basePrf.getRoot();
                    if(node.prev().isEmpty() || node.prev().id()!=tnode.id){
                        node.addPrev(tnode);
                        flag2=1;
                        
                        var i1=_.arr.subIndexOf(items,'0',basePrf),
                            i2=_.arr.subIndexOf(items,'0',prf);
                        if(i1!=-1){
                            var item=items[i2];
                            _.arr.removeFrom(items, i2);
                            _.arr.insertAny(items, item, i1, true);
                        }
                    }
                }else{
                    node=basePrf.getRoot();
                    if(node.next().isEmpty() || node.next().id()!=tnode.id){
                        node.addNext(tnode);
                        flag2=1;

                        var i1=_.arr.subIndexOf(items,'0',basePrf),
                            i2=_.arr.subIndexOf(items,'0',prf);
                        if(i1!=-1 && i1 > items.length){
                            var item=items[i2];
                            _.arr.removeFrom(items, i2);
                            _.arr.insertAny(items, item, i1+1, true);
                        }
                    }
                }
                var flag=xui.browser.ie6 && (!old || old>prf.ColLayoutSize);
                if(flag)prf.getRootNode().parentNode.style.display= 'none';

                if(flag2 && profile.onRelayout)this.onRelayout(profile, type, prf, prf.ColLayoutSize);

                if(flag)_.asyRun(function(){
                    prf.getRootNode().parentNode.style.display='';
                });
            }
            return this;
        },
        append:function(target,subId, pre, base){
            var p=this.get(0).properties;
            if(subId=subId||(p.items && p.items[0] && p.items[0].id))
                arguments.callee.upper.call(this, target, subId, pre, base);
            return this;
        }
    },
    Static:{
        Templates:{
            tagName:'div',
            style:'{_style}',
            className:'{_className}',
            ITEMS:{
               $order:10,
               tagName:'div',
               text:"{items}"
            },
            COVER:{
                tagName:'div'
            },
            $submap:{
                items:{
                    ITEM:{
                        tagName:'div',
                        style:'width:{width}',
                        MOVE:{
                            // must be first one
                            $order:1,
                            tagName:'div',
                            className:'xui-ui-unselectable',
                            style:'{_displaymove}'
                        },
                        PANEL:{
                            $order:2,
                            tagName:'div',
                            text:xui.UI.$childTag
                        }
                    }
                }
            }
        },
        Appearances:{
            KEY:{
                position:'absolute',
                'overflow':'auto',
                'overflow-x':'hidden',
                'overflow-y':'auto',
                border:'none',
                zoom:xui.browser.ie6?1:null
            },            
            ITEMS:{
                position:'relative',
                // ensure to get heigth
                overflow:'hidden',
                border:'none',
                zoom:xui.browser.ie6?1:null
            },
            COVER:{
                position:'absolute',
                left:0,
                top:0,
                width:'100%',
                height:'100%',
                display:'none',
                'z-index':10,
                background: xui.browser.ie?'url('+xui.ini.img_bg+')':null
            },
            MOVE:{
                $order:0,
                position:'relative',
                'float':'right',
                width:'4px',
                height:'200px',
                cursor:'e-resize',
                'background-color':'#f0f0f0',
                'border-width':xui.browser.opr?'0':null,
                'font-size':xui.browser.ie?0:'',
                'line-height':xui.browser.ie?0:'',
                zoom:xui.browser.ie6?1:null
            },
            'MOVE-mouseover':{
                $order:1,
                'background-color': '#e4e4e4'
            },
            ITEM:{
                position:'static',
                'float':'left',
                overflow:'hidden',
                'border-width':'0',
                'font-size':xui.browser.ie?0:'',
                'line-height':xui.browser.ie?0:'',
                zoom:xui.browser.ie6?1:null
            },
            PANEL:{
                position:'static',
                overflow:'hidden',
                zoom:xui.browser.ie6?1:null,
                /*for opera, opera defalut set border to 3 ;( */
                'border-width':xui.browser.opr?'0':null,
                'font-size':xui.browser.ie?0:'',
                'line-height':xui.browser.ie?0:''
            }
        },
        Behaviors:{
            HoverEffected:{MOVE:'MOVE'},
            DroppableKeys:['KEY'],
            onSize:xui.UI.$onSize,
            disableTips:true,
            MOVE:{
                beforeMousedown:function(profile, e, src){
                    if(xui.Event.getBtn(e)!="left")return;
                    var pro=profile.properties;
                    if(pro.disabled)return;
                    
                    var min=pro.minWidth,
                        cursor=xui.use(src).css('cursor'),
                        pre=profile._pre=xui.use(src).parent(),
                        preW=profile._preW=pre.offsetWidth(),
                        next=profile._next=pre.next(),
                        nextW=profile._nextW=next.offsetWidth(),
                        offset1 = preW-min,
                        offset2 = nextW-min;

                        if(offset1<0)offset1=0;
                        if(offset2<0)offset2=0;

                    profile._bg=null;
                    profile._limited=0;
                        
                    xui.use(src).startDrag(e,{
                        dragType:'copy',
                        targetReposition:false,
                        horizontalOnly:true,
                        widthIncrement:10,
                        maxLeftOffset:offset1,
                        maxRightOffset:offset2,
                        dragCursor:cursor
                    });
                    
                },
                onDrag:function(profile, e, src){
                    var p=xui.DragDrop.getProfile(),b=0;
                    if(p.x<=p.restrictedLeft || p.x>=p.restrictedRight)b=true;
                    if(b){
                        if(!profile._limited){
                            profile._bg=p.proxyNode.css('backgroundColor');
                            p.proxyNode.css('backgroundColor','#ff6600');
                            profile._limited=true;
                        }
                    }else{
                        if(profile._limited){
                            p.proxyNode.css('backgroundColor',profile._bg);
                            profile._limited=0;
                        }
                    }
                },
                onDragstop:function(profile, e, src){
                    var pro=profile.properties,
                        min=pro.minWidth,
                        items=pro.items,
                        mins=[],
                        p=xui.DragDrop.getProfile(),
                        arr=profile.getSubNode('ITEM',true).get(),
                        n=xui.use(src),
                        l=profile.getRoot().width(),
                        a=[],t;

                    _.arr.each(arr,function(o,i){
                        a[i]=xui([o]).offsetWidth();
                        if(o==profile._pre.get(0))
                            a[i]+=p.offset.x;
                        else if(o==profile._next.get(0))
                            a[i]-=p.offset.x;
                    });                    
                    _.arr.each(items,function(o,i){
                        o.width=((a[i]/l)*100)+"";
                    });
                    xui.UI.$doResize(profile,l,null,true);
                }
            },
            onMousemove:function(profile,e){
                if(profile.$$ondrag){
                    var prop=profile.properties;
                    if(prop.disabled)return;
                    
                    if(xui.DragDrop.getProfile().isWorking){
                        var box=profile.box,
                            height=profile.$$height,
                            dragid = profile.$$dragitemid,
                            rst=box._checkpos(profile,xui.Event.getPos(e));
                        if(rst){
                            var col=rst[0],
                                row=rst[1],
                                rowup=rst[2];
                            if(col){
                                if(row)
                                    profile.$$droppable=box._checkDroppable(profile, rowup?2:3, xui(row), height, dragid);
                                else
                                    profile.$$droppable=box._checkDroppable(profile, 1, xui(col), height, dragid);
                            }else{
                                box._setNoDroppable(profile);
                                delete profile.$$droppable;
                            }
                        }
                    }
                }
            }
        },
        DataModel:{
            rotate:null,
            position:'absolute',
            dock:'fill',
            listKey:null,
            width:200,
            height:200,
            minWidth:200,
            disabled:{
                ini:false,
                action: function(v){
                    // no ui 
                }
            },
            items:[
                {id:'1',width:'33.3%'},
                {id:'2',width:'33.3%'},
                {id:'3',width:'33.3%'}
            ]
        },
        EventHandlers:{
            onColResize:function(profile, sizes){},
            onRelayout:function(profile, type, panel, size){}
        },
        _preparePosSizeEtc:function(profile){
            var root=profile.getRoot(),
                items=profile.getSubNode('ITEM',true),
                w=0,h=0,ns,i,t,

                rootPos=root.offset(),
                rootSize=root.cssSize(),
                colsWidthData=[],
                rowsHeightData=[];

            // gets contrl's pos / size, and inner widgets' cols/rows data for dragDrop
            items.each(function(o){
                w=w+xui(o).offsetWidth();
                colsWidthData.push([w, o.lastChild.id]);
                //get panel's children
                ns=o.lastChild.childNodes;
                h=0;
                rowsHeightData.push([]);
                for(i=0;t=ns[i];i++){
                    //ignore node without id/not uiprovile/
                    if(!t.id || !xui.UIProfile.getFromDom(t) || !t.style || t.style.display=='none' || t.style.visibility=='hidden')continue;
                    h=h+t.offsetHeight;
                    rowsHeightData[rowsHeightData.length-1].push([h,t.id]);
                }
            });
            profile._cachePosSizeData = [rootPos, rootSize, colsWidthData, rowsHeightData];
            
            profile._ddup=profile._ddid=profile._ddincol=profile._ddi==null;
        },
        _checkpos:function(profile, pos, force){
            var _data=profile._cachePosSizeData,
                rootPos=_data[0],
                rootSize=_data[1],
                colsWidthData=_data[2],
                rowsHeightData=_data[3],
                
                changed;

            var col,
                left = pos.left-rootPos.left,
                top = pos.top-rootPos.top,
                i=0, temp,
                t, to=0,
                arr;

            while(t=colsWidthData[i++]){
                if(left<t[0]){
                    if(profile._ddincol===t[1])
                        break;
                    changed=true;
                    profile._ddi=i-1;
                    profile._ddincol=t[1];
                    //if col changed, clear row vars
                    profile._ddid=profile._ddup=null;
                    break;
                }
            }
            if(profile._ddi!==null){
                col=profile._ddincol;
                arr=rowsHeightData[profile._ddi];
                i=0;
                while(t=arr[i++]){
                    if(top<t[0]){
                        //if raw changed, clear pos
                        if(profile._ddid!==t[1])
                            profile._ddup=null;
                        j=(top < (to+(t[0]-to)/2));
                        if(profile._ddid===t[1] && profile._ddup===j)
                            break;
                        profile._ddid=t[1];
                        profile._ddup=j;
                        changed=true;
                        break;
                    }
                    to=t[0];
                }
                if(changed || force)
                    return [col,profile._ddid,profile._ddup];
            }else{
                if(changed || force)
                    return [null];
                else
                    return;
            }
        },
        _checkDroppable:function(profile, type, node, height, dragid){
            var self=this,
                candrop=false,
                proxy= profile._proxy || (profile._proxy=xui.create('<div style="border:1px dashed #FF0000;">'));

            proxy.height(height||20);
            if(node.isEmpty())return;
            if(type===1){
                if(node.last().isEmpty() || node.last().id()!=dragid){
                    node.append(proxy);
                    candrop=true;
                }
            }else if(type===2){
                if(node.id()!=dragid){
                    if(node.prev().isEmpty() || node.prev().id()!=dragid){
                        node.addPrev(proxy);
                        candrop=true;
                    }
                }
            }else{
                if(node.id()!=dragid){
                    if(node.next().isEmpty() || node.next().id()!=dragid){
                        node.addNext(proxy);
                        candrop=true;
                    }
                }
            }
            if(candrop){
                xui.DragDrop.setDragIcon('add');
                return true;
            }else{
                self._setNoDroppable(profile);
                return false;
            }
        },
        _setNoDroppable:function(profile){
            if(profile._proxy){
                profile._proxy.remove();
                delete profile._proxy;
            }
            profile._ddup=profile._ddid=profile._ddincol=profile._ddi==null;
            xui.DragDrop.setDropFace();
        },
        
        _onDropMarkShow:function(){ 
            return false;
        },
        _onDropMarkClear:function(profile){
            profile.box._setNoDroppable(profile);
        },
        _onDragEnter:function(profile,e,src){
            var ddId=xui.DragDrop.getProfile().$id;
            if(profile.$$ddfalg != ddId){
                profile.$$ddfalg = ddId;
                profile.box._preparePosSizeEtc(profile);
            }
            
            var targetPrf = xui.DragDrop.getProfile().dragData.profile;

            // inner panel
            if(targetPrf &&  targetPrf.parent==profile){
                profile.$$dragitemid=xui.DragDrop.getProfile().dragData.profile.domId;
                profile.$$height=xui.DragDrop.getProfile().dragData.profile.getRoot().offsetHeight();
            }
            profile.getSubNode('COVER').css({display:'block'});
            profile.$$ondrag=true;

            delete profile.$$dropalbe;
        },
        _onDragLeave:function(profile){
            profile.getSubNode('COVER').css({display:'none'});
            delete profile.$$dragitemid;
            delete profile.$$height;
            delete profile.$$ondrag;
        },
        _onDrop:function(profile, e){
            if(profile.$$droppable){
                var rst=profile.box._checkpos(profile, xui.Event.getPos(e), true),
                    ddd=xui.DragDrop.getProfile().dragData,
                    targetPrf=ddd.profile,
                    exists = targetPrf.parent==profile;

                if(rst && rst[0]){
                    var col=profile.getItemIdByDom(rst[0]),
                        base=xui.UIProfile.getFromDom(rst[1]),
                        before=rst[2];
                    if(col){
                        if(exists){
                            // move only
                            profile.boxing().movePanel(targetPrf,col,base,before,'repos');
                        }else{
                            // add
                            profile.boxing().addPanel(ddd.data.properties,ddd.data.events,col,base,before,'dropadd');
                        }
                    }
                }
            }
            profile.getSubNode('COVER').css({display:'none'});
            profile.box._setNoDroppable(profile);
            delete profile._cachePosSizeData;
            delete profile.$$height;
            delete profile.$$ondrag;
        },
        _prepareData:function(profile){
            profile.properties.dropKeys = profile.box.KEY+":"+profile.$xid;
            var data = arguments.callee.upper.call(this, profile);
            data.items[data.items.length-1]._displaymove="display:none";
            return data;
        },
        _onresize:function(profile,width,height){
            if(!width)return;
            var ins=profile.boxing(),
                root=profile.getRoot(),
                pro=profile.properties,
                min=pro.minWidth,
                items=pro.items,
                mins=[],othersl=0,
                arr=profile.getSubNode('ITEM',true).get(),
                arr2=profile.getSubNode('PANEL',true).get(),
                itemsN=profile.getSubNode('ITEMS'),
                ll=width,
                a=[],t,needRec;

            //1
            _.arr.each(items,function(o,i){
                t=parseFloat(o.width)/100;
                a[i]=width*t;
                // fix
                if(a[i]<min){
                    a[i]=min;
                    ll-=min;
                    mins.push(o);
                    needRec=true;
                }
                // need recaculate
                else{
                    othersl+=t;
                }
            });
            //2
            if(needRec){
                width=ll;
                needRec=false;
                _.arr.each(items,function(o,i){
                    if(_.arr.indexOf(mins,o)==-1){
                        t=parseFloat(o.width)/100;
                        a[i]=width*(t/othersl);
                        // fix
                        if(a[i]<min){
                            a[i]=min;
                            ll-=min;
                            mins.push(o);
                            needRec;
                        }
                    }
                });
            }
            //3
            if(needRec){
                _.arr.each(items,function(o,i){
                    if(_.arr.indexOf(mins,o)==-1){
                        a[i]=ll;
                        if(a[i]<min){
                            a[i]=min;
                        }
                    }
                });
            }
            // set items' with
            width=0;
            _.arr.each(a,function(o,i){
                width+=o;
            });
            itemsN.width(width);

            // set item's width
            _.arr.each(arr,function(o,i){
                var flag=xui.browser.ie6 && parseFloat(o.style.width)>a[i];
                if(!flag)o.style.width = parseInt(a[i],10) + 'px';
            });
            profile._warr=a;
            if(profile.onColResize)ins.onColResize(profile, a);
            
            if(profile.onRelayout){
                ins.getChildren().each(function(panel){
                    panel.ColLayoutSize=profile._warr?profile._warr[panel.ColLayoutColumn]:300;
                    ins.onRelayout(profile, 'resize', panel, panel.ColLayoutSize);
                });
            }
            if(xui.browser.ie6)
                _.arr.each(arr,function(o,i){
                    var flag=parseFloat(o.style.width)>a[i];
                    if(flag)o.style.width = a[i] + 'px';
                });
        }
    }
});
Class('xui.UI.TimeLine', ['xui.UI','xui.absList',"xui.absValue"], {
    Dependencies:['xui.Date'],
    Instance:{
        _setCtrlValue:function(value){
            if(!value)return;
            if(value.indexOf(':')==-1)return;
            var profile=this.get(0),
                p=profile.properties,
                box=this.constructor,
                a=value.split(':'),
                from=new Date(parseInt(a[0],10)),
                to=new Date(parseInt(a[1],10)),
                pxStart=box._getX(profile,from),
                pxEnd=box._getX(profile,to),
                task;

            if(p.items.length===0)
                this.insertItems([{id:'$', caption:p.dftTaskName, from:parseInt(a[0],10), to:parseInt(a[1],10)}],null,true);
            else
                box._resetItem(profile,{left:pxStart,width:pxEnd-pxStart},profile.getSubNodeByItemId('ITEM',p.items[0].id)._get(0));
        },
        visibleTask:function(){
            var profile=this.get(0),
                p=profile.properties,
                date=xui.Date,
                items=p.items,sv,target;

            if(!p.multiTasks){
                sv=items.length?items[0].from:p.$UIvalue?p.$UIvalue.split(':')[0]:0;
                if(sv){
                    target=new Date(+sv);
                    if(profile.renderId){
                        if(target<p.dateStart || target>date.add(p.dateStart,'ms',p.width*p._rate)){
                            p.dateStart=target;
                            var k=p.$UIvalue;
                            this.refresh().setUIValue(k,true,null,'task');
                        }
                    }else{
                        p.dateStart=target;
                    }
                }
            }
            return this;
        },
        _afterInsertItems:function(profile){
            if(!profile.renderId)return;
           profile.box._reArrage(profile);
        },
        _afterRemoveItems:function(profile){
            profile.box._reArrage(profile);
        },
        _cache:function(){
            var profile=this.get(0),
                cls=this.constructor,
                picker=cls._picker;
            if(picker && picker.renderId)
                profile.getSubNode('POOL').append(picker.getRoot().css('display','none'));
        },
        getTimeRange:function(){
            var profile=this.get(0), p=profile.properties;
            return [p._smallLabelStart, p._smallLabelEnd];
        },
        iniContent:function(){
            return this.each(function(profile){
                var p=profile.properties;
                profile.boxing()._getContent(p._smallLabelStart,p._smallLabelEnd,p._rate,'ini');
                profile._iniOK=true
            });
        },

        addTasks:function(arr){
            return this.insertItems(arr,null,true);
        },
        removeTasks:function(ids){
            this.removeItems(ids);
            return this;
        },
        _getContent:function(from,to,rate,type){
//console.log('getContent',from,to,rate,type);
            return this.each(function(profile){
                if(profile.onGetContent){
                    var ins=profile.boxing(),
                        callback=function(arr){
                            if(type=='ini')
                                ins.clearItems();
                            ins.addTasks(arr);
                        };
                    if(profile.onGetContent){
                        var r = ins.onGetContent(profile, from, to, rate, type, callback);
                        if(r)callback(r);
                    }
                }
            });
        },
        scrollToLeft:function(callback){
            var profile=this.get(0);
            if(profile.pauseA||profile.pause)return;

            var t=profile.properties,
                date=xui.Date,
                rate=t._rate,
                o=profile.box._getMoveNodes(profile),
                x1=t._band_left,
                x2=0;
            ;
            if(t.minDate && t._smallLabelStart<t.minDate)
                x2-=date.diff(t._smallLabelStart,t.minDate,'ms')/rate;

            profile.pause=true;
            o.animate({left:[x1,x2]}, null, function(){
                if(typeof callback=='function')
                    callback();
                profile.pause=false;
            },Math.max(300,(x2-x1)/10),0,'sineInOut').start();
        },
        scrollToRight:function(callback){
            var profile=this.get(0);                    
            if(profile.pauseA||profile.pause)return;
            var t=profile.properties,
                date=xui.Date,
                rate=t._rate,
                o=profile.box._getMoveNodes(profile),
                x1=t._band_left,
                x2=t.width-t._band_width;
            ;
            if(t.maxDate && t._smallLabelEnd>t.maxDate)
               x2+=date.diff(t.maxDate,t._smallLabelEnd,'ms')/rate;

            if(x1>x2){
                profile.pause=true;
                o.animate({left:[x1,x2]}, null, function(){
                    if(typeof callback=='function')
                        callback();
                    profile.pause=false;
                },Math.max(300,(x2-x1)/10),0,'sineInOut').start();
            }
        }
    },
    Static:{
        _shadowRB:"BBARTDR",
        Templates:{
            tagName:'div',
            style:'{_style}',
            className:'{_className}',
            BORDER:{
                tagName:'div',
                style:'height:{_bHeight}px;width:{_bWidth}px;',
                POOL:{
                    tagName:'div',
                    style:'position:absolute;left:0;top:0;width:0;height:0;display:none;'
                },
                TBAR:{
                    tagName:'div',
                    className:'xui-uibar-top',
                    style:'{_bardisplay};',
                    TBART:{
                        cellpadding:"0",
                        cellspacing:"0",
                        width:'100%',
                        border:'0',
                        tagName:'table',
                        className:'xui-uibar-t',
                        TBARTR:{
                            tagName:'tr',
                            TBARTDL:{
                                tagName:'td',
                                className:'xui-uibar-tdl'
                            },
                            TBARTDM:{
                                $order:1,
                                width:'100%',
                                tagName:'td',
                                className:'xui-uibar-tdm'
                            },
                            TBARTDR:{
                                $order:2,
                                tagName:'td',
                                className:'xui-uibar-tdr'
                            }
                        }
                    },
                    BARCMDL:{
                        tagName:'div',
                        className:'xui-uibar-cmdl',
                        DATE:{$order:0,style:'{dateDisplay}'},
                        PRE:{$order:2},
                        'ZOOMIN':{$order:3,style:'{zoomDisplay}'},
                        'ZOOMOUT':{$order:4,style:'{zoomDisplay}'},
                        NEXT:{$order:5}
                    },
                    BARCMDR:{
                        tagName: 'div',
                        className:'xui-uibar-cmdr',
                        OPT:{
                            className:'xui-uicmd-opt',
                            style:'{optDisplay}',
                            $order:0
                        },
                        CLOSE:{
                            $order:4,
                            className:'xui-uicmd-close ',
                            style:'{closeDisplay}'
                        }
                    }
                },
                MAIN:{
                    $order:2,
                    tagName:'div',
                    className:'xui-uicon-main',
                    MAINI:{
                        tagName:'div',
                        className:'xui-uibg-bar xui-uicon-maini',
                        MAINC:{
                            className:'xui-uiborder-flat xui-uibg-base',
                            tagName:'div',
                            MAINP:{
                                tagName:'div',
                                VIEW:{
                                    tagName:'div',
                                    style:'left:{_band_left}px;width:{_band_width}px;',
                                    BAND:{
                                        $order:2,
                                        tagName:'div',
                                        tabindex: '{tabindex}',
                                        BIGLABEL:{
                                            tagName:'div',
                                            className:"xui-uitd xui-uiborder-b",
                                            style:'{_showBigLabel}',
                                            text:"{_bigMarks}"
                                        },
                                        SMALLLABEL:{
                                            $order:1,
                                            tagName:'div',
                                            className:"xui-uitd xui-uiborder-b",
                                            text:"{_smallMarks}"
                                        }
                                    },
                                    CON:{
                                        $order:3,
                                        tagName:'div',
                                        style:'height:{_viewHeight}px;',
                                        BG:{
                                            tagName:'div',
                                            style:'height:{_viewHeight}px;'
                                        },
                                        LINES:{
                                            $order:1,
                                            tagName:'div'
                                        },
                                        ITEMS:{
                                            $order:2,
                                            tagName:'div',
                                            style:'height:{_viewHeight}px;',
                                            text:'{items}'
                                        }
                                    },
                                    ACTIVE:{
                                        $order:4,
                                        tagName:'div'
                                    }
                                },
                                SCROLL:{
                                    $order:2,
                                    tagName:'div',
                                    SCROLLI:{
                                        tagName:'div'
                                    }
                                }
                            }
                        }
                    }
                },
                TAIL:{
                    $order:4,
                    tagName:'div',
                    className:'xui-uicon-main',
                    TIPS:{
                        className:'xui-uibg-bar xui-uicon-maini',
                        style:'z-index:2;{_tipsdisplay};',
                        tagName:'div'
                    }
                },
                BBAR:{
                    $order:5,
                    tagName:'div',
                    style:'{_bardisplay};',
                    className:'xui-uibar-bottom-s',
                    BBART:{
                        cellpadding:"0",
                        cellspacing:"0",
                        width:'100%',
                        border:'0',
                        tagName:'table',
                        className:'xui-uibar-t',
                        BBARTR:{
                            tagName:'tr',
                            BBARTDL:{
                                tagName:'td',
                                className:'xui-uibar-tdl'
                            },
                            BBARTDM:{
                                $order:1,
                                width:'100%',
                                tagName:'td',
                                className:'xui-uibar-tdm'
                            },
                            BBARTDR:{
                                $order:2,
                                tagName:'td',
                                className:'xui-uibar-tdr'
                            }
                        }
                    }
                }
            },
            $submap : {
                _bigMarks:{
                    LABELT:{
                        id:null,
                        className:"xui-uiborder-r",
                        tagName:'div',
                        style:'width:{width}px;left:{left}px;',
                        text:'&nbsp;&nbsp;{text}'
                    }
                },
                _smallMarks:{
                    LABELB:{
                        id:null,
                        className:"xui-uiborder-r",
                        tagName:'div',
                        style:'width:{width}px;left:{left}px;',
                        text:'{text}'
                    }
                },
                bgitems:{
                    BGITEM:{
                        tagName:'div',
                        style:'left:{_left}px;width:{_width}px;'
                    }
                },
                items:{
                    ITEM:{
                        tagName:'div',
                        className:'xui-uiborder-flat {itemClass} {disabled} {readonly} {_excls}',
                        style:'left:{_left}px;width:{_width}px;{_top};{_zindex}{itemStyle}',
                        HEAD:{
                            tagName:'div',
                            className:"xui-uiborder-b",
                            TSKBAR:{
                                tagName:'div',
                                className:"xui-uibg-bar",
                                style:'width:{_perw}%;'
                            },
                            HANDLER:{
                                $order:2,
                                tagName:'div',
                                LEFT:{
                                    tagName:'div'
                                },
                                RIGHT:{
                                    tagName:'div'
                                }
                            }
                        },
                        BODY:{
                            $order:1,
                            tagName:'div',
                            style:'{_background}',
                            CON:{
                                $order:3,
                                tagName:'div',
                                text:'{caption}'
                            }
                        }
                    }
                }
            }
        },
        Behaviors:{
            DroppableKeys:['VIEW'],
            HoverEffected:{PRE:'PRE',NEXT:'NEXT',ZOOMIN:'ZOOMIN',ZOOMOUT:'ZOOMOUT',DATE:'DATE',OPT:'OPT',CLOSE:'CLOSE'},
            ClickEffected:{PRE:'PRE',NEXT:'NEXT',ZOOMIN:'ZOOMIN',ZOOMOUT:'ZOOMOUT',DATE:'DATE',OPT:'OPT',CLOSE:'CLOSE'},
            onSize:xui.UI.$onSize,
            CLOSE:{
                onClick:function(profile, e, src){
                    if(profile.properties.disabled||profile.properties.readonly)return;
                    var instance = profile.boxing();

                    if(false===instance.beforeClose(profile, src)) return false;

                    instance.destroy(true);
                }
            },
            OPT:{
                onClick:function(profile, e, src){
                    if(profile.properties.disabled||profile.properties.readonly)return false;
                    profile.boxing().onShowOptions(profile, e, src);
                }
            },
            BAND:{
                onKeydown:function(profile, e, src){
                    if(profile.pauseA||profile.pause)return;
                    profile.pause=true;

                    // speed
                    var t=profile.properties,
                        date=xui.Date,
                        rate=t._rate,
                        maxOffset = 30,
                        o=profile.box._getMoveNodes(profile),
                        x=o.left(),
                        xx=t._band_left,
                        off=t._scroll_offset
                        ;

                    off = t._scroll_offset = off>maxOffset ? off :off*1.05;

                    switch(xui.Event.getKey(e).key){
                        case 'left':
                        case 'up':
                            if(t.minDate && date.add(t.dateStart,'ms',(xx-x-off)*rate)<t.minDate)
                                off=date.diff(t.minDate, t.dateStart,'ms')/rate + (xx-x);
                            if(off<0)off=0;
                            o.left(x + off);
                            break;
                        case 'right':
                        case 'down':
                            if(t.maxDate && date.add(t.dateStart,'ms',(xx-x+off+t.width)*rate)>t.maxDate)
                                off=date.diff(t.dateStart,t.maxDate,'ms')/rate - (xx-x+t.width);
                            if(off<0)off=0;
                            o.left(x - off);
                            break;
                    }

                    if((x + maxOffset > 0) || (x + o.width() - t.width - maxOffset < 0))
                        profile.box._rePosition(profile);
                    profile.pause=false;
                    return false;
                },
                onKeyup:function(profile, e){
                    var p=profile.properties;
                    p._scroll_offset = p._scrollRate;
                    profile.box._rePosition(profile);
                },
                beforeMousedown:function(profile, e, src){
                    if(xui.Event.getBtn(e)!="left")return;
                    if(profile.pauseA||profile.pause)return;
                    var t=profile.properties,
                        r=-t._band_left,
                        date=xui.Date,
                        rate=t._rate,
                        ep=xui.Event.getPos(e),
                        l=t._band_width-r-t.width;
                    ;
                    if(t.minDate && t._smallLabelStart<t.minDate)
                        r-=date.diff(t._smallLabelStart,t.minDate,'ms')/rate;
                    if(t.maxDate && t._smallLabelEnd>t.maxDate)
                        l-=date.diff(t.maxDate,t._smallLabelEnd,'ms')/rate;
                    if(r<0)r=0;
                    if(l<0)l=0;

                    xui.use(src).startDrag(e, {
                        targetReposition:false,
                        dragType:'blank',
                        dragDefer:2,
                        horizontalOnly:true,
                        targetLeft:ep.left,
                        targetTop:ep.top,
                        maxLeftOffset:l,
                        maxRightOffset:r
                     });
                     xui.use(src).focus();
                },
                onDragstop:function(profile, e, src){
                    profile.box._rePosition(profile);
                },
                onDrag:function(profile, e, src){
                    var ns=profile.box._getMoveNodes(profile),
                        dd=xui.DragDrop.getProfile();
                    ns.left(profile.properties._band_left +  dd.offset.x);
                },
                onContextmenu:function(profile, e, src){
                    return profile.boxing().onContextmenu(profile, e, src)!==false;
                }
            },
            SCROLL:{
                onScroll:function(profile, e, src){
                    profile.getSubNodes(['ITEMS','LINES']).top(-xui.use(src).scrollTop() );
                }
            },
            VIEW:{
                onMouseover:function(profile,e,src){
                    if(xui.DragDrop.getProfile().isWorking)return;
                    profile.$itemspos = xui.use(src).offset();
                },
                onMousemove:function(profile,e){
                    var ddd=xui.DragDrop.getProfile();
                    if(ddd.isWorking){
                        //ondrag add here, for performance of 'dont-use-droppable situation'.
                        if(profile.$$ondrag)
                            profile.box._moveActive(profile, profile.$active, ddd.x-profile.$dd_ox, profile.properties._unitPixs, 'move');
                    }else{
                        var t=profile.properties,
                            date=xui.Date,
                            s=t._smallLabelStart,
                            r=t._rate,
                            u=t._timeFormat,
                            p2=profile.$itemspos;
                        if(p2 && t.showTips){
                            var p1=xui.Event.getPos(e);
                            profile.box._setTips(profile, date.getText(date.add(s, 'ms', (p1.left-p2.left)*r),u));
                        }
                    }
                },
                onMouseout:function(profile,e,src){
                    if(xui.DragDrop.getProfile().isWorking)return;
                    if(profile.properties.showTips)
                        profile.box._setTips(profile, '');
                }
            },
            ITEMS:{
                beforeMousedown:function(profile, e, src){
                    if(xui.Event.getBtn(e)!="left")return;
                    var pro=profile.properties;
                    if(pro.disabled || pro.readonly)return;
                    if(profile.pauseA||profile.pause)return;
                    if(xui.Event.getSrc(e)!=xui.use(src).get(0))return;

                    var o = profile.getSubNode('ACTIVE');
                    o.css({width:0,visibility:'hidden'}).offset({left :xui.Event.getPos(e).left,  top :null});

                    profile.__actives=1;
                    o.startDrag(e, {
                        dragDefer:2,
                        dragType:'none'
                     });
                },
                onMouseup:function(profile){
                    if(profile.__actives)
                        delete profile.__actives;
                }
            },
            ACTIVE:{
                onDragbegin:function(profile, e, src){
                    profile.$dd_ox = xui.DragDrop.getProfile().x;
                    profile.$dd_oleft = parseInt(xui.use(src).get(0).style.left,10)||0;
                    xui.use(src).css('cursor','e-resize')
                    .parent().css('cursor','e-resize');
                },
                onDrag:function(profile, e, src){
                    var x=profile.$dd_oleft,
                        ddx=xui.DragDrop.getProfile().x,
                        w,offset;
                    if((offset =ddx-profile.$dd_ox)>=0){
                        w = offset;
                    }else{
                        x = x+offset; w = -offset;
                    }
                    profile.box._moveActive(profile, xui.use(src).get(0), x, w, 'all');
                },
                onDragstop:function(profile, e, src){
                    var r = profile.box._deActive(profile);
                    xui.use(src).css('cursor','').parent().css('cursor','');

                    var box=profile.box,
                        from=box._getTime(profile, r.left),
                        to=box._getTime(profile, r.left+r.width),
                        p=profile.properties,
                        task,t,
                        b=profile.boxing();

                    if(profile.properties.multiTasks){
                        task={id:_.id(),caption:p.dftTaskName,from:from,to:to};
                        if(profile.beforeNewTask && false===b.beforeNewTask(profile, task)){}else
                            b.addTasks([task]);
                    }else
                        b.setUIValue(from+":"+to,null,null,'drag');

                    profile.$dd_ox =profile.$dd_oleft=null;
                }
            },
            PRE:{
                onClick:function(profile, e){
                    profile.boxing().scrollToLeft(function(){
                        profile.box._rePosition(profile);
                    });
                 }
            },
            NEXT:{
                onClick:function(profile, e){
                    profile.boxing().scrollToRight(function(){
                        profile.box._rePosition(profile);
                    });
                }
            },
            ZOOMIN:{
                onClick:function(profile, e){
                    if(profile.pauseA||profile.pause)return;
                    var p=profile.properties,
                        box=profile.box,
                        z=box.$zoom,
                        index = _.arr.indexOf(z,p._unitParas),
                        o;
                    if(index > 0){
                        //profile.pause=true;
                        p.timeSpanKey =  z[index- 1][0];
                        box._refresh(profile,true);
                    }
                }
            },
            ZOOMOUT:{
                onClick:function(profile, e){
                    if(profile.pauseA||profile.pause)return;
                    var p=profile.properties,
                        box=profile.box,
                        z=box.$zoom,
                        index = _.arr.indexOf(z,p._unitParas),
                        o;
                    if(index < z.length -1){
                        //profile.pause=true;
                        p.timeSpanKey = z[index + 1][0];
                        box._refresh(profile,true);
                    }
                }
            },
            DATE:{
                onClick:function(profile, e, src){
                    if(profile.pauseA||profile.pause)return;
                    var cls=profile.box,
                        box=profile.boxing(),
                        from=profile.properties.dateStart,
                        o,node;

                    if(cls._picker && cls._picker.renderId){
                       o=cls._picker.boxing();
                    }else{
                        o=xui.create('DatePicker');
                        cls._picker=o.get(0);
                        o.beforeClose(function(){
                            this.boxing()._cache();
                            return false;
                        })
                        .beforeUIValueSet(function(p, ov, v){
                            var profile=this,
                                box=profile.boxing(),
                                p=profile.properties;
                            p.dateStart=v;
                            box._cache();
                        });
                    }
                    o.setValue(from,true,'click').setHost(profile);
                    node=o.reBoxing();
                    node.popToTop(src);

                    //for on blur disappear
                    node.setBlurTrigger(profile.key+" - "+profile.$xid, function(){
                        box._cache();
                    });

                    //for esc
                    xui.Event.keyboardHook('esc',0,0,0,function(){
                        box._cache();
                        //unhook
                        xui.Event.keyboardHook('esc');
                    });
                }
            },
            ITEM:{
                onClick:function(profile, e, src){
                    if(profile.onClickTask)
                        profile.boxing().onClickTask(profile, profile.getItemByDom(src), e, src);
                },
                onDblclick:function(profile, e, src){
                    if(profile.onDblclickTask)
                        profile.boxing().onDblclickTask(profile, profile.getItemByDom(src), e, src);
                },
                onDragbegin:function(profile, e, src){
                    var t=profile.getItemByDom(src),
                        type=profile.$dd_type,
                        cursor=type?'e-resize':'move',
                        ac=profile.$active;
                    profile.$dd_ox = xui.DragDrop.getProfile().x;
                    profile.$dd_oleft = parseInt(xui.use(src).get(0).style.left,10);
                    profile.$dd_owidth = Math.min(t._realwidth, parseInt(xui.use(src).get(0).style.width,10));
                    xui([ac]).css('display','block').cssPos({left :profile.$dd_oleft,  top :null}).width(profile.$dd_owidth-2);
                    xui([ac,ac.parentNode]).css('cursor',cursor);
                },
                onDrag:function(profile, e, src){
                    var x,w,
                        offset =xui.DragDrop.getProfile().x-profile.$dd_ox,
                        ddl=profile.$dd_oleft,
                        ddw=profile.$dd_owidth,
                        type=profile.$dd_type,
                        mtype=type;
                    if(type=="left"){
                        if(offset < ddw){
                            x = ddl + offset;
                            w = ddl + ddw - x;
                        }else{
                            mtype='right';
                            x = ddl + ddw;
                            w = offset - ddw;
                        }
                    }else if(type == "right"){
                        if(-offset < ddw){
                            x = ddl;
                            w = ddw + offset;
                        }else{
                            mtype='left';
                            x = ddl + offset + ddw;
                            w = -offset - ddw;
                        }
                    }else{
                        mtype='move';
                        x = ddl + offset;
                        w = ddw;
                    }
                    profile.box._moveActive(profile, profile.$active, x, w, mtype);
                },
                onDragstop:function(profile, e, src){
                    var box=profile.box,
                        r = profile.box._deActive(profile),
                        ac=profile.$active;

                        var from=box._getTime(profile, r.left),
                            to=box._getTime(profile,r.left+r.width);
                    if(profile.properties.multiTasks){
                        if(profile.beforeTaskUpdated && false===profile.boxing().beforeTaskUpdated(profile, profile.getItemByDom(src), from, to)){}else
                            box._resetItem(profile,r,src);
                    }else
                        profile.boxing().setUIValue(from+":"+to,null,null,'drag2');

                    profile.$dd_type = null;

                    xui([ac,ac.parentNode]).css('cursor','');
                },
                onContextmenu:function(profile, e, src){
                    return profile.boxing().onContextmenu(profile, e, src)!==false;
                }
            },
            HEAD:{
                beforeMousedown:function(profile, e, src){
                    if(xui.Event.getBtn(e)!="left")return;
                    var ps=profile.properties, item=profile.getItemByDom(src);
                    if(ps.disabled  || item.disabled)return;
                    if(ps.readonly  || item.readonly)return;
                    if(profile.beforeDragTask && false===profile.boxing().beforeDragTask(profile, item, e, src))
                        return;
                    if(ps.readonly||item.readonly)return;
                    xui.use(src).parent().startDrag(e, {
                        dragDefer:2,
                        dragType:'none'
                    });
                },
                onClick:function(){
                    return false;
                }
            },
            LEFT:{
                beforeMousedown:function(profile, e, src){
                    if(xui.Event.getBtn(e)!="left")return;
                    var ps=profile.properties, item=profile.getItemByDom(src);
                    if(ps.disabled || ps.readonly || item.readonly || item.disabled)return;
                    profile.$dd_type='left';
                    xui.use(src).parent(3).startDrag(e, {
                        dragDefer:2,
                        dragType:'none'
                    });
                }
            },
            RIGHT:{
                beforeMousedown:function(profile, e, src){
                    if(xui.Event.getBtn(e)!="left")return;
                    var ps=profile.properties, item=profile.getItemByDom(src);
                    if(ps.disabled || ps.readonly || item.readonly || item.disabled)return;
                    profile.$dd_type='right';
                    xui.use(src).parent(3).startDrag(e, {
                        dragDefer:2,
                        dragType:'none'
                    });
                }
            }
        },
        DataModel:{
            readonly:false,
            // control width and height
            width : 400,
            height : 200,
            //invisible band count (left,right)
            //if it's zero, leftSpanCount will be equal to the visible span count(based on widget width)
            leftSpanCount:{
                ini:0,
                inner:1
            },
            rightSpanCount:{
                ini:0,
                inner:1
            },
            increment:0,
            zoomable:{
                ini:true,
                action:function(v){
                    if(this.properties.timeSpanKey)
                        this.getSubNodes(['ZOOMIN','ZOOMOUT']).css('display',v?'':'none');
                }
            },
            dftTaskName:'task',
            taskHeight:{
                ini:25,
                action:function(v){
                    this.getSubNode('ITEM',true).height(v);
                }
            },

            //time span key
            timeSpanKey : {
                ini:'1 d',
                combobox:['10 ms', '100 ms','1 s','10 s', '1 n','5 n', '10 n', '30 n', '1 h', '2 h', '6 h', '1 d', '1 w', '15 d', '1 m',  '1 q',  '1 y',  '1 de',  '1 c'],
                action:function(){
                    this.box._refresh(this,true);
                }
            },
            // how much px to represent a unit
            // defalut value is from timeSpanKey
            unitPixs : 0,

/*
*inner properties
*defalut value is from timeSpanKey
*/
            //time span count
            smallLabelCount:{
                inner:1
            },
            //time span unit
            smallLabelUnit:{
                inner:1,
                listbox:_.toArr(xui.Date.$TIMEUNIT,true)
            },
            //small label format
            smallLabelFormat:{
                inner:1,
                listbox:_.toArr(xui.Date.$TEXTFORMAT,true)
            },
            bigLabelCount:{
                inner:1
            },
            //time span unit
            bigLabelUnit:{
                inner:1,
                listbox:_.toArr(xui.Date.$TIMEUNIT,true)
            },

            //big label format
            bigLabelFormat:{
                inner:1,
                listbox:_.toArr(xui.Date.$TEXTFORMAT,true)
            },
            //time format
            timeFormat:{
                inner:1,
                listbox:_.toArr(xui.Date.$TEXTFORMAT,true)
            },
/*inner properties*/
            //bar
            showBar:{
                ini:true,
                action:function(v){
                    this.getSubNode('TBAR').css('display',v?'':'none');
                    var p=this.properties,w=p.width,h=p.height;
                    p.width=p.height=0;
                    xui.UI.$tryResize(this,w,h,true);
                    p.width=w,p.height=h;
                }
            },
            //tips
            showTips:{
                ini:true,
                action:function(v){
                    this.getSubNode('TIPS').css('display',v?'':'none');
                    var p=this.properties,w=p.width,h=p.height;
                    p.width=p.height=0;
                    xui.UI.$tryResize(this,w,h,true);
                    p.width=w,p.height=h;
                }
            },
            //big label
            showBigLabel: {
                ini:true,
                action:function(v){
                    this.getSubNode('BIGLABEL').css('display',v?'':'none');
                    var p=this.properties,w=p.width,h=p.height;
                    p.width=p.height=0;
                    xui.UI.$tryResize(this,w,h,true);
                    p.width=w,p.height=h;
                }
            },

            _scrollRate:5,

            multiTasks: {
                ini:false,
                action:function(){
                    this.box._refresh(this,true);
                }
            },
            taskMinSize:60,
            minDate:{
                ini:null,
                type:'date'
            },
            maxDate:{
                ini:null,
                type:'date'
            },
            dateBtn:{
                ini:true,
                action:function(v){
                    this.getSubNode('DATE').css('display',v?'':'none');
                }
            },
            closeBtn:{
                ini:false,
                action:function(v){
                    this.getSubNode('CLOSE').css('display',v?'':'none');
                }
            },
            optBtn:{
                ini:false,
                action:function(v){
                    this.getSubNode('OPT').css('display',v?'':'none');
                }
            },
            dateStart : {
                ini:new Date,
                action:function(){
                    this.box._refresh(this,true);
                }
            }
        },
        EventHandlers:{
            beforeClose:function(profile, src){},
            onShowOptions:function(profile, e, src){},
            onGetContent:function(profile, from, to, minMs, type, callback){},
            onStartDateChanged:function(profile, odate, date){},
            beforeTaskUpdated:function(profile, task, from, to){},
            beforeNewTask:function(profile, task){},
            beforeDragTask:function(profile, task, e, src){},
            onClickTask:function(profile, task, e, src){},
            onDblclickTask:function(profile, task, e, src){}
        },
        Appearances:{
            MAINI:{
                'padding-top':'4px'
            },
            MAINC:{
            },
            'BARCMDL span':{
                $order:0,
                width:'15px',
                height:'15px',
                margin:'2px',
                'vertical-align': 'middle',
                cursor:'default'
            },
            BAND:{
                'outline-offset':'-1px',
                '-moz-outline-offset':(xui.browser.gek && xui.browser.ver<3)?'-1px !important':null,
                'font-size':'0',
                'line-height':'0'                
            },
            'MAINP, VIEW, BAND, CON, BIGLABEL, SMALLLABEL':{
                position:'relative'
            },
            'MAINP, VIEW':{
                width:xui.browser.ie6?'100%':null,
                overflow:'hidden'
            },
            SCROLL:{
                'z-index':500,
                position:'absolute',
                'font-size':'0',
                'line-height':'0',
                right:0,
                width:'18px',
                overflow:'auto',
                'overflow-x': 'hidden'
            },
            SCROLLI:{
                height:'1000px',
                width:'1px'
            },
            BG:{
                'z-index':2,
                position:'absolute',
                left:0,
                top:0,
                width:'100%'
            },
            LINES:{
                'z-index':3,
                position:'absolute',
                left:0,
                top:0,
                width:'100%'
            },
            ITEMS:{
                'z-index':4,
                position:'absolute',
                left:0,
                top:0,
                width:'100%',
                overflow:'hidden'
            },
            'LINES div':{
                position:'relative'
            },
            'BIGLABEL, SMALLLABEL':{
                height:'16px',
                cursor:'move'
            },
            'BIGLABEL div, SMALLLABEL div':{
                height:'16px',
                'text-align':'center',
                position:'absolute',
                cursor:'move',
                top:0,
                overflow:'visible'
            },
            'BIGLABEL div':{
                $order:2,
                'text-align':'left'
            },
            TIPS:{
                position:'relative',
                height:'14px',
                'font-size':'12px',
                'line-height':'14px',
                'text-align':'center'
            },
            ACTIVE:{
                'z-index':300,
                'border-left': '1px dashed',
                'border-right': '1px dashed',
                position:'absolute',
                top:0,
                left:'-1000px',
                width:0,
                background:0,
                visibility:'hidden',
                height:'100%'
            },
            'ZOOMIN, ZOOMOUT, DATE, PRE, NEXT':{
                'background-image': xui.UI.$bg('icons.gif', '', true),
                'background-repeat':'no-repeat'
            },
            ZOOMIN:{
                $order:1,
                'background-position':'-360px -70px'
            },
            'ZOOMIN-mouseover':{
                $order:2,
                'background-position': '-360px -90px'
            },
            'ZOOMIN-mousedown':{
                $order:3,
                'background-position': '-360px -110px'
            },
            ZOOMOUT:{
                $order:1,
                'background-position':'-380px -70px'
            },
            'ZOOMOUT-mouseover':{
                $order:2,
                'background-position': '-380px -90px'
            },
            'ZOOMOUT-mousedown':{
                $order:3,
                'background-position': '-380px -110px'
            },
            DATE:{
                $order:1,
                'background-position':'-340px -70px'
            },
            'DATE-mouseover':{
                $order:2,
                'background-position':' -340px -90px'
            },
            'DATE-mousedown':{
                $order:3,
                'background-position':' -340px -110px'
            },
            PRE:{
                $order:1,
                'background-position':'-260px -70px',
                top:'0'
            },
            'PRE-mouseover':{
                $order:2,
                'background-position': '-260px -90px'
            },
            'PRE-mousedown':{
                $order:3,
                'background-position': '-260px -110px'
            },
            NEXT:{
                $order:1,
                position:'absolute',
                'background-position':'-280px -70px',
                top:'0'
            },
            'NEXT-mouseover':{
                $order:2,
                'background-position': '-280px -90px'
            },
            'NEXT-mousedown':{
                $order:3,
                'background-position': '-280px -110px'
            },
            BGITEM:{
                position:'absolute',
                top:0,
                height:'100%'
            },
            ITEM:{
                position:'absolute',
                overflow:'hidden'
            },
            'HEAD, BODY':{
                position:'relative',
                overflow:'hidden',
                'z-index':'1'
            },
            BODY:{
                $order:2,
                cursor:'pointer'
            },
            'HEAD, HANDLER, TSKBAR, LEFT, RIGHT':{
                'font-size':'1px',
                'line-height':'1px'
            },
            HEAD:{
                cursor:'move'
            },
            HANDLER:{
                position:'relative',
                height:'7px',
                'background-image':xui.UI.$bg('handler.gif', '', true),
                'background-repeat':'repeat'
            },
            TSKBAR:{
                position:'relative',
                height:'1px',
                width:'100%'
            },
            'LEFT, RIGHT':{
                position:'absolute',
                top:0,
                height:'100%',
                width:'6px',
                'z-index':10
            },
            'LEFT':{
                cursor:'e-resize',
                left:'-1px'
            },
            'RIGHT':{
                cursor:'w-resize',
                right:'-1px'
            },
            CON:{
                position:'relative',
                overflow:'hidden'
            },
            'ITEM-readonly HANDLER, ITEM-disabled HANDLER, ITEM-readonly LEFT, ITEM-disabled LEFT, ITEM-readonly RIGHT, ITEM-disabled RIGHT':{
                $order:2,
                display:'none'
            },
            'ITEM-readonly HEAD, ITEM-disabled HEAD':{
                cursor:'default'
            },
            'ITEM-readonly CON, ITEM-disabled CON':{
                $order:2
            }
        },
        RenderTrigger:function(){
            var self=this, p=self.properties,cls=self.box;
            self.$active = self.getSubNode('ACTIVE').get(0);
            cls._ajustHeight(self);
        },
        _onDropMarkShow:function(){xui.DragDrop.setDragIcon('add');return false},
        _onDropMarkClear:function(){xui.DragDrop.setDragIcon('none');return false},
        _onDragEnter:function(profile,e,src){
            var t=profile.properties,
                ep=xui.Event.getPos(e),
                _left = t._unitPixs/2
            ;
            xui(profile.$active).css('visibility','visible');
            profile.$dd_ox =xui.use(src).offset().left+_left;

            profile.$$ondrag=true;
        },
        _onDragLeave:function(profile){
            profile.$$ondrag=profile.$dd_ox=null;

            profile.box._deActive(profile);
        },
        _onDrop:function(profile){
            profile.$$ondrag=profile.$dd_ox=null;

            var r = profile.box._deActive(profile),
                task={id:_.id(),caption:profile.properties.dftTaskName},
                box=profile.box,
                b=profile.boxing();

            task.from = box._getTime(profile, r.left);
            task.to = box._getTime(profile, r.left+r.width);
            task._dropData=xui.DragDrop.getProfile().dragData;

            if(profile.beforeNewTask && false===b.beforeNewTask(profile, task)){}else
                b.addTasks([task]);
        },
        _prepareData:function(profile){
            var p=profile.properties,
                d={},
                date=xui.Date,
                us=date.$TIMEUNIT,
                nodisplay='display:none',
                zoom=profile.box.$zoom,
                m=0,u,
                i,t,label,temp,_date,width,rate,
                _unitParas,
                _dateStart,
                _barCount,_leftBarCount,_rightBarCount,_barCountall,

                smallMarks,smallLabelStart,smallLabelEnd,smallLabelUnit,smallLabelCount,smallLabelFormat
                ;


            d.dateDisplay = p.dateBtn?'':nodisplay;
            d.closeDisplay = p.closeBtn?'':nodisplay;
            d.optDisplay = p.optBtn?'':nodisplay;
            d._showBigLabel=p.showBigLabel?'':nodisplay;

            // for quick move
            p._scroll_offset = p._scrollRate;

            p._lines=[{}];

            //border
            d._bWidth = p.width;
            d._bHeight = p.height;
            //view
            p._viewHeight = d._bHeight;
            d._tipsdisplay=p.showTips?'':nodisplay;
            d._bardisplay = p.showBar?'':nodisplay;

            //get unitparas from timespan key
            if(p.timeSpanKey){
                _.arr.each(zoom,function(o){
                    if(o[0]===p.timeSpanKey){
                        _unitParas=p._unitParas=o;
                        return false;
                    }
                });
                //give a default key
                if(!_unitParas)
                    _unitParas=p._unitParas=zoom[p.timeSpanKey='1 d'];
            }
            //if no timeSpanKey( _unitParas) input,
            d.zoomDisplay = (p.zoomable && _unitParas)?'':nodisplay

            if(_unitParas){
                p._unitPixs = p.unitPixs||_unitParas[1];
                p._smallLabelCount = p.smallLabelCount||_unitParas[2];
                p._smallLabelUnit = p.smallLabelUnit||_unitParas[3];
                p._smallLabelFormat = p.smallLabelFormat||_unitParas[4];
                p._bigLabelCount = p.bigLabelCount||_unitParas[5];
                p._bigLabelUnit = p.bigLabelUnit||_unitParas[6];
                p._bigLabelFormat = p.bigLabelFormat||_unitParas[7];
                p._timeFormat = p.timeFormat||_unitParas[8];
            }
            u=p._unitPixs;
            smallLabelCount = p._smallLabelCount;
            smallLabelUnit = p._smallLabelUnit;
            smallLabelFormat = p._smallLabelFormat;

            // get bar count in view
            _barCount = (Math.ceil(p.width / u)||0);
            _leftBarCount = p.leftSpanCount?p.leftSpanCount:_barCount;
            _rightBarCount = p.rightSpanCount?p.rightSpanCount:_barCount;
            _barCountall =  _barCount + _leftBarCount + _rightBarCount;

            // ms per px
            rate = p._rate = us[smallLabelUnit]*smallLabelCount/u;

            //adjust dateStart
            if(p.maxDate&& date.add(p.dateStart,'ms',p.width*rate) > p.maxDate)
                p.dateStart=date.add(p.maxDate,'ms',-p.width*rate);
            if(p.minDate&& p.dateStart<p.minDate)
                p.dateStart=p.minDate;

            // get the round start from the approximate start
            _dateStart = date.getTimSpanStart(p.dateStart, smallLabelUnit, smallLabelCount);
            // rel start in band
            smallLabelStart=p._smallLabelStart = date.add(_dateStart, smallLabelUnit, -_leftBarCount*smallLabelCount);
            // rel to in band
            smallLabelEnd = p._smallLabelEnd = date.add(smallLabelStart, smallLabelUnit, _barCountall*smallLabelCount);

            // get band with
            p._band_width = Math.ceil(date.diff(smallLabelStart,smallLabelEnd, 'ms')/rate);

            // set band left
            p._band_left_fix = p._band_left = - Math.ceil(date.diff(smallLabelStart, p.dateStart, 'ms')/rate);

            // build bars
            smallMarks = p._smallMarks = [];

            temp=0;
            label=date.get(smallLabelStart, smallLabelFormat);
            for(i=0; i< _barCountall; i++){
                _date = date.add(smallLabelStart, smallLabelUnit, smallLabelCount*(i+1));
                width = Math.ceil(date.diff(smallLabelStart, _date, 'ms')/rate);
                smallMarks.push({
                    left : temp,
                    width : width - temp,
                    text : label
                });
                temp=width;
                label=date.getText(_date, smallLabelFormat);
            }


            if(p.showBigLabel){
                var _barCount2,off,
                    bigMarks,bigLabelStart,bigLabelEnd,

                    bigLabelCount = p._bigLabelCount,
                    bigLabelUnit = p._bigLabelUnit,
                    bigLabelFormat = p._bigLabelFormat
                    ;

                bigMarks = p._bigMarks = [];
                bigLabelStart=p._bigLabelStart =date.getTimSpanStart(smallLabelStart, bigLabelUnit, bigLabelCount);
                bigLabelEnd=p._bigLabelEnd = date.getTimSpanEnd(smallLabelEnd, bigLabelUnit, bigLabelCount);
                _barCount2 = date.diff(bigLabelStart, bigLabelEnd, bigLabelUnit)/bigLabelCount;
                off=date.diff(smallLabelStart, bigLabelStart, 'ms')/rate;
                label=date.getText(bigLabelStart, bigLabelFormat);
                temp=0;
                for(i=0; i< _barCount2; i++){
                    _date = date.add(bigLabelStart, bigLabelUnit, bigLabelCount*(i+1));
                    width = date.diff(bigLabelStart, _date, 'ms')/rate;
                    bigMarks.push({
                        left : Math.ceil(temp + off),
                        width : Math.ceil(width - temp),
                        text : label
                    });
                    temp=width;
                    label=date.getText(_date, bigLabelFormat);
                }
            }
            return arguments.callee.upper.call(this, profile, d);
        },
        _prepareItem:function(profile, item, oitem, pid){
            var self=this,
                t=profile.properties,
                index;
            if(!item.id)item.id=_.id();
            if(!item.caption)item.caption=t.dftTaskName;
            // caculate left and width
            item._realleft=item._left=self._getX(profile, item.from);
            item._realwidth=item._width=Math.max(self._getX(profile, item.to) - item._left, 0);
            if(item._width<=t.taskMinSize){
                item._width=t.taskMinSize;
            }
            // if too long, cut left
            if(item._left<0){
                item._left=0;
            }
            // if too long, cut right
            if(item._left+item._width>t._band_width){
                item._width=t._band_width-item._left;
            }
            item._perw=+(item._realwidth/item._width*100).toFixed(2);
            if(item._perw>=100)item._perw=100;

            // caculate top and set task to lines cache
            index = self._getLinePos(profile, item);

            item._top = 'top:' + (t.taskHeight+1) * (index-1) + 'px';
            item._zindex = 'z-index:'+index;

            item._background = item.background?'background:'+item.background+';':'';
            
            item._excls=item.disabled?profile.getClass('ITEM','-disabled'):item.readonly?profile.getClass('ITEM','-readonly'):'';

            t._lines = t._lines || [{}];

            //set double link
            t._lines[index][item.id]=item;
            item._line = index;

            oitem._realleft=item._realleft;
            oitem._left=item._left;
            oitem._width=item._width;
            oitem._realwidth=item._realwidth;
            oitem._perw=item._perw;
            oitem._line=item._line;
        },
        $zoom:[
            /*
            *[
            *  id,
            *  small span unit count,
            *  small span unit,
            *  small span to big span function,
            *  small span lable format,
            *  big span lable format,
            *  value format
            *]
            */
            ['10 ms', 54, 10, 'ms', 'ms', 100, 'ms','hnsms','hnsms'],
            ['100 ms',54,  100, 'ms', 'ms', 1, 's','hns','hnsms'],
            ['1 s',30,  1, 's','s', 10, 's','hns','hnsms'],
            ['10 s', 30, 10, 's', 's',60, 's','hns','hnsms'],
            ['1 n',30,  1, 'n','n', 10, 'n','dhn','hns'],
            ['5 n', 30, 5, 'n','n', 30, 'n','mdhn','hns'],
            ['10 n', 30, 10, 'n','n', 60, 'n','mdhn','hns'],
            ['30 n', 30, 30, 'n','n', 4, 'h','ymdh','mdhn'],
            ['1 h', 30, 1, 'h','h',  6, 'h','ymdh','mdhn'],
            ['2 h', 30, 2, 'h','h', 12, 'h','ymdh','mdhn'],
            ['6 h', 30, 6, 'h','h', 24, 'h','ymd','mdhn'],
            ['1 d', 24, 1, 'd','w', 1, 'ww','ymd','ymdh'],
            ['1 w', 30, 1, 'ww','ww', 4, 'ww','ymd','ymd'],
            ['15 d', 30, 15, 'd','d', 2, 'm','ymd','ymd'],

//Not every unit width is the same value:
            ['1 m',  30,1, 'm','m', 1, 'q','yq','ymd'],
            ['1 q',  30,1, 'q','q', 1, 'y','y','ymd'],
            ['1 y',  48,1, 'y','y', 10, 'y','y','ym'],
            ['1 de',  48, 1, 'de','de', 100, 'y','y','ym'],
            ['1 c',  48, 1, 'c', 'c', 1000, 'y','y','y']

        ],
        _getTips:function(profile){
            var t,s='$dd_tooltip';
            if(t = profile[s] || (profile[s] = profile.getSubNode('TIPS').get(0).childNodes[0]))
                return t.nodeValue;
            else
                return profile.getSubNode('TIPS').get(0).innerHTML;
        },
        _rr:/\<[^>]*\>/g,
        _setTips:function(profile, text, force){
            if(!force && profile.pauseA)return;
            var t,s='$dd_tooltip';
            text=text.replace(this._rr,'');
            if(t = profile[s] || (profile[s] = profile.getSubNode('TIPS').get(0).childNodes[0])){
                if(t.nodeValue!=text)t.nodeValue=text;
            }else
                profile.getSubNode('TIPS').get(0).innerHTML=text;
        },
        _getX:function(profile, time){
            var t=profile.properties,d=new Date;
            d.setTime(time);
            return (Math.ceil(xui.Date.diff(t._smallLabelStart, d, 'ms')||0) / t._rate);
        },
        _getTime:function(profile, x, flag){
            var t=profile.properties;
            t = xui.Date.add(t._smallLabelStart, 'ms', x*t._rate);
            return flag?t:t.getTime();
        },
        _moveActive:function(profile, src, x, w, mtype){
            var p=Math.ceil,
                t=profile.properties,
                d=xui.Date,
                s=t._smallLabelStart,
                r=t._rate,
                u=t._timeFormat,
                ms='ms',
                y=src.style,
                z='px',
                m,n,increment,
                xx=x
                ww=w;
            if(!y.visibility || y.visibility=='hidden')
                y.visibility='visible';

            if(increment=t.increment){
                if(mtype=='move'){
                    x=Math.floor(xx/increment)*increment;
                }else{
                    if(mtype=='left'||mtype=='all'){
                        x=Math.floor(xx/increment)*increment;
                        w=ww-(x-xx);
                    }
                    if(mtype=='right'||mtype=='all'){
                        m=Math.floor((w+increment-1)/increment);
                        w=m*increment;
                    }                    
                }
            }

            m = (p(x)||0);
            n = ((p(w)||0)-2);

            if(n>0){
                y.left= m+z;
                y.width= n+z;
                if(t.showTips)
                    profile.box._setTips(profile, d.getText(d.add(s, ms, x*r),u)
                        + " - "
                        + d.getText(d.add(s, ms, (x+w)*r),u)
                    )
            }
            y=src=null;
        },
        _deActive:function(profile){
            var t=profile.$active.style, x=parseInt(t.left,10)||0, w=(parseInt(t.width,10)||0)+2;
            t.visibility='hidden';
            t.left=xui.Dom.HIDE_VALUE;
            t.width=0;
            t=null;
            if(profile.properties.showTips)
                profile.box._setTips(profile, '');
            return {left :x, width :w};
        },
        _minusLeft:function(profile,marks,node,offsetCount){
            var t=profile.properties;
            while((offsetCount--)>0){
                node.first().remove();
                temp=marks.shift();
            }
        },
        _minusRight:function(profile,marks,node,offsetCount){
            var t=profile.properties;
            while((offsetCount--)>0){
                node.last().remove();
                temp=marks.pop();
            }
        },
        _addLeft:function(profile, tag, node, offsetCount,  offset){
            // get additional bars
            var t=profile.properties,
                date=xui.Date,
                key=tag+'Marks',
                marks=t[key],
                labelStart=t[tag+'LabelStart'],
                labelUnit=t[tag+'LabelUnit'],
                labelCount=t[tag+'LabelCount'],
                labelFormat=t[tag+'LabelFormat'],
                rate=t._rate,
                addLb=[],
                temp,label,_date,i;

            temp=0;
            label=date.getText(labelStart, labelFormat);
            for(i=0; i< offsetCount; i++){
                _date = date.add(labelStart, labelUnit, labelCount*(i+1));
                width = date.diff(labelStart, _date, 'ms')/rate;
                addLb.push({
                    left : Math.ceil(temp + (offset||0)-0.0000000000003),
                    width : Math.ceil(width - temp),
                    text : label
                });
                temp=width;
                label=date.getText(_date, labelFormat);
            }
            addLb.reverse();
            // add to band UI
            node.prepend(profile._buildItems(key, addLb,false));
            // add to memory list
            _.arr.insertAny(marks,addLb.reverse(),0);
        },
        _addRight:function(profile, labelEnd, tag, node, offsetCount,  offset){
            var t=profile.properties,
                date=xui.Date,
                key=tag+'Marks',
                marks=t[key],
                labelStart=t[tag+'LabelStart'],
                labelUnit=t[tag+'LabelUnit'],
                labelCount=t[tag+'LabelCount'],
                labelFormat=t[tag+'LabelFormat'],
                rate=t._rate,
                addLb=[],_d1,
                _date,i;
            _d1=labelEnd;
            for(i=0; i<offsetCount; i++){
                _date = date.add(labelEnd, labelUnit, labelCount*(i+1));
                addLb.push({
                    left : Math.ceil(date.diff(labelStart,_d1,'ms')/rate+ (offset||0)-0.0000000000003),
                    width : Math.ceil(date.diff(_d1, _date, 'ms')/rate),
                    text : date.getText(_d1, labelFormat)
                });
                _d1=_date;
            }
            // build
            // add to band UI
            node.append(profile._buildItems(key, addLb,false));
            // add to memory list
            _.arr.insertAny(marks,addLb,-1);
        },
        _getMoveNodes:function(profile){
            return profile.$moveban = profile.$moveban || profile.getSubNode('VIEW');
        },
        //if left is numb, force to move
        _rePosition:function(profile, left){
            profile.pause=true;
            var self=this,
                date = xui.Date,
                t=profile.properties,
                rate=t._rate,
                label,m,n,
                labelsBottom = profile.getSubNode('SMALLLABEL'),
                band = self._getMoveNodes(profile),
                x = left || band.left(),
                //ralated to the fix position
                offset = x - t._band_left_fix;

            // if offset out a bar width
            if(Math.abs(offset)/t._unitPixs >=1 || left){
                var offsetCount = parseInt(offset/t._unitPixs,10),
                    bak_s = t._smallLabelStart,
                    bak_e = t._smallLabelEnd,
                    _c=-offsetCount*t._smallLabelCount,
                    offsetPxs,
                    _smallLabelStart,
                    _smallLabelEnd;

                _smallLabelStart=t._smallLabelStart = date.add(t._smallLabelStart, t._smallLabelUnit, _c);
                _smallLabelEnd=t._smallLabelEnd = date.add(t._smallLabelEnd, t._smallLabelUnit, _c);
                offsetPxs = Math.ceil(date.diff(_smallLabelStart, bak_s, 'ms')/rate);

                band.left(x - offsetPxs);

                // reset band paras
                t._band_width = Math.ceil(date.diff(_smallLabelStart, _smallLabelEnd, 'ms')/rate);

                //reset tasks position var
                _.arr.each(t.items,function(o){
                    o._left += offsetPxs;
                    o._realleft += offsetPxs;
                    profile.box._trimTask(profile,o);
                });
                labelsBottom.children().each(function(o){
                    o.style.left = (parseFloat(o.style.left)||0) + offsetPxs + "px";
                });
                _.arr.each(t._smallMarks,function(o){
                    o.left += offsetPxs;
                });

                // delete out, andd add to blank
                if(offsetCount>0){
                    self._minusRight(profile,t._smallMarks, labelsBottom,offsetCount);
                    self._addLeft(profile, '_small', labelsBottom, offsetCount);
                }else{
                    self._minusLeft(profile,t._smallMarks, labelsBottom, -offsetCount);
                    self._addRight(profile, bak_e, '_small', labelsBottom, -offsetCount);
                }

                if(t.multiTasks){
                    var arr=[];
                    // remove tasks
                    _.arr.each(t.items,function(o){
                        if(o._left >= t._band_width ||  (o._left+o._width) <= 0){
                            //delete from lines
                            delete t._lines[o._line][o.id];
                            arr.push(o.id);
                        }
                    });
                    profile.boxing().removeItems(arr);

                    profile.boxing()._getContent(offsetCount>0 ? _smallLabelStart : bak_e,
                        offsetCount>0 ? bak_s : _smallLabelEnd,
                        t._rate,
                        offsetCount>0 ? 'left' : 'right');

                    //adjust the items
                    self._reArrage(profile);
                }

                if(t.showBigLabel){
                    var labelsTop = profile.getSubNode('BIGLABEL'),
                        bigLabelUnit=t._bigLabelUnit,
                        bigLabelCount=t._bigLabelCount,
                        off,
                        offsetCount2,offsetCount3,
                        bigLabelStart,bigLabelEnd;
                    bak_e=t._bigLabelEnd;

                    labelsTop.children().each(function(o){
                        o.style.left = (parseFloat(o.style.left)||0) + offsetPxs + "px";
                    });
                    _.arr.each(t._bigMarks,function(o){
                        o.left += offsetPxs;
                    });
                    bigLabelStart=date.getTimSpanStart(_smallLabelStart, bigLabelUnit, bigLabelCount);

                    offsetCount2 = Math.ceil(date.diff(_smallLabelStart, t._bigLabelStart, bigLabelUnit)/bigLabelCount);
                    offsetCount3 = Math.ceil(date.diff(t._bigLabelEnd, _smallLabelEnd, bigLabelUnit)/bigLabelCount);

                    //reset offset of big and small
                    if(offsetCount2){
                        off = date.diff(_smallLabelStart, bigLabelStart, 'ms')/rate;
                        t._bigLabelStart=bigLabelStart;
                        if(offsetCount2>0)
                            self._addLeft(profile, '_big',labelsTop, offsetCount2, off);
                        else
                            self._minusLeft(profile,t._bigMarks, labelsTop, -offsetCount2);
                    }
                    //reset offset of big and small
                    if(offsetCount3){
                        off = date.diff(_smallLabelStart, bigLabelStart, 'ms')/rate;
                        t._bigLabelEnd=date.add(t._bigLabelEnd, bigLabelUnit, offsetCount3*bigLabelCount);
                        if(offsetCount3<0)
                            self._minusRight(profile,t._bigMarks, labelsTop, -offsetCount3);
                        else
                            self._addRight(profile, bak_e, '_big',labelsTop, offsetCount3, off);
                    }
                }
            }
            // reset date start point
            t._band_left = band.left();
            var od=t.dateStart;
            t.dateStart = self._getTime(profile, -t._band_left, 1);

            if(profile.onStartDateChanged){
                profile.boxing().onStartDateChanged(profile,od,t.dateStart);
            }

            profile.pause = false;
        },
        _trimTask:function(profile, o){
            //****
            // if too long, cut left
            var x=o._realleft,
                w=o._realwidth,
                pro=profile.properties,
                bw=pro._band_width;

            if(w<=pro.taskMinSize){
                w=pro.taskMinSize;
            }
            if(x < 0){
                if(x+w<0)
                    w=0;
                else
                    w = w + x;
                x = 0;
            }
            if(x>bw)x=bw;
            this._setItemNode(profile, o,'left',x+'px');

            //             
            o._left=x;

            // if too long, cut right
            if(x + w > bw)
                w = bw - x;
            // 
            if(w>=0){
                if(o._width!=w){
                    o._width=w;
                    this._setItemNode(profile, o,'width',w+'px');
                }
            }

        },
        _setItemNode:function(profile, item, key, value){
            var t=profile.getSubNodeByItemId('ITEM',item.id).get(0);
            t.style[key]=value;
        },
        _getLinePos:function(profile,o){
            var t=profile.properties,
                b=false,
                index=0;
            _.arr.each(t._lines,function(v,i){
                if(i===0)return;
                b=true;
                _.each(v,function(v){
                    if(o.id!==v.id)
                        if(((o._left + o._width)>=v._left) && ((v._left + v._width)>=o._left))
                            return b=false;
                });
                if(b){index=i;return false;}
            });
            if(!b)
                index = t._lines.push({})-1;
            return index;
        },
        // _reArrage tasks for top position
        _reArrage:function(profile){
            var self=this, o, h,
                t=profile.properties;
            t._lines.length = 1;
            _.arr.stableSort(t.items,function(x,y){
                    x=x.from;y=y.from;
                    return x>y?1:x==y?0:-1;
            });
            //re caculate from current line
            _.arr.each(t.items,function(v){
                if(v._line===0)return;

                //get pos from current line
                index = self._getLinePos(profile, v);
                t._lines[index][v.id]=v;
                // if has space, reset position
                if(v._line !== index){
                    // reset double link
                    v._line = index;
                    // set top
                    if(t.multiTasks){
                        self._setItemNode(profile, v, 'top', (t.taskHeight+1) * (index-1) +'px');
                        self._setItemNode(profile, v, 'zIndex', index);
                    }
                };
            });

            h = t._linesHeight = t._lines.length * (t.taskHeight+1);

            self._ajustHeight(profile);
        },
        _resetItem:function(profile,o,src){
            var p=profile.properties,
                t=profile.getItemByDom(src),
                bandW=p._band_width,
                f=function(k,i){return profile.getSubNodeByItemId(k,i)},
                timeline=profile.box,
                max=Math.max,
                temp;

            if(o.left){
                t._realleft=t._left=o.left;
                t.from = timeline._getTime(profile,o.left);

                xui.use(src).get(0).style.left=t._left+'px';
            }
            if(o.width){
                t.to = timeline._getTime(profile,o.left+o.width);

                t._realwidth=t._width=o.width;

                if(t._width<=p.taskMinSize){
                    t._width=p.taskMinSize;
                }else{
                    // if too long ,cut right
                    if(o.left + o.width > bandW)
                        t._width = bandW - o.left;
                }                
                xui.use(src).get(0).style.width=t._width+'px';

                temp=+(t._realwidth/t._width*100).toFixed(2);
                if(temp>=100)temp=100;                
                if(temp!=t._perw){
                    t._perw=temp;
                    xui.use(src).first(2).get(0).style.width=temp+'%';
                }
            }
            // _reArrage top position
            timeline._reArrage(profile);
        },
        _ajustHeight:function(profile){
            var p=profile.properties,
                f=function(p){return profile.getSubNode(p)},
                view = f('CON'),
                items = f('ITEMS'),
                lines = f('LINES'),
                h,b,
                ih=p._linesHeight||0,
                vh=view.height();

            h=Math.max(ih,vh);

            b=ih>vh;
            f('SCROLLI').height(h);
            f('SCROLL').css('display',b?'block':'none');
            items.height(h);
            lines.height(h);
            items.top(b?-f('SCROLL').scrollTop():0);
            lines.top(b?-f('SCROLL').scrollTop():0);
            
            var len=parseInt(h/p.taskHeight,10)+1, 
                size=f('LINES').get(0).childNodes.length;
            if(size<len){
                f('LINES').append(xui.create(_.str.repeat('<div class="xui-uiborder-b" style="height:'+p.taskHeight+'px;"></div>',len-size)));
            }
        },
        _showTips:function(profile, node, pos){
            if(profile.properties.disableTips)return;
            if(profile.onShowTips)
                return profile.boxing().onShowTips(profile, node, pos);
            if(!xui.Tips)return;

             var t=profile.properties,
                id=node.id,
                format=t._timeFormat,
                sid=profile.getSubId(id),
                map=profile.SubSerialIdMapItem,
                item=map&&map[sid],
                date=xui.Date;

            if(t.disabled)return;
            if(item && item.disabled)return;
            if(item){
                item.tips = '<p style="font-weight:bold">'+item.caption +'</p>'+ date.getText(new Date(item.from),format)+" - "+date.getText(new Date(item.to),format);
                xui.Tips.show(pos, item);
                return false;
            }
        },
        _beforeSerialized:function(profile){
            var w=profile.properties.width,
                o=arguments.callee.upper.call(this, profile);
            o.properties.width=w;
            return o;
        },
        _onresize:function(profile,width,height){
            var pro=profile.properties,
                f=function(k){return profile.getSubNode(k)},
                _bbarH=f('BBAR').height(),
                _tipsH=f('TAIL').height(),
                off2=f('CON').offset(null, profile.getRoot()),
                off3=2,h2,
                t;

            //for border, view and items
            if(height && profile._$h != height){
                f('BORDER').height(profile._$h = t = height);
                f('CON').height(t=t - (pro.showTips?_tipsH:0) -off2.top - (pro.showBar?_bbarH:0) -off3);
                h2=f('BAND').height();

                f('SCROLL').top(h2).height(t+h2);
                profile.getSubNodes(['BG','ITEMS','SCROLL']).height(t);
                this._ajustHeight(profile);
                
                if(xui.browser.ie6)
                    f('ACTIVE').height(f('VIEW').height()+2);
            }
            if(width && profile._$w != width){
                // special: modified widget width here
                f('BORDER').width(profile._$w =  pro.width = width);
                var ins=profile.boxing(),
                    items = ins.getItems('data'),
                    bak_s = pro._smallLabelStart,
                    bak_e = pro._smallLabelEnd,
                    offset, uivalue;
                this._refresh(profile);
                offset = bak_s - pro._smallLabelStart;

                if(!pro.multiTasks)
                    uivalue=pro.$UIvalue;

                // reset all items
                ins.setItems(items);
                
                if(!pro.multiTasks){
                    ins.setUIValue(uivalue, true,null,'resize');
                }else{
                    var arr=[];
                    // filter tasks
                    _.arr.each(pro.items,function(o){
                        if(o._left >= pro._band_width ||  (o._left+o._width) <= 0){
                            //delete from lines
                            delete pro._lines[o._line][o.id];
                            arr.push(o.id);
                        }
                    });
                    ins.removeItems(arr);
                }

                if(offset>0){
                    // first time, call iniContent
                    if(!profile._iniOK){
                        ins.iniContent();
                    }else{
                        ins._getContent(pro._smallLabelStart, bak_s, pro._rate, 'left');
                        ins._getContent(bak_e, pro._smallLabelEnd, pro._rate, 'right');
                    }
                }
                //adjust the items
                this._reArrage(profile);
            }
        },
        _refresh:function(profile,force){
            var pro=profile.properties, ins=profile.boxing(), nodes, uivalue;

            if(!pro.multiTasks)
                uivalue=pro.$UIvalue;

            //clear items first
            ins.clearItems();

            //ins.refresh()
            this._prepareData(profile);

            //refresh labels
            nodes=profile._buildItems('_smallMarks', pro._smallMarks,false);
            profile.getSubNode('SMALLLABEL').empty().append(nodes);
            if(pro.showBigLabel){
                nodes=profile._buildItems('_bigMarks', pro._bigMarks,false);
                profile.getSubNode('BIGLABEL').empty().append(nodes);
            }

            //view/band set left
            profile.getSubNode('VIEW').left(pro._band_left).width(pro._band_width);

            //if singleTask, setUIValue
            if(!pro.multiTasks){
                ins.setUIValue(uivalue, true,null,'refresh');
            //if multiTasks, call iniContent to get tasks
            }else{
                if(force)
                    ins.iniContent();
            }
            return this;
        }
    }
});Class("xui.UI.TagEditor", ['xui.UI',"xui.absValue"], {
    Dependencies:['xui.UI.Input'],
    Instance:{
        activate:function(){
            // activate the first input
            var i=this.getTagInput(0);
            if(i && i.get(0))
                i.activate();
            return this;
        },
        getTagInput:function(index){
            var prf=this.get(0),r=null;
            if(prf.__inputs){
                if(_.isNumb(index)){
                    if(r=prf.__inputs[index])
                        r=r.boxing();
                }else{
                    r=xui.UI.Input.pack(prf.__inputs,false);
                }
            }
            return r;
        },
        _setDirtyMark:function(){
            arguments.callee.upper.apply(this, arguments);

            return this.each(function(profile){
                //format statux
                if(profile.beforeFormatMark && false===box.beforeFormatMark(profile, profile._inValid==2)){}
                else{
                    profile.getSubNode('ERROR').css('display',profile._inValid==2?'block':'none');
                }
            });
        }
    },
    Static:{
        $valuemode:'multi',
        Templates:{
            tagName : 'div',
            style:'{_style}',
            className:'{_className}',
            BORDER:{
               tagName:'div',
               className:'{_bordertype}',
                ITEMS:{
                   $order:10,
                   tagName:'div',
                   style:'{_padding}',
                   text:"{items}"
                }
            },
            ERROR:{
                $order:2
            }
        },
        Appearances:{
            KEY:{
                'font-size':'12px'
            },
            ITEMS:{
                position:'relative',
                overflow:'hidden'
            },
            BORDER:{
                position:'relative',
                overflow:'hidden'
            },
            ERROR:{
                width:'16px',
                height:'16px',
                position:'absolute',
                right:'2px',
                top:'2px',
                display:'none',
                'font-size':0,
                'background-image': xui.UI.$bg('icons.gif', '', true),
                'background-repeat':'no-repeat',
                'background-position':'left -244px',
                'z-index':'50'
            }
        },
        Behaviors:{
            onSize:xui.UI.$onSize
        },
        DataModel:{
            selectable:true,
            borderType:{
                ini:'flat',
                listbox:['none','flat','inset','outset'],
                action:function(v){
                    var ns=this,
                        p=ns.properties,
                        node=ns.getSubNode('BORDER'),
                        reg=/^xui-uiborder-/,
                        pretag='xui-uiborder-',
                        root=ns.getRoot();
                    node.removeClass(reg);
                    node.addClass(pretag+v);

                    //force to resize
                    xui.UI.$tryResize(ns,root.get(0).style.width,root.get(0).style.height,true);
                }
            },
            valueSeparator:{
                ini:',',
                action:function(){
                    //this.properties._valueSeparator=new RegExp("["+this.properties.valueSeparator+"\\s]+");
                }
            },
            padding:{
                ini:"4px",
                action:function(v){
                    this.getSubNode("ITEMS").css("padding",v);
                }
            },
            valueFormat:{
                ini:'',
                action:function(v){
                    var i=this.boxing().getTagInput();
                    if(i)i.setValueFormat(v);
                }
            },
            required:{
                ini:false
            },
            tagCount:{
                ini:3,
                action:function(v){
                    this.boxing().refresh();
                }
            },
            tagMaxlength:{
                ini:6,
                action:function(v){
                    var i=this.boxing().getTagInput();
                    if(i)i.setMaxlength(v);
                }
            },
            tagInputWidth:{
                ini:80,
                action:function(v){
                    var i=this.boxing().getTagInput();
                    if(i)i.setWidth(v);
                }
            },
            tagInputHeight:{
                ini:22,
                action:function(v){
                    var i=this.boxing().getTagInput();
                    if(i)i.setHeight(v);
                }
            },
            tagSpacing:{
                ini:6,
                action:function(v){
                    var i=this.boxing().getTagInput();
                    if(i)i.setCustomStyle("KEY","margin-right:"+(parseInt(v,10)||0)+"px;margin-bottom:"+(parseInt(v,10)||0)+"px;");
                }
            },
            width:300,
            height:32
        },
        RenderTrigger:function(){            
            this.$onValueSet=this.$onUIValueSet=function(o,v){
                v=v.split(this.properties.valueSeparator);
                _.arr.each(this.__inputs,function(o,i){
                    o.boxing().setValue(v[i]||"",true,'render');
                });
            };

            var i=this.boxing().getTagInput();
            if(i)i.render(true);
        },
        _checkValid:function(profile, value){
            if(profile.properties.required && 
                (!value || !value.replace(new RegExp("\\s*\\"+profile.properties.valueSeparator+"\\s*","img"),""))
            ){
                profile._inValid=2;
                return false;
            }else
                profile._inValid=3;
            return true;
        },
        _ensureValue:function(profile, value){
            var prop=profile.properties, nv=[];
            if(!value)
                value="";
            // ensure array
            if(_.isStr(value))
                value=value.split(prop.valueSeparator);
            // ensure count
            for(var i=0,vv;i<prop.tagCount;i++){
                vv=value[i];
                // ensure string
                if(!vv)
                    vv="";
                // ensure string maxlength
                if(vv.length>prop.tagMaxlength)
                    vv=vv.slice(0,prop.tagMaxlength);
                vv=_.str.trim(vv);
                if(vv)
                    nv.push(vv);
            }
            return nv.join(prop.valueSeparator);
        },
        _prepareData:function(profile){
            var data=arguments.callee.upper.call(this, profile);
            data._bordertype='xui-uiborder-'+data.borderType;
            
            
            
            var prop=profile.properties,
                inputs=[],properties,events,CS,iprf;
            if(prop.padding)
                data._padding = "padding:"+prop.padding;
            
            //prop._valueSeparator = new RegExp("["+prop.valueSeparator+"\\s]+");
            
            var vs = this._ensureValue(profile,prop.value).split(prop.valueSeparator);
            
            if(prop.tagSpacing)
                CS={
                    KEY:"margin-right:"+prop.tagSpacing+"px;margin-bottom:"+prop.tagSpacing+"px;"
                };

            properties = {
               position:'relative',
               width:prop.tagInputWidth,
               height:prop.tagInputHeight,
               maxlength:prop.tagMaxlength,
               valueFormat:prop.valueFormat,
               dirtyMark:false 
            };
            
            for(var i=0;i<prop.tagCount;i++){
                properties.value=vs[i]||"";
                
                iprf=(new xui.UI.Input(properties,events,null,profile.theme,CS)).get(0);
                
                iprf.$onUIValueSet=function(v){
                    var pf=this,index,arr=[];
                    _.arr.each(profile.__inputs,function(o,i){
                         arr.push(_.str.trim(o.boxing().getUIValue()||""));
                         if(o===pf)index=i;
                    });
                    _.filter(arr,function(o,i){
                        return o.replace(/\s+/g,'')!=='';
                    });
                    var sp=profile.properties.valueSeparator,uiv=arr.join(sp);
                    var oi=profile._inValid;
                    profile.boxing().setUIValue(uiv,null,null,'inner');
                    
                    // input/textarea is special, ctrl value will be set before the $UIvalue
                    prop.$UIvalue=uiv;
                    if(oi!==profile._inValid) if(profile.renderId)profile.boxing()._setDirtyMark();
                    
                    // ensure no valueSeparator
                    return uiv.split(sp)[index]||"";
                };

                inputs.push(iprf);
            }

            // to html, but not render
            data.items=xui.UI.Input.pack(inputs,false).toHtml();
            
            // keep refrence
            profile.__inputs=inputs;
            
            return data;
        },
        _onresize:function(profile,width,height){
            var size=profile.properties.borderType!='none'?2:0;
            if(height)
                profile.getSubNode('BORDER').height(height=='auto'?height:(height-size));
            if(width)
                profile.getSubNode('BORDER').width(width=='auto'?width:(width-size));
        }
    }
});

Class("xui.UI.Poll", "xui.UI.List",{
    Instance:{
        fillContent:function(id, obj){
            var profile=this.get(0),t,item;
            if(profile.renderId){
                if(item=profile.getItemByItemId(id)){
                    t=profile.getSubNodeByItemId('BODY',id).html('');
                    if(obj){
                        item._obj = obj;
                        item._fill=true;
                        if(typeof obj=='string')t.html(obj);
                        else t.append(obj.render(true));
                    }else
                        item._obj=item._fill=null;
                }
            }
            return this;
        },
        _setOptCap:function(item, value){
            return this.each(function(pro){
                var items = pro.properties.items,
                i = pro.queryItems(pro.properties.items, function(o){
                    return o.id==item.id;
                },false,true);
                if(i && (i=i[0])){
                    i.caption=value;
                    if(pro.renderId)
                        pro.getSubNodeByItemId('CAPTION',i.id).html(value);
                }
            });
        },
        getBindEditor:function(){
            return this.get(0)._bind;
        },
        _insertOpt:function(opt){
            if(!opt.id)opt.id='$'+_();
            this.insertItems([opt]);
            return this;
        },
        _removeOpt:function(id){
            this.removeItems([id],'OUTER');
            return this;
        },
        _setDirtyMark:function(){return this}
    },
    Initialize:function(){
        var self=this;
        self.addTemplateKeys(['EDIT']);
        //modify default template fro shell
        var t = self.getTemplate();
        t.ITEMS.className='{_bordertype}';
        t.TITLE={
            $order:2,
            tagName : 'DIV',
            style:'{titleDisplay}',
            text : '{title}',
            className:"xui-uibg-bar xui-uiborder-outset {disabled} {_cls}"
        };
        t.TAIL={
            $order:20,
            tagName : 'DIV',
            className:"xui-uibg-bar xui-uiborder-outset {disabled}",
            text:"{tagCmds}"
        };
        t.$submap={
            items:{
                OUTER:{
                    tagName:'div',
                    className:'xui-uibg-bar xui-uiborder-outset',
                    TOGGLE:{
                        className:'xui-uicmd-toggle',
                        style:'{_togdisplay}'
                    },
                    ITEM:{
                        tabindex: '{_tabindex}',
                        className:'{itemClass} {disabled}',
                        style:'{itemStyle}',
                        OPTION:{
                            $order:0,
                            tagName : 'DIV',
                            MARK2:{$order:1,className:'{_optclass}'}
                        },
                        CAPTION:{
                            $order:1,
                            tagName : 'DIV',
                            text : '{caption}',
                            className:"{disabled} {_itemcls}"
                        },
                        CHART:{
                            $order:2,
                            tagName : 'DIV',
                            style:'{_display}',
                            CAST:{
                                $order:0,
                                text:'{message}'
                            },
                            PROGRESS:{
                                $order:1,
                                style:'background-position: -{_per}px -200px;',
                                PROGRESSI:{}
                            },
                            DEL:{
                                $order:2,
                                className:'xui-ui-btn',
                                style:'{_del}',
                                DELI:{
                                    className:'xui-ui-btni',
                                    DELC:{
                                        className:'xui-ui-btnc',
                                        DELA:{
                                            _NativeElement:true,
                                            tagName:'button',
                                            text:'{removeText}'
                                        }
                                    }
                                }
                            }
                        },
                        CLEAR:{
                            $order:3,
                            tagName : 'DIV'
                        }
                    },
                    BODY:{
                        $order:1,
                        tagName : 'DIV',
                        text:'{_body}'
                    }
                }
            },
            "tagCmds":t.$submap["items.tagCmds"],
            "tagCmds.text":t.$submap["items.tagCmds.text"],
            "tagCmds.button":t.$submap["items.tagCmds.button"],
            "tagCmds.image":t.$submap["items.tagCmds.image"]
        };
        t.ITEMS.className='';
        self.setTemplate(t);

        //for modify
        var inlineEdit=function(profile,node,flag,value,item){
            var o,useC,prop=profile.properties,
                callback=function(v){
                    var b=profile.boxing();
                    switch(flag){
                        //edit option
                        case '1':
                            if(b.beforeOptionChanged(profile, item, v)!==false)
                                b._setOptCap(item,v);
                        break;
                        //new option
                        case '2':
                            if(b.beforeOptionAdded(profile, v)!==false ){
                                var id="["+v.replace(/[^\w_]*/g,'')+"]";
                                b._insertOpt({caption:v,id:id});
                                if(!profile.properties.editable){
                                    profile.boxing().fireItemClickEvent(id);
                                }
                            }
                        break;
                        //edit title
                        default:
                            if(b.beforeTitleChanged(profile, v)!==false)
                                b.setTitle(v);
                    }
                };

            if(profile.onCustomEdit)
                if(o=profile._bind=profile.boxing().onCustomEdit(profile, node, flag, value, item, callback))
                    useC=true;
            if(!useC){
                o=profile._bind;
                if(!o){
                    var pp={type:prop.editorType,commandBtn:'save',left:-10000,top:-10000};
                    profile._bind=o=xui.create('ComboInput', pp);
                    o.onHotKeydown(function(p,key){
                        if(key.key=='enter'){
                            p.boxing().onCommand(p);
                            return false;
                        }else if(key.key=='esc'){
                            o.hide();
                            return false;
                        }
                    })
                    profile.getRoot().append(o);
                }

                var r=node.cssRegion(true,profile.getRoot());
                if(r.height>o.getHeight())
                    o.setHeight(r.height);
                else
                    r.top-=3;
                if(r.top<0)r.top=0;

                o.setValue(value||'',true,'inner')
                .setWidth(r.width + (parseInt(node.css('paddingLeft'),10)||0)+ (parseInt(node.css('paddingRight'),10)||0))
                .onCommand(function(p){
                    var pro=p.properties,v=pro.$UIvalue, ov=pro.value;
                    if(v!=ov)
                        callback(v);
                    _.asyRun(function(){
                        o.hide();
                    });
                })
                .reBoxing()
                .setBlurTrigger(o.KEY+":"+o.$xid, function(){
                    o.hide();
                })
                .show(r.left+'px',r.top+'px');

                _.asyRun(function(){
                    o.activate()
                });
            }
        };

        t = self.getBehavior();
        var old=t.ITEM.onClick;
        t.ITEM.onClick = function(profile, e, src){
            var p = profile.properties,
                item = profile.getItemByDom(src),
                editable=item.id=='$custom' || item.editable;
            if(p.disabled)return;

            if(p.editable)
                inlineEdit(profile, profile.getSubNodeByItemId('CAPTION',item.id), editable?'2':'1', editable?'':item.caption, item);
            else{
                if(editable)
                    inlineEdit(profile, profile.getSubNodeByItemId('CAPTION',item.id), '2');
                else
                    old.apply(this, arguments);
            }
        };
        t.TITLE={
            onClick : function(profile, e, src){
                var p = profile.properties,
                    item = profile.getItemByDom(src);
                if(p.disabled)return;

                if(p.editable)
                    inlineEdit(profile, profile.getSubNode('TITLE'), '3', p.title);
            }
        };
        t.DEL={
            onClick : function(profile, e, src){
                var p = profile.properties,
                    b = profile.boxing(),
                    item = profile.getItemByDom(src);
                if(p.disabled)return;
                if(b.beforeOptionRemoved(profile, item)!==false )
                    b._removeOpt(item.id);
                return false;
            }
        }
        t.CMD={
            onClick : function(profile, e, src){
                var p = profile.properties,
                    key = profile.getSubId(src);
                if(p.disabled)return;
                profile.boxing().onCmd(profile, key, src);
            }
        };
        t.TOGGLE={
            onClick:function(profile, e, src){
                var properties = profile.properties,
                    items=properties.items,
                    item = profile.getItemByDom(src),
                    itemId = profile.getSubId(src),
                    node = xui.use(src),
                    body = profile.getSubNode('BODY',itemId),t
                    ;
                if(item._show){
                    node.tagClass('-checked',false);
                    body.css('display','none');
                }else{
                    node.tagClass('-checked');
                    body.css('display','block');
                    //fill value
                    if(!item._fill){
                        item._fill=true;
                        var callback=function(o){
                            profile.boxing().fillContent(item.id, item._body=o);
                        };
                        if(profile.onGetContent){
                            var r = profile.boxing().onGetContent(profile, item, callback);
                            if(r) callback(r);
                        }else
                            callback(profile.box._buildBody(profile, item));
                    }
                }

                item._show=!item._show;
            }
        };

        self.setBehavior(t);
    },
    Static:{
        _DIRTYKEY:'MARK2',
        _ITEMKEY:'OUTER',
        Appearances:{
            KEY:{
                'font-size':'12px',
                zoom:xui.browser.ie?1:null
            },
            'TITLE, ITEMS, TAIL':{
                position:'relative',
                overflow:'auto',
                'line-height':'14px'
            },
            TAIL:{
                zoom:xui.browser.ie?1:null,
                'padding':'5px 0 5px 40px'
            },
            CMD:{
                margin:'3px',
                'white-space':'nowrap',
                'vertical-align':'middle'
            },
            TITLE:{
                'font-weight':'bold',
                padding:'4px'
            },
            ITEMS:{
                'overflow-x': 'hidden',
                zoom:xui.browser.ie?1:null
            },
            OUTER:{
                position:'relative',
                zoom:xui.browser.ie?1:null,
                'padding-left':'15px'
            },
            TOGGLE:{
                position:'absolute',
                left:0,
                top:'4px'
            },
            BODY:{
                display:'none',
                'padding-left':'27px'
            },
            ITEM:{
                display:'block',
                position:'relative',
                zoom:xui.browser.ie?1:null,
                padding:'4px 2px 4px 2px'
            },
            OPTION:{
                position:'absolute',
                left:'2px',
                top:'4px'
            },
            CAPTION:{
                'float':'left',
                zoom:xui.browser.ie?1:null,
                'margin-left':'24px',
                //{*1*}for: ie6 double margin bug
                display:xui.browser.ie6?'inline':null
            },
            'EDIT, EDITS':{
                $order:2,
                'float':'none',
                'background-color':'#EBEADB',
                cursor:'pointer',
                //{*1*}for: ie6 double margin bug
                display:xui.browser.ie6?'block':null
            },

            CHART:{
                'float':'right'
            },
            CLEAR:{
                clear:'both',
                'text-align':'right'
            },
            'PROGRESS, PROGRESSI':{
               'background-image':xui.UI.$bg('icons.gif', '',true),
               'background-repeat':'no-repeat',
               width:'200px',
                height:'14px',
                border:0,
                'vertical-align':'middle',
                'line-height':0,
                'font-size':0
            },
            PROGRESS:{
                $order:1,
                'margin-left':'2px',
                'background-position':'-180px -200px'
            },
            PROGRESSI:{
                $order:1,
                'background-position':'-200px -216px'
            },
            DEL:{
                margin:'0 0 0 4px'
            }
        },
        DataModel:{
            $checkbox:1,
            selectable:true,
            noCtrlKey:null,
            title:{
                action:function(v){
                    this.getSubNode('TITLE').html(v);
                }
            },
            selMode:{
                ini:'single',
                listbox:['single','multi'],
                action:function(){
                    this.boxing().refresh();
                }
            },
            noTitle:{
              ini:false,
              action:function(v){
                 this.getSubNode('TITLE').css('display',v?'none':'');
              }
            },
            toggle:{
                ini:false,
                action:function(v){
                    this.getSubNode('TOGGLE',true).css('display',v?'':'none');
                }
            },
            removeText:{
                ini:'remove',
                action:function(v){
                    this.getSubNode('DEL',true).text(v);
                }
            },
            editable:{
                ini:false,
                action:function(v){
                    var self=this,t,cls;
                    self.getSubNode('DEL',true).css('display',v?'':'none');
                    t=self.getSubNode('CAPTION',true).merge(self.getSubNode('TITLE'));
                    cls=self.getClass('EDIT');
                    if(v)
                        t.addClass(cls);
                    else
                        t.removeClass(cls);
                }
            },
            newOption:{
                ini:'',
                action:function(v){
                    var self=this,
                        id='$custom',
                        sid='_special',
                        t,
                        cs=self._cs;
                    if(!v){
                        if(cs)
                            cs.remove();
                    }else{
                        if(!cs){
                            t={
                                id:id,
                                caption:v
                            };
                            t[xui.UI.$tag_subId]=sid;
                            cs=self._buildItems('items',self.box._prepareItems(self,[t]));
                            self.getSubNode('ITEMS').addNext(self._cs=cs);
                        }else
                            self.getSubNodeByItemId('CAPTION',sid).html(v);
                    }
                }
            },
            editorType:'none'
        },
        Behaviors:{
            HoverEffected:{DEL:'DEL',ITEM:'MARK2'},
            ClickEffected:{DEL:'DEL',ITEM:'MARK2'}
        },
        EventHandlers:{
            beforeTitleChanged:function(profile, value){},
            beforeOptionAdded:function(profile, value){},
            beforeOptionRemoved:function(profile, item){},
            beforeOptionChanged:function(profile, item, value){},
            onCustomEdit:function(profile, node, flag, value, item, callback){},
            onCmd:function(profile, key, src){},
            onGetContent:function(profile,item,callback){}
        },
        RenderTrigger:function(){
            var self=this,t=self.properties.newOption;
            if(t)
                self.boxing().setNewOption(t,true);
        },
        _prepareData:function(profile){
            var data=arguments.callee.upper.call(this, profile),
                p=profile.properties
            if(p.editable)
                data._cls = profile.getClass('EDIT');
            data.titleDisplay=p.noTitle?'display:none':'';

            this._prepareCmds(profile, data);

            return data;
        },
        _prepareItem:function(profile, item){
            var p = profile.properties, f=profile.CF;
            item._tabindex = p.tabindex;

            if(typeof f.formatCaption == 'function')
                item.caption = f.formatCaption(item.caption);

            item._body= item._body || 'Loading...'
            if(item.id!='$custom'){
                item._togdisplay=((p.toggle && item.toggle!==false) || item.toggle)?'':'display:none;';
                item._optclass=p.selMode=='multi'?'xui-uicmd-check':'xui-uicmd-radio';
                item._display='';
                item.percent = parseFloat(item.percent)||0;
                if(item.percent<0)item.percent=0;
                if(item.percent>1)item.percent=1;
                item._per = 200*(1-item.percent);
            }else{
                item._optclass='xui-uicmd-add';
                item._togdisplay=item._display='display:none;';
                item._per = 0;
                item._itemcls=profile.getClass('EDITS');
            }
            item.removeText=p.removeText;
            item._del='display:none;';
            if((('editable' in item) && item.editable)||p.editable){
                item._itemcls=profile.getClass('EDIT');
                item._del = '';
            }

        },
        _buildBody:function(profile,item){
            return item.text?'<pre>'+item.text.replace(/</g,"&lt;")+'</pre>':'';
        },
        _onresize:function(){}
    }
});
Class("xui.UI.FoldingList", ["xui.UI.List"],{
    Instance:{
        fillContent:function(id, obj){
            var profile=this.get(0),t,item;
            if(profile.renderId){
                if(item=profile.getItemByItemId(id)){                    
                    t=profile.getSubNodeByItemId('BODYI',id).html('');
                    if(obj){
                        item._obj = obj;
                        item._fill=true;
                        if(typeof obj=='string')t.html(obj);
                        else t.append(obj.render(true));
                    }else
                        item._obj=item._fill=null;
                }
            }
            return this;
        },
        toggle:function(id){
            var profile=this.get(0);
            if(profile.renderId){
                var properties = profile.properties,
                    items=properties.items,
                    item = profile.getItemByItemId(id),
                    subId = profile.getSubIdByItemId(id),
                    node = profile.getSubNode('ITEM',subId),
                    toggle = profile.getSubNode('TOGGLE',subId),
                    nodenext = node.next(),t
                    ;
                if(item._show){
                    if(properties.activeLast && items.length)
                        if(items[items.length-1].id==item.id)
                            return false;
    
                    node.tagClass('-checked',false);
                    toggle.tagClass('-checked',false);
                    if(nodenext)
                        nodenext.tagClass('-prechecked',false);
                }else{
                    node.tagClass('-checked');
                    toggle.tagClass('-checked');
                    if(nodenext)
                        nodenext.tagClass('-prechecked');
                    //fill value
                    if(!item._fill){
                        var callback=function(o){
                            profile.boxing().fillContent(item.id, item._body=o);
                        };
                        if(profile.onGetContent){
                            var r = profile.boxing().onGetContent(profile, item, callback);
                            if(r) callback(r);
                        }else
                            callback(profile.box._buildBody(profile, item));
                    }
                }
                item._show=!item._show
             }
            return this;
        }
    },
    Initialize:function(){
        //modify default template fro shell
        var t = this.getTemplate();
         t.ITEMS.className='{_bordertype}';
        t.$submap.items={
            ITEM:{
                tagName : 'div',
                className:'{_checked} {_precheked} {itemClass} {disabled} {readonly}',
                style:'{itemStyle}',
                HEAD:{
                    tagName : 'div',
                    HL:{tagName : 'div'},
                    HR:{tagName : 'div'},
                    TITLE:{
                        tabindex: '{_tabindex}',
                        TLEFT:{
                            $order:0,
                            tagName:'div',
                            TOGGLE:{
                                $order:0,
                                className:'xui-uicmd-toggle {_tlgchecked}'
                            },
                            CAP1:{
                                $order:1,
                                text:'{title}'
                            }
                        },
                        TRIGHT:{
                            $order:1,
                            tagName:'div',
                            style:'{_capDisplay}',
                            CAP2:{
                                $order:0,
                                text:'{caption}'
                            },
                            OPT:{
                                $order:1,
                                className:'xui-uicmd-opt',
                                style:'{_opt}'
                            }
                        }/*,
                        TCLEAR:{
                            $order:2,
                            tagName:'div'
                        }*/
                    }
                },
                BODY:{
                    $order:1,
                    tagName : 'div',
                    className:'xui-uibg-base',
                    BODYI:{
                        $order:0,
                        tagName : 'div',
                        text:'{_body}'
                    },
                    TAGCMDS:{
                        $order:1,
                        tagName : 'div',
                        text:"{tagCmds}"
                    }
                },
                TAIL:{
                    $order:4,
                    tagName : 'div',
                    TL:{tagName : 'div'},
                    TR:{tagName : 'div'}
                }
            }
        }
        this.setTemplate(t);
    },
    Static:{
        Appearances:{
            KEY:{
                padding:'2px'
            },
            ITEMS:{
                border:0,
                position:'relative',
                zoom:xui.browser.ie?1:null,
                'padding-top':'8px'//,
                //for ie6 1px bug,  HR/TR(position:absolute;right:0;)
                //'margin-right':xui.browser.ie6?'expression(this.parentNode.offsetWidth?(this.parentNode.offsetWidth-(parseInt(this.parentNode.style.paddingLeft,10)||0)-(parseInt(this.parentNode.style.paddingRight,10)||0) )%2+"px":"auto")':null
            },
            ITEM:{
                border:0,
                //for ie6 bug
                zoom:xui.browser.ie?1:null,
                'margin-top':'-9px',
                padding:0,
                'font-family': '"Verdana", "Helvetica", "sans-serif"',
                position:'relative',
                overflow:'hidden'
            },
            'HEAD, BODY, BODYI, TAIL':{
                position:'relative'
            },

            CMDS:{
                'font-size':0,
                'line-height':0,
                padding:'2px 0 0 4px',
                'text-align':'right',
                position:'relative',
                'background-image':xui.UI.$bg('border_left.gif', ''),
                'background-repeat':'repeat-y',
                'background-position':'left top',
                'background-color':'#EEE',
                zoom:xui.browser.ie?1:null
            },
            CMD:{
                margin:'2px 4px 2px 4px'
            },
            BODY:{
                display:'none',
                'border-right': 'solid 1px #CCC',
                zoom:xui.browser.ie?1:null,
                position:'relative',
                overflow:'auto',
                'background-image':xui.UI.$bg('border_left.gif', ''),
                'background-repeat':'repeat-y',
                'background-position':'left top'
            },
            BODYI:{
                padding:'2px 8px 0 8px',
                'background-image':xui.UI.$bg('border_left.gif', ''),
                'background-repeat':'repeat-y',
                'background-position':'left top',
                position:'relative'
            },
            'BODY, BODYI':{
                'font-size':0,
                'line-height':0
            },
            'ITEM-mouseover, ITEM-mousedown, ITEM-checked':null,
            'ITEM-checked':{
                $order:2,
                'margin-bottom':'12px'
             },
            'ITEM-checked BODY':{
                $order:2,
                display:'block'
            },
            'HL, HR, TL, TR':{
                position:'absolute',
                'font-size':0,
                'line-height':0,
                width:'8px',
                'background-image':xui.UI.$bg('corner.gif', ''),
                'background-repeat':'no-repeat'
            },
            'HL, HR':{
                height:'30px'
            },
            'ITEM-prechecked HL':{
                $order:1,
                'background-position': 'left top'
            },
            'ITEM-prechecked HR':{
                $order:1,
                'background-position': 'right top'
            },
            'TL, TR':{
                height:'20px'
            },
            HL:{
                $order:1,
                top:0,
                left:0,
                'background-position': 'left -37px'
            },
            HR:{
                $order:1,
                top:0,
                right:0,
                'background-position': 'right -37px'
            },
            TL:{
                $order:1,
                bottom:0,
                left:0,
                'background-position': 'left bottom'
            },
            TR:{
                $order:1,
                bottom:0,
                right:0,
                'background-position': 'right bottom'
            },
            HEAD:{
                position:'relative',
                zoom:xui.browser.ie?1:null,
                'background-image':xui.UI.$bg('border_top.gif', ''),
                'background-repeat':'repeat-x',
                'background-color':'#fff',
                'background-position':'left top',
                overflow:'hidden'
            },
            TITLE:{
                $order:1,
                height:'26px',
                display:'block',
                position:'relative',
                'white-space':'nowrap',
                overflow:'hidden'
            },
            TAIL:{
                'font-size':0,
                'line-height':0,
                position:'relative',
                height:'5px',
                'background-image':xui.UI.$bg('border_bottom.gif', ''),
                'background-repeat':'repeat-x',
                'background-color':'#EEE',
                'background-position':'left bottom'
            },
            'CAP1, CAP2':{
                padding:'3px',
                'vertical-align':'middle'
            },
            CAP1:{
                color:'#666',
                cursor:'pointer',
                'white-space':'nowrap',
            	font: 'bold 12px arial,sans-serif',
            	color: '#00681C'
            },
            'ITEM-checked CAP1':{
                $order:2,
                'font-weight':'normal'
            },
            TLEFT:{
                //position:xui.browser.ie6?'relative':null,
                //'float':'left',
                position:'absolute',
                left:'4px',
                top:'2px',

                'white-space':'nowrap',
                overflow:'hidden'
            },
            TRIGHT:{
                //position:xui.browser.ie6?'relative':null,
                //'float':'right',

                position:'absolute',
                right:'4px',
                top:'2px',

                'white-space':'nowrap',
                overflow:'hidden'
            }
        },
        Behaviors:{
            HoverEffected:{ITEM:null,HEAD:'HEAD',OPT:'OPT'},
            ClickEffected:{ITEM:null,HEAD:'HEAD'},
            ITEM:{onClick:null,onKeydown:null},
            HEAD:{
                onClick:function(profile, e, src){
                    profile.boxing().toggle(profile.getItemIdByDom(src));
                    return false;
                }
            },
            OPT:{
                onMousedown:function(){
                    return false;
                },
                onClick:function(profile, e, src){
                    profile.boxing().onShowOptions(profile, profile.getItemByDom(src), e, src);
                    return false;
                }
            }
        },
        DataModel:({
            value:null,
            borderType:null,
            activeLast:false
        }),
        EventHandlers:{
            onGetContent:function(profile,item,onEnd){},
            onShowOptions:function(profile,item,e,src){}
        },
         RenderTrigger:function(){
            var self=this, pro=self.properties, items=pro.items, item;
            if(pro.activeLast && items.length>0){
                item=items[items.length-1];
                self.boxing().fillContent(item.id, item._body);
            }
        },
        _prepareItems:function(profile, arr, pid){
            if(arr.length){
                arr[0]._precheked = profile.getClass('ITEM','-prechecked');
                if(profile.properties.activeLast){
                    //for properties.data
                    var item = arr[arr.length-1];
                    item._show = true;
                    item._fill = true;
                    item._body = profile.onGetContent?profile.boxing().onGetContent(profile,item,function(o){
                        profile.boxing().fillContent(item.id, item._body=o);
                    }) : profile.box._buildBody(profile, item);
                }
            }
            return arguments.callee.upper.apply(this, arguments);
        },
        _prepareItem:function(profile, item){
            var p = profile.properties,o,
                dpn = 'display:none';
            item._tabindex = p.tabindex;
            if(!item.caption)
                item._capDisplay=dpn;
            else
                item.caption = item.caption.replace(/</g,"&lt;");
            item._opt = item.optBtn?'':dpn;
            item._body= item._body || 'Loading...'

            if(item._show){
                item._checked = profile.getClass('ITEM','-checked');
                item._tlgchecked = profile.getClass('TOGGLE','-checked');
            }
            
            this._prepareCmds(profile, item);
        },
        _buildBody:function(profile,item){
            return item.text?'<pre>'+item.text.replace(/</g,"&lt;")+'</pre>':'';
        },
        _onresize:function(){}
    }
});
/*
300: ruler width
30: ruler height
15: ruler shadow height

15: indicator width => 8: indicator offset
14: indicator height
*/
Class("xui.UI.Range", ["xui.UI","xui.absValue"],{
    Instance:{
        _setCtrlValue:function(value){
            return this.each(function(profile){
                var p=profile.properties,
                    tpl=p.captionTpl,
                    fun=function(k){return profile.getSubNode(k)},
                    fun1=function(a,i){a.cssPos({left:profile[i], top: box._x2y(profile[i])}) },
                    fun2=function(o,v){o.get(0).style.width = v +'px'},
                    title = fun('CAPTION'),
                    a=fun('IND1'),
                    b=fun('IND2'),
                    r1 = fun('RULER1'),
                    r3 = fun('RULER3'),
                    box = profile.box,
                    arr = box._v2a(value);

                profile._rate= 300/(p.max-p.min);
                //use Math.round
                profile._v1= Math.round((arr[0]-p.min) /  (p.max-p.min) *300) ;
                profile._v2= Math.round((1-(p.max - arr[1]) /  (p.max-p.min)) *300);

                //text value
                title.html(box._buildTpl(p.singleValue,tpl, arr,p.unit),false);
                //indicator position
                fun1(a, '_v1');
                fun1(b,'_v2');
                //background div width
                fun2(r1, profile._v1+8);
                fun2(r3, profile._v2+8);
            });
        },
        _setDirtyMark:function(){
            return arguments.callee.upper.apply(this,['BOX']);
        }
    },
    Static:{
        Templates:{
            style:'{_style}',
            className:'{_className}',
            BOX:{
                tagName:'div',
                RULER:{
                    tagName:'div',
                    IND1:{
                        tabindex:'{tabindex}',
                        style:'{_single}'
                    },
                    IND2:{
                        tabindex:'{tabindex}'
                    },
                    RULER1:{
                        $order:2,
                        style:'{_single}'
                    },
                    RULER3:{}
                },
                TAIL:{
                    tagName:'div',
                    CAPTION:{
                        tagName:'div'
                    },
                    MIN:{
                        text:'{min}'
                    },
                    MAX:{
                        text:'{max}'
                    }
                }
            }
        },
        Appearances:{
            'KEY, RULER, IND1, IND1':{
                'font-size':0,
                'line-height':0,
                position:'relative'
            },
            BOX:{
                position:'absolute',
                left:0,
                top:0,
                width:'316px'
            },
            'CAPTION, IND1, TAIL, MIN':{
                'font-size':'12px',
                'line-height':'14px'
            },
            RULER:{
                $order:1,
                position:'relative',
                height:'30px',
                overflow:'visible',
                'margin-bottom':'3px',
                background: xui.UI.$bg('bg.png'),
                _background:'none',
                _filter: xui.UI.$ieBg('bg.png')
            },
            'RULER1, RULER3':{
                position:'absolute',
                left:0,
                top:0,
                height:'30px',
                width:'300px'
            },
            RULER1:{
                background: xui.UI.$bg('bg.png'),
                _background:'none',
                _filter: xui.UI.$ieBg('bg.png')
            },
            RULER3:{
                background: xui.UI.$bg('front.png'),
                _background:'none',
                _filter: xui.UI.$ieBg('front.png')
            },
            'IND1,IND2':{
                display:xui.$inlineBlock,
                zoom:xui.browser.ie6?1:null,
                'z-index':'2',
                width:'15px',
                height:'14px',
                position:'absolute'
            },
            IND1:{
                'background-image':xui.UI.$bg('icons.gif', '', true),
                'background-repeat':'no-repeat',
                'background-position':'left -225px',
                left:'0px',
                top:'11px'
            },
            IND2:{
                'background-image':xui.UI.$bg('icons.gif', '', true),
                'background-repeat':'no-repeat',
                'background-position':'-15px -225px',
                left:'300px',
                top:'1px'
            },
            TAIL:{
                $order:2,
                width:'300px',
                position:'relative'
            },
            CAPTION:{
                position:'relative',
                'text-align':'center'
            },
            MIN:{
                position:'absolute',
                left:0,
                top:0
            },
            MAX:{
                position:'absolute',
                right:0,
                top:0
            }
        },
        Behaviors:{
            IND1:{
                onKeydown:function(profile, e, src){
                    if(profile.properties.disabled || profile.properties.readonly)return;
                    profile.box._keydown.apply(profile.box,[profile, e, src,0]);
                },
                beforeMousedown:function(profile, e, src){
                    if(profile.properties.disabled || profile.properties.readonly)return;
                    if(xui.Event.getBtn(e)!="left")return;
                    var p=profile.properties,
                        box=profile.box,
                        arr = box._v2a(p.$UIvalue);

                    xui.use(src).startDrag(e,{
                        widthIncrement:p.steps?p.width/p.steps:null,
                        dragType:'move',
                        targetReposition:true,
                        horizontalOnly:true,
                        maxLeftOffset: (profile._v1),
                        maxRightOffset: (profile._v2-profile._v1),
                        dragCursor:'default'
                    });
                    xui.use(src).css('zIndex',10).focus();
                    profile.getSubNode('IND2').css('zIndex',5);
                },
                onDrag:function(profile, e, src){
                    var d=xui.DragDrop.getProfile();
                    profile.box._ondrag.apply(profile.box,[profile,d.curPos.left,src,0]);
                },
                onDragstop:function(profile, e, src){
                    var p=profile.properties,
                        box=profile.boxing(),
                        rate = profile._rate,
                        d=xui.DragDrop.getProfile(),
                        f,
                        arr = p.$UIvalue.split(':');
                    profile._v1=d.curPos.left;
                    arr[0]= ((profile._v1)/rate + p.min);
                    box.setUIValue(arr.join(':'),null,null,'drag');

                    if(profile._v1==profile._v2){
                        xui.use(src).css('zIndex',10);
                        profile.getSubNode('IND2').css('zIndex',5);
                    }
                }
            },
            IND2:{
                onKeydown:function(profile, e, src){
                    if(profile.properties.disabled || profile.properties.readonly)return;
                    profile.box._keydown.apply(profile.box,[profile, e, src,1]);
                },
                beforeMousedown:function(profile, e, src){
                    if(profile.properties.disabled || profile.properties.readonly)return;
                    if(xui.Event.getBtn(e)!="left")return;
                    var p=profile.properties,
                        box=profile.box,
                        arr = box._v2a(p.$UIvalue);

                    xui.use(src).startDrag(e,{
                        widthIncrement:p.steps?p.width/p.steps:null,
                        dragType:'move',
                        targetReposition:true,
                        horizontalOnly:true,
                        maxLeftOffset: (profile._v2-profile._v1),
                        maxRightOffset: (300 - profile._v2),
                        dragCursor:'default'
                    });
                    xui.use(src).css('zIndex',10).focus();
                    profile.getSubNode('IND1').css('zIndex',5);
                },
                onDrag:function(profile, e, src){
                    var d=xui.DragDrop.getProfile();
                    profile.box._ondrag.apply(profile.box,[profile,d.curPos.left,src,1]);
                },
                onDragstop:function(profile, e, src){
                    var p=profile.properties,
                        box=profile.boxing(),
                        rate = profile._rate,
                        d=xui.DragDrop.getProfile(),
                        f,
                        arr = p.$UIvalue.split(':');
                    profile._v2=d.curPos.left;
                    arr[1]= ((profile._v2)/rate + p.min);
                    box.setUIValue(arr.join(':'),null,null,'drag2');
                }
            }
        },
        DataModel:{
            position:'absolute',
            
            width:{
                ini:300,
                readonly:true
            },
            height:{
                ini:46,
                readonly:true
            },
            min:{
                ini:0,
                action:function(){
                    var self=this,t,pro=self.properties,b=self.boxing();
                    b.refresh();
                    if(pro.$UIvalue!=(t=this.box._ensureValue(self,pro.$UIvalue)))
                        b.setValue(t,false,'min');
                }
            },
            max:{
                ini:100,
                action:function(){
                    var self=this,t,pro=self.properties,b=self.boxing();
                    b.refresh();
                    if(pro.$UIvalue!=(t=this.box._ensureValue(self,pro.$UIvalue)))
                        b.setValue(t,false,'max');
                }
            },
            unit:{
                ini:'',
                action:function(){
                    this.boxing()._setCtrlValue(this.properties.$UIvalue);
                }
            },
            steps:0,
            captionTpl:{
                ini:'{fromvalue}{unit} - {tovalue}{unit}',
                action:function(){
                    this.boxing()._setCtrlValue(this.properties.$UIvalue);
                }
            },
            value:'0:100',
            singleValue:{
                ini:false,
                action:function(v){
                    this.boxing().refresh();
                }
            }
        },
        _prepareData:function(profile){
            var d=arguments.callee.upper.call(this, profile);
            var p=profile.properties,
                arr=profile.box._v2a(p.value);
            d._single = p.singleValue?'display:none':'';

            p.min=parseFloat(p.min);
            p.max=parseFloat(p.max);

            d.min = d.min + p.unit;
            d.max = d.max + p.unit;
            return d;
        },
        _ensureValue:function(profile, value){
            if(!value)value="";
            var p = profile.properties,
                a = value.split(':'),
                min=p.min,
                max=p.max,
                b=[],
                f1=function(a){return parseFloat(a)},
                f2=function(a){return Math.min(max, Math.max(min,a))};
            
            b[0]= f1(a[0]);
            b[1]= f1(a[1]);
            b[0] = Math.min(b[0],b[1]);
            if(!min)min=b[0];
            if(!max)max=b[1];
            b[0]= f2(b[0]);
            b[1]= f2(b[1]);            
            return b.join(':');
        },
        _v2a:function(value){
            return typeof value == 'string'? value.split(':') : value;
        },
        _buildTpl:function(single,tpl,arr,unit){
            return single?
              arr[1] + unit
            : tpl.replace(/\{fromvalue\}/g,arr[0]).replace(/\{tovalue\}/g,arr[1]).replace(/\{unit\}/g,unit);
        },
        _x2y:function(x){
            return (15 + 1 - (x) * (15/300));
        },
        _keydown:function(profile, e, src,type){
            var key=xui.Event.getKey(e);
            if(key.key=='left' || key.key=='right'){
                var s=xui.use(src).get(0).style, left=parseInt(s.left,10), pro=profile.properties, steps=pro.steps, span=300/steps, v,f=function(key){
                    return parseInt(profile.getSubNode(key).get(0).style.left,10);
                };
                left += key.key=='left'?-1:1;
                if(steps){
                    left = left-left%span;
                    if(key.key=='right')
                        left += span;
                }
                if(!pro.singleValue)
                    if(type===0){
                        v=f('IND2');
                        if(left>v)left=v;
                    }else{
                        v=f('IND1');
                        if(left<v)left=v;
                    }
                if(left<0)left=0;
                if(left>300)left=300;
                
                s.left=left+'px';

                profile.box._ondrag.apply(profile.box,[profile,left,src,type]);

                var  rate = profile._rate,
                    arr = pro.$UIvalue.split(':');
                if(type===0){
                    profile._v1=left;
                    arr[0]= ((profile._v1)/rate + pro.min);
                }else{
                    profile._v2=left;
                    arr[1]= ((profile._v2)/rate + pro.min);
                }
                profile.boxing().setUIValue(arr.join(':'),null,null,'kb');                
            }
        },
        _ondrag:function(profile, left, src, tag){
            var p=profile.properties,
                d=xui.DragDrop.getProfile(),
                box=profile.box,
                fun=function(k){return profile.getSubNode(k)},
                fun2=function(o,v){o.get(0).style.width = v +'px'},
                cap = fun('CAPTION'),
                r1 = fun('RULER1'),
                r3 = fun('RULER3'),
                t,f,
                arr=this._v2a(p.$UIvalue);

             //adjust top
            xui.use(src).get(0).style.top = this._x2y(left) + 'px';

            t = ((left)/profile._rate + p.min);

            if(tag){
                arr[1] = t;
                fun2(r3, left + 8);
            }else{
                arr[0] = t;
                fun2(r1, left + 8);
            }
             cap.html(box._buildTpl(p.singleValue, p.captionTpl, arr,p.unit),false);
        },
        _onresize:function(){}
    }
});Class('xui.UI.Calendar', 'xui.UI.DatePicker', {
    Instance:{
        setDayInfo:function(key,index,value){
            var node=this.getSubNode(key, ""+index);
            if(node.get(0)){
                node.get(0).innerHTML=value;
            }
            return this;
        },
        addContents : function(index,node){
            this.getSubNode('DC',""+index).append(node);
            return this;
        },
        clearContents : function(index){
            this.getSubNode('DC',""+index).empty();
            return this;
        }
    },
    Initialize:function(){
        var self=this,
            id=xui.UI.$ID,
            tag=xui.UI.$tag_special,
            cls=xui.UI.$CLS,
            key=self.KEY;

        self.addTemplateKeys(['H', 'W','COL','DH','DAYBOX','DC','TBODY', 'THEADER', 'TD','DF1','DF2','DF3','DF4']);
        var colgroup = '<colgroup id="'+key+'-COL:'+id+':"  class="'+tag+'COL_CS'+tag+' xui-custom {comcls}"  style="'+tag+'COL_CS'+tag+'"><col width="2%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/><col width="14%"/></colgroup>',
            thead1='<thead ID="'+key+'-THEADER:'+id+':" class="'+tag+'THEADER_CS'+tag+' xui-custom {comcls}"  style="'+tag+'THEADER_CS'+tag+'" ><tr height="1%"><th id="'+key+'-H:'+id+':7" class="xui-node xui-uith xui-uiborder-rb xui-node-th '+cls+'-h '+tag+'H_CC'+tag+' xui-custom {comcls}"  style="'+tag+'H_CS'+tag+'"></th>',
            thead2='</tr></thead>',
            th='<th id="'+key+'-H:'+id+':@" class="xui-node xui-uith xui-uiborder-rb xui-node-th '+cls+'-h '+tag+'H_CC'+tag+' xui-custom {comcls}"  style="'+tag+'H_CS'+tag+'">@</th>',
            tbody1 = '<tbody id="'+key+'-TBODY:'+id +':"  class="'+tag+'TBODY_CS'+tag+' xui-custom {comcls}"  style="'+tag+'TBODY_CS'+tag+'">',
            tbody2 = '</tbody>',
            tr1='<tr>',
            tr2='</tr>',
            td1='<th id="'+key+'-W:'+id+':@"  class="xui-node xui-uith xui-uiborder-rb xui-node-th '+cls+'-w '+tag+'W_CC'+tag+' xui-custom {comcls}" style="'+tag+'W_CS'+tag+'">@</th>',
            td2='<td id="'+key+'-TD:'+id+':@" class="xui-node xui-uitd xui-uiborder-rb xui-node-td '+cls+'-td '+tag+'TD_CC'+tag+' xui-custom {comcls}"  style="'+tag+'TD_CS'+tag+'" '+xui.$IEUNSELECTABLE()+'  >'+
                '<div id="'+key+'-DAYBOX:'+id+':@" class="xui-node xui-node-div '+cls+'-daybox '+tag+'DAY_CC'+tag+' xui-custom {comcls}"  style="'+tag+'DAY_CS'+tag+'" '+xui.$IEUNSELECTABLE()+' >'+
                    '<div id="'+key+'-DH:'+id+':@" class="xui-node xui-node-div '+cls+'-dh '+tag+'DH_CC'+tag+' xui-custom {comcls}"  style="'+tag+'DH_CS'+tag+'"></div>'+
                    '<div id="'+key+'-DF1:'+id+':@" class="xui-node xui-node-div '+cls+'-df1 '+tag+'DF1_CC'+tag+' xui-custom {comcls}" style="'+tag+'DF1_CS'+tag+'"></div>'+
                    '<div id="'+key+'-DF2:'+id+':@" class="xui-node xui-node-div '+cls+'-df2 '+tag+'DF2_CC'+tag+' xui-custom {comcls}" style="'+tag+'DF2_CS'+tag+'"></div>'+
                    '<div id="'+key+'-DF3:'+id+':@" class="xui-node xui-node-div '+cls+'-df3 '+tag+'DF3_CC'+tag+' xui-custom {comcls}" style="'+tag+'DF3_CS'+tag+'"></div>'+
                    '<div id="'+key+'-DF4:'+id+':@" class="xui-node xui-node-div '+cls+'-df4 '+tag+'DF4_CC'+tag+' xui-custom {comcls}"  style="'+tag+'DF4_CS'+tag+'"></div>'+
                    '<div id="'+key+'-DC:'+id+':@" class="xui-node xui-node-div '+cls+'-dc '+tag+'DC_CC'+tag+' xui-custom {comcls}"  style="'+tag+'DC_CS'+tag+'"></div>'+
                '</div>'+
                '</td>',
            body,i,j,k,l,a=[],b=[];
        for(i=0;i<7;i++)
            b[b.length]= th.replace(/@/g,i);

        k=l=0;
        for(i=0;i<48;i++){
            j=i%8;
            a[a.length]= (j==0?tr1:'') + (j==0?td1:td2).replace(/@/g,j==0?l:k) + (j==7?tr2:'');
            if(j!==0)k++;
            else l++;
        }

        body=colgroup+thead1+b.join('')+thead2+tbody1+a.join('')+tbody2;

        self.setTemplate({
            tagName : 'div',
            style:'{_style}',
            className:'{_className}',
            onselectstart:'return false',
            BORDER:{
                tagName : 'div',
                BODY:{
                    $order:1,
                    tagName:'table',
                    cellpadding:"0",
                    cellspacing:"0",
                    width:'100%',
                    text:body
                }
            }
        });
        delete self.$Keys.YEAR;
        delete self.$Keys.MONTH;
    },
    Static:{
        Behaviors:{        
            DroppableKeys:['DAYBOX'],
            HoverEffected:{},
            ClickEffected:{},
            onSize:xui.UI.$onSize,
            TD:{onClick:null,
                onDblclick:function(profile, e, src){
                    var p=profile.properties,
                        index=profile.getSubId(src);
                    if(p.disabled)return false;
                    profile.boxing().onDblclick(profile, index, e, src);
                }
            }
        },
        DataModel:{
            handleHeight : null,
            tipsHeight :null,
            closeBtn:null,
            timeInput:null,
            dataBinder:null,
            dateField:null,

            dock:'fill',
            width:200,
            height:200
        },
        EventHandlers:{
            onDblclick:function(profile, item, e, src){},
            beforeClose:null
        },
        _getLabelNodes:function(profile){
            return profile.$day1 || (profile.$day1=profile.getSubNode('DF1',true));
        },
        _getDayNodes:function(profile){
            return profile.$day2 || (profile.$day2=profile.getSubNode('DAYBOX',true));
        },
        Appearances:{
            'DAYBOX, DC':{
                position:'relative'
            },
            'DF1, DF2, DF3, DF4':{
                position:'absolute',
                'white-space':'nowrap'
            },
            DF1:{
                left:'2px',
                top:'2px'
            },
            DF2:{
                right:'2px',
                top:'2px'
            },
            DF3:{
                left:'2px',
                bottom:'2px'
            },
            DF4:{
                right:'2px',
                bottom:'2px'
            },
            DAYBOX:{
                overflow:'hidden'
            },
            DC:{
                'text-align':'left'
            }
        },
        _onresize:function(profile,width,height){
            var p=profile.properties,
                f=function(k){return profile.getSubNode(k)},
                t;
            //for border, view and items
            if(height){
                f('BORDER').height(t=height);
                f('BODY').height(t);
                t=(t-16)/6-1;
                profile.box._getDayNodes(profile).height(t);
            }
        }
    }
});//  \\
//  Raphal 2.2.0 - JavaScript Vector Library                                                              \\
//  \\
//  Copyright  2008-2016 Dmitry Baranovskiy (http://raphaeljs.com)                                        \\
//  Copyright  2008-2016 Sencha Labs (http://sencha.com)                                                  \\
//  \\
//  Licensed under the MIT (https://github.com/DmitryBaranovskiy/raphael/blob/master/license.txt) license. \\
//  \\

(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define("Raphael", [], factory);
	else if(typeof exports === 'object')
		exports["Raphael"] = factory();
	else
		root["Raphael"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};

/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {

/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;

/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};

/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);

/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;

/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}


/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;

/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;

/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";

/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(1), __webpack_require__(3), __webpack_require__(4)], __WEBPACK_AMD_DEFINE_RESULT__ = function(R) {

	    return R;

	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

/***/ },
/* 1 */
/***/ function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(2)], __WEBPACK_AMD_DEFINE_RESULT__ = function(eve) {

	    /*\
	     * Raphael
	     [ method ]
	     **
	     * Creates a canvas object on which to draw.
	     * You must do this first, as all future calls to drawing methods
	     * from this instance will be bound to this canvas.
	     > Parameters
	     **
	     - container (HTMLElement|string) DOM element or its ID which is going to be a parent for drawing surface
	     - width (number)
	     - height (number)
	     - callback (function) #optional callback function which is going to be executed in the context of newly created paper
	     * or
	     - x (number)
	     - y (number)
	     - width (number)
	     - height (number)
	     - callback (function) #optional callback function which is going to be executed in the context of newly created paper
	     * or
	     - all (array) (first 3 or 4 elements in the array are equal to [containerID, width, height] or [x, y, width, height]. The rest are element descriptions in format {type: type, <attributes>}). See @Paper.add.
	     - callback (function) #optional callback function which is going to be executed in the context of newly created paper
	     * or
	     - onReadyCallback (function) function that is going to be called on DOM ready event. You can also subscribe to this event via Eves DOMLoad event. In this case method returns `undefined`.
	     = (object) @Paper
	     > Usage
	     | // Each of the following examples create a canvas
	     | // that is 320px wide by 200px high.
	     | // Canvas is created at the viewports 10,50 coordinate.
	     | var paper = Raphael(10, 50, 320, 200);
	     | // Canvas is created at the top left corner of the #notepad element
	     | // (or its top right corner in dir="rtl" elements)
	     | var paper = Raphael(document.getElementById("notepad"), 320, 200);
	     | // Same as above
	     | var paper = Raphael("notepad", 320, 200);
	     | // Image dump
	     | var set = Raphael(["notepad", 320, 200, {
	     |     type: "rect",
	     |     x: 10,
	     |     y: 10,
	     |     width: 25,
	     |     height: 25,
	     |     stroke: "#f00"
	     | }, {
	     |     type: "text",
	     |     x: 30,
	     |     y: 40,
	     |     text: "Dump"
	     | }]);
	    \*/
	    function R(first) {
	        if (R.is(first, "function")) {
	            return loaded ? first() : eve.on("raphael.DOMload", first);
	        } else if (R.is(first, array)) {
	            return R._engine.create[apply](R, first.splice(0, 3 + R.is(first[0], nu))).add(first);
	        } else {
	            var args = Array.prototype.slice.call(arguments, 0);
	            if (R.is(args[args.length - 1], "function")) {
	                var f = args.pop();
	                return loaded ? f.call(R._engine.create[apply](R, args)) : eve.on("raphael.DOMload", function () {
	                    f.call(R._engine.create[apply](R, args));
	                });
	            } else {
	                return R._engine.create[apply](R, arguments);
	            }
	        }
	    }
	    R.version = "2.2.0";
	    R.eve = eve;
	    var loaded,
	        separator = /[, ]+/,
	        elements = {circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1},
	        formatrg = /\{(\d+)\}/g,
	        proto = "prototype",
	        has = "hasOwnProperty",
	        g = {
	            doc: document,
	            win: window
	        },
	        oldRaphael = {
	            was: Object.prototype[has].call(g.win, "Raphael"),
	            is: g.win.Raphael
	        },
	        Paper = function () {
	            /*\
	             * Paper.ca
	             [ property (object) ]
	             **
	             * Shortcut for @Paper.customAttributes
	            \*/
	            /*\
	             * Paper.customAttributes
	             [ property (object) ]
	             **
	             * If you have a set of attributes that you would like to represent
	             * as a function of some number you can do it easily with custom attributes:
	             > Usage
	             | paper.customAttributes.hue = function (num) {
	             |     num = num % 1;
	             |     return {fill: "hsb(" + num + ", 0.75, 1)"};
	             | };
	             | // Custom attribute hue will change fill
	             | // to be given hue with fixed saturation and brightness.
	             | // Now you can use it like this:
	             | var c = paper.circle(10, 10, 10).attr({hue: .45});
	             | // or even like this:
	             | c.animate({hue: 1}, 1e3);
	             |
	             | // You could also create custom attribute
	             | // with multiple parameters:
	             | paper.customAttributes.hsb = function (h, s, b) {
	             |     return {fill: "hsb(" + [h, s, b].join(",") + ")"};
	             | };
	             | c.attr({hsb: "0.5 .8 1"});
	             | c.animate({hsb: [1, 0, 0.5]}, 1e3);
	            \*/
	            this.ca = this.customAttributes = {};
	        },
	        paperproto,
	        appendChild = "appendChild",
	        apply = "apply",
	        concat = "concat",
	        supportsTouch = ('ontouchstart' in g.win) || g.win.DocumentTouch && g.doc instanceof DocumentTouch, //taken from Modernizr touch test
	        E = "",
	        S = " ",
	        Str = String,
	        split = "split",
	        events = "click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel contextmenu"[split](S),
	        touchMap = {
	            mousedown: "touchstart",
	            mousemove: "touchmove",
	            mouseup: "touchend"
	        },
	        lowerCase = Str.prototype.toLowerCase,
	        math = Math,
	        mmax = math.max,
	        mmin = math.min,
	        abs = math.abs,
	        pow = math.pow,
	        PI = math.PI,
	        nu = "number",
	        string = "string",
	        array = "array",
	        toString = "toString",
	        fillString = "fill",
	        objectToString = Object.prototype.toString,
	        paper = {},
	        push = "push",
	        ISURL = R._ISURL = /^url\(['"]?(.+?)['"]?\)$/i,
	        colourRegExp = /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
	        isnan = {"NaN": 1, "Infinity": 1, "-Infinity": 1},
	        bezierrg = /^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,
	        round = math.round,
	        setAttribute = "setAttribute",
	        toFloat = parseFloat,
	        toInt = parseInt,
	        upperCase = Str.prototype.toUpperCase,
	        availableAttrs = R._availableAttrs = {
	            "arrow-end": "none",
	            "arrow-start": "none",
	            blur: 0,
	            "clip-rect": "0 0 1e9 1e9",
	            cursor: "default",
	            cx: 0,
	            cy: 0,
	            fill: "#fff",
	            "fill-opacity": 1,
	            font: '10px "Arial"',
	            "font-family": '"Arial"',
	            "font-size": "10",
	            "font-style": "normal",
	            "font-weight": 400,
	            gradient: 0,
	            height: 0,
	            href: "http://raphaeljs.com/",
	            "letter-spacing": 0,
	            opacity: 1,
	            path: "M0,0",
	            r: 0,
	            rx: 0,
	            ry: 0,
	            src: "",
	            stroke: "#000",
	            "stroke-dasharray": "",
	            "stroke-linecap": "butt",
	            "stroke-linejoin": "butt",
	            "stroke-miterlimit": 0,
	            "stroke-opacity": 1,
	            "stroke-width": 1,
	            target: "_blank",
	            "text-anchor": "middle",
	            title: "Raphael",
	            transform: "",
	            width: 0,
	            x: 0,
	            y: 0
	        },
	        availableAnimAttrs = R._availableAnimAttrs = {
	            blur: nu,
	            "clip-rect": "csv",
	            cx: nu,
	            cy: nu,
	            fill: "colour",
	            "fill-opacity": nu,
	            "font-size": nu,
	            height: nu,
	            opacity: nu,
	            path: "path",
	            r: nu,
	            rx: nu,
	            ry: nu,
	            stroke: "colour",
	            "stroke-opacity": nu,
	            "stroke-width": nu,
	            transform: "transform",
	            width: nu,
	            x: nu,
	            y: nu
	        },
	        whitespace = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,
	        commaSpaces = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,
	        hsrg = {hs: 1, rg: 1},
	        p2s = /,?([achlmqrstvxz]),?/gi,
	        pathCommand = /([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
	        tCommand = /([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
	        pathValues = /(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,
	        radial_gradient = R._radial_gradient = /^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,
	        eldata = {},
	        sortByKey = function (a, b) {
	            return a.key - b.key;
	        },
	        sortByNumber = function (a, b) {
	            return toFloat(a) - toFloat(b);
	        },
	        fun = function () {},
	        pipe = function (x) {
	            return x;
	        },
	        rectPath = R._rectPath = function (x, y, w, h, r) {
	            if (r) {
	                return [["M", x + r, y], ["l", w - r * 2, 0], ["a", r, r, 0, 0, 1, r, r], ["l", 0, h - r * 2], ["a", r, r, 0, 0, 1, -r, r], ["l", r * 2 - w, 0], ["a", r, r, 0, 0, 1, -r, -r], ["l", 0, r * 2 - h], ["a", r, r, 0, 0, 1, r, -r], ["z"]];
	            }
	            return [["M", x, y], ["l", w, 0], ["l", 0, h], ["l", -w, 0], ["z"]];
	        },
	        ellipsePath = function (x, y, rx, ry) {
	            if (ry == null) {
	                ry = rx;
	            }
	            return [["M", x, y], ["m", 0, -ry], ["a", rx, ry, 0, 1, 1, 0, 2 * ry], ["a", rx, ry, 0, 1, 1, 0, -2 * ry], ["z"]];
	        },
	        getPath = R._getPath = {
	            path: function (el) {
	                return el.attr("path");
	            },
	            circle: function (el) {
	                var a = el.attrs;
	                return ellipsePath(a.cx, a.cy, a.r);
	            },
	            ellipse: function (el) {
	                var a = el.attrs;
	                return ellipsePath(a.cx, a.cy, a.rx, a.ry);
	            },
	            rect: function (el) {
	                var a = el.attrs;
	                return rectPath(a.x, a.y, a.width, a.height, a.r);
	            },
	            image: function (el) {
	                var a = el.attrs;
	                return rectPath(a.x, a.y, a.width, a.height);
	            },
	            text: function (el) {
	                var bbox = el._getBBox();
	                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);
	            },
	            set : function(el) {
	                var bbox = el._getBBox();
	                return rectPath(bbox.x, bbox.y, bbox.width, bbox.height);
	            }
	        },
	        /*\
	         * Raphael.mapPath
	         [ method ]
	         **
	         * Transform the path string with given matrix.
	         > Parameters
	         - path (string) path string
	         - matrix (object) see @Matrix
	         = (string) transformed path string
	        \*/
	        mapPath = R.mapPath = function (path, matrix) {
	            if (!matrix) {
	                return path;
	            }
	            var x, y, i, j, ii, jj, pathi;
	            path = path2curve(path);
	            for (i = 0, ii = path.length; i < ii; i++) {
	                pathi = path[i];
	                for (j = 1, jj = pathi.length; j < jj; j += 2) {
	                    x = matrix.x(pathi[j], pathi[j + 1]);
	                    y = matrix.y(pathi[j], pathi[j + 1]);
	                    pathi[j] = x;
	                    pathi[j + 1] = y;
	                }
	            }
	            return path;
	        };

	    R._g = g;
	    /*\
	     * Raphael.type
	     [ property (string) ]
	     **
	     * Can be SVG, VML or empty, depending on browser support.
	    \*/
	    R.type = (g.win.SVGAngle || g.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? "SVG" : "VML");
	    if (R.type == "VML") {
	        var d = g.doc.createElement("div"),
	            b;
	        d.innerHTML = '<v:shape adj="1"/>';
	        b = d.firstChild;
	        b.style.behavior = "url(#default#VML)";
	        if (!(b && typeof b.adj == "object")) {
	            return (R.type = E);
	        }
	        d = null;
	    }
	    /*\
	     * Raphael.svg
	     [ property (boolean) ]
	     **
	     * `true` if browser supports SVG.
	    \*/
	    /*\
	     * Raphael.vml
	     [ property (boolean) ]
	     **
	     * `true` if browser supports VML.
	    \*/
	    R.svg = !(R.vml = R.type == "VML");
	    R._Paper = Paper;
	    /*\
	     * Raphael.fn
	     [ property (object) ]
	     **
	     * You can add your own method to the canvas. For example if you want to draw a pie chart,
	     * you can create your own pie chart function and ship it as a Raphal plugin. To do this
	     * you need to extend the `Raphael.fn` object. You should modify the `fn` object before a
	     * Raphal instance is created, otherwise it will take no effect. Please note that the
	     * ability for namespaced plugins was removed in Raphael 2.0. It is up to the plugin to
	     * ensure any namespacing ensures proper context.
	     > Usage
	     | Raphael.fn.arrow = function (x1, y1, x2, y2, size) {
	     |     return this.path( ... );
	     | };
	     | // or create namespace
	     | Raphael.fn.mystuff = {
	     |     arrow: function () {},
	     |     star: function () {},
	     |     // etc
	     | };
	     | var paper = Raphael(10, 10, 630, 480);
	     | // then use it
	     | paper.arrow(10, 10, 30, 30, 5).attr({fill: "#f00"});
	     | paper.mystuff.arrow();
	     | paper.mystuff.star();
	    \*/
	    R.fn = paperproto = Paper.prototype = R.prototype;
	    R._id = 0;
	    R._oid = 0;
	    /*\
	     * Raphael.is
	     [ method ]
	     **
	     * Handful of replacements for `typeof` operator.
	     > Parameters
	     - o () any object or primitive
	     - type (string) name of the type, i.e. string, function, number, etc.
	     = (boolean) is given value is of given type
	    \*/
	    R.is = function (o, type) {
	        type = lowerCase.call(type);
	        if (type == "finite") {
	            return !isnan[has](+o);
	        }
	        if (type == "array") {
	            return o instanceof Array;
	        }
	        return  (type == "null" && o === null) ||
	                (type == typeof o && o !== null) ||
	                (type == "object" && o === Object(o)) ||
	                (type == "array" && Array.isArray && Array.isArray(o)) ||
	                objectToString.call(o).slice(8, -1).toLowerCase() == type;
	    };

	    function clone(obj) {
	        if (typeof obj == "function" || Object(obj) !== obj) {
	            return obj;
	        }
	        var res = new obj.constructor;
	        for (var key in obj) if (obj[has](key)) {
	            res[key] = clone(obj[key]);
	        }
	        return res;
	    }

	    /*\
	     * Raphael.angle
	     [ method ]
	     **
	     * Returns angle between two or three points
	     > Parameters
	     - x1 (number) x coord of first point
	     - y1 (number) y coord of first point
	     - x2 (number) x coord of second point
	     - y2 (number) y coord of second point
	     - x3 (number) #optional x coord of third point
	     - y3 (number) #optional y coord of third point
	     = (number) angle in degrees.
	    \*/
	    R.angle = function (x1, y1, x2, y2, x3, y3) {
	        if (x3 == null) {
	            var x = x1 - x2,
	                y = y1 - y2;
	            if (!x && !y) {
	                return 0;
	            }
	            return (180 + math.atan2(-y, -x) * 180 / PI + 360) % 360;
	        } else {
	            return R.angle(x1, y1, x3, y3) - R.angle(x2, y2, x3, y3);
	        }
	    };
	    /*\
	     * Raphael.rad
	     [ method ]
	     **
	     * Transform angle to radians
	     > Parameters
	     - deg (number) angle in degrees
	     = (number) angle in radians.
	    \*/
	    R.rad = function (deg) {
	        return deg % 360 * PI / 180;
	    };
	    /*\
	     * Raphael.deg
	     [ method ]
	     **
	     * Transform angle to degrees
	     > Parameters
	     - rad (number) angle in radians
	     = (number) angle in degrees.
	    \*/
	    R.deg = function (rad) {
	        return Math.round ((rad * 180 / PI% 360)* 1000) / 1000;
	    };
	    /*\
	     * Raphael.snapTo
	     [ method ]
	     **
	     * Snaps given value to given grid.
	     > Parameters
	     - values (array|number) given array of values or step of the grid
	     - value (number) value to adjust
	     - tolerance (number) #optional tolerance for snapping. Default is `10`.
	     = (number) adjusted value.
	    \*/
	    R.snapTo = function (values, value, tolerance) {
	        tolerance = R.is(tolerance, "finite") ? tolerance : 10;
	        if (R.is(values, array)) {
	            var i = values.length;
	            while (i--) if (abs(values[i] - value) <= tolerance) {
	                return values[i];
	            }
	        } else {
	            values = +values;
	            var rem = value % values;
	            if (rem < tolerance) {
	                return value - rem;
	            }
	            if (rem > values - tolerance) {
	                return value - rem + values;
	            }
	        }
	        return value;
	    };

	    /*\
	     * Raphael.createUUID
	     [ method ]
	     **
	     * Returns RFC4122, version 4 ID
	    \*/
	    var createUUID = R.createUUID = (function (uuidRegEx, uuidReplacer) {
	        return function () {
	            return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(uuidRegEx, uuidReplacer).toUpperCase();
	        };
	    })(/[xy]/g, function (c) {
	        var r = math.random() * 16 | 0,
	            v = c == "x" ? r : (r & 3 | 8);
	        return v.toString(16);
	    });

	    /*\
	     * Raphael.setWindow
	     [ method ]
	     **
	     * Used when you need to draw in `&lt;iframe>`. Switched window to the iframe one.
	     > Parameters
	     - newwin (window) new window object
	    \*/
	    R.setWindow = function (newwin) {
	        eve("raphael.setWindow", R, g.win, newwin);
	        g.win = newwin;
	        g.doc = g.win.document;
	        if (R._engine.initWin) {
	            R._engine.initWin(g.win);
	        }
	    };
	    var toHex = function (color) {
	        if (R.vml) {
	            // http://dean.edwards.name/weblog/2009/10/convert-any-colour-value-to-hex-in-msie/
	            var trim = /^\s+|\s+$/g;
	            var bod;
	            try {
	                var docum = new ActiveXObject("htmlfile");
	                docum.write("<body>");
	                docum.close();
	                bod = docum.body;
	            } catch(e) {
	                bod = createPopup().document.body;
	            }
	            var range = bod.createTextRange();
	            toHex = cacher(function (color) {
	                try {
	                    bod.style.color = Str(color).replace(trim, E);
	                    var value = range.queryCommandValue("ForeColor");
	                    value = ((value & 255) << 16) | (value & 65280) | ((value & 16711680) >>> 16);
	                    return "#" + ("000000" + value.toString(16)).slice(-6);
	                } catch(e) {
	                    return "none";
	                }
	            });
	        } else {
	            var i = g.doc.createElement("i");
	            i.title = "Rapha\xebl Colour Picker";
	            i.style.display = "none";
	            g.doc.body.appendChild(i);
	            toHex = cacher(function (color) {
	                i.style.color = color;
	                return g.doc.defaultView.getComputedStyle(i, E).getPropertyValue("color");
	            });
	        }
	        return toHex(color);
	    },
	    hsbtoString = function () {
	        return "hsb(" + [this.h, this.s, this.b] + ")";
	    },
	    hsltoString = function () {
	        return "hsl(" + [this.h, this.s, this.l] + ")";
	    },
	    rgbtoString = function () {
	        return this.hex;
	    },
	    prepareRGB = function (r, g, b) {
	        if (g == null && R.is(r, "object") && "r" in r && "g" in r && "b" in r) {
	            b = r.b;
	            g = r.g;
	            r = r.r;
	        }
	        if (g == null && R.is(r, string)) {
	            var clr = R.getRGB(r);
	            r = clr.r;
	            g = clr.g;
	            b = clr.b;
	        }
	        if (r > 1 || g > 1 || b > 1) {
	            r /= 255;
	            g /= 255;
	            b /= 255;
	        }

	        return [r, g, b];
	    },
	    packageRGB = function (r, g, b, o) {
	        r *= 255;
	        g *= 255;
	        b *= 255;
	        var rgb = {
	            r: r,
	            g: g,
	            b: b,
	            hex: R.rgb(r, g, b),
	            toString: rgbtoString
	        };
	        R.is(o, "finite") && (rgb.opacity = o);
	        return rgb;
	    };

	    /*\
	     * Raphael.color
	     [ method ]
	     **
	     * Parses the color string and returns object with all values for the given color.
	     > Parameters
	     - clr (string) color string in one of the supported formats (see @Raphael.getRGB)
	     = (object) Combined RGB & HSB object in format:
	     o {
	     o     r (number) red,
	     o     g (number) green,
	     o     b (number) blue,
	     o     hex (string) color in HTML/CSS format: #,
	     o     error (boolean) `true` if string cant be parsed,
	     o     h (number) hue,
	     o     s (number) saturation,
	     o     v (number) value (brightness),
	     o     l (number) lightness
	     o }
	    \*/
	    R.color = function (clr) {
	        var rgb;
	        if (R.is(clr, "object") && "h" in clr && "s" in clr && "b" in clr) {
	            rgb = R.hsb2rgb(clr);
	            clr.r = rgb.r;
	            clr.g = rgb.g;
	            clr.b = rgb.b;
	            clr.hex = rgb.hex;
	        } else if (R.is(clr, "object") && "h" in clr && "s" in clr && "l" in clr) {
	            rgb = R.hsl2rgb(clr);
	            clr.r = rgb.r;
	            clr.g = rgb.g;
	            clr.b = rgb.b;
	            clr.hex = rgb.hex;
	        } else {
	            if (R.is(clr, "string")) {
	                clr = R.getRGB(clr);
	            }
	            if (R.is(clr, "object") && "r" in clr && "g" in clr && "b" in clr) {
	                rgb = R.rgb2hsl(clr);
	                clr.h = rgb.h;
	                clr.s = rgb.s;
	                clr.l = rgb.l;
	                rgb = R.rgb2hsb(clr);
	                clr.v = rgb.b;
	            } else {
	                clr = {hex: "none"};
	                clr.r = clr.g = clr.b = clr.h = clr.s = clr.v = clr.l = -1;
	            }
	        }
	        clr.toString = rgbtoString;
	        return clr;
	    };
	    /*\
	     * Raphael.hsb2rgb
	     [ method ]
	     **
	     * Converts HSB values to RGB object.
	     > Parameters
	     - h (number) hue
	     - s (number) saturation
	     - v (number) value or brightness
	     = (object) RGB object in format:
	     o {
	     o     r (number) red,
	     o     g (number) green,
	     o     b (number) blue,
	     o     hex (string) color in HTML/CSS format: #
	     o }
	    \*/
	    R.hsb2rgb = function (h, s, v, o) {
	        if (this.is(h, "object") && "h" in h && "s" in h && "b" in h) {
	            v = h.b;
	            s = h.s;
	            o = h.o;
	            h = h.h;
	        }
	        h *= 360;
	        var R, G, B, X, C;
	        h = (h % 360) / 60;
	        C = v * s;
	        X = C * (1 - abs(h % 2 - 1));
	        R = G = B = v - C;

	        h = ~~h;
	        R += [C, X, 0, 0, X, C][h];
	        G += [X, C, C, X, 0, 0][h];
	        B += [0, 0, X, C, C, X][h];
	        return packageRGB(R, G, B, o);
	    };
	    /*\
	     * Raphael.hsl2rgb
	     [ method ]
	     **
	     * Converts HSL values to RGB object.
	     > Parameters
	     - h (number) hue
	     - s (number) saturation
	     - l (number) luminosity
	     = (object) RGB object in format:
	     o {
	     o     r (number) red,
	     o     g (number) green,
	     o     b (number) blue,
	     o     hex (string) color in HTML/CSS format: #
	     o }
	    \*/
	    R.hsl2rgb = function (h, s, l, o) {
	        if (this.is(h, "object") && "h" in h && "s" in h && "l" in h) {
	            l = h.l;
	            s = h.s;
	            h = h.h;
	        }
	        if (h > 1 || s > 1 || l > 1) {
	            h /= 360;
	            s /= 100;
	            l /= 100;
	        }
	        h *= 360;
	        var R, G, B, X, C;
	        h = (h % 360) / 60;
	        C = 2 * s * (l < .5 ? l : 1 - l);
	        X = C * (1 - abs(h % 2 - 1));
	        R = G = B = l - C / 2;

	        h = ~~h;
	        R += [C, X, 0, 0, X, C][h];
	        G += [X, C, C, X, 0, 0][h];
	        B += [0, 0, X, C, C, X][h];
	        return packageRGB(R, G, B, o);
	    };
	    /*\
	     * Raphael.rgb2hsb
	     [ method ]
	     **
	     * Converts RGB values to HSB object.
	     > Parameters
	     - r (number) red
	     - g (number) green
	     - b (number) blue
	     = (object) HSB object in format:
	     o {
	     o     h (number) hue
	     o     s (number) saturation
	     o     b (number) brightness
	     o }
	    \*/
	    R.rgb2hsb = function (r, g, b) {
	        b = prepareRGB(r, g, b);
	        r = b[0];
	        g = b[1];
	        b = b[2];

	        var H, S, V, C;
	        V = mmax(r, g, b);
	        C = V - mmin(r, g, b);
	        H = (C == 0 ? null :
	             V == r ? (g - b) / C :
	             V == g ? (b - r) / C + 2 :
	                      (r - g) / C + 4
	            );
	        H = ((H + 360) % 6) * 60 / 360;
	        S = C == 0 ? 0 : C / V;
	        return {h: H, s: S, b: V, toString: hsbtoString};
	    };
	    /*\
	     * Raphael.rgb2hsl
	     [ method ]
	     **
	     * Converts RGB values to HSL object.
	     > Parameters
	     - r (number) red
	     - g (number) green
	     - b (number) blue
	     = (object) HSL object in format:
	     o {
	     o     h (number) hue
	     o     s (number) saturation
	     o     l (number) luminosity
	     o }
	    \*/
	    R.rgb2hsl = function (r, g, b) {
	        b = prepareRGB(r, g, b);
	        r = b[0];
	        g = b[1];
	        b = b[2];

	        var H, S, L, M, m, C;
	        M = mmax(r, g, b);
	        m = mmin(r, g, b);
	        C = M - m;
	        H = (C == 0 ? null :
	             M == r ? (g - b) / C :
	             M == g ? (b - r) / C + 2 :
	                      (r - g) / C + 4);
	        H = ((H + 360) % 6) * 60 / 360;
	        L = (M + m) / 2;
	        S = (C == 0 ? 0 :
	             L < .5 ? C / (2 * L) :
	                      C / (2 - 2 * L));
	        return {h: H, s: S, l: L, toString: hsltoString};
	    };
	    R._path2string = function () {
	        return this.join(",").replace(p2s, "$1");
	    };
	    function repush(array, item) {
	        for (var i = 0, ii = array.length; i < ii; i++) if (array[i] === item) {
	            return array.push(array.splice(i, 1)[0]);
	        }
	    }
	    function cacher(f, scope, postprocessor) {
	        function newf() {
	            var arg = Array.prototype.slice.call(arguments, 0),
	                args = arg.join("\u2400"),
	                cache = newf.cache = newf.cache || {},
	                count = newf.count = newf.count || [];
	            if (cache[has](args)) {
	                repush(count, args);
	                return postprocessor ? postprocessor(cache[args]) : cache[args];
	            }
	            count.length >= 1e3 && delete cache[count.shift()];
	            count.push(args);
	            cache[args] = f[apply](scope, arg);
	            return postprocessor ? postprocessor(cache[args]) : cache[args];
	        }
	        return newf;
	    }

	    var preload = R._preload = function (src, f) {
	        var img = g.doc.createElement("img");
	        img.style.cssText = "position:absolute;left:-9999em;top:-9999em";
	        img.onload = function () {
	            f.call(this);
	            this.onload = null;
	            g.doc.body.removeChild(this);
	        };
	        img.onerror = function () {
	            g.doc.body.removeChild(this);
	        };
	        g.doc.body.appendChild(img);
	        img.src = src;
	    };

	    function clrToString() {
	        return this.hex;
	    }

	    /*\
	     * Raphael.getRGB
	     [ method ]
	     **
	     * Parses colour string as RGB object
	     > Parameters
	     - colour (string) colour string in one of formats:
	     # <ul>
	     #     <li>Colour name (<code>red</code>, <code>green</code>, <code>cornflowerblue</code>, etc)</li>
	     #     <li>#  shortened HTML colour: (<code>#000</code>, <code>#fc0</code>, etc)</li>
	     #     <li>#  full length HTML colour: (<code>#000000</code>, <code>#bd2300</code>)</li>
	     #     <li>rgb(, , )  red, green and blue channels values: (<code>rgb(200,&nbsp;100,&nbsp;0)</code>)</li>
	     #     <li>rgb(%, %, %)  same as above, but in %: (<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>)</li>
	     #     <li>hsb(, , )  hue, saturation and brightness values: (<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>)</li>
	     #     <li>hsb(%, %, %)  same as above, but in %</li>
	     #     <li>hsl(, , )  same as hsb</li>
	     #     <li>hsl(%, %, %)  same as hsb</li>
	     # </ul>
	     = (object) RGB object in format:
	     o {
	     o     r (number) red,
	     o     g (number) green,
	     o     b (number) blue
	     o     hex (string) color in HTML/CSS format: #,
	     o     error (boolean) true if string cant be parsed
	     o }
	    \*/
	    R.getRGB = cacher(function (colour) {
	        if (!colour || !!((colour = Str(colour)).indexOf("-") + 1)) {
	            return {r: -1, g: -1, b: -1, hex: "none", error: 1, toString: clrToString};
	        }
	        if (colour == "none") {
	            return {r: -1, g: -1, b: -1, hex: "none", toString: clrToString};
	        }
	        !(hsrg[has](colour.toLowerCase().substring(0, 2)) || colour.charAt() == "#") && (colour = toHex(colour));
	        var res,
	            red,
	            green,
	            blue,
	            opacity,
	            t,
	            values,
	            rgb = colour.match(colourRegExp);
	        if (rgb) {
	            if (rgb[2]) {
	                blue = toInt(rgb[2].substring(5), 16);
	                green = toInt(rgb[2].substring(3, 5), 16);
	                red = toInt(rgb[2].substring(1, 3), 16);
	            }
	            if (rgb[3]) {
	                blue = toInt((t = rgb[3].charAt(3)) + t, 16);
	                green = toInt((t = rgb[3].charAt(2)) + t, 16);
	                red = toInt((t = rgb[3].charAt(1)) + t, 16);
	            }
	            if (rgb[4]) {
	                values = rgb[4][split](commaSpaces);
	                red = toFloat(values[0]);
	                values[0].slice(-1) == "%" && (red *= 2.55);
	                green = toFloat(values[1]);
	                values[1].slice(-1) == "%" && (green *= 2.55);
	                blue = toFloat(values[2]);
	                values[2].slice(-1) == "%" && (blue *= 2.55);
	                rgb[1].toLowerCase().slice(0, 4) == "rgba" && (opacity = toFloat(values[3]));
	                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);
	            }
	            if (rgb[5]) {
	                values = rgb[5][split](commaSpaces);
	                red = toFloat(values[0]);
	                values[0].slice(-1) == "%" && (red *= 2.55);
	                green = toFloat(values[1]);
	                values[1].slice(-1) == "%" && (green *= 2.55);
	                blue = toFloat(values[2]);
	                values[2].slice(-1) == "%" && (blue *= 2.55);
	                (values[0].slice(-3) == "deg" || values[0].slice(-1) == "\xb0") && (red /= 360);
	                rgb[1].toLowerCase().slice(0, 4) == "hsba" && (opacity = toFloat(values[3]));
	                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);
	                return R.hsb2rgb(red, green, blue, opacity);
	            }
	            if (rgb[6]) {
	                values = rgb[6][split](commaSpaces);
	                red = toFloat(values[0]);
	                values[0].slice(-1) == "%" && (red *= 2.55);
	                green = toFloat(values[1]);
	                values[1].slice(-1) == "%" && (green *= 2.55);
	                blue = toFloat(values[2]);
	                values[2].slice(-1) == "%" && (blue *= 2.55);
	                (values[0].slice(-3) == "deg" || values[0].slice(-1) == "\xb0") && (red /= 360);
	                rgb[1].toLowerCase().slice(0, 4) == "hsla" && (opacity = toFloat(values[3]));
	                values[3] && values[3].slice(-1) == "%" && (opacity /= 100);
	                return R.hsl2rgb(red, green, blue, opacity);
	            }
	            rgb = {r: red, g: green, b: blue, toString: clrToString};
	            rgb.hex = "#" + (16777216 | blue | (green << 8) | (red << 16)).toString(16).slice(1);
	            R.is(opacity, "finite") && (rgb.opacity = opacity);
	            return rgb;
	        }
	        return {r: -1, g: -1, b: -1, hex: "none", error: 1, toString: clrToString};
	    }, R);
	    /*\
	     * Raphael.hsb
	     [ method ]
	     **
	     * Converts HSB values to hex representation of the colour.
	     > Parameters
	     - h (number) hue
	     - s (number) saturation
	     - b (number) value or brightness
	     = (string) hex representation of the colour.
	    \*/
	    R.hsb = cacher(function (h, s, b) {
	        return R.hsb2rgb(h, s, b).hex;
	    });
	    /*\
	     * Raphael.hsl
	     [ method ]
	     **
	     * Converts HSL values to hex representation of the colour.
	     > Parameters
	     - h (number) hue
	     - s (number) saturation
	     - l (number) luminosity
	     = (string) hex representation of the colour.
	    \*/
	    R.hsl = cacher(function (h, s, l) {
	        return R.hsl2rgb(h, s, l).hex;
	    });
	    /*\
	     * Raphael.rgb
	     [ method ]
	     **
	     * Converts RGB values to hex representation of the colour.
	     > Parameters
	     - r (number) red
	     - g (number) green
	     - b (number) blue
	     = (string) hex representation of the colour.
	    \*/
	    R.rgb = cacher(function (r, g, b) {
	        function round(x) { return (x + 0.5) | 0; }
	        return "#" + (16777216 | round(b) | (round(g) << 8) | (round(r) << 16)).toString(16).slice(1);
	    });
	    /*\
	     * Raphael.getColor
	     [ method ]
	     **
	     * On each call returns next colour in the spectrum. To reset it back to red call @Raphael.getColor.reset
	     > Parameters
	     - value (number) #optional brightness, default is `0.75`
	     = (string) hex representation of the colour.
	    \*/
	    R.getColor = function (value) {
	        var start = this.getColor.start = this.getColor.start || {h: 0, s: 1, b: value || .75},
	            rgb = this.hsb2rgb(start.h, start.s, start.b);
	        start.h += .075;
	        if (start.h > 1) {
	            start.h = 0;
	            start.s -= .2;
	            start.s <= 0 && (this.getColor.start = {h: 0, s: 1, b: start.b});
	        }
	        return rgb.hex;
	    };
	    /*\
	     * Raphael.getColor.reset
	     [ method ]
	     **
	     * Resets spectrum position for @Raphael.getColor back to red.
	    \*/
	    R.getColor.reset = function () {
	        delete this.start;
	    };

	    // http://schepers.cc/getting-to-the-point
	    function catmullRom2bezier(crp, z) {
	        var d = [];
	        for (var i = 0, iLen = crp.length; iLen - 2 * !z > i; i += 2) {
	            var p = [
	                        {x: +crp[i - 2], y: +crp[i - 1]},
	                        {x: +crp[i],     y: +crp[i + 1]},
	                        {x: +crp[i + 2], y: +crp[i + 3]},
	                        {x: +crp[i + 4], y: +crp[i + 5]}
	                    ];
	            if (z) {
	                if (!i) {
	                    p[0] = {x: +crp[iLen - 2], y: +crp[iLen - 1]};
	                } else if (iLen - 4 == i) {
	                    p[3] = {x: +crp[0], y: +crp[1]};
	                } else if (iLen - 2 == i) {
	                    p[2] = {x: +crp[0], y: +crp[1]};
	                    p[3] = {x: +crp[2], y: +crp[3]};
	                }
	            } else {
	                if (iLen - 4 == i) {
	                    p[3] = p[2];
	                } else if (!i) {
	                    p[0] = {x: +crp[i], y: +crp[i + 1]};
	                }
	            }
	            d.push(["C",
	                  (-p[0].x + 6 * p[1].x + p[2].x) / 6,
	                  (-p[0].y + 6 * p[1].y + p[2].y) / 6,
	                  (p[1].x + 6 * p[2].x - p[3].x) / 6,
	                  (p[1].y + 6*p[2].y - p[3].y) / 6,
	                  p[2].x,
	                  p[2].y
	            ]);
	        }

	        return d;
	    }
	    /*\
	     * Raphael.parsePathString
	     [ method ]
	     **
	     * Utility method
	     **
	     * Parses given path string into an array of arrays of path segments.
	     > Parameters
	     - pathString (string|array) path string or array of segments (in the last case it will be returned straight away)
	     = (array) array of segments.
	    \*/
	    R.parsePathString = function (pathString) {
	        if (!pathString) {
	            return null;
	        }
	        var pth = paths(pathString);
	        if (pth.arr) {
	            return pathClone(pth.arr);
	        }

	        var paramCounts = {a: 7, c: 6, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, z: 0},
	            data = [];
	        if (R.is(pathString, array) && R.is(pathString[0], array)) { // rough assumption
	            data = pathClone(pathString);
	        }
	        if (!data.length) {
	            Str(pathString).replace(pathCommand, function (a, b, c) {
	                var params = [],
	                    name = b.toLowerCase();
	                c.replace(pathValues, function (a, b) {
	                    b && params.push(+b);
	                });
	                if (name == "m" && params.length > 2) {
	                    data.push([b][concat](params.splice(0, 2)));
	                    name = "l";
	                    b = b == "m" ? "l" : "L";
	                }
	                if (name == "r") {
	                    data.push([b][concat](params));
	                } else while (params.length >= paramCounts[name]) {
	                    data.push([b][concat](params.splice(0, paramCounts[name])));
	                    if (!paramCounts[name]) {
	                        break;
	                    }
	                }
	            });
	        }
	        data.toString = R._path2string;
	        pth.arr = pathClone(data);
	        return data;
	    };
	    /*\
	     * Raphael.parseTransformString
	     [ method ]
	     **
	     * Utility method
	     **
	     * Parses given path string into an array of transformations.
	     > Parameters
	     - TString (string|array) transform string or array of transformations (in the last case it will be returned straight away)
	     = (array) array of transformations.
	    \*/
	    R.parseTransformString = cacher(function (TString) {
	        if (!TString) {
	            return null;
	        }
	        var paramCounts = {r: 3, s: 4, t: 2, m: 6},
	            data = [];
	        if (R.is(TString, array) && R.is(TString[0], array)) { // rough assumption
	            data = pathClone(TString);
	        }
	        if (!data.length) {
	            Str(TString).replace(tCommand, function (a, b, c) {
	                var params = [],
	                    name = lowerCase.call(b);
	                c.replace(pathValues, function (a, b) {
	                    b && params.push(+b);
	                });
	                data.push([b][concat](params));
	            });
	        }
	        data.toString = R._path2string;
	        return data;
	    });
	    // PATHS
	    var paths = function (ps) {
	        var p = paths.ps = paths.ps || {};
	        if (p[ps]) {
	            p[ps].sleep = 100;
	        } else {
	            p[ps] = {
	                sleep: 100
	            };
	        }
	        setTimeout(function () {
	            for (var key in p) if (p[has](key) && key != ps) {
	                p[key].sleep--;
	                !p[key].sleep && delete p[key];
	            }
	        });
	        return p[ps];
	    };
	    /*\
	     * Raphael.findDotsAtSegment
	     [ method ]
	     **
	     * Utility method
	     **
	     * Find dot coordinates on the given cubic bezier curve at the given t.
	     > Parameters
	     - p1x (number) x of the first point of the curve
	     - p1y (number) y of the first point of the curve
	     - c1x (number) x of the first anchor of the curve
	     - c1y (number) y of the first anchor of the curve
	     - c2x (number) x of the second anchor of the curve
	     - c2y (number) y of the second anchor of the curve
	     - p2x (number) x of the second point of the curve
	     - p2y (number) y of the second point of the curve
	     - t (number) position on the curve (0..1)
	     = (object) point information in format:
	     o {
	     o     x: (number) x coordinate of the point
	     o     y: (number) y coordinate of the point
	     o     m: {
	     o         x: (number) x coordinate of the left anchor
	     o         y: (number) y coordinate of the left anchor
	     o     }
	     o     n: {
	     o         x: (number) x coordinate of the right anchor
	     o         y: (number) y coordinate of the right anchor
	     o     }
	     o     start: {
	     o         x: (number) x coordinate of the start of the curve
	     o         y: (number) y coordinate of the start of the curve
	     o     }
	     o     end: {
	     o         x: (number) x coordinate of the end of the curve
	     o         y: (number) y coordinate of the end of the curve
	     o     }
	     o     alpha: (number) angle of the curve derivative at the point
	     o }
	    \*/
	    R.findDotsAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {
	        var t1 = 1 - t,
	            t13 = pow(t1, 3),
	            t12 = pow(t1, 2),
	            t2 = t * t,
	            t3 = t2 * t,
	            x = t13 * p1x + t12 * 3 * t * c1x + t1 * 3 * t * t * c2x + t3 * p2x,
	            y = t13 * p1y + t12 * 3 * t * c1y + t1 * 3 * t * t * c2y + t3 * p2y,
	            mx = p1x + 2 * t * (c1x - p1x) + t2 * (c2x - 2 * c1x + p1x),
	            my = p1y + 2 * t * (c1y - p1y) + t2 * (c2y - 2 * c1y + p1y),
	            nx = c1x + 2 * t * (c2x - c1x) + t2 * (p2x - 2 * c2x + c1x),
	            ny = c1y + 2 * t * (c2y - c1y) + t2 * (p2y - 2 * c2y + c1y),
	            ax = t1 * p1x + t * c1x,
	            ay = t1 * p1y + t * c1y,
	            cx = t1 * c2x + t * p2x,
	            cy = t1 * c2y + t * p2y,
	            alpha = (90 - math.atan2(mx - nx, my - ny) * 180 / PI);
	        (mx > nx || my < ny) && (alpha += 180);
	        return {
	            x: x,
	            y: y,
	            m: {x: mx, y: my},
	            n: {x: nx, y: ny},
	            start: {x: ax, y: ay},
	            end: {x: cx, y: cy},
	            alpha: alpha
	        };
	    };
	    /*\
	     * Raphael.bezierBBox
	     [ method ]
	     **
	     * Utility method
	     **
	     * Return bounding box of a given cubic bezier curve
	     > Parameters
	     - p1x (number) x of the first point of the curve
	     - p1y (number) y of the first point of the curve
	     - c1x (number) x of the first anchor of the curve
	     - c1y (number) y of the first anchor of the curve
	     - c2x (number) x of the second anchor of the curve
	     - c2y (number) y of the second anchor of the curve
	     - p2x (number) x of the second point of the curve
	     - p2y (number) y of the second point of the curve
	     * or
	     - bez (array) array of six points for bezier curve
	     = (object) point information in format:
	     o {
	     o     min: {
	     o         x: (number) x coordinate of the left point
	     o         y: (number) y coordinate of the top point
	     o     }
	     o     max: {
	     o         x: (number) x coordinate of the right point
	     o         y: (number) y coordinate of the bottom point
	     o     }
	     o }
	    \*/
	    R.bezierBBox = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {
	        if (!R.is(p1x, "array")) {
	            p1x = [p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y];
	        }
	        var bbox = curveDim.apply(null, p1x);
	        return {
	            x: bbox.min.x,
	            y: bbox.min.y,
	            x2: bbox.max.x,
	            y2: bbox.max.y,
	            width: bbox.max.x - bbox.min.x,
	            height: bbox.max.y - bbox.min.y
	        };
	    };
	    /*\
	     * Raphael.isPointInsideBBox
	     [ method ]
	     **
	     * Utility method
	     **
	     * Returns `true` if given point is inside bounding boxes.
	     > Parameters
	     - bbox (string) bounding box
	     - x (string) x coordinate of the point
	     - y (string) y coordinate of the point
	     = (boolean) `true` if point inside
	    \*/
	    R.isPointInsideBBox = function (bbox, x, y) {
	        return x >= bbox.x && x <= bbox.x2 && y >= bbox.y && y <= bbox.y2;
	    };
	    /*\
	     * Raphael.isBBoxIntersect
	     [ method ]
	     **
	     * Utility method
	     **
	     * Returns `true` if two bounding boxes intersect
	     > Parameters
	     - bbox1 (string) first bounding box
	     - bbox2 (string) second bounding box
	     = (boolean) `true` if they intersect
	    \*/
	    R.isBBoxIntersect = function (bbox1, bbox2) {
	        var i = R.isPointInsideBBox;
	        return i(bbox2, bbox1.x, bbox1.y)
	            || i(bbox2, bbox1.x2, bbox1.y)
	            || i(bbox2, bbox1.x, bbox1.y2)
	            || i(bbox2, bbox1.x2, bbox1.y2)
	            || i(bbox1, bbox2.x, bbox2.y)
	            || i(bbox1, bbox2.x2, bbox2.y)
	            || i(bbox1, bbox2.x, bbox2.y2)
	            || i(bbox1, bbox2.x2, bbox2.y2)
	            || (bbox1.x < bbox2.x2 && bbox1.x > bbox2.x || bbox2.x < bbox1.x2 && bbox2.x > bbox1.x)
	            && (bbox1.y < bbox2.y2 && bbox1.y > bbox2.y || bbox2.y < bbox1.y2 && bbox2.y > bbox1.y);
	    };
	    function base3(t, p1, p2, p3, p4) {
	        var t1 = -3 * p1 + 9 * p2 - 9 * p3 + 3 * p4,
	            t2 = t * t1 + 6 * p1 - 12 * p2 + 6 * p3;
	        return t * t2 - 3 * p1 + 3 * p2;
	    }
	    function bezlen(x1, y1, x2, y2, x3, y3, x4, y4, z) {
	        if (z == null) {
	            z = 1;
	        }
	        z = z > 1 ? 1 : z < 0 ? 0 : z;
	        var z2 = z / 2,
	            n = 12,
	            Tvalues = [-0.1252,0.1252,-0.3678,0.3678,-0.5873,0.5873,-0.7699,0.7699,-0.9041,0.9041,-0.9816,0.9816],
	            Cvalues = [0.2491,0.2491,0.2335,0.2335,0.2032,0.2032,0.1601,0.1601,0.1069,0.1069,0.0472,0.0472],
	            sum = 0;
	        for (var i = 0; i < n; i++) {
	            var ct = z2 * Tvalues[i] + z2,
	                xbase = base3(ct, x1, x2, x3, x4),
	                ybase = base3(ct, y1, y2, y3, y4),
	                comb = xbase * xbase + ybase * ybase;
	            sum += Cvalues[i] * math.sqrt(comb);
	        }
	        return z2 * sum;
	    }
	    function getTatLen(x1, y1, x2, y2, x3, y3, x4, y4, ll) {
	        if (ll < 0 || bezlen(x1, y1, x2, y2, x3, y3, x4, y4) < ll) {
	            return;
	        }
	        var t = 1,
	            step = t / 2,
	            t2 = t - step,
	            l,
	            e = .01;
	        l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);
	        while (abs(l - ll) > e) {
	            step /= 2;
	            t2 += (l < ll ? 1 : -1) * step;
	            l = bezlen(x1, y1, x2, y2, x3, y3, x4, y4, t2);
	        }
	        return t2;
	    }
	    function intersect(x1, y1, x2, y2, x3, y3, x4, y4) {
	        if (
	            mmax(x1, x2) < mmin(x3, x4) ||
	            mmin(x1, x2) > mmax(x3, x4) ||
	            mmax(y1, y2) < mmin(y3, y4) ||
	            mmin(y1, y2) > mmax(y3, y4)
	        ) {
	            return;
	        }
	        var nx = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4),
	            ny = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4),
	            denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);

	        if (!denominator) {
	            return;
	        }
	        var px = nx / denominator,
	            py = ny / denominator,
	            px2 = +px.toFixed(2),
	            py2 = +py.toFixed(2);
	        if (
	            px2 < +mmin(x1, x2).toFixed(2) ||
	            px2 > +mmax(x1, x2).toFixed(2) ||
	            px2 < +mmin(x3, x4).toFixed(2) ||
	            px2 > +mmax(x3, x4).toFixed(2) ||
	            py2 < +mmin(y1, y2).toFixed(2) ||
	            py2 > +mmax(y1, y2).toFixed(2) ||
	            py2 < +mmin(y3, y4).toFixed(2) ||
	            py2 > +mmax(y3, y4).toFixed(2)
	        ) {
	            return;
	        }
	        return {x: px, y: py};
	    }
	    function inter(bez1, bez2) {
	        return interHelper(bez1, bez2);
	    }
	    function interCount(bez1, bez2) {
	        return interHelper(bez1, bez2, 1);
	    }
	    function interHelper(bez1, bez2, justCount) {
	        var bbox1 = R.bezierBBox(bez1),
	            bbox2 = R.bezierBBox(bez2);
	        if (!R.isBBoxIntersect(bbox1, bbox2)) {
	            return justCount ? 0 : [];
	        }
	        var l1 = bezlen.apply(0, bez1),
	            l2 = bezlen.apply(0, bez2),
	            n1 = mmax(~~(l1 / 5), 1),
	            n2 = mmax(~~(l2 / 5), 1),
	            dots1 = [],
	            dots2 = [],
	            xy = {},
	            res = justCount ? 0 : [];
	        for (var i = 0; i < n1 + 1; i++) {
	            var p = R.findDotsAtSegment.apply(R, bez1.concat(i / n1));
	            dots1.push({x: p.x, y: p.y, t: i / n1});
	        }
	        for (i = 0; i < n2 + 1; i++) {
	            p = R.findDotsAtSegment.apply(R, bez2.concat(i / n2));
	            dots2.push({x: p.x, y: p.y, t: i / n2});
	        }
	        for (i = 0; i < n1; i++) {
	            for (var j = 0; j < n2; j++) {
	                var di = dots1[i],
	                    di1 = dots1[i + 1],
	                    dj = dots2[j],
	                    dj1 = dots2[j + 1],
	                    ci = abs(di1.x - di.x) < .001 ? "y" : "x",
	                    cj = abs(dj1.x - dj.x) < .001 ? "y" : "x",
	                    is = intersect(di.x, di.y, di1.x, di1.y, dj.x, dj.y, dj1.x, dj1.y);
	                if (is) {
	                    if (xy[is.x.toFixed(4)] == is.y.toFixed(4)) {
	                        continue;
	                    }
	                    xy[is.x.toFixed(4)] = is.y.toFixed(4);
	                    var t1 = di.t + abs((is[ci] - di[ci]) / (di1[ci] - di[ci])) * (di1.t - di.t),
	                        t2 = dj.t + abs((is[cj] - dj[cj]) / (dj1[cj] - dj[cj])) * (dj1.t - dj.t);
	                    if (t1 >= 0 && t1 <= 1.001 && t2 >= 0 && t2 <= 1.001) {
	                        if (justCount) {
	                            res++;
	                        } else {
	                            res.push({
	                                x: is.x,
	                                y: is.y,
	                                t1: mmin(t1, 1),
	                                t2: mmin(t2, 1)
	                            });
	                        }
	                    }
	                }
	            }
	        }
	        return res;
	    }
	    /*\
	     * Raphael.pathIntersection
	     [ method ]
	     **
	     * Utility method
	     **
	     * Finds intersections of two paths
	     > Parameters
	     - path1 (string) path string
	     - path2 (string) path string
	     = (array) dots of intersection
	     o [
	     o     {
	     o         x: (number) x coordinate of the point
	     o         y: (number) y coordinate of the point
	     o         t1: (number) t value for segment of path1
	     o         t2: (number) t value for segment of path2
	     o         segment1: (number) order number for segment of path1
	     o         segment2: (number) order number for segment of path2
	     o         bez1: (array) eight coordinates representing bezir curve for the segment of path1
	     o         bez2: (array) eight coordinates representing bezir curve for the segment of path2
	     o     }
	     o ]
	    \*/
	    R.pathIntersection = function (path1, path2) {
	        return interPathHelper(path1, path2);
	    };
	    R.pathIntersectionNumber = function (path1, path2) {
	        return interPathHelper(path1, path2, 1);
	    };
	    function interPathHelper(path1, path2, justCount) {
	        path1 = R._path2curve(path1);
	        path2 = R._path2curve(path2);
	        var x1, y1, x2, y2, x1m, y1m, x2m, y2m, bez1, bez2,
	            res = justCount ? 0 : [];
	        for (var i = 0, ii = path1.length; i < ii; i++) {
	            var pi = path1[i];
	            if (pi[0] == "M") {
	                x1 = x1m = pi[1];
	                y1 = y1m = pi[2];
	            } else {
	                if (pi[0] == "C") {
	                    bez1 = [x1, y1].concat(pi.slice(1));
	                    x1 = bez1[6];
	                    y1 = bez1[7];
	                } else {
	                    bez1 = [x1, y1, x1, y1, x1m, y1m, x1m, y1m];
	                    x1 = x1m;
	                    y1 = y1m;
	                }
	                for (var j = 0, jj = path2.length; j < jj; j++) {
	                    var pj = path2[j];
	                    if (pj[0] == "M") {
	                        x2 = x2m = pj[1];
	                        y2 = y2m = pj[2];
	                    } else {
	                        if (pj[0] == "C") {
	                            bez2 = [x2, y2].concat(pj.slice(1));
	                            x2 = bez2[6];
	                            y2 = bez2[7];
	                        } else {
	                            bez2 = [x2, y2, x2, y2, x2m, y2m, x2m, y2m];
	                            x2 = x2m;
	                            y2 = y2m;
	                        }
	                        var intr = interHelper(bez1, bez2, justCount);
	                        if (justCount) {
	                            res += intr;
	                        } else {
	                            for (var k = 0, kk = intr.length; k < kk; k++) {
	                                intr[k].segment1 = i;
	                                intr[k].segment2 = j;
	                                intr[k].bez1 = bez1;
	                                intr[k].bez2 = bez2;
	                            }
	                            res = res.concat(intr);
	                        }
	                    }
	                }
	            }
	        }
	        return res;
	    }
	    /*\
	     * Raphael.isPointInsidePath
	     [ method ]
	     **
	     * Utility method
	     **
	     * Returns `true` if given point is inside a given closed path.
	     > Parameters
	     - path (string) path string
	     - x (number) x of the point
	     - y (number) y of the point
	     = (boolean) true, if point is inside the path
	    \*/
	    R.isPointInsidePath = function (path, x, y) {
	        var bbox = R.pathBBox(path);
	        return R.isPointInsideBBox(bbox, x, y) &&
	               interPathHelper(path, [["M", x, y], ["H", bbox.x2 + 10]], 1) % 2 == 1;
	    };
	    R._removedFactory = function (methodname) {
	        return function () {
	            eve("raphael.log", null, "Rapha\xebl: you are calling to method \u201c" + methodname + "\u201d of removed object", methodname);
	        };
	    };
	    /*\
	     * Raphael.pathBBox
	     [ method ]
	     **
	     * Utility method
	     **
	     * Return bounding box of a given path
	     > Parameters
	     - path (string) path string
	     = (object) bounding box
	     o {
	     o     x: (number) x coordinate of the left top point of the box
	     o     y: (number) y coordinate of the left top point of the box
	     o     x2: (number) x coordinate of the right bottom point of the box
	     o     y2: (number) y coordinate of the right bottom point of the box
	     o     width: (number) width of the box
	     o     height: (number) height of the box
	     o     cx: (number) x coordinate of the center of the box
	     o     cy: (number) y coordinate of the center of the box
	     o }
	    \*/
	    var pathDimensions = R.pathBBox = function (path) {
	        var pth = paths(path);
	        if (pth.bbox) {
	            return clone(pth.bbox);
	        }
	        if (!path) {
	            return {x: 0, y: 0, width: 0, height: 0, x2: 0, y2: 0};
	        }
	        path = path2curve(path);
	        var x = 0,
	            y = 0,
	            X = [],
	            Y = [],
	            p;
	        for (var i = 0, ii = path.length; i < ii; i++) {
	            p = path[i];
	            if (p[0] == "M") {
	                x = p[1];
	                y = p[2];
	                X.push(x);
	                Y.push(y);
	            } else {
	                var dim = curveDim(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);
	                X = X[concat](dim.min.x, dim.max.x);
	                Y = Y[concat](dim.min.y, dim.max.y);
	                x = p[5];
	                y = p[6];
	            }
	        }
	        var xmin = mmin[apply](0, X),
	            ymin = mmin[apply](0, Y),
	            xmax = mmax[apply](0, X),
	            ymax = mmax[apply](0, Y),
	            width = xmax - xmin,
	            height = ymax - ymin,
	                bb = {
	                x: xmin,
	                y: ymin,
	                x2: xmax,
	                y2: ymax,
	                width: width,
	                height: height,
	                cx: xmin + width / 2,
	                cy: ymin + height / 2
	            };
	        pth.bbox = clone(bb);
	        return bb;
	    },
	        pathClone = function (pathArray) {
	            var res = clone(pathArray);
	            res.toString = R._path2string;
	            return res;
	        },
	        pathToRelative = R._pathToRelative = function (pathArray) {
	            var pth = paths(pathArray);
	            if (pth.rel) {
	                return pathClone(pth.rel);
	            }
	            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption
	                pathArray = R.parsePathString(pathArray);
	            }
	            var res = [],
	                x = 0,
	                y = 0,
	                mx = 0,
	                my = 0,
	                start = 0;
	            if (pathArray[0][0] == "M") {
	                x = pathArray[0][1];
	                y = pathArray[0][2];
	                mx = x;
	                my = y;
	                start++;
	                res.push(["M", x, y]);
	            }
	            for (var i = start, ii = pathArray.length; i < ii; i++) {
	                var r = res[i] = [],
	                    pa = pathArray[i];
	                if (pa[0] != lowerCase.call(pa[0])) {
	                    r[0] = lowerCase.call(pa[0]);
	                    switch (r[0]) {
	                        case "a":
	                            r[1] = pa[1];
	                            r[2] = pa[2];
	                            r[3] = pa[3];
	                            r[4] = pa[4];
	                            r[5] = pa[5];
	                            r[6] = +(pa[6] - x).toFixed(3);
	                            r[7] = +(pa[7] - y).toFixed(3);
	                            break;
	                        case "v":
	                            r[1] = +(pa[1] - y).toFixed(3);
	                            break;
	                        case "m":
	                            mx = pa[1];
	                            my = pa[2];
	                        default:
	                            for (var j = 1, jj = pa.length; j < jj; j++) {
	                                r[j] = +(pa[j] - ((j % 2) ? x : y)).toFixed(3);
	                            }
	                    }
	                } else {
	                    r = res[i] = [];
	                    if (pa[0] == "m") {
	                        mx = pa[1] + x;
	                        my = pa[2] + y;
	                    }
	                    for (var k = 0, kk = pa.length; k < kk; k++) {
	                        res[i][k] = pa[k];
	                    }
	                }
	                var len = res[i].length;
	                switch (res[i][0]) {
	                    case "z":
	                        x = mx;
	                        y = my;
	                        break;
	                    case "h":
	                        x += +res[i][len - 1];
	                        break;
	                    case "v":
	                        y += +res[i][len - 1];
	                        break;
	                    default:
	                        x += +res[i][len - 2];
	                        y += +res[i][len - 1];
	                }
	            }
	            res.toString = R._path2string;
	            pth.rel = pathClone(res);
	            return res;
	        },
	        pathToAbsolute = R._pathToAbsolute = function (pathArray) {
	            var pth = paths(pathArray);
	            if (pth.abs) {
	                return pathClone(pth.abs);
	            }
	            if (!R.is(pathArray, array) || !R.is(pathArray && pathArray[0], array)) { // rough assumption
	                pathArray = R.parsePathString(pathArray);
	            }
	            if (!pathArray || !pathArray.length) {
	                return [["M", 0, 0]];
	            }
	            var res = [],
	                x = 0,
	                y = 0,
	                mx = 0,
	                my = 0,
	                start = 0;
	            if (pathArray[0][0] == "M") {
	                x = +pathArray[0][1];
	                y = +pathArray[0][2];
	                mx = x;
	                my = y;
	                start++;
	                res[0] = ["M", x, y];
	            }
	            var crz = pathArray.length == 3 && pathArray[0][0] == "M" && pathArray[1][0].toUpperCase() == "R" && pathArray[2][0].toUpperCase() == "Z";
	            for (var r, pa, i = start, ii = pathArray.length; i < ii; i++) {
	                res.push(r = []);
	                pa = pathArray[i];
	                if (pa[0] != upperCase.call(pa[0])) {
	                    r[0] = upperCase.call(pa[0]);
	                    switch (r[0]) {
	                        case "A":
	                            r[1] = pa[1];
	                            r[2] = pa[2];
	                            r[3] = pa[3];
	                            r[4] = pa[4];
	                            r[5] = pa[5];
	                            r[6] = +(pa[6] + x);
	                            r[7] = +(pa[7] + y);
	                            break;
	                        case "V":
	                            r[1] = +pa[1] + y;
	                            break;
	                        case "H":
	                            r[1] = +pa[1] + x;
	                            break;
	                        case "R":
	                            var dots = [x, y][concat](pa.slice(1));
	                            for (var j = 2, jj = dots.length; j < jj; j++) {
	                                dots[j] = +dots[j] + x;
	                                dots[++j] = +dots[j] + y;
	                            }
	                            res.pop();
	                            res = res[concat](catmullRom2bezier(dots, crz));
	                            break;
	                        case "M":
	                            mx = +pa[1] + x;
	                            my = +pa[2] + y;
	                        default:
	                            for (j = 1, jj = pa.length; j < jj; j++) {
	                                r[j] = +pa[j] + ((j % 2) ? x : y);
	                            }
	                    }
	                } else if (pa[0] == "R") {
	                    dots = [x, y][concat](pa.slice(1));
	                    res.pop();
	                    res = res[concat](catmullRom2bezier(dots, crz));
	                    r = ["R"][concat](pa.slice(-2));
	                } else {
	                    for (var k = 0, kk = pa.length; k < kk; k++) {
	                        r[k] = pa[k];
	                    }
	                }
	                switch (r[0]) {
	                    case "Z":
	                        x = mx;
	                        y = my;
	                        break;
	                    case "H":
	                        x = r[1];
	                        break;
	                    case "V":
	                        y = r[1];
	                        break;
	                    case "M":
	                        mx = r[r.length - 2];
	                        my = r[r.length - 1];
	                    default:
	                        x = r[r.length - 2];
	                        y = r[r.length - 1];
	                }
	            }
	            res.toString = R._path2string;
	            pth.abs = pathClone(res);
	            return res;
	        },
	        l2c = function (x1, y1, x2, y2) {
	            return [x1, y1, x2, y2, x2, y2];
	        },
	        q2c = function (x1, y1, ax, ay, x2, y2) {
	            var _13 = 1 / 3,
	                _23 = 2 / 3;
	            return [
	                    _13 * x1 + _23 * ax,
	                    _13 * y1 + _23 * ay,
	                    _13 * x2 + _23 * ax,
	                    _13 * y2 + _23 * ay,
	                    x2,
	                    y2
	                ];
	        },
	        a2c = function (x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {
	            // for more information of where this math came from visit:
	            // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes
	            var _120 = PI * 120 / 180,
	                rad = PI / 180 * (+angle || 0),
	                res = [],
	                xy,
	                rotate = cacher(function (x, y, rad) {
	                    var X = x * math.cos(rad) - y * math.sin(rad),
	                        Y = x * math.sin(rad) + y * math.cos(rad);
	                    return {x: X, y: Y};
	                });
	            if (!recursive) {
	                xy = rotate(x1, y1, -rad);
	                x1 = xy.x;
	                y1 = xy.y;
	                xy = rotate(x2, y2, -rad);
	                x2 = xy.x;
	                y2 = xy.y;
	                var cos = math.cos(PI / 180 * angle),
	                    sin = math.sin(PI / 180 * angle),
	                    x = (x1 - x2) / 2,
	                    y = (y1 - y2) / 2;
	                var h = (x * x) / (rx * rx) + (y * y) / (ry * ry);
	                if (h > 1) {
	                    h = math.sqrt(h);
	                    rx = h * rx;
	                    ry = h * ry;
	                }
	                var rx2 = rx * rx,
	                    ry2 = ry * ry,
	                    k = (large_arc_flag == sweep_flag ? -1 : 1) *
	                        math.sqrt(abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),
	                    cx = k * rx * y / ry + (x1 + x2) / 2,
	                    cy = k * -ry * x / rx + (y1 + y2) / 2,
	                    f1 = math.asin(((y1 - cy) / ry).toFixed(9)),
	                    f2 = math.asin(((y2 - cy) / ry).toFixed(9));

	                f1 = x1 < cx ? PI - f1 : f1;
	                f2 = x2 < cx ? PI - f2 : f2;
	                f1 < 0 && (f1 = PI * 2 + f1);
	                f2 < 0 && (f2 = PI * 2 + f2);
	                if (sweep_flag && f1 > f2) {
	                    f1 = f1 - PI * 2;
	                }
	                if (!sweep_flag && f2 > f1) {
	                    f2 = f2 - PI * 2;
	                }
	            } else {
	                f1 = recursive[0];
	                f2 = recursive[1];
	                cx = recursive[2];
	                cy = recursive[3];
	            }
	            var df = f2 - f1;
	            if (abs(df) > _120) {
	                var f2old = f2,
	                    x2old = x2,
	                    y2old = y2;
	                f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);
	                x2 = cx + rx * math.cos(f2);
	                y2 = cy + ry * math.sin(f2);
	                res = a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);
	            }
	            df = f2 - f1;
	            var c1 = math.cos(f1),
	                s1 = math.sin(f1),
	                c2 = math.cos(f2),
	                s2 = math.sin(f2),
	                t = math.tan(df / 4),
	                hx = 4 / 3 * rx * t,
	                hy = 4 / 3 * ry * t,
	                m1 = [x1, y1],
	                m2 = [x1 + hx * s1, y1 - hy * c1],
	                m3 = [x2 + hx * s2, y2 - hy * c2],
	                m4 = [x2, y2];
	            m2[0] = 2 * m1[0] - m2[0];
	            m2[1] = 2 * m1[1] - m2[1];
	            if (recursive) {
	                return [m2, m3, m4][concat](res);
	            } else {
	                res = [m2, m3, m4][concat](res).join()[split](",");
	                var newres = [];
	                for (var i = 0, ii = res.length; i < ii; i++) {
	                    newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;
	                }
	                return newres;
	            }
	        },
	        findDotAtSegment = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t) {
	            var t1 = 1 - t;
	            return {
	                x: pow(t1, 3) * p1x + pow(t1, 2) * 3 * t * c1x + t1 * 3 * t * t * c2x + pow(t, 3) * p2x,
	                y: pow(t1, 3) * p1y + pow(t1, 2) * 3 * t * c1y + t1 * 3 * t * t * c2y + pow(t, 3) * p2y
	            };
	        },
	        curveDim = cacher(function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y) {
	            var a = (c2x - 2 * c1x + p1x) - (p2x - 2 * c2x + c1x),
	                b = 2 * (c1x - p1x) - 2 * (c2x - c1x),
	                c = p1x - c1x,
	                t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a,
	                t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a,
	                y = [p1y, p2y],
	                x = [p1x, p2x],
	                dot;
	            abs(t1) > "1e12" && (t1 = .5);
	            abs(t2) > "1e12" && (t2 = .5);
	            if (t1 > 0 && t1 < 1) {
	                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);
	                x.push(dot.x);
	                y.push(dot.y);
	            }
	            if (t2 > 0 && t2 < 1) {
	                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);
	                x.push(dot.x);
	                y.push(dot.y);
	            }
	            a = (c2y - 2 * c1y + p1y) - (p2y - 2 * c2y + c1y);
	            b = 2 * (c1y - p1y) - 2 * (c2y - c1y);
	            c = p1y - c1y;
	            t1 = (-b + math.sqrt(b * b - 4 * a * c)) / 2 / a;
	            t2 = (-b - math.sqrt(b * b - 4 * a * c)) / 2 / a;
	            abs(t1) > "1e12" && (t1 = .5);
	            abs(t2) > "1e12" && (t2 = .5);
	            if (t1 > 0 && t1 < 1) {
	                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t1);
	                x.push(dot.x);
	                y.push(dot.y);
	            }
	            if (t2 > 0 && t2 < 1) {
	                dot = findDotAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, t2);
	                x.push(dot.x);
	                y.push(dot.y);
	            }
	            return {
	                min: {x: mmin[apply](0, x), y: mmin[apply](0, y)},
	                max: {x: mmax[apply](0, x), y: mmax[apply](0, y)}
	            };
	        }),
	        path2curve = R._path2curve = cacher(function (path, path2) {
	            var pth = !path2 && paths(path);
	            if (!path2 && pth.curve) {
	                return pathClone(pth.curve);
	            }
	            var p = pathToAbsolute(path),
	                p2 = path2 && pathToAbsolute(path2),
	                attrs = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},
	                attrs2 = {x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null},
	                processPath = function (path, d, pcom) {
	                    var nx, ny, tq = {T:1, Q:1};
	                    if (!path) {
	                        return ["C", d.x, d.y, d.x, d.y, d.x, d.y];
	                    }
	                    !(path[0] in tq) && (d.qx = d.qy = null);
	                    switch (path[0]) {
	                        case "M":
	                            d.X = path[1];
	                            d.Y = path[2];
	                            break;
	                        case "A":
	                            path = ["C"][concat](a2c[apply](0, [d.x, d.y][concat](path.slice(1))));
	                            break;
	                        case "S":
	                            if (pcom == "C" || pcom == "S") { // In "S" case we have to take into account, if the previous command is C/S.
	                                nx = d.x * 2 - d.bx;          // And reflect the previous
	                                ny = d.y * 2 - d.by;          // command's control point relative to the current point.
	                            }
	                            else {                            // or some else or nothing
	                                nx = d.x;
	                                ny = d.y;
	                            }
	                            path = ["C", nx, ny][concat](path.slice(1));
	                            break;
	                        case "T":
	                            if (pcom == "Q" || pcom == "T") { // In "T" case we have to take into account, if the previous command is Q/T.
	                                d.qx = d.x * 2 - d.qx;        // And make a reflection similar
	                                d.qy = d.y * 2 - d.qy;        // to case "S".
	                            }
	                            else {                            // or something else or nothing
	                                d.qx = d.x;
	                                d.qy = d.y;
	                            }
	                            path = ["C"][concat](q2c(d.x, d.y, d.qx, d.qy, path[1], path[2]));
	                            break;
	                        case "Q":
	                            d.qx = path[1];
	                            d.qy = path[2];
	                            path = ["C"][concat](q2c(d.x, d.y, path[1], path[2], path[3], path[4]));
	                            break;
	                        case "L":
	                            path = ["C"][concat](l2c(d.x, d.y, path[1], path[2]));
	                            break;
	                        case "H":
	                            path = ["C"][concat](l2c(d.x, d.y, path[1], d.y));
	                            break;
	                        case "V":
	                            path = ["C"][concat](l2c(d.x, d.y, d.x, path[1]));
	                            break;
	                        case "Z":
	                            path = ["C"][concat](l2c(d.x, d.y, d.X, d.Y));
	                            break;
	                    }
	                    return path;
	                },
	                fixArc = function (pp, i) {
	                    if (pp[i].length > 7) {
	                        pp[i].shift();
	                        var pi = pp[i];
	                        while (pi.length) {
	                            pcoms1[i]="A"; // if created multiple C:s, their original seg is saved
	                            p2 && (pcoms2[i]="A"); // the same as above
	                            pp.splice(i++, 0, ["C"][concat](pi.splice(0, 6)));
	                        }
	                        pp.splice(i, 1);
	                        ii = mmax(p.length, p2 && p2.length || 0);
	                    }
	                },
	                fixM = function (path1, path2, a1, a2, i) {
	                    if (path1 && path2 && path1[i][0] == "M" && path2[i][0] != "M") {
	                        path2.splice(i, 0, ["M", a2.x, a2.y]);
	                        a1.bx = 0;
	                        a1.by = 0;
	                        a1.x = path1[i][1];
	                        a1.y = path1[i][2];
	                        ii = mmax(p.length, p2 && p2.length || 0);
	                    }
	                },
	                pcoms1 = [], // path commands of original path p
	                pcoms2 = [], // path commands of original path p2
	                pfirst = "", // temporary holder for original path command
	                pcom = ""; // holder for previous path command of original path
	            for (var i = 0, ii = mmax(p.length, p2 && p2.length || 0); i < ii; i++) {
	                p[i] && (pfirst = p[i][0]); // save current path command

	                if (pfirst != "C") // C is not saved yet, because it may be result of conversion
	                {
	                    pcoms1[i] = pfirst; // Save current path command
	                    i && ( pcom = pcoms1[i-1]); // Get previous path command pcom
	                }
	                p[i] = processPath(p[i], attrs, pcom); // Previous path command is inputted to processPath

	                if (pcoms1[i] != "A" && pfirst == "C") pcoms1[i] = "C"; // A is the only command
	                // which may produce multiple C:s
	                // so we have to make sure that C is also C in original path

	                fixArc(p, i); // fixArc adds also the right amount of A:s to pcoms1

	                if (p2) { // the same procedures is done to p2
	                    p2[i] && (pfirst = p2[i][0]);
	                    if (pfirst != "C")
	                    {
	                        pcoms2[i] = pfirst;
	                        i && (pcom = pcoms2[i-1]);
	                    }
	                    p2[i] = processPath(p2[i], attrs2, pcom);

	                    if (pcoms2[i]!="A" && pfirst=="C") pcoms2[i]="C";

	                    fixArc(p2, i);
	                }
	                fixM(p, p2, attrs, attrs2, i);
	                fixM(p2, p, attrs2, attrs, i);
	                var seg = p[i],
	                    seg2 = p2 && p2[i],
	                    seglen = seg.length,
	                    seg2len = p2 && seg2.length;
	                attrs.x = seg[seglen - 2];
	                attrs.y = seg[seglen - 1];
	                attrs.bx = toFloat(seg[seglen - 4]) || attrs.x;
	                attrs.by = toFloat(seg[seglen - 3]) || attrs.y;
	                attrs2.bx = p2 && (toFloat(seg2[seg2len - 4]) || attrs2.x);
	                attrs2.by = p2 && (toFloat(seg2[seg2len - 3]) || attrs2.y);
	                attrs2.x = p2 && seg2[seg2len - 2];
	                attrs2.y = p2 && seg2[seg2len - 1];
	            }
	            if (!p2) {
	                pth.curve = pathClone(p);
	            }
	            return p2 ? [p, p2] : p;
	        }, null, pathClone),
	        parseDots = R._parseDots = cacher(function (gradient) {
	            var dots = [];
	            for (var i = 0, ii = gradient.length; i < ii; i++) {
	                var dot = {},
	                    par = gradient[i].match(/^([^:]*):?([\d\.]*)/);
	                dot.color = R.getRGB(par[1]);
	                if (dot.color.error) {
	                    return null;
	                }
	                dot.opacity = dot.color.opacity;
	                dot.color = dot.color.hex;
	                par[2] && (dot.offset = par[2] + "%");
	                dots.push(dot);
	            }
	            for (i = 1, ii = dots.length - 1; i < ii; i++) {
	                if (!dots[i].offset) {
	                    var start = toFloat(dots[i - 1].offset || 0),
	                        end = 0;
	                    for (var j = i + 1; j < ii; j++) {
	                        if (dots[j].offset) {
	                            end = dots[j].offset;
	                            break;
	                        }
	                    }
	                    if (!end) {
	                        end = 100;
	                        j = ii;
	                    }
	                    end = toFloat(end);
	                    var d = (end - start) / (j - i + 1);
	                    for (; i < j; i++) {
	                        start += d;
	                        dots[i].offset = start + "%";
	                    }
	                }
	            }
	            return dots;
	        }),
	        tear = R._tear = function (el, paper) {
	            el == paper.top && (paper.top = el.prev);
	            el == paper.bottom && (paper.bottom = el.next);
	            el.next && (el.next.prev = el.prev);
	            el.prev && (el.prev.next = el.next);
	        },
	        tofront = R._tofront = function (el, paper) {
	            if (paper.top === el) {
	                return;
	            }
	            tear(el, paper);
	            el.next = null;
	            el.prev = paper.top;
	            paper.top.next = el;
	            paper.top = el;
	        },
	        toback = R._toback = function (el, paper) {
	            if (paper.bottom === el) {
	                return;
	            }
	            tear(el, paper);
	            el.next = paper.bottom;
	            el.prev = null;
	            paper.bottom.prev = el;
	            paper.bottom = el;
	        },
	        insertafter = R._insertafter = function (el, el2, paper) {
	            tear(el, paper);
	            el2 == paper.top && (paper.top = el);
	            el2.next && (el2.next.prev = el);
	            el.next = el2.next;
	            el.prev = el2;
	            el2.next = el;
	        },
	        insertbefore = R._insertbefore = function (el, el2, paper) {
	            tear(el, paper);
	            el2 == paper.bottom && (paper.bottom = el);
	            el2.prev && (el2.prev.next = el);
	            el.prev = el2.prev;
	            el2.prev = el;
	            el.next = el2;
	        },
	        /*\
	         * Raphael.toMatrix
	         [ method ]
	         **
	         * Utility method
	         **
	         * Returns matrix of transformations applied to a given path
	         > Parameters
	         - path (string) path string
	         - transform (string|array) transformation string
	         = (object) @Matrix
	        \*/
	        toMatrix = R.toMatrix = function (path, transform) {
	            var bb = pathDimensions(path),
	                el = {
	                    _: {
	                        transform: E
	                    },
	                    getBBox: function () {
	                        return bb;
	                    }
	                };
	            extractTransform(el, transform);
	            return el.matrix;
	        },
	        /*\
	         * Raphael.transformPath
	         [ method ]
	         **
	         * Utility method
	         **
	         * Returns path transformed by a given transformation
	         > Parameters
	         - path (string) path string
	         - transform (string|array) transformation string
	         = (string) path
	        \*/
	        transformPath = R.transformPath = function (path, transform) {
	            return mapPath(path, toMatrix(path, transform));
	        },
	        extractTransform = R._extractTransform = function (el, tstr) {
	            if (tstr == null) {
	                return el._.transform;
	            }
	            tstr = Str(tstr).replace(/\.{3}|\u2026/g, el._.transform || E);
	            var tdata = R.parseTransformString(tstr),
	                deg = 0,
	                dx = 0,
	                dy = 0,
	                sx = 1,
	                sy = 1,
	                _ = el._,
	                m = new Matrix;
	            _.transform = tdata || [];
	            if (tdata) {
	                for (var i = 0, ii = tdata.length; i < ii; i++) {
	                    var t = tdata[i],
	                        tlen = t.length,
	                        command = Str(t[0]).toLowerCase(),
	                        absolute = t[0] != command,
	                        inver = absolute ? m.invert() : 0,
	                        x1,
	                        y1,
	                        x2,
	                        y2,
	                        bb;
	                    if (command == "t" && tlen == 3) {
	                        if (absolute) {
	                            x1 = inver.x(0, 0);
	                            y1 = inver.y(0, 0);
	                            x2 = inver.x(t[1], t[2]);
	                            y2 = inver.y(t[1], t[2]);
	                            m.translate(x2 - x1, y2 - y1);
	                        } else {
	                            m.translate(t[1], t[2]);
	                        }
	                    } else if (command == "r") {
	                        if (tlen == 2) {
	                            bb = bb || el.getBBox(1);
	                            m.rotate(t[1], bb.x + bb.width / 2, bb.y + bb.height / 2);
	                            deg += t[1];
	                        } else if (tlen == 4) {
	                            if (absolute) {
	                                x2 = inver.x(t[2], t[3]);
	                                y2 = inver.y(t[2], t[3]);
	                                m.rotate(t[1], x2, y2);
	                            } else {
	                                m.rotate(t[1], t[2], t[3]);
	                            }
	                            deg += t[1];
	                        }
	                    } else if (command == "s") {
	                        if (tlen == 2 || tlen == 3) {
	                            bb = bb || el.getBBox(1);
	                            m.scale(t[1], t[tlen - 1], bb.x + bb.width / 2, bb.y + bb.height / 2);
	                            sx *= t[1];
	                            sy *= t[tlen - 1];
	                        } else if (tlen == 5) {
	                            if (absolute) {
	                                x2 = inver.x(t[3], t[4]);
	                                y2 = inver.y(t[3], t[4]);
	                                m.scale(t[1], t[2], x2, y2);
	                            } else {
	                                m.scale(t[1], t[2], t[3], t[4]);
	                            }
	                            sx *= t[1];
	                            sy *= t[2];
	                        }
	                    } else if (command == "m" && tlen == 7) {
	                        m.add(t[1], t[2], t[3], t[4], t[5], t[6]);
	                    }
	                    _.dirtyT = 1;
	                    el.matrix = m;
	                }
	            }

	            /*\
	             * Element.matrix
	             [ property (object) ]
	             **
	             * Keeps @Matrix object, which represents element transformation
	            \*/
	            el.matrix = m;

	            _.sx = sx;
	            _.sy = sy;
	            _.deg = deg;
	            _.dx = dx = m.e;
	            _.dy = dy = m.f;

	            if (sx == 1 && sy == 1 && !deg && _.bbox) {
	                _.bbox.x += +dx;
	                _.bbox.y += +dy;
	            } else {
	                _.dirtyT = 1;
	            }
	        },
	        getEmpty = function (item) {
	            var l = item[0];
	            switch (l.toLowerCase()) {
	                case "t": return [l, 0, 0];
	                case "m": return [l, 1, 0, 0, 1, 0, 0];
	                case "r": if (item.length == 4) {
	                    return [l, 0, item[2], item[3]];
	                } else {
	                    return [l, 0];
	                }
	                case "s": if (item.length == 5) {
	                    return [l, 1, 1, item[3], item[4]];
	                } else if (item.length == 3) {
	                    return [l, 1, 1];
	                } else {
	                    return [l, 1];
	                }
	            }
	        },
	        equaliseTransform = R._equaliseTransform = function (t1, t2) {
	            t2 = Str(t2).replace(/\.{3}|\u2026/g, t1);
	            t1 = R.parseTransformString(t1) || [];
	            t2 = R.parseTransformString(t2) || [];
	            var maxlength = mmax(t1.length, t2.length),
	                from = [],
	                to = [],
	                i = 0, j, jj,
	                tt1, tt2;
	            for (; i < maxlength; i++) {
	                tt1 = t1[i] || getEmpty(t2[i]);
	                tt2 = t2[i] || getEmpty(tt1);
	                if ((tt1[0] != tt2[0]) ||
	                    (tt1[0].toLowerCase() == "r" && (tt1[2] != tt2[2] || tt1[3] != tt2[3])) ||
	                    (tt1[0].toLowerCase() == "s" && (tt1[3] != tt2[3] || tt1[4] != tt2[4]))
	                    ) {
	                    return;
	                }
	                from[i] = [];
	                to[i] = [];
	                for (j = 0, jj = mmax(tt1.length, tt2.length); j < jj; j++) {
	                    j in tt1 && (from[i][j] = tt1[j]);
	                    j in tt2 && (to[i][j] = tt2[j]);
	                }
	            }
	            return {
	                from: from,
	                to: to
	            };
	        };
	    R._getContainer = function (x, y, w, h) {
	        var container;
	        container = h == null && !R.is(x, "object") ? g.doc.getElementById(x) : x;
	        if (container == null) {
	            return;
	        }
	        if (container.tagName) {
	            if (y == null) {
	                return {
	                    container: container,
	                    width: container.style.pixelWidth || container.offsetWidth,
	                    height: container.style.pixelHeight || container.offsetHeight
	                };
	            } else {
	                return {
	                    container: container,
	                    width: y,
	                    height: w
	                };
	            }
	        }
	        return {
	            container: 1,
	            x: x,
	            y: y,
	            width: w,
	            height: h
	        };
	    };
	    /*\
	     * Raphael.pathToRelative
	     [ method ]
	     **
	     * Utility method
	     **
	     * Converts path to relative form
	     > Parameters
	     - pathString (string|array) path string or array of segments
	     = (array) array of segments.
	    \*/
	    R.pathToRelative = pathToRelative;
	    R._engine = {};
	    /*\
	     * Raphael.path2curve
	     [ method ]
	     **
	     * Utility method
	     **
	     * Converts path to a new path where all segments are cubic bezier curves.
	     > Parameters
	     - pathString (string|array) path string or array of segments
	     = (array) array of segments.
	    \*/
	    R.path2curve = path2curve;
	    /*\
	     * Raphael.matrix
	     [ method ]
	     **
	     * Utility method
	     **
	     * Returns matrix based on given parameters.
	     > Parameters
	     - a (number)
	     - b (number)
	     - c (number)
	     - d (number)
	     - e (number)
	     - f (number)
	     = (object) @Matrix
	    \*/
	    R.matrix = function (a, b, c, d, e, f) {
	        return new Matrix(a, b, c, d, e, f);
	    };
	    function Matrix(a, b, c, d, e, f) {
	        if (a != null) {
	            this.a = +a;
	            this.b = +b;
	            this.c = +c;
	            this.d = +d;
	            this.e = +e;
	            this.f = +f;
	        } else {
	            this.a = 1;
	            this.b = 0;
	            this.c = 0;
	            this.d = 1;
	            this.e = 0;
	            this.f = 0;
	        }
	    }
	    (function (matrixproto) {
	        /*\
	         * Matrix.add
	         [ method ]
	         **
	         * Adds given matrix to existing one.
	         > Parameters
	         - a (number)
	         - b (number)
	         - c (number)
	         - d (number)
	         - e (number)
	         - f (number)
	         or
	         - matrix (object) @Matrix
	        \*/
	        matrixproto.add = function (a, b, c, d, e, f) {
	            var out = [[], [], []],
	                m = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]],
	                matrix = [[a, c, e], [b, d, f], [0, 0, 1]],
	                x, y, z, res;

	            if (a && a instanceof Matrix) {
	                matrix = [[a.a, a.c, a.e], [a.b, a.d, a.f], [0, 0, 1]];
	            }

	            for (x = 0; x < 3; x++) {
	                for (y = 0; y < 3; y++) {
	                    res = 0;
	                    for (z = 0; z < 3; z++) {
	                        res += m[x][z] * matrix[z][y];
	                    }
	                    out[x][y] = res;
	                }
	            }
	            this.a = out[0][0];
	            this.b = out[1][0];
	            this.c = out[0][1];
	            this.d = out[1][1];
	            this.e = out[0][2];
	            this.f = out[1][2];
	        };
	        /*\
	         * Matrix.invert
	         [ method ]
	         **
	         * Returns inverted version of the matrix
	         = (object) @Matrix
	        \*/
	        matrixproto.invert = function () {
	            var me = this,
	                x = me.a * me.d - me.b * me.c;
	            return new Matrix(me.d / x, -me.b / x, -me.c / x, me.a / x, (me.c * me.f - me.d * me.e) / x, (me.b * me.e - me.a * me.f) / x);
	        };
	        /*\
	         * Matrix.clone
	         [ method ]
	         **
	         * Returns copy of the matrix
	         = (object) @Matrix
	        \*/
	        matrixproto.clone = function () {
	            return new Matrix(this.a, this.b, this.c, this.d, this.e, this.f);
	        };
	        /*\
	         * Matrix.translate
	         [ method ]
	         **
	         * Translate the matrix
	         > Parameters
	         - x (number)
	         - y (number)
	        \*/
	        matrixproto.translate = function (x, y) {
	            this.add(1, 0, 0, 1, x, y);
	        };
	        /*\
	         * Matrix.scale
	         [ method ]
	         **
	         * Scales the matrix
	         > Parameters
	         - x (number)
	         - y (number) #optional
	         - cx (number) #optional
	         - cy (number) #optional
	        \*/
	        matrixproto.scale = function (x, y, cx, cy) {
	            y == null && (y = x);
	            (cx || cy) && this.add(1, 0, 0, 1, cx, cy);
	            this.add(x, 0, 0, y, 0, 0);
	            (cx || cy) && this.add(1, 0, 0, 1, -cx, -cy);
	        };
	        /*\
	         * Matrix.rotate
	         [ method ]
	         **
	         * Rotates the matrix
	         > Parameters
	         - a (number)
	         - x (number)
	         - y (number)
	        \*/
	        matrixproto.rotate = function (a, x, y) {
	            a = R.rad(a);
	            x = x || 0;
	            y = y || 0;
	            var cos = +math.cos(a).toFixed(9),
	                sin = +math.sin(a).toFixed(9);
	            this.add(cos, sin, -sin, cos, x, y);
	            this.add(1, 0, 0, 1, -x, -y);
	        };
	        /*\
	         * Matrix.x
	         [ method ]
	         **
	         * Return x coordinate for given point after transformation described by the matrix. See also @Matrix.y
	         > Parameters
	         - x (number)
	         - y (number)
	         = (number) x
	        \*/
	        matrixproto.x = function (x, y) {
	            return x * this.a + y * this.c + this.e;
	        };
	        /*\
	         * Matrix.y
	         [ method ]
	         **
	         * Return y coordinate for given point after transformation described by the matrix. See also @Matrix.x
	         > Parameters
	         - x (number)
	         - y (number)
	         = (number) y
	        \*/
	        matrixproto.y = function (x, y) {
	            return x * this.b + y * this.d + this.f;
	        };
	        matrixproto.get = function (i) {
	            return +this[Str.fromCharCode(97 + i)].toFixed(4);
	        };
	        matrixproto.toString = function () {
	            return R.svg ?
	                "matrix(" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + ")" :
	                [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join();
	        };
	        matrixproto.toFilter = function () {
	            return "progid:DXImageTransform.Microsoft.Matrix(M11=" + this.get(0) +
	                ", M12=" + this.get(2) + ", M21=" + this.get(1) + ", M22=" + this.get(3) +
	                ", Dx=" + this.get(4) + ", Dy=" + this.get(5) + ", sizingmethod='auto expand')";
	        };
	        matrixproto.offset = function () {
	            return [this.e.toFixed(4), this.f.toFixed(4)];
	        };
	        function norm(a) {
	            return a[0] * a[0] + a[1] * a[1];
	        }
	        function normalize(a) {
	            var mag = math.sqrt(norm(a));
	            a[0] && (a[0] /= mag);
	            a[1] && (a[1] /= mag);
	        }
	        /*\
	         * Matrix.split
	         [ method ]
	         **
	         * Splits matrix into primitive transformations
	         = (object) in format:
	         o dx (number) translation by x
	         o dy (number) translation by y
	         o scalex (number) scale by x
	         o scaley (number) scale by y
	         o shear (number) shear
	         o rotate (number) rotation in deg
	         o isSimple (boolean) could it be represented via simple transformations
	        \*/
	        matrixproto.split = function () {
	            var out = {};
	            // translation
	            out.dx = this.e;
	            out.dy = this.f;

	            // scale and shear
	            var row = [[this.a, this.c], [this.b, this.d]];
	            out.scalex = math.sqrt(norm(row[0]));
	            normalize(row[0]);

	            out.shear = row[0][0] * row[1][0] + row[0][1] * row[1][1];
	            row[1] = [row[1][0] - row[0][0] * out.shear, row[1][1] - row[0][1] * out.shear];

	            out.scaley = math.sqrt(norm(row[1]));
	            normalize(row[1]);
	            out.shear /= out.scaley;

	            // rotation
	            var sin = -row[0][1],
	                cos = row[1][1];
	            if (cos < 0) {
	                out.rotate = R.deg(math.acos(cos));
	                if (sin < 0) {
	                    out.rotate = 360 - out.rotate;
	                }
	            } else {
	                out.rotate = R.deg(math.asin(sin));
	            }

	            out.isSimple = !+out.shear.toFixed(9) && (out.scalex.toFixed(9) == out.scaley.toFixed(9) || !out.rotate);
	            out.isSuperSimple = !+out.shear.toFixed(9) && out.scalex.toFixed(9) == out.scaley.toFixed(9) && !out.rotate;
	            out.noRotation = !+out.shear.toFixed(9) && !out.rotate;
	            return out;
	        };
	        /*\
	         * Matrix.toTransformString
	         [ method ]
	         **
	         * Return transform string that represents given matrix
	         = (string) transform string
	        \*/
	        matrixproto.toTransformString = function (shorter) {
	            var s = shorter || this[split]();
	            if (s.isSimple) {
	                s.scalex = +s.scalex.toFixed(4);
	                s.scaley = +s.scaley.toFixed(4);
	                s.rotate = +s.rotate.toFixed(4);
	                return  (s.dx || s.dy ? "t" + [s.dx, s.dy] : E) +
	                        (s.scalex != 1 || s.scaley != 1 ? "s" + [s.scalex, s.scaley, 0, 0] : E) +
	                        (s.rotate ? "r" + [s.rotate, 0, 0] : E);
	            } else {
	                return "m" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)];
	            }
	        };
	    })(Matrix.prototype);

	    var preventDefault = function () {
	        this.returnValue = false;
	    },
	    preventTouch = function () {
	        return this.originalEvent.preventDefault();
	    },
	    stopPropagation = function () {
	        this.cancelBubble = true;
	    },
	    stopTouch = function () {
	        return this.originalEvent.stopPropagation();
	    },
	    getEventPosition = function (e) {
	        var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,
	            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;

	        return {
	            x: e.clientX + scrollX,
	            y: e.clientY + scrollY
	        };
	    },
	    addEvent = (function () {
	        if (g.doc.addEventListener) {
	            return function (obj, type, fn, element) {
	                var f = function (e) {
	                    var pos = getEventPosition(e);
	                    return fn.call(element, e, pos.x, pos.y);
	                };
	                obj.addEventListener(type, f, false);

	                if (supportsTouch && touchMap[type]) {
	                    var _f = function (e) {
	                        var pos = getEventPosition(e),
	                            olde = e;

	                        for (var i = 0, ii = e.targetTouches && e.targetTouches.length; i < ii; i++) {
	                            if (e.targetTouches[i].target == obj) {
	                                e = e.targetTouches[i];
	                                e.originalEvent = olde;
	                                e.preventDefault = preventTouch;
	                                e.stopPropagation = stopTouch;
	                                break;
	                            }
	                        }

	                        return fn.call(element, e, pos.x, pos.y);
	                    };
	                    obj.addEventListener(touchMap[type], _f, false);
	                }

	                return function () {
	                    obj.removeEventListener(type, f, false);

	                    if (supportsTouch && touchMap[type])
	                        obj.removeEventListener(touchMap[type], _f, false);

	                    return true;
	                };
	            };
	        } else if (g.doc.attachEvent) {
	            return function (obj, type, fn, element) {
	                var f = function (e) {
	                    e = e || g.win.event;
	                    var scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,
	                        scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,
	                        x = e.clientX + scrollX,
	                        y = e.clientY + scrollY;
	                    e.preventDefault = e.preventDefault || preventDefault;
	                    e.stopPropagation = e.stopPropagation || stopPropagation;
	                    return fn.call(element, e, x, y);
	                };
	                obj.attachEvent("on" + type, f);
	                var detacher = function () {
	                    obj.detachEvent("on" + type, f);
	                    return true;
	                };
	                return detacher;
	            };
	        }
	    })(),
	    drag = [],
	    dragMove = function (e) {
	        var x = e.clientX,
	            y = e.clientY,
	            scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,
	            scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft,
	            dragi,
	            j = drag.length;
	        while (j--) {
	            dragi = drag[j];
	            if (supportsTouch && e.touches) {
	                var i = e.touches.length,
	                    touch;
	                while (i--) {
	                    touch = e.touches[i];
	                    if (touch.identifier == dragi.el._drag.id) {
	                        x = touch.clientX;
	                        y = touch.clientY;
	                        (e.originalEvent ? e.originalEvent : e).preventDefault();
	                        break;
	                    }
	                }
	            } else {
	                e.preventDefault();
	            }
	            var node = dragi.el.node,
	                o,
	                next = node.nextSibling,
	                parent = node.parentNode,
	                display = node.style.display;
	            g.win.opera && parent.removeChild(node);
	            node.style.display = "none";
	            o = dragi.el.paper.getElementByPoint(x, y);
	            node.style.display = display;
	            g.win.opera && (next ? parent.insertBefore(node, next) : parent.appendChild(node));
	            o && eve("raphael.drag.over." + dragi.el.id, dragi.el, o);
	            x += scrollX;
	            y += scrollY;
	            eve("raphael.drag.move." + dragi.el.id, dragi.move_scope || dragi.el, x - dragi.el._drag.x, y - dragi.el._drag.y, x, y, e);
	        }
	    },
	    dragUp = function (e) {
	        R.unmousemove(dragMove).unmouseup(dragUp);
	        var i = drag.length,
	            dragi;
	        while (i--) {
	            dragi = drag[i];
	            dragi.el._drag = {};
	            eve("raphael.drag.end." + dragi.el.id, dragi.end_scope || dragi.start_scope || dragi.move_scope || dragi.el, e);
	        }
	        drag = [];
	    },
	    /*\
	     * Raphael.el
	     [ property (object) ]
	     **
	     * You can add your own method to elements. This is useful when you want to hack default functionality or
	     * want to wrap some common transformation or attributes in one method. In difference to canvas methods,
	     * you can redefine element method at any time. Expending element methods wouldnt affect set.
	     > Usage
	     | Raphael.el.red = function () {
	     |     this.attr({fill: "#f00"});
	     | };
	     | // then use it
	     | paper.circle(100, 100, 20).red();
	    \*/
	    elproto = R.el = {};
	    /*\
	     * Element.click
	     [ method ]
	     **
	     * Adds event handler for click for the element.
	     > Parameters
	     - handler (function) handler for the event
	     = (object) @Element
	    \*/
	    /*\
	     * Element.unclick
	     [ method ]
	     **
	     * Removes event handler for click for the element.
	     > Parameters
	     - handler (function) #optional handler for the event
	     = (object) @Element
	    \*/

	    /*\
	     * Element.dblclick
	     [ method ]
	     **
	     * Adds event handler for double click for the element.
	     > Parameters
	     - handler (function) handler for the event
	     = (object) @Element
	    \*/
	    /*\
	     * Element.undblclick
	     [ method ]
	     **
	     * Removes event handler for double click for the element.
	     > Parameters
	     - handler (function) #optional handler for the event
	     = (object) @Element
	    \*/

	    /*\
	     * Element.mousedown
	     [ method ]
	     **
	     * Adds event handler for mousedown for the element.
	     > Parameters
	     - handler (function) handler for the event
	     = (object) @Element
	    \*/
	    /*\
	     * Element.unmousedown
	     [ method ]
	     **
	     * Removes event handler for mousedown for the element.
	     > Parameters
	     - handler (function) #optional handler for the event
	     = (object) @Element
	    \*/

	    /*\
	     * Element.mousemove
	     [ method ]
	     **
	     * Adds event handler for mousemove for the element.
	     > Parameters
	     - handler (function) handler for the event
	     = (object) @Element
	    \*/
	    /*\
	     * Element.unmousemove
	     [ method ]
	     **
	     * Removes event handler for mousemove for the element.
	     > Parameters
	     - handler (function) #optional handler for the event
	     = (object) @Element
	    \*/

	    /*\
	     * Element.mouseout
	     [ method ]
	     **
	     * Adds event handler for mouseout for the element.
	     > Parameters
	     - handler (function) handler for the event
	     = (object) @Element
	    \*/
	    /*\
	     * Element.unmouseout
	     [ method ]
	     **
	     * Removes event handler for mouseout for the element.
	     > Parameters
	     - handler (function) #optional handler for the event
	     = (object) @Element
	    \*/

	    /*\
	     * Element.mouseover
	     [ method ]
	     **
	     * Adds event handler for mouseover for the element.
	     > Parameters
	     - handler (function) handler for the event
	     = (object) @Element
	    \*/
	    /*\
	     * Element.unmouseover
	     [ method ]
	     **
	     * Removes event handler for mouseover for the element.
	     > Parameters
	     - handler (function) #optional handler for the event
	     = (object) @Element
	    \*/

	    /*\
	     * Element.mouseup
	     [ method ]
	     **
	     * Adds event handler for mouseup for the element.
	     > Parameters
	     - handler (function) handler for the event
	     = (object) @Element
	    \*/
	    /*\
	     * Element.unmouseup
	     [ method ]
	     **
	     * Removes event handler for mouseup for the element.
	     > Parameters
	     - handler (function) #optional handler for the event
	     = (object) @Element
	    \*/

	    /*\
	     * Element.touchstart
	     [ method ]
	     **
	     * Adds event handler for touchstart for the element.
	     > Parameters
	     - handler (function) handler for the event
	     = (object) @Element
	    \*/
	    /*\
	     * Element.untouchstart
	     [ method ]
	     **
	     * Removes event handler for touchstart for the element.
	     > Parameters
	     - handler (function) #optional handler for the event
	     = (object) @Element
	    \*/

	    /*\
	     * Element.touchmove
	     [ method ]
	     **
	     * Adds event handler for touchmove for the element.
	     > Parameters
	     - handler (function) handler for the event
	     = (object) @Element
	    \*/
	    /*\
	     * Element.untouchmove
	     [ method ]
	     **
	     * Removes event handler for touchmove for the element.
	     > Parameters
	     - handler (function) #optional handler for the event
	     = (object) @Element
	    \*/

	    /*\
	     * Element.touchend
	     [ method ]
	     **
	     * Adds event handler for touchend for the element.
	     > Parameters
	     - handler (function) handler for the event
	     = (object) @Element
	    \*/
	    /*\
	     * Element.untouchend
	     [ method ]
	     **
	     * Removes event handler for touchend for the element.
	     > Parameters
	     - handler (function) #optional handler for the event
	     = (object) @Element
	    \*/

	    /*\
	     * Element.touchcancel
	     [ method ]
	     **
	     * Adds event handler for touchcancel for the element.
	     > Parameters
	     - handler (function) handler for the event
	     = (object) @Element
	    \*/
	    /*\
	     * Element.untouchcancel
	     [ method ]
	     **
	     * Removes event handler for touchcancel for the element.
	     > Parameters
	     - handler (function) #optional handler for the event
	     = (object) @Element
	    \*/
	    for (var i = events.length; i--;) {
	        (function (eventName) {
	            R[eventName] = elproto[eventName] = function (fn, scope) {
	                if (R.is(fn, "function")) {
	                    this.events = this.events || [];
	                    this.events.push({name: eventName, f: fn, unbind: addEvent(this.shape || this.node || g.doc, eventName, fn, scope || this)});
	                }
	                return this;
	            };
	            R["un" + eventName] = elproto["un" + eventName] = function (fn) {
	                var events = this.events || [],
	                    l = events.length;
	                while (l--){
	                    if (events[l].name == eventName && (R.is(fn, "undefined") || events[l].f == fn)) {
	                        events[l].unbind();
	                        events.splice(l, 1);
	                        !events.length && delete this.events;
	                    }
	                }
	                return this;
	            };
	        })(events[i]);
	    }

	    /*\
	     * Element.data
	     [ method ]
	     **
	     * Adds or retrieves given value associated with given key.
	     **
	     * See also @Element.removeData
	     > Parameters
	     - key (string) key to store data
	     - value (any) #optional value to store
	     = (object) @Element
	     * or, if value is not specified:
	     = (any) value
	     * or, if key and value are not specified:
	     = (object) Key/value pairs for all the data associated with the element.
	     > Usage
	     | for (var i = 0, i < 5, i++) {
	     |     paper.circle(10 + 15 * i, 10, 10)
	     |          .attr({fill: "#000"})
	     |          .data("i", i)
	     |          .click(function () {
	     |             alert(this.data("i"));
	     |          });
	     | }
	    \*/
	    elproto.data = function (key, value) {
	        var data = eldata[this.id] = eldata[this.id] || {};
	        if (arguments.length == 0) {
	            return data;
	        }
	        if (arguments.length == 1) {
	            if (R.is(key, "object")) {
	                for (var i in key) if (key[has](i)) {
	                    this.data(i, key[i]);
	                }
	                return this;
	            }
	            eve("raphael.data.get." + this.id, this, data[key], key);
	            return data[key];
	        }
	        data[key] = value;
	        eve("raphael.data.set." + this.id, this, value, key);
	        return this;
	    };
	    /*\
	     * Element.removeData
	     [ method ]
	     **
	     * Removes value associated with an element by given key.
	     * If key is not provided, removes all the data of the element.
	     > Parameters
	     - key (string) #optional key
	     = (object) @Element
	    \*/
	    elproto.removeData = function (key) {
	        if (key == null) {
	            eldata[this.id] = {};
	        } else {
	            eldata[this.id] && delete eldata[this.id][key];
	        }
	        return this;
	    };
	     /*\
	     * Element.getData
	     [ method ]
	     **
	     * Retrieves the element data
	     = (object) data
	    \*/
	    elproto.getData = function () {
	        return clone(eldata[this.id] || {});
	    };
	    /*\
	     * Element.hover
	     [ method ]
	     **
	     * Adds event handlers for hover for the element.
	     > Parameters
	     - f_in (function) handler for hover in
	     - f_out (function) handler for hover out
	     - icontext (object) #optional context for hover in handler
	     - ocontext (object) #optional context for hover out handler
	     = (object) @Element
	    \*/
	    elproto.hover = function (f_in, f_out, scope_in, scope_out) {
	        return this.mouseover(f_in, scope_in).mouseout(f_out, scope_out || scope_in);
	    };
	    /*\
	     * Element.unhover
	     [ method ]
	     **
	     * Removes event handlers for hover for the element.
	     > Parameters
	     - f_in (function) handler for hover in
	     - f_out (function) handler for hover out
	     = (object) @Element
	    \*/
	    elproto.unhover = function (f_in, f_out) {
	        return this.unmouseover(f_in).unmouseout(f_out);
	    };
	    var draggable = [];
	    /*\
	     * Element.drag
	     [ method ]
	     **
	     * Adds event handlers for drag of the element.
	     > Parameters
	     - onmove (function) handler for moving
	     - onstart (function) handler for drag start
	     - onend (function) handler for drag end
	     - mcontext (object) #optional context for moving handler
	     - scontext (object) #optional context for drag start handler
	     - econtext (object) #optional context for drag end handler
	     * Additionally following `drag` events will be triggered: `drag.start.<id>` on start,
	     * `drag.end.<id>` on end and `drag.move.<id>` on every move. When element will be dragged over another element
	     * `drag.over.<id>` will be fired as well.
	     *
	     * Start event and start handler will be called in specified context or in context of the element with following parameters:
	     o x (number) x position of the mouse
	     o y (number) y position of the mouse
	     o event (object) DOM event object
	     * Move event and move handler will be called in specified context or in context of the element with following parameters:
	     o dx (number) shift by x from the start point
	     o dy (number) shift by y from the start point
	     o x (number) x position of the mouse
	     o y (number) y position of the mouse
	     o event (object) DOM event object
	     * End event and end handler will be called in specified context or in context of the element with following parameters:
	     o event (object) DOM event object
	     = (object) @Element
	    \*/
	    elproto.drag = function (onmove, onstart, onend, move_scope, start_scope, end_scope) {
	        function start(e) {
                if( ('which' in e)?(e.which==2||e.which==3):(e.button==4||e.button==2) )return;
	            (e.originalEvent || e).preventDefault();
	            var x = e.clientX,
	                y = e.clientY,
	                scrollY = g.doc.documentElement.scrollTop || g.doc.body.scrollTop,
	                scrollX = g.doc.documentElement.scrollLeft || g.doc.body.scrollLeft;
	            this._drag.id = e.identifier;
	            if (supportsTouch && e.touches) {
	                var i = e.touches.length, touch;
	                while (i--) {
	                    touch = e.touches[i];
	                    this._drag.id = touch.identifier;
	                    if (touch.identifier == this._drag.id) {
	                        x = touch.clientX;
	                        y = touch.clientY;
	                        break;
	                    }
	                }
	            }
	            this._drag.x = x + scrollX;
	            this._drag.y = y + scrollY;
	            !drag.length && R.mousemove(dragMove).mouseup(dragUp);
	            drag.push({el: this, move_scope: move_scope, start_scope: start_scope, end_scope: end_scope});
	            onstart && eve.on("raphael.drag.start." + this.id, onstart);
	            onmove && eve.on("raphael.drag.move." + this.id, onmove);
	            onend && eve.on("raphael.drag.end." + this.id, onend);
	            eve("raphael.drag.start." + this.id, start_scope || move_scope || this, e.clientX + scrollX, e.clientY + scrollY, e);
	        }
	        this._drag = {};
	        draggable.push({el: this, start: start});
	        this.mousedown(start);
	        return this;
	    };
	    /*\
	     * Element.onDragOver
	     [ method ]
	     **
	     * Shortcut for assigning event handler for `drag.over.<id>` event, where id is id of the element (see @Element.id).
	     > Parameters
	     - f (function) handler for event, first argument would be the element you are dragging over
	    \*/
	    elproto.onDragOver = function (f) {
	        f ? eve.on("raphael.drag.over." + this.id, f) : eve.unbind("raphael.drag.over." + this.id);
	    };
	    /*\
	     * Element.undrag
	     [ method ]
	     **
	     * Removes all drag event handlers from given element.
	    \*/
	    elproto.undrag = function () {
	        var i = draggable.length;
	        while (i--) if (draggable[i].el == this) {
	            this.unmousedown(draggable[i].start);
	            draggable.splice(i, 1);
	            eve.unbind("raphael.drag.*." + this.id);
	        }
	        !draggable.length && R.unmousemove(dragMove).unmouseup(dragUp);
	        drag = [];
	    };
	    /*\
	     * Paper.circle
	     [ method ]
	     **
	     * Draws a circle.
	     **
	     > Parameters
	     **
	     - x (number) x coordinate of the centre
	     - y (number) y coordinate of the centre
	     - r (number) radius
	     = (object) Raphal element object with type circle
	     **
	     > Usage
	     | var c = paper.circle(50, 50, 40);
	    \*/
	    paperproto.circle = function (x, y, r) {
	        var out = R._engine.circle(this, x || 0, y || 0, r || 0);
	        this.__set__ && this.__set__.push(out);
	        return out;
	    };
	    /*\
	     * Paper.rect
	     [ method ]
	     *
	     * Draws a rectangle.
	     **
	     > Parameters
	     **
	     - x (number) x coordinate of the top left corner
	     - y (number) y coordinate of the top left corner
	     - width (number) width
	     - height (number) height
	     - r (number) #optional radius for rounded corners, default is 0
	     = (object) Raphal element object with type rect
	     **
	     > Usage
	     | // regular rectangle
	     | var c = paper.rect(10, 10, 50, 50);
	     | // rectangle with rounded corners
	     | var c = paper.rect(40, 40, 50, 50, 10);
	    \*/
	    paperproto.rect = function (x, y, w, h, r) {
	        var out = R._engine.rect(this, x || 0, y || 0, w || 0, h || 0, r || 0);
	        this.__set__ && this.__set__.push(out);
	        return out;
	    };
	    /*\
	     * Paper.ellipse
	     [ method ]
	     **
	     * Draws an ellipse.
	     **
	     > Parameters
	     **
	     - x (number) x coordinate of the centre
	     - y (number) y coordinate of the centre
	     - rx (number) horizontal radius
	     - ry (number) vertical radius
	     = (object) Raphal element object with type ellipse
	     **
	     > Usage
	     | var c = paper.ellipse(50, 50, 40, 20);
	    \*/
	    paperproto.ellipse = function (x, y, rx, ry) {
	        var out = R._engine.ellipse(this, x || 0, y || 0, rx || 0, ry || 0);
	        this.__set__ && this.__set__.push(out);
	        return out;
	    };
	    /*\
	     * Paper.path
	     [ method ]
	     **
	     * Creates a path element by given path data string.
	     > Parameters
	     - pathString (string) #optional path string in SVG format.
	     * Path string consists of one-letter commands, followed by comma seprarated arguments in numercal form. Example:
	     | "M10,20L30,40"
	     * Here we can see two commands: M, with arguments `(10, 20)` and L with arguments `(30, 40)`. Upper case letter mean command is absolute, lower caserelative.
	     *
	     # <p>Here is short list of commands available, for more details see <a href="http://www.w3.org/TR/SVG/paths.html#PathData" title="Details of a path's data attribute's format are described in the SVG specification.">SVG path string format</a>.</p>
	     # <table><thead><tr><th>Command</th><th>Name</th><th>Parameters</th></tr></thead><tbody>
	     # <tr><td>M</td><td>moveto</td><td>(x y)+</td></tr>
	     # <tr><td>Z</td><td>closepath</td><td>(none)</td></tr>
	     # <tr><td>L</td><td>lineto</td><td>(x y)+</td></tr>
	     # <tr><td>H</td><td>horizontal lineto</td><td>x+</td></tr>
	     # <tr><td>V</td><td>vertical lineto</td><td>y+</td></tr>
	     # <tr><td>C</td><td>curveto</td><td>(x1 y1 x2 y2 x y)+</td></tr>
	     # <tr><td>S</td><td>smooth curveto</td><td>(x2 y2 x y)+</td></tr>
	     # <tr><td>Q</td><td>quadratic Bzier curveto</td><td>(x1 y1 x y)+</td></tr>
	     # <tr><td>T</td><td>smooth quadratic Bzier curveto</td><td>(x y)+</td></tr>
	     # <tr><td>A</td><td>elliptical arc</td><td>(rx ry x-axis-rotation large-arc-flag sweep-flag x y)+</td></tr>
	     # <tr><td>R</td><td><a href="http://en.wikipedia.org/wiki/CatmullRom_spline#Catmull.E2.80.93Rom_spline">Catmull-Rom curveto</a>*</td><td>x1 y1 (x y)+</td></tr></tbody></table>
	     * * Catmull-Rom curveto is a not standard SVG command and added in 2.0 to make life easier.
	     * Note: there is a special case when path consist of just three commands: M10,10Rz. In this case path will smoothly connects to its beginning.
	     > Usage
	     | var c = paper.path("M10 10L90 90");
	     | // draw a diagonal line:
	     | // move to 10,10, line to 90,90
	     * For example of path strings, check out these icons: http://raphaeljs.com/icons/
	    \*/
	    paperproto.path = function (pathString) {
	        pathString && !R.is(pathString, string) && !R.is(pathString[0], array) && (pathString += E);
	        var out = R._engine.path(R.format[apply](R, arguments), this);
	        this.__set__ && this.__set__.push(out);
	        return out;
	    };
	    /*\
	     * Paper.image
	     [ method ]
	     **
	     * Embeds an image into the surface.
	     **
	     > Parameters
	     **
	     - src (string) URI of the source image
	     - x (number) x coordinate position
	     - y (number) y coordinate position
	     - width (number) width of the image
	     - height (number) height of the image
	     = (object) Raphal element object with type image
	     **
	     > Usage
	     | var c = paper.image("apple.png", 10, 10, 80, 80);
	    \*/
	    paperproto.image = function (src, x, y, w, h) {
	        var out = R._engine.image(this, src || "about:blank", x || 0, y || 0, w || 0, h || 0);
	        this.__set__ && this.__set__.push(out);
	        return out;
	    };
	    /*\
	     * Paper.text
	     [ method ]
	     **
	     * Draws a text string. If you need line breaks, put \n in the string.
	     **
	     > Parameters
	     **
	     - x (number) x coordinate position
	     - y (number) y coordinate position
	     - text (string) The text string to draw
	     = (object) Raphal element object with type text
	     **
	     > Usage
	     | var t = paper.text(50, 50, "Raphal\nkicks\nbutt!");
	    \*/
	    paperproto.text = function (x, y, text) {
	        var out = R._engine.text(this, x || 0, y || 0, Str(text));
	        this.__set__ && this.__set__.push(out);
	        return out;
	    };
	    /*\
	     * Paper.set
	     [ method ]
	     **
	     * Creates array-like object to keep and operate several elements at once.
	     * Warning: it doesnt create any elements for itself in the page, it just groups existing elements.
	     * Sets act as pseudo elements  all methods available to an element can be used on a set.
	     = (object) array-like object that represents set of elements
	     **
	     > Usage
	     | var st = paper.set();
	     | st.push(
	     |     paper.circle(10, 10, 5),
	     |     paper.circle(30, 10, 5)
	     | );
	     | st.attr({fill: "red"}); // changes the fill of both circles
	    \*/
	    paperproto.set = function (itemsArray) {
	        !R.is(itemsArray, "array") && (itemsArray = Array.prototype.splice.call(arguments, 0, arguments.length));
	        var out = new Set(itemsArray);
	        this.__set__ && this.__set__.push(out);
	        out["paper"] = this;
	        out["type"] = "set";
	        return out;
	    };
	    /*\
	     * Paper.setStart
	     [ method ]
	     **
	     * Creates @Paper.set. All elements that will be created after calling this method and before calling
	     * @Paper.setFinish will be added to the set.
	     **
	     > Usage
	     | paper.setStart();
	     | paper.circle(10, 10, 5),
	     | paper.circle(30, 10, 5)
	     | var st = paper.setFinish();
	     | st.attr({fill: "red"}); // changes the fill of both circles
	    \*/
	    paperproto.setStart = function (set) {
	        this.__set__ = set || this.set();
	    };
	    /*\
	     * Paper.setFinish
	     [ method ]
	     **
	     * See @Paper.setStart. This method finishes catching and returns resulting set.
	     **
	     = (object) set
	    \*/
	    paperproto.setFinish = function (set) {
	        var out = this.__set__;
	        delete this.__set__;
	        return out;
	    };
	    /*\
	     * Paper.getSize
	     [ method ]
	     **
	     * Obtains current paper actual size.
	     **
	     = (object)
	     \*/
	    paperproto.getSize = function () {
	        var container = this.canvas.parentNode;
	        return {
	            width: container.offsetWidth,
	            height: container.offsetHeight
	                };
	        };
	    /*\
	     * Paper.setSize
	     [ method ]
	     **
	     * If you need to change dimensions of the canvas call this method
	     **
	     > Parameters
	     **
	     - width (number) new width of the canvas
	     - height (number) new height of the canvas
	    \*/
	    paperproto.setSize = function (width, height) {
	        return R._engine.setSize.call(this, width, height);
	    };
	    /*\
	     * Paper.setViewBox
	     [ method ]
	     **
	     * Sets the view box of the paper. Practically it gives you ability to zoom and pan whole paper surface by
	     * specifying new boundaries.
	     **
	     > Parameters
	     **
	     - x (number) new x position, default is `0`
	     - y (number) new y position, default is `0`
	     - w (number) new width of the canvas
	     - h (number) new height of the canvas
	     - fit (boolean) `true` if you want graphics to fit into new boundary box
	    \*/
	    paperproto.setViewBox = function (x, y, w, h, fit) {
	        return R._engine.setViewBox.call(this, x, y, w, h, fit);
	    };
	    /*\
	     * Paper.top
	     [ property ]
	     **
	     * Points to the topmost element on the paper
	    \*/
	    /*\
	     * Paper.bottom
	     [ property ]
	     **
	     * Points to the bottom element on the paper
	    \*/
	    paperproto.top = paperproto.bottom = null;
	    /*\
	     * Paper.raphael
	     [ property ]
	     **
	     * Points to the @Raphael object/function
	    \*/
	    paperproto.raphael = R;
	    var getOffset = function (elem) {
	        var box = elem.getBoundingClientRect(),
	            doc = elem.ownerDocument,
	            body = doc.body,
	            docElem = doc.documentElement,
	            clientTop = docElem.clientTop || body.clientTop || 0, clientLeft = docElem.clientLeft || body.clientLeft || 0,
	            top  = box.top  + (g.win.pageYOffset || docElem.scrollTop || body.scrollTop ) - clientTop,
	            left = box.left + (g.win.pageXOffset || docElem.scrollLeft || body.scrollLeft) - clientLeft;
	        return {
	            y: top,
	            x: left
	        };
	    };
	    /*\
	     * Paper.getElementByPoint
	     [ method ]
	     **
	     * Returns you topmost element under given point.
	     **
	     = (object) Raphal element object
	     > Parameters
	     **
	     - x (number) x coordinate from the top left corner of the window
	     - y (number) y coordinate from the top left corner of the window
	     > Usage
	     | paper.getElementByPoint(mouseX, mouseY).attr({stroke: "#f00"});
	    \*/
	    paperproto.getElementByPoint = function (x, y) {
	        var paper = this,
	            svg = paper.canvas,
	            target = g.doc.elementFromPoint(x, y);
	        if (g.win.opera && target.tagName == "svg") {
	            var so = getOffset(svg),
	                sr = svg.createSVGRect();
	            sr.x = x - so.x;
	            sr.y = y - so.y;
	            sr.width = sr.height = 1;
	            var hits = svg.getIntersectionList(sr, null);
	            if (hits.length) {
	                target = hits[hits.length - 1];
	            }
	        }
	        if (!target) {
	            return null;
	        }
	        while (target.parentNode && target != svg.parentNode && !target.raphael) {
	            target = target.parentNode;
	        }
	        target == paper.canvas.parentNode && (target = svg);
	        target = target && target.raphael ? paper.getById(target.raphaelid) : null;
	        return target;
	    };

	    /*\
	     * Paper.getElementsByBBox
	     [ method ]
	     **
	     * Returns set of elements that have an intersecting bounding box
	     **
	     > Parameters
	     **
	     - bbox (object) bbox to check with
	     = (object) @Set
	     \*/
	    paperproto.getElementsByBBox = function (bbox) {
	        var set = this.set();
	        this.forEach(function (el) {
	            if (R.isBBoxIntersect(el.getBBox(), bbox)) {
	                set.push(el);
	            }
	        });
	        return set;
	    };

	    /*\
	     * Paper.getById
	     [ method ]
	     **
	     * Returns you element by its internal ID.
	     **
	     > Parameters
	     **
	     - id (number) id
	     = (object) Raphal element object
	    \*/
	    paperproto.getById = function (id) {
	        var bot = this.bottom;
	        while (bot) {
	            if (bot.id == id) {
	                return bot;
	            }
	            bot = bot.next;
	        }
	        return null;
	    };
	    /*\
	     * Paper.forEach
	     [ method ]
	     **
	     * Executes given function for each element on the paper
	     *
	     * If callback function returns `false` it will stop loop running.
	     **
	     > Parameters
	     **
	     - callback (function) function to run
	     - thisArg (object) context object for the callback
	     = (object) Paper object
	     > Usage
	     | paper.forEach(function (el) {
	     |     el.attr({ stroke: "blue" });
	     | });
	    \*/
	    paperproto.forEach = function (callback, thisArg) {
	        var bot = this.bottom;
	        while (bot) {
	            if (callback.call(thisArg, bot) === false) {
	                return this;
	            }
	            bot = bot.next;
	        }
	        return this;
	    };
	    /*\
	     * Paper.getElementsByPoint
	     [ method ]
	     **
	     * Returns set of elements that have common point inside
	     **
	     > Parameters
	     **
	     - x (number) x coordinate of the point
	     - y (number) y coordinate of the point
	     = (object) @Set
	    \*/
	    paperproto.getElementsByPoint = function (x, y) {
	        var set = this.set();
	        this.forEach(function (el) {
	            if (el.isPointInside(x, y)) {
	                set.push(el);
	            }
	        });
	        return set;
	    };
	    function x_y() {
	        return this.x + S + this.y;
	    }
	    function x_y_w_h() {
	        return this.x + S + this.y + S + this.width + " \xd7 " + this.height;
	    }
	    /*\
	     * Element.isPointInside
	     [ method ]
	     **
	     * Determine if given point is inside this elements shape
	     **
	     > Parameters
	     **
	     - x (number) x coordinate of the point
	     - y (number) y coordinate of the point
	     = (boolean) `true` if point inside the shape
	    \*/
	    elproto.isPointInside = function (x, y) {
	        var rp = this.realPath = getPath[this.type](this);
	        if (this.attr('transform') && this.attr('transform').length) {
	            rp = R.transformPath(rp, this.attr('transform'));
	        }
	        return R.isPointInsidePath(rp, x, y);
	    };
	    /*\
	     * Element.getBBox
	     [ method ]
	     **
	     * Return bounding box for a given element
	     **
	     > Parameters
	     **
	     - isWithoutTransform (boolean) flag, `true` if you want to have bounding box before transformations. Default is `false`.
	     = (object) Bounding box object:
	     o {
	     o     x: (number) top left corner x
	     o     y: (number) top left corner y
	     o     x2: (number) bottom right corner x
	     o     y2: (number) bottom right corner y
	     o     width: (number) width
	     o     height: (number) height
	     o }
	    \*/
	    elproto.getBBox = function (isWithoutTransform) {
	        if (this.removed) {
	            return {};
	        }
	        var _ = this._;
	        if (isWithoutTransform) {
	            if (_.dirty || !_.bboxwt) {
	                this.realPath = getPath[this.type](this);
	                _.bboxwt = pathDimensions(this.realPath);
	                _.bboxwt.toString = x_y_w_h;
	                _.dirty = 0;
	            }
	            return _.bboxwt;
	        }
	        if (_.dirty || _.dirtyT || !_.bbox) {
	            if (_.dirty || !this.realPath) {
	                _.bboxwt = 0;
	                this.realPath = getPath[this.type](this);
	            }
	            _.bbox = pathDimensions(mapPath(this.realPath, this.matrix));
	            _.bbox.toString = x_y_w_h;
	            _.dirty = _.dirtyT = 0;
	        }
	        return _.bbox;
	    };
	    /*\
	     * Element.clone
	     [ method ]
	     **
	     = (object) clone of a given element
	     **
	    \*/
	    elproto.clone = function () {
	        if (this.removed) {
	            return null;
	        }
	        var out = this.paper[this.type]().attr(this.attr());
	        this.__set__ && this.__set__.push(out);
	        return out;
	    };
	    /*\
	     * Element.glow
	     [ method ]
	     **
	     * Return set of elements that create glow-like effect around given element. See @Paper.set.
	     *
	     * Note: Glow is not connected to the element. If you change element attributes it wont adjust itself.
	     **
	     > Parameters
	     **
	     - glow (object) #optional parameters object with all properties optional:
	     o {
	     o     width (number) size of the glow, default is `10`
	     o     fill (boolean) will it be filled, default is `false`
	     o     opacity (number) opacity, default is `0.5`
	     o     offsetx (number) horizontal offset, default is `0`
	     o     offsety (number) vertical offset, default is `0`
	     o     color (string) glow colour, default is `black`
	     o }
	     = (object) @Paper.set of elements that represents glow
	    \*/
	    elproto.glow = function (glow) {
	        if (this.type == "text") {
	            return null;
	        }
	        glow = glow || {};
	        var s = {
	            width: (glow.width || 10) + (+this.attr("stroke-width") || 1),
	            fill: glow.fill || false,
	            opacity: glow.opacity == null ? .5 : glow.opacity,
	            offsetx: glow.offsetx || 0,
	            offsety: glow.offsety || 0,
	            color: glow.color || "#000"
	        },
	            c = s.width / 2,
	            r = this.paper,
	            out = r.set(),
	            path = this.realPath || getPath[this.type](this);
	        path = this.matrix ? mapPath(path, this.matrix) : path;
	        for (var i = 1; i < c + 1; i++) {
	            out.push(r.path(path).attr({
	                stroke: s.color,
	                fill: s.fill ? s.color : "none",
	                "stroke-linejoin": "round",
	                "stroke-linecap": "round",
	                "stroke-width": +(s.width / c * i).toFixed(3),
	                opacity: +(s.opacity / c).toFixed(3)
	            }));
	        }
	        return out.insertBefore(this).translate(s.offsetx, s.offsety);
	    };
	    var curveslengths = {},
	    getPointAtSegmentLength = function (p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length) {
	        if (length == null) {
	            return bezlen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y);
	        } else {
	            return R.findDotsAtSegment(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, getTatLen(p1x, p1y, c1x, c1y, c2x, c2y, p2x, p2y, length));
	        }
	    },
	    getLengthFactory = function (istotal, subpath) {
	        return function (path, length, onlystart) {
	            path = path2curve(path);
	            var x, y, p, l, sp = "", subpaths = {}, point,
	                len = 0;
	            for (var i = 0, ii = path.length; i < ii; i++) {
	                p = path[i];
	                if (p[0] == "M") {
	                    x = +p[1];
	                    y = +p[2];
	                } else {
	                    l = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6]);
	                    if (len + l > length) {
	                        if (subpath && !subpaths.start) {
	                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);
	                            sp += ["C" + point.start.x, point.start.y, point.m.x, point.m.y, point.x, point.y];
	                            if (onlystart) {return sp;}
	                            subpaths.start = sp;
	                            sp = ["M" + point.x, point.y + "C" + point.n.x, point.n.y, point.end.x, point.end.y, p[5], p[6]].join();
	                            len += l;
	                            x = +p[5];
	                            y = +p[6];
	                            continue;
	                        }
	                        if (!istotal && !subpath) {
	                            point = getPointAtSegmentLength(x, y, p[1], p[2], p[3], p[4], p[5], p[6], length - len);
	                            return {x: point.x, y: point.y, alpha: point.alpha};
	                        }
	                    }
	                    len += l;
	                    x = +p[5];
	                    y = +p[6];
	                }
	                sp += p.shift() + p;
	            }
	            subpaths.end = sp;
	            point = istotal ? len : subpath ? subpaths : R.findDotsAtSegment(x, y, p[0], p[1], p[2], p[3], p[4], p[5], 1);
	            point.alpha && (point = {x: point.x, y: point.y, alpha: point.alpha});
	            return point;
	        };
	    };
	    var getTotalLength = getLengthFactory(1),
	        getPointAtLength = getLengthFactory(),
	        getSubpathsAtLength = getLengthFactory(0, 1);
	    /*\
	     * Raphael.getTotalLength
	     [ method ]
	     **
	     * Returns length of the given path in pixels.
	     **
	     > Parameters
	     **
	     - path (string) SVG path string.
	     **
	     = (number) length.
	    \*/
	    R.getTotalLength = getTotalLength;
	    /*\
	     * Raphael.getPointAtLength
	     [ method ]
	     **
	     * Return coordinates of the point located at the given length on the given path.
	     **
	     > Parameters
	     **
	     - path (string) SVG path string
	     - length (number)
	     **
	     = (object) representation of the point:
	     o {
	     o     x: (number) x coordinate
	     o     y: (number) y coordinate
	     o     alpha: (number) angle of derivative
	     o }
	    \*/
	    R.getPointAtLength = getPointAtLength;
	    /*\
	     * Raphael.getSubpath
	     [ method ]
	     **
	     * Return subpath of a given path from given length to given length.
	     **
	     > Parameters
	     **
	     - path (string) SVG path string
	     - from (number) position of the start of the segment
	     - to (number) position of the end of the segment
	     **
	     = (string) pathstring for the segment
	    \*/
	    R.getSubpath = function (path, from, to) {
	        if (this.getTotalLength(path) - to < 1e-6) {
	            return getSubpathsAtLength(path, from).end;
	        }
	        var a = getSubpathsAtLength(path, to, 1);
	        return from ? getSubpathsAtLength(a, from).end : a;
	    };
	    /*\
	     * Element.getTotalLength
	     [ method ]
	     **
	     * Returns length of the path in pixels. Only works for element of path type.
	     = (number) length.
	    \*/
	    elproto.getTotalLength = function () {
	        var path = this.getPath();
	        if (!path) {
	            return;
	        }

	        if (this.node.getTotalLength) {
	            return this.node.getTotalLength();
	        }

	        return getTotalLength(path);
	    };
	    /*\
	     * Element.getPointAtLength
	     [ method ]
	     **
	     * Return coordinates of the point located at the given length on the given path. Only works for element of path type.
	     **
	     > Parameters
	     **
	     - length (number)
	     **
	     = (object) representation of the point:
	     o {
	     o     x: (number) x coordinate
	     o     y: (number) y coordinate
	     o     alpha: (number) angle of derivative
	     o }
	    \*/
	    elproto.getPointAtLength = function (length) {
	        var path = this.getPath();
	        if (!path) {
	            return;
	        }

	        return getPointAtLength(path, length);
	    };
	    /*\
	     * Element.getPath
	     [ method ]
	     **
	     * Returns path of the element. Only works for elements of path type and simple elements like circle.
	     = (object) path
	     **
	    \*/
	    elproto.getPath = function () {
	        var path,
	            getPath = R._getPath[this.type];

	        if (this.type == "text" || this.type == "set") {
	            return;
	        }

	        if (getPath) {
	            path = getPath(this);
	        }

	        return path;
	    };
	    /*\
	     * Element.getSubpath
	     [ method ]
	     **
	     * Return subpath of a given element from given length to given length. Only works for element of path type.
	     **
	     > Parameters
	     **
	     - from (number) position of the start of the segment
	     - to (number) position of the end of the segment
	     **
	     = (string) pathstring for the segment
	    \*/
	    elproto.getSubpath = function (from, to) {
	        var path = this.getPath();
	        if (!path) {
	            return;
	        }

	        return R.getSubpath(path, from, to);
	    };
	    /*\
	     * Raphael.easing_formulas
	     [ property ]
	     **
	     * Object that contains easing formulas for animation. You could extend it with your own. By default it has following list of easing:
	     # <ul>
	     #     <li>linear</li>
	     #     <li>&lt; or easeIn or ease-in</li>
	     #     <li>> or easeOut or ease-out</li>
	     #     <li>&lt;> or easeInOut or ease-in-out</li>
	     #     <li>backIn or back-in</li>
	     #     <li>backOut or back-out</li>
	     #     <li>elastic</li>
	     #     <li>bounce</li>
	     # </ul>
	     # <p>See also <a href="http://raphaeljs.com/easing.html">Easing demo</a>.</p>
	    \*/
	    var ef = R.easing_formulas = {
	        linear: function (n) {
	            return n;
	        },
	        "<": function (n) {
	            return pow(n, 1.7);
	        },
	        ">": function (n) {
	            return pow(n, .48);
	        },
	        "<>": function (n) {
	            var q = .48 - n / 1.04,
	                Q = math.sqrt(.1734 + q * q),
	                x = Q - q,
	                X = pow(abs(x), 1 / 3) * (x < 0 ? -1 : 1),
	                y = -Q - q,
	                Y = pow(abs(y), 1 / 3) * (y < 0 ? -1 : 1),
	                t = X + Y + .5;
	            return (1 - t) * 3 * t * t + t * t * t;
	        },
	        backIn: function (n) {
	            var s = 1.70158;
	            return n * n * ((s + 1) * n - s);
	        },
	        backOut: function (n) {
	            n = n - 1;
	            var s = 1.70158;
	            return n * n * ((s + 1) * n + s) + 1;
	        },
	        elastic: function (n) {
	            if (n == !!n) {
	                return n;
	            }
	            return pow(2, -10 * n) * math.sin((n - .075) * (2 * PI) / .3) + 1;
	        },
	        bounce: function (n) {
	            var s = 7.5625,
	                p = 2.75,
	                l;
	            if (n < (1 / p)) {
	                l = s * n * n;
	            } else {
	                if (n < (2 / p)) {
	                    n -= (1.5 / p);
	                    l = s * n * n + .75;
	                } else {
	                    if (n < (2.5 / p)) {
	                        n -= (2.25 / p);
	                        l = s * n * n + .9375;
	                    } else {
	                        n -= (2.625 / p);
	                        l = s * n * n + .984375;
	                    }
	                }
	            }
	            return l;
	        }
	    };
	    ef.easeIn = ef["ease-in"] = ef["<"];
	    ef.easeOut = ef["ease-out"] = ef[">"];
	    ef.easeInOut = ef["ease-in-out"] = ef["<>"];
	    ef["back-in"] = ef.backIn;
	    ef["back-out"] = ef.backOut;

	    var animationElements = [],
	        requestAnimFrame = window.requestAnimationFrame       ||
	                           window.webkitRequestAnimationFrame ||
	                           window.mozRequestAnimationFrame    ||
	                           window.oRequestAnimationFrame      ||
	                           window.msRequestAnimationFrame     ||
	                           function (callback) {
	                               setTimeout(callback, 16);
	                           },
	        animation = function () {
	            var Now = +new Date,
	                l = 0;
	            for (; l < animationElements.length; l++) {
	                var e = animationElements[l];
	                if (e.el.removed || e.paused) {
	                    continue;
	                }
	                var time = Now - e.start,
	                    ms = e.ms,
	                    easing = e.easing,
	                    from = e.from,
	                    diff = e.diff,
	                    to = e.to,
	                    t = e.t,
	                    that = e.el,
	                    set = {},
	                    now,
	                    init = {},
	                    key;
	                if (e.initstatus) {
	                    time = (e.initstatus * e.anim.top - e.prev) / (e.percent - e.prev) * ms;
	                    e.status = e.initstatus;
	                    delete e.initstatus;
	                    e.stop && animationElements.splice(l--, 1);
	                } else {
	                    e.status = (e.prev + (e.percent - e.prev) * (time / ms)) / e.anim.top;
	                }
	                if (time < 0) {
	                    continue;
	                }
	                if (time < ms) {
	                    var pos = easing(time / ms);
	                    for (var attr in from) if (from[has](attr)) {
	                        switch (availableAnimAttrs[attr]) {
	                            case nu:
	                                now = +from[attr] + pos * ms * diff[attr];
	                                break;
	                            case "colour":
	                                now = "rgb(" + [
	                                    upto255(round(from[attr].r + pos * ms * diff[attr].r)),
	                                    upto255(round(from[attr].g + pos * ms * diff[attr].g)),
	                                    upto255(round(from[attr].b + pos * ms * diff[attr].b))
	                                ].join(",") + ")";
	                                break;
	                            case "path":
	                                now = [];
	                                for (var i = 0, ii = from[attr].length; i < ii; i++) {
	                                    now[i] = [from[attr][i][0]];
	                                    for (var j = 1, jj = from[attr][i].length; j < jj; j++) {
	                                        now[i][j] = +from[attr][i][j] + pos * ms * diff[attr][i][j];
	                                    }
	                                    now[i] = now[i].join(S);
	                                }
	                                now = now.join(S);
	                                break;
	                            case "transform":
	                                if (diff[attr].real) {
	                                    now = [];
	                                    for (i = 0, ii = from[attr].length; i < ii; i++) {
	                                        now[i] = [from[attr][i][0]];
	                                        for (j = 1, jj = from[attr][i].length; j < jj; j++) {
	                                            now[i][j] = from[attr][i][j] + pos * ms * diff[attr][i][j];
	                                        }
	                                    }
	                                } else {
	                                    var get = function (i) {
	                                        return +from[attr][i] + pos * ms * diff[attr][i];
	                                    };
	                                    // now = [["r", get(2), 0, 0], ["t", get(3), get(4)], ["s", get(0), get(1), 0, 0]];
	                                    now = [["m", get(0), get(1), get(2), get(3), get(4), get(5)]];
	                                }
	                                break;
	                            case "csv":
	                                if (attr == "clip-rect") {
	                                    now = [];
	                                    i = 4;
	                                    while (i--) {
	                                        now[i] = +from[attr][i] + pos * ms * diff[attr][i];
	                                    }
	                                }
	                                break;
	                            default:
	                                var from2 = [][concat](from[attr]);
	                                now = [];
	                                i = that.paper.customAttributes[attr].length;
	                                while (i--) {
	                                    now[i] = +from2[i] + pos * ms * diff[attr][i];
	                                }
	                                break;
	                        }
	                        set[attr] = now;
	                    }
	                    that.attr(set);
	                    (function (id, that, anim) {
	                        setTimeout(function () {
	                            eve("raphael.anim.frame." + id, that, anim);
	                        });
	                    })(that.id, that, e.anim);
	                } else {
	                    (function(f, el, a) {
	                        setTimeout(function() {
	                            eve("raphael.anim.frame." + el.id, el, a);
	                            eve("raphael.anim.finish." + el.id, el, a);
	                            R.is(f, "function") && f.call(el);
	                        });
	                    })(e.callback, that, e.anim);
	                    that.attr(to);
	                    animationElements.splice(l--, 1);
	                    if (e.repeat > 1 && !e.next) {
	                        for (key in to) if (to[has](key)) {
	                            init[key] = e.totalOrigin[key];
	                        }
	                        e.el.attr(init);
	                        runAnimation(e.anim, e.el, e.anim.percents[0], null, e.totalOrigin, e.repeat - 1);
	                    }
	                    if (e.next && !e.stop) {
	                        runAnimation(e.anim, e.el, e.next, null, e.totalOrigin, e.repeat);
	                    }
	                }
	            }
	            animationElements.length && requestAnimFrame(animation);
	        },
	        upto255 = function (color) {
	            return color > 255 ? 255 : color < 0 ? 0 : color;
	        };
	    /*\
	     * Element.animateWith
	     [ method ]
	     **
	     * Acts similar to @Element.animate, but ensure that given animation runs in sync with another given element.
	     **
	     > Parameters
	     **
	     - el (object) element to sync with
	     - anim (object) animation to sync with
	     - params (object) #optional final attributes for the element, see also @Element.attr
	     - ms (number) #optional number of milliseconds for animation to run
	     - easing (string) #optional easing type. Accept on of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`
	     - callback (function) #optional callback function. Will be called at the end of animation.
	     * or
	     - element (object) element to sync with
	     - anim (object) animation to sync with
	     - animation (object) #optional animation object, see @Raphael.animation
	     **
	     = (object) original element
	    \*/
	    elproto.animateWith = function (el, anim, params, ms, easing, callback) {
	        var element = this;
	        if (element.removed) {
	            callback && callback.call(element);
	            return element;
	        }
	        var a = params instanceof Animation ? params : R.animation(params, ms, easing, callback),
	            x, y;
	        runAnimation(a, element, a.percents[0], null, element.attr());
	        for (var i = 0, ii = animationElements.length; i < ii; i++) {
	            if (animationElements[i].anim == anim && animationElements[i].el == el) {
	                animationElements[ii - 1].start = animationElements[i].start;
	                break;
	            }
	        }
	        return element;
	        //
	        //
	        // var a = params ? R.animation(params, ms, easing, callback) : anim,
	        //     status = element.status(anim);
	        // return this.animate(a).status(a, status * anim.ms / a.ms);
	    };
	    function CubicBezierAtTime(t, p1x, p1y, p2x, p2y, duration) {
	        var cx = 3 * p1x,
	            bx = 3 * (p2x - p1x) - cx,
	            ax = 1 - cx - bx,
	            cy = 3 * p1y,
	            by = 3 * (p2y - p1y) - cy,
	            ay = 1 - cy - by;
	        function sampleCurveX(t) {
	            return ((ax * t + bx) * t + cx) * t;
	        }
	        function solve(x, epsilon) {
	            var t = solveCurveX(x, epsilon);
	            return ((ay * t + by) * t + cy) * t;
	        }
	        function solveCurveX(x, epsilon) {
	            var t0, t1, t2, x2, d2, i;
	            for(t2 = x, i = 0; i < 8; i++) {
	                x2 = sampleCurveX(t2) - x;
	                if (abs(x2) < epsilon) {
	                    return t2;
	                }
	                d2 = (3 * ax * t2 + 2 * bx) * t2 + cx;
	                if (abs(d2) < 1e-6) {
	                    break;
	                }
	                t2 = t2 - x2 / d2;
	            }
	            t0 = 0;
	            t1 = 1;
	            t2 = x;
	            if (t2 < t0) {
	                return t0;
	            }
	            if (t2 > t1) {
	                return t1;
	            }
	            while (t0 < t1) {
	                x2 = sampleCurveX(t2);
	                if (abs(x2 - x) < epsilon) {
	                    return t2;
	                }
	                if (x > x2) {
	                    t0 = t2;
	                } else {
	                    t1 = t2;
	                }
	                t2 = (t1 - t0) / 2 + t0;
	            }
	            return t2;
	        }
	        return solve(t, 1 / (200 * duration));
	    }
	    elproto.onAnimation = function (f) {
	        f ? eve.on("raphael.anim.frame." + this.id, f) : eve.unbind("raphael.anim.frame." + this.id);
	        return this;
	    };
	    function Animation(anim, ms) {
	        var percents = [],
	            newAnim = {};
	        this.ms = ms;
	        this.times = 1;
	        if (anim) {
	            for (var attr in anim) if (anim[has](attr)) {
	                newAnim[toFloat(attr)] = anim[attr];
	                percents.push(toFloat(attr));
	            }
	            percents.sort(sortByNumber);
	        }
	        this.anim = newAnim;
	        this.top = percents[percents.length - 1];
	        this.percents = percents;
	    }
	    /*\
	     * Animation.delay
	     [ method ]
	     **
	     * Creates a copy of existing animation object with given delay.
	     **
	     > Parameters
	     **
	     - delay (number) number of ms to pass between animation start and actual animation
	     **
	     = (object) new altered Animation object
	     | var anim = Raphael.animation({cx: 10, cy: 20}, 2e3);
	     | circle1.animate(anim); // run the given animation immediately
	     | circle2.animate(anim.delay(500)); // run the given animation after 500 ms
	    \*/
	    Animation.prototype.delay = function (delay) {
	        var a = new Animation(this.anim, this.ms);
	        a.times = this.times;
	        a.del = +delay || 0;
	        return a;
	    };
	    /*\
	     * Animation.repeat
	     [ method ]
	     **
	     * Creates a copy of existing animation object with given repetition.
	     **
	     > Parameters
	     **
	     - repeat (number) number iterations of animation. For infinite animation pass `Infinity`
	     **
	     = (object) new altered Animation object
	    \*/
	    Animation.prototype.repeat = function (times) {
	        var a = new Animation(this.anim, this.ms);
	        a.del = this.del;
	        a.times = math.floor(mmax(times, 0)) || 1;
	        return a;
	    };
	    function runAnimation(anim, element, percent, status, totalOrigin, times) {
	        percent = toFloat(percent);
	        var params,
	            isInAnim,
	            isInAnimSet,
	            percents = [],
	            next,
	            prev,
	            timestamp,
	            ms = anim.ms,
	            from = {},
	            to = {},
	            diff = {};
	        if (status) {
	            for (i = 0, ii = animationElements.length; i < ii; i++) {
	                var e = animationElements[i];
	                if (e.el.id == element.id && e.anim == anim) {
	                    if (e.percent != percent) {
	                        animationElements.splice(i, 1);
	                        isInAnimSet = 1;
	                    } else {
	                        isInAnim = e;
	                    }
	                    element.attr(e.totalOrigin);
	                    break;
	                }
	            }
	        } else {
	            status = +to; // NaN
	        }
	        for (var i = 0, ii = anim.percents.length; i < ii; i++) {
	            if (anim.percents[i] == percent || anim.percents[i] > status * anim.top) {
	                percent = anim.percents[i];
	                prev = anim.percents[i - 1] || 0;
	                ms = ms / anim.top * (percent - prev);
	                next = anim.percents[i + 1];
	                params = anim.anim[percent];
	                break;
	            } else if (status) {
	                element.attr(anim.anim[anim.percents[i]]);
	            }
	        }
	        if (!params) {
	            return;
	        }
	        if (!isInAnim) {
	            for (var attr in params) if (params[has](attr)) {
	                if (availableAnimAttrs[has](attr) || element.paper.customAttributes[has](attr)) {
	                    from[attr] = element.attr(attr);
	                    (from[attr] == null) && (from[attr] = availableAttrs[attr]);
	                    to[attr] = params[attr];
	                    switch (availableAnimAttrs[attr]) {
	                        case nu:
	                            diff[attr] = (to[attr] - from[attr]) / ms;
	                            break;
	                        case "colour":
	                            from[attr] = R.getRGB(from[attr]);
	                            var toColour = R.getRGB(to[attr]);
	                            diff[attr] = {
	                                r: (toColour.r - from[attr].r) / ms,
	                                g: (toColour.g - from[attr].g) / ms,
	                                b: (toColour.b - from[attr].b) / ms
	                            };
	                            break;
	                        case "path":
	                            var pathes = path2curve(from[attr], to[attr]),
	                                toPath = pathes[1];
	                            from[attr] = pathes[0];
	                            diff[attr] = [];
	                            for (i = 0, ii = from[attr].length; i < ii; i++) {
	                                diff[attr][i] = [0];
	                                for (var j = 1, jj = from[attr][i].length; j < jj; j++) {
	                                    diff[attr][i][j] = (toPath[i][j] - from[attr][i][j]) / ms;
	                                }
	                            }
	                            break;
	                        case "transform":
	                            var _ = element._,
	                                eq = equaliseTransform(_[attr], to[attr]);
	                            if (eq) {
	                                from[attr] = eq.from;
	                                to[attr] = eq.to;
	                                diff[attr] = [];
	                                diff[attr].real = true;
	                                for (i = 0, ii = from[attr].length; i < ii; i++) {
	                                    diff[attr][i] = [from[attr][i][0]];
	                                    for (j = 1, jj = from[attr][i].length; j < jj; j++) {
	                                        diff[attr][i][j] = (to[attr][i][j] - from[attr][i][j]) / ms;
	                                    }
	                                }
	                            } else {
	                                var m = (element.matrix || new Matrix),
	                                    to2 = {
	                                        _: {transform: _.transform},
	                                        getBBox: function () {
	                                            return element.getBBox(1);
	                                        }
	                                    };
	                                from[attr] = [
	                                    m.a,
	                                    m.b,
	                                    m.c,
	                                    m.d,
	                                    m.e,
	                                    m.f
	                                ];
	                                extractTransform(to2, to[attr]);
	                                to[attr] = to2._.transform;
	                                diff[attr] = [
	                                    (to2.matrix.a - m.a) / ms,
	                                    (to2.matrix.b - m.b) / ms,
	                                    (to2.matrix.c - m.c) / ms,
	                                    (to2.matrix.d - m.d) / ms,
	                                    (to2.matrix.e - m.e) / ms,
	                                    (to2.matrix.f - m.f) / ms
	                                ];
	                                // from[attr] = [_.sx, _.sy, _.deg, _.dx, _.dy];
	                                // var to2 = {_:{}, getBBox: function () { return element.getBBox(); }};
	                                // extractTransform(to2, to[attr]);
	                                // diff[attr] = [
	                                //     (to2._.sx - _.sx) / ms,
	                                //     (to2._.sy - _.sy) / ms,
	                                //     (to2._.deg - _.deg) / ms,
	                                //     (to2._.dx - _.dx) / ms,
	                                //     (to2._.dy - _.dy) / ms
	                                // ];
	                            }
	                            break;
	                        case "csv":
	                            var values = Str(params[attr])[split](separator),
	                                from2 = Str(from[attr])[split](separator);
	                            if (attr == "clip-rect") {
	                                from[attr] = from2;
	                                diff[attr] = [];
	                                i = from2.length;
	                                while (i--) {
	                                    diff[attr][i] = (values[i] - from[attr][i]) / ms;
	                                }
	                            }
	                            to[attr] = values;
	                            break;
	                        default:
	                            values = [][concat](params[attr]);
	                            from2 = [][concat](from[attr]);
	                            diff[attr] = [];
	                            i = element.paper.customAttributes[attr].length;
	                            while (i--) {
	                                diff[attr][i] = ((values[i] || 0) - (from2[i] || 0)) / ms;
	                            }
	                            break;
	                    }
	                }
	            }
	            var easing = params.easing,
	                easyeasy = R.easing_formulas[easing];
	            if (!easyeasy) {
	                easyeasy = Str(easing).match(bezierrg);
	                if (easyeasy && easyeasy.length == 5) {
	                    var curve = easyeasy;
	                    easyeasy = function (t) {
	                        return CubicBezierAtTime(t, +curve[1], +curve[2], +curve[3], +curve[4], ms);
	                    };
	                } else {
	                    easyeasy = pipe;
	                }
	            }
	            timestamp = params.start || anim.start || +new Date;
	            e = {
	                anim: anim,
	                percent: percent,
	                timestamp: timestamp,
	                start: timestamp + (anim.del || 0),
	                status: 0,
	                initstatus: status || 0,
	                stop: false,
	                ms: ms,
	                easing: easyeasy,
	                from: from,
	                diff: diff,
	                to: to,
	                el: element,
	                callback: params.callback,
	                prev: prev,
	                next: next,
	                repeat: times || anim.times,
	                origin: element.attr(),
	                totalOrigin: totalOrigin
	            };
	            animationElements.push(e);
	            if (status && !isInAnim && !isInAnimSet) {
	                e.stop = true;
	                e.start = new Date - ms * status;
	                if (animationElements.length == 1) {
	                    return animation();
	                }
	            }
	            if (isInAnimSet) {
	                e.start = new Date - e.ms * status;
	            }
	            animationElements.length == 1 && requestAnimFrame(animation);
	        } else {
	            isInAnim.initstatus = status;
	            isInAnim.start = new Date - isInAnim.ms * status;
	        }
	        eve("raphael.anim.start." + element.id, element, anim);
	    }
	    /*\
	     * Raphael.animation
	     [ method ]
	     **
	     * Creates an animation object that can be passed to the @Element.animate or @Element.animateWith methods.
	     * See also @Animation.delay and @Animation.repeat methods.
	     **
	     > Parameters
	     **
	     - params (object) final attributes for the element, see also @Element.attr
	     - ms (number) number of milliseconds for animation to run
	     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`
	     - callback (function) #optional callback function. Will be called at the end of animation.
	     **
	     = (object) @Animation
	    \*/
	    R.animation = function (params, ms, easing, callback) {
	        if (params instanceof Animation) {
	            return params;
	        }
	        if (R.is(easing, "function") || !easing) {
	            callback = callback || easing || null;
	            easing = null;
	        }
	        params = Object(params);
	        ms = +ms || 0;
	        var p = {},
	            json,
	            attr;
	        for (attr in params) if (params[has](attr) && toFloat(attr) != attr && toFloat(attr) + "%" != attr) {
	            json = true;
	            p[attr] = params[attr];
	        }
	        if (!json) {
	            // if percent-like syntax is used and end-of-all animation callback used
	            if(callback){
	                // find the last one
	                var lastKey = 0;
	                for(var i in params){
	                    var percent = toInt(i);
	                    if(params[has](i) && percent > lastKey){
	                        lastKey = percent;
	                    }
	                }
	                lastKey += '%';
	                // if already defined callback in the last keyframe, skip
	                !params[lastKey].callback && (params[lastKey].callback = callback);
	            }
	          return new Animation(params, ms);
	        } else {
	            easing && (p.easing = easing);
	            callback && (p.callback = callback);
	            return new Animation({100: p}, ms);
	        }
	    };
	    /*\
	     * Element.animate
	     [ method ]
	     **
	     * Creates and starts animation for given element.
	     **
	     > Parameters
	     **
	     - params (object) final attributes for the element, see also @Element.attr
	     - ms (number) number of milliseconds for animation to run
	     - easing (string) #optional easing type. Accept one of @Raphael.easing_formulas or CSS format: `cubic&#x2010;bezier(XX,&#160;XX,&#160;XX,&#160;XX)`
	     - callback (function) #optional callback function. Will be called at the end of animation.
	     * or
	     - animation (object) animation object, see @Raphael.animation
	     **
	     = (object) original element
	    \*/
	    elproto.animate = function (params, ms, easing, callback) {
	        var element = this;
	        if (element.removed) {
	            callback && callback.call(element);
	            return element;
	        }
	        var anim = params instanceof Animation ? params : R.animation(params, ms, easing, callback);
	        runAnimation(anim, element, anim.percents[0], null, element.attr());
	        return element;
	    };
	    /*\
	     * Element.setTime
	     [ method ]
	     **
	     * Sets the status of animation of the element in milliseconds. Similar to @Element.status method.
	     **
	     > Parameters
	     **
	     - anim (object) animation object
	     - value (number) number of milliseconds from the beginning of the animation
	     **
	     = (object) original element if `value` is specified
	     * Note, that during animation following events are triggered:
	     *
	     * On each animation frame event `anim.frame.<id>`, on start `anim.start.<id>` and on end `anim.finish.<id>`.
	    \*/
	    elproto.setTime = function (anim, value) {
	        if (anim && value != null) {
	            this.status(anim, mmin(value, anim.ms) / anim.ms);
	        }
	        return this;
	    };
	    /*\
	     * Element.status
	     [ method ]
	     **
	     * Gets or sets the status of animation of the element.
	     **
	     > Parameters
	     **
	     - anim (object) #optional animation object
	     - value (number) #optional 0  1. If specified, method works like a setter and sets the status of a given animation to the value. This will cause animation to jump to the given position.
	     **
	     = (number) status
	     * or
	     = (array) status if `anim` is not specified. Array of objects in format:
	     o {
	     o     anim: (object) animation object
	     o     status: (number) status
	     o }
	     * or
	     = (object) original element if `value` is specified
	    \*/
	    elproto.status = function (anim, value) {
	        var out = [],
	            i = 0,
	            len,
	            e;
	        if (value != null) {
	            runAnimation(anim, this, -1, mmin(value, 1));
	            return this;
	        } else {
	            len = animationElements.length;
	            for (; i < len; i++) {
	                e = animationElements[i];
	                if (e.el.id == this.id && (!anim || e.anim == anim)) {
	                    if (anim) {
	                        return e.status;
	                    }
	                    out.push({
	                        anim: e.anim,
	                        status: e.status
	                    });
	                }
	            }
	            if (anim) {
	                return 0;
	            }
	            return out;
	        }
	    };
	    /*\
	     * Element.pause
	     [ method ]
	     **
	     * Stops animation of the element with ability to resume it later on.
	     **
	     > Parameters
	     **
	     - anim (object) #optional animation object
	     **
	     = (object) original element
	    \*/
	    elproto.pause = function (anim) {
	        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {
	            if (eve("raphael.anim.pause." + this.id, this, animationElements[i].anim) !== false) {
	                animationElements[i].paused = true;
	            }
	        }
	        return this;
	    };
	    /*\
	     * Element.resume
	     [ method ]
	     **
	     * Resumes animation if it was paused with @Element.pause method.
	     **
	     > Parameters
	     **
	     - anim (object) #optional animation object
	     **
	     = (object) original element
	    \*/
	    elproto.resume = function (anim) {
	        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {
	            var e = animationElements[i];
	            if (eve("raphael.anim.resume." + this.id, this, e.anim) !== false) {
	                delete e.paused;
	                this.status(e.anim, e.status);
	            }
	        }
	        return this;
	    };
	    /*\
	     * Element.stop
	     [ method ]
	     **
	     * Stops animation of the element.
	     **
	     > Parameters
	     **
	     - anim (object) #optional animation object
	     **
	     = (object) original element
	    \*/
	    elproto.stop = function (anim) {
	        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.id == this.id && (!anim || animationElements[i].anim == anim)) {
	            if (eve("raphael.anim.stop." + this.id, this, animationElements[i].anim) !== false) {
	                animationElements.splice(i--, 1);
	            }
	        }
	        return this;
	    };
	    function stopAnimation(paper) {
	        for (var i = 0; i < animationElements.length; i++) if (animationElements[i].el.paper == paper) {
	            animationElements.splice(i--, 1);
	        }
	    }
	    eve.on("raphael.remove", stopAnimation);
	    eve.on("raphael.clear", stopAnimation);
	    elproto.toString = function () {
	        return "Rapha\xebl\u2019s object";
	    };

	    // Set
	    var Set = function (items) {
	        this.items = [];
	        this.length = 0;
	        this.type = "set";
	        if (items) {
	            for (var i = 0, ii = items.length; i < ii; i++) {
	                if (items[i] && (items[i].constructor == elproto.constructor || items[i].constructor == Set)) {
	                    this[this.items.length] = this.items[this.items.length] = items[i];
	                    this.length++;
	                }
	            }
	        }
	    },
	    setproto = Set.prototype;
	    /*\
	     * Set.push
	     [ method ]
	     **
	     * Adds each argument to the current set.
	     = (object) original element
	    \*/
	    setproto.push = function () {
	        var item,
	            len;
	        for (var i = 0, ii = arguments.length; i < ii; i++) {
	            item = arguments[i];
	            if (item && (item.constructor == elproto.constructor || item.constructor == Set)) {
	                len = this.items.length;
	                this[len] = this.items[len] = item;
	                this.length++;
	            }
	        }
	        return this;
	    };
	    /*\
	     * Set.pop
	     [ method ]
	     **
	     * Removes last element and returns it.
	     = (object) element
	    \*/
	    setproto.pop = function () {
	        this.length && delete this[this.length--];
	        return this.items.pop();
	    };
	    /*\
	     * Set.forEach
	     [ method ]
	     **
	     * Executes given function for each element in the set.
	     *
	     * If function returns `false` it will stop loop running.
	     **
	     > Parameters
	     **
	     - callback (function) function to run
	     - thisArg (object) context object for the callback
	     = (object) Set object
	    \*/
	    setproto.forEach = function (callback, thisArg) {
	        for (var i = 0, ii = this.items.length; i < ii; i++) {
	            if (callback.call(thisArg, this.items[i], i) === false) {
	                return this;
	            }
	        }
	        return this;
	    };
	    for (var method in elproto) if (elproto[has](method)) {
	        setproto[method] = (function (methodname) {
	            return function () {
	                var arg = arguments;
	                return this.forEach(function (el) {
	                    el[methodname][apply](el, arg);
	                });
	            };
	        })(method);
	    }
	    setproto.attr = function (name, value) {
	        if (name && R.is(name, array) && R.is(name[0], "object")) {
	            for (var j = 0, jj = name.length; j < jj; j++) {
	                this.items[j].attr(name[j]);
	            }
	        } else {
	            for (var i = 0, ii = this.items.length; i < ii; i++) {
	                this.items[i].attr(name, value);
	            }
	        }
	        return this;
	    };
	    /*\
	     * Set.clear
	     [ method ]
	     **
	     * Removes all elements from the set
	    \*/
	    setproto.clear = function () {
	        while (this.length) {
	            this.pop();
	        }
	    };
	    /*\
	     * Set.splice
	     [ method ]
	     **
	     * Removes given element from the set
	     **
	     > Parameters
	     **
	     - index (number) position of the deletion
	     - count (number) number of element to remove
	     - insertion (object) #optional elements to insert
	     = (object) set elements that were deleted
	    \*/
	    setproto.splice = function (index, count, insertion) {
	        index = index < 0 ? mmax(this.length + index, 0) : index;
	        count = mmax(0, mmin(this.length - index, count));
	        var tail = [],
	            todel = [],
	            args = [],
	            i;
	        for (i = 2; i < arguments.length; i++) {
	            args.push(arguments[i]);
	        }
	        for (i = 0; i < count; i++) {
	            todel.push(this[index + i]);
	        }
	        for (; i < this.length - index; i++) {
	            tail.push(this[index + i]);
	        }
	        var arglen = args.length;
	        for (i = 0; i < arglen + tail.length; i++) {
	            this.items[index + i] = this[index + i] = i < arglen ? args[i] : tail[i - arglen];
	        }
	        i = this.items.length = this.length -= count - arglen;
	        while (this[i]) {
	            delete this[i++];
	        }
	        return new Set(todel);
	    };
	    /*\
	     * Set.exclude
	     [ method ]
	     **
	     * Removes given element from the set
	     **
	     > Parameters
	     **
	     - element (object) element to remove
	     = (boolean) `true` if object was found & removed from the set
	    \*/
	    setproto.exclude = function (el) {
	        for (var i = 0, ii = this.length; i < ii; i++) if (this[i] == el) {
	            this.splice(i, 1);
	            return true;
	        }
	    };
	    setproto.animate = function (params, ms, easing, callback) {
	        (R.is(easing, "function") || !easing) && (callback = easing || null);
	        var len = this.items.length,
	            i = len,
	            item,
	            set = this,
	            collector;
	        if (!len) {
	            return this;
	        }
	        callback && (collector = function () {
	            !--len && callback.call(set);
	        });
	        easing = R.is(easing, string) ? easing : collector;
	        var anim = R.animation(params, ms, easing, collector);
	        item = this.items[--i].animate(anim);
	        while (i--) {
	            this.items[i] && !this.items[i].removed && this.items[i].animateWith(item, anim, anim);
	            (this.items[i] && !this.items[i].removed) || len--;
	        }
	        return this;
	    };
	    setproto.insertAfter = function (el) {
	        var i = this.items.length;
	        while (i--) {
	            this.items[i].insertAfter(el);
	        }
	        return this;
	    };
	    setproto.getBBox = function () {
	        var x = [],
	            y = [],
	            x2 = [],
	            y2 = [];
	        for (var i = this.items.length; i--;) if (!this.items[i].removed) {
	            var box = this.items[i].getBBox();
	            x.push(box.x);
	            y.push(box.y);
	            x2.push(box.x + box.width);
	            y2.push(box.y + box.height);
	        }
	        x = mmin[apply](0, x);
	        y = mmin[apply](0, y);
	        x2 = mmax[apply](0, x2);
	        y2 = mmax[apply](0, y2);
	        return {
	            x: x,
	            y: y,
	            x2: x2,
	            y2: y2,
	            width: x2 - x,
	            height: y2 - y
	        };
	    };
	    setproto.clone = function (s) {
	        s = this.paper.set();
	        for (var i = 0, ii = this.items.length; i < ii; i++) {
	            s.push(this.items[i].clone());
	        }
	        return s;
	    };
	    setproto.toString = function () {
	        return "Rapha\xebl\u2018s set";
	    };

	    setproto.glow = function(glowConfig) {
	        var ret = this.paper.set();
	        this.forEach(function(shape, index){
	            var g = shape.glow(glowConfig);
	            if(g != null){
	                g.forEach(function(shape2, index2){
	                    ret.push(shape2);
	                });
	            }
	        });
	        return ret;
	    };


	    /*\
	     * Set.isPointInside
	     [ method ]
	     **
	     * Determine if given point is inside this sets elements
	     **
	     > Parameters
	     **
	     - x (number) x coordinate of the point
	     - y (number) y coordinate of the point
	     = (boolean) `true` if point is inside any of the set's elements
	     \*/
	    setproto.isPointInside = function (x, y) {
	        var isPointInside = false;
	        this.forEach(function (el) {
	            if (el.isPointInside(x, y)) {
	                isPointInside = true;
	                return false; // stop loop
	            }
	        });
	        return isPointInside;
	    };

	    /*\
	     * Raphael.registerFont
	     [ method ]
	     **
	     * Adds given font to the registered set of fonts for Raphal. Should be used as an internal call from within Cufns font file.
	     * Returns original parameter, so it could be used with chaining.
	     # <a href="http://wiki.github.com/sorccu/cufon/about">More about Cufn and how to convert your font form TTF, OTF, etc to JavaScript file.</a>
	     **
	     > Parameters
	     **
	     - font (object) the font to register
	     = (object) the font you passed in
	     > Usage
	     | Cufon.registerFont(Raphael.registerFont({}));
	    \*/
	    R.registerFont = function (font) {
	        if (!font.face) {
	            return font;
	        }
	        this.fonts = this.fonts || {};
	        var fontcopy = {
	                w: font.w,
	                face: {},
	                glyphs: {}
	            },
	            family = font.face["font-family"];
	        for (var prop in font.face) if (font.face[has](prop)) {
	            fontcopy.face[prop] = font.face[prop];
	        }
	        if (this.fonts[family]) {
	            this.fonts[family].push(fontcopy);
	        } else {
	            this.fonts[family] = [fontcopy];
	        }
	        if (!font.svg) {
	            fontcopy.face["units-per-em"] = toInt(font.face["units-per-em"], 10);
	            for (var glyph in font.glyphs) if (font.glyphs[has](glyph)) {
	                var path = font.glyphs[glyph];
	                fontcopy.glyphs[glyph] = {
	                    w: path.w,
	                    k: {},
	                    d: path.d && "M" + path.d.replace(/[mlcxtrv]/g, function (command) {
	                            return {l: "L", c: "C", x: "z", t: "m", r: "l", v: "c"}[command] || "M";
	                        }) + "z"
	                };
	                if (path.k) {
	                    for (var k in path.k) if (path[has](k)) {
	                        fontcopy.glyphs[glyph].k[k] = path.k[k];
	                    }
	                }
	            }
	        }
	        return font;
	    };
	    /*\
	     * Paper.getFont
	     [ method ]
	     **
	     * Finds font object in the registered fonts by given parameters. You could specify only one word from the font name, like Myriad for Myriad Pro.
	     **
	     > Parameters
	     **
	     - family (string) font family name or any word from it
	     - weight (string) #optional font weight
	     - style (string) #optional font style
	     - stretch (string) #optional font stretch
	     = (object) the font object
	     > Usage
	     | paper.print(100, 100, "Test string", paper.getFont("Times", 800), 30);
	    \*/
	    paperproto.getFont = function (family, weight, style, stretch) {
	        stretch = stretch || "normal";
	        style = style || "normal";
	        weight = +weight || {normal: 400, bold: 700, lighter: 300, bolder: 800}[weight] || 400;
	        if (!R.fonts) {
	            return;
	        }
	        var font = R.fonts[family];
	        if (!font) {
	            var name = new RegExp("(^|\\s)" + family.replace(/[^\w\d\s+!~.:_-]/g, E) + "(\\s|$)", "i");
	            for (var fontName in R.fonts) if (R.fonts[has](fontName)) {
	                if (name.test(fontName)) {
	                    font = R.fonts[fontName];
	                    break;
	                }
	            }
	        }
	        var thefont;
	        if (font) {
	            for (var i = 0, ii = font.length; i < ii; i++) {
	                thefont = font[i];
	                if (thefont.face["font-weight"] == weight && (thefont.face["font-style"] == style || !thefont.face["font-style"]) && thefont.face["font-stretch"] == stretch) {
	                    break;
	                }
	            }
	        }
	        return thefont;
	    };
	    /*\
	     * Paper.print
	     [ method ]
	     **
	     * Creates path that represent given text written using given font at given position with given size.
	     * Result of the method is path element that contains whole text as a separate path.
	     **
	     > Parameters
	     **
	     - x (number) x position of the text
	     - y (number) y position of the text
	     - string (string) text to print
	     - font (object) font object, see @Paper.getFont
	     - size (number) #optional size of the font, default is `16`
	     - origin (string) #optional could be `"baseline"` or `"middle"`, default is `"middle"`
	     - letter_spacing (number) #optional number in range `-1..1`, default is `0`
	     - line_spacing (number) #optional number in range `1..3`, default is `1`
	     = (object) resulting path element, which consist of all letters
	     > Usage
	     | var txt = r.print(10, 50, "print", r.getFont("Museo"), 30).attr({fill: "#fff"});
	    \*/
	    paperproto.print = function (x, y, string, font, size, origin, letter_spacing, line_spacing) {
	        origin = origin || "middle"; // baseline|middle
	        letter_spacing = mmax(mmin(letter_spacing || 0, 1), -1);
	        line_spacing = mmax(mmin(line_spacing || 1, 3), 1);
	        var letters = Str(string)[split](E),
	            shift = 0,
	            notfirst = 0,
	            path = E,
	            scale;
	        R.is(font, "string") && (font = this.getFont(font));
	        if (font) {
	            scale = (size || 16) / font.face["units-per-em"];
	            var bb = font.face.bbox[split](separator),
	                top = +bb[0],
	                lineHeight = bb[3] - bb[1],
	                shifty = 0,
	                height = +bb[1] + (origin == "baseline" ? lineHeight + (+font.face.descent) : lineHeight / 2);
	            for (var i = 0, ii = letters.length; i < ii; i++) {
	                if (letters[i] == "\n") {
	                    shift = 0;
	                    curr = 0;
	                    notfirst = 0;
	                    shifty += lineHeight * line_spacing;
	                } else {
	                    var prev = notfirst && font.glyphs[letters[i - 1]] || {},
	                        curr = font.glyphs[letters[i]];
	                    shift += notfirst ? (prev.w || font.w) + (prev.k && prev.k[letters[i]] || 0) + (font.w * letter_spacing) : 0;
	                    notfirst = 1;
	                }
	                if (curr && curr.d) {
	                    path += R.transformPath(curr.d, ["t", shift * scale, shifty * scale, "s", scale, scale, top, height, "t", (x - top) / scale, (y - height) / scale]);
	                }
	            }
	        }
	        return this.path(path).attr({
	            fill: "#000",
	            stroke: "none"
	        });
	    };

	    /*\
	     * Paper.add
	     [ method ]
	     **
	     * Imports elements in JSON array in format `{type: type, <attributes>}`
	     **
	     > Parameters
	     **
	     - json (array)
	     = (object) resulting set of imported elements
	     > Usage
	     | paper.add([
	     |     {
	     |         type: "circle",
	     |         cx: 10,
	     |         cy: 10,
	     |         r: 5
	     |     },
	     |     {
	     |         type: "rect",
	     |         x: 10,
	     |         y: 10,
	     |         width: 10,
	     |         height: 10,
	     |         fill: "#fc0"
	     |     }
	     | ]);
	    \*/
	    paperproto.add = function (json) {
	        if (R.is(json, "array")) {
	            var res = this.set(),
	                i = 0,
	                ii = json.length,
	                j;
	            for (; i < ii; i++) {
	                j = json[i] || {};
	                elements[has](j.type) && res.push(this[j.type]().attr(j));
	            }
	        }
	        return res;
	    };

	    /*\
	     * Raphael.format
	     [ method ]
	     **
	     * Simple format function. Replaces construction of type `{<number>}` to the corresponding argument.
	     **
	     > Parameters
	     **
	     - token (string) string to format
	     -  (string) rest of arguments will be treated as parameters for replacement
	     = (string) formated string
	     > Usage
	     | var x = 10,
	     |     y = 20,
	     |     width = 40,
	     |     height = 50;
	     | // this will draw a rectangular shape equivalent to "M10,20h40v50h-40z"
	     | paper.path(Raphael.format("M{0},{1}h{2}v{3}h{4}z", x, y, width, height, -width));
	    \*/
	    R.format = function (token, params) {
	        var args = R.is(params, array) ? [0][concat](params) : arguments;
	        token && R.is(token, string) && args.length - 1 && (token = token.replace(formatrg, function (str, i) {
	            return args[++i] == null ? E : args[i];
	        }));
	        return token || E;
	    };
	    /*\
	     * Raphael.fullfill
	     [ method ]
	     **
	     * A little bit more advanced format function than @Raphael.format. Replaces construction of type `{<name>}` to the corresponding argument.
	     **
	     > Parameters
	     **
	     - token (string) string to format
	     - json (object) object which properties will be used as a replacement
	     = (string) formated string
	     > Usage
	     | // this will draw a rectangular shape equivalent to "M10,20h40v50h-40z"
	     | paper.path(Raphael.fullfill("M{x},{y}h{dim.width}v{dim.height}h{dim['negative width']}z", {
	     |     x: 10,
	     |     y: 20,
	     |     dim: {
	     |         width: 40,
	     |         height: 50,
	     |         "negative width": -40
	     |     }
	     | }));
	    \*/
	    R.fullfill = (function () {
	        var tokenRegex = /\{([^\}]+)\}/g,
	            objNotationRegex = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g, // matches .xxxxx or ["xxxxx"] to run over object properties
	            replacer = function (all, key, obj) {
	                var res = obj;
	                key.replace(objNotationRegex, function (all, name, quote, quotedName, isFunc) {
	                    name = name || quotedName;
	                    if (res) {
	                        if (name in res) {
	                            res = res[name];
	                        }
	                        typeof res == "function" && isFunc && (res = res());
	                    }
	                });
	                res = (res == null || res == obj ? all : res) + "";
	                return res;
	            };
	        return function (str, obj) {
	            return String(str).replace(tokenRegex, function (all, key) {
	                return replacer(all, key, obj);
	            });
	        };
	    })();
	    /*\
	     * Raphael.ninja
	     [ method ]
	     **
	     * If you want to leave no trace of Raphal (Well, Raphal creates only one global variable `Raphael`, but anyway.) You can use `ninja` method.
	     * Beware, that in this case plugins could stop working, because they are depending on global variable existence.
	     **
	     = (object) Raphael object
	     > Usage
	     | (function (local_raphael) {
	     |     var paper = local_raphael(10, 10, 320, 200);
	     |     
	     | })(Raphael.ninja());
	    \*/
	    R.ninja = function () {
	        if (oldRaphael.was) {
	            g.win.Raphael = oldRaphael.is;
	        } else {
	            // IE8 raises an error when deleting window property
	            window.Raphael = undefined;
	            try {
	                delete window.Raphael;
	            } catch(e) {}
	        }
	        return R;
	    };
	    /*\
	     * Raphael.st
	     [ property (object) ]
	     **
	     * You can add your own method to elements and sets. It is wise to add a set method for each element method
	     * you added, so you will be able to call the same method on sets too.
	     **
	     * See also @Raphael.el.
	     > Usage
	     | Raphael.el.red = function () {
	     |     this.attr({fill: "#f00"});
	     | };
	     | Raphael.st.red = function () {
	     |     this.forEach(function (el) {
	     |         el.red();
	     |     });
	     | };
	     | // then use it
	     | paper.set(paper.circle(100, 100, 20), paper.circle(110, 100, 20)).red();
	    \*/
	    R.st = setproto;

	    eve.on("raphael.DOMload", function () {
	        loaded = true;
	    });

	    // Firefox <3.6 fix: http://webreflection.blogspot.com/2009/11/195-chars-to-help-lazy-loading.html
	    (function (doc, loaded, f) {
	        if (doc.readyState == null && doc.addEventListener){
	            doc.addEventListener(loaded, f = function () {
	                doc.removeEventListener(loaded, f, false);
	                doc.readyState = "complete";
	            }, false);
	            doc.readyState = "loading";
	        }
	        function isLoaded() {
	            (/in/).test(doc.readyState) ? setTimeout(isLoaded, 9) : R.eve("raphael.DOMload");
	        }
	        isLoaded();
	    })(document, "DOMContentLoaded");

	    return R;
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;// Copyright (c) 2013 Adobe Systems Incorporated. All rights reserved.
	// 
	// Licensed under the Apache License, Version 2.0 (the "License");
	// you may not use this file except in compliance with the License.
	// You may obtain a copy of the License at
	// 
	// http://www.apache.org/licenses/LICENSE-2.0
	// 
	// Unless required by applicable law or agreed to in writing, software
	// distributed under the License is distributed on an "AS IS" BASIS,
	// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
	// See the License for the specific language governing permissions and
	// limitations under the License.
	//  \\
	//  Eve 0.4.2 - JavaScript Events Library                       \\
	//  \\
	//  Author Dmitry Baranovskiy (http://dmitry.baranovskiy.com/)  \\
	//  \\

	(function (glob) {
	    var version = "0.4.2",
	        has = "hasOwnProperty",
	        separator = /[\.\/]/,
	        wildcard = "*",
	        fun = function () {},
	        numsort = function (a, b) {
	            return a - b;
	        },
	        current_event,
	        stop,
	        events = {n: {}},
	    /*\
	     * eve
	     [ method ]

	     * Fires event with given `name`, given scope and other parameters.

	     > Arguments

	     - name (string) name of the *event*, dot (`.`) or slash (`/`) separated
	     - scope (object) context for the event handlers
	     - varargs (...) the rest of arguments will be sent to event handlers

	     = (object) array of returned values from the listeners
	    \*/
	        eve = function (name, scope) {
				name = String(name);
	            var e = events,
	                oldstop = stop,
	                args = Array.prototype.slice.call(arguments, 2),
	                listeners = eve.listeners(name),
	                z = 0,
	                f = false,
	                l,
	                indexed = [],
	                queue = {},
	                out = [],
	                ce = current_event,
	                errors = [];
	            current_event = name;
	            stop = 0;
	            for (var i = 0, ii = listeners.length; i < ii; i++) if ("zIndex" in listeners[i]) {
	                indexed.push(listeners[i].zIndex);
	                if (listeners[i].zIndex < 0) {
	                    queue[listeners[i].zIndex] = listeners[i];
	                }
	            }
	            indexed.sort(numsort);
	            while (indexed[z] < 0) {
	                l = queue[indexed[z++]];
	                out.push(l.apply(scope, args));
	                if (stop) {
	                    stop = oldstop;
	                    return out;
	                }
	            }
	            for (i = 0; i < ii; i++) {
	                l = listeners[i];
	                if ("zIndex" in l) {
	                    if (l.zIndex == indexed[z]) {
	                        out.push(l.apply(scope, args));
	                        if (stop) {
	                            break;
	                        }
	                        do {
	                            z++;
	                            l = queue[indexed[z]];
	                            l && out.push(l.apply(scope, args));
	                            if (stop) {
	                                break;
	                            }
	                        } while (l)
	                    } else {
	                        queue[l.zIndex] = l;
	                    }
	                } else {
	                    out.push(l.apply(scope, args));
	                    if (stop) {
	                        break;
	                    }
	                }
	            }
	            stop = oldstop;
	            current_event = ce;
	            return out.length ? out : null;
	        };
			// Undocumented. Debug only.
			eve._events = events;
	    /*\
	     * eve.listeners
	     [ method ]

	     * Internal method which gives you array of all event handlers that will be triggered by the given `name`.

	     > Arguments

	     - name (string) name of the event, dot (`.`) or slash (`/`) separated

	     = (array) array of event handlers
	    \*/
	    eve.listeners = function (name) {
	        var names = name.split(separator),
	            e = events,
	            item,
	            items,
	            k,
	            i,
	            ii,
	            j,
	            jj,
	            nes,
	            es = [e],
	            out = [];
	        for (i = 0, ii = names.length; i < ii; i++) {
	            nes = [];
	            for (j = 0, jj = es.length; j < jj; j++) {
	                e = es[j].n;
	                items = [e[names[i]], e[wildcard]];
	                k = 2;
	                while (k--) {
	                    item = items[k];
	                    if (item) {
	                        nes.push(item);
	                        out = out.concat(item.f || []);
	                    }
	                }
	            }
	            es = nes;
	        }
	        return out;
	    };
	    
	    /*\
	     * eve.on
	     [ method ]
	     **
	     * Binds given event handler with a given name. You can use wildcards `*` for the names:
	     | eve.on("*.under.*", f);
	     | eve("mouse.under.floor"); // triggers f
	     * Use @eve to trigger the listener.
	     **
	     > Arguments
	     **
	     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards
	     - f (function) event handler function
	     **
	     = (function) returned function accepts a single numeric parameter that represents z-index of the handler. It is an optional feature and only used when you need to ensure that some subset of handlers will be invoked in a given order, despite of the order of assignment. 
	     > Example:
	     | eve.on("mouse", eatIt)(2);
	     | eve.on("mouse", scream);
	     | eve.on("mouse", catchIt)(1);
	     * This will ensure that `catchIt()` function will be called before `eatIt()`.
		 *
	     * If you want to put your handler before non-indexed handlers, specify a negative value.
	     * Note: I assume most of the time you dont need to worry about z-index, but its nice to have this feature just in case.
	    \*/
	    eve.on = function (name, f) {
			name = String(name);
			if (typeof f != "function") {
				return function () {};
			}
	        var names = name.split(separator),
	            e = events;
	        for (var i = 0, ii = names.length; i < ii; i++) {
	            e = e.n;
	            e = e.hasOwnProperty(names[i]) && e[names[i]] || (e[names[i]] = {n: {}});
	        }
	        e.f = e.f || [];
	        for (i = 0, ii = e.f.length; i < ii; i++) if (e.f[i] == f) {
	            return fun;
	        }
	        e.f.push(f);
	        return function (zIndex) {
	            if (+zIndex == +zIndex) {
	                f.zIndex = +zIndex;
	            }
	        };
	    };
	    /*\
	     * eve.f
	     [ method ]
	     **
	     * Returns function that will fire given event with optional arguments.
		 * Arguments that will be passed to the result function will be also
		 * concated to the list of final arguments.
	 	 | el.onclick = eve.f("click", 1, 2);
	 	 | eve.on("click", function (a, b, c) {
	 	 |     console.log(a, b, c); // 1, 2, [event object]
	 	 | });
	     > Arguments
		 - event (string) event name
		 - varargs () and any other arguments
		 = (function) possible event handler function
	    \*/
		eve.f = function (event) {
			var attrs = [].slice.call(arguments, 1);
			return function () {
				eve.apply(null, [event, null].concat(attrs).concat([].slice.call(arguments, 0)));
			};
		};
	    /*\
	     * eve.stop
	     [ method ]
	     **
	     * Is used inside an event handler to stop the event, preventing any subsequent listeners from firing.
	    \*/
	    eve.stop = function () {
	        stop = 1;
	    };
	    /*\
	     * eve.nt
	     [ method ]
	     **
	     * Could be used inside event handler to figure out actual name of the event.
	     **
	     > Arguments
	     **
	     - subname (string) #optional subname of the event
	     **
	     = (string) name of the event, if `subname` is not specified
	     * or
	     = (boolean) `true`, if current events name contains `subname`
	    \*/
	    eve.nt = function (subname) {
	        if (subname) {
	            return new RegExp("(?:\\.|\\/|^)" + subname + "(?:\\.|\\/|$)").test(current_event);
	        }
	        return current_event;
	    };
	    /*\
	     * eve.nts
	     [ method ]
	     **
	     * Could be used inside event handler to figure out actual name of the event.
	     **
	     **
	     = (array) names of the event
	    \*/
	    eve.nts = function () {
	        return current_event.split(separator);
	    };
	    /*\
	     * eve.off
	     [ method ]
	     **
	     * Removes given function from the list of event listeners assigned to given name.
		 * If no arguments specified all the events will be cleared.
	     **
	     > Arguments
	     **
	     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards
	     - f (function) event handler function
	    \*/
	    /*\
	     * eve.unbind
	     [ method ]
	     **
	     * See @eve.off
	    \*/
	    eve.off = eve.unbind = function (name, f) {
			if (!name) {
			    eve._events = events = {n: {}};
				return;
			}
	        var names = name.split(separator),
	            e,
	            key,
	            splice,
	            i, ii, j, jj,
	            cur = [events];
	        for (i = 0, ii = names.length; i < ii; i++) {
	            for (j = 0; j < cur.length; j += splice.length - 2) {
	                splice = [j, 1];
	                e = cur[j].n;
	                if (names[i] != wildcard) {
	                    if (e[names[i]]) {
	                        splice.push(e[names[i]]);
	                    }
	                } else {
	                    for (key in e) if (e[has](key)) {
	                        splice.push(e[key]);
	                    }
	                }
	                cur.splice.apply(cur, splice);
	            }
	        }
	        for (i = 0, ii = cur.length; i < ii; i++) {
	            e = cur[i];
	            while (e.n) {
	                if (f) {
	                    if (e.f) {
	                        for (j = 0, jj = e.f.length; j < jj; j++) if (e.f[j] == f) {
	                            e.f.splice(j, 1);
	                            break;
	                        }
	                        !e.f.length && delete e.f;
	                    }
	                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {
	                        var funcs = e.n[key].f;
	                        for (j = 0, jj = funcs.length; j < jj; j++) if (funcs[j] == f) {
	                            funcs.splice(j, 1);
	                            break;
	                        }
	                        !funcs.length && delete e.n[key].f;
	                    }
	                } else {
	                    delete e.f;
	                    for (key in e.n) if (e.n[has](key) && e.n[key].f) {
	                        delete e.n[key].f;
	                    }
	                }
	                e = e.n;
	            }
	        }
	    };
	    /*\
	     * eve.once
	     [ method ]
	     **
	     * Binds given event handler with a given name to only run once then unbind itself.
	     | eve.once("login", f);
	     | eve("login"); // triggers f
	     | eve("login"); // no listeners
	     * Use @eve to trigger the listener.
	     **
	     > Arguments
	     **
	     - name (string) name of the event, dot (`.`) or slash (`/`) separated, with optional wildcards
	     - f (function) event handler function
	     **
	     = (function) same return function as @eve.on
	    \*/
	    eve.once = function (name, f) {
	        var f2 = function () {
	            eve.unbind(name, f2);
	            return f.apply(this, arguments);
	        };
	        return eve.on(name, f2);
	    };
	    /*\
	     * eve.version
	     [ property (string) ]
	     **
	     * Current version of the library.
	    \*/
	    eve.version = version;
	    eve.toString = function () {
	        return "You are running Eve " + version;
	    };
	    (typeof module != "undefined" && module.exports) ? (module.exports = eve) : ( true ? (!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = function() { return eve; }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))) : (glob.eve = eve));
	})(this);


/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(1)], __WEBPACK_AMD_DEFINE_RESULT__ = function(R) {
	    if (R && !R.svg) {
	        return;
	    }

	    var has = "hasOwnProperty",
	        Str = String,
	        toFloat = parseFloat,
	        toInt = parseInt,
	        math = Math,
	        mmax = math.max,
	        abs = math.abs,
	        pow = math.pow,
	        separator = /[, ]+/,
	        eve = R.eve,
	        E = "",
	        S = " ";
	    var xlink = "http://www.w3.org/1999/xlink",
	        markers = {
	            block: "M5,0 0,2.5 5,5z",
	            classic: "M5,0 0,2.5 5,5 3.5,3 3.5,2z",
	            diamond: "M2.5,0 5,2.5 2.5,5 0,2.5z",
	            open: "M6,1 1,3.5 6,6",
	            oval: "M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"
	        },
	        markerCounter = {};
	    R.toString = function () {
	        return  "Your browser supports SVG.\nYou are running Rapha\xebl " + this.version;
	    };
	    var $ = function (el, attr) {
	        if (attr) {
	            if (typeof el == "string") {
	                el = $(el);
	            }
	            for (var key in attr) if (attr[has](key)) {
	                if (key.substring(0, 6) == "xlink:") {
	                    el.setAttributeNS(xlink, key.substring(6), Str(attr[key]));
	                } else {
	                    el.setAttribute(key, Str(attr[key]));
	                }
	            }
	        } else {
	            el = R._g.doc.createElementNS("http://www.w3.org/2000/svg", el);
	            el.style && (el.style.webkitTapHighlightColor = "rgba(0,0,0,0)");
	        }
	        return el;
	    },
	    addGradientFill = function (element, gradient) {
	        var type = "linear",
	            id = element.id + gradient,
	            fx = .5, fy = .5,
	            o = element.node,
	            SVG = element.paper,
	            s = o.style,
	            el = R._g.doc.getElementById(id);
	        if (!el) {
	            gradient = Str(gradient).replace(R._radial_gradient, function (all, _fx, _fy) {
	                type = "radial";
	                if (_fx && _fy) {
	                    fx = toFloat(_fx);
	                    fy = toFloat(_fy);
	                    var dir = ((fy > .5) * 2 - 1);
	                    pow(fx - .5, 2) + pow(fy - .5, 2) > .25 &&
	                        (fy = math.sqrt(.25 - pow(fx - .5, 2)) * dir + .5) &&
	                        fy != .5 &&
	                        (fy = fy.toFixed(5) - 1e-5 * dir);
	                }
	                return E;
	            });
	            gradient = gradient.split(/\s*\-\s*/);
	            if (type == "linear") {
	                var angle = gradient.shift();
	                angle = -toFloat(angle);
	                if (isNaN(angle)) {
	                    return null;
	                }
	                var vector = [0, 0, math.cos(R.rad(angle)), math.sin(R.rad(angle))],
	                    max = 1 / (mmax(abs(vector[2]), abs(vector[3])) || 1);
	                vector[2] *= max;
	                vector[3] *= max;
	                if (vector[2] < 0) {
	                    vector[0] = -vector[2];
	                    vector[2] = 0;
	                }
	                if (vector[3] < 0) {
	                    vector[1] = -vector[3];
	                    vector[3] = 0;
	                }
	            }
	            var dots = R._parseDots(gradient);
	            if (!dots) {
	                return null;
	            }
	            id = id.replace(/[\(\)\s,\xb0#]/g, "_");

	            if (element.gradient && id != element.gradient.id) {
	                SVG.defs.removeChild(element.gradient);
	                delete element.gradient;
	            }

	            if (!element.gradient) {
	                el = $(type + "Gradient", {id: id});
	                element.gradient = el;
	                $(el, type == "radial" ? {
	                    fx: fx,
	                    fy: fy
	                } : {
	                    x1: vector[0],
	                    y1: vector[1],
	                    x2: vector[2],
	                    y2: vector[3],
	                    gradientTransform: element.matrix.invert()
	                });
	                SVG.defs.appendChild(el);
	                for (var i = 0, ii = dots.length; i < ii; i++) {
	                    el.appendChild($("stop", {
	                        offset: dots[i].offset ? dots[i].offset : i ? "100%" : "0%",
	                        "stop-color": dots[i].color || "#fff",
	                        "stop-opacity": isFinite(dots[i].opacity) ? dots[i].opacity : 1
	                    }));
	                }
	            }
	        }
	        $(o, {
	            fill: fillurl(id),
	            opacity: 1,
	            "fill-opacity": 1
	        });
	        s.fill = E;
	        s.opacity = 1;
	        s.fillOpacity = 1;
	        return 1;
	    },
	    isIE9or10 = function () {
	      var mode = document.documentMode;
	      return mode && (mode === 9 || mode === 10);
	    },
	    fillurl = function (id) {
	      if (isIE9or10()) {
	          return "url('#" + id + "')";
	      }
	      var location = document.location;
	      var locationString = (
	          location.protocol + '//' +
	          location.host +
	          location.pathname +
	          location.search
	      );
	      return "url('" + locationString + "#" + id + "')";
	    },
	    updatePosition = function (o) {
	        var bbox = o.getBBox(1);
	        $(o.pattern, {patternTransform: o.matrix.invert() + " translate(" + bbox.x + "," + bbox.y + ")"});
	    },
	    addArrow = function (o, value, isEnd) {
	        if (o.type == "path") {
	            var values = Str(value).toLowerCase().split("-"),
	                p = o.paper,
	                se = isEnd ? "end" : "start",
	                node = o.node,
	                attrs = o.attrs,
	                stroke = attrs["stroke-width"],
	                i = values.length,
	                type = "classic",
	                from,
	                to,
	                dx,
	                refX,
	                attr,
	                w = 3,
	                h = 3,
	                t = 5;
	            while (i--) {
	                switch (values[i]) {
	                    case "block":
	                    case "classic":
	                    case "oval":
	                    case "diamond":
	                    case "open":
	                    case "none":
	                        type = values[i];
	                        break;
	                    case "wide": h = 5; break;
	                    case "narrow": h = 2; break;
	                    case "long": w = 5; break;
	                    case "short": w = 2; break;
	                }
	            }
	            if (type == "open") {
	                w += 2;
	                h += 2;
	                t += 2;
	                dx = 1;
	                refX = isEnd ? 4 : 1;
	                attr = {
	                    fill: "none",
	                    stroke: attrs.stroke
	                };
	            } else {
	                refX = dx = w / 2;
	                attr = {
	                    fill: attrs.stroke,
	                    stroke: "none"
	                };
	            }
	            if (o._.arrows) {
	                if (isEnd) {
	                    o._.arrows.endPath && markerCounter[o._.arrows.endPath]--;
	                    o._.arrows.endMarker && markerCounter[o._.arrows.endMarker]--;
	                } else {
	                    o._.arrows.startPath && markerCounter[o._.arrows.startPath]--;
	                    o._.arrows.startMarker && markerCounter[o._.arrows.startMarker]--;
	                }
	            } else {
	                o._.arrows = {};
	            }
	            if (type != "none") {
	                var pathId = "raphael-marker-" + type,
	                    markerId = "raphael-marker-" + se + type + w + h + "-obj" + o.id;
	                if (!R._g.doc.getElementById(pathId)) {
	                    p.defs.appendChild($($("path"), {
	                        "stroke-linecap": "round",
	                        d: markers[type],
	                        id: pathId
	                    }));
	                    markerCounter[pathId] = 1;
	                } else {
	                    markerCounter[pathId]++;
	                }
	                var marker = R._g.doc.getElementById(markerId),
	                    use;
	                if (!marker) {
	                    marker = $($("marker"), {
	                        id: markerId,
	                        markerHeight: h,
	                        markerWidth: w,
	                        orient: "auto",
	                        refX: refX,
	                        refY: h / 2
	                    });
	                    use = $($("use"), {
	                        "xlink:href": "#" + pathId,
	                        transform: (isEnd ? "rotate(180 " + w / 2 + " " + h / 2 + ") " : E) + "scale(" + w / t + "," + h / t + ")",
	                        "stroke-width": (1 / ((w / t + h / t) / 2)).toFixed(4)
	                    });
	                    marker.appendChild(use);
	                    p.defs.appendChild(marker);
	                    markerCounter[markerId] = 1;
	                } else {
	                    markerCounter[markerId]++;
	                    use = marker.getElementsByTagName("use")[0];
	                }
	                $(use, attr);
	                var delta = dx * (type != "diamond" && type != "oval");
	                if (isEnd) {
	                    from = o._.arrows.startdx * stroke || 0;
	                    to = R.getTotalLength(attrs.path) - delta * stroke;
	                } else {
	                    from = delta * stroke;
	                    to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);
	                }
	                attr = {};
	                attr["marker-" + se] = "url(#" + markerId + ")";
	                if (to || from) {
	                    attr.d = R.getSubpath(attrs.path, from, to);
	                }
	                $(node, attr);
	                o._.arrows[se + "Path"] = pathId;
	                o._.arrows[se + "Marker"] = markerId;
	                o._.arrows[se + "dx"] = delta;
	                o._.arrows[se + "Type"] = type;
	                o._.arrows[se + "String"] = value;
	            } else {
	                if (isEnd) {
	                    from = o._.arrows.startdx * stroke || 0;
	                    to = R.getTotalLength(attrs.path) - from;
	                } else {
	                    from = 0;
	                    to = R.getTotalLength(attrs.path) - (o._.arrows.enddx * stroke || 0);
	                }
	                o._.arrows[se + "Path"] && $(node, {d: R.getSubpath(attrs.path, from, to)});
	                delete o._.arrows[se + "Path"];
	                delete o._.arrows[se + "Marker"];
	                delete o._.arrows[se + "dx"];
	                delete o._.arrows[se + "Type"];
	                delete o._.arrows[se + "String"];
	            }
	            for (attr in markerCounter) if (markerCounter[has](attr) && !markerCounter[attr]) {
	                var item = R._g.doc.getElementById(attr);
	                item && item.parentNode.removeChild(item);
	            }
	        }
	    },
	    dasharray = {
	        "-": [3, 1],
	        ".": [1, 1],
	        "-.": [3, 1, 1, 1],
	        "-..": [3, 1, 1, 1, 1, 1],
	        ". ": [1, 3],
	        "- ": [4, 3],
	        "--": [8, 3],
	        "- .": [4, 3, 1, 3],
	        "--.": [8, 3, 1, 3],
	        "--..": [8, 3, 1, 3, 1, 3]
	    },
	    addDashes = function (o, value, params) {
	        value = dasharray[Str(value).toLowerCase()];
	        if (value) {
	            var width = o.attrs["stroke-width"] || "1",
	                butt = {round: width, square: width, butt: 0}[o.attrs["stroke-linecap"] || params["stroke-linecap"]] || 0,
	                dashes = [],
	                i = value.length;
	            while (i--) {
	                dashes[i] = value[i] * width + ((i % 2) ? 1 : -1) * butt;
	            }
	            $(o.node, {"stroke-dasharray": dashes.join(",")});
	        }
	        else {
	          $(o.node, {"stroke-dasharray": "none"});
	        }
	    },
	    setFillAndStroke = function (o, params) {
	        var node = o.node,
	            attrs = o.attrs,
	            vis = node.style.visibility;
	        node.style.visibility = "hidden";
	        for (var att in params) {
	            if (params[has](att)) {
	                if (!R._availableAttrs[has](att)) {
	                    continue;
	                }
	                var value = params[att];
	                attrs[att] = value;
	                switch (att) {
	                    case "blur":
	                        o.blur(value);
	                        break;
	                    case "title":
	                        var title = node.getElementsByTagName("title");

	                        // Use the existing <title>.
	                        if (title.length && (title = title[0])) {
	                          title.firstChild.nodeValue = value;
	                        } else {
	                          title = $("title");
	                          var val = R._g.doc.createTextNode(value);
	                          title.appendChild(val);
	                          node.appendChild(title);
	                        }
	                        break;
	                    case "href":
	                    case "target":
	                        var pn = node.parentNode;
	                        if (pn.tagName.toLowerCase() != "a") {
	                            var hl = $("a");
	                            pn.insertBefore(hl, node);
	                            hl.appendChild(node);
	                            pn = hl;
	                        }
	                        if (att == "target") {
	                            pn.setAttributeNS(xlink, "show", value == "blank" ? "new" : value);
	                        } else {
	                            pn.setAttributeNS(xlink, att, value);
	                        }
	                        break;
	                    case "cursor":
	                        node.style.cursor = value;
	                        break;
	                    case "transform":
	                        o.transform(value);
	                        break;
	                    case "arrow-start":
	                        addArrow(o, value);
	                        break;
	                    case "arrow-end":
	                        addArrow(o, value, 1);
	                        break;
	                    case "clip-rect":
	                        var rect = Str(value).split(separator);
	                        if (rect.length == 4) {
	                            o.clip && o.clip.parentNode.parentNode.removeChild(o.clip.parentNode);
	                            var el = $("clipPath"),
	                                rc = $("rect");
	                            el.id = R.createUUID();
	                            $(rc, {
	                                x: rect[0],
	                                y: rect[1],
	                                width: rect[2],
	                                height: rect[3]
	                            });
	                            el.appendChild(rc);
	                            o.paper.defs.appendChild(el);
	                            $(node, {"clip-path": "url(#" + el.id + ")"});
	                            o.clip = rc;
	                        }
	                        if (!value) {
	                            var path = node.getAttribute("clip-path");
	                            if (path) {
	                                var clip = R._g.doc.getElementById(path.replace(/(^url\(#|\)$)/g, E));
	                                clip && clip.parentNode.removeChild(clip);
	                                $(node, {"clip-path": E});
	                                delete o.clip;
	                            }
	                        }
	                    break;
	                    case "path":
	                        if (o.type == "path") {
	                            $(node, {d: value ? attrs.path = R._pathToAbsolute(value) : "M0,0"});
	                            o._.dirty = 1;
	                            if (o._.arrows) {
	                                "startString" in o._.arrows && addArrow(o, o._.arrows.startString);
	                                "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);
	                            }
	                        }
	                        break;
	                    case "width":
	                        node.setAttribute(att, value);
	                        o._.dirty = 1;
	                        if (attrs.fx) {
	                            att = "x";
	                            value = attrs.x;
	                        } else {
	                            break;
	                        }
	                    case "x":
	                        if (attrs.fx) {
	                            value = -attrs.x - (attrs.width || 0);
	                        }
	                    case "rx":
	                        if (att == "rx" && o.type == "rect") {
	                            break;
	                        }
	                    case "cx":
	                        node.setAttribute(att, value);
	                        o.pattern && updatePosition(o);
	                        o._.dirty = 1;
	                        break;
	                    case "height":
	                        node.setAttribute(att, value);
	                        o._.dirty = 1;
	                        if (attrs.fy) {
	                            att = "y";
	                            value = attrs.y;
	                        } else {
	                            break;
	                        }
	                    case "y":
	                        if (attrs.fy) {
	                            value = -attrs.y - (attrs.height || 0);
	                        }
	                    case "ry":
	                        if (att == "ry" && o.type == "rect") {
	                            break;
	                        }
	                    case "cy":
	                        node.setAttribute(att, value);
	                        o.pattern && updatePosition(o);
	                        o._.dirty = 1;
	                        break;
	                    case "r":
	                        if (o.type == "rect") {
	                            $(node, {rx: value, ry: value});
	                        } else {
	                            node.setAttribute(att, value);
	                        }
	                        o._.dirty = 1;
	                        break;
	                    case "src":
	                        if (o.type == "image") {
	                            node.setAttributeNS(xlink, "href", value);
	                        }
	                        break;
	                    case "stroke-width":
	                        if (o._.sx != 1 || o._.sy != 1) {
	                            value /= mmax(abs(o._.sx), abs(o._.sy)) || 1;
	                        }
	                        node.setAttribute(att, value);
	                        if (attrs["stroke-dasharray"]) {
	                            addDashes(o, attrs["stroke-dasharray"], params);
	                        }
	                        if (o._.arrows) {
	                            "startString" in o._.arrows && addArrow(o, o._.arrows.startString);
	                            "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);
	                        }
	                        break;
	                    case "stroke-dasharray":
	                        addDashes(o, value, params);
	                        break;
	                    case "fill":
	                        var isURL = Str(value).match(R._ISURL);
	                        if (isURL) {
	                            el = $("pattern");
	                            var ig = $("image");
	                            el.id = R.createUUID();
	                            $(el, {x: 0, y: 0, patternUnits: "userSpaceOnUse", height: 1, width: 1});
	                            $(ig, {x: 0, y: 0, "xlink:href": isURL[1]});
	                            el.appendChild(ig);

	                            (function (el) {
	                                R._preload(isURL[1], function () {
	                                    var w = this.offsetWidth,
	                                        h = this.offsetHeight;
	                                    $(el, {width: w, height: h});
	                                    $(ig, {width: w, height: h});
	                                });
	                            })(el);
	                            o.paper.defs.appendChild(el);
	                            $(node, {fill: "url(#" + el.id + ")"});
	                            o.pattern = el;
	                            o.pattern && updatePosition(o);
	                            break;
	                        }
	                        var clr = R.getRGB(value);
	                        if (!clr.error) {
	                            delete params.gradient;
	                            delete attrs.gradient;
	                            !R.is(attrs.opacity, "undefined") &&
	                                R.is(params.opacity, "undefined") &&
	                                $(node, {opacity: attrs.opacity});
	                            !R.is(attrs["fill-opacity"], "undefined") &&
	                                R.is(params["fill-opacity"], "undefined") &&
	                                $(node, {"fill-opacity": attrs["fill-opacity"]});
	                        } else if ((o.type == "circle" || o.type == "ellipse" || Str(value).charAt() != "r") && addGradientFill(o, value)) {
	                            if ("opacity" in attrs || "fill-opacity" in attrs) {
	                                var gradient = R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g, E));
	                                if (gradient) {
	                                    var stops = gradient.getElementsByTagName("stop");
	                                    $(stops[stops.length - 1], {"stop-opacity": ("opacity" in attrs ? attrs.opacity : 1) * ("fill-opacity" in attrs ? attrs["fill-opacity"] : 1)});
	                                }
	                            }
	                            attrs.gradient = value;
	                            attrs.fill = "none";
	                            break;
	                        }
	                        clr[has]("opacity") && $(node, {"fill-opacity": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});
	                    case "stroke":
	                        clr = R.getRGB(value);
	                        node.setAttribute(att, clr.hex);
	                        att == "stroke" && clr[has]("opacity") && $(node, {"stroke-opacity": clr.opacity > 1 ? clr.opacity / 100 : clr.opacity});
	                        if (att == "stroke" && o._.arrows) {
	                            "startString" in o._.arrows && addArrow(o, o._.arrows.startString);
	                            "endString" in o._.arrows && addArrow(o, o._.arrows.endString, 1);
	                        }
	                        break;
	                    case "gradient":
	                        (o.type == "circle" || o.type == "ellipse" || Str(value).charAt() != "r") && addGradientFill(o, value);
	                        break;
	                    case "opacity":
	                        if (attrs.gradient && !attrs[has]("stroke-opacity")) {
	                            $(node, {"stroke-opacity": value > 1 ? value / 100 : value});
	                        }
	                        // fall
	                    case "fill-opacity":
	                        if (attrs.gradient) {
	                            gradient = R._g.doc.getElementById(node.getAttribute("fill").replace(/^url\(#|\)$/g, E));
	                            if (gradient) {
	                                stops = gradient.getElementsByTagName("stop");
	                                $(stops[stops.length - 1], {"stop-opacity": value});
	                            }
	                            break;
	                        }
	                    default:
	                        att == "font-size" && (value = toInt(value, 10) + "px");
	                        var cssrule = att.replace(/(\-.)/g, function (w) {
	                            return w.substring(1).toUpperCase();
	                        });
	                        node.style[cssrule] = value;
	                        o._.dirty = 1;
	                        node.setAttribute(att, value);
	                        break;
	                }
	            }
	        }

	        tuneText(o, params);
	        node.style.visibility = vis;
	    },
	    leading = 1.2,
	    tuneText = function (el, params) {
	        if (el.type != "text" || !(params[has]("text") || params[has]("font") || params[has]("font-size") || params[has]("x") || params[has]("y"))) {
	            return;
	        }
	        var a = el.attrs,
	            node = el.node,
	            fontSize = node.firstChild ? toInt(R._g.doc.defaultView.getComputedStyle(node.firstChild, E).getPropertyValue("font-size"), 10) : 10;

	        if (params[has]("text")) {
	            a.text = params.text;
	            while (node.firstChild) {
	                node.removeChild(node.firstChild);
	            }
	            var texts = Str(params.text).split("\n"),
	                tspans = [],
	                tspan;
	            for (var i = 0, ii = texts.length; i < ii; i++) {
	                tspan = $("tspan");
	                i && $(tspan, {dy: fontSize * leading, x: a.x});
	                tspan.appendChild(R._g.doc.createTextNode(texts[i]));
	                node.appendChild(tspan);
	                tspans[i] = tspan;
	            }
	        } else {
	            tspans = node.getElementsByTagName("tspan");
	            for (i = 0, ii = tspans.length; i < ii; i++) if (i) {
	                $(tspans[i], {dy: fontSize * leading, x: a.x});
	            } else {
	                $(tspans[0], {dy: 0});
	            }
	        }
	        $(node, {x: a.x, y: a.y});
	        el._.dirty = 1;
	        var bb = el._getBBox(),
	            dif = a.y - (bb.y + bb.height / 2);
	        dif && R.is(dif, "finite") && $(tspans[0], {dy: dif});
	    },
	    getRealNode = function (node) {
	        if (node.parentNode && node.parentNode.tagName.toLowerCase() === "a") {
	            return node.parentNode;
	        } else {
	            return node;
	        }
	    },
	    Element = function (node, svg) {
	        var X = 0,
	            Y = 0;
	        /*\
	         * Element.node
	         [ property (object) ]
	         **
	         * Gives you a reference to the DOM object, so you can assign event handlers or just mess around.
	         **
	         * Note: Dont mess with it.
	         > Usage
	         | // draw a circle at coordinate 10,10 with radius of 10
	         | var c = paper.circle(10, 10, 10);
	         | c.node.onclick = function () {
	         |     c.attr("fill", "red");
	         | };
	        \*/
	        this[0] = this.node = node;
	        /*\
	         * Element.raphael
	         [ property (object) ]
	         **
	         * Internal reference to @Raphael object. In case it is not available.
	         > Usage
	         | Raphael.el.red = function () {
	         |     var hsb = this.paper.raphael.rgb2hsb(this.attr("fill"));
	         |     hsb.h = 1;
	         |     this.attr({fill: this.paper.raphael.hsb2rgb(hsb).hex});
	         | }
	        \*/
	        node.raphael = true;
	        /*\
	         * Element.id
	         [ property (number) ]
	         **
	         * Unique id of the element. Especially useful when you want to listen to events of the element,
	         * because all events are fired in format `<module>.<action>.<id>`. Also useful for @Paper.getById method.
	        \*/
	        this.id = R._oid++;
	        node.raphaelid = this.id;
	        this.matrix = R.matrix();
	        this.realPath = null;
	        /*\
	         * Element.paper
	         [ property (object) ]
	         **
	         * Internal reference to paper where object drawn. Mainly for use in plugins and element extensions.
	         > Usage
	         | Raphael.el.cross = function () {
	         |     this.attr({fill: "red"});
	         |     this.paper.path("M10,10L50,50M50,10L10,50")
	         |         .attr({stroke: "red"});
	         | }
	        \*/
	        this.paper = svg;
	        this.attrs = this.attrs || {};
	        this._ = {
	            transform: [],
	            sx: 1,
	            sy: 1,
	            deg: 0,
	            dx: 0,
	            dy: 0,
	            dirty: 1
	        };
	        !svg.bottom && (svg.bottom = this);
	        /*\
	         * Element.prev
	         [ property (object) ]
	         **
	         * Reference to the previous element in the hierarchy.
	        \*/
	        this.prev = svg.top;
	        svg.top && (svg.top.next = this);
	        svg.top = this;
	        /*\
	         * Element.next
	         [ property (object) ]
	         **
	         * Reference to the next element in the hierarchy.
	        \*/
	        this.next = null;
	    },
	    elproto = R.el;

	    Element.prototype = elproto;
	    elproto.constructor = Element;

	    R._engine.path = function (pathString, SVG) {
	        var el = $("path");
	        SVG.canvas && SVG.canvas.appendChild(el);
	        var p = new Element(el, SVG);
	        p.type = "path";
	        setFillAndStroke(p, {
	            fill: "none",
	            stroke: "#000",
	            path: pathString
	        });
	        return p;
	    };
	    /*\
	     * Element.rotate
	     [ method ]
	     **
	     * Deprecated! Use @Element.transform instead.
	     * Adds rotation by given angle around given point to the list of
	     * transformations of the element.
	     > Parameters
	     - deg (number) angle in degrees
	     - cx (number) #optional x coordinate of the centre of rotation
	     - cy (number) #optional y coordinate of the centre of rotation
	     * If cx & cy arent specified centre of the shape is used as a point of rotation.
	     = (object) @Element
	    \*/
	    elproto.rotate = function (deg, cx, cy) {
	        if (this.removed) {
	            return this;
	        }
	        deg = Str(deg).split(separator);
	        if (deg.length - 1) {
	            cx = toFloat(deg[1]);
	            cy = toFloat(deg[2]);
	        }
	        deg = toFloat(deg[0]);
	        (cy == null) && (cx = cy);
	        if (cx == null || cy == null) {
	            var bbox = this.getBBox(1);
	            cx = bbox.x + bbox.width / 2;
	            cy = bbox.y + bbox.height / 2;
	        }
	        this.transform(this._.transform.concat([["r", deg, cx, cy]]));
	        return this;
	    };
	    /*\
	     * Element.scale
	     [ method ]
	     **
	     * Deprecated! Use @Element.transform instead.
	     * Adds scale by given amount relative to given point to the list of
	     * transformations of the element.
	     > Parameters
	     - sx (number) horisontal scale amount
	     - sy (number) vertical scale amount
	     - cx (number) #optional x coordinate of the centre of scale
	     - cy (number) #optional y coordinate of the centre of scale
	     * If cx & cy arent specified centre of the shape is used instead.
	     = (object) @Element
	    \*/
	    elproto.scale = function (sx, sy, cx, cy) {
	        if (this.removed) {
	            return this;
	        }
	        sx = Str(sx).split(separator);
	        if (sx.length - 1) {
	            sy = toFloat(sx[1]);
	            cx = toFloat(sx[2]);
	            cy = toFloat(sx[3]);
	        }
	        sx = toFloat(sx[0]);
	        (sy == null) && (sy = sx);
	        (cy == null) && (cx = cy);
	        if (cx == null || cy == null) {
	            var bbox = this.getBBox(1);
	        }
	        cx = cx == null ? bbox.x + bbox.width / 2 : cx;
	        cy = cy == null ? bbox.y + bbox.height / 2 : cy;
	        this.transform(this._.transform.concat([["s", sx, sy, cx, cy]]));
	        return this;
	    };
	    /*\
	     * Element.translate
	     [ method ]
	     **
	     * Deprecated! Use @Element.transform instead.
	     * Adds translation by given amount to the list of transformations of the element.
	     > Parameters
	     - dx (number) horisontal shift
	     - dy (number) vertical shift
	     = (object) @Element
	    \*/
	    elproto.translate = function (dx, dy) {
	        if (this.removed) {
	            return this;
	        }
	        dx = Str(dx).split(separator);
	        if (dx.length - 1) {
	            dy = toFloat(dx[1]);
	        }
	        dx = toFloat(dx[0]) || 0;
	        dy = +dy || 0;
	        this.transform(this._.transform.concat([["t", dx, dy]]));
	        return this;
	    };
	    /*\
	     * Element.transform
	     [ method ]
	     **
	     * Adds transformation to the element which is separate to other attributes,
	     * i.e. translation doesnt change `x` or `y` of the rectange. The format
	     * of transformation string is similar to the path string syntax:
	     | "t100,100r30,100,100s2,2,100,100r45s1.5"
	     * Each letter is a command. There are four commands: `t` is for translate, `r` is for rotate, `s` is for
	     * scale and `m` is for matrix.
	     *
	     * There are also alternative absolute translation, rotation and scale: `T`, `R` and `S`. They will not take previous transformation into account. For example, `...T100,0` will always move element 100 px horisontally, while `...t100,0` could move it vertically if there is `r90` before. Just compare results of `r90t100,0` and `r90T100,0`.
	     *
	     * So, the example line above could be read like translate by 100, 100; rotate 30 around 100, 100; scale twice around 100, 100;
	     * rotate 45 around centre; scale 1.5 times relative to centre. As you can see rotate and scale commands have origin
	     * coordinates as optional parameters, the default is the centre point of the element.
	     * Matrix accepts six parameters.
	     > Usage
	     | var el = paper.rect(10, 20, 300, 200);
	     | // translate 100, 100, rotate 45, translate -100, 0
	     | el.transform("t100,100r45t-100,0");
	     | // if you want you can append or prepend transformations
	     | el.transform("...t50,50");
	     | el.transform("s2...");
	     | // or even wrap
	     | el.transform("t50,50...t-50-50");
	     | // to reset transformation call method with empty string
	     | el.transform("");
	     | // to get current value call it without parameters
	     | console.log(el.transform());
	     > Parameters
	     - tstr (string) #optional transformation string
	     * If tstr isnt specified
	     = (string) current transformation string
	     * else
	     = (object) @Element
	    \*/
	    elproto.transform = function (tstr) {
	        var _ = this._;
	        if (tstr == null) {
	            return _.transform;
	        }
	        R._extractTransform(this, tstr);

	        this.clip && $(this.clip, {transform: this.matrix.invert()});
	        this.pattern && updatePosition(this);
	        this.node && $(this.node, {transform: this.matrix});

	        if (_.sx != 1 || _.sy != 1) {
	            var sw = this.attrs[has]("stroke-width") ? this.attrs["stroke-width"] : 1;
	            this.attr({"stroke-width": sw});
	        }

	        //Reduce transform string
	        _.transform = this.matrix.toTransformString();

	        return this;
	    };
	    /*\
	     * Element.hide
	     [ method ]
	     **
	     * Makes element invisible. See @Element.show.
	     = (object) @Element
	    \*/
	    elproto.hide = function () {
	        if(!this.removed) this.node.style.display = "none";
	        return this;
	    };
	    /*\
	     * Element.show
	     [ method ]
	     **
	     * Makes element visible. See @Element.hide.
	     = (object) @Element
	    \*/
	    elproto.show = function () {
	        if(!this.removed) this.node.style.display = "";
	        return this;
	    };
	    /*\
	     * Element.remove
	     [ method ]
	     **
	     * Removes element from the paper.
	    \*/
	    elproto.remove = function () {
	        var node = getRealNode(this.node);
	        if (this.removed || !node.parentNode) {
	            return;
	        }
	        var paper = this.paper;
	        paper.__set__ && paper.__set__.exclude(this);
	        eve.unbind("raphael.*.*." + this.id);
	        if (this.gradient) {
	            paper.defs.removeChild(this.gradient);
	        }
	        R._tear(this, paper);

	        node.parentNode.removeChild(node);

	        // Remove custom data for element
	        this.removeData();

	        for (var i in this) {
	            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;
	        }
	        this.removed = true;
	    };
	    elproto._getBBox = function () {
	        if (this.node.style.display == "none") {
	            this.show();
	            var hide = true;
	        }
	        var canvasHidden = false,
	            containerStyle;
	        if (this.paper.canvas.parentElement) {
	          containerStyle = this.paper.canvas.parentElement.style;
	        } //IE10+ can't find parentElement
	        else if (this.paper.canvas.parentNode) {
	          containerStyle = this.paper.canvas.parentNode.style;
	        }

	        if(containerStyle && containerStyle.display == "none") {
	          canvasHidden = true;
	          containerStyle.display = "";
	        }
	        var bbox = {};
	        try {
	            bbox = this.node.getBBox();
	        } catch(e) {
	            // Firefox 3.0.x, 25.0.1 (probably more versions affected) play badly here - possible fix
	            bbox = {
	                x: this.node.clientLeft,
	                y: this.node.clientTop,
	                width: this.node.clientWidth,
	                height: this.node.clientHeight
	            }
	        } finally {
	            bbox = bbox || {};
	            if(canvasHidden){
	              containerStyle.display = "none";
	            }
	        }
	        hide && this.hide();
	        return bbox;
	    };
	    /*\
	     * Element.attr
	     [ method ]
	     **
	     * Sets the attributes of the element.
	     > Parameters
	     - attrName (string) attributes name
	     - value (string) value
	     * or
	     - params (object) object of name/value pairs
	     * or
	     - attrName (string) attributes name
	     * or
	     - attrNames (array) in this case method returns array of current values for given attribute names
	     = (object) @Element if attrsName & value or params are passed in.
	     = (...) value of the attribute if only attrsName is passed in.
	     = (array) array of values of the attribute if attrsNames is passed in.
	     = (object) object of attributes if nothing is passed in.
	     > Possible parameters
	     # <p>Please refer to the <a href="http://www.w3.org/TR/SVG/" title="The W3C Recommendation for the SVG language describes these properties in detail.">SVG specification</a> for an explanation of these parameters.</p>
	     o arrow-end (string) arrowhead on the end of the path. The format for string is `<type>[-<width>[-<length>]]`. Possible types: `classic`, `block`, `open`, `oval`, `diamond`, `none`, width: `wide`, `narrow`, `medium`, length: `long`, `short`, `midium`.
	     o clip-rect (string) comma or space separated values: x, y, width and height
	     o cursor (string) CSS type of the cursor
	     o cx (number) the x-axis coordinate of the center of the circle, or ellipse
	     o cy (number) the y-axis coordinate of the center of the circle, or ellipse
	     o fill (string) colour, gradient or image
	     o fill-opacity (number)
	     o font (string)
	     o font-family (string)
	     o font-size (number) font size in pixels
	     o font-weight (string)
	     o height (number)
	     o href (string) URL, if specified element behaves as hyperlink
	     o opacity (number)
	     o path (string) SVG path string format
	     o r (number) radius of the circle, ellipse or rounded corner on the rect
	     o rx (number) horisontal radius of the ellipse
	     o ry (number) vertical radius of the ellipse
	     o src (string) image URL, only works for @Element.image element
	     o stroke (string) stroke colour
	     o stroke-dasharray (string) [, none, `-`, `.`, `-.`, `-..`, `. `, `- `, `--`, `- .`, `--.`, `--..`]
	     o stroke-linecap (string) [`butt`, `square`, `round`]
	     o stroke-linejoin (string) [`bevel`, `round`, `miter`]
	     o stroke-miterlimit (number)
	     o stroke-opacity (number)
	     o stroke-width (number) stroke width in pixels, default is '1'
	     o target (string) used with href
	     o text (string) contents of the text element. Use `\n` for multiline text
	     o text-anchor (string) [`start`, `middle`, `end`], default is `middle`
	     o title (string) will create tooltip with a given text
	     o transform (string) see @Element.transform
	     o width (number)
	     o x (number)
	     o y (number)
	     > Gradients
	     * Linear gradient format: `angle-colour[-colour[:offset]]*-colour`, example: `90-#fff-#000`  90
	     * gradient from white to black or `0-#fff-#f00:20-#000`  0 gradient from white via red (at 20%) to black.
	     *
	     * radial gradient: `r[(fx, fy)]colour[-colour[:offset]]*-colour`, example: `r#fff-#000` 
	     * gradient from white to black or `r(0.25, 0.75)#fff-#000`  gradient from white to black with focus point
	     * at 0.25, 0.75. Focus point coordinates are in 0..1 range. Radial gradients can only be applied to circles and ellipses.
	     > Path String
	     # <p>Please refer to <a href="http://www.w3.org/TR/SVG/paths.html#PathData" title="Details of a paths data attributes format are described in the SVG specification.">SVG documentation regarding path string</a>. Raphal fully supports it.</p>
	     > Colour Parsing
	     # <ul>
	     #     <li>Colour name (<code>red</code>, <code>green</code>, <code>cornflowerblue</code>, etc)</li>
	     #     <li>#  shortened HTML colour: (<code>#000</code>, <code>#fc0</code>, etc)</li>
	     #     <li>#  full length HTML colour: (<code>#000000</code>, <code>#bd2300</code>)</li>
	     #     <li>rgb(, , )  red, green and blue channels values: (<code>rgb(200,&nbsp;100,&nbsp;0)</code>)</li>
	     #     <li>rgb(%, %, %)  same as above, but in %: (<code>rgb(100%,&nbsp;175%,&nbsp;0%)</code>)</li>
	     #     <li>rgba(, , , )  red, green and blue channels values: (<code>rgba(200,&nbsp;100,&nbsp;0, .5)</code>)</li>
	     #     <li>rgba(%, %, %, %)  same as above, but in %: (<code>rgba(100%,&nbsp;175%,&nbsp;0%, 50%)</code>)</li>
	     #     <li>hsb(, , )  hue, saturation and brightness values: (<code>hsb(0.5,&nbsp;0.25,&nbsp;1)</code>)</li>
	     #     <li>hsb(%, %, %)  same as above, but in %</li>
	     #     <li>hsba(, , , )  same as above, but with opacity</li>
	     #     <li>hsl(, , )  almost the same as hsb, see <a href="http://en.wikipedia.org/wiki/HSL_and_HSV" title="HSL and HSV - Wikipedia, the free encyclopedia">Wikipedia page</a></li>
	     #     <li>hsl(%, %, %)  same as above, but in %</li>
	     #     <li>hsla(, , , )  same as above, but with opacity</li>
	     #     <li>Optionally for hsb and hsl you could specify hue as a degree: <code>hsl(240deg,&nbsp;1,&nbsp;.5)</code> or, if you want to go fancy, <code>hsl(240,&nbsp;1,&nbsp;.5)</code></li>
	     # </ul>
	    \*/
	    elproto.attr = function (name, value) {
	        if (this.removed) {
	            return this;
	        }
	        if (name == null) {
	            var res = {};
	            for (var a in this.attrs) if (this.attrs[has](a)) {
	                res[a] = this.attrs[a];
	            }
	            res.gradient && res.fill == "none" && (res.fill = res.gradient) && delete res.gradient;
	            res.transform = this._.transform;
	            return res;
	        }
	        if (value == null && R.is(name, "string")) {
	            if (name == "fill" && this.attrs.fill == "none" && this.attrs.gradient) {
	                return this.attrs.gradient;
	            }
	            if (name == "transform") {
	                return this._.transform;
	            }
	            var names = name.split(separator),
	                out = {};
	            for (var i = 0, ii = names.length; i < ii; i++) {
	                name = names[i];
	                if (name in this.attrs) {
	                    out[name] = this.attrs[name];
	                } else if (R.is(this.paper.customAttributes[name], "function")) {
	                    out[name] = this.paper.customAttributes[name].def;
	                } else {
	                    out[name] = R._availableAttrs[name];
	                }
	            }
	            return ii - 1 ? out : out[names[0]];
	        }
	        if (value == null && R.is(name, "array")) {
	            out = {};
	            for (i = 0, ii = name.length; i < ii; i++) {
	                out[name[i]] = this.attr(name[i]);
	            }
	            return out;
	        }
	        if (value != null) {
	            var params = {};
	            params[name] = value;
	        } else if (name != null && R.is(name, "object")) {
	            params = name;
	        }
	        for (var key in params) {
	            eve("raphael.attr." + key + "." + this.id, this, params[key]);
	        }
	        for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], "function")) {
	            var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));
	            this.attrs[key] = params[key];
	            for (var subkey in par) if (par[has](subkey)) {
	                params[subkey] = par[subkey];
	            }
	        }
	        setFillAndStroke(this, params);
	        return this;
	    };
	    /*\
	     * Element.toFront
	     [ method ]
	     **
	     * Moves the element so it is the closest to the viewers eyes, on top of other elements.
	     = (object) @Element
	    \*/
	    elproto.toFront = function () {
	        if (this.removed) {
	            return this;
	        }
	        var node = getRealNode(this.node);
	        node.parentNode.appendChild(node);
	        var svg = this.paper;
	        svg.top != this && R._tofront(this, svg);
	        return this;
	    };
	    /*\
	     * Element.toBack
	     [ method ]
	     **
	     * Moves the element so it is the furthest from the viewers eyes, behind other elements.
	     = (object) @Element
	    \*/
	    elproto.toBack = function () {
	        if (this.removed) {
	            return this;
	        }
	        var node = getRealNode(this.node);
	        var parentNode = node.parentNode;
	        parentNode.insertBefore(node, parentNode.firstChild);
	        R._toback(this, this.paper);
	        var svg = this.paper;
	        return this;
	    };
	    /*\
	     * Element.insertAfter
	     [ method ]
	     **
	     * Inserts current object after the given one.
	     = (object) @Element
	    \*/
	    elproto.insertAfter = function (element) {
	        if (this.removed || !element) {
	            return this;
	        }

	        var node = getRealNode(this.node);
	        var afterNode = getRealNode(element.node || element[element.length - 1].node);
	        if (afterNode.nextSibling) {
	            afterNode.parentNode.insertBefore(node, afterNode.nextSibling);
	        } else {
	            afterNode.parentNode.appendChild(node);
	        }
	        R._insertafter(this, element, this.paper);
	        return this;
	    };
	    /*\
	     * Element.insertBefore
	     [ method ]
	     **
	     * Inserts current object before the given one.
	     = (object) @Element
	    \*/
	    elproto.insertBefore = function (element) {
	        if (this.removed || !element) {
	            return this;
	        }

	        var node = getRealNode(this.node);
	        var beforeNode = getRealNode(element.node || element[0].node);
	        beforeNode.parentNode.insertBefore(node, beforeNode);
	        R._insertbefore(this, element, this.paper);
	        return this;
	    };
	    elproto.blur = function (size) {
	        // Experimental. No Safari support. Use it on your own risk.
	        var t = this;
	        if (+size !== 0) {
	            var fltr = $("filter"),
	                blur = $("feGaussianBlur");
	            t.attrs.blur = size;
	            fltr.id = R.createUUID();
	            $(blur, {stdDeviation: +size || 1.5});
	            fltr.appendChild(blur);
	            t.paper.defs.appendChild(fltr);
	            t._blur = fltr;
	            $(t.node, {filter: "url(#" + fltr.id + ")"});
	        } else {
	            if (t._blur) {
	                t._blur.parentNode.removeChild(t._blur);
	                delete t._blur;
	                delete t.attrs.blur;
	            }
	            t.node.removeAttribute("filter");
	        }
	        return t;
	    };
	    R._engine.circle = function (svg, x, y, r) {
	        var el = $("circle");
	        svg.canvas && svg.canvas.appendChild(el);
	        var res = new Element(el, svg);
	        res.attrs = {cx: x, cy: y, r: r, fill: "none", stroke: "#000"};
	        res.type = "circle";
	        $(el, res.attrs);
	        return res;
	    };
	    R._engine.rect = function (svg, x, y, w, h, r) {
	        var el = $("rect");
	        svg.canvas && svg.canvas.appendChild(el);
	        var res = new Element(el, svg);
	        res.attrs = {x: x, y: y, width: w, height: h, rx: r || 0, ry: r || 0, fill: "none", stroke: "#000"};
	        res.type = "rect";
	        $(el, res.attrs);
	        return res;
	    };
	    R._engine.ellipse = function (svg, x, y, rx, ry) {
	        var el = $("ellipse");
	        svg.canvas && svg.canvas.appendChild(el);
	        var res = new Element(el, svg);
	        res.attrs = {cx: x, cy: y, rx: rx, ry: ry, fill: "none", stroke: "#000"};
	        res.type = "ellipse";
	        $(el, res.attrs);
	        return res;
	    };
	    R._engine.image = function (svg, src, x, y, w, h) {
	        var el = $("image");
	        $(el, {x: x, y: y, width: w, height: h, preserveAspectRatio: "none"});
	        el.setAttributeNS(xlink, "href", src);
	        svg.canvas && svg.canvas.appendChild(el);
	        var res = new Element(el, svg);
	        res.attrs = {x: x, y: y, width: w, height: h, src: src};
	        res.type = "image";
	        return res;
	    };
	    R._engine.text = function (svg, x, y, text) {
	        var el = $("text");
	        svg.canvas && svg.canvas.appendChild(el);
	        var res = new Element(el, svg);
	        res.attrs = {
	            x: x,
	            y: y,
	            "text-anchor": "middle",
	            text: text,
	            "font-family": R._availableAttrs["font-family"],
	            "font-size": R._availableAttrs["font-size"],
	            stroke: "none",
	            fill: "#000"
	        };
	        res.type = "text";
	        setFillAndStroke(res, res.attrs);
	        return res;
	    };
	    R._engine.setSize = function (width, height) {
	        this.width = width || this.width;
	        this.height = height || this.height;
	        this.canvas.setAttribute("width", this.width);
	        this.canvas.setAttribute("height", this.height);
	        if (this._viewBox) {
	            this.setViewBox.apply(this, this._viewBox);
	        }
	        return this;
	    };
	    R._engine.create = function () {
	        var con = R._getContainer.apply(0, arguments),
	            container = con && con.container,
	            x = con.x,
	            y = con.y,
	            width = con.width,
	            height = con.height;
	        if (!container) {
	            throw new Error("SVG container not found.");
	        }
	        var cnvs = $("svg"),
	            css = "overflow:hidden;",
	            isFloating;
	        x = x || 0;
	        y = y || 0;
	        width = width || 512;
	        height = height || 342;
	        $(cnvs, {
	            height: height,
	            version: 1.1,
	            width: width,
	            xmlns: "http://www.w3.org/2000/svg",
	            "xmlns:xlink": "http://www.w3.org/1999/xlink"
	        });
	        if (container == 1) {
	            cnvs.style.cssText = css + "position:absolute;left:" + x + "px;top:" + y + "px";
	            R._g.doc.body.appendChild(cnvs);
	            isFloating = 1;
	        } else {
	            cnvs.style.cssText = css + "position:relative";
	            if (container.firstChild) {
	                container.insertBefore(cnvs, container.firstChild);
	            } else {
	                container.appendChild(cnvs);
	            }
	        }
	        container = new R._Paper;
	        container.width = width;
	        container.height = height;
	        container.canvas = cnvs;
	        container.clear();
	        container._left = container._top = 0;
	        isFloating && (container.renderfix = function () {});
	        container.renderfix();
	        return container;
	    };
	    R._engine.setViewBox = function (x, y, w, h, fit) {
	        eve("raphael.setViewBox", this, this._viewBox, [x, y, w, h, fit]);
	        var paperSize = this.getSize(),
	            size = mmax(w / paperSize.width, h / paperSize.height),
	            top = this.top,
	            aspectRatio = fit ? "xMidYMid meet" : "xMinYMin",
	            vb,
	            sw;
	        if (x == null) {
	            if (this._vbSize) {
	                size = 1;
	            }
	            delete this._vbSize;
	            vb = "0 0 " + this.width + S + this.height;
	        } else {
	            this._vbSize = size;
	            vb = x + S + y + S + w + S + h;
	        }
	        $(this.canvas, {
	            viewBox: vb,
	            preserveAspectRatio: aspectRatio
	        });
	        while (size && top) {
	            sw = "stroke-width" in top.attrs ? top.attrs["stroke-width"] : 1;
	            top.attr({"stroke-width": sw});
	            top._.dirty = 1;
	            top._.dirtyT = 1;
	            top = top.prev;
	        }
	        this._viewBox = [x, y, w, h, !!fit];
	        return this;
	    };
	    /*\
	     * Paper.renderfix
	     [ method ]
	     **
	     * Fixes the issue of Firefox and IE9 regarding subpixel rendering. If paper is dependent
	     * on other elements after reflow it could shift half pixel which cause for lines to lost their crispness.
	     * This method fixes the issue.
	     **
	       Special thanks to Mariusz Nowak (http://www.medikoo.com/) for this method.
	    \*/
	    R.prototype.renderfix = function () {
	        var cnvs = this.canvas,
	            s = cnvs.style,
	            pos;
	        try {
	            pos = cnvs.getScreenCTM() || cnvs.createSVGMatrix();
	        } catch (e) {
	            pos = cnvs.createSVGMatrix();
	        }
	        var left = -pos.e % 1,
	            top = -pos.f % 1;
	        if (left || top) {
	            if (left) {
	                this._left = (this._left + left) % 1;
	                s.left = this._left + "px";
	            }
	            if (top) {
	                this._top = (this._top + top) % 1;
	                s.top = this._top + "px";
	            }
	        }
	    };
	    /*\
	     * Paper.clear
	     [ method ]
	     **
	     * Clears the paper, i.e. removes all the elements.
	    \*/
	    R.prototype.clear = function () {
	        R.eve("raphael.clear", this);
	        var c = this.canvas;
	        while (c.firstChild) {
	            c.removeChild(c.firstChild);
	        }
	        this.bottom = this.top = null;
	        (this.desc = $("desc")).appendChild(R._g.doc.createTextNode("Created with Rapha\xebl " + R.version));
	        c.appendChild(this.desc);
	        c.appendChild(this.defs = $("defs"));
	    };
	    /*\
	     * Paper.remove
	     [ method ]
	     **
	     * Removes the paper from the DOM.
	    \*/
	    R.prototype.remove = function () {
	        eve("raphael.remove", this);
	        this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas);
	        for (var i in this) {
	            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;
	        }
	    };
	    var setproto = R.st;
	    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {
	        setproto[method] = (function (methodname) {
	            return function () {
	                var arg = arguments;
	                return this.forEach(function (el) {
	                    el[methodname].apply(el, arg);
	                });
	            };
	        })(method);
	    }
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__(1)], __WEBPACK_AMD_DEFINE_RESULT__ = function(R) {
	    if (R && !R.vml) {
	        return;
	    }

	    var has = "hasOwnProperty",
	        Str = String,
	        toFloat = parseFloat,
	        math = Math,
	        round = math.round,
	        mmax = math.max,
	        mmin = math.min,
	        abs = math.abs,
	        fillString = "fill",
	        separator = /[, ]+/,
	        eve = R.eve,
	        ms = " progid:DXImageTransform.Microsoft",
	        S = " ",
	        E = "",
	        map = {M: "m", L: "l", C: "c", Z: "x", m: "t", l: "r", c: "v", z: "x"},
	        bites = /([clmz]),?([^clmz]*)/gi,
	        blurregexp = / progid:\S+Blur\([^\)]+\)/g,
	        val = /-?[^,\s-]+/g,
	        cssDot = "position:absolute;left:0;top:0;width:1px;height:1px;behavior:url(#default#VML)",
	        zoom = 21600,
	        pathTypes = {path: 1, rect: 1, image: 1},
	        ovalTypes = {circle: 1, ellipse: 1},
	        path2vml = function (path) {
	            var total =  /[ahqstv]/ig,
	                command = R._pathToAbsolute;
	            Str(path).match(total) && (command = R._path2curve);
	            total = /[clmz]/g;
	            if (command == R._pathToAbsolute && !Str(path).match(total)) {
	                var res = Str(path).replace(bites, function (all, command, args) {
	                    var vals = [],
	                        isMove = command.toLowerCase() == "m",
	                        res = map[command];
	                    args.replace(val, function (value) {
	                        if (isMove && vals.length == 2) {
	                            res += vals + map[command == "m" ? "l" : "L"];
	                            vals = [];
	                        }
	                        vals.push(round(value * zoom));
	                    });
	                    return res + vals;
	                });
	                return res;
	            }
	            var pa = command(path), p, r;
	            res = [];
	            for (var i = 0, ii = pa.length; i < ii; i++) {
	                p = pa[i];
	                r = pa[i][0].toLowerCase();
	                r == "z" && (r = "x");
	                for (var j = 1, jj = p.length; j < jj; j++) {
	                    r += round(p[j] * zoom) + (j != jj - 1 ? "," : E);
	                }
	                res.push(r);
	            }
	            return res.join(S);
	        },
	        compensation = function (deg, dx, dy) {
	            var m = R.matrix();
	            m.rotate(-deg, .5, .5);
	            return {
	                dx: m.x(dx, dy),
	                dy: m.y(dx, dy)
	            };
	        },
	        setCoords = function (p, sx, sy, dx, dy, deg) {
	            var _ = p._,
	                m = p.matrix,
	                fillpos = _.fillpos,
	                o = p.node,
	                s = o.style,
	                y = 1,
	                flip = "",
	                dxdy,
	                kx = zoom / sx,
	                ky = zoom / sy;
	            s.visibility = "hidden";
	            if (!sx || !sy) {
	                return;
	            }
	            o.coordsize = abs(kx) + S + abs(ky);
	            s.rotation = deg * (sx * sy < 0 ? -1 : 1);
	            if (deg) {
	                var c = compensation(deg, dx, dy);
	                dx = c.dx;
	                dy = c.dy;
	            }
	            sx < 0 && (flip += "x");
	            sy < 0 && (flip += " y") && (y = -1);
	            s.flip = flip;
	            o.coordorigin = (dx * -kx) + S + (dy * -ky);
	            if (fillpos || _.fillsize) {
	                var fill = o.getElementsByTagName(fillString);
	                fill = fill && fill[0];
	                o.removeChild(fill);
	                if (fillpos) {
	                    c = compensation(deg, m.x(fillpos[0], fillpos[1]), m.y(fillpos[0], fillpos[1]));
	                    fill.position = c.dx * y + S + c.dy * y;
	                }
	                if (_.fillsize) {
	                    fill.size = _.fillsize[0] * abs(sx) + S + _.fillsize[1] * abs(sy);
	                }
	                o.appendChild(fill);
	            }
	            s.visibility = "visible";
	        };
	    R.toString = function () {
	        return  "Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl " + this.version;
	    };
	    var addArrow = function (o, value, isEnd) {
	        var values = Str(value).toLowerCase().split("-"),
	            se = isEnd ? "end" : "start",
	            i = values.length,
	            type = "classic",
	            w = "medium",
	            h = "medium";
	        while (i--) {
	            switch (values[i]) {
	                case "block":
	                case "classic":
	                case "oval":
	                case "diamond":
	                case "open":
	                case "none":
	                    type = values[i];
	                    break;
	                case "wide":
	                case "narrow": h = values[i]; break;
	                case "long":
	                case "short": w = values[i]; break;
	            }
	        }
	        var stroke = o.node.getElementsByTagName("stroke")[0];
	        stroke[se + "arrow"] = type;
	        stroke[se + "arrowlength"] = w;
	        stroke[se + "arrowwidth"] = h;
	    },
	    setFillAndStroke = function (o, params) {
	        // o.paper.canvas.style.display = "none";
	        o.attrs = o.attrs || {};
	        var node = o.node,
	            a = o.attrs,
	            s = node.style,
	            xy,
	            newpath = pathTypes[o.type] && (params.x != a.x || params.y != a.y || params.width != a.width || params.height != a.height || params.cx != a.cx || params.cy != a.cy || params.rx != a.rx || params.ry != a.ry || params.r != a.r),
	            isOval = ovalTypes[o.type] && (a.cx != params.cx || a.cy != params.cy || a.r != params.r || a.rx != params.rx || a.ry != params.ry),
	            res = o;


	        for (var par in params) if (params[has](par)) {
	            a[par] = params[par];
	        }
	        if (newpath) {
	            a.path = R._getPath[o.type](o);
	            o._.dirty = 1;
	        }
	        params.href && (node.href = params.href);
	        params.title && (node.title = params.title);
	        params.target && (node.target = params.target);
	        params.cursor && (s.cursor = params.cursor);
	        "blur" in params && o.blur(params.blur);
	        if (params.path && o.type == "path" || newpath) {
	            node.path = path2vml(~Str(a.path).toLowerCase().indexOf("r") ? R._pathToAbsolute(a.path) : a.path);
	            o._.dirty = 1;
	            if (o.type == "image") {
	                o._.fillpos = [a.x, a.y];
	                o._.fillsize = [a.width, a.height];
	                setCoords(o, 1, 1, 0, 0, 0);
	            }
	        }
	        "transform" in params && o.transform(params.transform);
	        if (isOval) {
	            var cx = +a.cx,
	                cy = +a.cy,
	                rx = +a.rx || +a.r || 0,
	                ry = +a.ry || +a.r || 0;
	            node.path = R.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x", round((cx - rx) * zoom), round((cy - ry) * zoom), round((cx + rx) * zoom), round((cy + ry) * zoom), round(cx * zoom));
	            o._.dirty = 1;
	        }
	        if ("clip-rect" in params) {
	            var rect = Str(params["clip-rect"]).split(separator);
	            if (rect.length == 4) {
	                rect[2] = +rect[2] + (+rect[0]);
	                rect[3] = +rect[3] + (+rect[1]);
	                var div = node.clipRect || R._g.doc.createElement("div"),
	                    dstyle = div.style;
	                dstyle.clip = R.format("rect({1}px {2}px {3}px {0}px)", rect);
	                if (!node.clipRect) {
	                    dstyle.position = "absolute";
	                    dstyle.top = 0;
	                    dstyle.left = 0;
	                    dstyle.width = o.paper.width + "px";
	                    dstyle.height = o.paper.height + "px";
	                    node.parentNode.insertBefore(div, node);
	                    div.appendChild(node);
	                    node.clipRect = div;
	                }
	            }
	            if (!params["clip-rect"]) {
	                node.clipRect && (node.clipRect.style.clip = "auto");
	            }
	        }
	        if (o.textpath) {
	            var textpathStyle = o.textpath.style;
	            params.font && (textpathStyle.font = params.font);
	            params["font-family"] && (textpathStyle.fontFamily = '"' + params["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g, E) + '"');
	            params["font-size"] && (textpathStyle.fontSize = params["font-size"]);
	            params["font-weight"] && (textpathStyle.fontWeight = params["font-weight"]);
	            params["font-style"] && (textpathStyle.fontStyle = params["font-style"]);
	        }
	        if ("arrow-start" in params) {
	            addArrow(res, params["arrow-start"]);
	        }
	        if ("arrow-end" in params) {
	            addArrow(res, params["arrow-end"], 1);
	        }
	        if (params.opacity != null ||
	            params["stroke-width"] != null ||
	            params.fill != null ||
	            params.src != null ||
	            params.stroke != null ||
	            params["stroke-width"] != null ||
	            params["stroke-opacity"] != null ||
	            params["fill-opacity"] != null ||
	            params["stroke-dasharray"] != null ||
	            params["stroke-miterlimit"] != null ||
	            params["stroke-linejoin"] != null ||
	            params["stroke-linecap"] != null) {
	            var fill = node.getElementsByTagName(fillString),
	                newfill = false;
	            fill = fill && fill[0];
	            !fill && (newfill = fill = createNode(fillString));
	            if (o.type == "image" && params.src) {
	                fill.src = params.src;
	            }
	            params.fill && (fill.on = true);
	            if (fill.on == null || params.fill == "none" || params.fill === null) {
	                fill.on = false;
	            }
	            if (fill.on && params.fill) {
	                var isURL = Str(params.fill).match(R._ISURL);
	                if (isURL) {
	                    fill.parentNode == node && node.removeChild(fill);
	                    fill.rotate = true;
	                    fill.src = isURL[1];
	                    fill.type = "tile";
	                    var bbox = o.getBBox(1);
	                    fill.position = bbox.x + S + bbox.y;
	                    o._.fillpos = [bbox.x, bbox.y];

	                    R._preload(isURL[1], function () {
	                        o._.fillsize = [this.offsetWidth, this.offsetHeight];
	                    });
	                } else {
	                    fill.color = R.getRGB(params.fill).hex;
	                    fill.src = E;
	                    fill.type = "solid";
	                    if (R.getRGB(params.fill).error && (res.type in {circle: 1, ellipse: 1} || Str(params.fill).charAt() != "r") && addGradientFill(res, params.fill, fill)) {
	                        a.fill = "none";
	                        a.gradient = params.fill;
	                        fill.rotate = false;
	                    }
	                }
	            }
	            if ("fill-opacity" in params || "opacity" in params) {
	                var opacity = ((+a["fill-opacity"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+R.getRGB(params.fill).o + 1 || 2) - 1);
	                opacity = mmin(mmax(opacity, 0), 1);
	                fill.opacity = opacity;
	                if (fill.src) {
	                    fill.color = "none";
	                }
	            }
	            node.appendChild(fill);
	            var stroke = (node.getElementsByTagName("stroke") && node.getElementsByTagName("stroke")[0]),
	            newstroke = false;
	            !stroke && (newstroke = stroke = createNode("stroke"));
	            if ((params.stroke && params.stroke != "none") ||
	                params["stroke-width"] ||
	                params["stroke-opacity"] != null ||
	                params["stroke-dasharray"] ||
	                params["stroke-miterlimit"] ||
	                params["stroke-linejoin"] ||
	                params["stroke-linecap"]) {
	                stroke.on = true;
	            }
	            (params.stroke == "none" || params.stroke === null || stroke.on == null || params.stroke == 0 || params["stroke-width"] == 0) && (stroke.on = false);
	            var strokeColor = R.getRGB(params.stroke);
	            stroke.on && params.stroke && (stroke.color = strokeColor.hex);
	            opacity = ((+a["stroke-opacity"] + 1 || 2) - 1) * ((+a.opacity + 1 || 2) - 1) * ((+strokeColor.o + 1 || 2) - 1);
	            var width = (toFloat(params["stroke-width"]) || 1) * .75;
	            opacity = mmin(mmax(opacity, 0), 1);
	            params["stroke-width"] == null && (width = a["stroke-width"]);
	            params["stroke-width"] && (stroke.weight = width);
	            width && width < 1 && (opacity *= width) && (stroke.weight = 1);
	            stroke.opacity = opacity;

	            params["stroke-linejoin"] && (stroke.joinstyle = params["stroke-linejoin"] || "miter");
	            stroke.miterlimit = params["stroke-miterlimit"] || 8;
	            params["stroke-linecap"] && (stroke.endcap = params["stroke-linecap"] == "butt" ? "flat" : params["stroke-linecap"] == "square" ? "square" : "round");
	            if ("stroke-dasharray" in params) {
	                var dasharray = {
	                    "-": "shortdash",
	                    ".": "shortdot",
	                    "-.": "shortdashdot",
	                    "-..": "shortdashdotdot",
	                    ". ": "dot",
	                    "- ": "dash",
	                    "--": "longdash",
	                    "- .": "dashdot",
	                    "--.": "longdashdot",
	                    "--..": "longdashdotdot"
	                };
	                stroke.dashstyle = dasharray[has](params["stroke-dasharray"]) ? dasharray[params["stroke-dasharray"]] : E;
	            }
	            newstroke && node.appendChild(stroke);
	        }
	        if (res.type == "text") {
	            res.paper.canvas.style.display = E;
	            var span = res.paper.span,
	                m = 100,
	                fontSize = a.font && a.font.match(/\d+(?:\.\d*)?(?=px)/);
	            s = span.style;
	            a.font && (s.font = a.font);
	            a["font-family"] && (s.fontFamily = a["font-family"]);
	            a["font-weight"] && (s.fontWeight = a["font-weight"]);
	            a["font-style"] && (s.fontStyle = a["font-style"]);
	            fontSize = toFloat(a["font-size"] || fontSize && fontSize[0]) || 10;
	            s.fontSize = fontSize * m + "px";
	            res.textpath.string && (span.innerHTML = Str(res.textpath.string).replace(/</g, "&#60;").replace(/&/g, "&#38;").replace(/\n/g, "<br>"));
	            var brect = span.getBoundingClientRect();
	            res.W = a.w = (brect.right - brect.left) / m;
	            res.H = a.h = (brect.bottom - brect.top) / m;
	            // res.paper.canvas.style.display = "none";
	            res.X = a.x;
	            res.Y = a.y + res.H / 2;

	            ("x" in params || "y" in params) && (res.path.v = R.format("m{0},{1}l{2},{1}", round(a.x * zoom), round(a.y * zoom), round(a.x * zoom) + 1));
	            var dirtyattrs = ["x", "y", "text", "font", "font-family", "font-weight", "font-style", "font-size"];
	            for (var d = 0, dd = dirtyattrs.length; d < dd; d++) if (dirtyattrs[d] in params) {
	                res._.dirty = 1;
	                break;
	            }

	            // text-anchor emulation
	            switch (a["text-anchor"]) {
	                case "start":
	                    res.textpath.style["v-text-align"] = "left";
	                    res.bbx = res.W / 2;
	                break;
	                case "end":
	                    res.textpath.style["v-text-align"] = "right";
	                    res.bbx = -res.W / 2;
	                break;
	                default:
	                    res.textpath.style["v-text-align"] = "center";
	                    res.bbx = 0;
	                break;
	            }
	            res.textpath.style["v-text-kern"] = true;
	        }
	        // res.paper.canvas.style.display = E;
	    },
	    addGradientFill = function (o, gradient, fill) {
	        o.attrs = o.attrs || {};
	        var attrs = o.attrs,
	            pow = Math.pow,
	            opacity,
	            oindex,
	            type = "linear",
	            fxfy = ".5 .5";
	        o.attrs.gradient = gradient;
	        gradient = Str(gradient).replace(R._radial_gradient, function (all, fx, fy) {
	            type = "radial";
	            if (fx && fy) {
	                fx = toFloat(fx);
	                fy = toFloat(fy);
	                pow(fx - .5, 2) + pow(fy - .5, 2) > .25 && (fy = math.sqrt(.25 - pow(fx - .5, 2)) * ((fy > .5) * 2 - 1) + .5);
	                fxfy = fx + S + fy;
	            }
	            return E;
	        });
	        gradient = gradient.split(/\s*\-\s*/);
	        if (type == "linear") {
	            var angle = gradient.shift();
	            angle = -toFloat(angle);
	            if (isNaN(angle)) {
	                return null;
	            }
	        }
	        var dots = R._parseDots(gradient);
	        if (!dots) {
	            return null;
	        }
	        o = o.shape || o.node;
	        if (dots.length) {
	            o.removeChild(fill);
	            fill.on = true;
	            fill.method = "none";
	            fill.color = dots[0].color;
	            fill.color2 = dots[dots.length - 1].color;
	            var clrs = [];
	            for (var i = 0, ii = dots.length; i < ii; i++) {
	                dots[i].offset && clrs.push(dots[i].offset + S + dots[i].color);
	            }
	            fill.colors = clrs.length ? clrs.join() : "0% " + fill.color;
	            if (type == "radial") {
	                fill.type = "gradientTitle";
	                fill.focus = "100%";
	                fill.focussize = "0 0";
	                fill.focusposition = fxfy;
	                fill.angle = 0;
	            } else {
	                // fill.rotate= true;
	                fill.type = "gradient";
	                fill.angle = (270 - angle) % 360;
	            }
	            o.appendChild(fill);
	        }
	        return 1;
	    },
	    Element = function (node, vml) {
	        this[0] = this.node = node;
	        node.raphael = true;
	        this.id = R._oid++;
	        node.raphaelid = this.id;
	        this.X = 0;
	        this.Y = 0;
	        this.attrs = {};
	        this.paper = vml;
	        this.matrix = R.matrix();
	        this._ = {
	            transform: [],
	            sx: 1,
	            sy: 1,
	            dx: 0,
	            dy: 0,
	            deg: 0,
	            dirty: 1,
	            dirtyT: 1
	        };
	        !vml.bottom && (vml.bottom = this);
	        this.prev = vml.top;
	        vml.top && (vml.top.next = this);
	        vml.top = this;
	        this.next = null;
	    };
	    var elproto = R.el;

	    Element.prototype = elproto;
	    elproto.constructor = Element;
	    elproto.transform = function (tstr) {
	        if (tstr == null) {
	            return this._.transform;
	        }
	        var vbs = this.paper._viewBoxShift,
	            vbt = vbs ? "s" + [vbs.scale, vbs.scale] + "-1-1t" + [vbs.dx, vbs.dy] : E,
	            oldt;
	        if (vbs) {
	            oldt = tstr = Str(tstr).replace(/\.{3}|\u2026/g, this._.transform || E);
	        }
	        R._extractTransform(this, vbt + tstr);
	        var matrix = this.matrix.clone(),
	            skew = this.skew,
	            o = this.node,
	            split,
	            isGrad = ~Str(this.attrs.fill).indexOf("-"),
	            isPatt = !Str(this.attrs.fill).indexOf("url(");
	        matrix.translate(1, 1);
	        if (isPatt || isGrad || this.type == "image") {
	            skew.matrix = "1 0 0 1";
	            skew.offset = "0 0";
	            split = matrix.split();
	            if ((isGrad && split.noRotation) || !split.isSimple) {
	                o.style.filter = matrix.toFilter();
	                var bb = this.getBBox(),
	                    bbt = this.getBBox(1),
	                    dx = bb.x - bbt.x,
	                    dy = bb.y - bbt.y;
	                o.coordorigin = (dx * -zoom) + S + (dy * -zoom);
	                setCoords(this, 1, 1, dx, dy, 0);
	            } else {
	                o.style.filter = E;
	                setCoords(this, split.scalex, split.scaley, split.dx, split.dy, split.rotate);
	            }
	        } else {
	            o.style.filter = E;
	            skew.matrix = Str(matrix);
	            skew.offset = matrix.offset();
	        }
	        if (oldt !== null) { // empty string value is true as well
	            this._.transform = oldt;
	            R._extractTransform(this, oldt);
	        }
	        return this;
	    };
	    elproto.rotate = function (deg, cx, cy) {
	        if (this.removed) {
	            return this;
	        }
	        if (deg == null) {
	            return;
	        }
	        deg = Str(deg).split(separator);
	        if (deg.length - 1) {
	            cx = toFloat(deg[1]);
	            cy = toFloat(deg[2]);
	        }
	        deg = toFloat(deg[0]);
	        (cy == null) && (cx = cy);
	        if (cx == null || cy == null) {
	            var bbox = this.getBBox(1);
	            cx = bbox.x + bbox.width / 2;
	            cy = bbox.y + bbox.height / 2;
	        }
	        this._.dirtyT = 1;
	        this.transform(this._.transform.concat([["r", deg, cx, cy]]));
	        return this;
	    };
	    elproto.translate = function (dx, dy) {
	        if (this.removed) {
	            return this;
	        }
	        dx = Str(dx).split(separator);
	        if (dx.length - 1) {
	            dy = toFloat(dx[1]);
	        }
	        dx = toFloat(dx[0]) || 0;
	        dy = +dy || 0;
	        if (this._.bbox) {
	            this._.bbox.x += dx;
	            this._.bbox.y += dy;
	        }
	        this.transform(this._.transform.concat([["t", dx, dy]]));
	        return this;
	    };
	    elproto.scale = function (sx, sy, cx, cy) {
	        if (this.removed) {
	            return this;
	        }
	        sx = Str(sx).split(separator);
	        if (sx.length - 1) {
	            sy = toFloat(sx[1]);
	            cx = toFloat(sx[2]);
	            cy = toFloat(sx[3]);
	            isNaN(cx) && (cx = null);
	            isNaN(cy) && (cy = null);
	        }
	        sx = toFloat(sx[0]);
	        (sy == null) && (sy = sx);
	        (cy == null) && (cx = cy);
	        if (cx == null || cy == null) {
	            var bbox = this.getBBox(1);
	        }
	        cx = cx == null ? bbox.x + bbox.width / 2 : cx;
	        cy = cy == null ? bbox.y + bbox.height / 2 : cy;

	        this.transform(this._.transform.concat([["s", sx, sy, cx, cy]]));
	        this._.dirtyT = 1;
	        return this;
	    };
	    elproto.hide = function () {
	        !this.removed && (this.node.style.display = "none");
	        return this;
	    };
	    elproto.show = function () {
	        !this.removed && (this.node.style.display = E);
	        return this;
	    };
	    // Needed to fix the vml setViewBox issues
	    elproto.auxGetBBox = R.el.getBBox;
	    elproto.getBBox = function(){
	      var b = this.auxGetBBox();
	      if (this.paper && this.paper._viewBoxShift)
	      {
	        var c = {};
	        var z = 1/this.paper._viewBoxShift.scale;
	        c.x = b.x - this.paper._viewBoxShift.dx;
	        c.x *= z;
	        c.y = b.y - this.paper._viewBoxShift.dy;
	        c.y *= z;
	        c.width  = b.width  * z;
	        c.height = b.height * z;
	        c.x2 = c.x + c.width;
	        c.y2 = c.y + c.height;
	        return c;
	      }
	      return b;
	    };
	    elproto._getBBox = function () {
	        if (this.removed) {
	            return {};
	        }
	        return {
	            x: this.X + (this.bbx || 0) - this.W / 2,
	            y: this.Y - this.H,
	            width: this.W,
	            height: this.H
	        };
	    };
	    elproto.remove = function () {
	        if (this.removed || !this.node.parentNode) {
	            return;
	        }
	        this.paper.__set__ && this.paper.__set__.exclude(this);
	        R.eve.unbind("raphael.*.*." + this.id);
	        R._tear(this, this.paper);
	        this.node.parentNode.removeChild(this.node);
	        this.shape && this.shape.parentNode.removeChild(this.shape);
	        for (var i in this) {
	            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;
	        }
	        this.removed = true;
	    };
	    elproto.attr = function (name, value) {
	        if (this.removed) {
	            return this;
	        }
	        if (name == null) {
	            var res = {};
	            for (var a in this.attrs) if (this.attrs[has](a)) {
	                res[a] = this.attrs[a];
	            }
	            res.gradient && res.fill == "none" && (res.fill = res.gradient) && delete res.gradient;
	            res.transform = this._.transform;
	            return res;
	        }
	        if (value == null && R.is(name, "string")) {
	            if (name == fillString && this.attrs.fill == "none" && this.attrs.gradient) {
	                return this.attrs.gradient;
	            }
	            var names = name.split(separator),
	                out = {};
	            for (var i = 0, ii = names.length; i < ii; i++) {
	                name = names[i];
	                if (name in this.attrs) {
	                    out[name] = this.attrs[name];
	                } else if (R.is(this.paper.customAttributes[name], "function")) {
	                    out[name] = this.paper.customAttributes[name].def;
	                } else {
	                    out[name] = R._availableAttrs[name];
	                }
	            }
	            return ii - 1 ? out : out[names[0]];
	        }
	        if (this.attrs && value == null && R.is(name, "array")) {
	            out = {};
	            for (i = 0, ii = name.length; i < ii; i++) {
	                out[name[i]] = this.attr(name[i]);
	            }
	            return out;
	        }
	        var params;
	        if (value != null) {
	            params = {};
	            params[name] = value;
	        }
	        value == null && R.is(name, "object") && (params = name);
	        for (var key in params) {
	            eve("raphael.attr." + key + "." + this.id, this, params[key]);
	        }
	        if (params) {
	            for (key in this.paper.customAttributes) if (this.paper.customAttributes[has](key) && params[has](key) && R.is(this.paper.customAttributes[key], "function")) {
	                var par = this.paper.customAttributes[key].apply(this, [].concat(params[key]));
	                this.attrs[key] = params[key];
	                for (var subkey in par) if (par[has](subkey)) {
	                    params[subkey] = par[subkey];
	                }
	            }
	            // this.paper.canvas.style.display = "none";
	            if (params.text && this.type == "text") {
	                this.textpath.string = params.text;
	            }
	            setFillAndStroke(this, params);
	            // this.paper.canvas.style.display = E;
	        }
	        return this;
	    };
	    elproto.toFront = function () {
	        !this.removed && this.node.parentNode.appendChild(this.node);
	        this.paper && this.paper.top != this && R._tofront(this, this.paper);
	        return this;
	    };
	    elproto.toBack = function () {
	        if (this.removed) {
	            return this;
	        }
	        if (this.node.parentNode.firstChild != this.node) {
	            this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild);
	            R._toback(this, this.paper);
	        }
	        return this;
	    };
	    elproto.insertAfter = function (element) {
	        if (this.removed) {
	            return this;
	        }
	        if (element.constructor == R.st.constructor) {
	            element = element[element.length - 1];
	        }
	        if (element.node.nextSibling) {
	            element.node.parentNode.insertBefore(this.node, element.node.nextSibling);
	        } else {
	            element.node.parentNode.appendChild(this.node);
	        }
	        R._insertafter(this, element, this.paper);
	        return this;
	    };
	    elproto.insertBefore = function (element) {
	        if (this.removed) {
	            return this;
	        }
	        if (element.constructor == R.st.constructor) {
	            element = element[0];
	        }
	        element.node.parentNode.insertBefore(this.node, element.node);
	        R._insertbefore(this, element, this.paper);
	        return this;
	    };
	    elproto.blur = function (size) {
	        var s = this.node.runtimeStyle,
	            f = s.filter;
	        f = f.replace(blurregexp, E);
	        if (+size !== 0) {
	            this.attrs.blur = size;
	            s.filter = f + S + ms + ".Blur(pixelradius=" + (+size || 1.5) + ")";
	            s.margin = R.format("-{0}px 0 0 -{0}px", round(+size || 1.5));
	        } else {
	            s.filter = f;
	            s.margin = 0;
	            delete this.attrs.blur;
	        }
	        return this;
	    };

	    R._engine.path = function (pathString, vml) {
	        var el = createNode("shape");
	        el.style.cssText = cssDot;
	        el.coordsize = zoom + S + zoom;
	        el.coordorigin = vml.coordorigin;
	        var p = new Element(el, vml),
	            attr = {fill: "none", stroke: "#000"};
	        pathString && (attr.path = pathString);
	        p.type = "path";
	        p.path = [];
	        p.Path = E;
	        setFillAndStroke(p, attr);
	        vml.canvas && vml.canvas.appendChild(el);
	        var skew = createNode("skew");
	        skew.on = true;
	        el.appendChild(skew);
	        p.skew = skew;
	        p.transform(E);
	        return p;
	    };
	    R._engine.rect = function (vml, x, y, w, h, r) {
	        var path = R._rectPath(x, y, w, h, r),
	            res = vml.path(path),
	            a = res.attrs;
	        res.X = a.x = x;
	        res.Y = a.y = y;
	        res.W = a.width = w;
	        res.H = a.height = h;
	        a.r = r;
	        a.path = path;
	        res.type = "rect";
	        return res;
	    };
	    R._engine.ellipse = function (vml, x, y, rx, ry) {
	        var res = vml.path(),
	            a = res.attrs;
	        res.X = x - rx;
	        res.Y = y - ry;
	        res.W = rx * 2;
	        res.H = ry * 2;
	        res.type = "ellipse";
	        setFillAndStroke(res, {
	            cx: x,
	            cy: y,
	            rx: rx,
	            ry: ry
	        });
	        return res;
	    };
	    R._engine.circle = function (vml, x, y, r) {
	        var res = vml.path(),
	            a = res.attrs;
	        res.X = x - r;
	        res.Y = y - r;
	        res.W = res.H = r * 2;
	        res.type = "circle";
	        setFillAndStroke(res, {
	            cx: x,
	            cy: y,
	            r: r
	        });
	        return res;
	    };
	    R._engine.image = function (vml, src, x, y, w, h) {
	        var path = R._rectPath(x, y, w, h),
	            res = vml.path(path).attr({stroke: "none"}),
	            a = res.attrs,
	            node = res.node,
	            fill = node.getElementsByTagName(fillString)[0];
	        a.src = src;
	        res.X = a.x = x;
	        res.Y = a.y = y;
	        res.W = a.width = w;
	        res.H = a.height = h;
	        a.path = path;
	        res.type = "image";
	        fill.parentNode == node && node.removeChild(fill);
	        fill.rotate = true;
	        fill.src = src;
	        fill.type = "tile";
	        res._.fillpos = [x, y];
	        res._.fillsize = [w, h];
	        node.appendChild(fill);
	        setCoords(res, 1, 1, 0, 0, 0);
	        return res;
	    };
	    R._engine.text = function (vml, x, y, text) {
	        var el = createNode("shape"),
	            path = createNode("path"),
	            o = createNode("textpath");
	        x = x || 0;
	        y = y || 0;
	        text = text || "";
	        path.v = R.format("m{0},{1}l{2},{1}", round(x * zoom), round(y * zoom), round(x * zoom) + 1);
	        path.textpathok = true;
	        o.string = Str(text);
	        o.on = true;
	        el.style.cssText = cssDot;
	        el.coordsize = zoom + S + zoom;
	        el.coordorigin = "0 0";
	        var p = new Element(el, vml),
	            attr = {
	                fill: "#000",
	                stroke: "none",
	                font: R._availableAttrs.font,
	                text: text
	            };
	        p.shape = el;
	        p.path = path;
	        p.textpath = o;
	        p.type = "text";
	        p.attrs.text = Str(text);
	        p.attrs.x = x;
	        p.attrs.y = y;
	        p.attrs.w = 1;
	        p.attrs.h = 1;
	        setFillAndStroke(p, attr);
	        el.appendChild(o);
	        el.appendChild(path);
	        vml.canvas.appendChild(el);
	        var skew = createNode("skew");
	        skew.on = true;
	        el.appendChild(skew);
	        p.skew = skew;
	        p.transform(E);
	        return p;
	    };
	    R._engine.setSize = function (width, height) {
	        var cs = this.canvas.style;
	        this.width = width;
	        this.height = height;
	        width == +width && (width += "px");
	        height == +height && (height += "px");
	        cs.width = width;
	        cs.height = height;
	        cs.clip = "rect(0 " + width + " " + height + " 0)";
	        if (this._viewBox) {
	            R._engine.setViewBox.apply(this, this._viewBox);
	        }
	        return this;
	    };
	    R._engine.setViewBox = function (x, y, w, h, fit) {
	        R.eve("raphael.setViewBox", this, this._viewBox, [x, y, w, h, fit]);
	        var paperSize = this.getSize(),
	            width = paperSize.width,
	            height = paperSize.height,
	            H, W;
	        if (fit) {
	            H = height / h;
	            W = width / w;
	            if (w * H < width) {
	                x -= (width - w * H) / 2 / H;
	            }
	            if (h * W < height) {
	                y -= (height - h * W) / 2 / W;
	            }
	        }
	        this._viewBox = [x, y, w, h, !!fit];
	        this._viewBoxShift = {
	            dx: -x,
	            dy: -y,
	            scale: paperSize
	        };
	        this.forEach(function (el) {
	            el.transform("...");
	        });
	        return this;
	    };
	    var createNode;
	    R._engine.initWin = function (win) {
	            var doc = win.document;
	            if (doc.styleSheets.length < 31) {
	                doc.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)");
	            } else {
	                // no more room, add to the existing one
	                // http://msdn.microsoft.com/en-us/library/ms531194%28VS.85%29.aspx
	                doc.styleSheets[0].addRule(".rvml", "behavior:url(#default#VML)");
	            }
	            try {
	                !doc.namespaces.rvml && doc.namespaces.add("rvml", "urn:schemas-microsoft-com:vml");
	                createNode = function (tagName) {
	                    return doc.createElement('<rvml:' + tagName + ' class="rvml">');
	                };
	            } catch (e) {
	                createNode = function (tagName) {
	                    return doc.createElement('<' + tagName + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">');
	                };
	            }
	        };
	    R._engine.initWin(R._g.win);
	    R._engine.create = function () {
	        var con = R._getContainer.apply(0, arguments),
	            container = con.container,
	            height = con.height,
	            s,
	            width = con.width,
	            x = con.x,
	            y = con.y;
	        if (!container) {
	            throw new Error("VML container not found.");
	        }
	        var res = new R._Paper,
	            c = res.canvas = R._g.doc.createElement("div"),
	            cs = c.style;
	        x = x || 0;
	        y = y || 0;
	        width = width || 512;
	        height = height || 342;
	        res.width = width;
	        res.height = height;
	        width == +width && (width += "px");
	        height == +height && (height += "px");
	        res.coordsize = zoom * 1e3 + S + zoom * 1e3;
	        res.coordorigin = "0 0";
	        res.span = R._g.doc.createElement("span");
	        res.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";
	        c.appendChild(res.span);
	        cs.cssText = R.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden", width, height);
	        if (container == 1) {
	            R._g.doc.body.appendChild(c);
	            cs.left = x + "px";
	            cs.top = y + "px";
	            cs.position = "absolute";
	        } else {
	            if (container.firstChild) {
	                container.insertBefore(c, container.firstChild);
	            } else {
	                container.appendChild(c);
	            }
	        }
	        res.renderfix = function () {};
	        return res;
	    };
	    R.prototype.clear = function () {
	        R.eve("raphael.clear", this);
	        this.canvas.innerHTML = E;
	        this.span = R._g.doc.createElement("span");
	        this.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";
	        this.canvas.appendChild(this.span);
	        this.bottom = this.top = null;
	    };
	    R.prototype.remove = function () {
	        R.eve("raphael.remove", this);
	        this.canvas.parentNode.removeChild(this.canvas);
	        for (var i in this) {
	            this[i] = typeof this[i] == "function" ? R._removedFactory(i) : null;
	        }
	        return true;
	    };

	    var setproto = R.st;
	    for (var method in elproto) if (elproto[has](method) && !setproto[has](method)) {
	        setproto[method] = (function (methodname) {
	            return function () {
	                var arg = arguments;
	                return this.forEach(function (el) {
	                    el[methodname].apply(el, arg);
	                });
	            };
	        })(method);
	    }
	}.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));


/***/ }
/******/ ])
});
;Class("xui.svg", "xui.UI",{
    Before:function(key, parent_key, o){
        xui.absBox.$type[key.replace("xui.","")]=xui.absBox.$type[key]=key;
        return true;
    },
    Initialize:function(){
        if(typeof(Raphael)=="function"){
            Raphael._availableAttrs.href="";
            Raphael._availableAttrs.title="";
    
            Raphael.el.shadow = function () {
                var ns=this;
                if (ns.type == "text")return null;
                ns._.dirty=true;
                var sw=ns.attr("stroke-width"),
                    f=ns.attr("fill"),
                    o=ns.attr("opacity"),
                    fo=ns.attr("fill-opacity"),
                    tr=ns.attr("transform"),
                    c = 4,
                    r = ns.paper,
                    out = r.set(),
                    bbox = ns._getBBox(false),
                    rx=(bbox.width+sw-c-4)/bbox.width,
                    ry=(bbox.height+sw-c-4)/bbox.height,
                    path = ns.getPath();
                // path = ns.matrix ? Raphael.mapPath(path, ns.matrix) : path;
                if(f!=='none' && fo!==0)
                    path = Raphael.transformPath(path, "t"+(sw/2)+","+(sw/2)+"s"+rx+","+ry+","+(bbox.x+bbox.width+sw)+","+(bbox.y+bbox.height+sw));
                else
                    path = Raphael.transformPath(path, "t"+c/2+","+c/2);
    
                for (var i=1,s; i < c+1; i++) {
                    s=r.path(path).attr({
                        stroke: "#666",
                        fill: f=='none'?'none':'#555',
                        "fill-opacity": fo,
                        "stroke-linejoin": "round",
                        "stroke-linecap": "round",
                        "stroke-width": 2*i,
                        opacity: (.2 * (1-i/c) + .05)*o
                    });
                    s._decoration=1;
                    out.push(s);
                }
                if(tr && tr.length)
                    out.transform(tr);
                return out.insertBefore(ns);
            };
            
            var  r = function(){
                var m=arguments, g = m.length, b=0, a;
                for (;b<g;b++)if ((a = m[b]) || !(a !== !1 && a !== 0)) return a;
            },
            u = function(){
                var m=arguments, g = m.length, b=0, a;
                for (;b <g;b++)if((a = m[b]) || !(a !== !1 && a !== 0)) if (!isNaN(a = Number(a))) return a;
            },
            t = function(m){
                return "matrix(" + [ m.get(0), m.get(1), m.get(2), m.get(3), m.get(4), m.get(5) ].join() + ")";
            },
            h = /^matrix\(|\)$/g, 
            M = /\,/g, 
            e = /\n|<br\s*?\/?>/gi, 
            k = /[^\d\.]/gi, 
            V = /[\(\)\s,\xb0#]/g, 
            ga = /group/gi, 
            w = /&/g, 
            Q = /"/g, K = /'/g, 
            G = /</g, aa = />/g, 
            A = 0,
            l = Math, D = parseFloat, q = l.max, j = l.abs, s = l.pow, fa = String, ea = /[, ]+/, U = [ {
                reg: /xmlns\=\"http\:\/\/www.w3.org\/2000\/svg\"/gi,
                str: ""
            }, {
                reg: /^.*<svg /,
                str: '<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" '
            }, {
                reg: /\/svg>.*$/,
                str: "/svg>"
            }, {
                reg: /\<desc[\s\>][^\<]*\<\/desc\>/,
                str: ""
            }, {
                reg: /zIndex="[^"]+"/g,
                str: ""
            }, {
                reg: /url\((\\?[\'\"])[^#]+#/g,
                str: "url($1#"
            }, {
                reg: / href=/g,
                str: " xlink:href="
            }, {
                reg: /(id|class|width|height)=([^" >]+)/g,
                str: '$1="$2"'
            }, {
                reg: /:(path|rect)/g,
                str: "$1"
            }, {
                reg: /\<ima?ge? ([^\>]+?)[^\/]\>/gi,
                str: "<image $1 />"
            }, {
                reg: /\<\/ima?ge?\>/g,
                str: ""
            }, {
                reg: /style="([^"]+)"/g,
                str: function(e) {
                    return e.toLowerCase();
                }
            } ], 
            W = {
                blur: function() {},
                transform: function() {},
                src: function(e, d) {
                    d.attrSTR += ' xlink:href="' + d.attrs.src + '"';
                },
                path: function(e, d) {
                    var h = d.attrs.path, h = Raphael._pathToAbsolute(h || "");
                    d.attrSTR += ' d="' + (h.toString && h.toString() || "").replace(M, " ") + '"';
                },
                gradient: function(e, d, h) {
                    var b = e.attrs.gradient, f = "linear", a, g, c = .5, k = .5, r = g = "", u = "";
                    a = b.replace(V, "_");
                    if (!h[a]) {
                        b = fa(b).replace(Raphael._radial_gradient, function(a, b, e) {
                            f = "radial";
                            b && e && (c = D(b), k = D(e), a = (k > .5) * 2 - 1, s(c - .5, 2) + s(k - .5, 2) > .25 && (k = l.sqrt(.25 - s(c - .5, 2)) * a + .5) && k != .5 && (k = k.toFixed(5) - 1e-5 * a));
                            return "";
                        });
                        b = b.split(/\s*\-\s*/);
                        if (f === "linear") {
                            g = b.shift();
                            g = -D(g);
                            if (isNaN(g)) return null;
                            var w = [ 0, 0, l.cos(Raphael.rad(g)), l.sin(Raphael.rad(g)) ];
                            g = 1 / (q(j(w[2]), j(w[3])) || 1);
                            w[2] *= g;
                            w[3] *= g;
                            w[2] < 0 && (w[0] = -w[2], w[2] = 0);
                            w[3] < 0 && (w[1] = -w[3], w[3] = 0);
                        }
                        b = Raphael._parseDots(b);
                        if (!b) return null;
                        f === "radial" ? (g = '<radialGradient fx = "' + c + '" fy = "' + k + '" id = "' + a + '">', 
                        r = "</radialGradient>") : (g = '<linearGradient x1 = "' + w[0] + '" y1 = "' + w[1] + '" x2 = "' + w[2] + '" y2 = "' + w[3] + '" gradientTransform ="matrix(' + e.matrix.invert() + ')" id = "' + a + '">', 
                        r = "</linearGradient>");
                        e = 0;
                        for (w = b.length; e < w; e++) u += '<stop offset="' + (b[e].offset ? b[e].offset : e ? "100%" : "0%") + '" stop-color="' + (b[e].color || "#fff") + '" stop-opacity="' + (b[e].opacity === void 0 ? 1 : b[e].opacity) + '" />';
                        h[a] = !0;
                        h.str += g + u + r;
                    }
                    d.attrSTR += " fill=\"url('#" + a + "')\"";
                },
                fill: function(e, d) {
                    var h = d.attrs, b = h.fill, f;
                    if (!e.attrs.gradient) if (b = Raphael.color(b), f = b.opacity, e.type === "text") d.styleSTR += "fill:" + b + "; stroke-opacity:0; "; else if (d.attrSTR += ' fill="' + b + '"', 
                    !h["fill-opacity"] && (f || f === 0)) d.attrSTR += ' fill-opacity="' + f + '"';
                },
                stroke: function(e, d) {
                    var h = d.attrs, b, f;
                    b = Raphael.color(h.stroke);
                    f = b.opacity;
                    if (e.type !== "text" && (d.attrSTR += ' stroke="' + b + '"', !h["stroke-opacity"] && (f || f === 0))) d.attrSTR += ' stroke-opacity="' + f + '"';
                },
                "clip-rect": function(e, d, i) {
                    var b = fa(d.attrs["clip-rect"]), f = b.split(ea), b = b.replace(V, "_") + "__" + A++;
                    f.length === 4 && (i[b] || (i[b] = !0, i.str += '<clipPath id="' + b + '"><rect x="' + f[0] + '" y="' + f[1] + '" width="' + f[2] + '" height="' + f[3] + '" transform="matrix(' + t(e.matrix.invert()).replace(h, "") + ')"/></clipPath>'), 
                    d.attrSTR += ' clip-path="url(#' + b + ')"');
                },
                cursor: function(e, d) {
                    var h = d.attrs.cursor;
                    h && (d.styleSTR += "cursor:" + h + "; ");
                },
                font: function(e, d) {
                    d.styleSTR += "font:" + d.attrs.font.replace(/\"/gi, " ") + "; ";
                },
                "font-size": function(e, d) {
                    var h = r(d.attrs["font-size"], "10");
                    h && h.replace && (h = h.replace(k, ""));
                    d.styleSTR += "font-size:" + h + "px; ";
                },
                "font-weight": function(e, d) {
                    d.styleSTR += "font-weight:" + d.attrs["font-weight"] + "; ";
                },
                "font-family": function(e, d) {
                    d.styleSTR += "font-family:" + d.attrs["font-family"] + "; ";
                },
                "line-height": function() {},
                "clip-path": function() {},
                visibility: function() {},
                "vertical-align": function() {},
                "text-anchor": function(e, d) {
                    var h = d.attrs["text-anchor"] || "middle";
                    e.type === "text" && (d.attrSTR += ' text-anchor="' + h + '"');
                },
                title: function() {},
                text: function(d, h) {
                    var i = h.attrs, b = i.text, f = r(i["font-size"], i.font, "10"), a = r(i["line-height"]), g;
                    f && f.replace && (f = f.replace(k, ""));
                    f = u(f);
                    a && a.replace && (a = a.replace(k, ""));
                    a = u(a, f && f * 1.2);
                    g = f ? f * .85 : a * .75;
                    for (var f = i.x, c = r(i["vertical-align"], "middle").toLowerCase(), b = fa(b).split(e), i = b.length, l = 0, c = c === "top" ? g : c === "bottom" ? g - a * i : g - a * i * .5; l < i; l++) h.textSTR += "<tspan ", 
                    g = (b[l] || "").replace(w, "&amp;").replace(Q, "&quot;").replace(K, "&#39;").replace(G, "&lt;").replace(aa, "&gt;"), 
                    h.textSTR += l ? 'dy="' + a + '" x="' + f + '" ' : 'dy="' + c + '"', h.textSTR += ">" + g + "</tspan>";
                }
            }, 
            X = function(e, i) {
                var k = "", b = {
                    attrSTR: "",
                    styleSTR: "",
                    textSTR: "",
                    attrs: e.attr()
                }, f = "", a = "", g = "", c, l, j = b.attrs;
                if (e.node.style.display !== "none") {
                    for (c in j) if (c !== "gradient" && (Raphael._availableAttrs[c] !== void 0 || W[c])) if (W[c]) W[c](e, b, i); else b.attrSTR += " " + c + '="' + j[c] + '"';
                    e.attrs.gradient && W.gradient(e, b, i);
                    e.type === "rect" && j.r && (b.attrSTR += ' rx="' + j.r + '" ry="' + j.r + '"');
                    for (l in e.styles) b.styleSTR += l + ":" + e.styles[l] + "; ";
                    e.type === "image" && (b.attrSTR += ' preserveAspectRatio="none"');
                    e.bottom && (a = X(e.bottom, i));
                    e.next && (g = X(e.next, i));
                    f = e.type;
                    f.match(ga) && (f = "g");
                    k += "<" + f + ' transform="matrix(' + t(e.matrix).replace(h, "") + ')" style="' + b.styleSTR + '"' + b.attrSTR + ">" + b.textSTR + a + "</" + f + ">" + g;
                } else e.next && (k += X(e.next, i));
                return k;
            };
            Raphael.fn.toSVG = function(includeImage) {
                var d = "", h = {str: ""}, b = 0, f = U.length, a = "";
                if (Raphael.svg) {
                    if (this.canvas && this.canvas.parentNode) 
                        for (d = this.canvas.parentNode.innerHTML; b < f; b += 1) 
                            h = U[b], d = d.replace(h.reg, h.str);
                } else{
                    d = '<svg style="overflow: hidden; position: relative;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="' + this.width + '" version="1.1" height="' + this.height + '">';
                    if(this.bottom){
                        a = X(this.bottom, h);
                        d += "<defs>" + h.str + "</defs>" + a + "</svg>";
                    }
                }
                if(!includeImage){
                    d = d.replace(/\<image [^\>]*\>/gi, "");
                }
                return d;
            };
        }

        var attr={
            "arrow-start":1,
            "arrow-end":1,
            "clip-rect":1,
            "fill":1, // Radial gradients can only be applied to circles and ellipses.
            "fill-opacity":1,
//            "href":1,
//            "target":1,
            "title":1,
            "cursor":1,
            "transform":1,
            "opacity":1,
            "stroke":1,
            "stroke-dasharray":1,
            "stroke-linecap":1,
            "stroke-linejoin":1,
            "stroke-miterlimit":1,
            "stroke-opacity":1,
            "stroke-width":1
        };
        this.$attr={
            circle:{cx:1,cy:1,r:1},
            ellipse:{cx:1,cy:1,rx:1,ry:1},
            rect:{x:1,y:1,r:1,width:1,height:1},
            text:{x:1,y:1,text:1,font:1,"font-family":1,"font-style":1,"font-size":1,"font-weight":1,"text-anchor":1,"letter-spacing":1},
            image:{src:1,x:1,y:1,width:1,height:1},
            path:{path:1}
        };
        _.each(this.$attr,function(o) {
            _.merge(o,attr);
        });

        var o=this.$attr.text;
        delete o["arrow-start"];
        delete o["arrow-end"];
        delete o["stroke-dasharray"];
        delete o["stroke-linecap"];
        delete o["stroke-linejoin"];
        delete o["stroke-miterlimit"];
        delete o["stroke-opacity"];
        delete o["stroke-width"];
        
        delete this.prototype.toHtml;
    },
    Instance:{
        initialize:function(){
            if(typeof(Raphael)!="function")throw "Browser doesn't suppor SVG or VML, all diagram functions were disabled!";
        },
        getAttr:function(key){
            var prf=this.get(0);
            if(prf){
                var prop=prf.properties,
                    dftAttr=Raphael._availableAttrs,
                    attr=prf.box.ISCOMBO?prop.attr:{KEY:prop.attr},node;

                if(prf._elset){
                    prf._elset.forEach(function(el){
                        var key1=el.type,tag=prf.getKey(el.node.id,true);
                        if(!key || key===tag){
                            node=el.node;
                            if(node&&('raphaelid' in node)){
                                var paper=prf.boxing().getPaper();
                                if(paper && (node=paper.getById(node.raphaelid))){
                                    var attf=node.attr();
                                    _.filter(attf,function(o,i){
                                        if(i=='transform' && _.isArr(o) && o.length===0)o="";
                                        // get the simple transform string
                                        if(i=='transform' && o)
                                            o=node.matrix.toTransformString();

                                        // special for text
                                        if(key1=='text'){
                                            if(i=='stroke') return o!="none";
                                            if(i=='fill') return o!="#000";
                                            if(tag!="KEY" && ('hAlign' in prf.box.$DataModel) && (i=='x'||i=='y'))return false;
                                        }
                                        if(tag!="KEY" &&  i=='transform')return false;
                                        return o!=dftAttr[i];
                                    });
                                    // keep the  original src attr
                                    if('src' in attf && 'src' in attr[tag])
                                        attf.src=attr[tag].src;
                                    attr[tag]=attf;
                                }
                            }
                        }
                    });
                }
            }
            // filter
            attr=prf.box._adjustAttr(attr);
            return prf.box.ISCOMBO? (key?attr[key]:attr) :attr.KEY;
        },
        setAttr:function(key, attr, reset, notify){
            if(_.isHash(key))attr=key;
            else{
                var h={};
                h[key]=attr;
                attr=h;
                key="KEY";
            };
            reset=reset!==false;
            return this.each(function(prf){
                var prop=prf.properties,node,
                    dftAttr=Raphael._availableAttrs,
                    oAttr=prf.box._adjustAttr(prop.attr),
                    attr2=prf.box._adjustAttr(attr);
                if(reset){
                    // add dft attr to reset the old attr
                    _.each(oAttr,function(o,i){
                        if(!(i in attr2)){
                            attr2[i]={};
                        }

                        _.each(o,function(o1,i1){
                            if(!(i1 in attr2[i])){
                                attr2[i][i1]=dftAttr[i1];
                                // special for text
                                if((prf.box.$tagName[i]|| i.split("_")[0].toLowerCase())=='text'){
                                    if(i1=='stroke') attr2[i][i1]="none";
                                    if(i1=='fill') attr2[i][i1]="#000";
                                }
                            }
                        });
                        // special for text
                        if((prf.box.$tagName[i]|| i.split("_")[0].toLowerCase())=='text'){
                            if(i!="KEY" && ('hAlign' in prf.box.$DataModel) ){
                                delete attr2[i].x;
                                delete attr2[i].y;
                            }
                        }
                        if(i!="KEY"){
                            delete attr2[i].transform;
                        }
                    });
                }

                if(prf._elset){
                    prf._elset.forEach(function(el){
                        var key1=el.type,tag=prf.getKey(el.node.id,true);
                        if(_.isHash(key) || key===tag){
                            node=el.node;
                            if(node&&('raphaelid' in node)){
                                var paper=prf.boxing().getPaper();
                                if(paper && (node=paper.getById(node.raphaelid))){
                                    var rattr=_.copy(attr2[tag]);
                                    if('src' in rattr)
                                        rattr.src = xui.adjustRes(rattr.src);
                                    node.attr(rattr);
                                }
                            }
                        }
                    });

                    var ot=attr2.KEY,
                        shapeChanged=ot && ('x' in ot
                        || 'y' in ot
                        || 'width' in ot
                        || 'height' in ot
                        || 'r' in ot
                        || 'rx' in ot
                        || 'ry' in ot
                        || 'path' in ot
                        || 'transform' in ot
                        || 'arrow-start' in ot
                        || 'arrow-end' in ot);
                    if(ot){
                        var ss=prf._elset;
                        if(ss[1]){
                            // sync transform
                            if('transform' in ot){
                                for(var i=1,l=ss.length;i<l;i++)
                                    ss[i].attr('transform', ot.transform);
                            }
                        }
                        if(notify!==false)
                            prf.box._notify(prf, ot, shapeChanged);
                    }
                }

                // set to attr property
                if(prf.box.ISCOMBO){
                    prop.attr=_.merge(prop.attr,attr2,function(o,i){
                        if(typeof o=='object'){
                            if(i in prop.attr)
                                _.merge(prop.attr[i], o, 'all');
                            else
                                prop.attr[i]=_.copy(o);
                        }else{
                            return true;
                        }
                    });

                    // filter default setting
                    _.each(prop.attr,function(o,i){
                        _.filter(o,function(o1,i1){
                            if(i1=='transform' && _.isArr(dftAttr[i1]) && dftAttr[i1].length===0)dftAttr[i1]="";
                            // special for text
                            if((prf.box.$tagName[i]|| i.split("_")[0].toLowerCase())=='text'){
                                if(i1=='stroke') return o1!="none";
                                if(i1=='fill') return o1!="#000";
                                if(i!="KEY" && ('hAlign' in prf.box.$DataModel) && (i1=='x'||i1=='y'))return false;
                            }
                            if(i!="KEY" && i1=='transform')return false;
                            return dftAttr[i1]!==o1;
                        });
                    });
                }else{
                    _.merge(prop.attr, attr2.KEY, 'all');

                    // filter default setting
                    _.filter(prop.attr,function(o1,i1){
                        if(i1=='transform' && _.isArr(dftAttr[i1]) && dftAttr[i1].length===0)dftAttr[i1]="";
                        // special for text
                        if((prf.box.$tagName.KEY|| i.split("_")[0].toLowerCase())=='text'){
                            if(i1=='stroke') return o1!="none";
                            if(i1=='fill') return o1!="#000";
                        }
                        return dftAttr[i1]!==o1;
                    });
                }
            });
        },
        toFront:function(){
            return this.each(function(prf){
                if(prf._shadow)prf._shadow.toFront();
                if(prf._elset)
                    _.arr.each(prf._elset.items,function(el){
                        el.toFront();
                    });
                var arr=_.get(prf,['parent','children']);
                if(arr && arr.length){
                    var index=_.arr.subIndexOf(arr,"0",prf),o;
                    if(index!=-1){
                        o=arr[index];
                        arr.splice(index,1);
                        arr.push(o);
                    }
                }
            });
        },
        toBack:function(){
            return this.each(function(prf){
                if(prf._elset)
                    _.arr.each(prf._elset.items,function(el){
                        el.toBack();
                    },null,true);
                if(prf._shadow)prf._shadow.toBack();
                var arr=_.get(prf,['parent','children']);
                if(arr && arr.length){
                    var index=_.arr.subIndexOf(arr,"0",prf),o;
                    if(index!=-1){
                        o=arr[index];
                        arr.splice(index,1);
                        arr.unshift(o);
                    }
                }
            });
        },
        getAllNodes:function(){
            var prf=this.get(0),arr=[];
            if(prf&&prf._elset){
                prf._elset.forEach(function(el){
                    arr.push(el.node);
                });
            }
            return xui(arr);
        },
        getPaper:function(){
            var prf=this.get(0);
            return prf && prf.parent && prf.parent._paper;
        },
        animate:function(params, ms, easing, callback){
            var prf=this.get(0);
            if(prf&&prf._elset){
                prf._elset.animate(params, ms, easing, callback);
            }
            return this;
        },
        getElemSet:function(){
            var prf=this.get(0);
            prf&&prf._elset;
        },
        getLeft:function(){
            return this._getBBox('x');
        },
        setLeft:function(value){
            return this._setBBox('x',value);
        },
        getTop:function(){
            return this._getBBox('y');
        },
        setTop:function(value){
            return this._setBBox('y',value);
        },
        getWidth:function(){
            return this._getBBox('width');
        },
        getHeight:function(){
            return this._getBBox('height');
        },
        setWidth:function(value){
            return this._setBBox('width',parseFloat(value));
        },
        setHeight:function(value){
            return this._setBBox('height',parseFloat(value));
        },

        _getBBox:function(key, withTransform){
            var prf=this.get(0),el,bbox;
            if((el=prf._elset)&&el.length){
                el[0]._.dirty=1;
                bbox={};
                _.merge(bbox,el[0]._getBBox(withTransform!==false),'all',true);
                for(var i=1,l=el.length,t;i<l;i++){
                   if(!(el[i].type=='text' && ('hAlign' in prf.box.$DataModel))){
                        el[i]._.dirty=1;
                        t=el[i]._getBBox(withTransform!==false);
                        bbox.x=Math.min(t.x,bbox.x);
                        bbox.y=Math.min(t.y,bbox.y);
                        bbox.x2=Math.max(('x2' in t)?t.x2:(t.x+t.width), ('x2' in bbox)?bbox.x2:(bbox.x+bbox.width));
                        bbox.y2=Math.max(('y2' in t)?t.y2:(t.y+t.height), ('y2' in bbox)?bbox.y2:(bbox.y+bbox.height));
                    }
                }

                if('x2' in bbox)bbox.width=bbox.x2-bbox.x;
                if('y2' in bbox)bbox.height=bbox.y2-bbox.y;

                delete bbox.x2;
                delete bbox.y2;
                return key?bbox[key]:bbox;
            }
        },
        _setBBox:function(key,value){
        },
        _getConnectAnchors:function(){
            var prf=this.get(0),rst;
            if(prf){
                if(_.get(prf._pathCached,['_connAnchors']))
                    return _.get(prf._pathCached,['_connAnchors']);

                var ss=prf._elset;
                if(ss&&ss[0]){
                    ss[0]._.dirty=1;
                    var tf=Raphael.parseTransformString(ss[0].transform()),
                        matrix;
                    if(tf && tf.length){
                        matrix=ss[0].matrix;
                    }

                    var bbox=ss[0]._getBBox(true),
                        r1=180,r2=270,r3=0,r4=90,
                        x1=bbox.x ,y1=bbox.y+bbox.height/2 ,
                        x2=bbox.x+bbox.width/2 ,y2=bbox.y ,
                        x3=bbox.x+bbox.width ,y3=bbox.y+bbox.height/2 ,
                        x4=bbox.x+bbox.width/2 ,y4=bbox.y+bbox.height;
                    if(matrix){
                        var xx1=x1,xx2=x2,xx3=x3,xx4=x4,yy1=y1,yy2=y2,yy3=y3,yy4=y4;
                        x1=matrix.x(xx1,yy1);y1=matrix.y(xx1,yy1);
                        x2=matrix.x(xx2,yy2);y2=matrix.y(xx2,yy2);
                        x3=matrix.x(xx3,yy3);y3=matrix.y(xx3,yy3);
                        x4=matrix.x(xx4,yy4);y4=matrix.y(xx4,yy4);

                        var xc=(x1+x2+x3+x4)/4,
                             yc=(y1+y2+y3+y4)/4;

                        r1=Raphael.angle(x1,y1,xc,yc);
                        r2=Raphael.angle(x2,y2,xc,yc);
                        r3=Raphael.angle(x3,y3,xc,yc);
                        r4=Raphael.angle(x4,y4,xc,yc);
                    }

                    rst={
                        "left":{x:x1, y:y1, alpha:r1, solid:1},
                        "top":{x:x2, y:y2, alpha:r2, solid:1},
                        "right":{x:x3, y:y3, alpha:r3, solid:1},
                        "bottom":{x:x4, y:y4,alpha:r4, solid:1}
                    }

                    if(prf._pathCached)_.set(prf._pathCached,['_connAnchors'], rst);

                    return rst;
                }
            }
        },
        _getConnectPath:function(){
            var prf=this.get(0),ss;

            if(_.get(prf._pathCached,['_connPath']))
                return _.get(prf._pathCached,['_connPath']);

            if(prf && (ss=prf._elset) && ss[0]){
                var tf=Raphael.parseTransformString(ss[0].transform()),
                        matrix;
                    if(tf && tf.length){
                        matrix=ss[0].matrix;
                    }
                var path=ss[0].getPath();
                if(matrix){
                    path=Raphael.mapPath(path,matrix);
                }

                if(prf._pathCached)_.set(prf._pathCached,['_connPath'], path);

                return path;
            }
        },
        _getConnectPoint:function(anchor){
            if(anchor){
                var prf=this.get(0),rst;

                if(_.get(prf._pathCached,['_connPoint',anchor]))
                    return _.get(prf._pathCached,['_connPoint',anchor]);

                if(/^[1-9][0-9]*:((1([.][0]+)?)|(0\.[0-9]+))$/.test(anchor)){
                    var arr=anchor.split(":");
                    arr[0]=+arr[0];
                    arr[1]=+arr[1];
                    if(arr[0]>=1 && arr[1]>=0 && arr[1]<=1){
                        var prf=this.get(0),cp=this._getConnectPath();
                        if(cp){
                            var cv=Raphael.path2curve(cp),cur,prev;
                            if((cur=cv[arr[0]])&&(prev=cv[arr[0]-1])){
                                rst = Raphael.findDotsAtSegment(prev[prev.length-2],prev[prev.length-1], cur[1],cur[2],cur[3],cur[4],cur[5],cur[6],arr[1]);
                            }
                        }
                    }
                }else{
                    var hash=this._getConnectAnchors();
                    rst = hash && hash[anchor];
                }

                if(prf._pathCached)_.set(prf._pathCached,['_connPoint',anchor],rst);

                return rst;
            }
        },
        _removeHandler:function(){
            return this.each(function(prf){
                var el,tt,hh;
                if(tt=prf._pathHandler){
                    if(hh=tt.handlers){
                        for(var i=0, ii=hh.length,o,t; i<ii; i++){
                            o=hh[i];
                            for(var j in o){
                                if((t=o[j]) && typeof t.remove=='function')t.remove();
                                o[i]=null;
                            }
                        }
                    }
                    el=tt.el;
                    delete tt.el;
                    delete prf._pathHandler;
                }
                delete prf._ddstartFun;
                delete prf._ddendFun;
                if(el && el._shape){
                    el._shape.remove();
                    delete el._shape;
                }
            });
        },
        _addHandler:function(callback, type){
            type=type||"adv";
            this._removeHandler();
            return this.each(function(prf){
                if(!prf._elset || !prf._elset[0])return;

                var r=prf.boxing().getPaper(),
                    isCombo=prf.box.ISCOMBO,
                    el=prf._elset[0],
                    absPos,
                    isConnector=prf.box._CONNECTOR,
                    connType=prf.properties.type,
                    dotAttr1 = {fill:"#fff",stroke:"#000",r:5},
                    dotAttr2 = {fill:"#fff",stroke:"#000",r:4},
                    dotAttr3 = {fill:"#fff",stroke:"#000",r:3},

                    dotAttr4 = {fill:"#fff",stroke:"#000",r:4},

                    dotAttr6 = {fill:"#bf5600",stroke:"#bf5600",r:5,"fill-opacity":0.5},

                    lineAttr = {stroke:"#0000FF","stroke-dasharray":". "},
                    rectAttr = {stroke:"#0000FF","stroke-dasharray":"- "},
                    shadowAttr1 = {stroke:"#ccc","stroke-dasharray":"- ",opacity:0.8},
                    shadowAttr2 = {opacity:0.8},

                    magneticDistance1 = 16,
                    magneticDistance2 = 16,

                    magneticPos,
                    magneticOffPos,

                    handlers = {
                        /*text:function (el){
                            el._.dirty=1;
                            var attr=el.attr(),handler={},bbox=el._getBBox(true);
                            handler.rectBox=createDDElem(r.rect(bbox.x, bbox.y, bbox.width, bbox.height).attr(rectAttr),el);
                            handler.dot = createDDElem(r.circle(bbox.cx, bbox.cy).attr(dotAttr1).attr('cursor','move'),
                                el,function (x, y){
                                    var rtn = moveFun(this, x,y);

                                    bbox.x+=rtn.rx;
                                    bbox.y+=rtn.ry;
                                    handler.rectBox.attr({x:bbox.x, y:bbox.y, width:bbox.width, height:bbox.height});
                                    moveFun(el, rtn.rx, rtn.ry);
                                });
                            return {
                                el:el,
                                handlers:[handler]
                            }
                        },*/
                        rect:function (el){
                            var attr=el.attr(),handler={};
                            handler.dot = createDDElem(r.circle(attr.x+attr.width/2, attr.y+attr.height/2).attr(dotAttr1).attr('cursor','move'),
                                el, function (x, y, ax, ay){
                                    var pos = moveFun(this, x,y,ax,ay),nshape;
                                    attr.x+=pos.rx;
                                    attr.y+=pos.ry;

                                    nshape={x:attr.x,y:attr.y};
                                    el.attr(nshape);

                                    if(el._shape)el._shape.attr(nshape);
                                    _.tryF(el.onShapeChanged,[nshape]);

                                    moveFun(handler.dot1, x,y,ax,ay);
                                    moveFun(handler.dot2, x,y,ax,ay);
                                    moveFun(handler.dot3, x,y,ax,ay);

                                    return {dx:pos.dx,dy:pos.dy};
                                },'main');
                            handler.dot1 = createDDElem(r.circle(attr.x, attr.y).attr(dotAttr2).attr('cursor','nw-resize'),
                                el, function (x, y, ax, ay){
                                    var x2=el.attr("x")+el.attr("width"),
                                        y2=el.attr("y")+el.attr("height"),
                                        pos = moveFun(this, x,y,ax,ay,null,x2,null,y2),
                                        nshape;
                                    attr.x=pos.cx;
                                    attr.y=pos.cy;
                                    attr.height=y2-pos.cy;
                                    attr.width=x2-pos.cx;

                                    nshape={x:attr.x,y:attr.y,width:attr.width,height:attr.height};
                                    el.attr(nshape);
                                    if(el._shape)el._shape.attr(nshape);
                                    _.tryF(el.onShapeChanged,[nshape]);

                                    handler.dot.attr({cx:attr.x+attr.width/2, cy:attr.y+attr.height/2});

                                    var m=Math.min(el.attr("width"),el.attr("height"));
                                    if(el.attr("r")>m){
                                        el.attr("r",attr.r=m);
                                        if(el._shape)el._shape.attr("r",m);
                                        _.tryF(el.onShapeChanged,[{r:m}]);
                                    }
                                    handler.dot3.attr({
                                        cx:el.attr("x")+el.attr("width")-el.attr("r"),
                                        cy:el.attr("y")
                                    });

                                    return {dx:pos.dx,dy:pos.dy};
                                },'w');
                            handler.dot2= createDDElem(r.circle(attr.x+attr.width, attr.y+attr.height).attr(dotAttr2).attr('cursor','se-resize'),
                                el, function (x, y, ax, ay){
                                    var pos = moveFun(this, x,y,ax,ay,attr.x,null,attr.y,null),
                                        nshape;

                                    attr.width=pos.cx-attr.x;
                                    attr.height=pos.cy-attr.y;

                                    nshape={width:attr.width, height:attr.height};
                                    el.attr(nshape);
                                    if(el._shape)el._shape.attr(nshape);
                                    _.tryF(el.onShapeChanged,[nshape]);

                                    handler.dot.attr({cx:attr.x+attr.width/2, cy:attr.y+attr.height/2});

                                    var m=Math.min(el.attr("width"),el.attr("height"));
                                    if(el.attr("r")>m){
                                        el.attr("r",attr.r=m);
                                        if(el._shape)el._shape.attr("r",m);
                                        _.tryF(el.onShapeChanged,[{r:m}]);
                                    }
                                    handler.dot3.attr({
                                        cx:el.attr("x")+el.attr("width")-el.attr("r"),
                                        cy:el.attr("y")
                                    });
                                    return {dx:pos.dx,dy:pos.dy};
                                },'h');
                            handler.dot3= createDDElem(r.circle(attr.x+attr.width-(attr.r||0), attr.y).attr(dotAttr3).attr('cursor','e-resize'),
                                el, function (x, y, ax, ay){
                                    var attr=el.attr(),
                                        pos = moveFun(this, x,y,ax,ay,(attr.x+attr.width-Math.max(attr.width,attr.height)/2),attr.x+attr.width, attr.y,attr.y),
                                        nshape;
                                    nshape={r:attr.width-(pos.cx-attr.x)};
                                    el.attr(nshape);
                                    if(el._shape)el._shape.attr(nshape);
                                    _.tryF(el.onShapeChanged,[nshape]);

                                    return {dx:pos.dx,dy:pos.dy};
                                },'r');
                            return {
                                el:el,
                                handlers:[handler]
                            }
                        },
                        circle:function (el){
                            var attr=el.attr(),handler={};
                            handler.dot = createDDElem(r.circle(attr.cx, attr.cy).attr(dotAttr1).attr('cursor','move'),
                                el, function (x, y){
                                    var rtn = moveFun(this, x, y ),
                                        pos = {cx:rtn.cx,cy:rtn.cy};
                                    attr.cx=pos.cx;
                                    attr.cy=pos.cy;
                                    el.attr(pos);
                                    if(el._shape)el._shape.attr(pos);
                                    _.tryF(el.onShapeChanged,[pos]);

                                    pos.cx += el.attr("r");
                                    handler.dotr.attr(pos);
                                },'main');
                            handler.dotr = createDDElem(r.circle(attr.cx+attr.r, attr.cy).attr(dotAttr2).attr('cursor','e-resize'),
                                el, function (x, y,ax,ay){
                                    var attr=el.attr(),
                                        pos = moveFun(this, x,y,ax,ay,attr.cx,null,attr.cy,attr.cy),
                                        nshape;
                                    attr.r=pos.cx-attr.cx;
                                    nshape={r:attr.r};
                                    el.attr(nshape);
                                    if(el._shape)el._shape.attr(nshape);
                                    _.tryF(el.onShapeChanged,[nshape]);

                                    return {dx:pos.dx,dy:pos.dy};
                                },'r');
                            return {
                                el:el,
                                handlers:[handler]
                            }
                        },
                        ellipse:function (el){
                            var attr=el.attr(),handler={},dot;
                            handler.dot = createDDElem(r.circle(attr.cx, attr.cy).attr(dotAttr1).attr('cursor','move'),
                                el, function (x, y){
                                    var rtn = moveFun(this, x,y),
                                        pos = {cx:rtn.cx,cy:rtn.cy};
                                    attr.cx=pos.cx;
                                    attr.cy=pos.cy;
                                    el.attr(pos);
                                    if(el._shape)el._shape.attr(pos);
                                    _.tryF(el.onShapeChanged,[pos]);

                                    handler.dotrx.attr({cx:pos.cx+el.attr("rx"),cy:pos.cy});
                                    handler.dotry.attr({cy:pos.cy-el.attr("ry"),cx:pos.cx});
                                },'main');
                            handler.dotrx = createDDElem(r.circle(attr.cx+attr.rx, attr.cy).attr(dotAttr2).attr('cursor','w-resize'),
                                el, function (x, y,ax,ay){
                                    var attr=el.attr(),
                                        pos = moveFun(this, x,y,ax,ay,attr.cx,null,attr.cy,attr.cy),
                                        nshape;
                                    attr.rx=pos.cx-attr.cx;
                                    nshape={rx:attr.rx};
                                    el.attr(nshape);
                                    if(el._shape)el._shape.attr(nshape);
                                    _.tryF(el.onShapeChanged,[nshape]);
                                    return {dx:pos.dx,dy:pos.dy};
                                },'rx');
                            handler.dotry = createDDElem(r.circle(attr.cx, attr.cy-attr.ry).attr(dotAttr2).attr('cursor','n-resize'),
                                el,function (x, y,ax,ay){
                                    var attr=el.attr(),
                                        pos = moveFun(this, x,y,ax,ay,attr.cx,attr.cx,null,attr.cy),
                                        nshape;
                                    attr.ry=attr.cy-pos.cy;
                                    nshape={ry:attr.ry};
                                    el.attr(nshape);
                                    if(el._shape)el._shape.attr(nshape);
                                    _.tryF(el.onShapeChanged,[nshape]);

                                    return {dx:pos.dx,dy:pos.dy};
                                },'ry');

                            return {
                                el:el,
                                handlers:[handler]
                            }
                        },
                        path : function (el){
                            var x, y, ox, oy, ax, ay, bx, by, zx, zy,
                                paths=el.getPath(),
                                manualPathModify,
                                addSegmentJunctionDD=function(r,el,x,y,index,type3,conType,prf){
                                    var circle=r.circle(x, y);

                                    if(conType=='from')
                                        circle.attr(dotAttr4);
                                    else if(conType=='to')
                                        circle.attr(dotAttr4);
                                    else
                                        circle.attr(dotAttr1).attr('cursor','move');

                                    return createDDElem(circle, el, function (x, y, ax, ay, beForced, mx, my,ix,iy,event, callback) {
                                        var paper=el.paper,
                                            ox = this.attr('cx'),
                                            oy = this.attr('cy'),
                                            X = _.isSet(ix)?ix:(ox + x),
                                            Y = _.isSet(iy)?iy:(oy + y),
                                            pos,anchorPos;
                                        if(_.isSet(ix)){
                                            x=X-ox;
                                        }
                                        if(_.isSet(iy)){
                                            y=Y-oy;
                                        }
                                        // for connector
                                        // find target connected el, draw/undraw magnetic dots
                                        if(conType=='from'||conType=='to'){
                                            var d=el.node.ownerDocument||document;

                                            // hide those for get right object
                                            this.hide();
                                            prf._elset.hide();
                                            el._shape.hide();
                                            _.arr.each(handlers,function(o,i){
                                                if(i=o.dot)i.hide();
                                                if(i=o.dot1)i.hide();
                                                if(i=o.dot2)i.hide();
                                                if(i=o.dot3)i.hide();
                                                if(i=o.dotPrev)i.hide();
                                                if(i=o.dotNext)i.hide();
                                                if(i=o.linePrev)i.hide();
                                                if(i=o.lineNext)i.hide();
                                            });
                                            // get right object under mouse
                                            var esrc=d.elementFromPoint(mx, my);
                                            // show again
                                            this.show();
                                            prf._elset.show();
                                            el._shape.show();
                                            _.arr.each(handlers,function(o,i){
                                                if(i=o.dot)i.show();
                                                if(i=o.dot1)i.show();
                                                if(i=o.dot2)i.show();
                                                if(i=o.dot3)i.show();
                                                if(i=o.dotPrev)i.show();
                                                if(i=o.dotNext)i.show();
                                                if(i=o.linePrev)i.show();
                                                if(i=o.lineNext)i.show();
                                            });

                                            if(esrc._rootNode)
                                                esrc=esrc._rootNode;

                                            if(!esrc)
                                                return;
                                            // special one
                                            if(esrc && esrc.raphael){
                                                var o=paper.getById(esrc.raphaelid);
                                                if(o && o._attached){
                                                    esrc = o._attached;
                                                }
                                            }

                                            // get the top widget
                                            while(esrc &&
                                                (
                                                    (!esrc.id)
                                                    || esrc.id==xui.$localeDomId
                                                    || esrc.tagName=='tspan'
                                                )
                                                && esrc!==paper.canvas.parentNode
                                                && esrc.parentNode!==d
                                            ){
                                                esrc=esrc.parentNode;
                                            }

                                            if(!esrc)
                                                return;

                                            // has anchors or anchorPath
                                            var magneticObj,anchorKey,
                                                targetNode,anchors,anchorPath,centerPoint,
                                                anchorShadow=paper._anchorShadow;
                                            if(esrc!==paper.canvas){
                                                var tobj=xui.UIProfile.getFromDom(esrc.id);
                                                if(tobj && tobj.parent&& tobj.parent._paper==paper){
                                                    if(tobj.box['xui.svg']){
                                                        targetNode=tobj.getRootNode();
                                                        if(!tobj.box._CONNECTOR){
                                                            anchors=tobj.boxing()._getConnectAnchors();
                                                            anchorPath=tobj.boxing()._getConnectPath();
                                                            if(anchorPath){
                                                                var anchorBBox;
                                                                if(anchorBBox=_.get(tobj._pathCached,['_connBBox'])){
                                                                }else{
                                                                    anchorBBox=Raphael.pathBBox(anchorPath);
                                                                    _.set(tobj._pathCached,['_connBBox'], anchorBBox);
                                                                }
                                                                centerPoint={x:anchorBBox.x+anchorBBox.width/2,y:anchorBBox.y+anchorBBox.height/2};
                                                            }
                                                            magneticObj=tobj.alias;
                                                        }
                                                    }else if(tobj.box['xui.UI']){
                                                        //console.log(esrc.id,tobj.getRoot().cssRegion(),X,Y,mx,my);
                                                    }
                                                }
                                            }


                                            // remove anchorShadow
                                            if(anchorShadow && ((!anchors && !anchorPath) || anchorShadow._attached!==targetNode)){
                                                anchorShadow.remove();
                                                anchorShadow.clear();
                                                anchorShadow=null;
                                                delete paper._anchorShadow;
                                                this.show();
                                            }
                                            // draw anchorShadow
                                            if(anchors || anchorPath){
                                                if(!anchorShadow){
                                                    anchorShadow=paper.set();
                                                    anchorShadow._attached=targetNode;

                                                    var circle=paper.circle(-100,-100);
                                                    circle._attached=targetNode;
                                                    circle.hide();
                                                    anchorShadow.push(circle);

                                                    // draw anchorShadow
                                                    for(var i in anchors){
                                                        o=anchors[i];
                                                        circle=paper.circle(o.x, o.y);
                                                        circle._attached=targetNode;
                                                        circle._anchorKey=i;
                                                        anchorShadow.push(circle);
                                                    }

                                                    anchorShadow.attr(dotAttr6);
                                                    paper._anchorShadow=anchorShadow;
                                                }

                                                // magnetic function
                                                var minDis=null;
                                                for(var i in anchors){
                                                    distance=Math.pow(Math.pow(Math.abs(ix-anchors[i].x),2)+Math.pow(Math.abs(iy-anchors[i].y),2),1/2);
                                                    if(distance<=magneticDistance1){
                                                        if(minDis===null || minDis>distance){
                                                            minDis=distance;
                                                            anchorPos=anchors[i];
                                                            anchorKey=i;
                                                        }
                                                    }
                                                }
                                                if(!anchorPos){
                                                    // for path magnetic
                                                    if(anchorPath){
                                                        var v=magneticDistance2,
                                                            path="M,"+X+","+Y+"m,0,-"+v+"a,"+v+","+v+",0,1,1,0,"+v*2+"a,"+v+","+v+",0,1,1,0,-"+v*2+"z",
                                                            len=Raphael.getTotalLength(path)/2,
                                                            cross=Raphael.pathIntersection(anchorPath, path);

                                                        if(cross.length>=2){
                                                            var x0=(cross[0].x+cross[1].x)/2,y0=(cross[0].y+cross[1].y)/2,
                                                                angle=Raphael.angle(x0,y0,X,Y);

                                                            if((Math.abs(x0-centerPoint.x)+Math.abs(y0-centerPoint.y))<Math.abs(X-centerPoint.x)+Math.abs(Y-centerPoint.y)){
                                                                angle+=180;
                                                            }

                                                            var rad=Raphael.rad(angle),
                                                                x1 = X - v * Math.cos(rad),
                                                                x2 = X + v * Math.cos(rad),
                                                                y1 = Y - v * Math.sin(rad),
                                                                y2 = Y + v * Math.sin(rad);

                                                            cross=Raphael.pathIntersection(anchorPath, "M"+x1+","+y1+",L"+x2+","+y2);
                                                            if(cross.length===1){
                                                                var b=cross[0].bez1,
                                                                    ppath="M"+b[0]+","+b[1]+"C"+b[2]+","+b[3]+","+b[4]+","+b[5]+","+b[6]+","+b[7],
                                                                    point=Raphael.getPointAtLength(ppath, cross[0].t1*Raphael.getTotalLength(ppath));
                                                                anchorKey=cross[0].segment1 + ":" + cross[0].t1;
                                                                anchorPos={
                                                                    x:cross[0].x,
                                                                    y:cross[0].y,
                                                                    alpha:angle,
                                                                    _path:true
                                                                };
                                                            }
                                                        }
                                                    }
                                                }

                                                if(anchorPos){
                                                    // hold
                                                    if(magneticPos){
                                                        // still the old magnetic
                                                        if(magneticPos.x==anchorPos.x && magneticPos.y==anchorPos.y){
//console.log('still the old magnetic');
                                                            x=y=0;
                                                            ax=magneticOffPos.x;
                                                            ay=magneticOffPos.y;
                                                        }
                                                        // swtich to the new magnetic
                                                        else{
//console.log('swtich to the new magnetic');
                                                            x = anchorPos.x-magneticPos.x;
                                                            y = anchorPos.y-magneticPos.y;

                                                            // need return to adjust
                                                            ax = magneticOffPos.x + x;
                                                            ay = magneticOffPos.y + y;
                                                            magneticPos={x:anchorPos.x,y:anchorPos.y};
                                                            magneticOffPos={x:ax,y:ay};
                                                            if(anchorPos._path){
                                                                anchorShadow[0].attr({cx:anchorPos.x,cy:anchorPos.y});
                                                                anchorShadow[0].show();
                                                            }else{
                                                                anchorShadow[0].hide();
                                                            }
                                                        }
                                                    }
                                                    // first magnetic
                                                    else{
//console.log('first magnetic');
                                                        x += anchorPos.x-ix;
                                                        y += anchorPos.y-iy;

                                                        // need return to adjust
                                                        ax += anchorPos.x-ix;
                                                        ay += anchorPos.y-iy;
                                                        magneticPos={x:anchorPos.x,y:anchorPos.y};
                                                        magneticOffPos={x:ax,y:ay};

                                                        if(anchorPos._path){
                                                            anchorShadow[0].attr({cx:anchorPos.x,cy:anchorPos.y});
                                                            anchorShadow[0].show();
                                                        }else{
                                                            anchorShadow[0].hide();
                                                        }
                                                    }

                                                    X = anchorPos.x;
                                                    Y = anchorPos.y;

                                                    pos={dx:ax,dy:ay};
                                                }
                                            }
                                            // off-magnetic
                                            if(!anchorPos && magneticPos){
                                                x = ix-magneticPos.x;
                                                y = iy-magneticPos.y;

                                                // need return to adjust
                                                ax = magneticOffPos.x + x;
                                                ay = magneticOffPos.y + y;

                                                magneticPos=magneticOffPos=null;

                                                if(anchorShadow)
                                                    anchorShadow[0].hide();
                                            }

                                            // keep connector parameters
                                            prf.properties[conType=='from'?'fromObj':'toObj'] = magneticObj || "";
                                            prf.properties[conType=='from'?'fromPoint':'toPoint'] = anchorKey || "";
                                        }

                                        // normal move function
                                        var pathModified,
                                            pos = {cx: X, cy: Y};
                                        if(beForced || false!==_.tryF(manualPathModify,[index,paths,X,Y,this,pos])){
                                            var i=this._handlerIndex,
                                                l=paths[i].length,
                                                data=handlers[i],
                                                data2,p,d;

                                            if(!beForced){
                                                if(type3=='V'){
                                                    // stop the last H/V's prev V/H moving
                                                    if(handlers.length-1==i+1 && handlers[i+1].type=='H'){
                                                        delete pos.cy;
                                                        y=ay=0;
                                                    }else{
                                                        paths[i][l-1] = Y;
                                                    }

                                                    // try to move previoius path point
                                                    if((0!==i-1)&&(data2=handlers[i-1])){
                                                        if(data2.type=="H"){
                                                            paths[i-1][1] = X;
                                                            if(d=data2.dot)d.update(x, 0, ax, 0, true, mx, my);
                                                        }else if(data2.type=="V"){
                                                            delete pos.cx;
                                                        }else if(data2.type=="L"){
                                                            paths[i-1][paths[i-1].length-2] = X;
                                                            if(d=data2.dot)d.update(x, 0, ax, 0, true, mx, my);
                                                        }else{
                                                            delete pos.cx;
                                                        }
                                                    }else{
                                                        delete pos.cx;
                                                    }
                                                }else if(type3=='H'){
                                                    // stop the last H/V's prev V/H moving
                                                    if(handlers.length-1==i+1 && handlers[i+1].type=='V'){
                                                        delete pos.cx;
                                                        x=ax=0;
                                                    }else{
                                                        paths[i][l-1] = X;
                                                    }

                                                    // try to move previoius path point
                                                    if((0!==i-1)&&(data2=handlers[i-1])){
                                                        if(data2.type=="H"){
                                                            delete pos.cy;
                                                        }else if(data2.type=="V"){
                                                            paths[i-1][1] = Y;
                                                            if(d=data2.dot)d.update(0, y, ax, ay, true, mx, my);
                                                        }else if(data2.type=="L"){
                                                            paths[i-1][paths[i-1].length-1] = Y;
                                                            if(d=data2.dot)d.update(0, y, ax, ay, true, mx, my);
                                                        }else{
                                                            delete pos.cy;
                                                        }
                                                    }else{
                                                        delete pos.cy;
                                                    }
                                                }else{
                                                    paths[i][l-2] = X;
                                                    paths[i][l-1] = Y;
                                                }

                                                // move next handler's dot
                                                if((data2=handlers[i+1]) && (d=data2.dot)){
                                                    if(data2.type=='V'){
                                                        d.update(x, 0, ax, 0, true, mx, my);
                                                    }else if(data2.type=='H'){
                                                        d.update(0, y, 0, ay, true, mx, my);
                                                    }
                                                }
                                            }

                                            // move dot itself
                                            this.attr(pos);

                                            // move other linked dots
                                            if(p=data.linePrevPath){
                                                p[0][1] = X;
                                                p[0][2] = Y;
                                            }
                                            if(p=data.lineNextPath){
                                                p[0][1] = X;
                                                p[0][2] = Y;
                                            }
                                            if(d=data.dotPrev){
                                                d.update(X-ox, Y-oy, ax, ay, true);
                                                pathModified=true;
                                            }
                                            if(d=data.dotNext){
                                                d.update(X-ox, Y-oy, ax, ay, true);
                                                pathModified=true;
                                            }
                                        }
                                        // modify path
                                        if(!pathModified){
                                            var nshape={path: paths};
                                            el.attr(nshape);
                                            if(el._shape)el._shape.attr(nshape);
                                            _.tryF(el.onShapeChanged,[nshape]);
                                        }

                                        // adjust angle for connector
                                        if((conType=='from'||conType=='to') && connType=='bezier' && anchorPos && (X!==ox || Y!==oy)){
                                            var dot=conType=='from'?handlers[0].dotNext:handlers[paths.length-1].dotPrev;
                                            if(dot){
                                                var x0=dot.attr('cx'),
                                                    y0=dot.attr('cy'),
                                                    distance=Math.pow(Math.pow(Math.abs(X-x0),2)+Math.pow(Math.abs(Y-y0),2),1/2),
                                                    rad=Raphael.rad(anchorPos.alpha),
                                                    x1 = X + distance * Math.cos(rad),
                                                    y1 = Y + distance * Math.sin(rad);
                                                dot.update(x1-x0, y1-y0, null, null, true);
                                            }
                                        }
                                        // adjust drag pos
                                        if(pos)return pos;
                                    },'main',index);
                                },
                                addBezierAnchor2DD=function(r,el,x,y,index,conType,prf){
                                    return createDDElem(r.circle(x, y).attr(dotAttr3),
                                        el, function (x, y) {
                                            var X = this.attr("cx") + x,
                                                Y = this.attr("cy") + y,
                                                nshape;
                                            this.attr({cx: X, cy: Y});

                                            var i=this._handlerIndex,data=handlers[i],p,d;
                                            if(p=data.lineNextPath){
                                                p[1][1] = X;
                                                p[1][2] = Y;
                                            }
                                            if(d=data.lineNext){
                                                d.attr({path: p});
                                            }

                                            paths[i+1][1] = X;
                                            paths[i+1][2] = Y;

                                            nshape={path: paths};
                                            el.attr(nshape);
                                            if(el._shape)el._shape.attr(nshape);
                                            _.tryF(el.onShapeChanged,[nshape]);
                                        },'path2',index);
                                },
                                addBezierAnchor1DD=function(r,el,x,y,index,conType,prf){
                                    return createDDElem(r.circle(x, y).attr(dotAttr3),
                                        el, function (x, y) {
                                            var X = this.attr("cx") + x,
                                                Y = this.attr("cy") + y,
                                                nshape;
                                            this.attr({cx: X, cy: Y});

                                            var i=this._handlerIndex,data=handlers[i],p,d;
                                            if(p=data.linePrevPath){
                                                p[1][1] = X;
                                                p[1][2] = Y;
                                            }
                                            if(d=data.linePrev){
                                                d.attr({path: p});
                                            }

                                            paths[i][paths[i].length-4] = X;
                                            paths[i][paths[i].length-3] = Y;
                                            nshape={path: paths};
                                            el.attr(nshape);
                                            if(el._shape)el._shape.attr(nshape);
                                            _.tryF(el.onShapeChanged,[nshape]);
                                        },'path1',index);
                                },
                                type1=1,type2=1,type3=0,prevtype2=1,
                                handlers=[];
                            if(_.isStr(paths))paths=Raphael.parsePathString(paths);
                            // connector [type=flowchart] show two point only when dd
                            if(isConnector && connType=="flowchart"){
                                prf._ddstartFun=function(prf,index,dot){
                                    if(index===0 || index===prf._pathHandler.handlers.length-1)
                                        _.arr.each(prf._pathHandler.handlers,function(o,i){
                                            if(i!==0 && i!==prf._pathHandler.handlers.length-1)
                                                o.dot.attr({opacity:0,r:0});
                                        });
                                };
                                prf._ddendFun=function(prf,index, dot){
                                    if(index===0 || index===prf._pathHandler.handlers.length-1)
                                        prf.boxing()._addHandler(callback);
                                };
                                manualPathModify=function(index,paths,X,Y,dot,pos){
                                    if(index===0 || index===prf._pathHandler.handlers.length-1){
                                        // move the dot itself
                                        dot.attr(pos);
                                        // modify path manually
                                        var np=prf.box._redrawBrokenLine(prf,index===0?'start':'end',X,Y);

                                        // renew paths
                                        paths.length=0;
                                        _.arr.each(np,function(p){
                                            paths.push(p);
                                        });
                                        // stop default path modifing
                                        return false;
                                    }
                                }
                            }

                            for(var i=0, ii=paths.length, l, handler; i<ii; i++){
                                var conType;
                                if(isConnector)
                                    conType=(i===0)?"from":(i===(ii-1))?"to":null;

                                handlers.push(handler={
                                    dot:0,
                                    dotPrev:0,
                                    dotNext:0,
                                    linePrev:0,
                                    lineNext:0,
                                    linePrevPath:0,
                                    lineNextPath:0,
                                    type:paths[i][0]
                                });

                                l = paths[i].length;
                                type3=0;
                                switch (paths[i][0]) {
                                    case "M":
                                        x = zx = ox = paths[i][l - 2];
                                        y = zy = oy = paths[i][l - 1];
                                        type1=0;
                                        type2=1;
                                        break;
                                    case "L":
                                        type1=type2=1;
                                        zx = ox = paths[i][l - 2];
                                        zy = oy = paths[i][l - 1];
                                        break;
                                    case "H":
                                        type1=type2=1;
                                        zy = oy = y;
                                        zx = ox = paths[i][1];
                                        type3='H';
                                        break;
                                    case "V":
                                        type1=type2=1;
                                        zx = ox = x;
                                        zy = oy = paths[i][1];
                                        type3='V';
                                        break;
                                    case "C":
                                        type1=type2=2;
                                        ax = paths[i][l - 6];
                                        ay = paths[i][l - 5];
                                        bx = paths[i][l - 4];
                                        by = paths[i][l - 3];
                                        ox = zx = paths[i][l - 2];
                                        oy = zy = paths[i][l - 1];
                                        break;
                                    case "Q":
                                        type1=2;
                                        type2=1;
                                        ax = paths[i][l - 4];
                                        ay = paths[i][l - 3];
                                        ox = zx = paths[i][l - 2];
                                        oy = zy = paths[i][l - 1];
                                        break;
                                    case "S":
                                        type1=1;
                                        type2=2;
                                        bx = paths[i][l - 4];
                                        by = paths[i][l - 3];
                                        ox = zx = paths[i][l - 2];
                                        oy = zy = paths[i][l - 1];
                                        break;
                                    case "T":
                                        type1=type2=1;
                                        ox = zx = paths[i][l - 2];
                                        oy = zy = paths[i][l - 1];
                                        break;
                                    case "A":
                                        // TODO: to add
                                        // currently, jump to end only
                                        type1=type2=0;
                                        ox = zx = paths[i][l - 2];
                                        oy = zy = paths[i][l - 1];
                                        continue;
                                    //case "R":
                                    //case "Z":
                                    default:
                                        continue;
                                }

                                switch(type1){
                                    case 0:
                                    // no dot
                                    break;
                                    case 1:
                                    // added
                                    break;
                                    case 2:
                                        if(type=="adv"){
                                            handlers[i-1].lineNextPath=[["M", x, y], ["L", ax, ay]],
                                            handlers[i-1].lineNext=r.path(handlers[i-1].lineNextPath).attr(lineAttr);
                                            handlers[i-1].dotNext=addBezierAnchor2DD(r,el,ax,ay,i-1,conType,prf);
                                        }
                                    break;
                                }

                                switch(type2){
                                    // case 0:
                                    // no dot
                                    // break;
                                    case 1:
                                        // 1 dot
                                        handlers[i].dot=addSegmentJunctionDD(r,el,zx,zy,i,type3,conType,prf);

                                        // hide this unmovable dot
                                        if(isConnector && connType=="flowchart" && ii===3 && i===1){
                                            handlers[i].dot.attr({opacity:0,r:0});
                                        }
                                    break;
                                    case 2:
                                        // 2 dots
                                        handlers[i].dot=addSegmentJunctionDD(r,el,zx,zy,i,null,conType,prf);
                                        if(type=="adv"){
                                            handlers[i].linePrevPath=[["M", zx, zy], ["L", bx, by]],
                                            handlers[i].linePrev=r.path(handlers[i].linePrevPath).attr(lineAttr);
                                            handlers[i].dotPrev=addBezierAnchor1DD(r,el,bx,by,i,conType,prf);
                                        }
                                    break;
                                }
                                if(ox!=undefined)x=ox;
                                if(oy!=undefined)y=oy;

                                prevtype2=type2;
                            }
                            return {
                                el:el,
                                handlers:handlers
                            }
                        }
                    },
                    move = function(dx, dy, mx, my, event) {
                        var rtn = this.update(dx - (this.dx || 0), dy - (this.dy || 0), dx, dy, false, mx, my, mx-absPos.left, my-absPos.top, event);
                        this.dx = (rtn&&rtn.dx)||dx;
                        this.dy = (rtn&&rtn.dy)||dy;

                        if(callback)callback(this, event, 'drag', this._attached);
                    },
                    start = function(mx,my,event){
                        if(callback)callback(this, event, 'beforedragstart', this._attached);
                        this.toFront();

                        this.dx = this.dy = 0;

                        magneticPos=magneticOffPos=null;

                        absPos = xui(this.paper.canvas.parentNode).offset(null);

                        var cursor=this.attr('cursor'),t;
                        this._oldCursor = (t=r.canvas.style).cursor||"";
                        t.cursor = cursor;

                        if(t=this._attached){
                            t._oldCursor=t.attr('cursor')||"";
                            t.attr("cursor", cursor);
                            t._opath=t.getPath();
                            t._obbox=Raphael.pathBBox(t._opath);

                            // get prf
                            if(prf._ddstartFun)_.tryF(prf._ddstartFun,[prf, this._handlerIndex,this]);
                        }

                        if(callback)callback(this, event, 'dragstart', this._attached);
                    },
                    end=function(event){
                        if(callback)callback(this, event, 'beforedragend', this._attached);
                        absPos=null;

                        magneticPos=magneticOffPos=null;

                        var paper=this.paper;
                        r.canvas.style.cursor = this._oldCursor;
                        delete this._oldCursor;

                        var t;
                        if(t=this._attached){
                            t.attr('cursor',t._oldCursor);
                            delete t._oldCursor;
                            delete t._obbox;
                            delete t._opath;

                            var attr=t.attr();
                            if(isCombo){
                                _.merge(prf.properties.attr.KEY,attr,'all');
                                attr=prf.properties.attr.KEY;
                            }else{
                                _.merge(prf.properties.attr,attr,'all');
                                attr=prf.properties.attr;
                            }
                            if(attr.path)
                                attr.path=t.getPath().join('');

                            prf.box._notify(prf, {path:1}, true);


                            // get prf
                            if(prf._ddendFun)_.tryF(prf._ddendFun,[prf,this._handlerIndex,this]);

                        }
                        if(t=paper._anchorShadow){
                            t.remove();
                            t.clear();
                            delete paper._anchorShadow;
                        }
                        if(callback)callback(this, event, 'dragend', this._attached);
                    },
                    createDDElem=function(obj,el,update,key,index){
                        obj._handlerIndex=index||0;
                        obj._attached=el;
                        if(update){
                            obj.drag(move,start,end);
                            obj.update=update;
                            obj.dblclick(function(event){
                                if(callback)callback(this, event, 'dblclick', el, key, index);
                            });
                            obj.click(function(event){
                                if(callback)callback(this, event, 'click', el, key, index);
                                xui.Event.stopBubble(event);
                                xui.Event.stopDefault(event);
                            });
                            obj.contextmenu(function(event){
                                if(callback)callback(this, event, 'contextmenu', el, key, index);
                            });
                            // stop select parent
                            //xui(obj.node).onContextMenu(function(){
                            //    return false;
                            //});
                        }
                        obj.toFront();
                        return obj;
                    },
                    moveFun=function (el, x, y, ax, ay, limitX1, limitX2, limitY1, limitY2){
                        switch(el.type){
                            case 'path':{
                                var paths=el.getPath(),nshape;
                                for(var i=0, ii=paths.length, l; i<ii; i++){
                                    l = paths[i].length;
                                    switch (paths[i][0]) {
                                        case "M":
                                        case "L":
                                            paths[i][1] += x;
                                            paths[i][2] += y;
                                            break;
                                        case "H":
                                            paths[i][1] += x;
                                            break;
                                        case "V":
                                            paths[i][1] += y;
                                            break;
                                        case "C":
                                            paths[i][1] += x;
                                            paths[i][2] += y;
                                            paths[i][3] += x;
                                            paths[i][4] += y;
                                            paths[i][5] += x;
                                            paths[i][6] += y;
                                            break;
                                        case "Q":
                                        case "S":
                                            paths[i][1] += x;
                                            paths[i][2] += y;
                                            paths[i][3] += x;
                                            paths[i][4] += y;
                                            break;
                                        case "T":
                                            paths[i][1] += x;
                                            paths[i][2] += y;
                                            break;
                                        case "A":
                                            paths[i][l-2] += x;
                                            paths[i][l-1] += y;
                                            continue;
                                        //case "R":
                                        //case "Z":
                                        default:
                                            continue;
                                    }
                                }
                                nshape={path: paths};
                                el.attr(nshape);
                                if(el._shape)el._shape.attr(nshape);
                                _.tryF(el.onShapeChanged,[nshape]);
                                break;
                            }
                            case 'circle':{
                                var X1=el.attr("cx"),
                                    Y1=el.attr("cy"),
                                    X = X1 + x,
                                    Y = Y1 + y,
                                    lx=0,
                                    ly=0,rst;
                                if((limitX1===0||limitX1)&&X<(limitX1+1)){
                                    lx=X-(limitX1+1);
                                    X=(limitX1+1);
                                }
                                if((limitX2===0||limitX2)&&X>limitX2){
                                    lx=X-limitX2;
                                    X=limitX2;
                                }
                                if((limitY1===0||limitY1)&&Y<(limitY1+1)){
                                    ly=Y-(limitY1+1);
                                    Y=(limitY1+1);
                                }
                                if((limitY2===0||limitY2)&&Y>limitY2){
                                    ly=Y-limitY2;
                                    Y=limitY2;
                                }
                                rst={cx: X, cy: Y, rx:x, ry:y};
                                el.attr(rst);
                                if(el._shape)el._shape.attr(rst);
                                _.tryF(el.onShapeChanged,[rst]);
                                rst.dx=ax-lx;
                                rst.dy=ay-ly;
                                return rst;
                            }
                            case 'ellipse':{
                                var X = el.attr("cx") + x,
                                    Y = el.attr("cy") + y,
                                    nshape={cx: X, cy: Y};
                                el.attr(nshape);
                                if(el._shape)el._shape.attr(nshape);
                                _.tryF(el.onShapeChanged,[nshape]);
                                break;
                            }
                            case 'rect':{
                                var X = el.attr("x") + x,
                                    Y = el.attr("y") + y,
                                    nshape={x: X, y: Y};
                                el.attr(nshape);
                                if(el._shape)el._shape.attr(nshape);
                                _.tryF(el.onShapeChanged,[nshape]);
                                break;
                            }
                            case 'text':{
                                var X = el.attr("x") + x,
                                    Y = el.attr("y") + y,
                                    nshape={x: X, y: Y};
                                el.attr(nshape);
                                if(el._shape)el._shape.attr(nshape);
                                _.tryF(el.onShapeChanged,[nshape]);
                                break;
                            }
                        }
                    };

                if(handlers[el.type]){
                    prf._pathHandler=handlers[el.type](el);

                    el=el._shape=el.clone();
                    el.attr({"arrow-start":"none","arrow-end":"none"});
                    el.transform("").attr(el.type=='text'?shadowAttr2:shadowAttr1).toBack();
                }
            });
        }
    },
    Static:{
        $abstract:true,
        _objectProp:{attr:1},
        DataModel:{
            selectable:null,
            defaultFocus:null,
            renderer:null,
            position:null,
            disableClickEffect:null,
            disableHoverEffect:null,
            disableTips:null,
            disabled:null,
            //zIndex:null,
            left:null,
            top:null,
            right:null,
            bottom:null,
            width:null,
            height:null,


            svgTag:{
                ini:""
            },
            attr:{
                ini:{}
            },
            shadow:{
                ini:false,
                action:function(v){
                    if(v && !this._shadow){
                        this._shadow=this._elset[0].shadow();
                    }else if(this._shadow){
                        this._shadow.remove();
                        this._shadow.clear();
                        delete this._shadow;
                    }
                }
            }

        },
        Behaviors:{
            HotKeyAllowed:false,
            HoverEffected:{KEY:'KEY'},
            ClickEffected:{KEY:'KEY'},
            onClick:function(profile, e, src){
                if(profile.$inDesign)return false;
                var p=profile.properties;
                if(p.disabled)return false;
                //onClick event
                if(profile.onClick)
                    return profile.boxing().onClick(profile, e, src);
            },
            onDblclick:function(profile, e, src){
                if(profile.$inDesign)return false;
                var p=profile.properties;
                if(p.disabled)return false;
                //onClick event
                if(profile.onDblClick)
                    return profile.boxing().onDblClick(profile, e, src);
            },
            onContextmenu:function(profile, e, src){
                if(profile.onContextmenu)
                    return profile.boxing().onContextmenu(profile, e, src)!==false;
            }
        },
        EventHandlers:{
            onClick:function(profile, e, src){},
            onDblClick:function(profile, e, src){},
            onContextmenu:function(profile, e, src){},
            onHotKeydown:null,
            onHotKeypress:null,
            onHotKeyup:null
        },
        _beforeSerialized:function(profile){
            var o = arguments.callee.upper.call(this,profile),prop=o.properties;
            prop.attr=_.clone(prop.attr,true);
            _.filter(prop.attr,function(o,i){
                if(i=='transform'&&(!o||o.length<1))return false;
                if(i=='href'||i=='target')return false;
                if(i=='path' && _.isArr(prop.attr.path))prop.attr.path=o.join('');
            });
            return o;
        },
        RenderTrigger:function(){
            var prf=this;
            (prf.$beforeDestroy=(prf.$beforeDestroy||{}))["svgClear"]=function(){
                if(prf._elset){
                    prf._elset.forEach(function(el){
                        if(el)delete el._rootNode;
                    });
                    prf._elset.remove();
                    prf._elset.clear();
                    delete prf._elset;
                }
                if(prf._shadow){
                    prf._shadow.remove();
                    prf._shadow.clear();
                    delete prf._shadow;
                }
            };
            prf.box._initAttr2UI(prf);
        },
        _RenderSVG:function(prf){
            prf._pathCached={};
            var p=prf.parent;
            if(p && p._paper && p._canvas){
                prf._elset=this._draw(p._paper, prf, prf.properties);
                for(var i=1,l=prf._elset.length;i<l;i++){
                    prf._elset._rootNode=prf._elset[0];
                }
            }
        },
        _adjustAttr:function(attr){
            var ns=this,
                attr2={},
                attr3=xui.svg.$attr;
            // get valid attr
            _.each(attr,function(o,i){
                if(/^[A-Z_]+(_[0-9]+)?$/.test(i) && _.isHash(o) && ((i.indexOf("_")!=-1)||( i in ns.$tagName))){
                    attr2[i]=attr2[i]||{};
                    _.each(o,function(o1,i1){
                        if(attr3[ns.$tagName[i]|| i.split("_")[0].toLowerCase()][i1])
                            attr2[i][i1]=o1;
                    });
                }else if(attr3[ns.$tagName.KEY][i]){
                    attr2.KEY=attr2.KEY||{};
                    attr2.KEY[i]=o;
                }
            });
            return attr2;
        },
        _initAttr2UI:function(prf){
            var attr=this._adjustAttr(prf.properties.attr);
            // set svg attr
            if(prf._elset){
                prf.boxing().setAttr(attr);
            }
            if(prf.properties.shadow)
                prf.boxing().setShadow(true,true);
        },
        $adjustBB:function(key,value){
            var bb=typeof(key)=='object'?key:{},keys="left,top,right,bottom,x,y,x2,y2,width,height".split(",");
            if(typeof(key)=="string")bb[key]=value;
            _.filter(bb,function(v,k){
                if(_.arr.indexOf(keys,k)==-1 || v==='auto' || v==='')return false;
                if(!_.isNumb(v))bb[k]=parseFloat(v);
                if(!_.isNumb(v))return false;
            });
            if('left' in bb){bb.x=bb.left;delete bb.left;}
            if('top' in bb){bb.y=bb.top;delete bb.top;}
            if('right' in bb){bb.x2=bb.right;delete bb.right;}
            if('bottom' in bb){bb.y2=bb.bottom;delete bb.bottom;}
            // conflict
            if('x' in bb && 'width' in bb)delete bb.x2;
            if('y' in bb && 'height' in bb)delete bb.y2;
            // recaculate
            if('x2' in bb){
                if('width' in bb) bb.x=bb.x2-bb.width;
                else bb.width=bb.x2-bb.x;
                delete bb.x2;
            }
            if('y2' in bb){
                if('height' in bb)bb.y=bb.y2-bb.height;
                else bb.height=bb.y2-bb.y;
                delete bb.y2;
            }

            return bb;
        },
        $transform:function(opath,trans){
            if(!_.isStr(opath))opath=opath.join('');
            if(/[mlhvcsqtaz]/.test(opath)){
                opath = Raphael._pathToAbsolute(opath);
            }else{
                opath=Raphael.parsePathString(opath);
            }
            var npath=Raphael.transformPath(opath,trans),
                rotate=/[r]/.test(trans);
            for(var i=0,l=npath.length,ll,t;i<l;i++){
                if(npath[i][0]!=opath[i][0]){
                    ll=npath[i].length;
                    switch (t=opath[i][0]) {
                    case "M":
                        // keep "M"
                        break;
                    case "L":
                        npath[i]=[t,npath[i][ll-2],npath[i][ll-1]];
                        break;
                    case "H":
                        if(rotate)
                            npath[i]=["L",npath[i][ll-2],npath[i][ll-1]];
                        else
                            npath[i]=[t,npath[i][ll-2]];
                        break;
                    case "V":
                        if(rotate)
                            npath[i]=["L",npath[i][ll-2],npath[i][ll-1]];
                        else
                            npath[i]=[t,npath[i][ll-1]];
                        break;
                    case "C":
                        // keep "C"
                        break;
                    case "Q":
                        npath[i]=[t,npath[i][ll-6],npath[i][ll-5],npath[i][ll-2],npath[i][ll-1]];
                        break;
                    case "S":
                        npath[i]=[t,npath[i][ll-4],npath[i][ll-3],npath[i][ll-2],npath[i][ll-1]];
                        break;
                    case "T":
                        npath[i]=[t,npath[i][ll-2],npath[i][ll-1]];
                        break;
                    case "A":
                        // keep "C"
                        break;
                    //case "R":
                    case "Z":
                        npath[i]=[t];
                        break;
                    default:
                        continue;
                    }
                }
            }
            return npath.join('');
        },
        $setBB:function(prf,type,bbox,attr,el,notify){
            var h={},
                // for IE9 cant set bbox prop
                copy=function(o){var a={};for(var i in o)a[i]=o[i];return a;};
            switch(type){
                case 'circle':{
                    if(_.isNumb(bbox.width))
                        h.r=bbox.width/2;
                    if(_.isNumb(bbox.height)){
                        if(bbox.height/2>=attr.r && (_.isSet(h.r)?h.r>=attr.r:1))
                            h.r=_.isSet(h.r)?Math.max(h.r,bbox.height/2):(bbox.height/2);
                        else
                            h.r=_.isSet(h.r)?Math.min(h.r,bbox.height/2):(bbox.height/2);
                    }
                    h.cx=_.isNumb(bbox.x)?(bbox.x+(_.isSet(h.r)?h.r:attr.r)):(attr.cx+(_.isSet(h.r)?(h.r-attr.r):0));
                    h.cy=_.isNumb(bbox.y)?(bbox.y+(_.isSet(h.r)?h.r:attr.r)):(attr.cy+(_.isSet(h.r)?(h.r-attr.r):0));
                }break;
                case 'ellipse':{
                    if(_.isNumb(bbox.width))
                        h.rx=bbox.width/2;
                    if(_.isNumb(bbox.height))
                        h.ry=bbox.height/2;
                    h.cx=_.isNumb(bbox.x)?(bbox.x+(_.isSet(h.rx)?h.rx:attr.rx)):(attr.cx+(_.isSet(h.rx)?(h.rx-attr.rx):0));
                    h.cy=_.isNumb(bbox.y)?(bbox.y+(_.isSet(h.ry)?h.ry:attr.ry)):(attr.cy+(_.isSet(h.ry)?(h.ry-attr.ry):0));
                }break;
                case 'rect':
                case 'image':{
                    if(_.isNumb(bbox.x))
                        h.x=bbox.x;
                    if(_.isNumb(bbox.y))
                        h.y=bbox.y;
                    if(_.isNumb(bbox.width))
                        h.width=bbox.width;
                    if(_.isNumb(bbox.height))
                        h.height=bbox.height;
                }break;
                case 'text':{
                    var obbox,textAnchor;
                    // must get real size first
                    if(el){
                        el._.dirty=1;
                        obbox=copy(el._getBBox(true));
                        textAnchor=el.attr('text-anchor');
                    }else{
                        var div=xui.Dom.getEmptyDiv(),
                            r=Raphael(div.get(0).id,1,1),
                            t=r.text(0,0,attr.text);
                       obbox=copy(t._getBBox(true));
                       textAnchor=t.attr('text-anchor');
                       t.remove();
                       r.remove();
                       div.empty();
                    }
                    
                    if(_.isNumb(bbox.x))
                        obbox.x=bbox.x;
                    if(_.isNumb(bbox.y))
                        obbox.y=bbox.y;
                        
                    //if('hAlign' in prf.box.$DataModel){
                        var ha=attr.hAlign||'center',
                            va=attr.vAlign||'middle',
                            offsetx=obbox?(textAnchor=='start'?-obbox.width/2:textAnchor=='middle'?0:obbox.width/2):0;
    
                        if(_.isNumb(bbox.x)){
                            if(ha=='center'){
                                if(_.isNumb(bbox.width)){
                                    h.x=bbox.x + bbox.width/2;
                                }else{
                                    h.x=bbox.x+(obbox?(obbox.width/2):0);
                                }
                            }else if(ha=='left'){
                                h.x=bbox.x+(obbox?(obbox.width/2):0);
                            }else if(ha=='outterleft'){
                                h.x=bbox.x-(obbox?(obbox.width/2):0);
                            }else if(ha=='right'){
                                if(_.isNumb(bbox.width)){
                                    h.x=bbox.x+bbox.width-(obbox?(obbox.width/2):0);
                                }else{
                                    //
                                }
                            }else if(ha=='outterright'){
                                if(_.isNumb(bbox.width)){
                                    h.x=bbox.x+bbox.width+(obbox?(obbox.width/2):0);
                                }else{
                                    //
                                }
                            }else{
                                if(_.isNumb(bbox.width)){
                                    h.x=bbox.x+bbox.width*parseFloat(ha)/100;
                                }else{
                                    h.x=bbox.x+(obbox?(obbox.width*parseFloat(ha)/100):0);
                                }
                            }
                            h.x += offsetx;
                        }
    
                        if(_.isNumb(bbox.y)){
                            if(va=='middle'){
                                if(_.isNumb(bbox.height)){
                                    h.y=bbox.y+bbox.height/2;
                                }else{
                                    h.y=bbox.y+(obbox?(obbox.height/2):0);
                                }
                            }else if(va=='top'){
                                h.y=bbox.y+(obbox?(obbox.height/2):0);
                            }else if(va=='outtertop'){
                                h.y=bbox.y-(obbox?(obbox.height/2):0);
                            }else if(va=='bottom'){
                                if(_.isNumb(bbox.height)){
                                    h.y=bbox.y+bbox.height-(obbox?(obbox.height/2):0);
                                }else{
                                    //
                                }
                            }else if(va=='outterbottom'){
                                if(_.isNumb(bbox.height)){
                                    h.y=bbox.y+bbox.height+(obbox?(obbox.height/2):0);
                                }else{
                                    //
                                }
                            }else{
                                if(_.isNumb(bbox.height)){
                                    h.y=bbox.y+bbox.height*parseFloat(va)/100;
                                }else{
                                    h.y=bbox.y+(obbox?(obbox.height*parseFloat(va)/100):0);
                                }
                            }
                        }
                    /*}else{
                        if(_.isNumb(obbox.x))
                            h.x=obbox.x;
                        if(_.isNumb(obbox.y))
                            h.y=obbox.y;
                        if(_.isNumb(obbox.width))
                            h.width=obbox.width;
                        if(_.isNumb(obbox.height))
                            h.height=obbox.height;
                    }*/
                }break;
                case 'path':{
                    var obbox;
                    if(el){
                        el._.dirty=1;
                        obbox=copy(el._getBBox(true));
                    }else{
                        var div=xui.Dom.getEmptyDiv(),
                            r=Raphael(div.get(0).id,1,1),
                            t=r.path("");
                       t.attr(attr);
                       obbox=copy(t._getBBox(true));
                       t.remove();
                       r.remove();
                       div.empty();
                    }
                    var obbox2=copy(obbox);
                    
                    //if(obbox.width===0 || obbox.height===0)
                    //    return;

                    if(_.isNumb(bbox.x))
                        h.x=bbox.x;
                    if(_.isNumb(bbox.y))
                        h.y=bbox.y;
                    if(_.isNumb(bbox.width))
                        h.width=bbox.width;
                    if(_.isNumb(bbox.height))
                        h.height=bbox.height;

                    if(('x' in h && obbox.x!==h.x)||('y' in h && obbox.y!==h.y)){
                        var x=0,y=0;
                        if('x' in h){
                            x=h.x-obbox.x;
                            obbox.x=h.x;
                        }
                        if('y' in h){
                            y=h.y-obbox.y;
                            obbox.y=h.y;
                        }

                        var paths=Raphael.parsePathString(attr.path);
                        for(var i=0, ii=paths.length, l; i<ii; i++){
                            l = paths[i].length;
                            switch (paths[i][0]) {
                                case "M":
                                case "L":
                                    paths[i][1] += x;
                                    paths[i][2] += y;
                                    break;
                                case "H":
                                    paths[i][1] += x;
                                    break;
                                case "V":
                                    paths[i][1] += y;
                                    break;
                                case "C":
                                    paths[i][1] += x;
                                    paths[i][2] += y;
                                    paths[i][3] += x;
                                    paths[i][4] += y;
                                    paths[i][5] += x;
                                    paths[i][6] += y;
                                    break;
                                case "Q":
                                case "S":
                                    paths[i][1] += x;
                                    paths[i][2] += y;
                                    paths[i][3] += x;
                                    paths[i][4] += y;
                                    break;
                                case "T":
                                    paths[i][1] += x;
                                    paths[i][2] += y;
                                    break;
                                case "A":
                                    paths[i][l-2] += x;
                                    paths[i][l-1] += y;
                                    continue;
                                //case "R":
                                //case "Z":
                                default:
                                    continue;
                            }
                        }
                        h.path=paths.join('');
                    }
                    if(('width' in h && obbox.width!==h.width)||('height' in h && obbox.height!==h.height)){
                        var ww=('width' in h)?h.width:null,
                            hh=('height' in h)?h.height:null,
                            opath= h.path ||attr.path,
                            npath=xui.svg.$transform(opath, "s"+((_.isSet(ww)&&ww!==obbox2.width)?(obbox2.width===0?(ww>=0?1.1:0.9):ww/obbox2.width):"1")+","+((_.isSet(hh)&&hh!==obbox2.height)?(obbox2.height===0?(hh>=0?1.1:0.9):hh/obbox2.height):"1")+","+obbox.x+","+obbox.y);
                        h.path=npath;
                    }
                }break;
            }

            var attr2=xui.svg.$attr[type];
            _.filter(h,function(o,i){
                if(_.isSet(o) && (i in attr2)){
                    attr[i]=o;
                }else{
                    return false;
                }
            });
            if(el && (!_.isEmpty(h))){
                // keep transfrom
                var ts=Raphael.parseTransformString(el.transform()),withTransform;
                if(ts && ts.length){
                    withTransform=1;
                    el.transform("");

                    //for rotate setting
                    var ir=-1, it=-1, rot; 
                    for(var i=0,l=ts.length; i<l; i++){
                        if(ts[i][0]=='r'){
                            ir = i;
                            rot = ts[i][1];
                        }else if(ts[i][0]=='t'){
                            it = i;
                        }
                    }
                    if(it!=-1 && ir!=-1){
                        // recalculate it back precisely
                        el.rotate(rot);
                        var ts2=Raphael.parseTransformString(el.transform());
                        //reset it gain
                        el.transform("");
                        ts[it][1]-=ts2[0][1];
                        ts[it][2]-=ts2[0][2];
                        
                        if(!ts[it][1] && !ts[it][2]){
                            _.arr.removeFrom(ts, it);
                        }
                    }
                }

                el.attr(h);

                // reset transform
                if(withTransform){
                    el.transform("r"+rot);
                }

                if(notify!==false)
                    prf.box._notify(prf,{bBox:1},true);
            }
        },
        _syncAttr:function(prf,options,shapeChanged){
            prf._pathCached={};
        },
        _notify:function(prf, options, shapeChanged){
            // sync attr
            if(prf.box._syncAttr){
                prf.box._syncAttr(prf,options,shapeChanged);
            }
            // sync connectors
            if(shapeChanged && !prf.box._CONNECTOR && prf.box._syncConnectors){
                prf.box._syncConnectors(prf);
            }
            // refresh shadow
            if(shapeChanged && prf._shadow){
                prf.boxing().setShadow(false).setShadow(true);
            }
        },
        _draw:function(){},

        _syncConnectors:function(prf){
            // find all connectors connected to me
            // redraw those connectors
            if(prf.parent.key!=="xui.UI.SVGPaper")return;

            var children=_.get(prf,['parent','children']),
                alias=prf.alias;
            if(children&&children.length){
                _.arr.each(children,function(o,i){
                    if(!o[0].destroyed && prf.renderCompleted && o[0].renderCompleted && o[0].key==="xui.svg.connector"){
                        if(alias===_.get(o[0],['properties','fromObj'])){
                            // redraw from point
                            o[0].box._reconnect(o[0],prf);
                        }
                        if(alias===_.get(o[0],['properties','toObj'])){
                            // redraw to point
                            o[0].box._reconnect(o[0],null,prf);
                        }
                    }
                });
            }
        },
        _syncAlias:function(prf,oa,na){
            // find all connectors connected on me, sync alias
            var children=_.get(prf,['parent','children']);
            if(children&&children.length){
                _.arr.each(children,function(o,i){
                    if(o[0].key==="xui.svg.connector"){
                        if(oa===_.get(o[0],['properties','fromObj'])){
                            _.set(o[0],['properties','fromObj'],na);
                        }
                        if(oa===_.get(o[0],['properties','toObj'])){
                            _.set(o[0],['properties','toObj'],na);
                        }
                    }
                });
            }
        }
    }
});

Class("xui.svg.circle", "xui.svg",{
    Instance:{
        _setBBox:function(key,value){
            var bb=xui.svg.$adjustBB(key,value);
            return this.each(function(prf){
                xui.svg.$setBB(prf,'circle', bb, prf.properties.attr, prf._elset&&prf._elset[0]);
            });
        }
    },
    Static:{
        DataModel:{
            attr:{
                ini:{cx:0,cy:0,r:20}
            }
        },
        Templates:{
            tagName:'circle'
        },
        _draw:function(paper, prf, prop){
            prop=prop.attr;
            var el = paper.circle(prop.cx,prop.cy,prop.r);
            el.node.id=prf.box.KEY+":"+prf.serialId+":";
            return paper.set().push(el);
        }
    }
});
Class("xui.svg.ellipse", "xui.svg",{
    Instance:{
        _setBBox:function(key,value){
            var bb=xui.svg.$adjustBB(key,value);
            return this.each(function(prf){
                xui.svg.$setBB(prf,'ellipse', bb, prf.properties.attr, prf._elset&&prf._elset[0]);
            });
        }
    },
    Static:{
        DataModel:{
            attr:{
                ini:{cx:0,cy:0,rx:20,ry:40}
            }
        },
        Templates:{
            tagName:'ellipse'
        },
        _draw:function(paper, prf, prop){
            prop=prop.attr;
            var el = paper.ellipse(prop.cx,prop.cy,prop.rx,prop.ry);
            el.node.id=prf.box.KEY+":"+prf.serialId+":";
            return paper.set().push(el);
        }
    }
});
Class("xui.svg.rect", "xui.svg",{
    Instance:{
        _setBBox:function(key,value){
            var bb=xui.svg.$adjustBB(key,value);
            return this.each(function(prf){
                xui.svg.$setBB(prf,'rect', bb, prf.properties.attr, prf._elset&&prf._elset[0]);
            });
        }
    },
    Static:{
        DataModel:{
            attr:{
                ini:{x:0,y:0,r:0,width:40,height:40}
            }
        },
        Templates:{
            tagName:'rect'
        },
        _draw:function(paper, prf, prop){
            prop=prop.attr;
            var el = paper.rect(prop.x,prop.y,prop.width,prop.height,prop.r);
            el.node.id=prf.box.KEY+":"+prf.serialId+":";
            return paper.set().push(el);
        }
    }
});
Class("xui.svg.image", "xui.svg",{
    Instance:{
        _setBBox:function(key,value){
            var bb=xui.svg.$adjustBB(key,value);
            return this.each(function(prf){
                xui.svg.$setBB(prf,'image', bb, prf.properties.attr, prf._elset&&prf._elset[0]);
            });
        }
    },
    Static:{
        IMGNODE:1,
        DataModel:{
            attr:{
                ini:{src:"",x:0,y:0,width:20,height:20}
            }
        },
        Templates:{
            tagName:'image'
        },
        _draw:function(paper, prf, prop){
            prop=prop.attr;
            var el = paper.image(xui.adjustRes(prop.src),prop.x,prop.y,prop.width,prop.height);
            el.node.id=prf.box.KEY+":"+prf.serialId+":";
            return paper.set().push(el);
        }
    }
});
Class("xui.svg.text", "xui.svg",{
    Instance:{
        _setBBox:function(key,value){
            var bb=xui.svg.$adjustBB(key,value);
            return this.each(function(prf){
                xui.svg.$setBB(prf,'text', bb, prf.properties.attr, prf._elset&&prf._elset[0]);
            });
        }
    },
    Static:{
        DataModel:{
            attr:{
                ini:{x:0,y:0,text:"text"}
            }
        },
        Templates:{
            tagName:'text'
        },
        _draw:function(paper, prf, prop){
            prop=prop.attr;
            var el = paper.text(prop.x,prop.y,prop.text);
            el.node.id=prf.box.KEY+":"+prf.serialId+":";
            return paper.set().push(el);
        }
    }
});
Class("xui.svg.path", "xui.svg",{
    Instance:{
        getPath:function(){
            var prf=this.get(0),prop=prf.properties;
            if(prf._elset && prf._elset[0])prop.path=prf._elset[0].attr('path').join('');
            return prop.path;
        },
        _getConnectAnchors:function(){
            // no solid anchors
        },
        _setBBox:function(key,value){
            var bb=xui.svg.$adjustBB(key,value);
            return this.each(function(prf){
                xui.svg.$setBB(prf,'path', bb, prf.properties.attr, prf._elset&&prf._elset[0]);
            });
        }
    },
    Static:{
        $abstract:true,
        _draw:function(paper, prf, prop){
            prop=prop.attr;
            var el = paper.path(prop.path);
            el.node.id=prf.box.KEY+":"+prf.serialId+":";
            return paper.set().push(el);
        },
        DataModel:{
            attr:{
                ini:{path:""}
            }
        },
        Templates:{
            tagName:'path'
        }
    }
});

Class("xui.svg.absComb", "xui.svg",{
    Instance:{
        _setBBox:function(key,value,notify){
            var bb=xui.svg.$adjustBB(key,value);
            return this.each(function(prf){
                var prop=prf.properties, ss=prf._elset;
                xui.svg.$setBB(prf,prf.box._type, bb, prop.attr.KEY, ss&&ss[0]);

                if(prf.renderId && ss&&ss[0]){
                    if(prop.attr.TEXT&&prop.attr.TEXT.text){
                        var attr=_.copy(prop.attr.TEXT||{}),att2=ss[0]._getBBox(true);
                        attr.hAlign=prop.hAlign;
                        attr.vAlign=prop.vAlign;
                        if(!('x' in bb))bb.x=att2.x;
                        if(!('y' in bb))bb.y=att2.y;
                        if(!('width' in bb))bb.width=att2.width;
                        if(!('height' in bb))bb.height=att2.height;
                        xui.svg.$setBB(prf,"text", bb, attr, ss&&ss[1],notify);
                    }
                }
            });
        },
        _adjustText:function(){
            return this.each(function(prf){
                var prop=prf.properties, ss=prf._elset;
                if(prf.renderId && ss && ss[0]){
                    if(prop.attr.TEXT && prop.attr.TEXT.text){
                        var attr=_.copy(prop.attr.TEXT||{}),att2=ss[0]._getBBox(true);
                        attr.hAlign=prop.hAlign;
                        attr.vAlign=prop.vAlign;
                        xui.svg.$setBB(prf,"text", att2, attr, ss[1], false);
                    }
                }
            });
        },
        setAttr:function(key, value, reset, notify){
            var h;
            if(_.isHash(key))h=key;
            else{
                h={};
                h[key]=value;
            };
            arguments.callee.upper.call(this, key, value, reset, notify);
            return this.each(function(prf){
                if(prf._elset){
                    // adjust text postion
                    if((h=h.TEXT)&&h['text-anchor'])
                        prf.boxing()._adjustText();
                }
            });
        }
    },
    Static:{
        $abstract:true,
        ISCOMBO:1,
        _beforeSerialized:function(profile){
            var o = arguments.callee.upper.call(this,profile),prop=o.properties;
            prop.attr=_.clone(prop.attr,true);
            _.filter(prop.attr.KEY,function(o,i){
                if(i=='transform'&&(!o||o.length<1))return false;
                if(i=='href'||i=='target')return false;
                if(i=='path' && _.isArr(prop.attr.KEY.path))prop.attr.KEY.path=o.join('');
            });
            if(prop.attr.TEXT){
                _.filter(prop.attr.TEXT,function(o,i){
                    // TEXT's transform is from KEY
                    if(i=='transform')return false;
                    // TEXT's postition is caculated from KEY
                    if(i=='x'||i=='y')return false;
                    if(i=='href'||i=='target')return false;
                });
            }
            return o;
        },
        DataModel:{
            attr:{
                ini:{
                    KEY:{
                    },
                    TEXT:{
                    }
                }
            },
            hAlign:{
                ini:'center',
                combobox:['left','25%','center','75%','right','outterleft','outterright'],
                action: function(){
                    // adjust text postion
                    this.boxing()._adjustText();
                }
            },
            vAlign:{
                ini:'middle',
                combobox:['top','25%','middle','75%','bottom','outtertop','outterbottom'],
                action: function(){
                    // adjust text postion
                    this.boxing()._adjustText();
                }
            },
            shadow:true
        },
        Behaviors:{
            onClick:function(profile, e, src){
                if(profile.$inDesign)return false;
                var p=profile.properties;
                if(p.disabled)return false;
                //onClick event
                if(profile.onClick)
                    return profile.boxing().onClick(profile, e, src);
            },
            onDblclick:function(profile, e, src){
                if(profile.$inDesign)return false;
                var p=profile.properties;
                if(p.disabled)return false;
                //onClick event
                if(profile.onDblClick)
                    return profile.boxing().onDblClick(profile, e, src);
            },            
            onContextmenu:function(profile, e, src){
                if(profile.onContextmenu)
                    return profile.boxing().onContextmenu(profile, e, src)!==false;
            },
            TEXT:{
                onClick:function(profile, e, src){
                    if(profile.$inDesign)return false;
                    var p=profile.properties,rtn;
                    if(p.disabled)return false;
                    //onClick event
                    if(profile.onTextClick)
                        rtn=profile.boxing().onTextClick(profile, e, src);
                    if(rtn!==false && profile.onClick)
                        return profile.boxing().onClick(profile, e, src);
                },
                onDblclick:function(profile, e, src){
                    if(profile.$inDesign)return false;
                    var p=profile.properties;
                    if(p.disabled)return false;
                    //onClick event
                    if(profile.onDblClick)
                        return profile.boxing().onDblClick(profile, e, src);
                },
                onContextmenu:function(profile, e, src){
                    if(profile.onContextmenu)
                        return profile.boxing().onContextmenu(profile, e, src)!==false;
                }
            }
        },
        EventHandlers:{
            onTextClick:function(profile, e, src){}
        },
        _initAttr2UI:function(prf){
            arguments.callee.upper.call(this,prf);

            // adjust text postion
            prf.boxing()._adjustText();

            // transform
            var ss=prf._elset;
            if(ss&&ss[1]){
                var tf=ss[0].attr('transform');
                for(var i=1,l=ss.length;i<l;i++)
                    ss[i].attr('transform', tf);
            }
        },
        _syncAttr:function(prf,options,shapeChanged){
            var upper=arguments.callee.upper, args=_.toArr(arguments);
            upper.apply(this,args);
            upper=null;
            if(shapeChanged){
                prf.boxing()._adjustText();
            }
        },
        _draw:function(paper, prf, prop){
            var s=paper.set(), attr=prop.attr.KEY,att2=prop.attr.TEXT,
                el = this._drawRoot(paper,attr);

            el.node.id=prf.box.KEY+":"+prf.serialId+":";
            s.push(el);

            el = paper.text(attr.x, attr.y, att2.text);
            el.node.id=prf.box.KEY+"-TEXT:"+prf.serialId+":";
            s.push(el);

            return s;
        }
    }
});
Class("xui.svg.rectComb", "xui.svg.absComb",{
    Static:{
        _type:'rect',
        Templates:{
            tagName:'rect',
            TEXT:{
                tagName:'text',
                svg:1
            }
        },
        _drawRoot:function(paper,attr){
            return paper.rect(attr.x,attr.y,attr.width,attr.height);
        }
    }
});
Class("xui.svg.circleComb", "xui.svg.absComb",{
    Static:{
        _type:'circle',
        Templates:{
            tagName:'circle',
            TEXT:{
                tagName:'text',
                svg:1
            }
        },
        _drawRoot:function(paper,attr){
            return paper.circle(attr.cx,attr.cy,attr.r);
        }
    }
});
Class("xui.svg.ellipseComb", "xui.svg.absComb",{
    Static:{
        _type:'ellipse',
        Templates:{
            tagName:'ellipse',
            TEXT:{
                tagName:'text',
                svg:1
            }
        },
        _drawRoot:function(paper,attr){
            return paper.ellipse(attr.cx,attr.cy,attr.rx,attr.ry);
        }
    }
});
Class("xui.svg.pathComb", "xui.svg.absComb",{
    Static:{
        _type:'path',
        Templates:{
            tagName:'path',
            TEXT:{
                tagName:'text',
                svg:1
            }
        },
        _drawRoot:function(paper,attr){
            return paper.path(attr.path);
        }
    }
});
Class("xui.svg.imageComb", "xui.svg.absComb",{
    Static:{
        IMGNODE:1,
        _type:'image',
        Templates:{
            tagName:'image',
            TEXT:{
                tagName:'text',
                svg:1
            }
        },
        _drawRoot:function(paper,attr){
            return paper.image(attr.src,attr.x,attr.y,attr.width,attr.height);
        }
    }
});


Class("xui.svg.connector","xui.svg.absComb",{
    Instance:{
        _getConnectAnchors:null,
        _getConnectPath:null,
        _getConnectPoint:null,
        toFront:function(){
            return this.each(function(prf){
                if(prf=prf._elset){
                    prf[1].toFront();
                    prf[0].toFront();
                }
                var arr=_.get(prf,['parent','children']);
                if(arr && arr.length){
                    var index=_.arr.subIndexOf(arr,"0",prf),o;
                    if(index!=-1){
                        o=arr[index];
                        arr.splice(index,1);
                        arr.push(o);
                    }
                }
            });
        },
        toBack:function(){
            return this.each(function(prf){
                if(prf=prf._elset){
                    prf[0].toBack();
                    prf[1].toBack();
                }
                var arr=_.get(prf,['parent','children']);
                if(arr && arr.length){
                    var index=_.arr.subIndexOf(arr,"0",prf),o;
                    if(index!=-1){
                        o=arr[index];
                        arr.splice(index,1);
                        arr.unshift(o);
                    }
                }
            });
        }
    },
    Static:{
        _CONNECTOR:true,
        _beforeSerialized:function(profile){
            var o = arguments.callee.upper.call(this,profile),prop=o.properties;
            if(prop.attr.BG){
                delete prop.attr.BG.path;
                delete prop.attr.BG['arrow-start'];
                delete prop.attr.BG['arrow-end'];
            }
            return o;
        },
        DataModel:{
            hAlign:null,
            vAlign:null,
            shadow:null,

            bgLine:{
                ini:true,
                action:function(v){
                    if(this._bg){
                        if(v)this._bg.show();else this._bg.hide();
                    }
                }
            },
            attr:{
                ini:{
                    KEY:{path:""}//,
                   // TEXT:{text:""}
                }
            },
            type:{
                ini:'straight',
                listbox:['straight','bezier','flowchart'],
                action:function(v,ov){
                    // stop changing type
                    if(this.renderId)
                        this.properties.type=ov;
                }
            },
            fromObj:"",
            fromPoint:{
                ini:'',
                combobox:['left','top','right','bottom']
            },
            //fromDDKey:"default",

            toObj:"",
            toPoint:{
                ini:'',
                combobox:['left','top','right','bottom']
            }//,
            //toDDKey:"default",

            //textPos:0.5

        },
        _type:'path',
        Templates:{
            tagName:'path',
          /*  TEXT:{
                tagName:'text',
                svg:1
            },*/
            BG:{
                tagName:'path',
                svg:1
            }
        },
        _draw:function(paper, prf, prop){
           var s=paper.set(),
               attr=prop.attr.KEY,//att2=prop.attr.TEXT,
               obj1,obj2;

            obj2 = paper.path(attr.path);
            obj2.node.id=prf.box.KEY+":"+prf.serialId+":";
            obj2.onShapeChanged=function(attr){
                if(attr.path)obj1.attr({path:attr.path},null,false);
            };
            s.push(obj2);

            obj1 = paper.path(attr.path);
            
            if(!prf.properties.bgLine)obj1.hide();
            
            obj1.node.id=prf.box.KEY+"-BG:"+prf.serialId+":";
            s.push(obj1);
            obj1.insertBefore(obj2);
            prf._bg=obj1;

            (prf.$beforeDestroy=(prf.$beforeDestroy||{}))["unbind"]=function(){
                obj2.onShapeChanged=null;
                obj2=null;
            };

/*
            el = paper.text(attr.x, attr.y, att2.text);
            el.node.id=prf.box.KEY+"-TEXT:"+prf.serialId+":";
            s.push(el);
*/
            return s;
        },
        _syncAttr:function(prf,options,shapeChanged){
            var upper=arguments.callee.upper,args=_.toArr(arguments);
            upper.apply(this,args);
            upper=null;
            prf._pathCached={};

            if(!prf._bg)return;

            var ns=this,prop=prf.properties,t=prf._elset[0],h={},a,k;
            k='path';
            if((k in options) || ('bBox' in options)){
                h[k]=t.attr(k);
            }
            k='arrow-start';
            if(k in options){
                a=t.attr(k);
                a=a.split('-');
                if(a[0]!='none')h[k]=a[0]+"-narrow-short";
                else h[k]='none';
            }
            k='arrow-end';
            if(k in options){
                a=t.attr(k);
                a=a.split('-');
                if(a[0]!='none')h[k]=a[0]+"-narrow-short";
                else h[k]='none';
            }
            prf._bg.attr(h,null,false);

            if(('bBox' in options) && prf.parent){
                if(prop.fromObj&&prop.fromPoint){
                    _.arr.each(prf.parent.children,function(o){
                        if(o[0].alias==prop.fromObj){
                            ns._reconnect(prf,o[0]);
                            return false;
                        }
                    });
                }
                if(prop.toObj&&prop.toPoint){
                    _.arr.each(prf.parent.children,function(o){
                        if(o[0].alias==prop.toObj){
                            ns._reconnect(prf,null,o[0]);
                            return false;
                        }
                    });
                }

            }
        },
        // have to set to null
        _reconnect:function(prf,fromPrf,toPrf){
            if(prf.destroyed)return;
            var prop=prf.properties,
                type=prop.type,
                path=Raphael.parsePathString(prop.attr.KEY.path),
                conn=prf.boxing(),
                ins,cp;
            if(fromPrf && prop.fromObj && prop.fromPoint){
                ins=fromPrf.boxing();
                cp=ins._getConnectPoint(prop.fromPoint);
                if(cp){
                    switch(type){
                        case 'flowchart':
                            // need to redraw it
                            var np=this._redrawBrokenLine(prf);
                            if(np){
                                // renew paths
                                path.length=0;
                                _.arr.each(np,function(p){
                                    path.push(p);
                                });
                            }
                        break;
                        case 'straight':
                            path[0][1]=cp.x;
                            path[0][2]=cp.y;
                        break;
                        case 'bezier':
                            var ox=cp.x-path[0][1],
                                oy=cp.y-path[0][2];
                            path[0][1]=cp.x;
                            path[0][2]=cp.y;
                            path[1][1]+=ox;
                            path[1][2]+=oy;
                        break;
                    }
                    conn.setAttr("KEY",{path:path},false);
                }
            }
            if(toPrf && prop.toObj  && prop.toPoint){
                ins=toPrf.boxing();
                cp=ins._getConnectPoint(prop.toPoint);
                if(cp){
                    var l=path.length-1;
                    if( (path[l][0]||"").toUpperCase()=='Z')l--;
                    switch(type){
                        case 'flowchart':
                            // need to redraw it
                            var np=this._redrawBrokenLine(prf);
                            if(np){
                                // renew paths
                                path.length=0;
                                _.arr.each(np,function(p){
                                    path.push(p);
                                });
                            }
                        break;
                        case 'straight':
                            path[l][1]=cp.x;
                            path[l][2]=cp.y;
                        break;
                        case 'bezier':
                            var ox=cp.x-path[l][5],
                                oy=cp.y-path[l][6];
                            path[l][5]=cp.x;
                            path[l][6]=cp.y;
                            path[l][3]+=ox;
                            path[l][4]+=oy;
                        break;
                    }
                    conn.setAttr("KEY",{path:path},false);
                }
            }
        },
        _redrawBrokenLine:function(prf,inputPoint,x,y){
            var offset=30,
                offsetx=30,
                offsety=30,
                prop=prf.properties,
                attr=prop.attr.KEY,
                opath=Raphael.parsePathString(attr.path),
                startConn=prop.fromObj && prop.fromPoint,
                endConn=prop.toObj && prop.toPoint,
                startPoints,endPoints,
                startPath=[],endPath=[],
                startPathLen=[],endPathLen=[],
                ins,
                sPath,ePath,sBox,eBox,
                sPoint,ePoint,angle,sCenter,eCenter,
                sdir,edir,
                t;
            // Collect possible start points
            if(startConn){
                ins=null;
                //startPoints 3
                _.arr.each(prf.parent.children,function(p){
                    if(p[0].alias==prop.fromObj){
                        ins=p[0].boxing();
                        sPoint=ins._getConnectPoint(prop.fromPoint);
                        if(sPoint){
                            sPath=ins._getConnectPath();

                            if(sBox=_.get(p[0]._pathCached,['_connBBox'])){
                            }else{
                                sBox=Raphael.pathBBox(sPath);
                                _.set(p[0]._pathCached,['_connBBox'], sBox)
                            }

                            if(sPoint.solid){
                                angle=sPoint.alpha;
                            }else{
                                angle=sPoint.alpha-90;
                            }
                            sCenter={x:sBox.x+sBox.width/2,y:sBox.y+sBox.height/2};
                            sdir = (angle>45&&angle<=135)?'down':
                                  (angle>135&&angle<=225)?'left':
                                  (angle>225&&angle<=315)?'up':'right';
                            if(sdir=='down'&&sPoint.y<sCenter.y)
                                sdir='up';
                            if(sdir=='right'&&sPoint.x<sCenter.x)
                                sdir='left';
                        }
                        return false;
                    }
                });
            }
            if(endConn){
                ins=null;
                //endPoints 3
                _.arr.each(prf.parent.children,function(p){
                    if(p[0].alias==prop.toObj){
                        ins=p[0].boxing();
                        ePoint=ins._getConnectPoint(prop.toPoint);
                        if(ePoint){
                            ePath=ins._getConnectPath();

                            if(eBox=_.get(p[0]._pathCached,['_connBBox'])){
                            }else{
                                eBox=Raphael.pathBBox(ePath);
                                _.set(p[0]._pathCached,['_connBBox'], eBox)
                            }

                            if(ePoint.solid){
                                angle=ePoint.alpha;
                            }else{
                                angle=ePoint.alpha-90;
                            }
                            eCenter={x:eBox.x+eBox.width/2,y:eBox.y+eBox.height/2};
                            edir = (angle>45&&angle<=135)?'down':
                                  (angle>135&&angle<=225)?'left':
                                  (angle>225&&angle<=315)?'up':'right';
                            if(edir=='down'&&ePoint.y<eCenter.y)
                                edir='up';
                            if(edir=='right'&&ePoint.x<eCenter.x)
                                edir='left';
                        }
                        return false;
                    }
                });
            }
            if(sPoint&&ePoint){
                // These points can link to each other directly(opposite)
                if((sdir=='left'&&edir=='right'&&ePoint.x>=sPoint.x)||(sdir=='right'&&edir=='left'&&ePoint.x<=sPoint.x))
                    offsetx=Math.min(offsetx, Math.abs(ePoint.x-sPoint.x)/2);
                if((sdir=='down'&&edir=='up'&&ePoint.y>=sPoint.y)||(sdir=='up'&&edir=='down'&&ePoint.y<=sPoint.y))
                    offsety=Math.min(offsety, Math.abs(ePoint.y-sPoint.y)/2);
            }

            // Collect possible start points
            if(sPoint){
                switch(sdir){
                    case 'down':{
                    startPoints=[
                        {x:sPoint.x, y:t=sPoint.y+offsety},
                        {x:sBox.x-offset, y:t},
                        {x:sBox.x+offset+sBox.width, y:t}
                    ];
                    startPath=[
                        [["M",sPoint.x,sPoint.y],["V",startPoints[0].y]],
                        [["M",sPoint.x,sPoint.y],["V",startPoints[0].y],["H",startPoints[1].x]],
                        [["M",sPoint.x,sPoint.y],["V",startPoints[0].y],["H",startPoints[2].x]]
                    ];
                    startPathLen=[offsety, offsety + Math.abs(startPoints[1].x-startPoints[0].x), offsety + Math.abs(startPoints[2].x-startPoints[0].x)];
                    }break;
                    case 'left':{
                    startPoints=[
                        {x:t=sPoint.x-offsetx, y:sPoint.y},
                        {x:t,y:sBox.y-offset},
                        {x:t,y:sBox.y+offset+sBox.height}
                    ];
                    startPath=[
                        [["M",sPoint.x,sPoint.y],["H",startPoints[0].x]],
                        [["M",sPoint.x,sPoint.y],["H",startPoints[0].x],["V",startPoints[1].y]],
                        [["M",sPoint.x,sPoint.y],["H",startPoints[0].x],["V",startPoints[2].y]]
                    ];
                    startPathLen=[offsetx, offsetx + Math.abs(startPoints[1].y-startPoints[0].y), offsetx + Math.abs(startPoints[2].y-startPoints[0].y)];
                    }break;
                    case 'up':{
                    startPoints=[
                        {x:sPoint.x, y:t=sPoint.y-offsety},
                        {x:sBox.x-offset, y:t},
                        {x:sBox.x+offset+sBox.width, y:t}
                    ];
                    startPath=[
                        [["M",sPoint.x,sPoint.y],["V",startPoints[0].y]],
                        [["M",sPoint.x,sPoint.y],["V",startPoints[0].y],["H",startPoints[1].x]],
                        [["M",sPoint.x,sPoint.y],["V",startPoints[0].y],["H",startPoints[2].x]]
                    ];
                    startPathLen=[offsety, offsety + Math.abs(startPoints[1].x-startPoints[0].x), offsety + Math.abs(startPoints[2].x-startPoints[0].x)];
                    }break;
                    case 'right':{
                    startPoints=[
                        {x:t=sPoint.x+offsetx, y:sPoint.y},
                        {x:t,y:sBox.y-offset},
                        {x:t,y:sBox.y+offset+sBox.height}
                    ];
                    startPath=[
                        [["M",sPoint.x,sPoint.y],["H",startPoints[0].x]],
                        [["M",sPoint.x,sPoint.y],["H",startPoints[0].x],["V",startPoints[1].y]],
                        [["M",sPoint.x,sPoint.y],["H",startPoints[0].x],["V",startPoints[2].y]]
                    ];
                    startPathLen=[offsetx, offsetx + Math.abs(startPoints[1].y-startPoints[0].y), offsetx + Math.abs(startPoints[2].y-startPoints[0].y)];
                    }break;
                }
            }else{
                if(inputPoint=='start'){
                    startPoints=[{x:x,y:y}];
                }else{
                    startPoints=[{x:opath[0][1],y:opath[0][2]}];
                }
                startPath=[
                    [["M",startPoints[0].x,startPoints[0].y]]
                ];
                startPathLen=[0];
            }
            // Collect possible end points
            if(ePoint){
                switch(edir){
                    case 'down':{
                    endPoints=[
                        {x:ePoint.x, y:t=ePoint.y+offsety},
                        {x:eBox.x-offset, y:t},
                        {x:eBox.x+offset+eBox.width, y:t}
                    ];
                    endPath=[
                        [["V",ePoint.y]],
                        [["H",ePoint.x],["V",ePoint.y]],
                        [["H",ePoint.x],["V",ePoint.y]]
                    ];
                    endPathLen=[offsety, offsety + Math.abs(endPoints[1].x-endPoints[0].x), offsety + Math.abs(endPoints[2].x-endPoints[0].x)];
                    }break;
                    case 'left':{
                    endPoints=[
                        {x:t=ePoint.x-offsetx, y:ePoint.y},
                        {x:t,y:eBox.y-offset},
                        {x:t,y:eBox.y+offset+eBox.height}
                    ];
                    endPath=[
                        [["H",ePoint.x]],
                        [["V",ePoint.y],["H",ePoint.x]],
                        [["V",ePoint.y],["H",ePoint.x]]
                    ];
                    endPathLen=[offsetx, offsetx + Math.abs(endPoints[1].y-endPoints[0].y), offsetx + Math.abs(endPoints[2].y-endPoints[0].y)];
                    }break;
                    case 'up':{
                    endPoints=[
                        {x:ePoint.x, y:t=ePoint.y-offsety},
                        {x:eBox.x-offset, y:t},
                        {x:eBox.x+offset+eBox.width, y:t}
                    ];
                    endPath=[
                        [["V",ePoint.y]],
                        [["H",ePoint.x],["V",ePoint.y]],
                        [["H",ePoint.x],["V",ePoint.y]]
                    ];
                    endPathLen=[offsety, offsety + Math.abs(endPoints[1].x-endPoints[0].x), offsety + Math.abs(endPoints[2].x-endPoints[0].x)];
                    }break;
                    case 'right':{
                    endPoints=[
                        {x:t=ePoint.x+offsetx, y:ePoint.y},
                        {x:t,y:eBox.y-offset},
                        {x:t,y:eBox.y+offset+eBox.height}
                    ];
                    endPath=[
                        [["H",ePoint.x]],
                        [["V",ePoint.y],["H",ePoint.x]],
                        [["V",ePoint.y],["H",ePoint.x]]
                    ];
                    endPathLen=[offsetx, offsetx + Math.abs(endPoints[1].y-endPoints[0].y), offsetx + Math.abs(endPoints[2].y-endPoints[0].y)];
                    }break;
                }
            }else{
                if(inputPoint=='end'){
                    endPoints=[{x:x,y:y}];
                }else{
                    var p={x:opath[0][1],y:opath[0][2]};
                    _.arr.each(opath,function(o){
                        if(o[0]=='H')p.x=o[1];
                        else p.y=o[1];
                    });
                    endPoints=[p];
                }
                endPath=[];
                endPathLen=[0];
            }

            // Collect all possible paths
            var paths=[],path,inter;
            _.arr.each(startPoints,function(sp,i){
                _.arr.each(endPoints,function(ep,j){
                    for(var k=0;k<=1;k++){
                        path=_.clone(startPath[i],true);
                        if(k===0){
                            if(ep.x!==sp.x)path.push(['H',ep.x]);
                            if(ep.y!==sp.y)path.push(['V',ep.y]);
                        }else{
                            if(ep.y!==sp.y)path.push(['V',ep.y]);
                            if(ep.x!==sp.x)path.push(['H',ep.x]);
                        }
                        if(endPath[j] && endPath[j].length)_.arr.insertAny(path, endPath[j]);

                        paths.push({
                            path:path,
                            len:path.length,
                            len2:(startPathLen[i]||0)+(endPathLen[j]||0)+Math.abs(ep.x-sp.x)+Math.abs(ep.y-sp.y)
                        });
                    }
                });
            });

            // filter repeat segments
            var arr=[];
            _.filter(paths,function(o){
                var ox=o.path[0][1],
                    oy=o.path[0][2],
                    xdir,ydir,
                    preType;
                for(var i=1,l=o.path.length;i<l;i++){
                    if(preType==o.path[i][0]){
                        if(preType=='H'){
                            if((o.path[i][1]>ox)===xdir){
                                // filter the segement
                                o.path.splice(i-1,1);
                                o.len--;
                                l--;
                                i--;
                                continue;
                            }else{
                                // filter the whole path
                                return false;
                            }
                        }else{
                            if((o.path[i][1]>oy)===ydir){
                                // filter the segement
                                o.path.splice(i-1,1);
                                o.len--;
                                l--;
                                i--;
                                continue;
                            }else{
                                // filter the whole path
                                return false;
                            }
                        }
                    }
                    if(o.path[i][0]=='H'){
                        xdir=o.path[i][1]>ox;
                        ox=o.path[i][1];
                    }else{
                        ydir=o.path[i][1]>oy;
                        oy=o.path[i][1];
                    }
                    preType=o.path[i][0];
                }
            });

            // caculate cross count
            _.arr.each(paths,function(o){
                inter=0;
                var cx,cy;
                if(sBox||eBox){
                    cx=o.path[0][1];cy=o.path[0][2];
                    _.arr.each(o.path,function(p,i){
                        if(i!==0){
                            if(p[0]=='H'){
                                if(sBox && cy>=sBox.y && cy<=sBox.y2 && Math.max(cx,p[1])>Math.min(sBox.x,sBox.x2) && Math.min(cx,p[1])<Math.max(sBox.x,sBox.x2))inter++;
                                if(eBox && cy>=eBox.y && cy<=eBox.y2 && Math.max(cx,p[1])>Math.min(eBox.x,eBox.x2) && Math.min(cx,p[1])<Math.max(eBox.x,eBox.x2))inter++;
                                cx=p[1];
                            }else{
                                if(sBox && cx>=sBox.x && cx<=sBox.x2 && Math.max(cy,p[1])>Math.min(sBox.y,sBox.y2) && Math.min(cy,p[1])<Math.max(sBox.y,sBox.y2))inter++;
                                if(eBox && cx>=eBox.x && cx<=eBox.x2 && Math.max(cy,p[1])>Math.min(eBox.y,eBox.y2) && Math.min(cy,p[1])<Math.max(eBox.y,eBox.y2))inter++;
                                cy=p[1];
                            }
                        }
                    });
                }
                o.inter=inter;
            });

            // Sort paths by path length
			// < 22, stable sort
            _.arr.stableSort(paths,function(x,y){
                return x.inter>y.inter?1:
                       x.inter<y.inter?-1:
                       x.len>y.len?1:
                       x.len<y.len?-1:
                       x.len2>y.len2?1:x.len2==y.len2?0:-1;
            });
            // set the shortest path

            prf.boxing().setAttr('KEY',{path: paths[0].path},false);

            return paths[0].path;
        }
    }
});

Class("xui.svg.group", "xui.svg.absComb",{
    Instance:{
        _adjustText:function(){
            return this;
        },
        _setBBox:function(key,value,notify){
            var bb=xui.svg.$adjustBB(key,value);
            return this.each(function(prf){
                var prop=prf.properties, ss=prf._elset, attrs=prop.attr;
                if(prf.renderId && ss&&ss[0]){
                    var bbo=prf.boxing()._getBBox();
                    ss.forEach(function(el){
                        var attr=attrs[prf.getKey(el.node.id,true)], bbn={};
                        if(el.type=="text"){
                            bbn={x:attr.x, y:attr.y};
                            if('x' in bb)bbn.x+=bb.x-bbo.x;
                            if('y' in bb)bbn.y+=bb.y-bbo.y;
                            attr.x=bbn.x;
                            attr.y=bbn.y;
                            el.attr(bbn);
                        }else{
                            _.merge(bbn, el._getBBox(true),'all',true);
                            if('x' in bb)bbn.x+=bb.x-bbo.x;
                            if('y' in bb)bbn.y+=bb.y-bbo.y;
                            if('width' in bb)bbn.width+=bb.width-bbo.width;
                            if('height' in bb)bbn.height+=bb.height-bbo.height;
                            xui.svg.$setBB(prf, el.type, bbn, attr, el, notify);
                        }
                    });
                }else{
                    if(!prf._init_bbox)prf._init_bbox={};
                    _.merge(prf._init_bbox,bb,'all',true);
                }
            });
        }
    },
    Static:{
        ISCOMBO:1,
        _beforeSerialized:function(profile){
            var o = arguments.callee.upper.call(this,profile),prop=o.properties;
            var attrs=prop.attr=_.clone(prop.attr,true);
            
            _.filter(attrs.KEY,function(o,i){
                if(i=='transform'&&(!o||o.length<1))return false;
                if(i=='href'||i=='target')return false;
                if(i=='path' && _.isArr(prop.attr.KEY.path))prop.attr.KEY.path=o.join('');
            });
            // other elements
            _.each(attrs,function(attr,key){
                if(key=="KEY")return;
                _.filter(attr,function(o,i){
                    // transform is from KEY
                    if(i=='transform')return false;
                });
                
                var type=key.split("_")[0];
                if(type=="path"){
                    _.each(attr,function(o,i){
                        if(i=='path' && _.isArr(o))attr.path=o.join('');
                    });
                }
            });

            return o;
        },
        _type:'path',
        Templates:{
            tagName:'path'
        },
        DataModel:{
            attr:{
                ini:{
                    KEY:{
                    }
                }
            },
            hAlign:null,
            vAlign:null,
            shadow:false
        },
        RenderTrigger:function(){
            var prf=this,bb;
            if(bb=prf._init_bbox){
                prf.boxing()._setBBox(bb);
                delete prf._init_bbox;
            }
        },
        _draw:function(paper, prf, prop){
            var s=paper.set(), attrs=prop.attr, rootattr=attrs.KEY||{path:""},
                el=paper.path(rootattr.path||"");
            el._isGroupFirst=1;
            // root is a path
            el.node.id=prf.box.KEY+":"+prf.serialId+":";
            s.push(el);
            // other elements
            _.each(attrs,function(attr,key){
                if(key=="KEY")return;
                
                var type=key.split("_")[0].toLowerCase();
                switch(type){
                    case "rect":
                        el = paper.rect(attr.x,attr.y,attr.width,attr.height);
                        break;
                    case "circle":
                        el = paper.circle(attr.cx,attr.cy,attr.r);
                        break;
                    case "ellipse":
                        el = paper.ellipse(attr.cx,attr.cy,attr.rx,attr.ry);
                        break;
                    case "image":
                        el =paper.image(attr.src,attr.x,attr.y,attr.width,attr.height);
                        break;
                    case "path":
                        el =paper.path(attr.path);
                        break;                    
                    case "text":
                        el = paper.text(attr.x, attr.y, attr.text);
                        break;
                    default:
                        return;
                }
                var src = xui(this.node).xid();
                if(type=="text"){
                    el.click(function(e){
                        if(prf.$inDesign)return false;
                        if(prf.properties.disabled)return false;
                        var rtn;
                        if(prf.onTextClick)
                            rtn=prf.boxing().onTextClick(prf, e, src);
                        if(rtn!==false && prf.onClick)
                            return prf.boxing().onClick(prf, e, src);
                    });
                }else{
                    el.click(function(e){
                        if(prf.$inDesign)return false;
                        if(prf.properties.disabled)return false;
                        if(prf.onClick)
                            return prf.boxing().onClick(prf, e, src);
                    });
                }
                el.dblclick(function(e){
                    if(prf.$inDesign)return false;
                    if(prf.properties.disabled)return false;
                    if(prf.onDblClick)
                        return prf.boxing().onDblClick(prf, e, src);
                });
                el.contextmenu(function(e){
                    if(prf.onContextmenu)
                        return prf.boxing().onContextmenu(prf, e, src)!==false;
                });
                el.node.id=prf.box.KEY+"-"+key+":"+prf.serialId+":";
                s.push(el);
            });
            return s;
        }
    }
});Class("xui.UI.SVGPaper", "xui.UI.Pane",{
    Initialize:function(){
        this.addTemplateKeys(['SVG']);
    },
    Instance:{
        append:function(target, pre, base){
            if(_.isHash(target) || _.isStr(target))
                target=xui.create(target);
            if(target['xui.UIProfile'])target=target.boxing();

            var ns=this,f=arguments.callee.upper,isSvg,rendersvg;
            target.each(function(prf){
                isSvg=!!prf.box['xui.svg'];
                if(isSvg&&prf.renderId){
                    prf.clearCache();
                    prf.$beforeDestroy["svgClear"]();
                    delete prf.renderId;
                    delete prf.rendered;
                    rendersvg=1;
                }
                f.call(ns, prf, null, pre, base, isSvg, ns.get(0)&&xui(ns.get(0)._canvas));
                if(rendersvg){
                    prf.box._initAttr2UI(prf);
                }
            });
            return this;
        },
        getPaper:function(){
            return _.get(this.get(0), ["_paper"]);
        },
        getSVGString:function(){
            var paper = _.get(this.get(0), ["_paper"]);
            return paper?paper.toSVG():"";
        }
    },
    Static:{
        DataModel:{
            iframeAutoLoad:null,
            html:null,
            width:400,
            height:300,
            scaleChildren:{
                ini:false
            },
            overflow:{
                ini:undefined
            }
        },
        Behaviors:{
            onSize:xui.UI.$onSize
        },
        RenderTrigger:function(){
            var profile=this,prop=profile.properties,w=prop.width,h=prop.height;
            (profile.$beforeDestroy=(profile.$beforeDestroy||{}))["svgClear"]=function(){
                if(profile._paper){
                    profile._paper.clear();
                    profile._paper.remove();
                }
            };
            profile._paper=Raphael(profile.$domId, w, h);
            profile._canvas=profile._paper.canvas;
            profile._canvas.id=profile.box.KEY+"-SVG:"+profile.serialId+":";
//            profile._canvas.style.position='absolute';
//            profile._canvas.style.zIndex=300;

            // contents
            var a=[];
            _.arr.each(profile.children,function(o){
                if(o[0].box["xui.svg"])a.push(o[0]);
            });
            if(a.length){
                profile.boxing().append(xui.svg.pack(a));
                // for IE
                if(!Raphael.svg){
                    _.setTimeout(function(){
                        if(profile && !profile.destroyed){
                        	  // readd again in IE
                            profile.boxing().append(xui.svg.pack(a));
                        }
                    });
                }
            }
            if(profile._paper){
            	  _.setTimeout(function(){
            	        if(profile && !profile.destroyed){
            	  	    // ensure right position
            	  	    if(profile.$designerRoot)
                                 profile._frame=profile._paper.rect(0,0,1,1,0).attr({"stroke-width":"0px"});
            	  	    else if(profile.$inDesign)
                                profile._frame=profile._paper.rect(0,0,w,h,8).attr({"stroke-dasharray": ". ", stroke: "#666"});
                            if(profile._frame)profile._frame._decoration=1;
                    }
                });
            }
        },
        _onresize:function(profile,width,height){
            var paper=profile._paper, scaleChildren=profile.properties.scaleChildren,ow,oh;
            if(scaleChildren){
                ow=paper.width;
                oh=paper.height;
            }
            if(paper){
                if( (width && paper.width!=width) || (height && paper.height!=height) ){
                    var args={},node=profile.getSubNode("SVG");
                    paper.setSize(width,height);
                    if(!(width||width===0)){
                       width=paper.width; 
                    }
                    args.width=width;
                    if((height||height===0)){
                       height=paper.height; 
                    }
                    args.height=height;
                    
                    if((!_.isEmpty(args)) && xui.Dom.$hasEventHandler(node.get(0),'onsize'))
                        node.onSize(true, args);
                    
                    if(profile.$inDesign && profile._frame){
                        if(width||width===0)
                            profile._frame.attr('width',width);
                        if(height||height===0)
                            profile._frame.attr('height',height);
                    }
                    
                    if(scaleChildren){
                        paper.forEach(function(elem){
                            var wr=width/ow,hr=height/oh,xuiElem, 
                                fun=function(elem, key) {
                                    var xuiElem=xui.UIProfile.getFromDom(elem.node.id);
                                    if(!xuiElem)return;

                                    var attr=elem.attr(),
                                        hash;
                                        
                                    switch(elem.type){
                                        // circle is xuiElem, so dont use cirle in this case
                                        case 'circle':
                                            hash={
                                                cx:attr.cx*wr,
                                                cy:attr.cy*hr,
                                                r:attr.r*(wr+hr)/2
                                            };
                                        break;
                                        case 'ellipse':
                                            hash={
                                                cx:attr.cx*wr,
                                                cy:attr.cy*hr,
                                                rx:attr.rx*wr,
                                                ry:attr.ry*hr
                                            };
                                        break;
                                        case 'rect':
                                        case 'image':
                                        hash={
                                                x:attr.x*wr,
                                                y:attr.y*hr,
                                                width:attr.width*wr,
                                                height:attr.height*hr
                                            };
                                        break;
                                        case 'text':
                                        hash={
                                                x:attr.x*wr,
                                                y:attr.y*hr
                                            };
                                        break;
                                        case 'path':
                                            hash={
                                                path:Raphael.transformPath(_.isArr(attr.path)?attr.path.join(""):attr.path, "s"+wr+","+hr+",0,0")
                                            };
                                        break;
                                    }

                                    if(hash){
                                        xuiElem.boxing().setAttr(key || "KEY",hash,false,true);
                                        //elem.attr(hash);
                                    }
                                };
                            // find root node
                            if(profile._frame!==elem 
                                && elem.node.$xid 
                                && elem.node.id 
                                && !/^[^:]+-/.test(elem.node.id) 
                                ){

                                if(elem._isGroupFirst){
                                    var xuiElem=xui.UIProfile.getFromDom(elem.node.id);
                                    if(xuiElem){
                                        xuiElem._elset.forEach(function(o){
                                            fun(o, xuiElem.getKey(o.node.id, true));
                                        })
                                    }
                                }else{
                                    fun(elem);
                                }
                            }
                        });
                    }
                }
            }
        }
    }
});Class("xui.UI.FusionChartsXT","xui.UI",{
    Instance:{
        initialize:function(){
            if(_.isSet(window.FusionCharts) && FusionCharts.addEventListener){
                if(!FusionCharts._xui_attaced){
                    FusionCharts._xui_attaced = 1;
                    FusionCharts.addEventListener(["beforeRender","renderCancelled","beforeResize","resized","resizeCancelled","beforeDispose","disposed","disposeCancelled","pageNavigated","rotationEnd","rotationStart","centerLabelRollover","centerLabelRollout","centerLabelClick","centerLabelChanged","linkClicked","chartTypeChanged","chartClick","chartMouseMove","chartRollOver","chartRollOut","backgroundLoaded","backgroundLoadError","logoRollover","logoRollout","logoClick","logoLoaded","logoLoadError","scrollStart","scrollEnd","slicingStart","slicingEnd","dataRestored","beforeDataSubmit","dataSubmitError","dataSubmitted","dataSubmitCancelled","chartUpdated","nodeAdded","nodeUpdated","nodeDeleted","connectorAdded","connectorUpdated","connectorDeleted","labelAdded","labelDeleted","selectionRemoved","labelClick","labelRollOver","labelRollOut","labelDragStart","labelDragEnd","dataplotDragStart","dataplotDragEnd","alertComplete","realTimeUpdateComplete","realTimeUpdateError","chartCleared","zoomReset","zoomedOut","zoomedIn","zoomed","zoomModeChanged","pinned","beforeExport","exported","exportCancelled","beforePrint","printComplete","printCancelled","<static> ready","legendPointerDragStart","legendPointerDragStop","legendRangeUpdated","legendItemClicked","legendItemRollover","legendItemRollout","beforeLinkedItemOpen","linkedItemOpened","beforeLinkedItemClose","linkedItemClosed","entityRollOut","entityRollOver","entityClick","connectorRollOver","connectorRollOut","markerRollOver","markerRollOut","markerClick","printReadyStateChange","dataplotRollOver","dataplotRollOut","dataplotClick","processClick","processRollOver","processRollOut","categoryClick","categoryRollOver","categoryRollOut","milestoneClick","milestoneRollOver","milestoneRollOut","overlayButtonClick","loaded","rendered","drawComplete","renderComplete","dataInvalid","dataXMLInvalid","dataLoaded","noDataToDisplay","connectorClick","selectionStart","selectionEnd","dataLabelClick","dataLabelRollOver","dataLabelRollOut","dataLoadRequestCompleted","dataLoadError","dataLoadCancelled","dataLoadRequestCancelled","dataUpdated","dataUpdateCancelled","dataLoadRequested","beforeDataUpdate"], 
                        function(eventObject, argumentsObject){
                            xui.UI.FusionChartsXT.getAll().each(function(prf,t){
                                 if(prf.onFusionChartsEvent && prf.renderId && prf._chartId && (t=FusionCharts(prf._chartId)) && t==eventObject.sender)
                                    prf.boxing().onFusionChartsEvent(prf,eventObject,argumentsObject);
                            });
                        }
                    );
                }
            }else{
                throw "No FusionCharts Namespace!";
            }
        },
        refreshChart:function(dataFormat){
            return this.each(function(prf){
                if(prf.renderId){
                    var prop=prf.properties,t;
                    if(prf._chartId && (t=FusionCharts(prf._chartId))){
                        // dispose
                        t.dispose();
                        // clear node
                        prf.getSubNode('BOX').html("",false);
                    }

                    // new one
                    var fc=new FusionCharts(prop.chartType, prf._chartId, prop.width, prop.height),
                        flag;
                    
                    switch(dataFormat){
                        case 'XMLUrl':
                            var xml=linb.getFileSync(prop.XMLUrl);
                            if(xml)fc.setXMLData(xml);
                        break;
                        case 'JSONUrl':
                            var json=linb.getFileSync(prop.JSONUrl);
                            if(json)fc.setJSONData(json);
                        break;
                        case 'XMLData':
                            fc.setXMLData(prop.XMLData);
                        break;
                        default:
                            if(prop.XMLUrl){
                                var xml=linb.getFileSync(prop.XMLUrl);
                                if(xml)fc.setXMLData(xml);
                            }else if(prop.JSONUrl){
                                var json=linb.getFileSync(prop.JSONUrl);
                                if(json)fc.setJSONData(json);
                            }else if(prop.XMLData){
                                fc.setXMLData(prop.XMLData);
                            }else if(!_.isEmpty(prop.JSONData)){
                                flag=1;
                                fc.setJSONData(prf.box._prepareFCData(prf,prop.JSONData));
                            }
                    }
                    // ensure cursor pointer
                    if(!flag){
                        fc.setJSONData(prf.box._prepareFCData(prf,fc.getJSONData()));
                    }
                    fc.setTransparent(true);
                    fc.render(prf.getSubNode('BOX').id());
                }
            });
        },
        setTransparent:function(isTransparent){
           return this.each(function(prf){
               var t;
               _.set(prf.properties,["JSONData","chart","bgalpha"], isTransparent?"0,0":"");
               if(prf.renderId && prf._chartId && (t=FusionCharts(prf._chartId))){
                   t.setTransparent(isTransparent);
               }
           });
        },
        getChartAttribute:function(key){
            var prf=this.get(0);
            return _.isStr(key)?_.get(prf.properties,["JSONData","chart",key]):_.get(prf.properties,["JSONData","chart"]);
        },
        setChartAttribute:function(key,value){
            var h={};
            if(_.isStr(key)){
                h[key]=value;
            }else h=key;
                
            return this.each(function(prf){
                var t;
                if(prf.renderId && prf._chartId && (t=FusionCharts(prf._chartId))){
                    t.setChartAttribute(h);
                    // refresh memory in xui from real
                    _.set(prf.properties,["JSONData","chart"], t.getChartAttribute());
                }else{
                    // reset memory in xui only 
                    var opt=_.get(prf.properties,["JSONData","chart"]);
                    if(opt)_.merge(opt, h, 'all');
                }
            });
        },
        getFCObject:function(){
            var prf=this.get(0);
            return prf.renderId && prf._chartId && FusionCharts(prf._chartId);
        },
        getSVGString:function(){
            var prf=this.get(0), o=prf.renderId && prf._chartId && FusionCharts(prf._chartId);
            return o?o.getSVGString():null;
        },
        fillData:function(data,index,isLineset){
            this.each(function(prf){
                var JSONData=prf.properties.JSONData;
                data=_.clone(data);
                if(_.isArr(data) && _.isArr(data[0])){
                    if(isLineset){
                        JSONData.lineset=data;
                    }else{
                        if('dataset' in JSONData){
                            JSONData.dataset=data;
                        }else{
                            JSONData.data=data[0];
                        }
                    }
                }else{
                    if(isLineset){
                        if('lineset' in JSONData){
                            _.set(JSONData,["lineset",index||0,"data"],data);
                        }
                    }else{
                        if('dataset' in JSONData){
                            _.set(JSONData,["dataset",index||0,"data"],data);
                        }else{
                            JSONData.data=data;
                        }
                    }
                }
            });
            return this.refreshChart();
        },
        updateData:function(index, value){
            return this.each(function(prf){
                 if(prf.renderId && prf._chartId && (t=FusionCharts(prf._chartId))){
                        if(t.setData)
                            t.setData(index, value);
                }
            });
        },
        updateDataById:function(key, value){
            return this.each(function(prf){
                 if(prf.renderId && prf._chartId && (t=FusionCharts(prf._chartId)))
                        if(t.setDataForId)
                            t.setDataForId(key, value);
            });
        },
        callFC:function(funName, params){
            var fc;
            if((fc=this.getFCObject())&&_.isFun(fc[funName]))
                return fc[funName].apply(fc, params||[]);
        },
        configure:function(options){
            var prf=this.get(0),t;
            if(prf.renderId && prf._chartId && (t=FusionCharts(prf._chartId))){
                t.configure(options);
            }
        },
        setTheme:function(theme){
            if(typeof theme!="string" || !theme)theme=null;
            this.each(function(o){
                if(theme!=o.theme){
                    if(theme===null)
                        delete o.theme;
                    else
                        o.theme=theme;
                }
            });
            return this.setChartAttribute("theme",theme);
        }
    },
    Static:{
        _objectProp:{JSONData:1,configure:1,plotData:1,feedData:1},
        Appearances:{
            KEY:{
                'font-size':xui.browser.ie?0:null,
                'line-height':xui.browser.ie?0:null,
                overflow:'hidden'
            },
            BOX:{
                position:'absolute',
                left:0,
                top:0,
                'z-index':1
            },
            COVER:{
                position:'absolute',
                left:'-1px',
                top:'-1px',
                width:0,
                height:0,
                'z-index':4
            }
        },
        Templates:{
            tagName:'div',
            className:'{_className}',
            style:'{_style}',
            BOX:{
                tagName:'div'
            },
            COVER:{
                tagName:'div',
                style:"background-image:url("+xui.ini.img_bg+");"
            }
        },
        Behaviors:{
            HotKeyAllowed:false,
            onSize:xui.UI.$onSize
        },
        DataModel:{
            tabindex:null,
            defaultFocus:null,
            disableClickEffect:null,
            disableHoverEffect:null,
            disableTips:null,
            disabled:null,
            renderer:null,
            selectable:null,
            tips:null,
            width:400,
            height:300,
            chartType:{
                ini:"Column2D",
                //Single Series Charts
                listbox:["Column2D","Column3D","Line","Area2D","Bar2D","Bar3D","Pie2D","Pie3D","Doughnut2D","Doughnut3D","Pareto2D","Pareto3D",
                //Multi-series
                         "MSColumn2D","MSColumn3D","MSLine","MSBar2D","MSBar3D","MSArea","Marimekko","ZoomLine",
                //Stacked 
                         "StackedColumn3D","StackedColumn2D","StackedBar2D","StackedBar3D","StackedArea2D","MSStackedColumn2D",
                //Combination 
                         "MSCombi3D","MSCombi2D","MSColumnLine3D","StackedColumn2DLine","StackedColumn3DLine","MSCombiDY2D","MSColumn3DLineDY","StackedColumn3DLineDY","MSStackedColumn2DLineDY",
                //XYPlot
                         "Scatter","Bubble",
                //Scroll
                         "ScrollColumn2D","ScrollLine2D","ScrollArea2D","ScrollStackedColumn2D","ScrollCombi2D","ScrollCombiDY2D",
                // funnel
                        "Funnel",
               // real time
                        "RealTimeLine", "RealTimeArea", "RealTimeColumn", "RealTimeLineDY", "RealTimeStackedArea", "RealTimeStackedColumn",
               // Gauges
                        "HLinearGauge","Cylinder","HLED","VLED","Thermometer","AngularGauge",
               // others
                        "Pyramid ","Radar","MultiLevelPie"
                ],
                action:function(){
                    if(this.renderId){
                        this.boxing().refreshChart();
                    }
                }
            },
            JSONData:{
                ini:{},
                get:function(){
                    var prf=this,prop=prf.properties,fc;
                    if(!_.isEmpty(prop.JSONData))
                        return prop.JSONData;
                    else if(fc=prf.boxing().getFCObject())
                        return prf.box._cleanData(prf,fc.getJSONData());
                },
                set:function(data){
                    var prf=this,prop=prf.properties;
                    if(_.isStr(data))data=_.unserialize(data);
                    if(data){
                        prop.XMLData=prop.XMLUrl=prop.JSONUrl="";
                        prop.JSONData=_.clone(data);

                        if(prf.renderId){
                            prf.boxing().refreshChart('JSONData');
                        }
                    }
                }
            },
            XMLUrl:{
                ini:"",
                set:function(url){
                    var prf=this,prop=prf.properties;

                    prop.XMLUrl=url;
                    prop.JSONUrl=prop.XMLData="";
                    prop.JSONData={};

                    if(prf.renderId){
                        prf.boxing().refreshChart('XMLUrl');
                    }
                }
            },
            XMLData:{
                ini:"",
                get:function(force){
                    var prf=this,prop=prf.properties,fc;
                    if(prop.XMLData)
                        return prop.XMLData;
                    else if(fc=prf.boxing().getFCObject())
                        return fc.getXMLData();
                },
                set:function(url){
                    var prf=this,prop=prf.properties;

                    prop.XMLData=url;
                    prop.XMLUrl=prop.JSONUrl="";
                    prop.JSONData={};

                    if(prf.renderId){
                        prf.boxing().refreshChart('XMLData');
                    }
                }
            },
            JSONUrl :{
                ini:"",
                set:function(url){
                    var prf=this,prop=prf.properties;

                    prop.JSONUrl=url;
                    prop.XMLUrl=prop.XMLData="";
                    prop.JSONData={};

                    if(prf.renderId){
                        prf.boxing().refreshChart('JSONUrl');
                    }
                }
            },
            plotData:{
                ini:{},
                get:function(data){
                    var data=this.properties.JSONData;
                    return data.dataset||data.data||{};
                },
                set:function(data){
                    var JSONData=this.properties.JSONData;
                    if(('dataset' in JSONData) || (_.isArr(data) && _.isArr(data[0])) )
                        JSONData.dataset=_.clone(data);
                    else
                        JSONData.data=_.clone(data);

                    var bak=JSONData.chart.animation;
                    JSONData.chart.animation='0';
                     this.boxing().refreshChart();
                     if(bak)JSONData.chart.animation=bak;else delete JSONData.chart.animation;
                     return this;
                }
            },
            feedData:{
                ini:"",
                set:function(data){
                    var prf=this,t;
                     if(prf.renderId && prf._chartId && (t=FusionCharts(prf._chartId)) && t.feedData){
                        if(_.isFinite(data))data="value="+data;
                        t.feedData(data||"");
                    }
                }
            }
        },
        _cleanData:function(prf,data){
            var hoder="Javascript:void(0)";
            if(data.dataset){
                _.arr.each(data.dataset,function(o,i){
                    _.arr.each(o.dataset,function(v,j){
                        _.arr.each(v.data,function(w,k){
                            if(w.link==hoder)delete w.link;
                        });
                    });
                    _.arr.each(o.data,function(v,j){
                        if(v.link==hoder)delete v.link;
                    });
                });
            }else if(data.data){
                _.arr.each(data.data,function(o,i){
                    if(o.link==hoder)delete o.link;
                    if(o.labelLink==hoder)delete o.labelLink;
                });                
            }
            if(data.categories){
                _.arr.each(data.categories,function(o,i){
                    _.arr.each(o.category,function(v,j){
                       if(v.link==hoder)delete v.link;
                    });
                });
            }
            return data;
        },
        _prepareFCData:function(prf, data){
            var id=prf.$xid;
                data=_.clone(data),
                hoder="Javascript:void(0)";
            //show cursor as pointer
            if(data.dataset){
                _.arr.each(data.dataset,function(o,i){
                    _.arr.each(o.dataset,function(v,j){
                        _.arr.each(v.data,function(w,k){
                            if(!w.link)w.link=hoder;
                        });
                    });
                    _.arr.each(o.data,function(v,j){
                       if(!v.link)v.link=hoder;
                    });
                });
            }else if(data.data){
                _.arr.each(data.data,function(o,i){
                    if(!o.link)o.link=hoder;
                    if(!o.labelLink)o.labelLink=hoder;
                });                
            }
            if(data.categories){
                _.arr.each(data.categories,function(o,i){
                    _.arr.each(o.category,function(v,j){
                       if(!v.link)v.link=hoder;
                    });
                });
            }
            return data;
        },
        RenderTrigger:function(){
            var prf=this;
            // give chart dom id
            prf._chartId="FC_"+prf.properties.chartType+"_"+prf.$xid;

            if(!_.isEmpty(prf.properties.configure)){
                prf.boxing().setConfigure(prf.properties.configure, true);
            }
            if(prf.theme)
                prf.boxing().setTheme(prf.theme);
            // render it
            prf.boxing().refreshChart();
            
            var t=FusionCharts(prf._chartId),
                f1=function(a,argsMap){
                    if(prf.onDataClick)prf.boxing().onDataClick(prf,argsMap);
                },f2=function(a,argsMap){
                    if(prf.onLabelClick)prf.boxing().onLabelClick(prf,argsMap);
                },f3=function(a,argsMap){
                    if(prf.onAnnotationClick)prf.boxing().onAnnotationClick(prf,argsMap);
                };
            t.addEventListener("dataplotClick",f1);
            t.addEventListener("dataLabelClick",f2);
            t.addEventListener("annotationClick",f3);
            // set before destroy function
            (prf.$beforeDestroy=(prf.$beforeDestroy||{}))["unsubscribe"]=function(){
                var t;
                if(this._chartId && (t=FusionCharts(this._chartId))){
                    t.removeEventListener("dataplotClick",f1);
                    t.removeEventListener("dataLabelClick",f2);
                    t.removeEventListener("annotationClick",f3);
                    f1=f2=f3=null;
                    t.dispose();
                }
            }
        },
        EventHandlers:{
            onFusionChartsEvent:function(prf, eventObject, argumentsObject){},
            onDataClick:function(prf, argsMap){},
            onLabelClick:function(prf, argsMap){},
            onAnnotationClick:function(prf, argsMap){},
            onShowTips:null
        },
        _onresize:function(prf,width,height){
            var size = prf.getSubNode('BOX').cssSize(),prop=prf.properties,t;
            if( (width && size.width!=width) || (height && size.height!=height) ){
                // reset here
                if(width)prop.width=width;
                if(height)prop.height=height;

                size={width:width,height:height};
                prf.getSubNode('BOX').cssSize(size,true);
                if(prf.$inDesign || prop.cover){
                    prf.getSubNode('COVER').cssSize(size,true);
                }
                if(prf.renderId && prf._chartId && (t=FusionCharts(prf._chartId))){
                    t.resizeTo(prop.width, prop.height);
                }
            }
        }
    }
});
/*
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.6.0

 @attributions (infers respective third-party copyrights)
 Raphael 2.1.0 (modified as 'Red Raphael') <http://raphaeljs.com/license.html>
 JSON v2 <http://www.JSON.org/js.html>
 Firebug Lite 1.3.0 <http://getfirebug.com/firebuglite>
*/
(function(){if(!window.FusionCharts||!window.FusionCharts.version){var d=window,m=d.document,D=d.navigator,v={window:d},p=v.modules={},c=v.interpreters={},K=Object.prototype.toString,b=/msie/i.test(D.userAgent)&&!d.opera,G=/loaded|complete/,a=!1,l=function(){var a=v.ready;v.ready=!0;v.raiseEvent&&(v.readyNotified=!0,v.raiseEvent("ready",{version:v.core.version,now:!a},v.core));v.readyNow=!a},P=function(a,c){var b,e;if(c instanceof Array)for(b=0;b<c.length;b+=1)"object"!==typeof c[b]?a[b]=c[b]:("object"!==
typeof a[b]&&(a[b]=c[b]instanceof Array?[]:{}),P(a[b],c[b]));else for(b in c)"object"===typeof c[b]?(e=K.call(c[b]),"[object Object]"===e?("object"!==typeof a[b]&&(a[b]={}),P(a[b],c[b])):"[object Array]"===e?(a[b]instanceof Array||(a[b]=[]),P(a[b],c[b])):a[b]=c[b]):a[b]=c[b];return a};v.extend=function(a,c,b,e){var h;b&&a.prototype&&(a=a.prototype);if(!0===e)P(a,c);else for(h in c)a[h]=c[h];return a};v.uniqueId=function(){return"chartobject-"+(v.uniqueId.lastId+=1)};v.uniqueId.lastId=0;v.policies=
{options:{chartTypeSourcePath:["typeSourcePath",""],product:["product","v3"],insertMode:["insertMode","replace"],safeMode:["safeMode",!0],overlayButton:["overlayButton",void 0],containerBackgroundColor:["containerBackgroundColor","#ffffff"],containerBackgroundOpacity:["containerBackgroundOpacity",1],containerClassName:["containerClassName","fusioncharts-container"],chartType:["type",void 0],baseChartMessageFont:["baseChartMessageFont","Verdana,sans"],baseChartMessageFontSize:["baseChartMessageFontSize",
"10"],baseChartMessageColor:["baseChartMessageColor","#666666"],dataLoadStartMessage:["dataLoadStartMessage","Retrieving data. Please wait."],dataLoadErrorMessage:["dataLoadErrorMessage","Error in loading data."],dataInvalidMessage:["dataInvalidMessage","Invalid data."],dataEmptyMessage:["dataEmptyMessage","No data to display."],typeNotSupportedMessage:["typeNotSupportedMessage","Chart type not supported."],loadMessage:["loadMessage","Loading chart. Please wait."],renderErrorMessage:["renderErrorMessage",
"Unable to render chart."]},attributes:{lang:["lang","EN"],id:["id",void 0]},width:["width","400"],height:["height","300"],src:["swfUrl",""]};c.stat="swfUrl id width height debugMode registerWithJS backgroundColor scaleMode lang detectFlashVersion autoInstallRedirect".split(" ");v.parsePolicies=function(a,c,b){var e,h,n;for(h in c)if(v.policies[h]instanceof Array)n=b[c[h][0]],a[h]=void 0===n?c[h][1]:n;else for(e in"object"!==typeof a[h]&&(a[h]={}),c[h])n=b[c[h][e][0]],a[h][e]=void 0===n?c[h][e][1]:
n};v.parseCommands=function(a,b,g){var e,h;"string"===typeof b&&(b=c[b]||[]);e=0;for(h=b.length;e<h;e++)a[b[e]]=g[e];return a};v.registrars={module:function(){return v.core.apply(v.core,arguments)}};v.core=function(a){if(!(this instanceof v.core)){if(1===arguments.length&&a instanceof Array&&"private"===a[0]){if(p[a[1]])return;p[a[1]]={};a[3]instanceof Array&&(v.core.version[a[1]]=a[3]);return"function"===typeof a[2]?a[2].call(v,p[a[1]]):v}if(1===arguments.length&&"string"===typeof a)return v.core.items[a];
v.raiseError&&v.raiseError(this,"25081840","run","",new SyntaxError('Use the "new" keyword while creating a new FusionCharts object'))}var b={};this.__state={};1===arguments.length&&"object"===typeof arguments[0]?b=arguments[0]:v.parseCommands(b,c.stat,arguments);1<arguments.length&&"object"===typeof arguments[arguments.length-1]&&(delete b[c.stat[arguments.length-1]],v.extend(b,arguments[arguments.length-1]));this.id="undefined"===typeof b.id?this.id=v.uniqueId():b.id;this.args=b;v.core.items[this.id]instanceof
v.core&&v.raiseWarning(this,"06091847","param","",Error('A FusionChart oject with the specified id "'+this.id+'" already exists. Renaming it to '+(this.id=v.uniqueId())));v.parsePolicies(this,v.policies,b);this.attributes.id=this.id;this.resizeTo&&this.resizeTo(b.width,b.height,!0);this.chartType&&this.chartType(b.type||b.swfUrl,!0);v.raiseEvent("beforeInitialize",b,this);v.core.items[this.id]=this;v.core.defaultOptions=v.core.options;v.raiseEvent("initialized",b,this);return this};v.core.prototype=
{};v.core.prototype.constructor=v.core;v.extend(v.core,{id:"FusionCharts",version:["3","6","0"],items:{},options:{},getObjectReference:function(a){return v.core.items[a].ref},register:function(a){return v.registrars[a=a&&a.toString&&a.toString().toLowerCase()]&&v.registrars[a].apply(v.core,Array.prototype.slice.call(arguments,1))}});d.FusionCharts=v.core;d.FusionMaps&&d.FusionMaps.legacy&&(v.core(["private","modules.core.geo",d.FusionMaps.legacy,d.FusionMaps.version]),a=!0);G.test(m.readyState)||
m.loaded?(v.ready=!0,setTimeout(l,1)):function(){function c(){arguments.callee.done||(arguments.callee.done=!0,g&&clearTimeout(g),a||(d.FusionMaps&&d.FusionMaps.legacy&&v.core(["private","modules.core.geo",d.FusionMaps.legacy,d.FusionMaps.version]),d.FusionMaps=v.core),setTimeout(l,1))}function z(){G.test(m.readyState)?c():g=setTimeout(z,10)}var g,e;m.addEventListener?m.addEventListener("DOMContentLoaded",c,!1):m.attachEvent&&d.attachEvent("onLoad",c);if(b)try{"https:"===d.location.protocol?m.write('<script id="__ie_onload_fusioncharts" defer="defer" src="//:">\x3c/script>'):
m.write('<script id="__ie_onload_fusioncharts" defer="defer" src="javascript:void(0)">\x3c/script>'),e=m.getElementById("__ie_onload_fusioncharts"),e.onreadystatechange=function(){"complete"==this.readyState&&c()}}catch(h){}/WebKit/i.test(D.userAgent)&&(g=setTimeout(z,10));d.onload=function(a){return function(){c();a&&a.call&&a.call(d)}}(d.onload)}();d.FusionMaps=v.core}})();
FusionCharts.register("module",["private","modules.mantle.errormanager",function(){var d=this,m=d.window,D={type:"TypeException",range:"ValueRangeException",impl:"NotImplementedException",param:"ParameterException",run:"RuntimeException",comp:"DesignTimeError",undefined:"UnspecifiedException"},v=function(c,p,b,G,a,l){var P="#"+p+" "+(c?c.id:"unknown-source")+G+" "+l+" >> ";a instanceof Error?(a.name=D[b],a.module="FusionCharts"+G,a.level=l,a.message=P+a.message,P=a.message,m.setTimeout(function(){throw a;
},0)):P+=a;p={id:p,nature:D[b],source:"FusionCharts"+G,message:P};d.raiseEvent(l,p,c);if("function"===typeof m["FC_"+l])m["FC_"+l](p)},p;d.raiseError=function(c,d,b,p,a){v(c,d,b,p,a,"Error")};d.raiseWarning=function(c,d,b,p,a){v(c,d,b,p,a,"Warning")};p={outputHelpers:{text:function(c,d){p.outputTo("#"+c.eventId+" ["+(c.sender.id||c.sender).toString()+'] fired "'+c.eventType+'" event. '+("error"===c.eventType||"warning"===c.eventType?d.message:""))},event:function(c,d){this.outputTo(c,d)},verbose:function(c,
d){p.outputTo(c.eventId,c.sender.id,c.eventType,d)}},outputHandler:function(c,m){"function"!==typeof p.outputTo?d.core["debugger"].outputFailed=!0:(d.core["debugger"].outputFailed=!1,p.currentOutputHelper(c,m))},currentOutputHelper:void 0,outputTo:void 0,enabled:!1};p.currentOutputHelper=p.outputHelpers.text;d.extend(d.core,{"debugger":{syncStateWithCharts:!0,outputFormat:function(c){return c&&"function"===typeof c.toLowerCase&&"function"===typeof p.outputHelpers[c=c.toLowerCase()]?(p.currentOutputHelper=
p.outputHelpers[c],!0):!1},outputTo:function(c){"function"===typeof c?p.outputTo=c:null===c&&(d.core["debugger"].enable(!1),delete p.outputTo)},enable:function(c,m,b){var G;"object"===typeof c&&1===arguments.length&&(G=c,c=G.state,m=G.outputTo,b=G.outputFormat);"function"===typeof c&&("string"!==typeof m||2!==arguments.length&&!G||(b=m),m=c,c=!0);if("boolean"===typeof c&&c!==p.enabled)d.core[(p.enabled=c)?"addEventListener":"removeEventListener"]("*",p.outputHandler);"function"===typeof m&&(p.outputTo=
m);d.core["debugger"].outputFormat(b);return p.enabled},enableFirebugLite:function(){var c;m.console&&m.console.firebug?d.core["debugger"].enable(m.console.log,"verbose"):((c=m.document.getElementsByTagName("html"))&&c[0].setAttribute("debug","true"),d.loadScript("https://getfirebug.com/firebug-lite.js#overrideConsole=false,startOpened=true",function(){d.core["debugger"].enable(m.console.log,"verbose")},"{ startOpened: true }",!0,!0))}},debugMode:{enabled:function(){m.setTimeout(function(){throw Error("Deprecated! Please use FusionCharts.debugger.enable instead.");
},0);return d.core["debugger"].enable.apply(d.core["debugger"],arguments)}}},!1)}]);
FusionCharts.register("module",["private","modules.mantle.eventmanager",function(){var d=this,m=d.window,D=d.core,v=m.Object.prototype.toString,p=v.call([]),c=function(a,c,b,g){try{a[0].call(c,b,g||{})}catch(e){setTimeout(function(){throw e;},0)}},K=function(a,b,z){if(a instanceof Array)for(var g=0,e;g<a.length;g+=1){if(a[g][1]===b.sender||void 0===a[g][1])e=a[g][1]===b.sender?b.sender:d.core,c(a[g],e,b,z),!0===b.detached&&(a.splice(g,1),g-=1,b.detached=!1);if(!0===b.cancelled)break}},b={unpropagator:function(){return!1===
(this.cancelled=!0)},detacher:function(){return!1===(this.detached=!0)},undefaulter:function(){return!1===(this.prevented=!0)},listeners:{},lastEventId:0,addListener:function(a,c,z){var g,e;if(v.call(a)===p){g=[];for(e=0;e<a.length;e+=1)g.push(b.addListener(a[e],c,z));return g}if("string"!==typeof a)d.raiseError(z||d.core,"03091549","param","::EventTarget.addListener",Error("Unspecified Event Type"));else if("function"!==typeof c)d.raiseError(z||d.core,"03091550","param","::EventTarget.addListener",
Error("Invalid Event Listener"));else return a=a.toLowerCase(),b.listeners[a]instanceof Array||(b.listeners[a]=[]),b.listeners[a].push([c,z]),c},removeListener:function(a,c,z){var g;if("function"!==typeof c)d.raiseError(z||d.core,"03091560","param","::EventTarget.removeListener",Error("Invalid Event Listener"));else if(a instanceof Array)for(g=0;g<a.length;g+=1)b.removeListener(a[g],c,z);else if("string"!==typeof a)d.raiseError(z||d.core,"03091559","param","::EventTarget.removeListener",Error("Unspecified Event Type"));
else if(a=a.toLowerCase(),a=b.listeners[a],a instanceof Array)for(g=0;g<a.length;g+=1)a[g][0]===c&&a[g][1]===z&&(a.splice(g,1),g-=1)},triggerEvent:function(a,c,z,g,e,h){if("string"!==typeof a)d.raiseError(c,"03091602","param","::EventTarget.dispatchEvent",Error("Invalid Event Type"));else{a=a.toLowerCase();var n={eventType:a,eventId:b.lastEventId+=1,sender:c||Error("Orphan Event"),cancelled:!1,stopPropagation:this.unpropagator,prevented:!1,preventDefault:this.undefaulter,detached:!1,detachHandler:this.detacher};
K(b.listeners[a],n,z);K(b.listeners["*"],n,z);switch(n.prevented){case !0:if("function"===typeof h)try{h.call(g||c||m,n,z||{})}catch(M){setTimeout(function(){throw M;},0)}break;default:if("function"===typeof e)try{e.call(g||c||m,n,z||{})}catch(l){setTimeout(function(){throw l;},0)}}return!0}}},G=d.raiseEvent=function(a,c,z,g,e,h){return b.triggerEvent(a,z,c,g,e,h)},a=d.legacyEventList={},l={};d.disposeEvents=function(a){var c,z;for(c in b.listeners)for(z=0;z<b.listeners[c].length;z+=1)b.listeners[c][z][1]===
a&&b.listeners[c].splice(z,1)};d.raiseEventWithLegacy=function(c,b,z,g,e,h,n){var d=a[c];G(c,b,z,e,h,n);d&&"function"===typeof m[d]&&setTimeout(function(){m[d].apply(e||m,g)},0)};d.raiseEventGroup=function(a,c,b,g,e,h,n){var d=g.id,H=a+d;l[H]?(clearTimeout(l[H]),delete l[H]):d&&H?l[H]=setTimeout(function(){G(c,b,g,e,h,n);delete l[H]},0):G(c,b,g,e,h,n)};d.addEventListener=function(a,c){return b.addListener(a,c)};d.removeEventListener=function(a,c){return b.removeListener(a,c)};d.extend(D,{addEventListener:function(a,
c){return b.addListener(a,c)},removeEventListener:function(a,c){return b.removeListener(a,c)},ready:function(a,c,b){d.ready?(D.ready=function(a,e){"function"===typeof a&&setTimeout(function(){a.call(e||D,c||D)},0)},D.ready(a,b)):"function"===typeof a&&D.addEventListener("ready",function(){D.ready(a,c,b)});return this}});D.on=D.addEventListener;d.extend(D.prototype,{addEventListener:function(a,c){return b.addListener(a,c,this)},removeEventListener:function(a,c){return b.removeListener(a,c,this)}});
D.prototype.on=D.prototype.addEventListener;d.policies.options.events=["events",{}];d.addEventListener("beforeInitialize",function(a){a=a.sender;var c=a.options.events,b;if(c)for(b in c)"function"===typeof c[b]&&a.addEventListener(b,c[b])});d.ready&&!d.readyNotified&&(d.readyNotified=!0,d.raiseEvent("ready",{version:d.core.version,now:d.readyNow},d.core))}]);
FusionCharts.register("module",["private","modules.mantle.ajax",function(){var d=this,m=d.window,D=parseFloat(m.navigator.appVersion.split("MSIE")[1]),v=5.5<=D&&7>=D?!0:!1,p="file:"===m.location.protocol,c=m.ActiveXObject,K=(!c||!p)&&m.XMLHttpRequest,b={objects:0,xhr:0,requests:0,success:0,failure:0,idle:0},G=function(){var a;if(K)return G=function(){b.xhr++;return new K},G();try{a=new c("Msxml2.XMLHTTP"),G=function(){b.xhr++;return new c("Msxml2.XMLHTTP")}}catch(d){try{a=new c("Microsoft.XMLHTTP"),
G=function(){b.xhr++;return new c("Microsoft.XMLHTTP")}}catch(p){a=!1}}return a};d.core.ajax={stats:function(a){return a?b[a]:d.extend({},b)},headers:{"If-Modified-Since":"Sat, 29 Oct 1994 19:43:31 GMT","X-Requested-With":"XMLHttpRequest","X-Requested-By":"FusionCharts",Accept:"text/plain, */*","Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}};D=d.ajax=function(a,c){this.onSuccess=a;this.onError=c;this.open=!1;b.objects++;b.idle++};d.extend(D.prototype,{headers:d.core.ajax.headers,
transact:function(a,c,P,N){var z=this,g=z.xmlhttp,e=z.headers,h=z.onError,n=z.onSuccess;a="POST"===a;var M,H;if(!g||v)g=G(),z.xmlhttp=g;g.onreadystatechange=function(){try{4===g.readyState&&(!g.status&&p||200<=g.status&&300>g.status||304===g.status||1223===g.status||0===g.status?(n&&n(g.responseText,z,N,c),b.success++):h&&(h(Error("XmlHttprequest Error"),z,N,c),b.failure++),b.idle--,z.open=!1)}catch(a){h&&h(a,z,N,c),m.FC_DEV_ENVIRONMENT&&setTimeout(function(){throw a;},0),b.failure++}};try{g.open(a?
"POST":"GET",c,!0);g.overrideMimeType&&g.overrideMimeType("text/plain");if(a)if("string"===typeof P)M=P;else{M=[];for(H in P)M.push(H+"="+(P[H]+"").replace(/\=/g,"%3D").replace(/\&/g,"%26"));M=M.join("&")}else M=null;for(H in e)g.setRequestHeader(H,e[H]);g.send(M);b.requests++;b.idle++;z.open=!0}catch(q){d.raiseError(d.core,"1110111515A","run","XmlHttprequest Error",q.message)}return g},get:function(a,c){return this.transact("GET",a,void 0,c)},post:function(a,c,b){return this.transact("POST",a,c,
b)},abort:function(){var a=this.xmlhttp;this.open=!1;return a&&"function"===typeof a.abort&&a.readyState&&0!==a.readyState&&a.abort()},dispose:function(){this.open&&this.abort();delete this.onError;delete this.onSuccess;delete this.xmlhttp;delete this.open;b.objects--;return null}})}]);
FusionCharts.register("module",["private","modules.mantle.runtime;1.1",function(){var d=this,m=d.window,D=/(^|[\/\\])(fusioncharts\.js)([\?#].*)?$/ig,v=/[\\\"<>;&]/,p=/^[^\S]*?(sf|f|ht)(tp|tps):\/\//i,c={},K={},b={},G={},a=d.purgeDOM=function(c){var b=c.attributes,g,e;if(b)for(g=b.length-1;0<=g;g-=1)e=b[g].name,"function"===typeof c[e]&&(c[e]=null);if(b=c.childNodes)for(b=b.length,g=0;g<b;g+=1)a(c.childNodes[g])},l=function(a,c,b){var e,h;for(e in a)if(a[e]instanceof Array)c[a[e][0]]=b[e];else for(h in a[e])c[a[e][h][0]]=
b[e][h]},P=/^(FusionCharts|FusionWidgets|FusionMaps)/;d.getScriptBaseUri=function(a){var c=m.document.getElementsByTagName("script"),b=c.length,e,h;for(h=0;h<b;h+=1)if(e=c[h].getAttribute("src"),void 0!==e&&null!==e&&null!==e.match(a))return e.replace(a,"$1")};d.core.options.scriptBaseUri=function(){var a=d.getScriptBaseUri(D);return void 0===a?(d.raiseError(FusionCharts,"1603111624","run",">GenericRuntime~scriptBaseUri","Unable to locate FusionCharts script source location (URL)."),""):a}();d.isXSSSafe=
function(a,c){return c&&null!==p.exec(a)?!1:null===v.exec(a)};d.xssEncode=function(a){return null===a||void 0===a||"function"!==typeof a.toString?"":a=a.toString().replace(/&/g,"&amp;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};d.loadScript=function(a,z,g,e,h){if(!a)return!1;var n=z&&z.success||z,M=z&&z.failure,l,q={type:"script",success:!1},J=function(){G[l]=clearTimeout(G[l]);q.success?n&&n(a,l):M&&M(a,l);d.raiseEvent("externalresourceload",q,d.core)};
h=h?"":d.core.options.scriptBaseUri;l=h+a;d.isXSSSafe(l,!1)||(l="function"===typeof m.encodeURIComponent?m.encodeURIComponent(l):m.escape(l));q.path=h;q.src=l;q.file=a;if(!0===b[l]&&e)return q.success=!0,q.notReloaded=!0,"function"===typeof z&&(z(),d.raiseEvent("externalresourceload",q,d.core)),!0;if(c[l]&&e)return!1;c[l]=!0;K[l]&&K[l].parentNode&&K[l].parentNode.removeChild(K[l]);z=K[l]=m.document.createElement("script");z.type="text/javascript";z.src=l;g&&(z["\v"==="v"?"text":"innerHTML"]=g);"function"===
typeof n&&(b[l]=!1,G[l]=clearTimeout(G[l]),z.onload=function(){b[l]=!0;q.success=!0;J()},z.onerror=function(){b[l]=!1;c[l]=!1;J()},z.onreadystatechange=function(){if("complete"===this.readyState||"loaded"===this.readyState)b[l]=!0,q.success=!0,J()});m.document.getElementsByTagName("head")[0].appendChild(z);"function"===typeof M&&(G[l]=setTimeout(function(){b[l]||J()},d.core.options.html5ResourceLoadTimeout||15E3));return!0};d.capitalizeString=function(a,c){return a?a.replace(c?/(^|\s)([a-z])/g:/(^|\s)([a-z])/,
function(a,c,b){return c+b.toUpperCase()}):a};d.extend(d.core,{clone:function(a,c){var b=typeof a,e,h=d.extend({},this.args,!1,!1);l(d.policies,h,this);l(d.renderer.getRendererPolicy(this.options.renderer),h,this);delete h.id;delete h.animate;delete h.stallLoad;e=h.link;h=d.extend({},h,!1,!1);h.link=e;switch(b){case "object":d.extend(h,a);break;case "boolean":c=a}return c?h:new d.core(h)},isActive:function(){if(!this.ref||m.document.getElementById(this.id)!==this.ref)return!1;try{return P.test(this.ref.signature())}catch(a){return!1}},
chartType:function(a,c){var b=this.src,e=!0===c,h=this.options,n;"string"===typeof a&&(c="object"===typeof c?c:{},b=a.replace(/[\?\#][\s\S]*$/g,""),n=null!==b.match(/\.swf\s*?$/ig),b=b.replace(/\.swf\s*?$/ig,""),h.chartType=b.replace(/^[\s\S]*\//ig,"").replace(/^fcmap_/i,""),h.chartTypeSourcePath=-1===b.indexOf("/")?c.chartTypeSourcePath||this.options.chartTypeSourcePath||d.core.options.chartTypeSourcePath||"":b.replace(/[^\/]*?$/ig,""),this.src=((d.core.options.scriptBaseUri||"")+(h.chartTypeSourcePath||
d.core.options.chartTypeSourcePath||"")).replace(/\/\s*$/g,"")+"/"+h.chartType.replace(/\.swf\s*?$/ig,"")+".swf",n&&(d.raiseWarning(this,"08101320181","comp","FusionCharts#chartType",'Chart type has ".swf" in alias and as such has been deprecated. Please use chart type alias.'),h.chartTypeSourcePath=d.core.options.chartTypeSourcePath||""),void 0!==c.dataSource&&null!==c.dataSource?this.setChartData(c.dataSource,c.dataFormat,c.dataConfiguration):this.isActive()&&!e&&this.render());return(h.chartType||
"").toLowerCase()}},!0);m.getChartFromId=function(a){d.raiseWarning(this,"11133001041","comp","GenericRuntime~getObjectFromId()",'Use of deprecated getChartFromId() or getMapFromId(). Replace with "FusionCharts()" or FusionCharts.items[].');return d.core.items[a]instanceof d.core?d.core.items[a].ref:m.swfobject&&m.swfobject.getObjectById(a)};m.getMapFromId=m.getChartFromId}]);
FusionCharts.register("module",["private","api.printmanager",function(){var d=this;d.extend(d.core,{printManager:{configure:function(){d.raiseWarning(d.core,"28141714","impl",".printManager.configure","PrintManager is deprecated")},isReady:function(){d.raiseWarning(d.core,"28141714","impl",".printManager.isReady","PrintManager is deprecated");return!1},enabled:function(){d.raiseWarning(d.core,"28141714","impl",".printManager.enabled","PrintManager is deprecated");return!1},managedPrint:function(){d.raiseWarning(d.core,
"28141714","impl",".printManager.managedPrint","PrintManager is deprecated")}}},!1)}]);
FusionCharts.register("module",["private","modules.interface.renderer",function(){var d=this,m=d.window,D=m.document,v=function(){d.raiseError(this,"25081845","run","::RendererManager",Error("No active renderer"))},p=d.FusionChartsDOMInsertModes={REPLACE:"replace",APPEND:"append",PREPEND:"prepend"},c={undefined:{render:v,remove:v,update:v,resize:v,config:v,policies:{}}},K={},b=function(a){return function(){var c=this.ref;if(void 0===c||null===c||"function"!==typeof c[a])d.raiseError(this,"25081617",
"run","#"+a+"()","ExternalInterface call failed. Check whether chart has been rendered.");else return c[a].apply(c,arguments)}},G=function(a,c){return"function"===typeof a[c]?function(){return a[c].apply(a,arguments)}:a[c]},a=function(a,c){var b=D.getElementById(a),e=c.id||c.getAttribute("id"),h,n;if(null===b)return!1;if(a===e)return!0;e=c.getElementsByTagName("*");h=0;for(n=e.length;h<n;h++)if(e[h]===b)return!1;return!0},l=/[^\%\d]*$/ig,P;d.policies.options.containerElementId=["renderAt",void 0];
d.policies.options.renderer=["renderer",void 0];d.normalizeCSSDimension=function(a,c,b){a=void 0===a?b.offsetWidth||parseFloat(b.style.width):a;c=void 0===c?b.offsetHeight||parseFloat(b.style.height):c;var e={},h=b.style,n;h.width=a=a.toString?a.toString():"0";h.height=c=c.toString?c.toString():"0";if((e.widthIsRelative=a.match(/^\s*\d*\.?\d*\%\s*$/)&&!a.match(/^\s*0\%\s*$/))&&0===b.offsetWidth)for(n=b;n=n.offsetParent;)if(0<n.offsetWidth){a=(n.offsetWidth*parseFloat(a.match(/\d*/)[0])/100).toString();
break}if((e.heightIsRelative=c.match(/^\s*\d*\.?\d*\%\s*$/)&&!c.match(/^\s*0\%\s*$/))&&20>=b.offsetHeight)for(n=b;n=n.offsetParent;)if(0<n.offsetHeight){c=(n.offsetHeight*parseFloat(c.match(/\d*/)[0])/100).toString();break}e.width=a.replace?a.replace(/^\s*(\d*\.?\d*)\s*$/ig,"$1px"):a;e.height=c.replace?c.replace(/^\s*(\d*\.?\d*)\s*$/ig,"$1px"):c;h.width=e.width;h.height=e.height;e.pixelWidth=e.widthIsRelative?b.offsetWidth:parseInt(e.width,10)||0;e.pixelHeight=e.heightIsRelative?b.offsetHeight:parseInt(e.height,
10)||0;return e};P=d.renderer={register:function(a,b){if(!a||"function"!==typeof a.toString)throw Error("#03091436 ~renderer.register() Invalid value for renderer name.");a=a.toString().toLowerCase();if(void 0!==c[a])return d.raiseError(d.core,"03091438","param","::RendererManager>register",'Duplicate renderer name specified in "name"'),!1;c[a]=b;return!0},userSetDefault:!1,setDefault:function(a){if(!a||"function"!==typeof a.toString)return d.raiseError(d.core,"25081731","param","::RendererManager>setDefault",
'Invalid renderer name specified in "name"'),!1;if(void 0===c[a=a.toString().toLowerCase()])return d.raiseError(d.core,"25081733","range","::RendererManager>setDefault","The specified renderer does not exist."),!1;this.userSetDefault=!1;d.policies.options.renderer=["renderer",a];return!0},notifyRender:function(a){var c=d.core.items[a&&a.id];c&&(!1!==a.success||a.silent)||d.raiseError(d.core.items[a.id],"25081850","run","::RendererManager",Error("There was an error rendering the chart. Enable FusionCharts JS debugger for more information."));
if(c.ref=a.ref)a.ref.FusionCharts=d.core.items[a.id];d.raiseEvent("internal.DOMElementCreated",{},c)},protectedMethods:{options:!0,attributes:!0,src:!0,ref:!0,constructor:!0,signature:!0,link:!0,addEventListener:!0,removeEventListener:!0},getRenderer:function(a){return c[a]},getRendererPolicy:function(a){a=c[a].policies;return"object"===typeof a?a:{}},currentRendererName:function(){return d.policies.options.renderer[1]},update:function(a){K[a.id].update.apply(a,Array.prototype.slice.call(arguments,
1))},render:function(a){K[a.id].render.apply(a,Array.prototype.slice.call(arguments,1))},remove:function(a){K[a.id].remove.apply(a,Array.prototype.slice.call(arguments,1))},resize:function(a){K[a.id].resize.apply(a,Array.prototype.slice.call(arguments,1))},config:function(a){K[a.id].config.apply(a,Array.prototype.slice.call(arguments,1))},dispose:function(a){K[a.id].dispose.apply(a,Array.prototype.slice.call(arguments,1))}};d.addEventListener("beforeInitialize",function(a){a=a.sender;var b=a.options.renderer.toLowerCase(),
g;"string"===typeof a.options.renderer&&void 0===c[b]&&(a.options.renderer=d.policies.options.renderer[1]);a.options.renderer=b;K[a.id]=c[a.options.renderer];!0!==K[a.id].initialized&&"function"===typeof K[a.id].init&&(K[a.id].init(),K[a.id].initialized=!0);d.parsePolicies(a,K[a.id].policies||{},a.args);for(g in K[a.id].prototype)a[g]=K[a.id].prototype[g];for(g in K[a.id].events)a.addEventListener(g,K[a.id].events[g])});d.addEventListener(["rendered","dataloaderror","nodatatodisplay","rendercancelled"],
function(a,c){var b=a.sender;b instanceof d.core&&b.__state.rendering&&(d.raiseEvent("internal.rendered",c,b),delete b.__state.rendering)});d.addEventListener("loaded",function(a){var c=a.sender;a=a.sender.ref;var g,e;if(void 0!==a&&null!==a&&"function"===typeof a.getExternalInterfaceMethods){try{g=a.getExternalInterfaceMethods(),g="string"===typeof g?g.split(","):[]}catch(h){g=[],d.raiseError(c,"13111126041","run","RendererManager^Loaded",Error("Error while retrieving data from the chart-object."+
(h.message&&0<=h.message.indexOf("NPObject")?" Possible cross-domain security restriction.":"")))}for(a=0;a<g.length;a+=1)e=g[a],void 0===c[e]&&(c[e]=b(e));if(c.ref)for(e in g=P.protectedMethods,a=P.getRenderer(c.options.renderer).protectedMethods,c)if(a&&!g[e]&&!a[e]&&void 0===c.ref[e])try{c.ref[e]=G(c,e)}catch(n){}}});d.legacyEventList.resized="FC_Resized";d.extend(d.core.prototype,{render:function(c,b,g){var e=this,h,n,l;if((l=m[this.id])&&l.FusionCharts&&l.FusionCharts===this||(l=this.ref)&&l.FusionCharts&&
l.FusionCharts===this)d.renderer.dispose(this),l===m[this.id]&&(m[this.id]=void 0);void 0!==m[this.id]&&d.raiseError(this,"25081843","comp",".render",Error("#25081843:IECompatibility() Chart Id is same as a JavaScript variable name. Variable naming error. Please use unique name forchart JS variable, chart-id and container id."));g?"function"!==typeof g&&(g=void 0):"function"===typeof b?(g=b,b=void 0):b||"function"!==typeof c||(g=c,c=void 0);b=(b||this.options.insertMode).toLowerCase()||p.REPLACE;
void 0===c&&(c=this.options.containerElementId);"string"===typeof c&&(c=D.getElementById(c));if(void 0===c||null===c)return d.raiseError(this,"03091456","run",".render()",Error("Unable to find the container DOM element.")),this;if(a(this.id,c))return d.raiseError(this,"05102109","run",".render()",Error("A duplicate object already exists with the specific Id: "+this.id)),this;h=D.createElement(this.options.containerElementType||"span");h.setAttribute("id",this.id);if("append"!==b&&"prepend"!==b)for(;c.hasChildNodes();)c.removeChild(c.firstChild);
"prepend"===b&&c.firstChild?c.insertBefore(h,c.firstChild):c.appendChild(h);this.options.containerElement=c;this.options.containerElementId=c.id;if(b=h.style)b.position="relative",b.textAlign="left",b.lineHeight="normal",b.display="inline-block",b.zoom="1",b.fontWeight="normal",b.fontVariant="normal",b.fontStyle="normal",b.textDecoration="none",b["*DISPLAY"]="inline",b.padding="0",b.margin="0",b.border="none";this.options.containerClassName&&(h.className=this.options.containerClassName);b=d.normalizeCSSDimension(this.width,
this.height,h);this.__state.renderedWidth=b.pixelWidth;this.__state.renderedHeight=b.pixelHeight;this.__state.rendering=!0;d.raiseEvent("beforeRender",n={container:c,width:this.width,height:this.height,renderer:this.options.renderer},this,void 0,function(a,c){d.renderer.render(e,h,function(){d.renderer.notifyRender.apply(this,arguments);if(g)try{g.call(a.sender,c.container)}catch(b){setTimeout(function(){throw b;})}})},function(){d.raiseEvent("renderCancelled",n,e)});return this},remove:function(){d.renderer.remove(this);
return this},resizeTo:function(a,c,b){var e=this,h=e.width,n=e.height,M=e.__state;"object"===typeof a&&(b=c,c=a.h,a=a.w);a=null===a||void 0===a?h:a.toString().replace(l,"");c=null===c||void 0===c?n:c.toString().replace(l,"");!0!==b?d.raiseEvent("beforeresize",{currentWidth:h,currentHeight:n,newWidth:a,newHeight:c},e,void 0,function(){e.width=a;e.height=c;d.renderer.resize(e,{width:a,height:c});d.raiseEventWithLegacy("resized",{width:e.width,height:e.height,prevWidth:h,prevHeight:n,pixelWidth:e.ref&&
e.ref.offsetWidth||0,pixelHeight:e.ref&&e.ref.offsetHeight||0,originalWidth:M.renderedWidth,originalHeight:M.renderedHeight},e,[e.id,e.width,e.height])},function(){d.raiseEvent("resizecancelled",{currentWidth:h,currentHeight:n,cancelledTargetWidth:a,cancelledTargetHeight:c},e)}):(e.width=a,e.height=c);return this},dispose:function(){var a=this,c={};d.raiseEvent("beforeDispose",c,a,void 0,function(){d.renderer.dispose(a);d.raiseEvent("disposed",c,a);d.disposeEvents(a);delete d.core.items[a.id];for(var b in a)a.hasOwnProperty(b)&&
delete a[b];a.disposed=!0},function(){d.raiseEvent("disposeCancelled",c,a)})},configure:function(a,c){var b;a&&("string"===typeof a?(b={},b[a]=c):b=a,d.renderer.config(this,b))}});d.extend(d.core,{setCurrentRenderer:function(){var a=P.setDefault.apply(P,arguments);P.userSetDefault=!0;return a},getCurrentRenderer:function(){return P.currentRendererName.apply(P,arguments)},render:function(a,c){return a instanceof d.core?(a.render(c),a):(new d.core(a)).render(c)}},!1)}]);
FusionCharts.register("module",["private","modules.interface.transcoder",function(){var d=this,m=d.window,D=d.transcoders={},v={},p={},c=/url$/i,K=d._interactiveCharts={selectscatter:[!0,!1],dragcolumn2d:[!0,!0],dragarea:[!0,!0],dragline:[!0,!0],dragnode:[!0,!0]},b=function(c,b,n,g){var z=n.obj;n=n.args;n.dataSource=c;n.xmlHttpRequestObject=b;n.source="XmlHttpRequest";n.url=g;d.raiseEvent("dataLoadRequestCompleted",n,z,void 0,a,l)},G=function(a,c,b){var g=b.obj;b=b.args;b.error=a;b.httpStatus=c.xhr&&
c.xhr.status?c.xhr.status:-1;b.xmlHttpRequestObject=c;d.raiseEvent("dataLoadError",b,g);"function"===typeof m.FC_DataLoadError&&m.FC_DataLoadError(g.id,b)},a=function(a,c){a.sender.setChartData(c.dataSource,c.dataFormat,c.config,c.successcallback,c.silent)},l=function(a,c){d.raiseEvent("dataLoadCancelled",c,a.sender);c.xmlHttpRequestObject.abort()},P=function(a,c){var n=a.sender,g=n.__state,l=c.url;n.options.dataSource=c.url;g.dhmXhrObj||(g.dhmXhrObj=new d.ajax(b,G));g.dhmXhrObj.get("function"===
typeof m.decodeURIComponent?m.decodeURIComponent(l):m.unescape(l),{obj:n,args:c})},N=function(a,c){var b=a.sender,g=b.__state;d.raiseEvent("dataLoadRequestCancelled",c,b);g&&g.dhmXhrObj&&g.dhmXhrObj.abort()},z=function(a,c){var b=a.sender,g=b.__state,l=b.id;v[l]=c;p[l]&&delete p[l];p[l]={};g.dataReady=void 0;g.dataAvailable=!0;!0!==c.silent&&(!0!==b.options.safeMode||!0!==g.rendering||b.isActive()?(delete g.args,d.renderer.update(b,c)):(g.updatePending=c,d.raiseWarning(b,"23091255","run","::DataHandler~update",
"Renderer update was postponed due to async loading.")));d.raiseEvent("dataUpdated",c,b,void 0,c.successcallback)},g=function(a,c){d.raiseEvent("dataUpdateCancelled",c,a.sender,void 0,c.failurecallback)};d.dataFormats={};d.policies.options.dataSource=["dataSource",void 0];d.policies.options.dataFormat=["dataFormat",void 0];d.policies.options.dataConfiguration=["dataConfiguration",void 0];d.policies.options.showDataLoadingMessage=["showDataLoadingMessage",!1];d.addDataHandler=function(a,c){if("string"!==
typeof a||void 0!==D[a.toLowerCase()])d.raiseError(d.core,"03091606","param","::DataManager.addDataHandler",Error("Invalid Data Handler Name"));else{var b={},g=a.toLowerCase();D[g]=c;c.name=a;b["set"+a+"Data"]=function(c,b,h){return this.setChartData(c,a,b,h)};c.transportable&&(b["set"+a+"Url"]=function(c,b,h){return this.setChartDataUrl(c,a,b,h)},d.dataFormats[a+"URL"]=g+"Url");b["get"+a+"Data"]=function(){return this.getChartData(a)};d.dataFormats[a]=g;d.extend(d.core,b,!0)}};d.extend(d.core.prototype,
{setChartDataUrl:function(a,b,n,g,l){if(void 0===b||null===b||"function"!==typeof b.toString)b=this.options.dataFormat,d.raiseWarning(this,"03091609","param","FusionCharts#setChartDataUrl","Invalid Data Format. Reverting to current data format - "+b);b=b.toString().toLowerCase();b=c.test(b)?b.slice(0,-3):b;d.raiseEvent("dataLoadRequested",{source:"XmlHttpRequest",url:a,dataFormat:b,silent:!!l,config:n,successcallback:g},this,void 0,P,N)},setChartData:function(a,b,n,l,p){var q=this.options,J,w;if(void 0===
b||null===b||"function"!==typeof b.toString)b=q.dataFormat,d.raiseWarning(this,"03091610","param","FusionCharts#setChartData","Invalid Data Format. Reverting to current data format - "+b);b=b.toString().toLowerCase();c.test(b)?this.setChartDataUrl(a,b,n,l,p):(q.dataSource=a,J=b,q.dataFormat=b,w=D[J],"undefined"===typeof w?d.raiseError(d.core,"03091611","param","FusionCharts#setChartData",Error("Data Format not recognized")):(b=(b=d.renderer&&d.renderer.getRenderer(q.renderer||d.renderer.currentRendererName()))&&
b.dataFormat,n=b===J?w.passthrough?w.passthrough(a,n):{data:a}:w.encode(a,this,n||q.dataConfiguration)||{},n["native"]=b===J,n.format=n["native"]?b:"xml",n.dataFormat=J,n.dataSource=a,n.silent=!!p,"function"===typeof l&&(n.successcallback=l),d.raiseEvent("beforeDataUpdate",n,this,void 0,z,g)))},getChartData:function(a,c){var b=this.options,g=this.id,l;if(void 0===a||"function"!==typeof a.toString||void 0===(l=D[a=a.toString().toLowerCase()]))d.raiseError(this,"25081543","param","::transcoder~getChartData()",
Error('Unrecognized data-format specified in "format"'));else return p[g][a]?b=p[g][a]:v[g]?(a===v[g].format?p[g][a]=v[g]:(p[g].xml||(p[g].xml="xml"===v[g].format?v[g]:D[v[g].format].encode(v[g].data,this,b.dataConfiguration)),p[g][a]||(p[g][a]=l.decode(p[g].xml.data,this,b.dataConfiguration))),b=p[g][a]):b={error:Error("Data not defined")},!0===Boolean(c)?b:b.data},dataReady:function(a){return a?this.__state.dataAvailable:this.__state.dataReady}});d.extend(d.core,{transcodeData:function(a,c,b,g,
l){if(c&&"function"===typeof c.toString&&b&&"function"===typeof b.toString&&void 0!==D[b=b.toString().toLowerCase()]&&void 0!==D[c=c.toString().toLowerCase()])return a=D[c].encode(a,this,l),b=D[b].decode(a.data,this,l),b.error instanceof Error||(b.error=a.error),g?b:b.data;d.raiseError(this,"14090217","param",".transcodeData()",Error("Unrecognized data-format specified during transcoding."))}},!1);d.getRenderer&&!d.getRenderer("flash")||d.addEventListener("DataLoadRequested",function(a){var c=a.sender;
c.options&&"flash"===c.options.renderer&&c.options.useLegacyXMLTransport&&a.preventDefault()});d.addEventListener("beforeInitialize",function(a){a=a.sender;var b=a.options,g=b.dataSource,l=d.renderer&&d.renderer.getRenderer(b.renderer);delete v[a.id];p[a.id]={};if(void 0!==g&&null!==g){a.__state.dataSetDuringConstruction=!0;if("string"!==typeof b.dataFormat)switch(typeof g){case "function":g=b.dataSource=g.call(a,b.dataConfiguration);b.dataFormat="JSON";break;case "string":b.dataFormat=/^\s*?\{[\s\S]*\}\s*?$/g.test(a.options.dataFormat)?
"JSON":"XML";break;case "object":b.dataFormat="JSON"}b.dataFormat&&b.dataFormat.toString&&(a.__state.dataFetchDuringConstruction=c.test(b.dataFormat.toString()));a.setChartData(g,b.dataFormat,void 0,void 0,!0)}else l&&(a.__state.dataSetDuringConstruction=!1,d.raiseWarning(a,"1810131922A","param",":dataHandler~event:beforeInitialize","Data source was not defined during construction, hence set to blank renderer default - "+l.dataFormat),a.setChartData("",l.dataFormat,void 0,void 0,!0),a.__state.dataAvailable=
!1)});d.addEventListener("beforeDispose",function(a){var c=a.sender;delete v[a.sender.id];delete p[a.sender.id];c&&c.__state&&c.__state.dhmXhrObj&&c.__state.dhmXhrObj.abort()});d.addEventListener("disposed",function(a){delete p[a.sender.id]});d.addEventListener("loaded",function(a){a=a.sender;var c=a.__state.updatePending;a instanceof d.core&&void 0!==c&&(delete a.__state.updatePending,d.renderer.update(a,c))});d.addEventListener("dataUpdated",function(a,c){var b=a.sender,g=b.__state;g.rendering&&
(g.dataFetchDuringConstruction||g.updatePending)&&(delete g.dataFetchDuringConstruction,delete g.updatePending,d.renderer.update(b,c))});d.addEventListener(["dataLoadError","dataInvalid"],function(a){a.sender.__state.dataAvailable=!1});d.addEventListener("loaded",function(a){a=a.sender;var c=a.__state,b,g,l;l=function(a,c){return function(b){return!1===b?c.apply(this):this.ref.getUpdatedXMLData?d.core.transcodeData(this.ref.getUpdatedXMLData(),"xml",a):this.getData?this.getData(a):c.apply(this)}};
if(a.chartType&&K[a.chartType()]&&K[a.chartType()][0]){for(b in d.transcoders)g=d.transcoders[b].name,g="get"+g+"Data",a[g]=l(b,a.constructor.prototype[g]),a[g]._dynamicdatarouter=!0;c.dynamicDataRoutingEnabled=!0}else if(c.dynamicDataRoutingEnabled){for(b in d.transcoders)g=d.transcoders[b].name,g="get"+g+"Data",a.hasOwnProperty(g)&&a[g]._dynamicdatarouter&&delete a[g];c.dynamicDataRoutingEnabled=!1}})}]);"object"!==typeof JSON&&(JSON={});
(function(){function d(a){return 10>a?"0"+a:a}function m(a){p.lastIndex=0;return p.test(a)?'"'+a.replace(p,function(a){var c=b[a];return"string"===typeof c?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function D(a,b){var d,p,z,g,e=c,h,n=b[a];n&&"object"===typeof n&&"function"===typeof n.toJSON&&(n=n.toJSON(a));"function"===typeof G&&(n=G.call(b,a,n));switch(typeof n){case "string":return m(n);case "number":return isFinite(n)?String(n):"null";case "boolean":case "null":return String(n);
case "object":if(!n)return"null";c+=K;h=[];if("[object Array]"===Object.prototype.toString.apply(n)){g=n.length;for(d=0;d<g;d+=1)h[d]=D(d,n)||"null";z=0===h.length?"[]":c?"[\n"+c+h.join(",\n"+c)+"\n"+e+"]":"["+h.join(",")+"]";c=e;return z}if(G&&"object"===typeof G)for(g=G.length,d=0;d<g;d+=1)"string"===typeof G[d]&&(p=G[d],(z=D(p,n))&&h.push(m(p)+(c?": ":":")+z));else for(p in n)Object.prototype.hasOwnProperty.call(n,p)&&(z=D(p,n))&&h.push(m(p)+(c?": ":":")+z);z=0===h.length?"{}":c?"{\n"+c+h.join(",\n"+
c)+"\n"+e+"}":"{"+h.join(",")+"}";c=e;return z}}"function"!==typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+d(this.getUTCMonth()+1)+"-"+d(this.getUTCDate())+"T"+d(this.getUTCHours())+":"+d(this.getUTCMinutes())+":"+d(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var v=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
p=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,c,K,b={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},G;"function"!==typeof JSON.stringify&&(JSON.stringify=function(a,b,d){var p;K=c="";if("number"===typeof d)for(p=0;p<d;p+=1)K+=" ";else"string"===typeof d&&(K=d);if((G=b)&&"function"!==typeof b&&("object"!==typeof b||"number"!==typeof b.length))throw Error("JSON.stringify");return D("",{"":a})});
"function"!==typeof JSON.parse&&(JSON.parse=function(a,c){function b(a,g){var e,d,n=a[g];if(n&&"object"===typeof n)for(e in n)Object.prototype.hasOwnProperty.call(n,e)&&(d=b(n,e),void 0!==d?n[e]=d:delete n[e]);return c.call(a,g,n)}var d;a=String(a);v.lastIndex=0;v.test(a)&&(a=a.replace(v,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)}));if(/^[\],:{}\s]*$/.test(a.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return d=eval("("+a+")"),"function"===typeof c?b({"":d},""):d;throw new SyntaxError("JSON.parse");})})();
FusionCharts.register("module",["private","modules.data.json",function(){var d=this,m=d.window,D=m.document,v=d.xssEncode,p,c;void 0===m.JSON&&d.raiseError(this,"1113062012","run","JSONDataHandler",Error("Could not find library support for JSON parsing."));d.policies.options.allowIESafeXMLParsing=["_allowIESafeXMLParsing",!0];p=function(){var c={set:!0,trendlines:!0,vtrendlines:!0,line:{trendlines:!0,vtrendlines:!0},data:!0,dataset:!0,lineset:!0,categories:!0,category:!0,linkeddata:!0,application:!0,
definition:!0,axis:!0,connectors:!0,connector:{connectors:!0},trendset:!0,row:{rows:!0},column:{columns:!0},label:{labels:!0},color:{colorrange:!0},dial:{dials:!0},pointer:{pointers:!0},point:{trendpoints:!0},process:{processes:!0},task:{tasks:!0},milestone:{milestones:!0},datacolumn:{datatable:!0},text:{datacolumn:!0},item:{legend:!0},alert:{alerts:!0},groups:{annotations:!0},items:{groups:!0,data:!0},shapes:!0,shape:{shapes:!0},entitydef:!0,entity:{entitydef:!0}},b={chart:"linkedchart",map:"linkedmap",
set:"data",vline:{chart:"data",graph:"data",dataset:"data",categories:"category",linkedchart:"data"},apply:{application:"application"},style:{definition:"definition"},marker:{application:"application",definition:"definition",data:"items"},entity:{entitydef:"entitydef",data:"data"},shape:{shapes:"shapes"},connector:{connectors:{chart:"connector",linkedchart:"connector",map:"connectors",linkedmap:"connectors"}},annotationgroup:{annotations:"groups"},annotation:{groups:"items"}},p={vline:{vline:"true"}},
a={chart:!0,map:!0,graph:!0},l={dataset:"data",categories:"category"},P={target:"target",value:"value"},N={styles:{definition:!0,application:!0},chart:{value:!0,target:!0},graph:{value:!0,target:!0},linkedchart:{value:!0,target:!0},markers:{definition:!0,application:!0,shapes:!0,connectors:!0,data:!0},map:{entitydef:!0,data:!0},linkedmap:{entitydef:!0,data:!0}},z,g;z={append:function(a,b,g,d){!c[g]||!0!==c[g]&&!0!==c[g][d]?b[g]=a:(b[g]instanceof Array||(b[g]=[]),b[g].push(a))},child:function(c,g,
n,M){var H,q,J,w,m,s;for(H=0;H<g.length;H+=1)switch(J=g[H],q=J.nodeName.toLowerCase(),J.nodeType){case 1:w=z.attr(J.attributes);s=a[q];!0===s&&(m=w,w={},w[q]=m);s=p[q];"object"===typeof s&&d.extend(w,s);if(s=b[q])if("object"===typeof s&&"object"===typeof s[n])for(m in m=void 0,s[n]){if(M[m]){q=s[n][m];break}}else"object"===typeof s&&"string"===typeof s[n]?q=s[n]:"string"===typeof s&&(q=s);J.childNodes.length&&((s=N[n])&&s[q]?z.child(c,J.childNodes,q,M):z.child(w,J.childNodes,q,M));(s=N[n])&&s[q]||
z.append(w,c,q,n);break;case 3:if(s=P[n])q=s,w=J.data,z.append(w,c,q,n);s=l[n];"string"===typeof s&&M.chart&&parseInt(M.chart.compactdatamode,10)&&(q=s,w=J.data,c[q]=c[q]?c[q]+w:w)}},attr:function(a){var c,b={};if(!a||!a.length)return b;for(c=0;c<a.length;c+=1)b[a[c].nodeName.toLowerCase()]=a[c].value||a[c].nodeValue;return b}};g=function(a){var c={},b,l,p,q,J,w,P,s,G;if("object"!==typeof a&&a&&"function"!==typeof a.toString)return g.errorObject=new TypeError("xml2json.parse()"),c;a=a.toString().replace(/<\!--[\s\S]*?--\x3e/g,
"").replace(/<\?xml[\s\S]*?\?>/ig,"").replace(/&(?!([^;\n\r]+?;))/g,"&amp;$1");a=a.replace(/^\s\s*/,"");for(var N=/\s/,v=a.length;N.test(a.charAt(v-=1)););a=a.slice(0,v+1);if(!a)return c;try{m.DOMParser?b=(new m.DOMParser).parseFromString(a,"text/xml"):D.body&&d.core.options.allowIESafeXMLParsing?(l=D.createElement("xml"),l.innerHTML=a,D.body.appendChild(l),b=l.XMLDocument,D.body.removeChild(l)):(b=new m.ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(a));if(!(b&&b.childNodes&&1===b.childNodes.length&&
(p=b.childNodes[0])&&p.nodeName&&(q=p.nodeName.toLowerCase()))||"chart"!==q&&"map"!==q&&"graph"!==q)return g.errorObject=new TypeError("xml2json.parse()"),c;if("graph"===q){J=b.createElement("chart");for(G=(P=p.attributes)&&P.length||0;G--;)J.setAttribute(P[G].name,P[G].value),P.removeNamedItem(P[G].name);if(G=(s=p.childNodes)&&s.length||0)G-=1,w=p.removeChild(s[G]),J.appendChild(w);for(;G--;)w=p.removeChild(s[G]),J.insertBefore(w,J.firstChild);b.replaceChild(J,p);p=J}}catch(K){g.errorObject=K}p?
(p.attributes&&(c[q]=z.attr(p.attributes)),p.childNodes&&z.child(c,p.childNodes,q,c),delete g.errorObject):g.errorObject=new TypeError("xml2json.parse()");return c};return function(a){delete g.errorObject;return{data:g(a),error:g.errorObject}}}();c=function(){var c,b;c={items:{explode:{data:"set",groups:{annotations:"annotationgroup"},items:{groups:"annotation"}},text:{chart:{target:"target",value:"value"},graph:{target:"target",value:"value"}},dsv:{dataset:{data:"dataset"},categories:{category:"categories"}},
attr:{chart:{chart:"chart"},graph:{graph:"graph"},map:{map:"map"},linkedmap:{map:"map"},linkedchart:{chart:"chart"}},group:{styles:{definition:"style",application:"apply"},map:{data:"entity",entitydef:"entity"},markers:{definition:"marker",application:"marker",shapes:"shape",connectors:"connector",items:"marker"}},tag:{markers:{items:"data"}}},qualify:function(c,a,b){return"object"===typeof this.items[c][b]?this.items[c][b][a]:this.items[c][b]}};b=function(d,a,l,p){var m="",z="",g="",e="",h,n,M;a&&
"function"===typeof a.toLowerCase&&(a=a.toLowerCase());if(void 0===l&&d[a])for(h in d[a])n=h.toLowerCase(),"compactdatamode"===n&&(p.applyDSV=1==d[a][h]);if(d instanceof Array)for(h=0;h<d.length;h+=1)g="string"===typeof d[h]?g+v(d[h]):g+b(d[h],a,l,p);else{for(h in d)n=h.toLowerCase(),d[h]instanceof Array&&(M=c.qualify("group",n,a))?(g=c.qualify("tag",n,a)||n,z+="<"+g+">"+b(d[h],M,a,p)+"</"+g+">"):"object"===typeof d[h]?(M=c.qualify("attr",n,a))?(e=b(d[h],M,a,p).replace(/\s*\/\>/ig,""),a=n):z+=b(d[h],
n,a,p):p.applyDSV&&(M=c.qualify("dsv",n,a))?z+=d[h]:(M=c.qualify("text",n,a))?(g=c.qualify("tag",n,a)||M,z+="<"+g+">"+d[h]+"</"+g+">"):"vline"===n&&Boolean(d[h])?a="vline":m+=" "+n+'="'+v(d[h]).toString().replace(/\"/ig,"&quot;")+'"';if(M=c.qualify("explode",l,a))a=M;g=a;g=(""!==e?e:"<"+g)+m+(""!==z?">"+z+"</"+g+">":" />")}return g};return function(c){delete b.errorObject;if(c&&"string"===typeof c)try{c=JSON.parse(c)}catch(a){b.errorObject=a}return{data:b(c,c&&c.graph?"graph":c&&c.map?"map":"chart",
void 0,{}),error:b.errorObject}}}();d.addDataHandler("JSON",{encode:c,decode:p,passthrough:function(c){var b={data:{}};if(!c)return b;if("string"!==typeof c)try{c=JSON.stringify(c)}catch(d){return b.error=d,b}try{b.data=JSON.parse(c.replace(/"([^"]+)":/g,function(a,c){return'"'+c.toLowerCase()+'":'}))}catch(a){b.error=a}return b},transportable:!0})}]);
FusionCharts.register("module",["private","modules.data.xml",function(){var d=function(d){return{data:d,error:void 0}};this.addDataHandler("XML",{encode:d,decode:d,transportable:!0})}]);
FusionCharts.register("module",["private","modules.data.csv",function(){var d=this,m=d.window,D=d.core,v=m.parseInt,p=m.parseFloat,c=function(c){return c},K;K=function(c){this.data=[];this.columnCount=this.rowCount=0;this.configure(c)};K.decodeLiterals=function(c,d){return void 0!==c&&null!==c&&c.toString?c.replace("{tab}","\t").replace("{quot}",'"').replace("{apos}","'"):d};K.prototype.set=function(c,d,a){var l;if(this.rowCount<=c){for(l=this.rowCount;l<=c;l+=1)this.data[l]=[];this.rowCount=c+1}this.columnCount<=
d&&(this.columnCount=d+1);this.data[c][d]=a};K.prototype.setRow=function(c,d){var a;if(this.rowCount<=c){for(a=this.rowCount;a<=c;a+=1)this.data[a]=[];this.rowCount=c+1}this.columnCount<d.length&&(this.columnCount=d.length);this.data[c]=d};K.prototype.get=function(c,d){var a=this.data;return a[c]&&a[c][d]};K.prototype.configure=function(c){var d=K.decodeLiterals;this.delimiter=d(c.delimiter,",");this.qualifier=d(c.qualifier,'"');this.eolCharacter=d(c.eolCharacter,"\r\n");this.numberFormatted=!!v(c.numberFormatted,
0)};K.prototype.clear=function(){this.data=[];this.columnCount=this.rowCount=0};K.prototype.toString=function(){var c,d,a="";for(c=0;c<this.rowCount;c+=1)d=this.qualifier+this.data[c].join(this.qualifier+this.delimiter+this.qualifier)+this.qualifier,a+='""'===d?this.eolCharacter:d+this.eolCharacter;0<this.rowCount&&(a=a.slice(0,a.length-2));return a};d.addDataHandler("CSV",{encode:function(c,p){d.raiseError(p,"0604111215","run","::CSVDataHandler.encode()","FusionCharts CSV data-handler only supports encoding of data.");
throw Error("FeatureNotSupportedException()");},decode:function(b,d){var a=D.transcodeData(b,"xml","json")||{},l=d.jsVars,m,v,z,g,e,h,n,M=a.chart||a.map||a.graph||{};n=Boolean(M.exporterrorcolumns||0);var H=a.categories&&a.categories[0]&&a.categories[0].category||[],q=a.map&&!a.chart||l&&l.instanceAPI&&"geo"===l.instanceAPI.defaultSeriesType,J=!1,w=!1,ja=!1,s=!1;v=!1;var $=c,U={},ba,Ba,la,ga,ea,pa,Z,ma,L,I,fa;e=0;m=new K({separator:M.exportdataseparator,qualifier:M.exportdataqualifier,numberFormatted:M.exportdataformattedval});
D.formatNumber&&m.numberFormatted&&($=function(a){return D.formatNumber(a,M)});if(q)for(I in U.geo=!0,H=l.hcObj&&l.hcObj.entities&&l.hcObj.entities.items||[],m.setRow(0,["Id"," Short Name","Long Name","Value","Formatted Value"]),l=0,H)w=H[I],fa=w.eJSON,v=w.value,m.setRow(++l,[I,fa.shortLabel,fa.label,void 0===v?"":v,w.formattedValue]);else if(void 0!==(ba=a.dials&&a.dials.dial||a.pointers&&a.pointers.pointer||a.value))if(U.gauge=!0,"string"===typeof ba)m.set(0,0,$(ba)),U.singlevalue=!0,"string"===
typeof a.target&&(m.set(0,1,$(a.target)),U.bullet=!0);else for(m.setRow(0,["Id","Value"]),U.multivalue=!0,l=0,h=1,e=ba.length;l<e;l+=1,h+=1)m.setRow(h,[h,$(ba[l].value)]);else if(ba=a.dataset||!(a.data instanceof Array)&&[]){U.multiseries=!0;z=1;if(Ba=a.lineset)ba=ba.concat(Ba),U.lineset=!0;if(la=a.axis)ba=ba.concat(la),U.multiaxis=!0;pa=ba.length;ea=H.length;if(!(pa=ba.length)){for(l=0;l<ea;l+=1)Z=H[l],m.set(l+1,0,Z.label||Z.name);U.multilevel=!0}for(l=0;l<pa;l+=1)for(ma=ba,ma[l].dataset?(ma=ma[l].dataset,
g=0,ga=ma.length):(ma=ba,g=l,ga=g+1);g<ga&&!J&&!ja;g+=1,z+=1){q=ma[g];m.set(0,z,q.seriesname);"string"===typeof q.data&&(U.compactdata=!0,q.data=q.data.split(M.dataseparator||"|"));h=e=0;for(L=q.data&&q.data.length||0;e<L||e<ea;e+=1){Z=H[e];v=h+1;I=q.data&&q.data[h]||{};if(void 0!==I.x&&void 0!==I.y){J=U.xy=!0;break}if(void 0!==I.open||void 0!==I.high||void 0!==I.close||void 0!==I.low){s=U.ohlc=!0;break}if(void 0!==I.rowid&&void 0!==I.columnid){ja=U.heatmap=!0;break}if(e<ea&&!Z.vline){m.set(v,0,Z.label||
Z.name);Z=p(I?I.value:"");Z=isNaN(Z)?"":$(Z);m.set(v,z,Z);if(w||n||I.errorvalue)w||m.set(0,z+1,"Error"),fa=1,m.set(v,z+1,$(I.errorvalue));h+=1}}fa&&(z+=fa,fa=0)}Ba&&(ba=ba.slice(0,-Ba.length));la&&(ba=ba.slice(0,-la.length))}else if(ba=a.data){m.set(0,1,M.yaxisname||"Value");U.singleseries=!0;v="1"==M.showsumatend;l=0;for(ea=ba.length;l<ea;l+=1)I=ba[l],I.vline||(Z=p(I.value?I.value:""),m.setRow(l+1,[I.label||I.name,isNaN(Z)?"":(e+=Z,$(Z))]));v&&(U.summation=!0,m.setRow(l+1,[M.sumlabel||"Total",$(e)]))}if(s)for(m.clear(),
m.setRow(0,["Open","Close","High","Low"]),l=0,v=1,ba=a.dataset,ga=ba.length;l<ga;l+=1)for(e=0,q=ba[l]&&ba[l].data||[],pa=q.length;e<pa;e+=1,v+=1)I=q[e]||{},m.setRow(e+1,[$(I.open),$(I.close),$(I.high),$(I.low)]);else if(J)for(m.clear(),w=!1,fa=0,m.setRow(0,["Series","x","y"]),l=0,v=1,ba=a.dataset,ga=ba.length;l<ga;l+=1)for(e=0,q=ba[l]&&ba[l].data||[],pa=q.length;e<pa;e+=1,v+=1){I=q[e]||{};Z=[ba[l].seriesname,$(I.x),$(I.y)];void 0!==I.z&&(Z.push($(I.z)),fa||(m.set(0,3,"z"),fa=1));if(w||n||void 0!==
I.errorvalue||void 0!==I.horizontalerrorvalue||void 0!==I.verticalerrorvalue)a=$(I.errorvalue),Z.push(I.errorvalue,void 0===I.horizontalerrorvalue?a:$(I.horizontalerrorvalue),void 0===I.verticalerrorvalue?a:$(I.verticalerrorvalue)),w||(m.set(0,fa+3,"Error"),m.set(0,fa+4,"Horizontal Error"),m.set(0,fa+5,"Vertical Error")),w=U.error=!0;m.setRow(v,Z)}else if(ja){m.clear();J={};ja={};l=0;e=1;H=a.rows&&a.rows.row||[];for(n=H.length;l<n;l+=1,e+=1)Z=H[l],Z.id&&(J[Z.id.toLowerCase()]=e,m.set(e,0,Z.label||
Z.id));l=0;e=1;H=a.columns&&a.columns.column||[];for(n=H.length;l<n;l+=1,e+=1)Z=H[l],Z.id&&(ja[Z.id.toLowerCase()]=e,m.set(0,e,Z.label||Z.id));q=a.dataset&&a.dataset[0]&&a.dataset[0].data||[];l=0;for(n=q.length;l<n;l+=1)I=q[l],v=I.rowid.toLowerCase(),z=I.columnid.toLowerCase(),J[v]||(J[v]=m.rowCount,m.set(m.rowCount,0,I.rowid)),ja[z]||(ja[z]=m.columnCount,m.set(0,m.columnCount,I.columnid)),m.set(J[v],ja[z],$(I.value))}ba=H=Ba=la=null;0<m.rowCount&&void 0===m.get(0,0)&&m.set(0,0,M.xaxisname||"Label");
return{data:m.toString(),error:void 0,predictedFormat:U}},transportable:!1});D.addEventListener("Loaded",function(c){c=c.sender;"javascript"!==c.options.renderer||c.getDataAsCSV||(c.getDataAsCSV=c.ref.getDataAsCSV=c.getCSVData)})}]);
FusionCharts.register("module",["private","modules.renderer.js",function(){var d=this,m=d.window,D=m.document,v=d.core.options,p=/msie/i.test(m.navigator.userAgent)&&!m.opera,c=Boolean(m.SVGAngle||D.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),K=function(){},b=d.hcLib={cmdQueue:[]},G=b.moduleCmdQueue={base:[],charts:[],powercharts:[],widgets:[],maps:[]},a=b.moduleDependencies={},l=b.moduleMeta={base:"fusioncharts.js",charts:"fusioncharts.charts.js",powercharts:"fusioncharts.powercharts.js",
widgets:"fusioncharts.widgets.js",maps:"fusioncharts.maps.js"},P={},N=b.getMetaSentence=function(){var a={};return function(c){c=c&&c.replace(/(^\s*)|(\s*$)/g,"")||"";return a[c]||(a[c]={key:c,subject:c.replace(/[^\/]*?$/ig,""),predicate:c.replace(/^.*\//ig,"")})}}(),z=b.getDependentModuleName=function(c){var b=[],e,d;c=N(c).predicate;for(e in a)void 0!==(d=a[e][c])&&(b[d]=e);return b},g=b.hasModule=function(a){var c,b;if(a instanceof Array){c=0;for(b=a.length;c<b;c+=1)if(!Boolean(d.modules["modules.renderer.js-"+
N(a[c]).predicate]))return!1;return!0}return Boolean(d.modules["modules.renderer.js-"+N(a).predicate])},e=b.loadModule=function(a,c,b,e){a instanceof Array||(a=[a]);var h=a.length,n=0,p;p=function(){if(n>=h)c&&c();else{var z=a[n],m=z&&z.match(/[^\/]*$/i)[0],la=l[z];n+=1;if(z){if(g(m)){p();return}if(P[m]){d.raiseError(e||d.core,"1112201445A","run","JavaScriptRenderer~loadModule() ","required resources are absent or blocked from loading.");b&&b(m);return}}else b&&b(m);z=d.core.options["html5"+d.capitalizeString(m)+
"Src"];d.loadScript(void 0===z?la:z,{success:function(){g(m)?p():b&&b(m)},failure:b&&function(){b(m)}},void 0,!0)}};p()},h=b.executeWaitingCommands=function(a){for(var c;c=a.shift();)"object"===typeof c&&K[c.cmd].apply(c.obj,c.args)},n=function(a){delete a.sender.jsVars._reflowData;a.sender.jsVars._reflowData={};delete a.sender.jsVars._reflowClean},M=function(){var a=function(){};a.prototype={LoadDataErrorText:"Error in loading data.",XMLLoadingText:"Retrieving data. Please wait",InvalidXMLText:"Invalid data.",
ChartNoDataText:"No data to display.",ReadingDataText:"Reading data. Please wait",ChartNotSupported:"Chart type not supported.",PBarLoadingText:"",LoadingText:"Loading chart. Please wait",RenderChartErrorText:"Unable to render chart."};return a.prototype.constructor=a}(),H=b.getContainerBackgroundColor=function(a){var e=a.options.containerBackgroundColor,d=a.options.containerBackgroundOpacity,g=a.jsVars.transparent;void 0!==g&&null!==g?d=a.jsVars.transparent?0:1:(d=parseFloat(d),0>d?d=0:1<d&&(d=1));
e||(e="#ffffff");if(p&&!c)return d?e:"transparent";e=e.replace(/^#?([a-f0-9]+)/ig,"$1");e=b.graphics.HEXtoRGB(e);e[3]=d.toString();return"rgba("+e.join(",")+")"};b.injectModuleDependency=function(c,e,d){var g=!1,h=N(c).subject;c=N(c).predicate;e=void 0===e?c:N(e).predicate;a[c]||(a[c]={},G[c]||(G[c]=[],b.moduleMeta[c]=h+v.html5ScriptNamePrefix+(e&&e.replace&&e.replace(/^[\s\S]*\//ig,"").replace(/\?/g,"%3F").replace(/\#/g,"%23").replace(/\:/g,"%3A")||"")+v.html5ScriptNameSuffix),g=!0);a[c][e]=d||0;
return g};b.needsModule=function(a,c){a=N(a).predicate;c=N(c).predicate;return void 0!==(b.moduleDependencies[a]&&b.moduleDependencies[a][c])};b.cleanupWaitingCommands=function(a){for(var c=a.chartType(),c=z(c),b,e=[],d;b=c.shift();){for(b=G[b]||[];d=b.shift();)"object"===typeof d&&d.obj!==a&&e.push(d);b.concat(e);e=[]}};d.extend(d.core.options,{html5ScriptNameSuffix:".js",html5ScriptNamePrefix:"fusioncharts."});d.extend(K,{dataFormat:"json",ready:!1,policies:{jsVars:{},options:{showChartLoadingMessage:["showChartLoadingMessage",
!0]}},init:function(){g("base")?K.ready=!0:e("base",function(){K.ready=!0;h(b.cmdQueue)},void 0,d.core)},render:function(a){var c=a,e=this.jsVars.msgStore;c&&this.options.showChartLoadingMessage&&(c.innerHTML='<small style="display: inline-block; *zoom:1; *display:inline; width: 100%; font-family: Verdana,sans; font-size: 10px; color: #666666; text-align: center; padding-top: '+(parseInt(c.style.height,10)/2-5)+'px">'+(e.PBarLoadingText||e.LoadingText)+"</small>",c.style.backgroundColor=H(this));
b.cmdQueue.push({cmd:"render",obj:this,args:arguments})},update:function(){b.cmdQueue.push({cmd:"update",obj:this,args:arguments})},resize:function(){b.cmdQueue.push({cmd:"resize",obj:this,args:arguments})},dispose:function(){var a=b.cmdQueue,c,e;c=0;for(e=a.length;c<e;c+=1)a[c].obj===this&&(a.splice(c,1),e-=1,c-=1)},load:function(){b.cmdQueue.push({cmd:"load",obj:this,args:arguments})},config:function(a,c){var b,e=this.jsVars,d=e.msgStore,e=e.cfgStore,g=this.options,h;h={LoadingText:"loadMessage",
ChartNotSupported:"typeNotSupportedMessage",RenderChartErrorText:"renderErrorMessage",XMLLoadingText:"dataLoadStartMessage",ChartNoDataText:"dataEmptyMessage",LoadDataErrorText:"dataLoadErrorMessage",InvalidXMLText:"dataInvalidMessage"};"string"===typeof a&&1<arguments.length&&(b=a,a={},a[b]=c);for(b in a)void 0!==d[b]?d[b]=a[b]:e[b.toLowerCase()]=a[b],h[b]&&(g[h[b]]=a[b])},protectedMethods:{},events:{beforeInitialize:function(a){var c=a.sender;a=c.jsVars;var e;a.fcObj=c;a.msgStore=a.msgStore||new M;
a.cfgStore=a.cfgStore||{};a.previousDrawCount=-1;a.drawCount=0;a._reflowData={};c.addEventListener("beforeRender",function(a){a.sender.jsVars.smartLabel=new b.SmartLabelManager(c.id,D.body||D.getElementsByTagName("body")[0]);a.detachHandler()});a.userModules instanceof Array||(e=a.userModules,a.userModules=[],"string"===typeof e&&(a.userModules=a.userModules.concat(e.split(","))));b.chartAPI&&b.chartAPI[void 0]||(a.needsLoaderCall=!0)},initialized:function(a){a=a.sender;var c=a.jsVars;c.needsLoaderCall&&
(delete c.needsLoaderCall,K.load.call(a))},beforeDataUpdate:n,beforeDispose:function(a){var c=a.sender.jsVars;c.smartLabel&&!c.smartLabel.disposed&&c.smartLabel.dispose();n.apply(this,arguments)},beforeRender:function(a){var c=a.sender.jsVars;delete c.drLoadAttempted;delete c.waitingModule;delete c.waitingModuleError;n.apply(this,arguments)},dataLoadRequested:function(a){a=a.sender;var c=a.jsVars;delete c.loadError;a.ref&&a.options.showDataLoadingMessage?c.hcObj&&!c.hasNativeMessage&&c.hcObj.showLoading?
c.hcObj.showMessage(c.msgStore.XMLLoadingText):a.ref.showChartMessage?a.ref.showChartMessage("XMLLoadingText"):c.stallLoad=!0:c.stallLoad=!0},dataLoadRequestCompleted:function(a){delete a.sender.jsVars.stallLoad},dataLoadError:function(a){var c=a.sender,b=c.jsVars;delete b.stallLoad;b.loadError=!0;c.ref&&"function"===typeof c.ref.showChartMessage&&c.ref.showChartMessage("LoadDataErrorText");c.__state.dataFetchDuringConstruction&&delete c.__state.dataFetchDuringConstruction;n.apply(this,arguments)}},
_call:function(a,c,b){a.apply(b||m,c||[])}});d.extend(K.prototype,{getSWFHTML:function(){d.raiseWarning(this,"11090611381","run","JavaScriptRenderer~getSWFHTML()","getSWFHTML() is not supported for JavaScript charts.")},addVariable:function(){d.raiseWarning(this,"11090611381","run","JavaScriptRenderer~addVariable()",'Use of deprecated "addVariable()". Replace with "configure()".');d.core.prototype.configure.apply(this,arguments)},getXML:function(){d.raiseWarning(this,"11171116291","run","JavaScriptRenderer~getXML()",
'Use of deprecated "getXML()". Replace with "getXMLData()".');return this.getXMLData.apply(this,arguments)},setDataXML:function(){d.raiseWarning(this,"11171116292","run","JavaScriptRenderer~setDataXML()",'Use of deprecated "setDataXML()". Replace with "setXMLData()".');return this.setXMLData.apply(this,arguments)},setDataURL:function(){d.raiseWarning(this,"11171116293","run","JavaScriptRenderer~setDataURL()",'Use of deprecated "SetDataURL()". Replace with "setXMLUrl()".');return this.setXMLUrl.apply(this,
arguments)},hasRendered:function(){return!(!this.jsVars.hcObj||!this.jsVars.hcObj.hasRendered)},setTransparent:function(a){var c;if(c=this.jsVars)"boolean"!==typeof a&&null!==a&&(a=!0),c.transparent=null===a?!1:!0===a?!0:!1}});d.extend(d.core,{_fallbackJSChartWhenNoFlash:function(){m.swfobject.hasFlashPlayerVersion(d.core.options.requiredFlashPlayerVersion)||d.renderer.setDefault("javascript")},_enableJSChartsForSelectedBrowsers:function(a){void 0!==a&&null!==a&&d.renderer.setDefault((new RegExp(a)).test(m.navigator.userAgent)?
"javascript":"flash")},_doNotLoadExternalScript:function(a){var c,b;for(c in a)b=c.toLowerCase(),l[b]&&(P[b]=Boolean(a[c]))},_preloadJSChartModule:function(){throw"NotImplemented()";}});d.renderer.register("javascript",K);c||p?d.renderer.setDefault("javascript"):m.swfobject&&m.swfobject.hasFlashPlayerVersion&&!m.swfobject.hasFlashPlayerVersion(d.core.options.requiredFlashPlayerVersion)&&(d.raiseWarning(d.core,"1204111846","run","JSRenderer","Switched to JavaScript as default rendering due to absence of required Flash Player."),
d.renderer.setDefault("javascript"))}]);
FusionCharts.register("module",["private","modules.renderer.js-lib",function(){var d=this,m=d.window,D=m.document,v=Boolean(m.SVGAngle||D.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")),p=/msie/i.test(m.navigator.userAgent)&&!m.opera,c=m.parseFloat,K=/\s+/g,b=/^#?/,G=/^rgba/i,a=/[#\s]/ig,l=/\{br\}/ig,P=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i,N=Math.abs,z=Math.pow,g=Math.round,e=z(2,-24),h=Object.prototype.toString,n=void 0!==D.documentElement.ontouchstart,M="http://www.fusioncharts.com?BS=FCHSEvalMark&utm_source=FCS_trial&pver="+
m.escape(d.core.version),H=!/fusioncharts\.com$/i.test(m.location.hostname),q=Math,J=q.max,w=q.min,ja={pageX:0,pageY:0},s=d.hcLib||(d.hcLib={}),$=function(a){var c=a.data,b=c.chart,k=b.paper,e=a.state,t=L(ma(a.originalEvent)),d=t.target||t.originalTarget||t.srcElement||t.relatedTarget||t.fromElement,g=b.elements.resizeBox,h=c.layerX=t.pageX-c.chartPosLeft,q=c.layerY=t.pageY-c.chartPosTop,E=h-c.ox,R=q-c.oy,n=c.bBox,l=c.ox,C=c.oy,s=c.zoomX,p=c.zoomY,n=c.canvasY,Y=c.canvasX,z=c.canvasW,m=c.canvasH,I=
c.canvasX2,la=c.canvasY2,M=c.strokeWidth,E=c.attr;switch(e){case "start":a=ba(this);c.chartPosLeft=a.left;c.chartPosTop=a.top;h=t.pageX-c.chartPosLeft;q=t.pageY-c.chartPosTop;c.oy=q;c.ox=h;c.allowMove=!1;g||(g=b.elements.resizeBox=k.rect(b.layers.tracker).attr(E));h>Y&&h<I&&q>n&&q<la&&(c.allowMove=!0);d&&d.ishot&&(c.allowMove=!1);g.attr({x:0,y:0,width:0,height:0}).show();break;case "end":n=g.getBBox();b={chart:b,selectionLeft:n.x,selectionTop:n.y,selectionHeight:n.height,selectionWidth:n.width,originalEvent:a.originalEvent};
c.isDragged&&(c.selectionEnd&&c.selectionEnd(b),c.isDragged=0);g.hide();delete c.oy;delete c.ox;break;default:if(!c.allowMove)break;E=h-c.ox;R=q-c.oy;l=c.ox;C=c.oy;c.isDragged||(b={chart:b,selectionLeft:(s?w(l,l+E):Y)+.5*M,selectionTop:(p?w(C,C+R):n)+.5*M,selectionHeight:0,selectionWidth:0,originalEvent:a.originalEvent},c.selectionStart&&c.selectionStart(b),c.isDragged=1);E=-(l-w(l-(l-J(l+E,Y)),I));R=-(C-w(C-(C-J(C+R,n)),la));g.attr({x:(s?w(l,l+E):Y)+.5*M,y:(p?w(C,C+R):n)+.5*M,width:s?N(E):z,height:p?
N(R):m})}},U=function(a){var c=a.data;a=a.originalEvent;var b=a.target||a.originalTarget||a.srcElement||a.relatedTarget||a.fromElement,k=a.type,e=a.layerX,t=a.layerY;void 0===e&&(e=a.pageX-c.chartPosLeft,t=a.pageY-c.chartPosTop);"mousedown"===k&&(b.ishot=e>c.canvasX&&e<c.canvasX2&&t>c.canvasY&&t<c.canvasY2);"mouseup"===k&&setTimeout(function(){b.ishot=!1},1)},q=function(){var a="innerWidth",c="innerHeight",b=D.documentElement||D.body,k=b;"innerWidth"in m?k=m:(a="clientWidth",c="clientHeight");return function(){return{width:k[a],
height:k[c],scrollTop:b.scrollTop,scrollLeft:b.scrollLeft}}}(),ba=function(a,c){var b={left:a.offsetLeft||0,top:a.offsetTop||0};for(a=a.offsetParent;a;)b.left+=a.offsetLeft||0,b.top+=a.offsetTop||0,a===D.body||a===D.documentElement||c||(b.left-=a.scrollLeft,b.top-=a.scrollTop),a=a.offsetParent;return b},Ba=function(a){return a&&a.replace(/\$/g,"$$$$")},la=function(a,c){return a||!1===a||0===a?a:c},ga=function(){var a,c,b;c=0;for(b=arguments.length;c<b;c+=1)if((a=arguments[c])||!1===a||0===a)return a;
return""},ea=function(){var a,c,b;c=0;for(b=arguments.length;c<b;c+=1)if((a=arguments[c])||!1===a||0===a)return a},pa=function(a,c,b,k){return s.dem.listen(a,c,b,k)},Z=function(a,c,b){return s.dem.unlisten(a,c,b)},ma=function(a){a=a.sourceEvent||a.originalEvent||a;return n&&a&&a.touches&&a.touches[0]||a||ja},L=function(){var a;return function(c){void 0===c.pageX&&(c.pageX=c.clientX+(a||(a=m.document.body||m.document.documentElement)).scrollLeft,c.pageY=c.clientY+a.scrollTop);return c}}(),I=function(a,
c){c=L(ma(c));var b=c.pageX,k=c.pageY,e=ba(a);return{chartX:b-e.left,chartY:k-e.top,pageX:b,pageY:k}},fa=function(a){return a&&a.replace(/^#?([a-f0-9]+)/ig,"#$1")||"none"},t=function(){var a,c,b;c=0;for(b=arguments.length;c<b;c+=1)if(((a=arguments[c])||!1===a||0===a)&&!isNaN(a=Number(a)))return a},R=function(a,c){a=a||!1===a||0===a?Number(a):NaN;return isNaN(a)?null:c?N(a):a},Y=function(a){return"string"===typeof a?a.replace(l,"<br />"):""},C=function(a,c){for(var b=c.length,k=-1;b--;)if(a===c[b]){k=
b;break}return k},xa=function(){if(Array.isArray)return Array.isArray;var a=Object.prototype.toString,c=a.call([]);return function(b){return a.call(b)===c}}(),Pa=function(a,c,b,k,e){var t,d,g,q;e?(k.push(a),e.push(c)):(k=[a],e=[c]);if(c instanceof Array)for(t=0;t<c.length;t+=1){try{d=a[t],g=c[t]}catch(E){continue}if("object"!==typeof g)b&&void 0===g||(a[t]=g);else{if(null===d||"object"!==typeof d)d=a[t]=g instanceof Array?[]:{};q=C(g,e);-1!==q?d=a[t]=k[q]:Pa(d,g,b,k,e)}}else for(t in c){try{d=a[t],
g=c[t]}catch(R){continue}if(null!==g&&"object"===typeof g)if(q=h.call(g),"[object Object]"===q){if(null===d||"object"!==typeof d)d=a[t]={};q=C(g,e);-1!==q?d=a[t]=k[q]:Pa(d,g,b,k,e)}else"[object Array]"===q?(null!==d&&d instanceof Array||(d=a[t]=[]),q=C(g,e),-1!==q?d=a[t]=k[q]:Pa(d,g,b,k,e)):a[t]=g;else a[t]=g}return a},Ga=function(a,c,b){if("object"!==typeof a&&"object"!==typeof c)return null;if("object"!==typeof c||null===c)return a;"object"!==typeof a&&(a=c instanceof Array?[]:{});Pa(a,c,b);return a},
qa=function(a,c){var b;if(c instanceof Array)for(b=c.length-1;0<=b;b-=1)"object"!==typeof c[b]?!0===c[b]&&a&&a.splice&&a.splice(b,1):h.call(c[b])===h.call(a[b])&&qa(a[b],c[b]);else for(b in c)"object"!==typeof c[b]?!0===c[b]&&a&&a.splice&&a.splice(b,1):h.call(c[b])===h.call(a[b])&&qa(a[b],c[b]);return a},za=function(){var a=/^@window_/g;return function(c,b){var k=c.replace(/\[[\'\"]/g,".").replace(/[\'\"]\]/g,"").replace(/\[/g,".@window_").replace(/\]/g,"").split("."),e=m,t,d;d="";var g,q,h;q=k.length;
for(h=0;h<q;h+=1){g=k[h];t=e;if(g.match(a))d=m[g.replace(a,"")],e=e[d];else{if(void 0===e||null===e)throw(d||g).replace(a,"")+" is not defined";e=e[g]}d=g}!e||"function"!==typeof e.call&&e!==m.alert?setTimeout(function(){throw g.replace(a,"")+"() is not a function";},0):e===m.alert?e(b):e.call(t,b)}}(),ya=function(){var a="FusionChartslinkEval"+parseInt(+new Date,10);return function(c){try{m[a]=new Function(c),eval('window["'+a+'"]();')}catch(b){setTimeout(function(){throw b;},0)}v?delete m[a]:m[a]=
null}}(),ta=function(a,c){a=Number(a);a=isNaN(a)?100:a;void 0!==c&&(a=a*c/100);return a%101},V=function(a,c,b){a=a.split(",");var k;void 0!==b&&(b=t(b.split(",")[0]));a[0]=ta(a[0],b);for(k=1;k<c;k+=1)a[k]=a[0]*ta(a[k],b)/100;return a.join(",")},oa=function(c,b,k){var e=0,t=0,d=0;k&&k.match(G)&&(k=k.split(","),e=k[0].slice(k[0].indexOf("(")+1),t=k[1],d=k[2],b||0===b||(b=parseInt(100*k[3].slice(0,k[3].indexOf(")")),10)));if(c)if(c.match(G))k=c.split(","),e=k[0].slice(k[0].indexOf("(")+1),t=k[1],d=k[2];
else{c=c.replace(a,"").split(",")[0];switch(c.length){case 3:c=c.charAt(0)+c.charAt(0)+c.charAt(1)+c.charAt(1)+c.charAt(2)+c.charAt(2);break;case 6:break;default:c=(c+"FFFFFF").slice(0,6)}e=parseInt(c.slice(0,2),16);t=parseInt(c.slice(2,4),16);d=parseInt(c.slice(4,6),16)}b||0===b||(b=100);"string"===typeof b&&(b=b.split(",")[0]);b=parseInt(b,10)/100;return"rgba("+e+","+t+","+d+","+b+")"},Ra=function(){var a={};return function(b){var k=(b=b||this)&&b.FCcolor||b,e=k.color,t=k.ratio,d=k.angle,g=k.alpha,
q=k.r,h=k.cx,E=k.cy,R=k.fx,n=k.fy,l=k.gradientUnits,w=k.x1,C=k.y1,s=k.x2,p=k.y2,L=1,Y,z,m,I;if("string"===typeof b)return a[I="~"+b]||(a[I]=b.replace(/^#?([a-f0-9]{3,6})/ig,"#$1"));e=e||"";if(!e)return Y;I=[e,g,t,d,q,h,E,l,R,n,w,s,C,p].join("_").replace(/[\(\)\s,\xb0#]/g,"_");if(a[I])return a[I];t=t&&(t+"").split(",")||[];g=(g||0===g)&&(g+"").split(",")||[];if(e=e.split(","))if(Y="",1===e.length)m=e[0].replace(/^#?([a-f0-9]{3,6})/ig,"$1"),Y=g.length?"rgba("+Ka(m).join(",")+","+.01*c(g[0])+")":m.replace(/^#?([a-f0-9]{3,6})/ig,
"#$1");else{b=0;for(z=e.length;b<z;b++)m=e[b].replace(/^#?([a-f0-9]{3,6})/ig,"$1"),isNaN(t[b])||(t[b]=c(t[b]),m+=":"+t[b],isNaN(t[b+1])||(t[b+1]=c(t[b+1])+t[b])),isNaN(g[b])||""===g[b]||(L=.01*g[b]),e[b]="rgba("+Ka(m).join(",")+","+L+")",isNaN(t[b])||(e[b]=e[b]+":"+t[b]);Y+=e.join("-");if(void 0!==q||void 0!==R||void 0!==h||k.radialGradient)Y="xr("+[R,n,q,h,E,l].join()+")"+Y;else{Y="-"+Y;if(void 0!==w||void 0!==C||void 0!==s||void 0!==p)Y="("+[w,C,s,p,l].join()+")"+Y;void 0===d&&(d=0);Y=360-c(d)%
360+Y}}return a[I]=Y}}(),ib=function(){return function(){return""}}(),Da=function(c){return c.replace(a,"").replace(b,"#")},Za=function(c,b){b=(0>b||100<b?100:b)/100;c=c.replace(a,"");var k=parseInt(c,16),e=Math.floor(k/65536),t=Math.floor((k-65536*e)/256);return("000000"+(e*b<<16|t*b<<8|(k-65536*e-256*t)*b).toString(16)).slice(-6)},Ea=function(c,b){b=(0>b||100<b?100:b)/100;c=c.replace(a,"");var k=parseInt(c,16),e=Math.floor(k/65536),t=Math.floor((k-65536*e)/256);return("000000"+(256-(256-e)*b<<16|
256-(256-t)*b<<8|256-(256-(k-65536*e-256*t))*b).toString(16)).slice(-6)},Ka=function(a){a=parseInt(a,16);var c=Math.floor(a/65536),b=Math.floor((a-65536*c)/256);return[c,b,Math.floor(a-65536*c-256*b)]},Xa=function(a,c){if("object"!==typeof a)return"";if(a.fontSize||a["font-size"])!a.fontSize&&a["font-size"]&&(a.fontSize=a["font-size"],delete a["font-size"]),a.lineHeight=(parseFloat(a.fontSize)||c||10)*s.lineHeightFactor+"px",delete a["line-height"];!a.lineHeight&&a["line-height"]&&(a.lineHeight=a["line-height"],
delete a["line-height"]);return a.lineHeight},Ca=function(a,c,b,k,e){var d=ga(a.labelbordercolor,c.bordercolor,b.labelbordercolor,""),g=ea(a.labelbgcolor,c.bgcolor,b.labelbgcolor),q=t(a.labelborderthickness,c.borderthickness,b.labelborderthickness,1);e=t(b.usedataplotcolorforlabels,0)?e||k.color:k.color;d=d?oa(d,t(a.labelborderalpha,c.borderalpha,b.labelborderalpha,a.labelalpha,c.alpha,b.labelalpha,100)):"";a={fontFamily:ea(a.labelfont,c.font,b.labelfont,k.fontFamily),fontSize:ea(a.labelfontsize,
c.fontsize,b.labelfontsize,parseInt(k.fontSize,10))+"px",color:oa(ea(a.labelfontcolor,c.fontcolor,b.labelfontcolor,e),t(a.labelfontalpha,c.fontalpha,b.labelfontalpha,a.labelalpha,c.alpha,b.labelalpha,100)),fontWeight:t(a.labelfontbold,c.fontbold,b.labelfontbold)?"bold":"normal",fontStyle:t(a.labelfontitalic,c.fontitalic,b.labelfontitalic)?"italic":"normal",border:d||g?q+"px solid":"",borderColor:d,borderThickness:q,borderPadding:t(a.labelborderpadding,c.borderpadding,b.labelborderpadding,2),borderRadius:t(a.labelborderradius,
c.borderradius,b.labelborderradius,0),backgroundColor:g?oa(g,t(a.labelbgalpha,c.bgalpha,b.labelbgalpha,a.labelalpha,c.alpha,b.labelalpha,100)):"",borderDash:t(a.labelborderdashed,c.borderdashed,b.labelborderdashed,0)?db(t(a.labelborderdashlen,c.borderdashlen,b.labelborderdashlen,4),t(a.labelborderdashgap,c.borderdashgap,b.labelborderdashgap,2),q):void 0};a.lineHeight=Xa(a);return a},yb=function(){var a={top:{align:"center",verticalAlign:"top",textAlign:"center"},right:{align:"right",verticalAlign:"middle",
textAlign:"left"},bottom:{align:"center",verticalAlign:"bottom",textAlign:"center"},left:{align:"left",verticalAlign:"middle",textAlign:"right"}},c=/([^\,^\s]+)\)$/g,b=function(a,c){var b;/^(bar|bar3d)$/.test(a)&&(this.isBar=!0,this.yPos="bottom",this.yOppPos="top",this.xPos="left",this.xOppPos="right");b=parseInt(c.labelstep,10);this.labelStep=1<b?b:1;this.showLabel=t(c.showlabels,c.shownames,1);this.is3D=/3d$/.test(a)};b.prototype={isBar:!1,yPos:"left",yOppPos:"right",xPos:"bottom",xOppPos:"top",
addAxisGridLine:function(b,k,e,t,d,g,q,S){var h=""===e?!1:!0,E=0<t||0<g.match(c)[1]?!0:!1,R;if(h||E)E||(g="rgba(0,0,0,0)",t=.1),R={isGrid:!0,width:t,dashStyle:d,color:g,value:k,zIndex:void 0===q?2:q},h&&(k=b.opposite?S?this.xOppPos:this.yOppPos:S?this.xPos:this.yPos,k=a[k],R.label={text:e,style:b.labels.style,textAlign:k.textAlign,align:k.align,verticalAlign:k.verticalAlign,rotation:0,x:0,y:0}),b.plotLines.push(R);return R},addAxisAltGrid:function(a,c){if(!this.is3D){var b=t(a._lastValue,a.min),A=
ea(a._altGrid,!1);A&&a.plotBands.push({isGrid:!0,color:a.alternateGridColor,to:c,from:b,zIndex:1});a._lastValue=c;a._altGrid=!A}},addXaxisCat:function(c,b,k,e,t,d,g,T){var q=a[c.opposite?this.xOppPos:this.xPos];b={isGrid:!0,isDataLabel:!0,width:.1,color:"rgba(0,0,0,0)",value:b,label:{text:e,link:ea(t.labellink,d.link,g.labellink),style:Ca(t,d,g,c.labels.style,T),textAlign:q.textAlign,align:q.align,verticalAlign:q.verticalAlign,rotation:0,x:0,y:0}};0!==k%this.labelStep&&(b.stepped=!0,b.label.style=
c.steppedLabels.style);c.plotLines.push(b)},addVline:function(a,c,b,A){A=A._FCconf;var k=A.isBar,e=A.divlineStyle,d=Y(c.label),g=Boolean(t(c.showlabelborder,A.showVLineLabelBorder,1)),T=Boolean(t(c.showlabelbackground,1)),q=ea(c.labelhalign,k?"left":"center"),S=ea(c.labelvalign,k?"middle":"bottom").toLowerCase(),h=t(c.labelposition,0),R=t(c.lineposition,.5),E=t(c.showvlines,A.showVLines,1),n=t(c.alpha,A.vLineAlpha,80),l=ea(c.color,A.vLineColor).replace(/^#?/,"#"),w=T?ea(c.labelbgcolor,A.vLineLabelBgColor,
"333333").replace(/^#?/,"#"):"",C=ea(c.labelcolor,A.vLineLabelColor,c.color,A.vLineColor).replace(/^#?/,"#"),s=t(c.thickness,A.vLineThickness,1),p=.5*s,L=Boolean(Number(ea(c.dashed,0))),z=t(c.dashlen,5),m=t(c.dashgap,2),I=A.smartLabel,J=parseInt(e.fontSize,10)+2,la=0,r=t(c.rotatelabel,A.rotateVLineLabels)?270:0,R=0>R||1<R?.5:R,h=0>h||1<h?0:h;I.setStyle(e);I=I.getOriSize(d);l=oa(l,E?n:"0");if(k){switch(S){case "top":J-=I.height+p+2;break;case "middle":J-=.5*I.height+1;break;default:J+=p}c.labelhalign||
(la-=I.width*h)}else{switch(S){case "top":J=.5*-I.height+1;break;case "middle":J=0;break;default:J=.5*I.height}switch(q){case "left":la+=s;break;case "right":la-=s+1}}a.plotLines.push({isVline:!0,color:l,width:s,value:b-1+R,zIndex:t(c.showontop,A.showVLinesOnTop)?5:3,dashStyle:L?db(z,m,s):void 0,label:{text:d,align:k?"left":"center",offsetScale:h,rotation:r,y:J,x:la,textAlign:q,backgroundColor:w,borderWidth:E&&g?"1px":"",borderType:E&&g?"solid":"",borderColor:E&&g?C:"",backgroundOpacity:E&&T?ea(c.labelbgalpha,
A.vLineLabelBgAlpha)/100:0,style:{color:E?C:l,fontSize:e.fontSize,fontFamily:e.fontFamily,lineHeight:e.lineHeight,backgroundColor:w}}})}};return b.prototype.constructor=b}(),Fb=function(){var a=function(a,b,A,k,e){a=Math.abs(b-a);b=a/(A+1);c(a,A,k)||(e&&Number(b)/Number(k)<(1<k?2:.5)&&(k/=10),b=(Math.floor(b/k)+1)*k,a=b*(A+1));return a},c=function(a,c,A){return b(a/(c+1))>b(A)?!1:!0},b=function(a){a=Math.abs(a);a=String(a);var c=0,b=a.indexOf(".");-1!=b&&(c=a.length-b-1);return c};return function(b,
k,t,d,g,q,h,S){var E,R,n,l,w,C,s;b=!0===isNaN(b)||void 0===b?.1:b;k=!0===isNaN(k)||void 0===k?0:k;b===k&&0===b&&(b=.1);g=void 0===typeof g?!0:g;q=void 0===typeof q?!0:q;E=Math.floor(Math.log(Math.abs(b))/Math.LN10);R=Math.floor(Math.log(Math.abs(k))/Math.LN10);R=Math.max(R,E);E=Math.pow(10,R);2>Math.abs(b)/E&&2>Math.abs(k)/E&&(R--,E=Math.pow(10,R));R=Math.floor(Math.log(b-k)/Math.LN10);R=Math.pow(10,R);0<b-k&&10<=E/R&&(E=R);R=(Math.floor(b/E)+1)*E;0>k?n=-1*(Math.floor(Math.abs(k/E))+1)*E:q?n=0:(n=
Math.floor(Math.abs(k/E)-1)*E,n=0>n?0:n);g&&0>=b&&(R=0);g=t||0===t?!0:!1;q=d||0===d?!0:!1;b=!1===g||!0===g&&Number(t)<b&&b-Number(t)>e?R:Number(t);k=!1===q||!0===q&&Number(d)>k&&Number(d)-k>e?n:Number(d);d=Math.abs(b-k);if(!1===q&&!1===g&&S)if(0<b&&0>k)for(t=!1,g=10<E?E/10:E,S=a(k,b,h,g,!1),q=S-(h+1)*g;!1===t;){if(q+=(h+1)*g,c(q,h,g))if(S=q-d,R=q/(h+1),l=Math.min(Math.abs(k),b),n=l==Math.abs(k)?-1:1,0===h)t=!0;else for(C=1;C<=Math.floor((h+1)/2);C++)w=R*C,!(w-l>S)&&w>l&&(s=q-w,s/R==Math.floor(s/R)&&
w/R==Math.floor(w/R)&&(d=q,b=-1==n?s:w,k=-1==n?-w:-s,t=!0))}else t=a(k,b,h,E,!0),S=t-d,d=t,0<b?b+=S:k-=S;else if(S&&0<h){S=0;for(t=1;;){g=h+S*t;g=0===g?1:g;if(c(d,g,E))break;S=-1==t||S>h?++S:S;if(25<S){g=0;break}t=S<=h?-1*t:1}h=g}return{Max:b,Min:k,Range:d,interval:E,divGap:(b-k)/(h+1)}}}(),vb=function(){var a=function(a,c,b){var A=b.jsVars&&b.jsVars.smartLabel,k=a.offsetWidth;a=a.offsetHeight;this.title.y=a/2;this.title.x=k/2;this.title.style=b._chartMessageStyle;delete b._chartMessageStyle;void 0!==
c&&(A?(Xa(this.title.style),A.setStyle(this.title.style),c=A.getSmartText(Y(c),k,a),this.title.text=c.text):this.title.text=Y(c),this.title.verticalAlign="middle")};a.prototype={chart:{events:{},margin:[0,0,0,0],backgroundColor:{FCcolor:{alpha:0}}},credits:{href:M,text:"FusionCharts XT Trial",enabled:H},legend:{enabled:!1},title:{text:"",style:{fontFamily:"Verdana,sans",fontSize:"10px",color:"#666666"}},plotOptions:{series:{}},series:[{}],exporting:{enabled:!1},nativeMessage:!0};return a.prototype.constructor=
a}(),$a={"true":{"true":{"true":"center","false":"center"},"false":{"true":"center","false":"center"}},"false":{"true":{"true":"right","false":"left"},"false":{"true":"left","false":"right"}}},sb=function(){return function(a,c,k,e,d,g,q){var h,R=k.trendStyle,n,l,w,C,s,p,L,z,m,I,J,M,H,v=g?"xAxis":"dataLabels";if(g?k.showVLines:k.showTrendlines)for(h=0,l=a.length;h<l;h+=1)if((H=a[h])&&H.line)for(n=0,w=H.line.length;n<w;n+=1)C=H.line[n],I=k.numberFormatter.getCleanValue(ea(C.startvalue,C.value,0)),J=
k.numberFormatter.getCleanValue(ea(C.endvalue,ea(C.startvalue,C.value,0))),g?z=c:e&&C.parentyaxis&&/^s$/i.test(C.parentyaxis)?(z=c[1],M=1):z=c[0],p=z.max,L=z.min,s=!1,p>=I&&p>=J&&L<=I&&L<=J&&(e&&C.parentyaxis&&/^s$/i.test(C.parentyaxis)?s="1"!==ea(C.valueonleft,k.trendlineValuesOnOpp):e||(s="1"===ea(C.valueonright,k.trendlineValuesOnOpp)),p=Boolean(t(C.istrendzone,g?1:0)),(L=(g?k.showVLineLabels:k.showTrendlineLabels)?Y(ea(C.displayvalue,k.numberFormatter[v](s?J:I,M))):"")?(m=I<J,s={text:L,textAlign:d?
"center":s?"left":"right",align:d?$a[p][!q][m]:s?"right":"left",verticalAlign:d?"bottom":"middle",rotation:0,x:0,y:0,style:R},L=ea(C.color,k.trendlineColor),C.alwaysVisible=p,L&&(s.style=Ga({},R),s.style.color=L.replace(b,"#"))):s=void 0,L=la(Y(ea(C.tooltext,H.tooltext,k.trendLineToolText))),L=E(L,[7,15,16,17,18,19],{startValue:I,startDataValue:k.numberFormatter[v](I,M),endValue:J,endDataValue:k.numberFormatter[v](J,M),axisName:z.title&&z.title.text},C),m=t(C.thickness,k.trendlineThickness,1),p?z.plotBands.push({isTrend:!0,
color:oa(ea(C.color,k.trendlineColor),ea(C.alpha,k.trendlineAlpha,40)),from:I,to:J,label:s,zIndex:k.is3d||"1"!==ea(C.showontop,k.showTrendlinesOnTop)?3:5,tooltext:L,alwaysVisible:C.alwaysVisible}):z.plotLines.push({isTrend:!0,color:oa(ea(C.color,k.trendlineColor,k.trendlineColor),ea(C.alpha,k.trendlineAlpha,99)),value:I,to:J,width:m,dashStyle:"1"==ea(C.dashed,k.trendlinesAreDashed)?db(t(C.dashlen,k.trendlinesDashLen),t(C.dashgap,k.trendlinesDashGap),m):void 0,label:s,zIndex:k.is3d||"1"!==ea(C.showontop,
k.showTrendlinesOnTop)?3:5,tooltext:L}))}}(),db=function(a,c,b,k){return k||void 0===k?[a,c]:""},nb=function(){},k=function(a,c,b){var e,t=k[a];t||(t=function(){},t.prototype=b instanceof nb?b:new nb,t.prototype.constructor=t,t=k[a]=new t);b&&(t.base=b);t.name=a;for(e in c)switch(typeof c[e]){case "object":if(c[e]instanceof nb){t[e]=c[e][e];break}default:t[e]=c[e];break;case "undefined":delete t[e]}return this instanceof k?(a=function(){},a.prototype=t,a.prototype.constructor=a,new a):t},E=function(){var a=
[{regex:/((^|[^\\])((\\)\\)*\$cleanvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$cleanvalue))/ig,argIndex:2,argKey:"cleanvalue"},{regex:/((^|[^\\])((\\)\\)*\$datavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$datavalue))/ig,argIndex:2,argKey:"formattedValue"},{regex:/((^|[^\\])((\\)\\)*\$value)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$value))/ig,argIndex:3,argKey:"value"},{regex:/((^|[^\\])((\\)\\)*\$label)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$label))/ig,argIndex:2,argKey:"label"},{regex:/((^|[^\\])((\\)\\)*\$seriesname)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$seriesname))/ig,argIndex:5,argKey:"seriesname"},{regex:/((^|[^\\])((\\)\\)*\$yaxisname)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$yaxisname))/ig,argIndex:2,argKey:"yaxisName"},{regex:/((^|[^\\])((\\)\\)*\$xaxisname)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$xaxisname))/ig,argIndex:2,argKey:"xaxisName"},{regex:/((^|[^\\])((\\)\\)*\$displayvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$displayvalue))/ig,argIndex:3,argKey:"displayvalue"},{regex:/((^|[^\\])((\\)\\)*\$xdatavalue)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$xdatavalue))/ig,argIndex:2,argKey:"xDataValue"},{regex:/((^|[^\\])((\\)\\)*\$ydatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$ydatavalue))/ig,argIndex:2,argKey:"yDataValue"},{regex:/((^|[^\\])((\\)\\)*\$xvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$xvalue))/ig,argIndex:3,argKey:"x"},{regex:/((^|[^\\])((\\)\\)*\$yvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$yvalue))/ig,argIndex:3,argKey:"y"},{regex:/((^|[^\\])((\\)\\)*\$zvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$zvalue))/ig,
argIndex:3,argKey:"z"},{regex:/((^|[^\\])((\\)\\)*\$name)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$name))/ig,argIndex:3,argKey:"name"},{regex:/((^|[^\\])((\\)\\)*\$percentValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$percentValue))/ig,argIndex:2,argKey:"percentValue"},{regex:/((^|[^\\])((\\)\\)*\$startValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$startValue))/ig,argIndex:2,argKey:"startValue"},{regex:/((^|[^\\])((\\)\\)*\$startDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$startDataValue))/ig,
argIndex:2,argKey:"startDataValue"},{regex:/((^|[^\\])((\\)\\)*\$endValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$endValue))/ig,argIndex:2,argKey:"endValue"},{regex:/((^|[^\\])((\\)\\)*\$endDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$endDataValue))/ig,argIndex:2,argKey:"endDataValue"},{regex:/((^|[^\\])((\\)\\)*\$axisName)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$axisName))/ig,argIndex:2,argKey:"axisName"},{regex:/((^|[^\\])((\\)\\)*\$cumulativevalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$cumulativevalue))/ig,
argIndex:2,argKey:"cumulativeValue"},{regex:/((^|[^\\])((\\)\\)*\$cumulativedatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$cumulativedatavalue))/ig,argIndex:2,argKey:"cumulativeDataValue"},{regex:/((^|[^\\])((\\)\\)*\$cumulativePercentValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$cumulativePercentValue))/ig,argIndex:2,argKey:"cumulativePercentValue"},{regex:/((^|[^\\])((\\)\\)*\$cumulativepercentdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$cumulativepercentdatavalue))/ig,argIndex:2,argKey:"cumulativePercentDataValue"},
{regex:/((^|[^\\])((\\)\\)*\$sum)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$sum))/ig,argIndex:2,argKey:"sum"},{regex:/((^|[^\\])((\\)\\)*\$unformattedsum)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedsum))/ig,argIndex:2,argKey:"unformattedSum"},{regex:/((^|[^\\])((\\)\\)*\$targetvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$targetvalue))/ig,argIndex:2,argKey:"targetValue"},{regex:/((^|[^\\])((\\)\\)*\$targetdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$targetdatavalue))/ig,argIndex:2,argKey:"targetDataValue"},
{regex:/((^|[^\\])((\\)\\)*\$processname)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$processname))/ig,argIndex:2,argKey:"processName"},{regex:/((^|[^\\])((\\)\\)*\$start)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$start))/ig,argIndex:2,argKey:"start"},{regex:/((^|[^\\])((\\)\\)*\$end)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$end))/ig,argIndex:2,argKey:"end"},{regex:/((^|[^\\])((\\)\\)*\$percentcomplete)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$percentcomplete))/ig,argIndex:2,argKey:"percentComplete"},{regex:/((^|[^\\])((\\)\\)*\$taskpercentcomplete)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$taskpercentcomplete))/ig,argIndex:2,argKey:"taskPercentComplete"},{regex:/((^|[^\\])((\\)\\)*\$taskstartdate)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$taskstartdate))/ig,argIndex:2,argKey:"taskStartDate"},{regex:/((^|[^\\])((\\)\\)*\$taskenddate)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$taskenddate))/ig,argIndex:2,argKey:"taskEndDate"},{regex:/((^|[^\\])((\\)\\)*\$tasklabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tasklabel))/ig,argIndex:2,argKey:"taskLabel"},{regex:/((^|[^\\])((\\)\\)*\$date)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$date))/ig,argIndex:2,argKey:"date"},{regex:/((^|[^\\])((\\)\\)*\$percentofprevvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$percentofprevvalue))/ig,argIndex:2,argKey:"percentOfPrevValue"},{regex:/((^|[^\\])((\\)\\)*\$sname)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$sname))/ig,argIndex:2,argKey:"sName"},{regex:/((^|[^\\])((\\)\\)*\$lname)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$lname))/ig,argIndex:2,argKey:"lName"},{regex:/((^|[^\\])((\\)\\)*\$fromid)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromid))/ig,
argIndex:2,argKey:"fromId"},{regex:/((^|[^\\])((\\)\\)*\$fromlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromlabel))/ig,argIndex:2,argKey:"fromLabel"},{regex:/((^|[^\\])((\\)\\)*\$toid)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toid))/ig,argIndex:2,argKey:"toId"},{regex:/((^|[^\\])((\\)\\)*\$tolabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tolabel))/ig,argIndex:2,argKey:"toLabel"},{regex:/((^|[^\\])((\\)\\)*\$fromxvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromxvalue))/ig,argIndex:2,argKey:"fromXValue"},
{regex:/((^|[^\\])((\\)\\)*\$fromyvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromyvalue))/ig,argIndex:2,argKey:"fromYValue"},{regex:/((^|[^\\])((\\)\\)*\$fromxdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromxdatavalue))/ig,argIndex:2,argKey:"fromXDataValue"},{regex:/((^|[^\\])((\\)\\)*\$fromydatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromydatavalue))/ig,argIndex:2,argKey:"fromYDataValue"},{regex:/((^|[^\\])((\\)\\)*\$fromlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromlabel))/ig,
argIndex:2,argKey:"fromLabel"},{regex:/((^|[^\\])((\\)\\)*\$toxvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toxvalue))/ig,argIndex:2,argKey:"toXValue"},{regex:/((^|[^\\])((\\)\\)*\$toyvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toyvalue))/ig,argIndex:2,argKey:"toYValue"},{regex:/((^|[^\\])((\\)\\)*\$toxdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toxdatavalue))/ig,argIndex:2,argKey:"toXDataValue"},{regex:/((^|[^\\])((\\)\\)*\$toydatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toydatavalue))/ig,
argIndex:2,argKey:"toYDataValue"},{regex:/((^|[^\\])((\\)\\)*\$tolabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tolabel))/ig,argIndex:2,argKey:"toLabel"},{regex:/((^|[^\\])((\\)\\)*\$openvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$openvalue))/ig,argIndex:2,argKey:"openValue"},{regex:/((^|[^\\])((\\)\\)*\$closevalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$closevalue))/ig,argIndex:2,argKey:"closeValue"},{regex:/((^|[^\\])((\\)\\)*\$highvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$highvalue))/ig,
argIndex:2,argKey:"highValue"},{regex:/((^|[^\\])((\\)\\)*\$lowvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$lowvalue))/ig,argIndex:2,argKey:"lowValue"},{regex:/((^|[^\\])((\\)\\)*\$opendatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$opendatavalue))/ig,argIndex:2,argKey:"openDataValue"},{regex:/((^|[^\\])((\\)\\)*\$closedatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$closedatavalue))/ig,argIndex:2,argKey:"closeDataValue"},{regex:/((^|[^\\])((\\)\\)*\$highdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$highdatavalue))/ig,
argIndex:2,argKey:"highDataValue"},{regex:/((^|[^\\])((\\)\\)*\$lowdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$lowdatavalue))/ig,argIndex:2,argKey:"lowDataValue"},{regex:/((^|[^\\])((\\)\\)*\$maxvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$maxvalue))/ig,argIndex:2,argKey:"maxValue"},{regex:/((^|[^\\])((\\)\\)*\$maxdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$maxdatavalue))/ig,argIndex:2,argKey:"maxDataValue"},{regex:/((^|[^\\])((\\)\\)*\$minvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$minvalue))/ig,
argIndex:2,argKey:"minValue"},{regex:/((^|[^\\])((\\)\\)*\$mindatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$mindatavalue))/ig,argIndex:2,argKey:"minDataValue"},{regex:/((^|[^\\])((\\)\\)*\$q1)/ig,argIndex:2,argKey:"Q1"},{regex:/((^|[^\\])((\\)\\)*\$unformattedQ1)/ig,argIndex:2,argKey:"unformattedQ1"},{regex:/((^|[^\\])((\\)\\)*\$q3)/ig,argIndex:2,argKey:"Q3"},{regex:/((^|[^\\])((\\)\\)*\$unformattedQ3)/ig,argIndex:2,argKey:"unformattedQ3"},{regex:/((^|[^\\])((\\)\\)*\$median)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$median))/ig,
argIndex:2,argKey:"median"},{regex:/((^|[^\\])((\\)\\)*\$unformattedMedian)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedMedian))/ig,argIndex:2,argKey:"unformattedMedian"},{regex:/((^|[^\\])((\\)\\)*\$SD)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$SD))/ig,argIndex:2,argKey:"SD"},{regex:/((^|[^\\])((\\)\\)*\$unformattedsd)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedsd))/ig,argIndex:2,argKey:"unformattedsd"},{regex:/((^|[^\\])((\\)\\)*\$QD)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$QD))/ig,
argIndex:2,argKey:"QD"},{regex:/((^|[^\\])((\\)\\)*\$unformattedQD)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedQD))/ig,argIndex:2,argKey:"unformattedQD"},{regex:/((^|[^\\])((\\)\\)*\$MD)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$MD))/ig,argIndex:2,argKey:"MD"},{regex:/((^|[^\\])((\\)\\)*\$unformattedMD)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedMD))/ig,argIndex:2,argKey:"unformattedMD"},{regex:/((^|[^\\])((\\)\\)*\$mean)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$mean))/ig,argIndex:2,
argKey:"mean"},{regex:/((^|[^\\])((\\)\\)*\$unformattedMean)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedMean))/ig,argIndex:2,argKey:"unformattedMean"},{regex:/((^|[^\\])((\\)\\)*\$unformattedMean)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$unformattedMean))/ig,argIndex:2,argKey:"unformattedMean"},{regex:/((^|[^\\])((\\)\\)*\$volumeValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$volumeValue))/ig,argIndex:2,argKey:"volumeValue"},{regex:/((^|[^\\])((\\)\\)*\$volumeDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$volumeDataValue))/ig,
argIndex:2,argKey:"volumeDataValue"},{regex:/((^|[^\\])((\\)\\)*\$fromXValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromXValue))/ig,argIndex:2,argKey:"fromXValue"},{regex:/((^|[^\\])((\\)\\)*\$fromYValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromYValue))/ig,argIndex:2,argKey:"fromYValue"},{regex:/((^|[^\\])((\\)\\)*\$fromXDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromXDataValue))/ig,argIndex:2,argKey:"fromXDataValue"},{regex:/((^|[^\\])((\\)\\)*\$fromYDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromYDataValue))/ig,
argIndex:2,argKey:"fromYDataValue"},{regex:/((^|[^\\])((\\)\\)*\$fromLabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$fromLabel))/ig,argIndex:2,argKey:"fromLabel"},{regex:/((^|[^\\])((\\)\\)*\$toXValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toXValue))/ig,argIndex:2,argKey:"toXValue"},{regex:/((^|[^\\])((\\)\\)*\$toYValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toYValue))/ig,argIndex:2,argKey:"toYValue"},{regex:/((^|[^\\])((\\)\\)*\$toXDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toXDataValue))/ig,
argIndex:2,argKey:"toXDataValue"},{regex:/((^|[^\\])((\\)\\)*\$toYDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$toYDataValue))/ig,argIndex:2,argKey:"toYDataValue"},{regex:/((^|[^\\])((\\)\\)*\$tolabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tolabel))/ig,argIndex:2,argKey:"toLabel"},{regex:/((^|[^\\])((\\)\\)*\$tlLabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tlLabel))/ig,argIndex:5,argKey:"tlLabel"},{regex:/((^|[^\\])((\\)\\)*\$trlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$trlabel))/ig,argIndex:5,
argKey:"trLabel"},{regex:/((^|[^\\])((\\)\\)*\$bllabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$bllabel))/ig,argIndex:5,argKey:"blLabel"},{regex:/((^|[^\\])((\\)\\)*\$brlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$brlabel))/ig,argIndex:5,argKey:"brLabel"},{regex:/((^|[^\\])((\\)\\)*\$rowlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$rowlabel))/ig,argIndex:5,argKey:"rowLabel"},{regex:/((^|[^\\])((\\)\\)*\$columnlabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$columnlabel))/ig,argIndex:5,argKey:"columnLabel"},
{regex:/((^|[^\\])((\\)\\)*\$errorvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$errorvalue))/ig,argIndex:2,argKey:"errorValue"},{regex:/((^|[^\\])((\\)\\)*\$errordatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$errordatavalue))/ig,argIndex:2,argKey:"errorDataValue"},{regex:/((^|[^\\])((\\)\\)*\$errorpercentvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$errorpercentvalue))/ig,argIndex:2,argKey:"errorPercentValue"},{regex:/((^|[^\\])((\\)\\)*\$errorpercentdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$errorpercentdatavalue))/ig,
argIndex:2,argKey:"errorPercentDataValue"},{regex:/((^|[^\\])((\\)\\)*\$horizontalErrorValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$horizontalErrorValue))/ig,argIndex:2,argKey:"horizontalErrorValue"},{regex:/((^|[^\\])((\\)\\)*\$horizontalErrorDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$horizontalErrorDataValue))/ig,argIndex:2,argKey:"horizontalErrorDataValue"},{regex:/((^|[^\\])((\\)\\)*\$verticalErrorValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$verticalErrorValue))/ig,argIndex:2,argKey:"verticalErrorValue"},
{regex:/((^|[^\\])((\\)\\)*\$verticalErrorDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$verticalErrorDataValue))/ig,argIndex:2,argKey:"verticalErrorDataValue"},{regex:/((^|[^\\])((\\)\\)*\$horizontalErrorPercent)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$horizontalErrorPercentValue))/ig,argIndex:2,argKey:"horizontalErrorPercentValue"},{regex:/((^|[^\\])((\\)\\)*\$horizontalErrorPercentDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$horizontalErrorPercentDataValue))/ig,argIndex:2,argKey:"horizontalErrorPercentDataValue"},
{regex:/((^|[^\\])((\\)\\)*\$verticalErrorPercent)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$verticalErrorPercentValue))/ig,argIndex:2,argKey:"verticalErrorPercentValue"},{regex:/((^|[^\\])((\\)\\)*\$verticalErrorPercentDataValue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$verticalErrorPercentDataValue))/ig,argIndex:2,argKey:"verticalErrorPercentDataValue"},{regex:/((^|[^\\])((\\)\\)*\$xaxispercentvalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$xaxispercentvalue))/ig,argIndex:2,argKey:"xAxisPercentValue"},
{regex:/((^|[^\\])((\\)\\)*\$percentdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$percentdatavalue))/ig,argIndex:2,argKey:"percentDataValue"},{regex:/((^|[^\\])((\\)\\)*\$trType)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$trType))/ig,argIndex:4,argKey:"trtype"},{regex:/((^|[^\\])((\\)\\)*\$tlType)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$tlType))/ig,argIndex:4,argKey:"tltype"},{regex:/((^|[^\\])((\\)\\)*\$brType)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$brType))/ig,argIndex:4,argKey:"brtype"},{regex:/((^|[^\\])((\\)\\)*\$blType)/ig,
escapeRegex:/((^|[^\\])((\\)\\)*\\(\$blType))/ig,argIndex:4,argKey:"bltype"},{regex:/((^|[^\\])((\\)\\)*\$colorRangeLabel)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$colorRangeLabel))/ig,argIndex:5,argKey:"colorRangeLabel"},{regex:/((^|[^\\])((\\)\\)*\$zdatavalue)/ig,escapeRegex:/((^|[^\\])((\\)\\)*\\(\$zdatavalue))/ig,argIndex:2,argKey:"zDataValue"}],c=[],b,k=a.length;for(b=0;b<k;b+=1)c.push(b);return function(){var b=arguments[0],k=arguments[1],e,t,d,g,q;xa(k)||(k=c);if(b)for(q=k.length,g=0;g<q;g+=
1)if(d=a[k[g]])e=Ba(la((t=arguments[d.argIndex])&&t[d.argKey],"")+""),b=b.replace(d.regex,"$2$4"+(d.parsingMethod?d.parsingMethod(e):e)),b=b.replace(d.escapeRegex,"$2$4$5");return b}}();d.core._setLineHeightFactor=function(a){!(a=c(a))||0>a||(s.lineHeightFactor=a)};d.extend(s,{BLANKSTRINGPLACEHOLDER:"#BLANK#",BLANKSTRING:"",COLOR_BLACK:"000000",COLOR_GLASS:"rgba(255, 255, 255, 0.3)",COLOR_WHITE:"FFFFFF",COLOR_TRANSPARENT:"rgba(0,0,0,0)",HASHSTRING:"#",BREAKSTRING:"<br />",STRINGSTRING:"string",OBJECTSTRING:"object",
COMMASTRING:",",ZEROSTRING:"0",SAMPLESTRING:"Ay0",TESTSTR:"Ag",ONESTRING:"1",DECIMALSTRING:".",STRINGUNDEFINED:"undefined",POSITION_TOP:"top",POSITION_RIGHT:"right",POSITION_BOTTOM:"bottom",POSITION_LEFT:"left",POSITION_CENTER:"center",POSITION_MIDDLE:"middle",POSITION_START:"start",POSITION_END:"end",FC_CONFIG_STRING:"_FCconf",SHAPE_RECT:"rect",HUNDREDSTRING:"100",PXSTRING:"px",COMMASPACE:", ",TEXTANCHOR:"text-anchor",TOUCH_THRESHOLD_PIXELS:15,CLICK_THRESHOLD_PIXELS:5,regex:{stripWhitespace:K,dropHash:b,
startsRGBA:G,cleanColorCode:a,breakPlaceholder:l,hexcode:/^#?[0-9a-f]{6}/i},fireEvent:function(a,c,b,k){s.dem.fire(a,c,b,k)},plotEventHandler:function(a,c,b){c=c||{};var k=c.type,e=I(a.container,c),e=Ga(e,this.data("eventArgs")),t=a.logic.fireGroupEvent,g=this.data("groupId"),q=function(a,b){c.FusionChartsPreventEvent=!0;p&&b.toolText&&s.toolTip&&s.toolTip.preventTooltip()};"index"in e&&!("dataIndex"in e)&&(e.dataIndex=e.index);"value"in e&&!("dataValue"in e)&&(e.dataValue=e.value);b=ea(b,"dataplotclick").toLowerCase();
"dataplotrollover"===b?(c.FusionChartsPreventEvent=!1,t?d.raiseEventGroup(g,b,e,a.fusionCharts,void 0,void 0,q):d.raiseEvent(b,e,a.logic.chartInstance,void 0,void 0,q)):t&&"dataplotclick"!==b?d.raiseEventGroup(g,b,e,a.fusionCharts):d.raiseEvent(b,e,a.logic.chartInstance);"click"!==k&&"mouseup"!==k&&"touchend"!==k||"dataplotclick"!==b||a.linkClickFN.call({link:e.link},a)},getEventCoordinate:L,getMouseCoordinate:I,addEvent:pa,removeEvent:Z,getTouchEvent:ma,extend2:Ga,deltend:function(a,c){if("object"!==
typeof a||"object"!==typeof c)return null;qa(a,c);return a},imprint:function(a,c,b){var k;if("object"!==typeof a||null===a)return c;if("object"!==typeof c||null===c)return a;for(k in c)if(void 0===a[k]||!b&&null===a[k])a[k]=c[k];return a},pluck:ea,pluckNumber:t,getFirstDefinedValue:function(){var a,c,b;c=0;for(b=arguments.length;c<b;c+=1)if((a=arguments[c])||!1===a||0===a||""==a)return a},createElement:function(a,c,b){a=D.createElement(a);for(var k in c)a.setAttribute(k,c[k]);b&&b.appendChild&&b.appendChild(a);
return a},hashify:fa,pluckFontSize:function(){var a,c,b;c=0;for(b=arguments.length;c<b;c+=1)if(((a=arguments[c])||!1===a||0===a)&&!isNaN(a=Number(a)))return 1>a?1:a;return 1},getValidValue:la,getPosition:ba,getViewPortDimension:q,bindSelectionEvent:function(a,c){c=c||{};var b=a.options.chart,k=a.container,e=b.zoomType,d=Ga({},c.attr||{}),g=d["stroke-width"]=t(d.strokeWidth,d["stroke-width"],1),q=ba(k),h=a.eventListeners||(a.eventListeners=[]);c=Ga({chart:a,zoomX:/x/.test(e),zoomY:/y/.test(e),canvasY:a.canvasTop,
canvasX:a.canvasLeft,canvasW:a.canvasWidth,canvasH:a.canvasHeight,canvasX2:a.canvasLeft+a.canvasWidth,canvasY2:a.canvasTop+a.canvasHeight,strokeWidth:g,chartPosLeft:q.left,chartPosTop:q.top,attr:d},c);d.stroke=ga(d.stroke,"rgba(51,153,255,0.8)");d.fill=ga(d.fill,"rgba(185,213,241,0.3)");d.ishot=!0;k&&(Z(k,"pointerdrag",$),h.push(pa(k,"pointerdrag",$,c)));b.link&&(Z(a.container,"mouseup mousedown",U),h.push(pa(a.container,"mouseup mousedown",U,c)))},createContextMenu:function(a){var c=a.chart,b=c.smartLabel,
k=c.logic.hcJSON&&c.logic.hcJSON.chart.useRoundEdges,e=s.Raphael,t=function(a){var c=a.menufillcolor&&fa(a.menufillcolor),b=a.menulabelcolor&&fa(a.menulabelcolor),u=a.menufillhovercolor&&fa(a.menufillhovercolor);a=a.menulabelhovercolor&&fa(a.menulabelhovercolor);return{attrs:{backgroundColor:c,color:b},hover:{backgroundColor:u,color:a}}}(c.definition.chart),d=function(a,c,b){c=c||{};a=(a=(a=a&&e.tintshade(a.color,.7))&&e.getRGB(a))&&"rgb("+[a.r,a.g,a.b].join()+")";return{backgroundColor:c.backgroundHoverColor||
b.backgroundColor||a||"rgb(64, 64, 64)",color:c.hoverColor||b.color||"#FFFFFF"}}(a.basicStyle,a.hover,t.hover),g=function(a,c,b){c=Ga({},c||{});c=Ga(c,a);return{fontFamily:c.fontFamily||"Verdana,sans",fontSize:c.fontSize||"10px",color:c.color||b.color||"#000000",backgroundColor:c.backgroundColor||b.backgroundColor||"rgb(255, 255, 255)"}}(a.basicStyle,a.attrs,t.attrs),q={textAlign:"left",align:"left",paddingLeft:"5px",paddingRight:"5px",paddingTop:"5px",cursor:"pointer",borderWidth:"0px"},h=a.items,
R=a.position,E=a.verticalPadding||3,n=a.horizontalPadding||6,C={},l,w,L,Y,z,m,I,la,M,H,P,xa,G;if(c)l=ba(c.container);else return!1;Y=function(){var a=C.items,c=a.length,r=0,u=0,B=0,F,f;C.menuItems||(C.menuItems=[]);for(b.setStyle(g);c--;)F=a[c],F=b.getOriSize(F.text),B||(B=F.height+2*E),r+=B,u=J(u,F.width+2*n);C.height=r;C.width=u;C.itemH=B;this.style.width=u+"px";C.menuRect||(r=C.menuRect=D.createElement("div"),r.style.border="1px solid rgb(100, 100, 100)",k&&(r.style.mozBorderRadius="4px",r.style.webkitBorderRadius=
"4px",r.style.borderRadius="4px",r.style.overflow="hidden"),p&&!v?r.style.filter="progid:DXImageTransform.Microsoft.Shadow(Color=#999999,direction=135,strength=3)":(r.style.mozBoxShadow="3px 3px 3px #999",r.style.webkitBoxShadow="3px 3px 3px #999",r.style.boxShadow="3px 3px 3px #999"),this.appendChild(r));u=a.length;for(c=0;c<u;c+=1)if(F=a[c],C.menuItems[c])C.menuItems[c].label.innerHTML=F.text;else{C.menuItems[c]={};r=C.menuItems[c].box=D.createElement("div");r.style.height=B+"px";r.style.lineHeight=
B+"px";for(f in q)r.style[f]=q[f];for(f in g)r.style[f]=g[f];C.menuRect.appendChild(r);r.innerHTML=F.text;s.dem.listen(r,"click",G);s.dem.listen(r,"pointerhover",H);C.menuItems[c].box._itemIdx=c}for(;C.menuItems[c];)C.menuItems[c].box.parentNode.removeChild(C.menuItems[c].box),C.menuItems.splice(c,1)};z=function(){L||(L=D.createElement("div"),L.style.position="absolute",L.style.zIndex="50",L.style.display="none",c.container.appendChild&&c.container.appendChild(L));return L};m=function(){w=setTimeout(C.hide,
800)};I=function(){w&&clearTimeout(w)};la=function(a){var b=a.x;a=a.y;var r={x:b,y:a},u=C.width,B=C.height,k=c.chartHeight,f=c.chartWidth;b+u>f&&0<b-u?r.x-=u:b+u>f&&(r.x=0);a+B>k&&0<a-B&&(r.y-=B);return r};M=function(){C.hide()};H=function(a){a.target&&a.target.parentNode&&("start"===a.state?P:xa).call(a.target)};P=function(){var a=C.menuItems[this._itemIdx],c;I();for(c in d)a.box.style[c]=d[c]};xa=function(){var a=C.menuItems[this._itemIdx],c;for(c in g)a.box.style[c]=g[c];m()};G=function(a){var c=
C.items[this._itemIdx];c.onclick&&c.onclick.call(c,a);a.originalEvent.stopPropagation?a.originalEvent.stopPropagation():a.originalEvent.cancelBubble=!0;C.hide()};C.showItem=function(a){a=this.menuItems[a];var c=this.height,b=this.itemH;a&&a._isHidden&&(a.box.style.display="",this.height=c+b,a._isHidden=!1,a=la(R),this.left=a.x,this.top=a.y)};C.hideItem=function(a){a=this.menuItems[a];var c=this.height,b=this.itemH;a&&!a._isHidden&&(a.box.style.display="none",this.height=c-b,a._isHidden=!0,a=la(R),
this.left=a.x,this.top=a.y)};C.redraw=function(){var a=this.menuContainer;this.items=h;a?Y.call(this.menuContainer):R&&void 0!==R.x&&void 0!==R.y?(this.menuContainer=z(),Y.call(this.menuContainer),a=la(R),this.left=a.x,this.top=a.y,this.menuContainer.style.left=this.left+"px",this.menuContainer.style.top=this.top+"px"):(this.menuContainer=z(),Y.call(this.menuContainer))};C.show=function(a){var c=this;a&&void 0!==a.x&&void 0!==a.y?(a=la(a),c.menuContainer.style.left=a.x+"px",c.menuContainer.style.top=
a.y+"px"):(c.menuContainer.style.left=c.left+"px",c.menuContainer.style.top=c.top+"px");c.menuContainer.style.display="";setTimeout(function(){c.visible=!0;e.click(M)},400)};C.hide=function(){this.visible&&(this.visible=!1,C.menuContainer.style.display="none",C.menuContainer.style.left=-C.width+"px",C.menuContainer.style.top=-C.height+"px",e.unclick(M))};C.update=function(a){a&&a.length&&(this.items=a,this.redraw())};C.updatePosition=function(a){var b=l.left,r=l.top;l=ba(c.container);a?(R=a,a=la(a),
this.left=a.x,this.top=a.y):(this.left-=b-l.left,this.top-=r-l.top)};C.add=function(a){var c=this.menuItems,r=c.length,u;b.setStyle(g);this.width=J(this.width,b.getOriSize(a.text).width);c[r]={};c=c[r].box=D.createElement("div");c.style.height=this.itemH+"px";c.style.lineHeight=this.itemH+"px";for(u in q)c.style[u]=q[u];for(u in g)c.style[u]=g[u];C.menuRect.appendChild(c);c.innerHTML=a.text;s.dem.listen(c,"click",G);s.dem.listen(c,"pointerhover",H);C.menuItems[r].box._itemIdx=r;this.height+=this.itemH};
C.removeItems=function(){for(var a=this.menuItems,c=a&&a.length,b;c--;)b=a[c],s.dem.unlisten(b.box,"click",G),s.dem.unlisten(b.box,"pointerhover",H),b.box&&b.box.parentNode&&b.box.parentNode.removeChild(b.box);delete this.menuItems;delete this.items};C.setPosition=function(a){void 0!==a.x&&void 0!==a.y&&(this.menuContainer.style.x=a.x,this.menuContainer.style.y=a.y)};C.destroy=function(){this.removeItems();this.menuContainer.parentNode.removeChild(this.menuContainer)};h&&h.length&&(C.redraw(),C.hide());
return C},getDefinedColor:function(a,c){return a||0===a||""===a?a:c},getFirstValue:ga,getFirstColor:function(a){a=a.split(",")[0];a=a.replace(K,"");""==a&&(a="000000");return a.replace(b,"#")},getColorCodeString:function(a,c){var b="",k,e,t=0,d=c.split(",");for(e=d.length;t<e;t+=1)k=d[t].split("-"),b=2===k.length?"-1"!==k[0].indexOf("dark")?b+(Ea(a,100-parseInt(k[1],10))+","):b+(Za(a,100-parseInt(k[1],10))+","):b+(d[t]+",");return b.substring(0,b.length-1)},pluckColor:function(a){if(la(a))return a=
a.split(",")[0],a=a.replace(K,""),""==a&&(a="000000"),a.replace(b,"#")},toRaphaelColor:Ra,gradientify:ib,trimString:function(a){a=a.replace(/^\s\s*/,"");for(var c=/\s/,b=a.length;c.test(a.charAt(b-=1)););return a.slice(0,b+1)},getFirstAlpha:function(a){a=parseInt(a,10);if(isNaN(a)||100<a||0>a)a=100;return a},parsePointValue:R,parseUnsafeString:Y,parseTooltext:E,toPrecision:function(a,c){var b=z(10,c);return g(a*b)/b},hasTouch:n,CREDIT_HREF:M,CREDIT_STRING:"FusionCharts XT Trial",getSentenceCase:function(a){a=
a||"";return a.charAt(0).toUpperCase()+a.substr(1)},getCrispValues:function(a,c,b){var k=b%2/2;b=g(a+k)-k;a=g(a+c+k)-k-b;return{position:b,distance:a}},regescape:function(a){return a&&a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},regReplaceEscape:Ba,isArray:xa,stubFN:function(){},falseFN:function(){return!1},stableSort:function(a,c){var b=a.length,k;for(k=0;k<b;k++)a[k].ssI=k;a.sort(function(a,b){var k=c(a,b);return 0===k?a.ssI-b.ssI:k});for(k=0;k<b;k++)delete a[k].ssI},hasSVG:v,isIE:p,lineHeightFactor:1.2,
getLinkAction:function(a,c){var b=function(a){return a};return function(){var k=t((a.chart||a.map||{}).unescapelinks,1),e=ga(this.link,""),g=ea(e,this.options&&this.options.chart&&this.options.chart.link||"",this.series&&this.series.chart&&this.series.chart.options&&this.series.chart.options.chart&&this.series.chart.options.chart.link||""),q=g,h,R,E,C,n,l,w,s,L,p;void 0!==g&&(k&&(g=m.decodeURIComponent?m.decodeURIComponent(g):m.unescape(g)),g=g.replace(/^\s+/,"").replace(/\s+$/,""),-1!==g.search(/^[a-z]*\s*[\-\:]\s*/i)&&
(n=g.split(/\s*[\-\:]\s*/)[0].toLowerCase(),p=n.length),setTimeout(function(){switch(n){case "j":g=g.replace(/^j\s*\-/i,"j-");h=g.indexOf("-",2);-1===h?za(g.slice(2)):za(g.substr(2,h-2).replace(/\s/g,""),g.slice(h+1));break;case "javascript":ya(g.replace(/^javascript\s*\:/i,""));break;case "n":g.replace(/^n\s*\-/i,"n-");m.open(b(g.slice(2),k));break;case "f":g=g.replace(/^f\s*\-/i,"f-");h=g.indexOf("-",2);-1!==h?(R=g.substr(2,h-2))&&m.frames[R]?m.frames[R].location=b(g.slice(h+1),k):m.open(b(g.slice(h+
1),k),R):m.open(b(g.slice(2),k));break;case "p":g=g.replace(/p\s*\-/i,"p-");h=g.indexOf("-",2);E=g.indexOf(",",2);-1===h&&(h=1);C=b(g.slice(h+1),k);m.open(C,g.substr(2,E-2),g.substr(E+1,h-E-1)).focus();break;case "newchart":case "newmap":":"===g.charAt(p)&&(h=g.indexOf("-",p+1),L=g.substring(p+1,h),p=h);h=g.indexOf("-",p+1);l=g.substring(p+1,h).toLowerCase();switch(l){case "xmlurl":case "jsonurl":s=g.substring(h+1,g.length);break;case "xml":case "json":var e=w=g.substring(h+1,g.length),t={chart:{}},
Y,e=e.toLowerCase();if(a.linkeddata)for(Y=0;Y<a.linkeddata.length;Y+=1)a.linkeddata[Y].id.toLowerCase()===e&&(t=a.linkeddata[Y].linkedchart||a.linkeddata[Y].linkedmap);s=t;l="json"}d.raiseEvent("linkedChartInvoked",{alias:L,linkType:l.toUpperCase(),data:s},c);break;default:m.location.href=g}d.raiseEvent("linkClicked",{linkProvided:q,linkInvoked:g,linkAction:n&&n.toLowerCase()},c)},0))}},graphics:{parseAlpha:V,convertColor:oa,getDarkColor:Za,getLightColor:Ea,mapSymbolName:function(a,c){var b="circle";
a=R(a);3<=a&&(b=(c?"spoke_":"poly_")+a);return b},getColumnColor:function(a,c,b,k,e,t,g,d,h){var q,R;q=a.split(",");R=c.split(",");t=t.split(",");g=g.split(",");a=a.replace(/\s/g,"").replace(/\,$/,"");h?d={FCcolor:{color:q[0],alpha:R[0]}}:e?(a=q[0],R=R[0],d={FCcolor:{color:Za(a,75)+","+Ea(a,10)+","+Za(a,90)+","+Ea(a,55)+","+Za(a,80),alpha:R+","+R+","+R+","+R+","+R,ratio:"0,11,14,57,18",angle:d?"90":"0"}},t=[Za(a,70)]):(c=V(c,q.length),d={FCcolor:{color:a,alpha:c,ratio:b,angle:d?-k:k}});return[d,{FCcolor:{color:t[0],
alpha:g[0]}}]},getAngle:function(a,c,b){a=180*Math.atan(c/a)/Math.PI;2==b?a=180-a:3==b?a+=180:4==b&&(a=360-a);return a},parseColor:Da,getValidColor:function(a){return P.test(Da(a))&&a},HSBtoRGB:function(a){var c=a[0],b=0,k=0,e=0,t=[],t=a[1]/100;a=a[2]/100;var d=c/60-Math.floor(c/60),q=a*(1-t),h=a*(1-d*t),t=a*(1-(1-d)*t);switch(Math.floor(c/60)%6){case 0:b=a;k=t;e=q;break;case 1:b=h;k=a;e=q;break;case 2:b=q;k=a;e=t;break;case 3:b=q;k=h;e=a;break;case 4:b=t;k=q;e=a;break;case 5:b=a,k=q,e=h}return t=
[g(255*b),g(255*k),g(255*e)]},RGBtoHSB:function(a){var c=a[0],b=a[1];a=a[2];var k=Math.max(Math.max(c,b),a),e=Math.min(Math.min(c,b),a),t=0,d=0;k==e?t=0:k==c?t=(60*(b-a)/(k-e)+360)%360:k==b?t=60*(a-c)/(k-e)+120:k==a&&(t=60*(c-b)/(k-e)+240);d=0===k?0:(k-e)/k;return[g(t),g(100*d),g(k/255*100)]},RGBtoHex:function(a){return("000000"+(a[0]<<16|a[1]<<8|a[2]).toString(16)).slice(-6)},HEXtoRGB:Ka},setImageDisplayMode:function(a,c,b,k,e,t,g,d){var q=k/100*d.width;k=k/100*d.height;d={};var h,R=t-2*e;h=g-2*
e;var E=function(a,c,b,k,t,d){var g={};switch(a){case "top":g.y=e;break;case "bottom":g.y=d-k-e;break;case "middle":g.y=(d-k)/2}switch(c){case "left":g.x=e;break;case "right":g.x=t-b-e;break;case "middle":g.x=(t-b)/2}return g};switch(a){case "center":d.width=q;d.height=k;d.y=g/2-k/2;d.x=t/2-q/2;break;case "stretch":d.width=t-2*e;d.height=g-2*e;d.y=e;d.x=e;break;case "tile":d.width=q;d.height=k;d.tileInfo={};d.tileInfo.xCount=a=Math.ceil(R/q);d.tileInfo.yCount=h=Math.ceil(h/k);c=E(c,b,q*a,k*h,t,g);
d.y=c.y;d.x=c.x;break;case "fit":a=q/k>R/h?R/q:h/k;d.width=q*a;d.height=k*a;c=E(c,b,d.width,d.height,t,g);d.y=c.y;d.x=c.x;break;case "fill":a=q/k>R/h?h/k:R/q;d.width=q*a;d.height=k*a;c=E(c,b,d.width,d.height,t,g);d.y=c.y;d.x=c.x;break;default:c=E(c,b,q,k,t,g),d.width=q,d.height=k,d.y=c.y,d.x=c.x}return d},setLineHeight:Xa,parsexAxisStyles:Ca,supportedStyle:{font:"font",fontFamily:"font-family","font-family":"font-family",fontWeight:"font-weight","font-weight":"font-weight",fontSize:"font-size","font-size":"font-size",
lineHeight:"line-height","line-height":"line-height",textDecoration:"text-decoration","text-decoration":"text-decoration",color:"color",whiteSpace:"white-space","white-space":"white-space",padding:"padding",margin:"margin",background:"background",backgroundColor:"background-color","background-color":"background-color",backgroundImage:"background-image","background-image":"background-image",backgroundPosition:"background-position","background-position":"background-position",backgroundPositionLeft:"background-position-left",
"background-position-left":"background-position-left",backgroundPositionTop:"background-position-top","background-position-top":"background-position-top",backgroundRepeat:"background-repeat","background-repeat":"background-repeat",border:"border",borderColor:"border-color","border-color":"border-color",borderStyle:"border-style","border-style":"border-style",borderThickness:"border-thickness","border-thickness":"border-thickness",borderTop:"border-top","border-top":"border-top",borderTopColor:"border-top-color",
"border-top-color":"border-top-color",borderTopStyle:"border-top-style","border-top-style":"border-top-style",borderTopThickness:"border-top-thickness","border-top-thickness":"border-top-thickness",borderRight:"border-right","border-right":"border-right",borderRightColor:"border-right-color","border-right-color":"border-right-color",borderRightStyle:"border-right-style","border-right-style":"border-right-style",borderRightThickness:"border-right-thickness","border-right-thickness":"border-right-thickness",
borderBottom:"border-bottom","border-bottom":"border-bottom",borderBottomColor:"border-bottom-color","border-bottom-color":"border-bottom-color",borderBottomStyle:"border-bottom-style","border-bottom-style":"border-bottom-style",borderBottomThickness:"border-bottom-thickness","border-bottom-thickness":"border-bottom-thickness",borderLeft:"border-left","border-left":"border-left",borderLeftColor:"border-left-color","border-left-color":"border-left-color",borderLeftStyle:"border-left-style","border-left-Style":"border-left-style",
borderLeftThickness:"border-left-thickness","border-left-thickness":"border-left-thickness"},getAxisLimits:Fb,createTrendLine:sb,getDashStyle:db,axisLabelAdder:yb,chartAPI:k,createDialog:vb,isCanvasElemSupported:function(){var a=D.createElement("canvas");return!(!a.getContext||!a.getContext("2d"))}})}]);
window.FusionCharts&&window.FusionCharts.register("module",["private","vendor.redraphael",function(){var d=this.hcLib,m=window.Raphael,D;(function(){(function(d,p){var c=/[\.\/]/,m=function(){},b=function(a,c){return a-c},G,a,l={n:{}},P=function(c,d){c=String(c);var g=a,e=Array.prototype.slice.call(arguments,2),h=P.listeners(c),n=0,l,p=[],q={},m=[],w=G;G=c;for(var v=a=0,s=h.length;v<s;v++)"zIndex"in h[v]&&(p.push(h[v].zIndex),0>h[v].zIndex&&(q[h[v].zIndex]=h[v]));for(p.sort(b);0>p[n];)if(l=q[p[n++]],
m.push(l.apply(d,e)),a)return a=g,m;for(v=0;v<s;v++)if(l=h[v],"zIndex"in l)if(l.zIndex==p[n]){m.push(l.apply(d,e));if(a)break;do if(n++,(l=q[p[n]])&&m.push(l.apply(d,e)),a)break;while(l)}else q[l.zIndex]=l;else if(m.push(l.apply(d,e)),a)break;a=g;G=w;return m.length?m:null};P._events=l;P.listeners=function(a){a=a.split(c);var b=l,d,e,h,n,p,m,q,J=[b],w=[];h=0;for(n=a.length;h<n;h++){q=[];p=0;for(m=J.length;p<m;p++)for(b=J[p].n,d=[b[a[h]],b["*"]],e=2;e--;)if(b=d[e])q.push(b),w=w.concat(b.f||[]);J=q}return w};
P.on=function(a,b){a=String(a);if("function"!=typeof b)return function(){};for(var d=a.split(c),e=l,h=0,n=d.length;h<n;h++)e=e.n,e=e.hasOwnProperty(d[h])&&e[d[h]]||(e[d[h]]={n:{}});e.f=e.f||[];h=0;for(n=e.f.length;h<n;h++)if(e.f[h]==b)return m;e.f.push(b);return function(a){+a==+a&&(b.zIndex=+a)}};P.f=function(a){var c=[].slice.call(arguments,1);return function(){P.apply(null,[a,null].concat(c).concat([].slice.call(arguments,0)))}};P.stop=function(){a=1};P.nt=function(a){return a?(new RegExp("(?:\\.|\\/|^)"+
a+"(?:\\.|\\/|$)")).test(G):G};P.nts=function(){return G.split(c)};P.off=P.unbind=function(a,b){if(a){var d=a.split(c),e,h,n,p,m,q,J=[l];p=0;for(m=d.length;p<m;p++)for(q=0;q<J.length;q+=n.length-2){n=[q,1];e=J[q].n;if("*"!=d[p])e[d[p]]&&n.push(e[d[p]]);else for(h in e)e.hasOwnProperty(h)&&n.push(e[h]);J.splice.apply(J,n)}p=0;for(m=J.length;p<m;p++)for(e=J[p];e.n;){if(b){if(e.f){q=0;for(d=e.f.length;q<d;q++)if(e.f[q]==b){e.f.splice(q,1);break}!e.f.length&&delete e.f}for(h in e.n)if(e.n.hasOwnProperty(h)&&
e.n[h].f){n=e.n[h].f;q=0;for(d=n.length;q<d;q++)if(n[q]==b){n.splice(q,1);break}!n.length&&delete e.n[h].f}}else for(h in delete e.f,e.n)e.n.hasOwnProperty(h)&&e.n[h].f&&delete e.n[h].f;e=e.n}}else P._events=l={n:{}}};P.once=function(a,c){var b=function(){P.unbind(a,b);return c.apply(this,arguments)};return P.on(a,b)};P.version="0.4.2";P.toString=function(){return"You are running Eve 0.4.2"};"undefined"!=typeof module&&module.exports?module.exports=P:p||"undefined"==typeof define?d.eve=P:define("eve",
[],function(){return P})})(this,!0);(function(d,p,c){!c&&"function"===typeof define&&define.amd?define(["eve"],function(c){return p(d,c)}):p(d,d.eve)})(this,function(d,p){function c(a){var b,f;c._url="";if(c.is(a,"function"))return n?a():p.on("raphael.DOMload",a);if(c.is(a,q))return c._engine.create[M](c,a.splice(0,3+c.is(a[0],H))).add(a);b=Array.prototype.slice.call(arguments,0);return c.is(b[b.length-1],"function")?(f=b.pop(),n?f.call(c._engine.create[M](c,b)):p.on("raphael.DOMload",function(){f.call(c._engine.create[M](c,
b))})):c._engine.create[M](c,arguments)}function m(){return this.hex}function b(a,c){for(var b=[],f=0,r=a.length;r-2*!c>f;f+=2){var u=[{x:+a[f-2],y:+a[f-1]},{x:+a[f],y:+a[f+1]},{x:+a[f+2],y:+a[f+3]},{x:+a[f+4],y:+a[f+5]}];c?f?r-4==f?u[3]={x:+a[0],y:+a[1]}:r-2==f&&(u[2]={x:+a[0],y:+a[1]},u[3]={x:+a[2],y:+a[3]}):u[0]={x:+a[r-2],y:+a[r-1]}:r-4==f?u[3]=u[2]:f||(u[0]={x:+a[f],y:+a[f+1]});b.push(["C",(-u[0].x+6*u[1].x+u[2].x)/6,(-u[0].y+6*u[1].y+u[2].y)/6,(u[1].x+6*u[2].x-u[3].x)/6,(u[1].y+6*u[2].y-u[3].y)/
6,u[2].x,u[2].y])}return b}function G(a,c,b,f,r,u,k,B,F){null==F&&(F=1);F=(1<F?1:0>F?0:F)/2;for(var e=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],d=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],t=0,g=0;12>g;g++)var A=F*e[g]+F,O=A*(A*(-3*a+9*b-9*r+3*k)+6*a-12*b+6*r)-3*a+3*b,A=A*(A*(-3*c+9*f-9*u+3*B)+6*c-12*f+6*u)-3*c+3*f,t=t+d[g]*za(O*O+A*A);return F*t}function a(a,c,b,f,r,u,k,B,F){if(!(0>F||G(a,c,b,f,r,u,k,B)<F)){var e=.5,d=1-e,t;for(t=
G(a,c,b,f,r,u,k,B,d);.01<xa(t-F);)e/=2,d+=(t<F?1:-1)*e,t=G(a,c,b,f,r,u,k,B,d);return d}}function l(a,b,f){a=c._path2curve(a);b=c._path2curve(b);for(var r,u,k,B,F,e,d,t,g,A,O=f?0:[],q=0,h=a.length;q<h;q++)if(g=a[q],"M"==g[0])r=F=g[1],u=e=g[2];else{"C"==g[0]?(g=[r,u].concat(g.slice(1)),r=g[6],u=g[7]):(g=[r,u,r,u,F,e,F,e],r=F,u=e);for(var X=0,R=b.length;X<R;X++)if(A=b[X],"M"==A[0])k=d=A[1],B=t=A[2];else{"C"==A[0]?(A=[k,B].concat(A.slice(1)),k=A[6],B=A[7]):(A=[k,B,k,B,d,t,d,t],k=d,B=t);var E;var Ma=g,
n=A;E=f;var l=c.bezierBBox(Ma),p=c.bezierBBox(n);if(c.isBBoxIntersect(l,p)){for(var l=G.apply(0,Ma),p=G.apply(0,n),l=Y(~~(l/5),1),p=Y(~~(p/5),1),w=[],s=[],T={},va=E?0:[],L=0;L<l+1;L++){var pb=c.findDotsAtSegment.apply(c,Ma.concat(L/l));w.push({x:pb.x,y:pb.y,t:L/l})}for(L=0;L<p+1;L++)pb=c.findDotsAtSegment.apply(c,n.concat(L/p)),s.push({x:pb.x,y:pb.y,t:L/p});for(L=0;L<l;L++)for(Ma=0;Ma<p;Ma++){var ub=w[L],ua=w[L+1],n=s[Ma],pb=s[Ma+1],Aa=.001>xa(ua.x-ub.x)?"y":"x",m=.001>xa(pb.x-n.x)?"y":"x",qb;qb=
ub.x;var S=ub.y,I=ua.x,tc=ua.y,ac=n.x,z=n.y,J=pb.x,la=pb.y;if(Y(qb,I)<C(ac,J)||C(qb,I)>Y(ac,J)||Y(S,tc)<C(z,la)||C(S,tc)>Y(z,la))qb=void 0;else{var W=(qb*tc-S*I)*(ac-J)-(qb-I)*(ac*la-z*J),H=(qb*tc-S*I)*(z-la)-(S-tc)*(ac*la-z*J),ka=(qb-I)*(z-la)-(S-tc)*(ac-J);if(ka){var W=W/ka,H=H/ka,ka=+W.toFixed(2),Hc=+H.toFixed(2);qb=ka<+C(qb,I).toFixed(2)||ka>+Y(qb,I).toFixed(2)||ka<+C(ac,J).toFixed(2)||ka>+Y(ac,J).toFixed(2)||Hc<+C(S,tc).toFixed(2)||Hc>+Y(S,tc).toFixed(2)||Hc<+C(z,la).toFixed(2)||Hc>+Y(z,la).toFixed(2)?
void 0:{x:W,y:H}}else qb=void 0}qb&&T[qb.x.toFixed(4)]!=qb.y.toFixed(4)&&(T[qb.x.toFixed(4)]=qb.y.toFixed(4),ub=ub.t+xa((qb[Aa]-ub[Aa])/(ua[Aa]-ub[Aa]))*(ua.t-ub.t),n=n.t+xa((qb[m]-n[m])/(pb[m]-n[m]))*(pb.t-n.t),0<=ub&&1.001>=ub&&0<=n&&1.001>=n&&(E?va++:va.push({x:qb.x,y:qb.y,t1:C(ub,1),t2:C(n,1)})))}E=va}else E=E?0:[];if(f)O+=E;else{l=0;for(p=E.length;l<p;l++)E[l].segment1=q,E[l].segment2=X,E[l].bez1=g,E[l].bez2=A;O=O.concat(E)}}}return O}function P(a,c,b,f,r,u){null!=a?(this.a=+a,this.b=+c,this.c=
+b,this.d=+f,this.e=+r,this.f=+u):(this.a=1,this.c=this.b=0,this.d=1,this.f=this.e=0)}function N(){return this.x+" "+this.y+" "+this.width+"  "+this.height}function z(a,c,b,f,r,u){function k(a,c){var b,Sa,f,r;f=a;for(Sa=0;8>Sa;Sa++){r=((e*f+F)*f+B)*f-a;if(xa(r)<c)return f;b=(3*e*f+2*F)*f+B;if(1E-6>xa(b))break;f-=r/b}b=0;Sa=1;f=a;if(f<b)return b;if(f>Sa)return Sa;for(;b<Sa;){r=((e*f+F)*f+B)*f;if(xa(r-a)<c)break;a>r?b=f:Sa=f;f=(Sa-b)/2+b}return f}var B=3*c,F=3*(f-c)-B,e=1-B-F,d=3*b,t=3*(r-b)-d,g=1-
d-t;return function(a,c){var b=k(a,c);return((g*b+t)*b+d)*b}(a,1/(200*u))}function g(a,c){var b=[],f={};this.ms=c;this.times=1;if(a){for(var r in a)a.hasOwnProperty(r)&&(f[fa(r)]=a[r],b.push(fa(r)));b.sort(A)}this.anim=f;this.top=b[b.length-1];this.percents=b}function e(a,b,f,r,u,F){f=fa(f);var e,d,t,g,A,O,q=a.ms,h={},R={},E={};if(r)for(O=0,C=La.length;O<C;O++){var n=La[O];if(n.el.id==b.id&&n.anim==a){n.percent!=f?(La.splice(O,1),t=1):d=n;b.attr(n.totalOrigin);break}}else r=+R;O=0;for(var C=a.percents.length;O<
C;O++)if(a.percents[O]==f||a.percents[O]>r*a.top){f=a.percents[O];A=a.percents[O-1]||0;q=q/a.top*(f-A);g=a.percents[O+1];e=a.anim[f];break}else r&&b.attr(a.anim[a.percents[O]]);if(e){if(d)d.initstatus=r,d.start=new Date-d.ms*r;else{for(var l in e)if(e.hasOwnProperty(l)&&(k.hasOwnProperty(l)||b.ca[l]))switch(h[l]=b.attr(l),null==h[l]&&(h[l]=nb[l]),R[l]=e[l],k[l]){case H:E[l]=(R[l]-h[l])/q;break;case "colour":h[l]=c.getRGB(h[l]);O=c.getRGB(R[l]);E[l]={r:(O.r-h[l].r)/q,g:(O.g-h[l].g)/q,b:(O.b-h[l].b)/
q};break;case "path":O=B(h[l],R[l]);n=O[1];h[l]=O[0];E[l]=[];O=0;for(C=h[l].length;O<C;O++){E[l][O]=[0];for(var w=1,s=h[l][O].length;w<s;w++)E[l][O][w]=(n[O][w]-h[l][O][w])/q}break;case "transform":O=b._;if(C=X(O[l],R[l]))for(h[l]=C.from,R[l]=C.to,E[l]=[],E[l].real=!0,O=0,C=h[l].length;O<C;O++)for(E[l][O]=[h[l][O][0]],w=1,s=h[l][O].length;w<s;w++)E[l][O][w]=(R[l][O][w]-h[l][O][w])/q;else C=b.matrix||new P,O={_:{transform:O.transform},getBBox:function(){return b.getBBox(1)}},h[l]=[C.a,C.b,C.c,C.d,
C.e,C.f],Ma(O,R[l]),R[l]=O._.transform,E[l]=[(O.matrix.a-C.a)/q,(O.matrix.b-C.b)/q,(O.matrix.c-C.c)/q,(O.matrix.d-C.d)/q,(O.matrix.e-C.e)/q,(O.matrix.f-C.f)/q];break;case "csv":C=I(e[l]).split(Za);n=I(h[l]).split(Za);if("clip-rect"==l)for(h[l]=n,E[l]=[],O=n.length;O--;)E[l][O]=(C[O]-h[l][O])/q;R[l]=C;break;default:for(C=[].concat(e[l]),n=[].concat(h[l]),E[l]=[],O=b.ca[l].length;O--;)E[l][O]=((C[O]||0)-(n[O]||0))/q}O=e.easing;l=c.easing_formulas[O];if(!l)if((l=I(O).match(Xa))&&5==l.length){var T=l;
l=function(a){return z(a,+T[1],+T[2],+T[3],+T[4],q)}}else l=S;O=e.start||a.start||+new Date;n={anim:a,percent:f,timestamp:O,start:O+(a.del||0),status:0,initstatus:r||0,stop:!1,ms:q,easing:l,from:h,diff:E,to:R,el:b,callback:e.callback,prev:A,next:g,repeat:F||a.times,origin:b.attr(),totalOrigin:u};La.push(n);if(r&&!d&&!t&&(n.stop=!0,n.start=new Date-q*r,1==La.length))return bd();t&&(n.start=new Date-n.ms*r);1==La.length&&jd(bd)}p("raphael.anim.start."+b.id,b,a)}}function h(a){for(var c=0;c<La.length;c++)La[c].el.paper==
a&&La.splice(c--,1)}c.upgrade="1.0.0";c.version="2.1.0";c.eve=p;D=c;var n,M="apply",H="number",q="array",J=Array.prototype.slice,w=Array.prototype.splice,ja=function(){return function(){}.hasOwnProperty("prototype")}(),s={doc:document,win:d},$=Object.prototype.hasOwnProperty.call(s.win,"Raphael"),U=s.win.Raphael,ba=s.doc,Ba=s.win,la=c.supportsTouch="createTouch"in ba,ga=function(){};c.ca=c.customAttributes=ga.prototype;var ea=function(){this.ca=this.customAttributes=new ga;this._CustomAttributes=
function(){};this._CustomAttributes.prototype=this.ca;this._elementsById={};this.id=c._oid++;p("raphael.new",this)},pa=c.fn=ea.prototype=c.prototype,Z={circle:1,rect:1,path:1,ellipse:1,text:1,image:1,group:1},ma="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel".split(" "),L=c._touchMap={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},I=Ba.String,fa=Ba.parseFloat,t=Ba.parseInt,R=Ba.Math,Y=R.max,C=R.min,xa=R.abs,Pa=R.pow,Ga=R.cos,
qa=R.sin,za=R.sqrt,ya=R.round,ta=R.PI,V=ta/180,oa=180/ta,Ra=I.prototype.toLowerCase,ib=I.prototype.toUpperCase,Da=Ba.Object.prototype.toString,Za=/[, ]+/,Ea=/\{(\d+)\}/g;c._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i;var Ka=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,
Xa=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,Ca=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,yb=/,?([achlmqrstvxz]),?/gi,Fb=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,
vb=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,$a=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig;
c._radial_gradient=/^x?r(?:\(([^\)]*?)\))?/;var sb={NaN:1,Infinity:1,"-Infinity":1},db={hs:1,rg:1},nb=c._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9","clip-path":"",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"about:blank","letter-spacing":0,"line-height":12,"vertical-align":"middle",opacity:1,path:"M0,0",r:0,rx:0,ry:0,
src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",visibility:"",title:"",transform:"",rotation:0,width:0,x:0,y:0},k=c._availableAnimAttrs={blur:H,"clip-rect":"csv","clip-path":"path",cx:H,cy:H,fill:"colour","fill-opacity":H,"font-size":H,height:H,opacity:H,path:"path",r:H,rx:H,ry:H,stroke:"colour","stroke-opacity":H,"stroke-width":H,transform:"transform",width:H,
x:H,y:H},E={},A=function(a,c){return fa(a)-fa(c)},T=function(){},S=function(a){return a},W=c._rectPath=function(a,c,b,f,r){return r?[["M",a+r,c],["l",b-2*r,0],["a",r,r,0,0,1,r,r],["l",0,f-2*r],["a",r,r,0,0,1,-r,r],["l",2*r-b,0],["a",r,r,0,0,1,-r,-r],["l",0,2*r-f],["a",r,r,0,0,1,r,-r],["z"]]:[["M",a,c],["l",b,0],["l",0,f],["l",-b,0],["z"]]},da=function(a,c,b,f){null==f&&(f=b);return[["M",a,c],["m",0,-f],["a",b,f,0,1,1,0,2*f],["a",b,f,0,1,1,0,-2*f],["z"]]},ia=c._getPath={group:function(){return!1},
path:function(a){return a.attr("path")},circle:function(a){a=a.attrs;return da(a.cx,a.cy,a.r)},ellipse:function(a){a=a.attrs;return da(a.cx,a.cy,a.rx,a.ry)},rect:function(a){a=a.attrs;return W(a.x,a.y,a.width,a.height,a.r)},image:function(a){a=a.attrs;return W(a.x,a.y,a.width,a.height)},text:function(a){a=a._getBBox();return W(a.x,a.y,a.width,a.height)}},ha=c.mapPath=function(a,c){if(!c)return a;var b,f,r,u,k,F,e;a=B(a);r=0;for(k=a.length;r<k;r++)for(e=a[r],u=1,F=e.length;u<F;u+=2)b=c.x(e[u],e[u+
1]),f=c.y(e[u],e[u+1]),e[u]=b,e[u+1]=f;return a};c.pick=function(){for(var a,c=0,b=arguments.length;c<b;c+=1)if((a=arguments[c])||!1===a||0===a)return a};var Na=c._lastArgIfGroup=function(a,b){var f=a.length-1,r=a[f];if(r&&r.constructor===c.el.constructor&&"group"===r.type)return b&&(a[f]=void 0,delete a[f],w.call(a,f,1)),r},sa=c._serializeArgs=function(a){var b=a[0],f,r;if(c.is(b,"object")&&!c.is(b,"array")&&"group"!==b.type)for(f=b,b.path&&(b=b.path)&&!c.is(b,"string")&&c.is(b[0],q),b=1,r=arguments.length;b<
r;b+=2)f[arguments[b]]||(f[arguments[b]]=arguments[b+1]);else for(f={},b=1,r=arguments.length;b<r;b+=2)f[arguments[b]]=a[(b-1)/2]||arguments[b+1];return f},na=c.merge=function(a,c,b,f,r){var u,k,B,F;r?(f.push(a),r.push(c)):(f=[a],r=[c]);if(c instanceof Array)for(u=0;u<c.length;u+=1){try{k=a[u],B=c[u]}catch(e){continue}if("object"!==typeof B)b&&void 0===B||(a[u]=B);else{if(null===k||"object"!==typeof k)k=a[u]=B instanceof Array?[]:{};F=checkCyclicRef(B,r);-1!==F?k=a[u]=f[F]:na(k,B,b,f,r)}}else for(u in c){try{k=
a[u],B=c[u]}catch(d){continue}if(null!==B&&"object"===typeof B)if(F=Da.call(B),"[object Object]"===F){if(null===k||"object"!==typeof k)k=a[u]={};F=checkCyclicRef(B,r);-1!==F?k=a[u]=f[F]:na(k,B,b,f,r)}else"[object Array]"===F?(null!==k&&k instanceof Array||(k=a[u]=[]),F=checkCyclicRef(B,r),-1!==F?k=a[u]=f[F]:na(k,B,b,f,r)):a[u]=B;else a[u]=B}return a};c.extend=function(a,c,b){if("object"!==typeof a&&"object"!==typeof c)return null;if("object"!==typeof c||null===c)return a;"object"!==typeof a&&(a=c instanceof
Array?[]:{});na(a,c,b);return a};var ra=c.is=function(a,c){c=Ra.call(c);return"finite"==c?!sb.hasOwnProperty(+a):c==q?a instanceof Array:"object"!==c||void 0!==a&&null!==a?"null"==c&&null===a||c==typeof a&&null!==a||"object"==c&&a===Object(a)||"array"==c&&Array.isArray&&Array.isArray(a)||Da.call(a).slice(8,-1).toLowerCase()==c:!1};c.createUUID=function(a,c){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a,c).toUpperCase()}}(/[xy]/g,function(a){var c=16*R.random()|0;return("x"==
a?c:c&3|8).toString(16)});var Q=c.clone=ja?function(a){if(Object(a)!==a)return a;var c=new a.constructor,b;for(b in a)"prototype"!==b&&a.hasOwnProperty(b)&&(c[b]=Q(a[b]));return c}:function(a){if(Object(a)!==a)return a;var c=new a.constructor,b;for(b in a)a.hasOwnProperty(b)&&(c[b]=Q(a[b]));return c};c._g=s;c.type=Ba.ENABLE_RED_CANVAS&&(Ba.CanvasRenderingContext2D||ba.createElement("canvas").getContext)?"CANVAS":Ba.SVGAngle||ba.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure",
"1.1")?"SVG":"VML";if("VML"==c.type){var wb=ba.createElement("div"),Wa;wb.innerHTML='<v:shape adj="1"/>';Wa=wb.firstChild;Wa.style.behavior="url(#default#VML)";if(!Wa||"object"!=typeof Wa.adj)return c.type="";wb=null}c.svg=!((c.vml="VML"==c.type)||(c.canvas="CANVAS"==c.type));c._Paper=ea;c._id=0;c._oid=0;c.angle=function(a,b,f,r,u,k){return null==u?(a-=f,b-=r,a||b?(R.atan2(-b,-a)*oa+540)%360:0):c.angle(a,b,u,k)-c.angle(f,r,u,k)};c.rad=function(a){return a%360*V};c.deg=function(a){return a*oa%360};
c.snapTo=function(a,c,b){var f;ra(b,"finite")||(b=10);if(ra(a,q))for(f=a.length;f--;){if(xa(a[f]-c)<=b)return a[f]}else{a=+a;f=c%a;if(f<b)return c-f;if(f>a-b)return c-f+a}return c};c.setWindow=function(a){p("raphael.setWindow",c,s.win,a);Ba=s.win=a;ba=s.doc=s.win.document;c._engine.initWin&&c._engine.initWin(s.win)};var Fa=function(a){if(c.vml){var b=/^\s+|\s+$/g,f;try{var r=new ActiveXObject("htmlfile");r.write("<body>");r.close();f=r.body}catch(u){f=createPopup().document.body}var k=f.createTextRange();
Fa=Oa(function(a){try{f.style.color=I(a).replace(b,"");var c=k.queryCommandValue("ForeColor");return"#"+("000000"+((c&255)<<16|c&65280|(c&16711680)>>>16).toString(16)).slice(-6)}catch(r){return"none"}})}else{var B=s.doc.createElement("i");B.title="Raphal Colour Picker";B.style.display="none";s.doc.body.appendChild(B);Fa=Oa(function(a){B.style.color=a;return s.doc.defaultView.getComputedStyle(B,"").getPropertyValue("color")})}return Fa(a)},gc=function(){return"hsb("+[this.h,this.s,this.b]+")"},hb=
function(){return"hsl("+[this.h,this.s,this.l]+")"},mb=function(){return this.hex},Ja=function(a,b,f){null==b&&ra(a,"object")&&"r"in a&&"g"in a&&"b"in a&&(f=a.b,b=a.g,a=a.r);null==b&&ra(a,"string")&&(f=c.getRGB(a),a=f.r,b=f.g,f=f.b);if(1<a||1<b||1<f)a/=255,b/=255,f/=255;return[a,b,f]},Zb=function(a,b,f,r){var u={r:a*=255,g:b*=255,b:f*=255,hex:c.rgb(a,b,f),toString:mb};ra(r,"finite")&&(u.opacity=r);return u};c.color=function(a){var b;c.is(a,"object")&&"h"in a&&"s"in a&&"b"in a?(b=c.hsb2rgb(a),a.r=
b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):c.is(a,"object")&&"h"in a&&"s"in a&&"l"in a?(b=c.hsl2rgb(a),a.r=b.r,a.g=b.g,a.b=b.b,a.hex=b.hex):(c.is(a,"string")&&(a=c.getRGB(a)),c.is(a,"object")&&"r"in a&&"g"in a&&"b"in a?(b=c.rgb2hsl(a),a.h=b.h,a.s=b.s,a.l=b.l,b=c.rgb2hsb(a),a.v=b.b):(a={hex:"none"},a.r=a.g=a.b=a.h=a.s=a.v=a.l=-1));a.toString=mb;return a};c.hsb2rgb=function(a,c,b,f){this.is(a,"object")&&"h"in a&&"s"in a&&"b"in a&&(b=a.b,c=a.s,a=a.h,f=a.o);var r,u,k;a=360*a%360/60;k=b*c;c=k*(1-xa(a%2-1));b=r=
u=b-k;a=~~a;b+=[k,c,0,0,c,k][a];r+=[c,k,k,c,0,0][a];u+=[0,0,c,k,k,c][a];return Zb(b,r,u,f)};c.hsl2rgb=function(a,c,b,f){this.is(a,"object")&&"h"in a&&"s"in a&&"l"in a&&(b=a.l,c=a.s,a=a.h);if(1<a||1<c||1<b)a/=360,c/=100,b/=100;var r,u,k;a=360*a%360/60;k=2*c*(.5>b?b:1-b);c=k*(1-xa(a%2-1));b=r=u=b-k/2;a=~~a;b+=[k,c,0,0,c,k][a];r+=[c,k,k,c,0,0][a];u+=[0,0,c,k,k,c][a];return Zb(b,r,u,f)};c.rgb2hsb=function(a,c,b){b=Ja(a,c,b);a=b[0];c=b[1];b=b[2];var f,r;f=Y(a,c,b);r=f-C(a,c,b);a=((0==r?null:f==a?(c-b)/
r:f==c?(b-a)/r+2:(a-c)/r+4)+360)%6*60/360;return{h:a,s:0==r?0:r/f,b:f,toString:gc}};c.rgb2hsl=function(a,c,b){b=Ja(a,c,b);a=b[0];c=b[1];b=b[2];var f,r,u;f=Y(a,c,b);r=C(a,c,b);u=f-r;a=((0==u?null:f==a?(c-b)/u:f==c?(b-a)/u+2:(a-c)/u+4)+360)%6*60/360;f=(f+r)/2;return{h:a,s:0==u?0:.5>f?u/(2*f):u/(2-2*f),l:f,toString:hb}};c._path2string=function(){return this.join(",").replace(yb,"$1")};var Oa=c._cacher=function(a,c,b){function f(){var r=J.call(arguments,0),u=r.join(""),k=f.cache=f.cache||{},B=f.count=
f.count||[];if(k.hasOwnProperty(u)){a:for(var r=B,B=u,F=0,e=r.length;F<e;F++)if(r[F]===B){r.push(r.splice(F,1)[0]);break a}return b?b(k[u]):k[u]}1E3<=B.length&&delete k[B.shift()];B.push(u);k[u]=a[M](c,r);return b?b(k[u]):k[u]}return f};c._preload=function(a,c){var b=ba.createElement("img");b.style.cssText="position:absolute;left:-9999em;top:-9999em";b.onload=function(){c.call(this);this.onload=null;ba.body.removeChild(this)};b.onerror=function(){ba.body.removeChild(this)};ba.body.appendChild(b);
b.src=a};c.getRGB=Oa(function(a){var b,f,r,u,k;a&&ra(a,"object")&&"opacity"in a&&(b=a.opacity);if(!a||(a=I(a)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:m};if("none"==a)return{r:-1,g:-1,b:-1,hex:"none",toString:m};!db.hasOwnProperty(a.toLowerCase().substring(0,2))&&"#"!==a.charAt()&&(a=Fa(a));if(a=a.match(Ka)){a[2]&&(u=t(a[2].substring(5),16),r=t(a[2].substring(3,5),16),f=t(a[2].substring(1,3),16));a[3]&&(u=t((k=a[3].charAt(3))+k,16),r=t((k=a[3].charAt(2))+k,16),f=t((k=a[3].charAt(1))+
k,16));a[4]&&(k=a[4].split(Ca),f=fa(k[0]),"%"==k[0].slice(-1)&&(f*=2.55),r=fa(k[1]),"%"==k[1].slice(-1)&&(r*=2.55),u=fa(k[2]),"%"==k[2].slice(-1)&&(u*=2.55),"rgba"==a[1].toLowerCase().slice(0,4)&&(b=fa(k[3])),k[3]&&"%"==k[3].slice(-1)&&(b/=100));if(a[5])return k=a[5].split(Ca),f=fa(k[0]),"%"==k[0].slice(-1)&&(f*=2.55),r=fa(k[1]),"%"==k[1].slice(-1)&&(r*=2.55),u=fa(k[2]),"%"==k[2].slice(-1)&&(u*=2.55),"deg"!=k[0].slice(-3)&&""!=k[0].slice(-1)||(f/=360),"hsba"==a[1].toLowerCase().slice(0,4)&&(b=fa(k[3])),
k[3]&&"%"==k[3].slice(-1)&&(b/=100),c.hsb2rgb(f,r,u,b);if(a[6])return k=a[6].split(Ca),f=fa(k[0]),"%"==k[0].slice(-1)&&(f*=2.55),r=fa(k[1]),"%"==k[1].slice(-1)&&(r*=2.55),u=fa(k[2]),"%"==k[2].slice(-1)&&(u*=2.55),"deg"!=k[0].slice(-3)&&""!=k[0].slice(-1)||(f/=360),"hsla"==a[1].toLowerCase().slice(0,4)&&(b=fa(k[3])),k[3]&&"%"==k[3].slice(-1)&&(b/=100),c.hsl2rgb(f,r,u,b);a={r:f,g:r,b:u,toString:m};a.hex="#"+(16777216|u|r<<8|f<<16).toString(16).slice(1);c.is(b,"finite")&&(a.opacity=b);return a}return{r:-1,
g:-1,b:-1,hex:"none",error:1,toString:m}},c);c.tintshade=Oa(function(a,b){var f=c.getRGB(a),r;r=255;0>b&&(b*=-1,r=0);1<b&&(b=1);r=0===b?f:{r:r-(r-f.r)*b,g:r-(r-f.g)*b,b:r-(r-f.b)*b,toString:m};r.hex=c.rgb(r.r,r.g,r.b);f.error&&(r.error=f.error);"opacity"in f?(r.rgba="rgba("+[r.r,r.g,r.b,f.opacity].join()+")",r.opacity=f.opacity):r.rgba="rgb("+[r.r,r.g,r.b].join()+")";return r},c);c.hsb=Oa(function(a,b,f){return c.hsb2rgb(a,b,f).hex});c.hsl=Oa(function(a,b,f){return c.hsl2rgb(a,b,f).hex});c.rgb=Oa(function(a,
c,b){return"#"+(16777216|b|c<<8|a<<16).toString(16).slice(1)});c.getColor=function(a){a=this.getColor.start=this.getColor.start||{h:0,s:1,b:a||.75};var c=this.hsb2rgb(a.h,a.s,a.b);a.h+=.075;1<a.h&&(a.h=0,a.s-=.2,0>=a.s&&(this.getColor.start={h:0,s:1,b:a.b}));return c.hex};c.getColor.reset=function(){delete this.start};c.parsePathString=function(a){if(!a)return null;var b=ca(a);if(b.arr)return Kb(b.arr);var f={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},r=[];c.is(a,q)&&c.is(a[0],q)&&(r=Kb(a));r.length||
I(a).replace(Fb,function(a,c,b){var u=[];a=c.toLowerCase();b.replace($a,function(a,c){c&&u.push(+c)});"m"==a&&2<u.length&&(r.push([c].concat(u.splice(0,2))),a="l",c="m"==c?"l":"L");if("r"==a)r.push([c].concat(u));else for(;u.length>=f[a]&&(r.push([c].concat(u.splice(0,f[a]))),f[a]););});r.toString=c._path2string;b.arr=Kb(r);return r};c.parseTransformString=Oa(function(a){if(!a)return null;var b=[];c.is(a,q)&&c.is(a[0],q)&&(b=Kb(a));b.length||I(a).replace(vb,function(a,c,f){var r=[];Ra.call(c);f.replace($a,
function(a,c){c&&r.push(+c)});b.push([c].concat(r))});b.toString=c._path2string;return b});var ca=function(a){var c=ca.ps=ca.ps||{};c[a]?c[a].sleep=100:c[a]={sleep:100};setTimeout(function(){for(var b in c)c.hasOwnProperty(b)&&b!=a&&(c[b].sleep--,!c[b].sleep&&delete c[b])});return c[a]};c.findDotsAtSegment=function(a,c,b,f,r,u,k,B,F){var e=1-F,d=Pa(e,3),t=Pa(e,2),g=F*F,O=g*F,A=d*a+3*t*F*b+3*e*F*F*r+O*k,d=d*c+3*t*F*f+3*e*F*F*u+O*B,t=a+2*F*(b-a)+g*(r-2*b+a),O=c+2*F*(f-c)+g*(u-2*f+c),q=b+2*F*(r-b)+g*
(k-2*r+b),g=f+2*F*(u-f)+g*(B-2*u+f);a=e*a+F*b;c=e*c+F*f;r=e*r+F*k;u=e*u+F*B;B=90-180*R.atan2(t-q,O-g)/ta;(t>q||O<g)&&(B+=180);return{x:A,y:d,m:{x:t,y:O},n:{x:q,y:g},start:{x:a,y:c},end:{x:r,y:u},alpha:B}};c.bezierBBox=function(a,b,f,r,k,B,F,e){c.is(a,"array")||(a=[a,b,f,r,k,B,F,e]);a=u.apply(null,a);return{x:a.min.x,y:a.min.y,x2:a.max.x,y2:a.max.y,width:a.max.x-a.min.x,height:a.max.y-a.min.y}};c.isPointInsideBBox=function(a,c,b){return c>=a.x&&c<=a.x2&&b>=a.y&&b<=a.y2};c.isBBoxIntersect=function(a,
b){var f=c.isPointInsideBBox;return f(b,a.x,a.y)||f(b,a.x2,a.y)||f(b,a.x,a.y2)||f(b,a.x2,a.y2)||f(a,b.x,b.y)||f(a,b.x2,b.y)||f(a,b.x,b.y2)||f(a,b.x2,b.y2)||(a.x<b.x2&&a.x>b.x||b.x<a.x2&&b.x>a.x)&&(a.y<b.y2&&a.y>b.y||b.y<a.y2&&b.y>a.y)};c.pathIntersection=function(a,c){return l(a,c)};c.pathIntersectionNumber=function(a,c){return l(a,c,1)};c.isPointInsidePath=function(a,b,f){var r=c.pathBBox(a);return c.isPointInsideBBox(r,b,f)&&(1==l(a,[["M",b,f],["H",r.x2+10]],1)%2||1==l(a,[["M",b,f],["V",r.y2+10]],
1)%2)};c._removedFactory=function(a){return function(){p("raphael.log",null,"Raphal: you are calling to method "+a+" of removed object",a)}};var hc=c.pathBBox=function(a){var c=ca(a);if(c.bbox)return c.bbox;if(!a)return{x:0,y:0,width:0,height:0,x2:0,y2:0};a=B(a);for(var b=0,f=0,r=[],k=[],F,e=0,d=a.length;e<d;e++)F=a[e],"M"==F[0]?(b=F[1],f=F[2],r.push(b),k.push(f)):(b=u(b,f,F[1],F[2],F[3],F[4],F[5],F[6]),r=r.concat(b.min.x,b.max.x),k=k.concat(b.min.y,b.max.y),b=F[5],f=F[6]);a=C[M](0,r);F=C[M](0,
k);r=Y[M](0,r);k=Y[M](0,k);k={x:a,y:F,x2:r,y2:k,width:r-a,height:k-F};c.bbox=Q(k);return k},Kb=function(a){a=Q(a);a.toString=c._path2string;return a},Sb=c._pathToRelative=function(a){var b=ca(a);if(b.rel)return Kb(b.rel);c.is(a,q)&&c.is(a&&a[0],q)||(a=c.parsePathString(a));var f=[],r=0,u=0,k=0,B=0,F=0;"M"==a[0][0]&&(r=a[0][1],u=a[0][2],k=r,B=u,F++,f.push(["M",r,u]));for(var e=a.length;F<e;F++){var d=f[F]=[],t=a[F];if(t[0]!=Ra.call(t[0]))switch(d[0]=Ra.call(t[0]),d[0]){case "a":d[1]=t[1];d[2]=t[2];
d[3]=t[3];d[4]=t[4];d[5]=t[5];d[6]=+(t[6]-r).toFixed(3);d[7]=+(t[7]-u).toFixed(3);break;case "v":d[1]=+(t[1]-u).toFixed(3);break;case "m":k=t[1],B=t[2];default:for(var g=1,O=t.length;g<O;g++)d[g]=+(t[g]-(g%2?r:u)).toFixed(3)}else for(f[F]=[],"m"==t[0]&&(k=t[1]+r,B=t[2]+u),d=0,g=t.length;d<g;d++)f[F][d]=t[d];t=f[F].length;switch(f[F][0]){case "z":r=k;u=B;break;case "h":r+=+f[F][t-1];break;case "v":u+=+f[F][t-1];break;default:r+=+f[F][t-2],u+=+f[F][t-1]}}f.toString=c._path2string;b.rel=Kb(f);return f},
Nb=c._pathToAbsolute=function(a){var f=ca(a),r;if(f.abs)return Kb(f.abs);c.is(a,q)&&c.is(a&&a[0],q)||(a=c.parsePathString(a));if(!a||!a.length)return r=["M",0,0],r.toString=c._path2string,r;var u=0,k=0,B=0,F=0,e=0;r=[];"M"==a[0][0]&&(u=+a[0][1],k=+a[0][2],B=u,F=k,e++,r[0]=["M",u,k]);for(var d=3==a.length&&"M"==a[0][0]&&"R"==a[1][0].toUpperCase()&&"Z"==a[2][0].toUpperCase(),t,g=e,O=a.length;g<O;g++){r.push(e=[]);t=a[g];if(t[0]!=ib.call(t[0]))switch(e[0]=ib.call(t[0]),e[0]){case "A":e[1]=t[1];e[2]=
t[2];e[3]=t[3];e[4]=t[4];e[5]=t[5];e[6]=+(t[6]+u);e[7]=+(t[7]+k);break;case "V":e[1]=+t[1]+k;break;case "H":e[1]=+t[1]+u;break;case "R":for(var A=[u,k].concat(t.slice(1)),h=2,X=A.length;h<X;h++)A[h]=+A[h]+u,A[++h]=+A[h]+k;r.pop();r=r.concat(b(A,d));break;case "M":B=+t[1]+u,F=+t[2]+k;default:for(h=1,X=t.length;h<X;h++)e[h]=+t[h]+(h%2?u:k)}else if("R"==t[0])A=[u,k].concat(t.slice(1)),r.pop(),r=r.concat(b(A,d)),e=["R"].concat(t.slice(-2));else for(A=0,h=t.length;A<h;A++)e[A]=t[A];switch(e[0]){case "Z":u=
B;k=F;break;case "H":u=e[1];break;case "V":k=e[1];break;case "M":B=e[e.length-2],F=e[e.length-1];default:u=e[e.length-2],k=e[e.length-1]}}r.toString=c._path2string;f.abs=Kb(r);return r},jb=function(a,c,b,f){return[a,c,b,f,b,f]},Ob=function(a,c,b,f,r,u){var k=1/3,B=2/3;return[k*a+B*b,k*c+B*f,k*r+B*b,k*u+B*f,r,u]},aa=function(a,c,b,f,r,u,k,B,F,e){var t=120*ta/180,d=V*(+r||0),g=[],O,A=Oa(function(a,c,b){var f=a*Ga(b)-c*qa(b);a=a*qa(b)+c*Ga(b);return{x:f,y:a}});if(e)X=e[0],O=e[1],u=e[2],h=e[3];else{O=
A(a,c,-d);a=O.x;c=O.y;O=A(B,F,-d);B=O.x;F=O.y;Ga(V*r);qa(V*r);O=(a-B)/2;X=(c-F)/2;h=O*O/(b*b)+X*X/(f*f);1<h&&(h=za(h),b*=h,f*=h);var h=b*b,q=f*f,h=(u==k?-1:1)*za(xa((h*q-h*X*X-q*O*O)/(h*X*X+q*O*O)));u=h*b*X/f+(a+B)/2;var h=h*-f*O/b+(c+F)/2,X=R.asin(((c-h)/f).toFixed(9));O=R.asin(((F-h)/f).toFixed(9));X=a<u?ta-X:X;O=B<u?ta-O:O;0>X&&(X=2*ta+X);0>O&&(O=2*ta+O);k&&X>O&&(X-=2*ta);!k&&O>X&&(O-=2*ta)}if(xa(O-X)>t){var g=O,q=B,l=F;O=X+t*(k&&O>X?1:-1);B=u+b*Ga(O);F=h+f*qa(O);g=aa(B,F,b,f,r,0,k,q,l,[O,g,u,
h])}u=O-X;r=Ga(X);t=qa(X);k=Ga(O);O=qa(O);u=R.tan(u/4);b=4/3*b*u;u*=4/3*f;f=[a,c];a=[a+b*t,c-u*r];c=[B+b*O,F-u*k];B=[B,F];a[0]=2*f[0]-a[0];a[1]=2*f[1]-a[1];if(e)return[a,c,B].concat(g);g=[a,c,B].concat(g).join().split(",");e=[];B=0;for(F=g.length;B<F;B++)e[B]=B%2?A(g[B-1],g[B],d).y:A(g[B],g[B+1],d).x;return e},r=function(a,c,b,f,r,u,k,B,F){var e=1-F;return{x:Pa(e,3)*a+3*Pa(e,2)*F*b+3*e*F*F*r+Pa(F,3)*k,y:Pa(e,3)*c+3*Pa(e,2)*F*f+3*e*F*F*u+Pa(F,3)*B}},u=Oa(function(a,c,b,f,u,k,B,F){var e=u-2*b+a-(B-
2*u+b),t=2*(b-a)-2*(u-b),d=a-b,g=(-t+za(t*t-4*e*d))/2/e,e=(-t-za(t*t-4*e*d))/2/e,O=[c,F],A=[a,B];"1e12"<xa(g)&&(g=.5);"1e12"<xa(e)&&(e=.5);0<g&&1>g&&(g=r(a,c,b,f,u,k,B,F,g),A.push(g.x),O.push(g.y));0<e&&1>e&&(g=r(a,c,b,f,u,k,B,F,e),A.push(g.x),O.push(g.y));e=k-2*f+c-(F-2*k+f);t=2*(f-c)-2*(k-f);d=c-f;g=(-t+za(t*t-4*e*d))/2/e;e=(-t-za(t*t-4*e*d))/2/e;"1e12"<xa(g)&&(g=.5);"1e12"<xa(e)&&(e=.5);0<g&&1>g&&(g=r(a,c,b,f,u,k,B,F,g),A.push(g.x),O.push(g.y));0<e&&1>e&&(g=r(a,c,b,f,u,k,B,F,e),A.push(g.x),O.push(g.y));
return{min:{x:C[M](0,A),y:C[M](0,O)},max:{x:Y[M](0,A),y:Y[M](0,O)}}}),B=c._path2curve=Oa(function(a,c){var b=!c&&ca(a);if(!c&&b.curve)return Kb(b.curve);var f=Nb(a),r=c&&Nb(c),u={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},k={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},B=function(a,c){var b,f;if(!a)return["C",c.x,c.y,c.x,c.y,c.x,c.y];a[0]in{T:1,Q:1}||(c.qx=c.qy=null);switch(a[0]){case "M":c.X=a[1];c.Y=a[2];break;case "A":a=["C"].concat(aa[M](0,[c.x,c.y].concat(a.slice(1))));break;case "S":b=c.x+(c.x-
(c.bx||c.x));f=c.y+(c.y-(c.by||c.y));a=["C",b,f].concat(a.slice(1));break;case "T":c.qx=c.x+(c.x-(c.qx||c.x));c.qy=c.y+(c.y-(c.qy||c.y));a=["C"].concat(Ob(c.x,c.y,c.qx,c.qy,a[1],a[2]));break;case "Q":c.qx=a[1];c.qy=a[2];a=["C"].concat(Ob(c.x,c.y,a[1],a[2],a[3],a[4]));break;case "L":a=["C"].concat(jb(c.x,c.y,a[1],a[2]));break;case "H":a=["C"].concat(jb(c.x,c.y,a[1],c.y));break;case "V":a=["C"].concat(jb(c.x,c.y,c.x,a[1]));break;case "Z":a=["C"].concat(jb(c.x,c.y,c.X,c.Y))}return a},F=function(a,c){if(7<
a[c].length){a[c].shift();for(var b=a[c];b.length;)a.splice(c++,0,["C"].concat(b.splice(0,6)));a.splice(c,1);d=Y(f.length,r&&r.length||0)}},e=function(a,c,b,u,k){a&&c&&"M"==a[k][0]&&"M"!=c[k][0]&&(c.splice(k,0,["M",u.x,u.y]),b.bx=0,b.by=0,b.x=a[k][1],b.y=a[k][2],d=Y(f.length,r&&r.length||0))},t=0,d=Y(f.length,r&&r.length||0);for(;t<d;t++){f[t]=B(f[t],u);F(f,t);r&&(r[t]=B(r[t],k));r&&F(r,t);e(f,r,u,k,t);e(r,f,k,u,t);var g=f[t],O=r&&r[t],A=g.length,h=r&&O.length;u.x=g[A-2];u.y=g[A-1];u.bx=fa(g[A-4])||
u.x;u.by=fa(g[A-3])||u.y;k.bx=r&&(fa(O[h-4])||k.x);k.by=r&&(fa(O[h-3])||k.y);k.x=r&&O[h-2];k.y=r&&O[h-1]}r||(b.curve=Kb(f));return r?[f,r]:f},null,Kb);c._parseDots=Oa(function(a){for(var b=[],f=0,r=a.length;f<r;f++){var u={},k=a[f].match(/^([^:]*):?([\d\.]*)/);u.color=c.getRGB(k[1]);if(u.color.error)return null;u.opacity=u.color.opacity;u.color=u.color.hex;k[2]&&(u.offset=k[2]+"%");b.push(u)}f=1;for(r=b.length-1;f<r;f++)if(!b[f].offset){a=fa(b[f-1].offset||0);k=0;for(u=f+1;u<r;u++)if(b[u].offset){k=
b[u].offset;break}k||(k=100,u=r);k=fa(k);for(k=(k-a)/(u-f+1);f<u;f++)a+=k,b[f].offset=a+"%"}return b});var F=c._tear=function(a,c){a==c.top&&(c.top=a.prev);a==c.bottom&&(c.bottom=a.next);a.next&&(a.next.prev=a.prev);a.prev&&(a.prev.next=a.next)};c._tofront=function(a,c){if(c.top===a)return!1;F(a,c);a.next=null;a.prev=c.top;c.top.next=a;c.top=a;return!0};c._toback=function(a,c){if(c.bottom===a)return!1;F(a,c);a.next=c.bottom;a.prev=null;c.bottom.prev=a;c.bottom=a;return!0};c._insertafter=function(a,
c,b,f){F(a,b);a.parent=f;c===f.top&&(f.top=a);c.next&&(c.next.prev=a);a.next=c.next;a.prev=c;c.next=a};c._insertbefore=function(a,c,b,f){F(a,b);a.parent=f;c===f.bottom&&(f.bottom=a);c.prev&&(c.prev.next=a);a.prev=c.prev;c.prev=a;a.next=c};var f=c.toMatrix=function(a,c){var b=hc(a),f={_:{transform:""},getBBox:function(){return b}};Ma(f,c);return f.matrix};c.transformPath=function(a,c){return ha(a,f(a,c))};var Ma=c._extractTransform=function(a,b){if(null==b)return a._.transform;b=I(b).replace(/\.{3}|\u2026/g,
a._.transform||"");var f=c.parseTransformString(b),r=0,u=0,k=0,B=1,F=1,e=a._,k=new P;e.transform=f||[];if(f)for(var u=0,t=f.length;u<t;u++){var d=f[u],g=d.length,O=I(d[0]).toLowerCase(),A=d[0]!=O,h=A?k.invert():0,q;"t"==O&&3==g?A?(g=h.x(0,0),O=h.y(0,0),A=h.x(d[1],d[2]),h=h.y(d[1],d[2]),k.translate(A-g,h-O)):k.translate(d[1],d[2]):"r"==O?2==g?(q=q||a.getBBox(1),k.rotate(d[1],q.x+q.width/2,q.y+q.height/2),r+=d[1]):4==g&&(A?(A=h.x(d[2],d[3]),h=h.y(d[2],d[3]),k.rotate(d[1],A,h)):k.rotate(d[1],d[2],d[3]),
r+=d[1]):"s"==O?2==g||3==g?(q=q||a.getBBox(1),k.scale(d[1],d[g-1],q.x+q.width/2,q.y+q.height/2),B*=d[1],F*=d[g-1]):5==g&&(A?(A=h.x(d[3],d[4]),h=h.y(d[3],d[4]),k.scale(d[1],d[2],A,h)):k.scale(d[1],d[2],d[3],d[4]),B*=d[1],F*=d[2]):"m"==O&&7==g&&k.add(d[1],d[2],d[3],d[4],d[5],d[6]);e.dirtyT=1;a.matrix=k}a.matrix=k;e.sx=B;e.sy=F;e.deg=r;e.dx=u=k.e;e.dy=k=k.f;1==B&&1==F&&!r&&e.bbox?(e.bbox.x+=+u,e.bbox.y+=+k):e.dirtyT=1},O=function(a){var c=a[0];switch(c.toLowerCase()){case "t":return[c,0,0];case "m":return[c,
1,0,0,1,0,0];case "r":return 4==a.length?[c,0,a[2],a[3]]:[c,0];case "s":return 5==a.length?[c,1,1,a[3],a[4]]:3==a.length?[c,1,1]:[c,1]}},X=c._equaliseTransform=function(a,b){b=I(b).replace(/\.{3}|\u2026/g,a);a=c.parseTransformString(a)||[];b=c.parseTransformString(b)||[];for(var f=Y(a.length,b.length),r=[],u=[],k=0,B,F,e,d;k<f;k++){e=a[k]||O(b[k]);d=b[k]||O(e);if(e[0]!=d[0]||"r"==e[0].toLowerCase()&&(e[2]!=d[2]||e[3]!=d[3])||"s"==e[0].toLowerCase()&&(e[3]!=d[3]||e[4]!=d[4]))return;r[k]=[];u[k]=[];
B=0;for(F=Y(e.length,d.length);B<F;B++)B in e&&(r[k][B]=e[B]),B in d&&(u[k][B]=d[B])}return{from:r,to:u}};c._getContainer=function(a,b,f,r){var u;u=null!=r||c.is(a,"object")?a:s.doc.getElementById(a);if(null!=u)return u.tagName?null==b?{container:u,width:u.style.pixelWidth||u.offsetWidth,height:u.style.pixelHeight||u.offsetHeight}:{container:u,width:b,height:f}:{container:1,x:a,y:b,width:f,height:r}};c.pathToRelative=Sb;c._engine={};c.path2curve=B;c.matrix=function(a,c,b,f,r,u){return new P(a,c,b,
f,r,u)};(function(a){function b(a){return a[0]*a[0]+a[1]*a[1]}function f(a){var c=za(b(a));a[0]&&(a[0]/=c);a[1]&&(a[1]/=c)}a.add=function(a,c,b,f,r,u){var k=[[],[],[]],B=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]];c=[[a,b,r],[c,f,u],[0,0,1]];a&&a instanceof P&&(c=[[a.a,a.c,a.e],[a.b,a.d,a.f],[0,0,1]]);for(a=0;3>a;a++)for(b=0;3>b;b++){for(f=r=0;3>f;f++)r+=B[a][f]*c[f][b];k[a][b]=r}this.a=k[0][0];this.b=k[1][0];this.c=k[0][1];this.d=k[1][1];this.e=k[0][2];this.f=k[1][2]};a.invert=function(){var a=
this.a*this.d-this.b*this.c;return new P(this.d/a,-this.b/a,-this.c/a,this.a/a,(this.c*this.f-this.d*this.e)/a,(this.b*this.e-this.a*this.f)/a)};a.clone=function(){return new P(this.a,this.b,this.c,this.d,this.e,this.f)};a.translate=function(a,c){this.add(1,0,0,1,a,c)};a.scale=function(a,c,b,f){null==c&&(c=a);(b||f)&&this.add(1,0,0,1,b,f);this.add(a,0,0,c,0,0);(b||f)&&this.add(1,0,0,1,-b,-f)};a.rotate=function(a,b,f){a=c.rad(a);b=b||0;f=f||0;var r=+Ga(a).toFixed(9);a=+qa(a).toFixed(9);this.add(r,
a,-a,r,b,f);this.add(1,0,0,1,-b,-f)};a.x=function(a,c){return a*this.a+c*this.c+this.e};a.y=function(a,c){return a*this.b+c*this.d+this.f};a.get=function(a){return+this[I.fromCharCode(97+a)].toFixed(4)};a.toString=function(){return c.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()};a.toMatrixString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+
")"};a.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"};a.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]};a.split=function(){var a={};a.dx=this.e;a.dy=this.f;var r=[[this.a,this.c],[this.b,this.d]];a.scalex=za(b(r[0]));f(r[0]);a.shear=r[0][0]*r[1][0]+r[0][1]*r[1][1];r[1]=[r[1][0]-r[0][0]*a.shear,r[1][1]-r[0][1]*
a.shear];a.scaley=za(b(r[1]));f(r[1]);a.shear/=a.scaley;var u=-r[0][1],r=r[1][1];0>r?(a.rotate=c.deg(R.acos(r)),0>u&&(a.rotate=360-a.rotate)):a.rotate=c.deg(R.asin(u));a.isSimple=!+a.shear.toFixed(9)&&(a.scalex.toFixed(9)==a.scaley.toFixed(9)||!a.rotate);a.isSuperSimple=!+a.shear.toFixed(9)&&a.scalex.toFixed(9)==a.scaley.toFixed(9)&&!a.rotate;a.noRotation=!+a.shear.toFixed(9)&&!a.rotate;return a};a.toTransformString=function(a){a=a||this.split();return a.isSimple?(a.scalex=+a.scalex.toFixed(4),a.scaley=
+a.scaley.toFixed(4),a.rotate=+a.rotate.toFixed(4),(a.dx||a.dy?"t"+[a.dx,a.dy]:"")+(1!=a.scalex||1!=a.scaley?"s"+[a.scalex,a.scaley,0,0]:"")+(a.rotate?"r"+[a.rotate,0,0]:"")):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}})(P.prototype);var pb=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);"Apple Computer, Inc."==navigator.vendor&&(pb&&4>pb[1]||"iP"==navigator.platform.slice(0,2))||"Google Inc."==navigator.vendor&&pb&&8>pb[1]?
pa.safari=function(){var a=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){a.remove()});return!0}:pa.safari=T;for(var qb=function(){this.returnValue=!1},ua=function(){return this.originalEvent.preventDefault()},tc=function(){this.cancelBubble=!0},Hc=function(){return this.originalEvent.stopPropagation()},va=c.addEvent=function(){if(s.doc.addEventListener)return function(a,c,b,f){var r=la&&L[c]?L[c]:c,u=function(r){var u=s.doc.documentElement.scrollTop||
s.doc.body.scrollTop,k=s.doc.documentElement.scrollLeft||s.doc.body.scrollLeft;if(la&&L.hasOwnProperty(c))for(var B=0,F=r.targetTouches&&r.targetTouches.length;B<F;B++)if(r.targetTouches[B].target==a){F=r;r=r.targetTouches[B];r.originalEvent=F;r.preventDefault=ua;r.stopPropagation=Hc;break}return b.call(f,r,r.clientX+k,r.clientY+u)};a.addEventListener(r,u,!1);return function(){a.removeEventListener(r,u,!1);return!0}};if(s.doc.attachEvent)return function(a,c,b,f){var r=function(a){a=a||s.win.event;
var c=a.clientX+(s.doc.documentElement.scrollLeft||s.doc.body.scrollLeft),r=a.clientY+(s.doc.documentElement.scrollTop||s.doc.body.scrollTop);a.preventDefault=a.preventDefault||qb;a.stopPropagation=a.stopPropagation||tc;return b.call(f,a,c,r)};a.attachEvent("on"+c,r);return function(){a.detachEvent("on"+c,r);return!0}}}(),ac=[],cd=function(a){for(var b=a.clientX,f=a.clientY,r=s.doc.documentElement.scrollTop||s.doc.body.scrollTop,u=s.doc.documentElement.scrollLeft||s.doc.body.scrollLeft,k,B=ac.length;B--;){k=
ac[B];if(la)for(var F=a.touches.length,e;F--;){if(e=a.touches[F],e.identifier==k.el._drag.id){b=e.clientX;f=e.clientY;(a.originalEvent?a.originalEvent:a).preventDefault();break}}else a.preventDefault();if(!k.el.removed){var F=c._engine.getNode(k.el),d=F.nextSibling,t=F.parentNode,g=F.style.display;s.win.opera&&t.removeChild(F);F.style.display="none";e=k.el.paper.getElementByPoint(b,f);F.style.display=g;s.win.opera&&(d?t.insertBefore(F,d):t.appendChild(F));e&&p("raphael.drag.over."+k.el.id,k.el,e);
b+=u;f+=r;p("raphael.drag.move."+k.el.id,k.move_scope||k.el,b-k.el._drag.x,f-k.el._drag.y,b,f,a)}}},dd=function(a){c.unmousemove(cd).unmouseup(dd);for(var b=ac.length,f;b--;)f=ac[b],f.el._drag={},p("raphael.drag.end."+f.el.id,f.end_scope||f.start_scope||f.move_scope||f.el,a);ac=[]},ka=c.el={},kd=ma.length;kd--;)(function(a){c[a]=ka[a]=function(b,f){c.is(b,"function")&&(this.events=this.events||[],this.events.push({name:a,f:b,unbind:va(this.shape||this.node||s.doc,a,b,f||this)}));return this};c["un"+
a]=ka["un"+a]=function(c){for(var b=this.events||[],f=b.length;f--;)if(b[f].name==a&&b[f].f==c){b[f].unbind();b.splice(f,1);!b.length&&delete this.events;break}return this}})(ma[kd]);ka.data=function(a,b){var f=E[this.id]=E[this.id]||{};if(1==arguments.length){if(c.is(a,"object")){for(var r in a)a.hasOwnProperty(r)&&this.data(r,a[r]);return this}p("raphael.data.get."+this.id,this,f[a],a);return f[a]}f[a]=b;p("raphael.data.set."+this.id,this,b,a);return this};ka.removeData=function(a){null==a?delete E[this.id]:
E[this.id]&&delete E[this.id][a];return this};ka.getData=function(){return Q(E[this.id]||{})};var Pb=[],pd=function(){this.untrack=va(s.doc,"mouseup",od,this)},od=function(){this.untrack();this.untrack=null;return this.fn&&this.fn.apply(this.scope||this.el,arguments)};ka.mouseup=function(a,b,f){if(!f)return c.mouseup.apply(this,arguments);Pb.push(f={el:this,fn:a,scope:b});f.unbind=va(this.shape||this.node||s.doc,"mousedown",pd,f);return this};ka.unmouseup=function(a){for(var b=Pb.length,f;b--;)Pb[b].el===
this&&Pb[b].fn===a&&(f=Pb[b],f.unbind(),f.untrack&&f.untrack(),Pb.splice(b,1));return f?this:c.unmouseup.apply(this,arguments)};ka.hover=function(a,c,b,f){return this.mouseover(a,b).mouseout(c,f||b)};ka.unhover=function(a,c){return this.unmouseover(a).unmouseout(c)};var Ic=[];ka.drag=function(a,b,f,r,u,k){function B(F){(F.originalEvent||F).preventDefault();var e=s.doc.documentElement.scrollTop||s.doc.body.scrollTop,d=s.doc.documentElement.scrollLeft||s.doc.body.scrollLeft;this._drag.x=F.clientX+d;
this._drag.y=F.clientY+e;this._drag.id=F.identifier;!ac.length&&c.mousemove(cd).mouseup(dd);ac.push({el:this,move_scope:r,start_scope:u,end_scope:k});b&&p.on("raphael.drag.start."+this.id,b);a&&p.on("raphael.drag.move."+this.id,a);f&&p.on("raphael.drag.end."+this.id,f);p("raphael.drag.start."+this.id,u||r||this,F.clientX+d,F.clientY+e,F)}this._drag={};Ic.push({el:this,start:B});this.mousedown(B);return this};ka.onDragOver=function(a){a?p.on("raphael.drag.over."+this.id,a):p.unbind("raphael.drag.over."+
this.id)};ka.undrag=function(){for(var a=Ic.length;a--;)Ic[a].el==this&&(this.unmousedown(Ic[a].start),Ic.splice(a,1),p.unbind("raphael.drag.*."+this.id));!Ic.length&&c.unmousemove(cd).unmouseup(dd);delete this._drag};ka.follow=function(a,b,f){if(a.removed||a.constructor!==c.el.constructor)return this;a.followers.push({el:this,stalk:f={before:"insertBefore",after:"insertAfter"}[f],cb:b});f&&this[f](a);return this};ka.unfollow=function(a){if(a.removed||a.constructor!==c.el.constructor)return this;
for(var b=0,f=a.followers.length;b<f;b++)if(a.followers[b].el===this){a.followers.splice(b,1);break}return this};pa.hide=function(){this.canvas.style.visibility="hidden";return this};pa.show=function(){this.canvas.style.visibility="";return this};pa.group=function(){var a=arguments,b=Na(a,!0),a=c._engine.group(this,a[0],b);return this.__set__&&this.__set__.push(a),this._elementsById[a.id]=a};pa.circle=function(){var a=arguments,b=Na(a,!0),a=sa(a,"cx",0,"cy",0,"r",0,"fill","none","stroke","#000"),
b=c._engine.circle(this,a,b);return this.__set__&&this.__set__.push(b),this._elementsById[b.id]=b};pa.rect=function(){var a=arguments,b=Na(a,!0),a=sa(a,"x",0,"y",0,"width",0,"height",0,"r",0,"fill","none","stroke","#000"),b=c._engine.rect(this,a,b);return this.__set__&&this.__set__.push(b),this._elementsById[b.id]=b};pa.ellipse=function(){var a=arguments,b=Na(a,!0),a=sa(a,"x",0,"y",0,"rx",0,"ry",0,"fill","none","stroke","#000"),b=c._engine.ellipse(this,a,b);return this.__set__&&this.__set__.push(b),
this._elementsById[b.id]=b};pa.path=function(){var a=arguments,b=Na(a,!0),a=sa(a,"path","","fill","none","stroke","#000"),b=c._engine.path(this,a,b);return this.__set__&&this.__set__.push(b),this._elementsById[b.id]=b};pa.image=function(){var a=arguments,b=Na(a,!0),a=sa(a,"src","about:blank","x",0,"y",0,"width",0,"height",0);out=c._engine.image(this,a,b);return this.__set__&&this.__set__.push(out),this._elementsById[out.id]=out};pa.text=function(){var a=arguments,b=Na(a,!0),a=sa(a,"x",0,"y",0,"text",
"","stroke","none","fill","#000","text-anchor","middle","vertical-align","middle"),b=c._engine.text(this,a,b);return this.__set__&&this.__set__.push(b),this._elementsById[b.id]=b};pa.set=function(a){!c.is(a,"array")&&(a=w.call(arguments,0,arguments.length));var b=new ic(a);this.__set__&&this.__set__.push(b);return b};pa.setStart=function(a){this.__set__=a||this.set()};pa.setFinish=function(a){a=this.__set__;delete this.__set__;return a};pa.setSize=function(a,b){return c._engine.setSize.call(this,
a,b)};pa.setViewBox=function(a,b,f,r,u){return c._engine.setViewBox.call(this,a,b,f,r,u)};pa.top=pa.bottom=null;pa.raphael=c;pa.getElementByPoint=function(a,c){var b,f,r=this.canvas,u=s.doc.elementFromPoint(a,c);if(s.win.opera&&"svg"==u.tagName){f=r.getBoundingClientRect();b=r.ownerDocument;var k=b.body,B=b.documentElement;b=f.top+(s.win.pageYOffset||B.scrollTop||k.scrollTop)-(B.clientTop||k.clientTop||0);f=f.left+(s.win.pageXOffset||B.scrollLeft||k.scrollLeft)-(B.clientLeft||k.clientLeft||0);k=r.createSVGRect();
k.x=a-f;k.y=c-b;k.width=k.height=1;b=r.getIntersectionList(k,null);b.length&&(u=b[b.length-1])}if(!u)return null;for(;u.parentNode&&u!=r.parentNode&&!u.raphael;)u=u.parentNode;u==this.canvas.parentNode&&(u=r);return u=u&&u.raphael?this.getById(u.raphaelid):null};pa.getElementsByBBox=function(a){var b=this.set();this.forEach(function(f){c.isBBoxIntersect(f.getBBox(),a)&&b.push(f)});return b};pa.getById=function(a){return this._elementsById[a]||null};pa.forEach=function(a,c){for(var b=this.bottom;b&&
!1!==a.call(c,b);)b=b.next;return this};pa.getElementsByPoint=function(a,c){var b=this.set();this.forEach(function(f){f.isPointInside(a,c)&&b.push(f)});return b};ka.isPointInside=function(a,b){var f=this.realPath=this.realPath||ia[this.type](this),r;return c.isPointInsidePath((r=this.attr("transform"))&&r.length&&c.transformPath(f,r)||f,a,b)};ka.getBBox=function(a){if(this.removed)return{};var c=this._;if(a){if(c.dirty||!c.bboxwt)this.realPath=ia[this.type](this),c.bboxwt=hc(this.realPath),c.bboxwt.toString=
N,c.dirty=0;return c.bboxwt}if(c.dirty||c.dirtyT||!c.bbox){if(c.dirty||!this.realPath)c.bboxwt=0,this.realPath=ia[this.type](this);c.bbox=hc(ha(this.realPath,this.matrix));c.bbox.toString=N;c.dirty=c.dirtyT=0}return c.bbox};ka.clone=function(){if(this.removed)return null;var a=this.paper[this.type]().attr(this.attr());this.__set__&&this.__set__.push(a);return a};ka.glow=function(a){if("text"==this.type)return null;a=a||{};var c=(a.width||10)+(+this.attr("stroke-width")||1),b=a.fill||!1,f=a.opacity||
.5,r=a.offsetx||0,u=a.offsety||0;a=a.color||"#000";for(var k=c/2,B=this.paper,F=B.set(),e=this.realPath||ia[this.type](this),e=this.matrix?ha(e,this.matrix):e,d=1;d<k+1;d++)F.push(B.path(e).attr({stroke:a,fill:b?a:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(c/k*d).toFixed(3),opacity:+(f/k).toFixed(3)}));return F.insertBefore(this).translate(r,u)};var ed=function(b,f,r,u,k,B,F,e,d){return null==d?G(b,f,r,u,k,B,F,e):c.findDotsAtSegment(b,f,r,u,k,B,F,e,a(b,f,r,u,k,B,F,
e,d))},fd=function(a,b){return function(f,r,u){f=B(f);for(var k,F,e,d,t="",g={},O=0,A=0,h=f.length;A<h;A++){e=f[A];if("M"==e[0])k=+e[1],F=+e[2];else{d=ed(k,F,e[1],e[2],e[3],e[4],e[5],e[6]);if(O+d>r){if(b&&!g.start){k=ed(k,F,e[1],e[2],e[3],e[4],e[5],e[6],r-O);t+=["C"+k.start.x,k.start.y,k.m.x,k.m.y,k.x,k.y];if(u)return t;g.start=t;t=["M"+k.x,k.y+"C"+k.n.x,k.n.y,k.end.x,k.end.y,e[5],e[6]].join();O+=d;k=+e[5];F=+e[6];continue}if(!a&&!b)return k=ed(k,F,e[1],e[2],e[3],e[4],e[5],e[6],r-O),{x:k.x,y:k.y,
alpha:k.alpha}}O+=d;k=+e[5];F=+e[6]}t+=e.shift()+e}g.end=t;k=a?O:b?g:c.findDotsAtSegment(k,F,e[0],e[1],e[2],e[3],e[4],e[5],1);k.alpha&&(k={x:k.x,y:k.y,alpha:k.alpha});return k}},Pc=fd(1),Db=fd(),bb=fd(0,1);c.getTotalLength=Pc;c.getPointAtLength=Db;c.getSubpath=function(a,c,b){if(1E-6>this.getTotalLength(a)-b)return bb(a,c).end;a=bb(a,b,1);return c?bb(a,c).end:a};ka.getTotalLength=function(){if("path"==this.type)return this.node.getTotalLength?this.node.getTotalLength():Pc(this.attrs.path)};ka.getPointAtLength=
function(a){if("path"==this.type)return Db(this.attrs.path,a)};ka.getSubpath=function(a,b){if("path"==this.type)return c.getSubpath(this.attrs.path,a,b)};var Va=c.easing_formulas={linear:function(a){return a},"<":function(a){return Pa(a,1.7)},">":function(a){return Pa(a,.48)},"<>":function(a){var c=.48-a/1.04,b=za(.1734+c*c);a=b-c;a=Pa(xa(a),1/3)*(0>a?-1:1);c=-b-c;c=Pa(xa(c),1/3)*(0>c?-1:1);a=a+c+.5;return 3*(1-a)*a*a+a*a*a},backIn:function(a){return a*a*(2.70158*a-1.70158)},backOut:function(a){a-=
1;return a*a*(2.70158*a+1.70158)+1},elastic:function(a){return a==!!a?a:Pa(2,-10*a)*qa(2*(a-.075)*ta/.3)+1},bounce:function(a){a<1/2.75?a*=7.5625*a:a<2/2.75?(a-=1.5/2.75,a=7.5625*a*a+.75):a<2.5/2.75?(a-=2.25/2.75,a=7.5625*a*a+.9375):(a-=2.625/2.75,a=7.5625*a*a+.984375);return a}};Va.easeIn=Va["ease-in"]=Va["<"];Va.easeOut=Va["ease-out"]=Va[">"];Va.easeInOut=Va["ease-in-out"]=Va["<>"];Va["back-in"]=Va.backIn;Va["back-out"]=Va.backOut;var La=[],jd=d.requestAnimationFrame||d.webkitRequestAnimationFrame||
d.mozRequestAnimationFrame||d.oRequestAnimationFrame||d.msRequestAnimationFrame||function(a){setTimeout(a,16)},bd=function(){for(var a=+new Date,b=0;b<La.length;b++){var f=La[b];if(!f.el.removed&&!f.paused){var r=a-f.start,u=f.ms,B=f.easing,F=f.from,d=f.diff,t=f.to,g=f.el,O={},A,h={},q;f.initstatus?(r=(f.initstatus*f.anim.top-f.prev)/(f.percent-f.prev)*u,f.status=f.initstatus,delete f.initstatus,f.stop&&La.splice(b--,1)):f.status=(f.prev+r/u*(f.percent-f.prev))/f.anim.top;if(!(0>r))if(r<u){var X=
B(r/u),l;for(l in F)if(F.hasOwnProperty(l)){switch(k[l]){case H:A=+F[l]+X*u*d[l];break;case "colour":A="rgb("+[fb(ya(F[l].r+X*u*d[l].r)),fb(ya(F[l].g+X*u*d[l].g)),fb(ya(F[l].b+X*u*d[l].b))].join()+")";break;case "path":A=[];r=0;for(B=F[l].length;r<B;r++){A[r]=[F[l][r][0]];t=1;for(h=F[l][r].length;t<h;t++)A[r][t]=(+F[l][r][t]+X*u*d[l][r][t]).toFixed(4);A[r]=A[r].join(" ")}A=A.join(" ");break;case "transform":if(d[l].real)for(A=[],r=0,B=F[l].length;r<B;r++)for(A[r]=[F[l][r][0]],t=1,h=F[l][r].length;t<
h;t++)A[r][t]=F[l][r][t]+X*u*d[l][r][t];else A=function(a){return+F[l][a]+X*u*d[l][a]},A=[["m",A(0),A(1),A(2),A(3),A(4),A(5)]];break;case "csv":if("clip-rect"==l)for(A=[],r=4;r--;)A[r]=+F[l][r]+X*u*d[l][r];break;default:for(B=[].concat(F[l]),A=[],r=g.ca[l].length;r--;)A[r]=+B[r]+X*u*d[l][r]}O[l]=A}g.attr(O);(function(a,c,b){setTimeout(function(){p("raphael.anim.frame."+a,c,b)})})(g.id,g,f.anim)}else{(function(a,b,f){setTimeout(function(){p("raphael.anim.frame."+b.id,b,f);p("raphael.anim.finish."+
b.id,b,f);c.is(a,"function")&&a.call(b)})})(f.callback,g,f.anim);g.attr(t);La.splice(b--,1);if(1<f.repeat&&!f.next){for(q in t)t.hasOwnProperty(q)&&(h[q]=f.totalOrigin[q]);f.el.attr(h);e(f.anim,f.el,f.anim.percents[0],null,f.totalOrigin,f.repeat-1)}f.next&&!f.stop&&e(f.anim,f.el,f.next,null,f.totalOrigin,f.repeat)}}}c.svg&&g&&g.paper&&g.paper.safari();La.length&&jd(bd)},fb=function(a){return 255<a?255:0>a?0:a};ka.animateWith=function(a,b,f,r,u,k){if(this.removed)return k&&k.call(this),this;f=f instanceof
g?f:c.animation(f,r,u,k);e(f,this,f.percents[0],null,this.attr());f=0;for(r=La.length;f<r;f++)if(La[f].anim==b&&La[f].el==a){La[r-1].start=La[f].start;break}return this};ka.onAnimation=function(a){a?p.on("raphael.anim.frame."+this.id,a):p.unbind("raphael.anim.frame."+this.id);return this};g.prototype.delay=function(a){var c=new g(this.anim,this.ms);c.times=this.times;c.del=+a||0;return c};g.prototype.repeat=function(a){var c=new g(this.anim,this.ms);c.del=this.del;c.times=R.floor(Y(a,0))||1;return c};
c.animation=function(a,b,f,r){if(a instanceof g)return a;if(c.is(f,"function")||!f)r=r||f||null,f=null;a=Object(a);b=+b||0;var u={},k,B;for(B in a)a.hasOwnProperty(B)&&fa(B)!=B&&fa(B)+"%"!=B&&(k=!0,u[B]=a[B]);return k?(f&&(u.easing=f),r&&(u.callback=r),new g({100:u},b)):new g(a,b)};ka.animate=function(a,b,f,r){if(this.removed)return r&&r.call(this),this;a=a instanceof g?a:c.animation(a,b,f,r);e(a,this,a.percents[0],null,this.attr());return this};ka.setTime=function(a,c){a&&null!=c&&this.status(a,
C(c,a.ms)/a.ms);return this};ka.status=function(a,c){var b=[],f=0,r,u;if(null!=c)return e(a,this,-1,C(c,1)),this;for(r=La.length;f<r;f++)if(u=La[f],u.el.id==this.id&&(!a||u.anim==a)){if(a)return u.status;b.push({anim:u.anim,status:u.status})}return a?0:b};ka.pause=function(a){for(var c=0;c<La.length;c++)La[c].el.id!=this.id||a&&La[c].anim!=a||!1===p("raphael.anim.pause."+this.id,this,La[c].anim)||(La[c].paused=!0);return this};ka.resume=function(a){for(var c=0;c<La.length;c++)if(La[c].el.id==this.id&&
(!a||La[c].anim==a)){var b=La[c];!1!==p("raphael.anim.resume."+this.id,this,b.anim)&&(delete b.paused,this.status(b.anim,b.status))}return this};ka.stop=function(a){for(var c=0;c<La.length;c++)La[c].el.id!=this.id||a&&La[c].anim!=a||!1!==p("raphael.anim.stop."+this.id,this,La[c].anim)&&La.splice(c--,1);return this};p.on("raphael.remove",h);p.on("raphael.clear",h);ka.toString=function(){return"Raphals object"};ka.toFront=function(){if(this.removed)return this;var a=c._engine.getNode(this),b=this.parent,
f=this.followers,r;c._tofront(this,b)&&b.canvas.appendChild(a);a=0;for(b=f.length;a<b;a++)(r=f[a]).stalk&&r.el[r.stalk](this);return this};ka.toBack=function(){if(this.removed)return this;var a=c._engine.getNode(this),b=this.parent,f=this.followers,r;c._toback(this,b)&&b.canvas.insertBefore(a,b.canvas.firstChild);a=0;for(b=f.length;a<b;a++)(r=f[a]).stalk&&r.el[r.stalk](this);return this};ka.insertAfter=function(a){if(this.removed)return this;var b=c._engine.getNode(this),f=c._engine.getLastNode(a),
r=a.parent.canvas,u=this.followers,k;f.nextSibling?r.insertBefore(b,f.nextSibling):r.appendChild(b);c._insertafter(this,a,this.parent,a.parent);b=0;for(f=u.length;b<f;b++)(k=u[b]).stalk&&k.el[k.stalk](a);return this};ka.insertBefore=function(a){if(this.removed)return this;var b=c._engine.getNode(this),f=c._engine.getNode(a),r=this.followers,u;a.parent.canvas.insertBefore(b,f);c._insertbefore(this,a,this.parent,a.parent);this.parent=a.parent;b=0;for(f=r.length;b<f;b++)(u=r[b]).stalk&&u.el[u.stalk](a);
return this};ka.appendChild=function(a){if(this.removed||"group"!==this.type)return this;var b=this.followers,f,r,u;if(a.parent===this)return a.toFront(),this;r=c._engine.getNode(a);c._tear(a,a.parent);this.canvas.appendChild(r);a.parent=this;!this.bottom&&(this.bottom=a);a.prev=this.top;a.next=null;this.top&&(this.top.next=a);this.top=a;r=0;for(u=b.length;r<u;r++)(f=b[r]).stalk&&f.el[f.stalk](a);return this};ka.removeChild=function(a){if(this.removed||"group"!==this.type||a.parent!==this)return this;
var b=c._engine.getNode(a),f=this.paper;c._tear(a,this);f.canvas.appendChild(b);this.parent=f;!f.bottom&&(f.bottom=this);(this.prev=f.top)&&(f.top.next=this);f.top=this;this.next=null;return this};var ic=function(a){this.items=[];this.length=0;this.type="set";if(a)for(var c=0,b=a.length;c<b;c++)!a[c]||a[c].constructor!=ka.constructor&&a[c].constructor!=ic||(this[this.items.length]=this.items[this.items.length]=a[c],this.length++)},gb=ic.prototype;gb.push=function(){for(var a,c,b=0,f=arguments.length;b<
f;b++)!(a=arguments[b])||a.constructor!=ka.constructor&&a.constructor!=ic||(c=this.items.length,this[c]=this.items[c]=a,this.length++);return this};gb.pop=function(){this.length&&delete this[this.length--];return this.items.pop()};gb.forEach=function(a,c){for(var b=0,f=this.items.length;b<f&&!1!==a.call(c,this.items[b],b);b++);return this};for(var gd in ka)ka.hasOwnProperty(gd)&&(gb[gd]=function(a){return function(){var c=arguments;return this.forEach(function(b){b[a][M](b,c)})}}(gd));gb.attr=function(a,
b){if(a&&c.is(a,q)&&c.is(a[0],"object"))for(var f=0,r=a.length;f<r;f++)this.items[f].attr(a[f]);else for(f=0,r=this.items.length;f<r;f++)this.items[f].attr(a,b);return this};gb.clear=function(){for(;this.length;)this.pop()};gb.splice=function(a,c,b){a=0>a?Y(this.length+a,0):a;c=Y(0,C(this.length-a,isNaN(c)&&this.length||c));var f=[],r=[],u=[],k;for(k=2;k<arguments.length;k++)u.push(arguments[k]);for(k=0;k<c;k++)r.push(this[a+k]);for(;k<this.length-a;k++)f.push(this[a+k]);var B=u.length;for(k=0;k<
B+f.length;k++)this.items[a+k]=this[a+k]=k<B?u[k]:f[k-B];for(k=this.items.length=this.length-=c-B;this[k];)delete this[k++];return new ic(r)};gb.exclude=function(a){for(var c=0,b=this.length;c<b;c++)if(this[c]==a)return this.splice(c,1),!0};gb.animate=function(a,b,f,r){!c.is(f,"function")&&f||(r=f||null);var u=this.items.length,k=u,B=this,F;if(!u)return this;r&&(F=function(){!--u&&r.call(B)});f=c.is(f,"string")?f:F;b=c.animation(a,b,f,F);for(a=this.items[--k].animate(b);k--;)this.items[k]&&!this.items[k].removed&&
this.items[k].animateWith(a,b,b);return this};gb.insertAfter=function(a){for(var c=this.items.length;c--;)this.items[c].insertAfter(a);return this};gb.getBBox=function(){for(var a=[],c=[],b=[],f=[],r=this.items.length;r--;)if(!this.items[r].removed){var u=this.items[r].getBBox();a.push(u.x);c.push(u.y);b.push(u.x+u.width);f.push(u.y+u.height)}a=C[M](0,a);c=C[M](0,c);b=Y[M](0,b);f=Y[M](0,f);return{x:a,y:c,x2:b,y2:f,width:b-a,height:f-c}};gb.clone=function(a){a=new ic;for(var c=0,b=this.items.length;c<
b;c++)a.push(this.items[c].clone());return a};gb.toString=function(){return"Raphals set"};gb.glow=function(a){var c=this.paper.set();this.forEach(function(b,f){var r=b.glow(a);null!=r&&r.forEach(function(a,b){c.push(a)})});return c};c.registerFont=function(a){if(!a.face)return a;this.fonts=this.fonts||{};var c={w:a.w,face:{},glyphs:{}},b=a.face["font-family"],f;for(f in a.face)a.face.hasOwnProperty(f)&&(c.face[f]=a.face[f]);this.fonts[b]?this.fonts[b].push(c):this.fonts[b]=[c];if(!a.svg){c.face["units-per-em"]=
t(a.face["units-per-em"],10);for(var r in a.glyphs)if(a.glyphs.hasOwnProperty(r)&&(b=a.glyphs[r],c.glyphs[r]={w:b.w,k:{},d:b.d&&"M"+b.d.replace(/[mlcxtrv]/g,function(a){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[a]||"M"})+"z"},b.k))for(var u in b.k)b.hasOwnProperty(u)&&(c.glyphs[r].k[u]=b.k[u])}return a};pa.getFont=function(a,b,f,r){r=r||"normal";f=f||"normal";b=+b||{normal:400,bold:700,lighter:300,bolder:800}[b]||400;if(c.fonts){var u=c.fonts[a];if(!u){a=new RegExp("(^|\\s)"+a.replace(/[^\w\d\s+!~.:_-]/g,
"")+"(\\s|$)","i");for(var k in c.fonts)if(c.fonts.hasOwnProperty(k)&&a.test(k)){u=c.fonts[k];break}}var B;if(u)for(k=0,a=u.length;k<a&&(B=u[k],B.face["font-weight"]!=b||B.face["font-style"]!=f&&B.face["font-style"]||B.face["font-stretch"]!=r);k++);return B}};pa.print=function(a,b,f,r,u,k,B){k=k||"middle";B=Y(C(B||0,1),-1);var F=I(f).split(""),e=0,d=0,t="";c.is(r,f)&&(r=this.getFont(r));if(r){f=(u||16)/r.face["units-per-em"];var g=r.face.bbox.split(Za);u=+g[0];var O=g[3]-g[1],A=0;k=+g[1]+("baseline"==
k?O+ +r.face.descent:O/2);for(var g=0,h=F.length;g<h;g++){if("\n"==F[g])d=X=e=0,A+=O;else var q=d&&r.glyphs[F[g-1]]||{},X=r.glyphs[F[g]],e=e+(d?(q.w||r.w)+(q.k&&q.k[F[g]]||0)+r.w*B:0),d=1;X&&X.d&&(t+=c.transformPath(X.d,["t",e*f,A*f,"s",f,f,u,k,"t",(a-u)/f,(b-k)/f]))}}return this.path(t).attr({fill:"#000",stroke:"none"})};pa.add=function(a){if(c.is(a,"array"))for(var b=this.set(),f=0,r=a.length,u;f<r;f++)u=a[f]||{},Z.hasOwnProperty(u.type)&&b.push(this[u.type]().attr(u));return b};c.format=function(a,
b){var f=c.is(b,q)?[0].concat(b):arguments;a&&c.is(a,"string")&&f.length-1&&(a=a.replace(Ea,function(a,c){return null==f[++c]?"":f[c]}));return a||""};c.fullfill=function(){var a=/\{([^\}]+)\}/g,c=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,b=function(a,b,f){var r=f;b.replace(c,function(a,c,b,f,u){c=c||f;r&&(c in r&&(r=r[c]),"function"==typeof r&&u&&(r=r()))});return r=(null==r||r==f?a:r)+""};return function(c,f){return String(c).replace(a,function(a,c){return b(a,c,f)})}}();c.ninja=
function(){$?s.win.Raphael=U:delete Raphael;return c};var xc=c.vml&&.5||0;c.crispBound=Oa(function(a,c,b,f,r){var u={},k;a=a||0;c=c||0;b=b||0;f=f||0;r=r||0;k=r%2/2+xc;u.x=ya(a+k)-k;u.y=ya(c+k)-k;u.width=ya(a+b+k)-k-u.x;u.height=ya(c+f+k)-k-u.y;u["stroke-width"]=r;0===u.width&&0!==b&&(u.width=1);0===u.height&&0!==f&&(u.height=1);return u},c);ka.crisp=function(){var a=this.attrs,b,f=this.attr(["x","y","width","height","stroke-width"]),f=c.crispBound(f.x,f.y,f.width,f.height,f["stroke-width"]);for(b in f)a[b]===
f[b]&&delete f[b];return this.attr(f)};c.st=gb;c.define=function(a,b,f,r,u,k){var B;if(c.is(a,q))for(k=0,B=a.length;k<B;k++)c.define(a[k]);else if(c.is(a,"object"))c.define(a.name,a[a.name],a.ca,a.fn,a.e,a.data);else if(a&&!c.fn[a])return c.fn[a]=function(){var k=arguments,B=b.apply(this,k),F;if(r&&c.is(r,"object"))for(F in r)B[F]=r[F];if(u&&c.is(u,"object"))for(F in u)B[F]&&B[F](u[F]);if(f){if(c.is(f,"function"))B.ca[a]=f;else for(F in f)B.ca[F]=f[F];B.ca[a]&&(c._lastArgIfGroup(k,!0),B.attr(a,J.call(k)))}return B},
f&&(c.fn[a].ca=f),r&&(c.fn[a].fn=r),u&&(c.fn[a].e=u),k&&(c.fn[a].data=k),c.fn[a]};(function(a,b,f){function r(){/in/.test(a.readyState)?setTimeout(r,9):c.eve("raphael.DOMload")}null==a.readyState&&a.addEventListener&&(a.addEventListener(b,f=function(){a.removeEventListener(b,f,!1);a.readyState="complete"},!1),a.readyState="loading");r()})(document,"DOMContentLoaded");p.on("raphael.DOMload",function(){n=!0});(function(){if(c.svg){var a=String,b=parseFloat,f=parseInt,r=Math,u=r.max,k=r.abs,B=r.pow,
F=r.sqrt,e=/[, ]+/,d=!(!/AppleWebKit/.test(c._g.win.navigator.userAgent)||/Chrome/.test(c._g.win.navigator.userAgent)&&!(29>c._g.win.navigator.appVersion.match(/Chrome\/(\d+)\./)[1])),t=c.eve,g={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},O={};c.toString=function(){return"Your browser supports SVG.\nYou are running Raphal "+this.version};c._url="";var A=function(a,c){var b=
a.gradient;if(b){if(b===c)return;b.refCount--;b.refCount||b.parentNode.removeChild(b);delete a.gradient}c&&(a.gradient=c,c.refCount++)},h=c._createNode=function(b,f){if(f){"string"==typeof b&&(b=h(b));for(var r in f)f.hasOwnProperty(r)&&("xlink:"==r.substring(0,6)?b.setAttributeNS("http://www.w3.org/1999/xlink",r.substring(6),a(f[r])):b.setAttribute(r,a(f[r])))}else b=c._g.doc.createElementNS("http://www.w3.org/2000/svg",b);return b},q={userSpaceOnUse:"userSpaceOnUse",objectBoundingBox:"objectBoundingBox"},
X={pad:"pad",redlect:"reflect",repeat:"repeat"},l=function(f,e){if(!f.paper||!f.paper.defs)return 0;var d="linear",t=f.paper,g=(t.id+"-"+e).replace(/[\(\)\s%:,\xb0#]/g,"_"),O=.5,l=.5,R,E,C,n,Ma,w=f.node,T=w.style,p=c._g.doc.getElementById(g);if(!p){e=a(e).replace(c._radial_gradient,function(a,c){d="radial";c=c&&c.split(",")||[];n=c[5];Ma=c[6];var f=c[0],r=c[1],u=c[2],k=c[3],e=c[4],t=f&&r,g;u&&(R=/\%/.test(u)?u:b(u));if(n===q.userSpaceOnUse)return t&&(O=f,l=r),k&&e&&(E=k,C=e,t||(O=E,l=C)),"";t&&(O=
b(f),l=b(r),f=2*(.5<l)-1,.25<(g=B(O-.5,2))+B(l-.5,2)&&.25>g&&(l=F(.25-g)*f+.5)&&.5!==l&&(l=l.toFixed(5)-1E-5*f));k&&e&&(E=b(k),C=b(e),f=2*(.5<C)-1,.25<(g=B(E-.5,2))+B(C-.5,2)&&.25>g&&(C=F(.25-g)*f+.5)&&.5!==C&&(C=C.toFixed(5)-1E-5*f),t||(O=E,l=C));return""});e=e.split(/\s*\-\s*/);if("linear"==d){var p=e.shift(),s=p.match(/\((.*)\)/),va,s=s&&s[1]&&s[1].split(/\s*\,\s*/),p=-b(p);if(isNaN(p))return null;s&&s.length?(s[0]in q?(n=s.shift(),s[0]in X&&(Ma=s.shift())):(s[4]&&(n=s[4]),s[5]&&(Ma=s[5])),va=
[s[0]||"0%",s[1]||"0%",s[2]||"100%",s[3]||"0%"]):(va=[0,0,r.cos(c.rad(p)),r.sin(c.rad(p))],p=1/(u(k(va[2]),k(va[3]))||1),va[2]*=p,va[3]*=p,0>va[2]&&(va[0]=-va[2],va[2]=0),0>va[3]&&(va[1]=-va[3],va[3]=0))}s=c._parseDots(e);if(!s)return null;p=h(d+"Gradient",{id:g});p.refCount=0;n in q&&p.setAttribute("gradientUnits",a(n));Ma in X&&p.setAttribute("spreadMethod",a(Ma));"radial"===d?(void 0!==R&&p.setAttribute("r",a(R)),void 0!==E&&void 0!==C&&(p.setAttribute("cx",a(E)),p.setAttribute("cy",a(C))),p.setAttribute("fx",
a(O)),p.setAttribute("fy",a(l))):h(p,{x1:va[0],y1:va[1],x2:va[2],y2:va[3]});va=0;for(var L=s.length;va<L;va++)p.appendChild(h("stop",{offset:s[va].offset?s[va].offset:va?"100%":"0%","stop-color":s[va].color||"#fff","stop-opacity":void 0===s[va].opacity?1:s[va].opacity}));t.defs.appendChild(p)}A(f,p);h(w,{fill:"url('"+c._url+"#"+g+"')",opacity:1,"fill-opacity":1});T.fill="";T.opacity=1;return T.fillOpacity=1},R=function(a){var c=a.getBBox(1);h(a.pattern,{patternTransform:a.matrix.invert()+" translate("+
c.x+","+c.y+")"})},E=function(b,f,r){if("path"==b.type){for(var u=a(f).toLowerCase().split("-"),k=b.paper,B=r?"end":"start",F=b.node,e=b.attrs,d=e["stroke-width"],t=u.length,A="classic",q,X,l=3,E=3,R=5;t--;)switch(u[t]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":A=u[t];break;case "wide":E=5;break;case "narrow":E=2;break;case "long":l=5;break;case "short":l=2}"open"==A?(l+=2,E+=2,R+=2,q=1,X=r?4:1,u={fill:"none",stroke:e.stroke}):(X=q=l/2,u={fill:e.stroke,stroke:"none"});
b._.arrows?r?(b._.arrows.endPath&&O[b._.arrows.endPath]--,b._.arrows.endMarker&&O[b._.arrows.endMarker]--):(b._.arrows.startPath&&O[b._.arrows.startPath]--,b._.arrows.startMarker&&O[b._.arrows.startMarker]--):b._.arrows={};if("none"!=A){var t="raphael-marker-"+A,C="raphael-marker-"+B+A+l+E+"-obj"+b.id;c._g.doc.getElementById(t)?O[t]++:(k.defs.appendChild(h(h("path"),{"stroke-linecap":"round",d:g[A],id:t})),O[t]=1);var n=c._g.doc.getElementById(C);n?(O[C]++,l=n.getElementsByTagName("use")[0]):(n=h(h("marker"),
{id:C,markerHeight:E,markerWidth:l,orient:"auto",refX:X,refY:E/2}),l=h(h("use"),{"xlink:href":"#"+t,transform:(r?"rotate(180 "+l/2+" "+E/2+") ":"")+"scale("+l/R+","+E/R+")","stroke-width":(1/((l/R+E/R)/2)).toFixed(4)}),n.appendChild(l),k.defs.appendChild(n),O[C]=1);h(l,u);k=q*("diamond"!=A&&"oval"!=A);r?(r=b._.arrows.startdx*d||0,d=c.getTotalLength(e.path)-k*d):(r=k*d,d=c.getTotalLength(e.path)-(b._.arrows.enddx*d||0));u={};u["marker-"+B]="url('"+c._url+"#"+C+"')";if(d||r)u.d=c.getSubpath(e.path,
r,d);h(F,u);b._.arrows[B+"Path"]=t;b._.arrows[B+"Marker"]=C;b._.arrows[B+"dx"]=k;b._.arrows[B+"Type"]=A;b._.arrows[B+"String"]=f}else r?(r=b._.arrows.startdx*d||0,d=c.getTotalLength(e.path)-r):(r=0,d=c.getTotalLength(e.path)-(b._.arrows.enddx*d||0)),b._.arrows[B+"Path"]&&h(F,{d:c.getSubpath(e.path,r,d)}),delete b._.arrows[B+"Path"],delete b._.arrows[B+"Marker"],delete b._.arrows[B+"dx"],delete b._.arrows[B+"Type"],delete b._.arrows[B+"String"];for(u in O)O.hasOwnProperty(u)&&!O[u]&&(b=c._g.doc.getElementById(u))&&
b.parentNode.removeChild(b)}},C={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},n=function(b,f,r){var u=C[a(f).toLowerCase()],k,B;if(f=u||void 0!==f&&[].concat(f)){k=b.attrs["stroke-width"]||1;r={round:k,square:k,butt:0}[b.attrs["stroke-linecap"]||r["stroke-linecap"]]||0;B=f.length;k=u?k:1;for(u=[];B--;)u[B]=f[B]*k+(B%2?1:-1)*r,0>u[B]&&(u[B]=0);c.is(f,"array")&&h(b.node,{"stroke-dasharray":u.join(",")})}},
Ma=function(a,c){for(var b in c)t("raphael.attr."+b+"."+a.id,a,c[b],b),a.ca[b]&&a.attr(b,c[b])},w=c._setFillAndStroke=function(b,r){if(b.paper.canvas){var B=b.node,F=b.attrs,t=b.paper,g=B.style,O=g.visibility;g.visibility="hidden";for(var q in r)if(r.hasOwnProperty(q)&&c._availableAttrs.hasOwnProperty(q)){var X=r[q];F[q]=X;switch(q){case "blur":b.blur(X);break;case "href":case "title":case "target":var C=B.parentNode;if("a"!=C.tagName.toLowerCase()){if(""==X)break;var Ma=h("a");Ma.raphael=!0;Ma.raphaelid=
B.raphaelid;C.insertBefore(Ma,B);Ma.appendChild(B);C=Ma}"target"==q?C.setAttributeNS("http://www.w3.org/1999/xlink","show","blank"==X?"new":X):C.setAttributeNS("http://www.w3.org/1999/xlink",q,X);B.titleNode=C;break;case "cursor":g.cursor=X;break;case "transform":b.transform(X);break;case "rotation":c.is(X,"array")?b.rotate.apply(b,X):b.rotate(X);break;case "arrow-start":E(b,X);break;case "arrow-end":E(b,X,1);break;case "clip-path":var s=!0;case "clip-rect":C=!s&&a(X).split(e);b._.clipispath=!!s;
if(s||4==C.length){b.clip&&b.clip.parentNode.parentNode.removeChild(b.clip.parentNode);var Ma=h("clipPath"),w=h(s?"path":"rect");Ma.id=c.createUUID();h(w,s?{d:X?F["clip-path"]=c._pathToAbsolute(X):c._availableAttrs.path,fill:"none"}:{x:C[0],y:C[1],width:C[2],height:C[3],transform:b.matrix.invert()});Ma.appendChild(w);t.defs.appendChild(Ma);h(B,{"clip-path":"url('"+c._url+"#"+Ma.id+"')"});b.clip=w}!X&&(X=B.getAttribute("clip-path"))&&((X=c._g.doc.getElementById(X.replace(/(^url\(#|\)$)/g,"")))&&X.parentNode.removeChild(X),
h(B,{"clip-path":""}),delete b.clip);break;case "path":"path"==b.type&&(h(B,{d:X?F.path=c._pathToAbsolute(X):c._availableAttrs.path}),b._.dirty=1,b._.arrows&&("startString"in b._.arrows&&E(b,b._.arrows.startString),"endString"in b._.arrows&&E(b,b._.arrows.endString,1)));break;case "width":if(B.setAttribute(q,X),b._.dirty=1,F.fx)q="x",X=F.x;else break;case "x":F.fx&&(X=-F.x-(F.width||0));case "rx":if("rx"==q&&"rect"==b.type)break;case "cx":B.setAttribute(q,X);b.pattern&&R(b);b._.dirty=1;break;case "height":if(B.setAttribute(q,
X),b._.dirty=1,F.fy)q="y",X=F.y;else break;case "y":F.fy&&(X=-F.y-(F.height||0));case "ry":if("ry"==q&&"rect"==b.type)break;case "cy":B.setAttribute(q,X);b.pattern&&R(b);b._.dirty=1;break;case "r":"rect"==b.type?h(B,{rx:X,ry:X}):B.setAttribute(q,X);b._.dirty=1;break;case "src":"image"==b.type&&B.setAttributeNS("http://www.w3.org/1999/xlink","href",X);break;case "stroke-width":if(1!=b._.sx||1!=b._.sy)X/=u(k(b._.sx),k(b._.sy))||1;t._vbSize&&(X*=t._vbSize);d&&0===X&&(X=1E-6);B.setAttribute(q,X);F["stroke-dasharray"]&&
n(b,F["stroke-dasharray"],r);b._.arrows&&("startString"in b._.arrows&&E(b,b._.arrows.startString),"endString"in b._.arrows&&E(b,b._.arrows.endString,1));break;case "stroke-dasharray":n(b,X,r);break;case "fill":var va=a(X).match(c._ISURL);if(va){var Ma=h("pattern"),T=h("image");Ma.id=c.createUUID();h(Ma,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});h(T,{x:0,y:0,"xlink:href":va[1]});Ma.appendChild(T);(function(a){c._preload(va[1],function(){var c=this.offsetWidth,b=this.offsetHeight;h(a,
{width:c,height:b});h(T,{width:c,height:b});t.safari()})})(Ma);t.defs.appendChild(Ma);g.fill="url('"+c._url+"#"+Ma.id+"')";h(B,{fill:g.fill});b.pattern=Ma;b.pattern&&R(b);break}C=c.getRGB(X);if(!C.error)delete r.gradient,delete F.gradient,!c.is(F.opacity,"undefined")&&c.is(r.opacity,"undefined")&&h(B,{opacity:F.opacity}),!c.is(F["fill-opacity"],"undefined")&&c.is(r["fill-opacity"],"undefined")&&h(B,{"fill-opacity":F["fill-opacity"]}),b.gradient&&A(b);else if(("circle"==b.type||"ellipse"==b.type||
"r"!=a(X).charAt())&&l(b,X)){if("opacity"in F||"fill-opacity"in F)if(C=c._g.doc.getElementById(B.getAttribute("fill").replace(/^url\(#|\)$/g,"")))C=C.getElementsByTagName("stop"),h(C[C.length-1],{"stop-opacity":("opacity"in F?F.opacity:1)*("fill-opacity"in F?F["fill-opacity"]:1)});F.gradient=X;F.fill="none";g.fill="";break}C.hasOwnProperty("opacity")?(h(B,{"fill-opacity":g.fillOpacity=1<C.opacity?C.opacity/100:C.opacity}),b._.fillOpacityDirty=!0):b._.fillOpacityDirty&&c.is(F["fill-opacity"],"undefined")&&
c.is(r["fill-opacity"],"undefined")&&(B.removeAttribute("fill-opacity"),g.fillOpacity="",delete b._.fillOpacityDirty);case "stroke":C=c.getRGB(X);B.setAttribute(q,C.hex);g[q]=C.hex;"stroke"==q&&(C.hasOwnProperty("opacity")?(h(B,{"stroke-opacity":g.strokeOpacity=1<C.opacity?C.opacity/100:C.opacity}),b._.strokeOpacityDirty=!0):b._.strokeOpacityDirty&&c.is(F["stroke-opacity"],"undefined")&&c.is(r["stroke-opacity"],"undefined")&&(B.removeAttribute("stroke-opacity"),g.strokeOpacity="",delete b._.strokeOpacityDirty),
b._.arrows&&("startString"in b._.arrows&&E(b,b._.arrows.startString),"endString"in b._.arrows&&E(b,b._.arrows.endString,1)));break;case "gradient":"circle"!=b.type&&"ellipse"!=b.type&&"r"==a(X).charAt()||l(b,X);break;case "line-height":case "vertical-align":break;case "visibility":"hidden"===X?b.hide():b.show();break;case "opacity":F.gradient&&!F.hasOwnProperty("stroke-opacity")&&h(B,{"stroke-opacity":1<X?X/100:X});case "fill-opacity":if(F.gradient){if(C=c._g.doc.getElementById(B.getAttribute("fill").replace(/^url\(#|\)$/g,
"")))C=C.getElementsByTagName("stop"),h(C[C.length-1],{"stop-opacity":X});break}default:"font-size"==q&&(X=f(X,10)+"px"),C=q.replace(/(\-.)/g,function(a){return a.substring(1).toUpperCase()}),g[C]=X,b._.dirty=1,B.setAttribute(q,X)}}"text"===b.type&&p(b,r);g.visibility=O}},p=function(f,r){if("text"==f.type&&(r.hasOwnProperty("text")||r.hasOwnProperty("font")||r.hasOwnProperty("font-size")||r.hasOwnProperty("x")||r.hasOwnProperty("y")||r.hasOwnProperty("line-height")||r.hasOwnProperty("vertical-align"))){var u=
f.attrs,k=f.node,B=k.firstChild&&c._g.doc.defaultView.getComputedStyle(k.firstChild,"")?b(c._g.doc.defaultView.getComputedStyle(k.firstChild,"").getPropertyValue("font-size")):10,F=b(r["line-height"]||u["line-height"])||1.2*B,e=u.hasOwnProperty("vertical-align")?u["vertical-align"]:"middle";isNaN(F)&&(F=1.2*B);c.is(r.text,"array")&&(r.text=r.text.join("<br>"));e="top"===e?-.5:"bottom"===e?.5:0;if(r.hasOwnProperty("text")&&(r.text!==u.text||f._textdirty)){for(u.text=r.text;k.firstChild;)k.removeChild(k.firstChild);
for(var d=a(r.text).split(/\n|<br\s*?\/?>/ig),B=[],t,g=0,O=d.length;g<O;g++)t=h("tspan"),g?h(t,{dy:F,x:u.x}):h(t,{dy:F*d.length*e,x:u.x}),d[g]||(t.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),d[g]=" "),t.appendChild(c._g.doc.createTextNode(d[g])),k.appendChild(t),B[g]=t;f._textdirty=!1}else for(B=k.getElementsByTagName("tspan"),g=0,O=B.length;g<O;g++)g?h(B[g],{dy:F,x:u.x}):h(B[0],{dy:F*B.length*e,x:u.x});h(k,{x:u.x,y:u.y});f._.dirty=1;k=f._getBBox();F=u.y-(k.y+k.height/
2);if(k.isCalculated)switch(u["vertical-align"]){case "top":F=.75*k.height;break;case "bottom":F=-(.25*k.height);break;default:F=u.y-(k.y+.25*k.height)}F&&c.is(F,"finite")&&B[0]&&h(B[0],{dy:F})}},s=function(a,b,f){f=f||b;f.canvas&&f.canvas.appendChild(a);this.node=this[0]=a;a.raphael=!0;a.raphaelid=this.id=c._oid++;this.matrix=c.matrix();this.realPath=null;this.attrs=this.attrs||{};this.followers=this.followers||[];this.paper=b;this.ca=this.customAttributes=this.customAttributes||new b._CustomAttributes;
this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1};this.parent=f;!f.bottom&&(f.bottom=this);(this.prev=f.top)&&(f.top.next=this);f.top=this;this.next=null},T=c.el;s.prototype=T;T.constructor=s;c._engine.getNode=function(a){a=a.node||a[0].node;return a.titleNode||a};c._engine.getLastNode=function(a){a=a.node||a[a.length-1].node;return a.titleNode||a};T.rotate=function(c,f,r){if(this.removed)return this;c=a(c).split(e);c.length-1&&(f=b(c[1]),r=b(c[2]));c=b(c[0]);null==r&&(f=r);if(null==f||null==
r)r=this.getBBox(1),f=r.x+r.width/2,r=r.y+r.height/2;this.transform(this._.transform.concat([["r",c,f,r]]));return this};T.scale=function(c,f,r,u){var k;if(this.removed)return this;c=a(c).split(e);c.length-1&&(f=b(c[1]),r=b(c[2]),u=b(c[3]));c=b(c[0]);null==f&&(f=c);null==u&&(r=u);if(null==r||null==u)k=this.getBBox(1);r=null==r?k.x+k.width/2:r;u=null==u?k.y+k.height/2:u;this.transform(this._.transform.concat([["s",c,f,r,u]]));return this};T.translate=function(c,f){if(this.removed)return this;c=a(c).split(e);
c.length-1&&(f=b(c[1]));c=b(c[0])||0;this.transform(this._.transform.concat([["t",c,+f||0]]));return this};T.transform=function(a){var b=this._;if(null==a)return b.transform;c._extractTransform(this,a);this.clip&&!b.clipispath&&h(this.clip,{transform:this.matrix.invert()});this.pattern&&R(this);this.node&&h(this.node,{transform:this.matrix});if(1!=b.sx||1!=b.sy)a=this.attrs.hasOwnProperty("stroke-width")?this.attrs["stroke-width"]:1,this.attr({"stroke-width":a});return this};T.hide=function(){!this.removed&&
this.paper.safari(this.node.style.display="none");return this};T.show=function(){!this.removed&&this.paper.safari(this.node.style.display="");return this};T.remove=function(){if(!this.removed&&this.parent.canvas){var a=c._engine.getNode(this),b=this.paper,f=b.defs;b.__set__&&b.__set__.exclude(this);t.unbind("raphael.*.*."+this.id);for(this.gradient&&f&&A(this);f=this.followers.pop();)f.el.remove();for(;f=this.bottom;)f.remove();this._drag&&this.undrag();if(this.events)for(;f=this.events.pop();)f.unbind();
this.parent.canvas.removeChild(a);this.removeData();delete b._elementsById[this.id];c._tear(this,this.parent);for(f in this)this[f]="function"===typeof this[f]?c._removedFactory(f):null;this.removed=!0}};T._getBBox=function(){var a=this.node,c={},b=this.attrs,f,r;"none"===a.style.display&&(this.show(),r=!0);try{c=a.getBBox(),"text"==this.type&&(void 0===c.x&&(c.isCalculated=!0,f=b["text-anchor"],c.x=(b.x||0)-c.width*("start"===f?0:"middle"===f?.5:1)),void 0===c.y&&(c.isCalculated=!0,f=b["vertical-align"],
c.y=(b.y||0)-c.height*("bottom"===f?1:"middle"===f?.5:0)))}catch(u){}finally{c=c||{}}r&&this.hide();return c};T.attr=function(a,b){if(this.removed)return this;if(null==a){var f={},r;for(r in this.attrs)this.attrs.hasOwnProperty(r)&&(f[r]=this.attrs[r]);f.gradient&&"none"==f.fill&&(f.fill=f.gradient)&&delete f.gradient;f.transform=this._.transform;f.visibility="none"===this.node.style.display?"hidden":"visible";return f}if(null==b&&c.is(a,"string")){if("fill"==a&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;
if("transform"==a)return this._.transform;if("visibility"==a)return"none"===this.node.style.display?"hidden":"visible";var f=a.split(e),u={},k=0;for(r=f.length;k<r;k++)a=f[k],a in this.attrs?u[a]=this.attrs[a]:c.is(this.ca[a],"function")?u[a]=this.ca[a].def:u[a]=c._availableAttrs[a];return r-1?u:u[f[0]]}if(null==b&&c.is(a,"array")){u={};k=0;for(r=a.length;k<r;k++)u[a[k]]=this.attr(a[k]);return u}null!=b?(f={},f[a]=b):null!=a&&c.is(a,"object")&&(f=a);for(k in f)t("raphael.attr."+k+"."+this.id,this,
f[k],k);var B={};for(k in this.ca)if(this.ca[k]&&f.hasOwnProperty(k)&&c.is(this.ca[k],"function")&&!this.ca["_invoked"+k]){this.ca["_invoked"+k]=!0;r=this.ca[k].apply(this,[].concat(f[k]));delete this.ca["_invoked"+k];for(u in r)r.hasOwnProperty(u)&&(f[u]=r[u]);this.attrs[k]=f[k];!1===r&&(B[k]=f[k],delete f[k])}w(this,f);var F,k=0;for(r=this.followers.length;k<r;k++)F=this.followers[k],F.cb&&!F.cb.call(F.el,f,this)||F.el.attr(f);for(u in B)f[u]=B[u];return this};T.blur=function(a){if(0!==+a){var b=
h("filter"),f=h("feGaussianBlur");this.attrs.blur=a;b.id=c.createUUID();h(f,{stdDeviation:+a||1.5});b.appendChild(f);this.paper.defs.appendChild(b);this._blur=b;h(this.node,{filter:"url('"+c._url+"#"+b.id+"')"})}else this._blur&&(this._blur.parentNode.removeChild(this._blur),delete this._blur,delete this.attrs.blur),this.node.removeAttribute("filter")};T.on=function(a,b){if(this.removed)return this;var f=b;c.supportsTouch&&(a=c._touchMap[a]||"click"===a&&"touchstart"||a,f=function(a){a.preventDefault();
b()});this.node["on"+a]=f;return this};c._engine.path=function(a,c,b){var f=h("path");a=new s(f,a,b);a.type="path";w(a,c);Ma(a,c);return a};c._engine.group=function(a,c,b){var f=h("g");a=new s(f,a,b);a.type="group";a.canvas=a.node;a.top=a.bottom=null;a._id=c||"";c&&f.setAttribute("class","raphael-group-"+a.id+"-"+c);return a};c._engine.circle=function(a,c,b){var f=h("circle");a=new s(f,a,b);a.type="circle";w(a,c);Ma(a,c);return a};c._engine.rect=function(a,c,b){var f=h("rect");a=new s(f,a,b);a.type=
"rect";c.rx=c.ry=c.r;w(a,c);Ma(a,c);return a};c._engine.ellipse=function(a,c,b){var f=h("ellipse");a=new s(f,a,b);a.type="ellipse";w(a,c);Ma(a,c);return a};c._engine.image=function(a,c,b){var f=h("image");a=new s(f,a,b);a.type="image";f.setAttribute("preserveAspectRatio","none");w(a,c);Ma(a,c);return a};c._engine.text=function(a,c,b){var f=h("text");a=new s(f,a,b);a.type="text";a._textdirty=!0;w(a,c);Ma(a,c);return a};c._engine.setSize=function(a,c){this.width=a||this.width;this.height=c||this.height;
this.canvas.setAttribute("width",this.width);this.canvas.setAttribute("height",this.height);this._viewBox&&this.setViewBox.apply(this,this._viewBox);return this};c._engine.create=function(){var a=c._getContainer.apply(0,arguments),b=a&&a.container,f=a.x,r=a.y,u=a.width,a=a.height;if(!b)throw Error("SVG container not found.");var k=h("svg"),B,f=f||0,r=r||0,u=u||512,a=a||342;h(k,{height:a,version:1.1,width:u,xmlns:"http://www.w3.org/2000/svg"});1==b?(k.style.cssText="overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-moz-user-select:-moz-none;-khtml-user-select:none;-ms-user-select:none;user-select:none;-o-user-select:none;cursor:default;position:absolute;left:"+
f+"px;top:"+r+"px",c._g.doc.body.appendChild(k),B=1):(k.style.cssText="overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-user-select:none;-moz-user-select:-moz-none;-khtml-user-select:none;-ms-user-select:none;user-select:none;-o-user-select:none;cursor:default;position:relative",b.firstChild?b.insertBefore(k,b.firstChild):b.appendChild(k));b=new c._Paper;b.width=u;b.height=a;b.canvas=k;h(k,{id:"raphael-paper-"+b.id});b.clear();b._left=b._top=0;B&&(b.renderfix=function(){});b.renderfix();
return b};c._engine.setViewBox=function(a,c,b,f,r){t("raphael.setViewBox",this,this._viewBox,[a,c,b,f,r]);var k=u(b/this.width,f/this.height),B=this.top,F=r?"meet":"xMinYMin",e;null==a?(this._vbSize&&(k=1),delete this._vbSize,e="0 0 "+this.width+" "+this.height):(this._vbSize=k,e=a+" "+c+" "+b+" "+f);for(h(this.canvas,{viewBox:e,preserveAspectRatio:F});k&&B;)F="stroke-width"in B.attrs?B.attrs["stroke-width"]:1,B.attr({"stroke-width":F}),B._.dirty=1,B._.dirtyT=1,B=B.prev;this._viewBox=[a,c,b,f,!!r];
return this};c.prototype.renderfix=function(){var a=this.canvas,c=a.style,b;try{b=a.getScreenCTM()||a.createSVGMatrix()}catch(f){b=a.createSVGMatrix()}a=-b.e%1;b=-b.f%1;if(a||b)a&&(this._left=(this._left+a)%1,c.left=this._left+"px"),b&&(this._top=(this._top+b)%1,c.top=this._top+"px")};c.prototype._desc=function(a){var b=this.desc;if(b)for(;b.firstChild;)b.removeChild(b.firstChild);else this.desc=b=h("desc"),this.canvas.appendChild(b);b.appendChild(c._g.doc.createTextNode(c.is(a,"string")?a:"Created with Red Raphal "+
c.version))};c.prototype.clear=function(){var a;for(t("raphael.clear",this);a=this.bottom;)a.remove();for(a=this.canvas;a.firstChild;)a.removeChild(a.firstChild);this.bottom=this.top=null;a.appendChild(this.desc=h("desc"));a.appendChild(this.defs=h("defs"))};c.prototype.remove=function(){var a;for(t("raphael.remove",this);a=this.bottom;)a.remove();this.defs&&this.defs.parentNode.removeChild(this.defs);this.desc&&this.desc.parentNode.removeChild(this.desc);this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);
for(a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null;this.removed=!0};var L=c.st,va;for(va in T)T.hasOwnProperty(va)&&!L.hasOwnProperty(va)&&(L[va]=function(a){return function(){var c=arguments;return this.forEach(function(b){b[a].apply(b,c)})}}(va))}})();(function(){if(c.vml){var a=String,b=parseFloat,f=Math,r=f.round,u=f.max,k=f.min,B=f.sqrt,F=f.abs,e=/[, ]+/,d=c.eve,t={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},g=/([clmz]),?([^clmz]*)/gi,O=/ progid:\S+Blur\([^\)]+\)/g,
h=/-?[^,\s-]+/g,A={path:1,rect:1,image:1},X={circle:1,ellipse:1},q=function(b){var f=/[ahqstv]/ig,u=c._pathToAbsolute;a(b).match(f)&&(u=c._path2curve);f=/[clmz]/g;if(u==c._pathToAbsolute&&!a(b).match(f))return(b=a(b).replace(g,function(a,c,b){var f=[],u="m"==c.toLowerCase(),k=t[c];b.replace(h,function(a){u&&2==f.length&&(k+=f+t["m"==c?"l":"L"],f=[]);f.push(r(21600*a))});return k+f}))||"m0,0";var f=u(b),k;b=[];for(var B=0,F=f.length;B<F;B++){u=f[B];k=f[B][0].toLowerCase();"z"==k&&(k="x");for(var e=
1,d=u.length;e<d;e++)k+=r(21600*u[e])+(e!=d-1?",":"");b.push(k)}return b.length?b.join(" "):"m0,0"},l=function(a,b,f){var r=c.matrix();r.rotate(-a,.5,.5);return{dx:r.x(b,f),dy:r.y(b,f)}},C=function(a,c,b,f,r,u){var k=a._,B=a.matrix,e=k.fillpos;a=a.node;var d=a.style,t=1,g="",O=21600/c,h=21600/b;d.visibility="hidden";if(c&&b){a.coordsize=F(O)+" "+F(h);d.rotation=u*(0>c*b?-1:1);u&&(r=l(u,f,r),f=r.dx,r=r.dy);0>c&&(g+="x");0>b&&(g+=" y")&&(t=-1);d.flip=g;a.coordorigin=f*-O+" "+r*-h;if(e||k.fillsize)if(f=
(f=a.getElementsByTagName("fill"))&&f[0])a.removeChild(f),e&&(r=l(u,B.x(e[0],e[1]),B.y(e[0],e[1])),f.position=r.dx*t+" "+r.dy*t),k.fillsize&&(f.size=k.fillsize[0]*F(c)+" "+k.fillsize[1]*F(b)),a.appendChild(f);d.visibility="visible"}};c._url="";c.toString=function(){return"Your browser doesnt support SVG. Falling down to VML.\nYou are running Raphal "+this.version};var E=function(c,b,f){b=a(b).toLowerCase().split("-");f=f?"end":"start";for(var r=b.length,u="classic",k="medium",B="medium";r--;)switch(b[r]){case "block":case "classic":case "oval":case "diamond":case "open":case "none":u=
b[r];break;case "wide":case "narrow":B=b[r];break;case "long":case "short":k=b[r]}c=c.node.getElementsByTagName("stroke")[0];c[f+"arrow"]=u;c[f+"arrowlength"]=k;c[f+"arrowwidth"]=B},R=function(a,c){for(var b in c)d("raphael.attr."+b+"."+a.id,a,c[b],b),a.ca[b]&&a.attr(b,c[b])},n=c._setFillAndStroke=function(f,B){if(f.paper.canvas){f.attrs=f.attrs||{};var F=f.node,d=f.attrs,t=F.style,g=A[f.type]&&(B.x!=d.x||B.y!=d.y||B.width!=d.width||B.height!=d.height||B.cx!=d.cx||B.cy!=d.cy||B.rx!=d.rx||B.ry!=d.ry||
B.r!=d.r),O=X[f.type]&&(d.cx!=B.cx||d.cy!=B.cy||d.r!=B.r||d.rx!=B.rx||d.ry!=B.ry),h="group"===f.type,l;for(l in B)B.hasOwnProperty(l)&&(d[l]=B[l]);g&&(d.path=c._getPath[f.type](f),f._.dirty=1);B.href&&(F.href=B.href);B.title&&(F.title=B.title);B.target&&(F.target=B.target);B.cursor&&(t.cursor=B.cursor);"blur"in B&&f.blur(B.blur);if(B.path&&"path"==f.type||g)F.path=q(~a(d.path).toLowerCase().indexOf("r")?c._pathToAbsolute(d.path):d.path),"image"==f.type&&(f._.fillpos=[d.x,d.y],f._.fillsize=[d.width,
d.height],C(f,1,1,0,0,0));"transform"in B&&f.transform(B.transform);"rotation"in B&&(t=B.rotation,c.is(t,"array")?f.rotate.apply(f,t):f.rotate(t));"visibility"in B&&("hidden"===B.visibility?f.hide():f.show());O&&(t=+d.cx,O=+d.cy,g=+d.rx||+d.r||0,l=+d.ry||+d.r||0,F.path=c.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",r(21600*(t-g)),r(21600*(O-l)),r(21600*(t+g)),r(21600*(O+l)),r(21600*t)));"clip-rect"in B&&(t=a(B["clip-rect"]).split(e),4==t.length&&(t[0]=+t[0],t[1]=+t[1],t[2]=+t[2]+t[0],t[3]=+t[3]+t[1],
g=h?F:F.clipRect||c._g.doc.createElement("div"),O=g.style,h?(f.clip=t.slice(),g=f.matrix.offset(),g=[b(g[0]),b(g[1])],t[0]-=g[0],t[1]-=g[1],t[2]-=g[0],t[3]-=g[1],O.width="10800px",O.height="10800px"):F.clipRect||(O.top="0",O.left="0",O.width=f.paper.width+"px",O.height=f.paper.height+"px",F.parentNode.insertBefore(g,F),g.appendChild(F),g.raphael=!0,g.raphaelid=F.raphaelid,F.clipRect=g),O.position="absolute",O.clip=c.format("rect({1}px {2}px {3}px {0}px)",t)),B["clip-rect"]||(h&&f.clip?(F.style.clip=
"rect(auto auto auto auto)",delete f.clip):F.clipRect&&(F.clipRect.style.clip="rect(auto auto auto auto)")));f.textpath&&(h=f.textpath.style,B.font&&(h.font=B.font),B["font-family"]&&(h.fontFamily='"'+B["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,"")+'"'),B["font-size"]&&(h.fontSize=B["font-size"]),B["font-weight"]&&(h.fontWeight=B["font-weight"]),B["font-style"]&&(h.fontStyle=B["font-style"]));"arrow-start"in B&&E(f,B["arrow-start"]);"arrow-end"in B&&E(f,B["arrow-end"],1);if(null!=B.opacity||
null!=B["stroke-width"]||null!=B.fill||null!=B.src||null!=B.stroke||null!=B["stroke-width"]||null!=B["stroke-opacity"]||null!=B["fill-opacity"]||null!=B["stroke-dasharray"]||null!=B["stroke-miterlimit"]||null!=B["stroke-linejoin"]||null!=B["stroke-linecap"]){h=F.getElementsByTagName("fill");t=-1;h=h&&h[0];!h&&(h=p("fill"));"image"==f.type&&B.src&&(h.src=B.src);B.fill&&(h.on=!0);if(null==h.on||"none"==B.fill||null===B.fill)h.on=!1;h.on&&B.fill&&((O=a(B.fill).match(c._ISURL))?(h.parentNode==F&&F.removeChild(h),
h.rotate=!0,h.src=O[1],h.type="tile",g=f.getBBox(1),h.position=g.x+" "+g.y,f._.fillpos=[g.x,g.y],c._preload(O[1],function(){f._.fillsize=[this.offsetWidth,this.offsetHeight]})):(O=c.getRGB(B.fill),h.color=O.hex,h.src="",h.type="solid",O.error&&(f.type in{circle:1,ellipse:1}||"r"!=a(B.fill).charAt())&&Ma(f,B.fill,h)?(d.fill="none",d.gradient=B.fill,h.rotate=!1):"opacity"in O&&!("fill-opacity"in B)&&(t=O.opacity)));if(-1!==t||"fill-opacity"in B||"opacity"in B)O=((+d["fill-opacity"]+1||2)-1)*((+d.opacity+
1||2)-1)*((+t+1||2)-1),O=k(u(O,0),1),h.opacity=O,h.src&&(h.color="none");F.appendChild(h);h=F.getElementsByTagName("stroke")&&F.getElementsByTagName("stroke")[0];t=!1;!h&&(t=h=p("stroke"));if(B.stroke&&"none"!=B.stroke||B["stroke-width"]||null!=B["stroke-opacity"]||B["stroke-dasharray"]||B["stroke-miterlimit"]||B["stroke-linejoin"]||B["stroke-linecap"])h.on=!0;"none"!=B.stroke&&null!==B.stroke&&null!=h.on&&0!=B.stroke&&0!=B["stroke-width"]||(h.on=!1);O=c.getRGB("stroke"in B?B.stroke:d.stroke);h.on&&
B.stroke&&(h.color=O.hex);O=((+d["stroke-opacity"]+1||2)-1)*((+d.opacity+1||2)-1)*((+O.opacity+1||2)-1);g=.75*(b(B["stroke-width"])||1);O=k(u(O,0),1);null==B["stroke-width"]&&(g=d["stroke-width"]);B["stroke-width"]&&(h.weight=g);g&&1>g&&(O*=g)&&(h.weight=1);h.opacity=O;B["stroke-linejoin"]&&(h.joinstyle=B["stroke-linejoin"])||t&&(t.joinstyle="miter");h.miterlimit=B["stroke-miterlimit"]||8;B["stroke-linecap"]&&(h.endcap="butt"==B["stroke-linecap"]?"flat":"square"==B["stroke-linecap"]?"square":"round");
B["stroke-dasharray"]&&(O={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"},h.dashstyle=O.hasOwnProperty(B["stroke-dasharray"])?O[B["stroke-dasharray"]]:B["stroke-dasharray"].join&&B["stroke-dasharray"].join(" ")||"");t&&F.appendChild(h)}if("text"==f.type){f.paper.canvas.style.display="";F=f.paper.span;h=d.font&&d.font.match(/\d+(?:\.\d*)?(?=px)/);O=d["line-height"]&&(d["line-height"]+
"").match(/\d+(?:\.\d*)?(?=px)/);t=F.style;d.font&&(t.font=d.font);d["font-family"]&&(t.fontFamily=d["font-family"]);d["font-weight"]&&(t.fontWeight=d["font-weight"]);d["font-style"]&&(t.fontStyle=d["font-style"]);h=b(d["font-size"]||h&&h[0])||10;t.fontSize=100*h+"px";O=b(d["line-height"]||O&&O[0])||12;d["line-height"]&&(t.lineHeight=100*O+"px");c.is(B.text,"array")&&(B.text=f.textpath.string=B.text.join("\n").replace(/<br\s*?\/?>/ig,"\n"));f.textpath.string&&(F.innerHTML=a(f.textpath.string).replace(/</g,
"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));F=F.getBoundingClientRect();f.W=d.w=(F.right-F.left)/100;f.H=d.h=(F.bottom-F.top)/100;f.X=d.x;f.Y=d.y;switch(d["vertical-align"]){case "top":f.bby=f.H/2;break;case "bottom":f.bby=-f.H/2;break;default:f.bby=0}("x"in B||"y"in B||void 0!==f.bby)&&(f.path.v=c.format("m{0},{1}l{2},{1}",r(21600*d.x),r(21600*(d.y+(f.bby||0))),r(21600*d.x)+1));F="x y text font font-family font-weight font-style font-size line-height".split(" ");h=0;for(t=F.length;h<t;h++)if(F[h]in
B){f._.dirty=1;break}switch(d["text-anchor"]){case "start":f.textpath.style["v-text-align"]="left";f.bbx=f.W/2;break;case "end":f.textpath.style["v-text-align"]="right";f.bbx=-f.W/2;break;default:f.textpath.style["v-text-align"]="center",f.bbx=0}f.textpath.style["v-text-kern"]=!0}}},Ma=function(f,r,u){f.attrs=f.attrs||{};var k=Math.pow,F="linear",e=".5 .5";f.attrs.gradient=r;r=a(r).replace(c._radial_gradient,function(a,c){F="radial";c=c&&c.split(",")||[];var f=c[3],r=c[4];f&&r&&(f=b(f),r=b(r),.25<
k(f-.5,2)+k(r-.5,2)&&(r=B(.25-k(f-.5,2))*(2*(.5<r)-1)+.5),e=f+" "+r);return""});r=r.split(/\s*\-\s*/);if("linear"==F){var d=r.shift(),d=-b(d);if(isNaN(d))return null}r=c._parseDots(r);if(!r)return null;f=f.shape||f.node;if(r.length){u.parentNode==f&&f.removeChild(u);u.on=!0;u.method="none";u.color=r[0].color;u.color2=r[r.length-1].color;for(var t=[],g=1,O=void 0===r[0].opacity?1:r[0].opacity,h=0,A=r.length;h<A;h++)r[h].offset&&t.push(r[h].offset+" "+r[h].color),void 0!==r[h].opacity&&(g=r[h].opacity);
u.colors=t.length?t.join():"0% "+u.color;u.opacity=g;u["o:opacity2"]=O;"radial"==F?(u.type="gradientTitle",u.focus="100%",u.focussize="0 0",u.focusposition=e,u.angle=0):(u.type="gradient",u.angle=(270-d)%360);f.appendChild(u)}return 1},s=function(a,b,f){f=f||b;var r;f.canvas&&f.canvas.appendChild(a);r=p("skew");r.on=!0;a.appendChild(r);this.skew=r;this.node=this[0]=a;a.raphael=!0;a.raphaelid=this.id=c._oid++;this.Y=this.X=0;this.attrs=this.attrs||{};this.followers=this.followers||[];this.paper=b;
this.ca=this.customAttributes=this.customAttributes||new b._CustomAttributes;this.matrix=c.matrix();this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1};this.parent=f;!f.bottom&&(f.bottom=this);(this.prev=f.top)&&(f.top.next=this);f.top=this;this.next=null},f=c.el;s.prototype=f;f.constructor=s;f.transform=function(b){if(null==b)return this._.transform;var f=this.paper._viewBoxShift,r=f?"s"+[f.scale,f.scale]+"-1-1t"+[f.dx,f.dy]:"",u;f&&(u=b=a(b).replace(/\.{3}|\u2026/g,this._.transform||
""));c._extractTransform(this,r+b);var f=this.matrix.clone(),k=this.skew;b=this.node;var r=~a(this.attrs.fill).indexOf("-"),B=!a(this.attrs.fill).indexOf("url(");f.translate(-.5,-.5);B||r||"image"==this.type?(k.matrix="1 0 0 1",k.offset="0 0",k=f.split(),r&&k.noRotation||!k.isSimple?(b.style.filter=f.toFilter(),f=this.getBBox(),r=this.getBBox(1),B=f.x2&&r.x2&&"x2"||"x",k=f.y2&&r.y2&&"y2"||"y",B=f[B]-r[B],f=f[k]-r[k],b.coordorigin=-21600*B+" "+-21600*f,C(this,1,1,B,f,0)):(b.style.filter="",C(this,
k.scalex,k.scaley,k.dx,k.dy,k.rotate))):(b.style.filter="",k.matrix=a(f),k.offset=f.offset());u&&(this._.transform=u);return this};f.rotate=function(c,f,r){if(this.removed)return this;if(null!=c){c=a(c).split(e);c.length-1&&(f=b(c[1]),r=b(c[2]));c=b(c[0]);null==r&&(f=r);if(null==f||null==r)r=this.getBBox(1),f=r.x+r.width/2,r=r.y+r.height/2;this._.dirtyT=1;this.transform(this._.transform.concat([["r",c,f,r]]));return this}};f.translate=function(c,f){if(this.removed)return this;c=a(c).split(e);c.length-
1&&(f=b(c[1]));c=b(c[0])||0;f=+f||0;this._.bbox&&(this._.bbox.x+=c,this._.bbox.y+=f);this.transform(this._.transform.concat([["t",c,f]]));return this};f.scale=function(c,f,r,u){if(this.removed)return this;c=a(c).split(e);c.length-1&&(f=b(c[1]),r=b(c[2]),u=b(c[3]),isNaN(r)&&(r=null),isNaN(u)&&(u=null));c=b(c[0]);null==f&&(f=c);null==u&&(r=u);if(null==r||null==u)var k=this.getBBox(1);r=null==r?k.x+k.width/2:r;u=null==u?k.y+k.height/2:u;this.transform(this._.transform.concat([["s",c,f,r,u]]));this._.dirtyT=
1;return this};f.hide=function(a){!this.removed&&(this.node.style.display="none");return this};f.show=function(a){!this.removed&&(this.node.style.display="");return this};f._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y+(this.bby||0)-this.H/2,width:this.W,height:this.H}};f.remove=function(){if(!this.removed&&this.parent.canvas){var a=c._engine.getNode(this),b=this.paper,f=this.shape;b.__set__&&b.__set__.exclude(this);d.unbind("raphael.*.*."+this.id);f&&f.parentNode.removeChild(f);
for(a.parentNode&&a.parentNode.removeChild(a);a=this.followers.pop();)a.el.remove();for(;a=this.bottom;)a.remove();this._drag&&this.undrag();if(this.events)for(;a=this.events.pop();)a.unbind();this.removeData();delete b._elementsById[this.id];c._tear(this,this.parent);for(a in this)this[a]="function"===typeof this[a]?c._removedFactory(a):null;this.removed=!0}};f.attr=function(a,b){if(this.removed)return this;if(null==a){var f={},r;for(r in this.attrs)this.attrs.hasOwnProperty(r)&&(f[r]=this.attrs[r]);
f.gradient&&"none"==f.fill&&(f.fill=f.gradient)&&delete f.gradient;f.transform=this._.transform;f.visibility="none"===this.node.style.display?"hidden":"visible";return f}if(null==b&&c.is(a,"string")){if("fill"==a&&"none"==this.attrs.fill&&this.attrs.gradient)return this.attrs.gradient;if("visibility"==a)return"none"===this.node.style.display?"hidden":"visible";var f=a.split(e),u={},k=0;for(r=f.length;k<r;k++)a=f[k],a in this.attrs?u[a]=this.attrs[a]:c.is(this.ca[a],"function")?u[a]=this.ca[a].def:
u[a]=c._availableAttrs[a];return r-1?u:u[f[0]]}if(this.attrs&&null==b&&c.is(a,"array")){u={};k=0;for(r=a.length;k<r;k++)u[a[k]]=this.attr(a[k]);return u}null!=b&&(f={},f[a]=b);null==b&&c.is(a,"object")&&(f=a);for(k in f)d("raphael.attr."+k+"."+this.id,this,f[k],k);if(f){var B={};for(k in this.ca)if(this.ca[k]&&f.hasOwnProperty(k)&&c.is(this.ca[k],"function")&&!this.ca["_invoked"+k]){this.ca["_invoked"+k]=!0;r=this.ca[k].apply(this,[].concat(f[k]));delete this.ca["_invoked"+k];for(u in r)r.hasOwnProperty(u)&&
(f[u]=r[u]);this.attrs[k]=f[k];!1===r&&(B[k]=f[k],delete f[k])}"text"in f&&"text"==this.type&&(c.is(f.text,"array")&&(f.text=f.text.join("\n")),this.textpath.string=f.text.replace(/<br\s*?\/?>/ig,"\n"));n(this,f);var F,k=0;for(r=this.followers.length;k<r;k++)F=this.followers[k],F.cb&&!F.cb.call(F.el,f,this)||F.el.attr(f);for(u in B)f[u]=B[u]}return this};f.blur=function(a){var b=this.node.runtimeStyle,f=b.filter,f=f.replace(O,"");0!==+a?(this.attrs.blur=a,b.filter=f+"  progid:DXImageTransform.Microsoft.Blur(pixelradius="+
(+a||1.5)+")",b.margin=c.format("-{0}px 0 0 -{0}px",r(+a||1.5))):(b.filter=f,b.margin=0,delete this.attrs.blur);return this};f.on=function(a,b){if(this.removed)return this;this.node["on"+a]=function(){var a=c._g.win.event;a.target=a.srcElement;b(a)};return this};c._engine.getNode=function(a){a=a.node||a[0].node;return a.clipRect||a};c._engine.getLastNode=function(a){a=a.node||a[a.length-1].node;return a.clipRect||a};c._engine.group=function(a,b,f){var r=c._g.doc.createElement("div"),u=new s(r,a,f);
r.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";u._id=b||"";b&&(r.className="raphael-group-"+u.id+"-"+b);(f||a).canvas.appendChild(r);u.type="group";u.canvas=u.node;u.transform=c._engine.group.transform;u.top=null;u.bottom=null;return u};c._engine.group.transform=function(f){if(null==f)return this._.transform;var r=this.node.style,u=this.clip,k=this.paper._viewBoxShift,B=k?"s"+[k.scale,k.scale]+"-1-1t"+[k.dx,k.dy]:"";k&&(f=a(f).replace(/\.{3}|\u2026/g,this._.transform||""));
c._extractTransform(this,B+f);f=this.matrix;B=f.offset();k=b(B[0])||0;B=b(B[1])||0;r.left=k+"px";r.top=B+"px";r.zoom=(this._.tzoom=f.get(0))+"";u&&(r.clip=c.format("rect({1}px {2}px {3}px {0}px)",[u[0]-k,u[1]-B,u[2]-k,u[3]-B]));return this};c._engine.path=function(a,c,b){var f=p("shape");f.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";f.coordsize="21600 21600";f.coordorigin=a.coordorigin;a=new s(f,a,b);a.type=c.type||"path";a.path=[];a.Path="";c.type&&delete c.type;n(a,c);R(a,
c);return a};c._engine.rect=function(a,b,f){var r=c._rectPath(b.x,b.y,b.w,b.h,b.r);b.path=r;b.type="rect";a=a.path(b,f);b=a.attrs;a.X=b.x;a.Y=b.y;a.W=b.width;a.H=b.height;b.path=r;return a};c._engine.ellipse=function(a,c,b){c.type="ellipse";a=a.path(c,b);c=a.attrs;a.X=c.x-c.rx;a.Y=c.y-c.ry;a.W=2*c.rx;a.H=2*c.ry;return a};c._engine.circle=function(a,c,b){c.type="circle";a=a.path(c,b);c=a.attrs;a.X=c.x-c.r;a.Y=c.y-c.r;a.W=a.H=2*c.r;return a};c._engine.image=function(a,b,f){var r=c._rectPath(b.x,b.y,
b.w,b.h);b.path=r;b.type="image";b.stroke="none";a=a.path(b,f);f=a.attrs;var r=a.node,u=r.getElementsByTagName("fill")[0];f.src=b.src;a.X=f.x=b.x;a.Y=f.y=b.y;a.W=f.width=b.w;a.H=f.height=b.h;u.parentNode==r&&r.removeChild(u);u.rotate=!0;u.src=f.src;u.type="tile";a._.fillpos=[f.x,f.y];a._.fillsize=[f.w,f.h];r.appendChild(u);C(a,1,1,0,0,0);return a};c._engine.text=function(b,f,u){var k=p("shape"),B=p("path"),F=p("textpath");x=f.x||0;y=f.y||0;text=f.text;B.v=c.format("m{0},{1}l{2},{1}",r(21600*f.x),
r(21600*f.y),r(21600*f.x)+1);B.textpathok=!0;F.string=a(f.text).replace(/<br\s*?\/?>/ig,"\n");F.on=!0;k.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px";k.coordsize="21600 21600";k.coordorigin="0 0";b=new s(k,b,u);b.shape=k;b.path=B;b.textpath=F;b.type="text";b.attrs.text=a(f.text||"");b.attrs.x=f.x;b.attrs.y=f.y;b.attrs.w=1;b.attrs.h=1;n(b,f);R(b,f);k.appendChild(F);k.appendChild(B);return b};c._engine.setSize=function(a,b){var f=this.canvas.style;this.width=a;this.height=b;a==
+a&&(a+="px");b==+b&&(b+="px");f.width=a;f.height=b;f.clip="rect(0 "+a+" "+b+" 0)";this._viewBox&&c._engine.setViewBox.apply(this,this._viewBox);return this};c._engine.setViewBox=function(a,b,c,f,r){d("raphael.setViewBox",this,this._viewBox,[a,b,c,f,r]);var k=this.width,B=this.height,F=1/u(c/k,f/B),e,t;r&&(e=B/f,t=k/c,c*e<k&&(a-=(k-c*e)/2/e),f*t<B&&(b-=(B-f*t)/2/t));this._viewBox=[a,b,c,f,!!r];this._viewBoxShift={dx:-a,dy:-b,scale:F};this.forEach(function(a){a.transform("...")});return this};var p;
c._engine.initWin=function(b){var f=b.document;f.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!f.namespaces.rvml&&f.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),p=c._createNode=function(b,c){var r=f.createElement("<rvml:"+b+' class="rvml">'),u;for(u in c)r[u]=a(c[u]);return r}}catch(r){p=c._createNode=function(b,c){var r=f.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">'),u;for(u in c)r[u]=a(c[u]);return r}}};c._engine.initWin(c._g.win);
c._engine.create=function(){var a=c._getContainer.apply(0,arguments),b=a.container,f=a.height,r=a.width,u=a.x,a=a.y;if(!b)throw Error("VML container not found.");var k=new c._Paper,B=k.canvas=c._g.doc.createElement("div"),F=B.style,u=u||0,a=a||0,r=r||512,f=f||342;k.width=r;k.height=f;r==+r&&(r+="px");f==+f&&(f+="px");k.coordsize="21600000 21600000";k.coordorigin="0 0";B.id="raphael-paper-"+k.id;k.span=c._g.doc.createElement("span");k.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;";
B.appendChild(k.span);F.cssText=c.format("top:0;left:0;width:{0};height:{1};display:inline-block;cursor:default;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",r,f);1==b?(c._g.doc.body.appendChild(B),F.left=u+"px",F.top=a+"px",F.position="absolute"):b.firstChild?b.insertBefore(B,b.firstChild):b.appendChild(B);k.renderfix=function(){};return k};c.prototype.clear=function(){var a;for(d("raphael.clear",this);a=this.bottom;)a.remove();this.canvas.innerHTML="";this.span=c._g.doc.createElement("span");
this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas.appendChild(this.span);this.bottom=this.top=null};c.prototype.remove=function(){var a;for(d("raphael.remove",this);a=this.bottom;)a.remove();this.canvas.parentNode.removeChild(this.canvas);for(a in this)this[a]="function"==typeof this[a]?c._removedFactory(a):null;return!0};var w=c.st,va;for(va in f)f.hasOwnProperty(va)&&!w.hasOwnProperty(va)&&(w[va]=function(a){return function(){var b=
arguments;return this.forEach(function(c){c[a].apply(c,b)})}}(va))}})();$?s.win.Raphael=c:Raphael=c;return c},!0)})();d.Raphael=D;d.Raphael.desc="";m&&m!==D?window.Raphael=m:window.Raphael===D&&(window.Raphael=void 0)}]);
FusionCharts.register("module",["private","fusioncharts.redraphael.helper",function(){var d={};this.hcLib.Raphael.fn._elementFromEvent=function(m){if(!m||this.removed)return null;var D=m.srcElement||m.target||(m=m.originalEvent)&&(m.srcElement||m.target)||d;"tspan"===D.nodeName&&(D=D.parentNode);return this.getById(D.raphaelid)}}]);
FusionCharts.register("module",["private","fusioncharts.redraphael.css",function(){var d=this.hcLib.Raphael,m=d.eve,D=d._g,v=d.fn,p=d.el,c=/[, ]+/,K=/\B([A-Z]{1})/g,b,G;b=function(a){this.rules={};this.ns=a||""};G=b.prototype;G.getSheet=function(){var a=this.node;a||(a=this.node=D.doc.createElement("style"),this.node.setAttribute("id",d.format("raphael-stylesheet-{0}",d._oid++)),this.node.setAttribute("type","text/css"),(D.doc.head||D.doc.getElementsByTagName("head")[0]).appendChild(this.node));return a};
G.setCssText=function(a){var b=this.node;if(!b)if(a)b=this.getSheet();else return;b.styleSheet?b.styleSheet.cssText=a||"":(b.innerHTML="",a&&b.appendChild(D.doc.createTextNode(a)))};G.destroy=function(){this.node&&this.node.parentNode&&this.node.parentNode.removeChild(this.node);delete this.rules};G.clear=function(){this.setCssText("");this.rules={}};G.add=function(a,b){var c=this.rules[a]||(this.rules[a]={}),d;for(d in b)c[d]=b[d]};G.render=function(){this.setCssText(this.toString())};G.toString=
function(a){var b=a?"":"\n",c=a?"":"\t";a=a?":":": ";var d=b,p,g;for(p in this.rules){d+=p.replace(/(^|\,)/g,"$1"+this.ns+" ")+" {"+b;p=this.rules[p];for(g in p)p[g]&&(d+=c+g.replace(K,"-$1").toLowerCase()+a+p[g]+";"+b);d+="}"+b}return d};m.on("raphael.new",function(){this._stylesheet=this._stylesheet||new b;this.cssNamespace("")});m.on("raphael.remove",function(){this._stylesheet&&this._stylesheet.destroy();delete this._stylesheet});v.cssNamespace=function(a){arguments.length&&(this._stylesheet.ns=
d.format("{0}#raphael-paper-{1}",a&&a+" "||"",this.id));return this._stylesheet.ns};v.cssAddRule=function(a,b){if(1===arguments.length&&"object"===typeof a){for(var c in a)this.cssAddRule(c,a[c]);return this}return this._stylesheet.add(a,b),this};v.cssRender=function(){return d.svg&&this._stylesheet.render(),this};v.cssClear=function(){return this._stylesheet.clear(),this};d._availableAttrs["class"]="";d.svg&&m.on("raphael.attr.class",function(a){var b=this.node;a=a||"";b.setAttribute("class","group"===
this.type&&this._id?"raphael-group-"+this.id+"-"+this._id+" "+a:a)});d.vml&&m.on("raphael.attr.class",function(a){var b=this.paper,c="."+a,b=b._stylesheet&&b._stylesheet.rules,d=this.parent,p=this.attrs,g={},e;this.node.className="group"===this.type?a&&this._id+" "+a||this._id:"rvml "+a;if(c&&b){a=b[c];for(e in a)"color"===e&&"text"===this.type&&(e="fill"),!p[e]&&(g[e]=a[e]);for(;d&&d.attr;){if(a=d.attr("class"))for(e in c="."+a+" "+c,a=b[c],a)"color"===e&&"text"===this.type&&(e="fill"),p[e]||g[e]||
(g[e]=a[e]);d=d.parent}this.css(g)}});p.css=function(a,b){var p,v,z,g;if(this.removed)return this;this.styles||(this.styles={});if(null==b&&d.is(a,"string")){p=a.split(c);v={};g=0;for(z=p.length;g<z;g++)a=p[g],a in this.styles&&(v[a]=this.styles[a]);return z-1?v:v[p[0]]}if(null==b&&d.is(a,"array")){v={};g=0;for(z=a.length;g<z;g++)v[a[g]]=this.styles(a[g]);return v}null!=b?(p={},p[a]=b):null!=a&&d.is(a,"object")&&(p=a);v={};for(g in p)z=g.replace(/\B([A-Z]{1})/g,"-$1").toLowerCase(),d._availableAttrs.hasOwnProperty(z)||
"color"===z?("color"===z&&"text"===this.type&&(z="fill"),v[z]=p[g],v.dirty=!0):(m("raphael.css."+z+"."+this.id,this,p[g],z),this.node.style[z]=p[g],this.styles[z]=p[g]);g=0;for(z=this.followers.length;g<z;g++)this.followers[g].el.attr(p);v.hasOwnProperty("dirty")&&(delete v.dirty,this.attr(v));return this}}]);
FusionCharts.register("module",["private","modules.renderer.js-raphaelexport",function(){var d=this.hcLib,m=d.Raphael,D=d.pluckNumber,v=d.pluck,p=m._availableAttrs,c=/^matrix\(|\)$/g,K=/\,/g,b=/\n|<br\s*?\/?>/ig,G=/[^\d\.]/ig,a=/[\%\(\)\s,\xb0#]/g,l=/group/ig,P=/&/g,N=/"/g,z=/'/g,g=/</g,e=/>/g,h=0;(function(d){var m=Math,H=parseFloat,q=m.max,J=m.abs,w=m.pow,ja=String,s=/[, ]+/,$=[{reg:/xmlns\=\"http\:\/\/www.w3.org\/2000\/svg\"/ig,repStr:""},{reg:/^.*<svg /,repStr:'<svg xmlns:xlink="http://www.w3.org/1999/xlink" xmlns="http://www.w3.org/2000/svg" '},
{reg:/\/svg>.*$/,repStr:"/svg>"},{reg:/<desc\>[^<]*<\/desc\>/,repStr:""},{reg:/zIndex="[^"]+"/g,repStr:""},{reg:/url\((\\?[\'\"])[^#]+#/g,repStr:"url($1#"},{reg:/ href=/g,repStr:" xlink:href="},{reg:/(id|class|width|height)=([^" >]+)/g,repStr:'$1="$2"'},{reg:/:(path|rect)/g,repStr:"$1"},{reg:/<ima?ge? ([^\>]+?[^\/])\>/gi,repStr:"<image $1 />"},{reg:/<\/ima?ge?\>/g,repStr:""},{reg:/style="([^"]+)"/g,repStr:function(a){return a.toLowerCase()}}],U={blur:function(){},transform:function(){},src:function(a,
b){b.attrSTR+=' xlink:href="'+b.attrs.src+'"'},path:function(a,b){var c=b.attrs.path,c=d._pathToAbsolute(c||"");b.attrSTR+=' d="'+(c.toString&&c.toString()||"").replace(K," ")+'"'},gradient:function(b,c,e){var g=b.attrs.gradient,h="linear",l,p,s,I=.5,z=.5,t=p="",R="",Y,C,v,G;l=g.replace(a,"_");if(!e[l]){g=ja(g).replace(d._radial_gradient,function(a,b){var c,e,d,t,g,q,l;b=b&&b.split(",")||[];h="radial";c=b[0];e=b[1];d=b[2];t=b[3];g=b[4];G=b[5];l=c&&e;d&&(v=/\%/.test(d)?d:H(d));if("userSpaceOnUse"===
G)return l&&(I=c,z=e),t&&g&&(Y=t,C=g,l||(I=Y,z=C)),"";l&&(I=H(c),z=H(e),c=2*(.5<z)-1,.25<(q=w(I-.5,2))+w(z-.5,2)&&.25>q&&(z=m.sqrt(.25-q)*c+.5)&&.5!==z&&(z=z.toFixed(5)-1E-5*c));t&&g&&(Y=H(t),C=H(g),c=2*(.5<C)-1,.25<(q=w(Y-.5,2))+w(C-.5,2)&&.25>q&&(C=m.sqrt(.25-q)*c+.5)&&.5!==C&&(C=C.toFixed(5)-1E-5*c),l||(I=Y,z=C));return""});g=g.split(/\s*\-\s*/);if("linear"===h){p=g.shift();p=-H(p);if(isNaN(p))return null;s=[0,0,m.cos(d.rad(p)),m.sin(d.rad(p))];p=1/(q(J(s[2]),J(s[3]))||1);s[2]*=p;s[3]*=p;0>s[2]&&
(s[0]=-s[2],s[2]=0);0>s[3]&&(s[1]=-s[3],s[3]=0)}g=d._parseDots(g);if(!g)return null;"radial"===h?(p='<radialGradient fx = "'+I+'" fy = "'+z+'" cy = "'+C+'" cx = "'+Y+'" r = "'+v+'" gradientUnits = "'+G+'" id = "'+l+'">',t="</radialGradient>"):(p='<linearGradient x1 = "'+s[0]+'" y1 = "'+s[1]+'" x2 = "'+s[2]+'" y2 = "'+s[3]+'" gradientTransform ="matrix('+b.matrix.invert()+')" id = "'+l+'">',t="</linearGradient>");b=0;for(s=g.length;b<s;b++)R+='<stop offset="'+(g[b].offset?g[b].offset:b?"100%":"0%")+
'" stop-color="'+(g[b].color||"#fff")+'" stop-opacity="'+(void 0===g[b].opacity?1:g[b].opacity)+'" />';e[l]=!0;e.str+=p+R+t}c.attrSTR+=" fill=\"url('#"+l+"')\""},fill:function(a,b){var c=b.attrs,e=c.fill,g;a.attrs.gradient||(e=d.color(e),g=e.opacity,"text"===a.type?b.styleSTR+="fill:"+e+"; stroke-opacity:0; ":(b.attrSTR+=' fill="'+e+'"',c["fill-opacity"]||!g&&0!==g||(b.attrSTR+=' fill-opacity="'+g+'"')))},stroke:function(a,b){var c=b.attrs,e,g;e=d.color(c.stroke);g=e.opacity;"text"!==a.type&&(b.attrSTR+=
' stroke="'+e+'"',c["stroke-opacity"]||!g&&0!==g||(b.attrSTR+=' stroke-opacity="'+g+'"'))},"clip-rect":function(b,e,d){var g=ja(e.attrs["clip-rect"]),q=g.split(s),g=g.replace(a,"_")+"__"+h++;4===q.length&&(d[g]||(d[g]=!0,d.str+='<clipPath id="'+g+'"><rect x="'+q[0]+'" y="'+q[1]+'" width="'+q[2]+'" height="'+q[3]+'" transform="matrix('+b.matrix.invert().toMatrixString().replace(c,"")+')"/></clipPath>'),e.attrSTR+=' clip-path="url(#'+g+')"')},cursor:function(a,b){var c=b.attrs.cursor;c&&(b.styleSTR+=
"cursor:"+c+"; ")},font:function(a,b){b.styleSTR+="font:"+b.attrs.font.replace(/\"/ig," ")+"; "},"font-size":function(a,b){var c=v(b.attrs["font-size"],"10");c&&c.replace&&(c=c.replace(G,""));b.styleSTR+="font-size:"+c+"px; "},"font-weight":function(a,b){b.styleSTR+="font-weight:"+b.attrs["font-weight"]+"; "},"font-family":function(a,b){b.styleSTR+="font-family:"+b.attrs["font-family"]+"; "},"line-height":function(){},"clip-path":function(){},visibility:function(){},"vertical-align":function(){},
"text-anchor":function(a,b){var c=b.attrs["text-anchor"]||"middle";"text"===a.type&&(b.attrSTR+=' text-anchor="'+c+'"')},title:function(){},text:function(a,c){var d=c.attrs,h=d.text,q=v(d["font-size"],d.font,"10"),l=v(d["line-height"]),n,p,s;q&&q.replace&&(q=q.replace(G,""));q=D(q);l&&l.replace&&(l=l.replace(G,""));l=D(l,q&&1.2*q);n=q?.85*q:.75*l;q=d.x;p=v(d["vertical-align"],"middle").toLowerCase();h=ja(h).split(b);s=h.length;d=0;for(n="top"===p?n:"bottom"===p?n-l*s:n-l*s*.5;d<s;d++)c.textSTR+="<tspan ",
p=(h[d]||"").replace(P,"&amp;").replace(N,"&quot;").replace(z,"&#39;").replace(g,"&lt;").replace(e,"&gt;"),c.textSTR=d?c.textSTR+('dy="'+l+'" x="'+q+'" '):c.textSTR+('dy="'+n+'"'),c.textSTR+=">"+p+"</tspan>"}},ba=function(a,b){var e="",d={attrSTR:"",styleSTR:"",textSTR:"",attrs:a.attr()},g=a.isShadow,h="",q="",n,s,w=d.attrs;if("none"===a.node.style.display||g)a.next&&(e+=ba(a.next,b));else{for(n in w)if("gradient"!==n&&(void 0!==p[n]||U[n])&&void 0!==w[n])if(U[n])U[n](a,d,b);else d.attrSTR+=" "+n+
'="'+w[n]+'"';a.attrs.gradient&&U.gradient(a,d,b);"rect"===a.type&&w.r&&(d.attrSTR+=' rx="'+w.r+'" ry="'+w.r+'"');for(s in a.styles)d.styleSTR+=s+":"+a.styles[s]+"; ";"image"===a.type&&(d.attrSTR+=' preserveAspectRatio="none"');if("text"===a.type&&!w["text-anchor"])U["text-anchor"](a,d);a.bottom&&(h=ba(a.bottom,b));a.next&&(q=ba(a.next,b));g=a.type;g.match(l)&&(g="g");e+="<"+g+' transform="matrix('+a.matrix.toMatrixString().replace(c,"")+')" style="'+d.styleSTR+'"'+d.attrSTR+">"+d.textSTR+h+"</"+
g+">"+q}return e};d.fn.toSVG=function(a){var b="",c={str:""},e=0,g=$.length,h="";if(d.svg){if(this.canvas&&this.canvas.parentNode){for(b=this.canvas.parentNode.innerHTML;e<g;e+=1)c=$[e],b=b.replace(c.reg,c.repStr);this._stylesheet&&(b=b.replace(/^(<svg\s[\s\S]*?>)/ig,'$1<style type="text/css">'+this._stylesheet.toString(!0)+"</style>"))}}else b='<svg style="overflow: hidden; position: relative;" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+this.width+'" version="1.1" height="'+
this.height+'">',this.bottom&&(h=ba(this.bottom,c)),b+="<defs>"+c.str+"</defs>"+h+"</svg>";a||(b=b.replace(/<image [^\>]*\>/gi,""));return b}})(m)}]);
FusionCharts.register("module",["private","modules.renderer.js-raphaelshadow",function(){var d=this.window,m=d.Math.sqrt,D=d.parseFloat,v=d.parseInt,d=d.SVGFilterElement||d.SVGFEColorMatrixElement&&2===d.SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE,p=this.hcLib.Raphael,c={"drop-shadow":"drop-shadow",stroke:"stroke",fill:"fill","stroke-width":"stroke-width","stroke-opacity":"stroke-opacity","stroke-linecap":"stroke-linecap","stroke-linejoin":"stroke-linejoin","shape-rendering":"shape-rendering",
transform:"transform"},K=p._createNode,b;p.svg?(d&&(p.el.dropshadow=function(b,a,c,d){var v=this.node,z=this._.shadowFilter,g=this.paper.cacheShadows||(this.paper.cacheShadows={}),e="drop-shadow"+[b,a,c,d].join(" "),h;if("none"===b){if(z){z.use-=1;this.node.removeAttribute("filter");if(!z.use){e=z.hash;for(h in z)b=z[h],b.parentNode&&b.parentNode.removeChild(b),delete z[h];delete g[e]}delete this._.shadowFilter}}else z&&g[e]===z||(z=this.paper.defs.appendChild(K("filter",{id:p.createUUID(),width:"200%",
height:"200%"})),d=p.color(d),d.error&&(d=p.color("rgba(0,0,0,1)")),h=p.pick(d.opacity,1),this._.shadowFilter=g[e]={use:1,filter:z,hash:e,offset:z.appendChild(K("feOffset",{result:"offOut","in":"SourceGraphic",dx:D(b),dy:D(a)})),matrix:z.appendChild(K("feColorMatrix",{result:"matrixOut","in":"offOut",type:"matrix",values:"0 0 0 0 "+d.r/255+" 0 0 0 0 "+d.g/255+" 0 0 0 0 "+d.b/255+" 0 0 0 "+h+" 0"})),blur:z.appendChild(K("feGaussianBlur",{result:"blurOut","in":"matrixOut",stdDeviation:m(D(c))})),blend:z.appendChild(K("feComposite",
{"in":"SourceGraphic",in2:"blurOut",operator:"over"}))},v.setAttribute("filter",'url("'+p._url+"#"+z.id+'")'));return this}),b=function(b,a){var d=this.__shadowscale,p={},m,z;for(z in b)switch(c[z]&&(p[z]=b[z],delete b[z]),z){case "transform":m=a.matrix.clone();m.translate(this.__shadowx,this.__shadowy);this.transform(m.toTransformString());break;case "stroke-width":b[z]=((p[z]||1)+6-2*this.__shadowlevel)*d}this.attr(b);for(z in p)b[z]=p[z]},p.ca["drop-shadow"]=function(c,a,d,m,D,z){d=this._.shadows||
(this._.shadows=[]);var g,e,h,n,M;if(!this.__shadowblocked)if("none"===c)for(;e=d.pop();)e.remove();else for(m=p.color(m),m.error&&(m=p.color("rgba(0,0,0,1)")),D instanceof Array?(g=D[0],D=D[1]):g=D,g=1/p.pick(g,1),D=1/p.pick(D,1),c=p.pick(c,1)*g,a=p.pick(a,1)*g,g=.05*p.pick(m.opacity,1),h=v(this.attr("stroke-width")||1,10)+6,n=this.matrix.clone(),n.translate(c,a),M=1;3>=M;M++)e=(d[M-1]||this.clone().follow(this,b,!z&&"before")).attr({stroke:m.hex,"stroke-opacity":g*M,"stroke-width":(h-2*M)*D,transform:n.toTransformString(),
"stroke-linecap":"round","stroke-linejoin":"round",fill:"none"}),e.__shadowlevel=M,e.__shadowscale=D,e.__shadowx=c,e.__shadowy=a,z&&z.appendChild(e),d.push(e);return!1},p.el.shadow=function(b,a,c,d){var m;c&&c.constructor===p.el.constructor&&(d=c,c=void 0);"object"===typeof b&&(a&&a.constructor===p.el.constructor&&(d=a),a=b.opacity,c=b.scalefactor,m=!!b.useFilter,b=void 0===b.apply?!!a:b.apply);void 0===a&&(a=1);if(this.dropshadow){if(m)return b&&this.dropshadow(1,1,3,"rgb(64,64,64)")||this.dropshadow("none"),
this;this._.shadowFilter&&this.dropshadow("none")}return this.attr("drop-shadow",b?[1,1,3,"rgba(64,64,64,"+a+")",c,d]:"none")}):p.vml?(p.ca["drop-shadow"]=function(b,a,c,d,m,z){var g=this._.shadow,e,h;if(this.isShadow)return!1;"none"===b?g&&(this._.shadow=g.remove()):(g||(g=this._.shadow=this.clone(),z&&z.appendChild(g.follow(this))||g.follow(this,void 0,"before"),g.attr({fill:"none","fill-opacity":.5,"stroke-opacity":1}).isShadow=!0,0>=g.attr("stroke-width")&&g.attr("stroke-width",1)),z=g.node.runtimeStyle,
e=z.filter.replace(/ progid:\S+Blur\([^\)]+\)/g,""),d=p.color(d),d.error&&(d=p.color("rgba(0,0,0,1)")),h=p.pick(d.opacity,1)/5,m=1/p.pick(m,1),b=p.pick(b,1)*m,a=p.pick(a,1)*m,g.translate(b,a),z.filter=e+" progid:DXImageTransform.Microsoft.Blur(pixelRadius="+D(.4*c)+" makeShadow=True Color="+d.hex+' shadowOpacity="'+h+'");');return!1},p.el.shadow=function(b,a,c,d){c&&c.constructor===p.el.constructor&&(d=c,c=void 0);"object"===typeof b&&(a&&"group"===a.type&&(d=a),a=b.opacity,c=b.scalefactor,b=void 0===
b.apply?!!a:b.apply);void 0===a&&(a=1);return this.attr("drop-shadow",b||!a?[1,1,5,"rgba(64,64,64,"+a+")",c,d]:"none")}):p.canvas&&(p.el.shadow=function(){return this})}]);
FusionCharts.register("module",["private","modules.renderer.js-raphaelshapes",function(){var d=this.window,m="createTouch"in d.document,D=/msie/i.test(d.navigator.userAgent)&&!d.opera,v=d.Math,p=v.cos,c=v.sin,K=v.abs,b=v.pow,G=v.atan2,a=v.tan,l=v.acos,P=v.min,N=v.round,z=v.PI,g=v.sqrt,e=2*z,h=d.parseInt,n=d.parseFloat,M=String,H=Array.prototype.slice,q=b(2,-24),J="rgba(192,192,192,"+(D?.002:1E-6)+")",w=this.hcLib.Raphael,ja=w.eve,s=w._createNode,$=w._setFillAndStroke,U=w.el.constructor,ba={speed:"optimizeSpeed",
crisp:"crispEdges",precision:"geometricPrecision"},Ba={enabled:!1,"false":!1,0:!1,disabled:!0,"true":!0,1:!0},la={Q:"L",Z:"X",q:"l",z:"x",",":" "},ga=/,?([achlmqrstvxz]),?/gi,ea=/\s*\,\s*/g,pa,Z=function(){return this.join(",").replace(ga,pa)},ma,L,I=w._cacher(function(a,c,d,e){return g(b(d-a,2)+b(e-c,2))}),fa=w._cacher(function(a,b,c,d,e){var g=c-a,h=d-b;c=I(a,b,c,d);return{x:a+g/c*e,y:b+h/c*e}});if(w.svg)ja.on("raphael.attr.shape-rendering",function(a,b){var c=this.node;this.attrs[b]=a=ba[a]||a||
"auto";c.setAttribute(b,a);c.style.shapeRendering=a});else if(w.vml)ja.on("raphael.attr.shape-rendering",function(a){this.node.style.antialias="crisp"!==a});w.define&&w.define([{name:"polypath",polypath:function(){return this.path(void 0,w._lastArgIfGroup(arguments))},ca:{polypath:function(a,b,d,e,g,q){var l,s,m;l=[];a=h(a,10)||0;b=n(b)||0;d=n(d)||0;e=n(e)||0;g=null===g||isNaN(g)?.5*z:w.rad(g);q=null===q||isNaN(q)?0:n(q);s=g;if(2<a)switch(g=2*z/a,q){case 0:for(q=0;q<a;q++)l.push("L",b+e*p(-s),d+e*
c(-s)),s+=g;l[0]="M";l.push("Z");break;case 1:for(q=0;q<a;q++)l.push("M",b,d,"L",b+e*p(-s),d+e*c(-s)),s+=g;break;default:g*=.5;m=e*p(g)*(1-q);for(q=0;q<a;q++)l.push("L",b+e*p(-s),d+e*c(-s)),s+=g,l.push("L",b+m*p(-s),d+m*c(-s)),s+=g;l[0]="M";l.push("Z")}else 0===e?l.push("M",b,d,"L",b,d,"Z"):l.push("M",b-e,d,"A",e,e,0,0,0,b+e,d,"A",e,e,0,0,0,b-e,d,"Z");return{path:l}},r:function(a){var b=this.attrs.polypath;b[3]=a;this.attr("polypath",b);return!1}}},{name:"ringpath",ringpath:function(){return this.path(void 0,
w._lastArgIfGroup(arguments))},ca:function(a,b,d,g,h,l){var n=l%e-h%e,s=l-h,w,m,L,I,J;this._.ringangle=.5*(h+l);K(s)<q?(s=p(h),h=c(h),d=["M",a+d*s,b+d*h,"L",a+g*s,b+g*h,"Z"]):(K(s)>q&&K(s)%e<q?(d=["M",a-d,b,"A",d,d,0,0,0,a+d,b,"A",d,d,0,0,0,a-d,b],0!==g&&(d=d.concat(["M",a-g,b,"A",g,g,0,0,1,a+g,b,"A",g,g,0,0,1,a-g,b]))):(s=p(h),h=c(h),w=p(l),l=c(l),n%=e,0>n&&(n+=e),n=n<z?0:1,m=a+d*s,I=b+d*h,L=a+d*w,J=b+d*l,w=a+g*w,l=b+g*l,.01>K(m-L)&&.01>K(I-J)&&(I=J+.01),d=["M",m,I,"A",d,d,0,n,1,L,J,"L",w,l],0!==
g&&(a+=g*s,b+=g*h,.01>K(w-a)&&.01>K(l-b)&&(b=l+.01),d.push("A",g,g,0,n,0,a,b))),d.push("Z"));return{path:d}}},{name:"cubepath",cubepath:function(){var a={"stroke-linejoin":"round","shape-rendering":"precision",stroke:"none"},b=arguments,c=b.length-1,d=b[c],e,g;d&&d.constructor===w.el.constructor?b[c]=void 0:d=void 0;c=this.path(a,d);e=this.path(a,d);a=this.path(a,d);a._.cubetop=c.follow(a,void 0,"before");a._.cubeside=e.follow(a,void 0,"before");for(g in w.fn.cubepath.ca)a.ca[g]=w.fn.cubepath.ca[g];
return a.attr("cubepath",[b[0],b[1],b[2],b[3],b[4],b[5]])},fn:{_getBBox2:function(){var a=this._.cubeside.getBBox(),b=this._.cubetop.getBBox(),c=this.getBBox();return{x:c.x+b.height,y:c.y-a.width,width:c.width,height:c.height}}},ca:{cubepath:function(a,b,c,d,e,g){var h=this._.cubetop,q=this._.cubeside;a=a||0;b=b||0;c=c||0;d=d||0;e=e||0;g=g||0;this.attr("path",["M",a+c,b,"l",0,d,-c,0,0,-d,"z"]);h.attr("path",["M",a,b,"l",1,1,c-1,0,0,-1,e,-g,-c,0,"z"]);q.attr("path",["M",a+c-1,b+1,"l",0,d-1,1,0,e,-g,
0,-d,-e,g]);return!1},"stroke-linejoin":function(){return{"stroke-linejoin":"round"}},"drop-shadow":function(a,b,c,d){var e=this._.cubetop,g=this._.cubeside;this.dropshadow&&(e.dropshadow(a,-b,c,d),g.dropshadow(a,-b,c,d));return!1},fill:function(a,b){var c=this._.cubetop,d=this._.cubeside,e=this.attr("cubepath")||[0,0,0,0,0,0],g=e[2],h=e[4],e=e[5],q;a=w.color(a);b?(this.attr("fill",a),c.attr("fill",w.tintshade(a,-.78).rgba),d.attr("fill",w.tintshade(a,-.65).rgba)):(q="opacity"in a?"rgba("+[a.r,a.g,
a.b,a.opacity]+")":"rgb("+[a.r,a.g,a.b]+")",this.attr("fill",[270,w.tintshade(q,.55).rgba,w.tintshade(q,-.65).rgba].join("-")),d.attr("fill",[270,w.tintshade(q,-.75).rgba,w.tintshade(q,-.35).rgba].join("-")),c.attr("fill",[45+w.deg(G(e,h+g)),w.tintshade(q,-.78).rgba,w.tintshade(q,.22).rgba].join("-")));return!1}}},{name:"scroller",scroller:function(a,b,c,d,e,g,h){var q=this.group("scroller",h),l=q.attrs,s=q._.scroller={};e=e&&"horizontal"||"vertical";var p,m={},L,I,z;s.track=this.rect(q).mousedown(function(a){var b=
l["scroll-position"];a="horizontal"===l["scroll-orientation"]?a.layerX||a.x:a.layerY||a.y;a=(a-s.anchorOffset)/s.trackLength;p=w.animation({"scroll-position":a},2E3*K(b-a),"easeIn");q.animate(p);ja("raphael.scroll.start."+q.id,q,b)}).mouseup(s._mouseupTrack=function(){this.stop(p);ja("raphael.scroll.end."+this.id,this,l["scroll-position"])},q,!0);s.anchor=this.rect(q).drag(function(){m["scroll-position"]=L+arguments[I]/s.trackLength;q.animate(m,0)},function(a,b,c){I="horizontal"===l["scroll-orientation"]?
0:1;ja("raphael.scroll.start."+q.id,q,L=l["scroll-position"]);c.stopPropagation()},function(){ja("raphael.scroll.end."+q.id,q,L=l["scroll-position"])});for(z in w.fn.scroller.fn)q[z]=w.fn.scroller.fn[z];for(z in w.fn.scroller.ca)q.ca[z]=w.fn.scroller.ca[z];l["scroll-orientation"]=e;l["stroke-width"]=1;q.ca["scroll-repaint"]=q.ca["scroll-repaint-"+e];!w.is(g,"object")&&(g={});return q.attr({ishot:!0,"scroll-display-buttons":g.showButtons&&"arrow"||"none","scroll-display-style":g.displayStyleFlat&&
"flat"||"3d","scroll-ratio":n(g.scrollRatio)||1,"scroll-position":n(g.scrollPosition)||0,"scroll-repaint":[a,b,c,d]})},fn:{scroll:function(a,b){var c=this._.scroller;b=b||this;c.callback=function(){return a.apply(b,arguments)};return this},remove:function(){var a=this._.scroller,b;this.attr("scroll-display-buttons","none");a.track.unmouseup(a._mouseupTrack);for(b in a)a[b]&&a[b].remove&&a[b].remove(),a[b]=null;delete this._.scroller;w.el.remove.apply(this,arguments)}},ca:{"stroke-width":function(){return!1},
"drop-shadow":function(a,b,c,d,e,g){this._.scroller.track.attr("drop-shadow",[a,b,c,d,e,g]);return!1},"scroll-display-style":function(a){var b=this.attrs,c=b["scroll-display-style"],d=b.fill;a={flat:"flat","3d":"3d",transparent:"transparent"}[a]||c;d&&a!==c&&(b["scroll-display-style"]=a,this.attr("fill",d));return{"scroll-display-style":a}},"scroll-display-buttons":function(a){var b=this,c=b.paper,d=b._.scroller,e=b.attrs,g=e["scroll-display-buttons"],h=e["scroll-repaint"],q,l;void 0===g&&(g="none");
a={none:"none",arrow:"arrow"}[a]||g;a!==g&&(e["scroll-display-buttons"]=a,"none"===a&&d.start?(d.arrowstart.remove(),delete d.arrowstart,d.arrowend.remove(),delete d.arrowend,d.start.unmouseup(d._mouseupStart),d.start.remove(),delete d.start,d.end.unmouseup(d._mouseupEnd),d.end.remove(),delete d.end):(d.arrowstart=c.polypath(b),d.arrowend=c.polypath(b),d.start=c.rect(b).mousedown(function(){var a;0!==(a=e["scroll-position"])&&(b.animate({"scroll-position":a-.1},100).animate(q=w.animation({"scroll-position":0},
4500*a,"easeIn")),ja("raphael.scroll.start."+b.id,b,a))}).mouseup(d._mouseupStart=function(){b.stop(q);ja("raphael.scroll.end."+b.id,b,e["scroll-position"])},b,!0),d.end=c.rect(b).mousedown(function(){var a;1!==(a=e["scroll-position"])&&(b.animate({"scroll-position":a+.1},100).animate(l=w.animation({"scroll-position":1},4500*(1-a),"easeIn")),ja("raphael.scroll.start."+b.id,b,a))}).mouseup(d._mouseupEnd=function(){b.stop(l);ja("raphael.scroll.end."+b.id,b,e["scroll-position"])},b,!0),e.fill&&b.attr("fill",
e.fill)),h&&b.attr("scroll-repaint",h));return{"scroll-display-buttons":a}},"scroll-orientation":function(a){var b=this.attrs,c=b["scroll-repaint"],d=b["scroll-orientation"];a={horizontal:"horizontal",vertical:"vertical"}[a]||d;d!==a&&(this.ca["scroll-repaint"]=this.ca["scroll-repaint-"+a],c&&(c[2]+=c[3],c[3]=c[2]-c[3],c[2]-=c[3],this.attr("scroll-repaint",c)),b.fill&&this.attr("fill",b.fill));return{"scroll-orientation":a}},"scroll-ratio":function(a){var b=this.attrs,c=b["scroll-ratio"],d=b["scroll-repaint"];
a=1<a?1:.01>a?.01:n(a);d&&a!==c&&(b["scroll-ratio"]=a,this.attr("scroll-repaint",d));return{"scroll-ratio":a}},"scroll-position":function(a,b){var c=this.attrs,d="horizontal"===c["scroll-orientation"],e=c["scroll-repaint"],g=c["scroll-position"],h=this._.scroller,q=h.anchor;a=1<a?1:0>a?0:n(a);isNaN(a)&&(a=g);e&&(g!==a||b)&&(g=h.start&&h.start.attr(d&&"width"||"height")||0,d&&q.attr("x",e[0]+g+(e[2]-2*g-q.attr("width"))*a+.5)||q.attr("y",e[1]+g+(e[3]-2*g-q.attr("height"))*a+.5),!b&&1>c["scroll-ratio"]&&
(ja("raphael.scroll.change."+this.id,this,a),h.callback&&h.callback(a)));return{"scroll-position":a}},r:function(a){var b=this._.scroller;b.track.attr("r",a);b.anchor.attr("r","none"===this.attrs["scroll-display-buttons"]&&a||0);return!1},"scroll-repaint-horizontal":function(a,b,c,d){var e=this.attrs,g=this._.scroller,h=e["scroll-ratio"],q=e["scroll-position"],l=0,n=c*h,e="none"===e["scroll-display-buttons"];c&&(c-=1);a&&(a+=.5);d&&(d-=1);b&&(b+=.5);g.track.attr({width:c,height:d,y:b,x:a}).crisp();
e||(l=P(d,.5*c),n-=2*l*h,g.start.attr({width:l,height:d,x:a,y:b}),g.arrowstart.attr("polypath",[3,a+.5*l,b+.5*d,.25*l,180]),g.end.attr({width:l,height:d,x:a+c-l,y:b}),g.arrowend.attr("polypath",[3,a+c-.5*l,b+.5*l,.25*l,0]));g.trackLength=c-2*l-n;g.trackOffset=a+l+.5;g.anchorOffset=g.trackOffset+.5*(n-1);g.anchor.attr({height:d,width:n-1,y:b,x:g.trackOffset+g.trackLength*q}).crisp()},"scroll-repaint-vertical":function(a,b,c,d){var e=this.attrs,g=this._.scroller,h=e["scroll-ratio"],q=e["scroll-position"],
l=0,n=d*h,e="none"===e["scroll-display-buttons"];c&&(c-=1);a&&(a+=.5);d&&(d-=1);b&&(b+=.5);g.track.attr({width:c,height:d,y:b,x:a}).crisp();e||(l=P(c,.5*d),n-=2*l*h,g.start.attr({width:c,height:l,x:a,y:b}),g.arrowstart.attr("polypath",[3,a+.5*c,b+.5*l,.25*l,90]),g.end.attr({width:c,height:l,x:a,y:b+d-l}),g.arrowend.attr("polypath",[3,a+.5*c,b+d-.5*l,.25*l,-90]));g.trackLength=d-2*l-n;g.trackOffset=b+l+.5;g.anchorOffset=g.trackOffset+.5*(n-1);g.anchor.attr({height:n-1,width:c,y:g.trackOffset+g.trackLength*
q,x:a}).crisp()},fill:function(a){var b=this.attrs,c=this._.scroller,d=b["scroll-repaint"],e="flat"===b["scroll-display-style"],g="horizontal"===b["scroll-orientation"],h={stroke:"none"},q;m&&d&&3<(q=16-d[g&&3||2])&&(h.stroke=J,h["stroke-width"]=q);a=w.color(a);a.error&&(a="#000000");a="opacity"in a?"rgba("+[a.r,a.g,a.b,a.opacity]+")":"rgb("+[a.r,a.g,a.b]+")";h.fill=e&&a||[90*g,w.tintshade(a,.15).rgba,a].join("-");h.stroke=w.tintshade(a,-.75).rgba;c.track.attr(h);h.fill=e&&w.tintshade(a,-.6).rgba||
[270*g,w.tintshade(a,.3).rgba+":40",w.tintshade(a,-.7).rgba].join("-");h.stroke=w.tintshade(a,-.6).rgba;c.anchor.attr(h);h.stroke="none";"none"!==b["scroll-display-buttons"]&&(h.fill=J,c.start.attr(h),c.end.attr(h),h.fill=w.tintshade(a,-.4).rgba,c.arrowstart.attr(h),c.arrowend.attr(h));return!1}}},{name:"button",button:function(a,b,c,d,e,g){g=this.group("button",g);var h;g._.button={bound:this.rect(g),tracker:this.rect(g).attr({fill:J,stroke:J,cursor:"pointer"}).data("compositeButton",g)};!w.is(e,
"object")&&(e={});for(h in w.fn.button.fn)g[h]=w.fn.button.fn[h];for(h in w.fn.button.ca)g.ca[h]=w.fn.button.ca[h];return g.attr({ishot:!0,"button-padding":[e.horizontalPadding,e.verticalPadding],"button-label":c,"button-symbol":d,"button-disabled":e.disabled||"false","button-symbol-position":e.symbolPosition,"button-symbol-padding":e.symbolPadding}).attr("button-repaint",[a,b,e.width,e.height,e.r])},data:{hoverin:function(){var a=this._.button.hoverbackIn;a&&!1===a()||(this.attr("fill","hover").hovered=
!0)},hoverout:function(){var a=this._.button.hoverbackOut;a&&!1===a()||(this.attr("fill",(this.pressed||this.active)&&"active"||"normal").hovered=!1)},mousedown:function(){this.attr("fill","active").pressed=!0},mouseup:function(){var a=this._.button.callback;this.attr("fill",this.hovered&&"hover"||this.active&&"active"||"normal").pressed=!1;a()}},fn:{tooltip:function(){w.el.tooltip&&w.el.tooltip.apply(this._.button.tracker,arguments);return this},buttonclick:function(a,b){var c=this._.button;b=b||
this;c.callback=function(){return a.apply(b,arguments)};return this},labelcss:function(){var a=this._.button,b=a.label;a.cssArg=arguments;b&&b.css.apply(b,arguments);return this.attr("button-repaint",this.attrs["button-repaint"])},buttonhover:function(a,b,c,d){var e=this._.button;c=c||this;d=d||this;e.hoverbackIn=function(){return a.apply(c,arguments)};e.hoverbackOut=function(){return b.apply(d,arguments)};return this},remove:function(){var a=this._.button,b;this.attr("button-disabled","true");for(b in a)a[b]&&
a[b].remove&&a[b].remove(),a[b]=null;delete this._.button;w.el.remove.apply(this,arguments)}},ca:{"button-active":function(a){this.attr("fill",(this.active=!!a)?"active":this.hovered&&"hover"||"normal")},"button-disabled":function(a){var b=this._.button.tracker,c=this.attrs["button-disabled"],d=this.paper.button.data;a=Ba[a];c=Ba[c];if(void 0!==a&&a!==c)switch(a){case !0:b.attr("fill","rgba(204,204,205,.5)").unmousedown(d.mousedown).unmouseup(d.mouseup).unhover(d.hoverin,d.hoverout);break;case !1:b.attr("fill",
J).mousedown(d.mousedown,this).mouseup(d.mouseup,this,!0).hover(d.hoverin,d.hoverout,this,this)}},"button-label":function(a){var b=this._.button,c=this.attrs,d=b.label,e=b.cssArg,g=this.attrs["button-repaint"];a=M(a||"");"none"===a?d&&(b.label=d.remove()):a&&(!d&&(d=b.label=this.paper.text(this).insertBefore(b.tracker)),d.attr({text:a,"text-anchor":"middle","vertical-align":"middle"}),e&&e.length&&d.css.apply(d,e));g&&c["button-label"]!==a&&this.attr("button-repaint",g)},"button-symbol":function(a){var b=
this.attrs,c=this._.button,d=c.symbol,e=this.attrs["button-repaint"];a=M(a||"");"none"===a?d&&(c.symbol=d.remove()):a&&!d&&(c.symbol=this.paper.symbol(this).insertAfter(c.bound));e&&b["button-symbol"]!==a&&this.attr("button-repaint",e)},"button-symbol-position":function(a){return{"button-symbol-position":{top:"top",right:"right",bottom:"bottom",left:"left",none:"none"}[M(a).toLowerCase()]||"none"}},"button-symbol-padding":function(a){return{"button-symbol-padding":n(a)}},"button-padding":function(a,
b){return{"button-padding":[null==a&&(a=5)||n(a),null==b&&a||n(b)]}},"button-repaint":function(a,b,c,d,e){var g=this._.button,h=g.bound,q=g.label,l=g.symbol,n=this.attrs,s=n["button-padding"],p=s[0],m=s[1],L,I;void 0===a&&(a=0);void 0===b&&(b=0);if(void 0===c||void 0===d)L=q&&q.getBBox()||{width:0,height:0},void 0===c&&(c=2*p+L.width),void 0===d&&(d=2*m+L.height);h=w.crispBound(a,b,c,d,h.attr("stroke-width"));h.r=w.pick(e,N(.1*P(d,c)));a=h.x;b=h.y;c=h.width;d=h.height;q&&q.attr({x:a+c/2,y:b+d/2});
if(l){!w.is(I=n["button-symbol-padding"],"finite")&&(I=.2*d);e=d-m;L=.5*e;switch(n["button-symbol-position"]+(q&&"+"||"-")){case "right+":a=a+(c+(2*L+m))-L-p;b+=.5*d;q.attr("transform",["t",-(e+I),0]);break;case "left+":a=a+p+L;b+=.5*d;q.attr("transform",["t",e+I,0]);break;case "top+":a+=.5*c;b=b+s[1]+L;q.attr("transform",["t",0,e+I]);break;case "bottom+":a+=.5*c;b=b+(d+(2*L+I))-m-L;q.attr("transform",["t",0,-(e+I)]);break;default:a+=.5*c,b+=.5*d}l.attr("symbol",[n["button-symbol"],a,b,L])}g.bound.attr(h);
g.tracker.attr(h)},fill:function(a,b,c,d){var e=this._.button,g=e.bound,h=e.symbol,q=e.label,l={normal:e.gradient,active:e.gradientActive,hover:e.gradientHover}[a];l||(a=w.getRGB(a),a.error&&(a=w.color("#cccccc")),a="opacity"in a?"rgba("+[a.r,a.g,a.b,a.opacity]+")":"rgb("+[a.r,a.g,a.b]+")",e.gradient=[90,w.tintshade(a,-.8).rgba+":0",w.tintshade(a,.8).rgba+":100"].join("-"),e.gradientActive=[270,w.tintshade(a,-.8).rgba+":0",w.tintshade(a,.8).rgba+":100"].join("-"),d=w.getRGB(d),d.error&&(d=a)||(d=
"opacity"in d?"rgba("+[d.r,d.g,d.b,d.opacity]+")":"rgb("+[d.r,d.g,d.b]+")"),e.gradientHover=[90,w.tintshade(d,-.9).rgba+":0",w.tintshade(d,.7).rgba+":100"].join("-"),c=c||w.tintshade(a,.2).rgba,b=b||w.tintshade(a,-.2).rgba,e.symbolFill=c,e.labelFill=b,l=(this.pressed||this.active)&&e.gradientActive||this.hovered&&e.gradienthover||e.gradient);g.attr("fill",l);h&&h.attr("fill",e.symbolFill);q&&q.attr("fill",e.labelFill);return!1},stroke:function(a,b){var c=this._.button,d=c.symbol;a=w.color(a);a.error&&
(a=w.color("#999999"));c.bound.attr("stroke",a);d&&d.attr("stroke",b||a);return!1},"stroke-width":function(a,b){var c=this._.button,d=c.symbol;c.bound.attr("stroke-width",a);c.tracker.attr("stroke-width",a);d&&d.attr("stroke-width",b);return!1}}},{name:"trianglepath",trianglepath:function(){var a=arguments,b=w._lastArgIfGroup(a);return this.path(b).attr("trianglepath",[a[0],a[1],a[2],a[3],a[4],a[5],a[6]||0,a[7]||0,a[8]||0])},fn:{sides:function(){var a=this._args;return[I(a[0],a[1],a[2],a[3]),I(a[2],
a[3],a[4],a[5]),I(a[4],a[5],a[0],a[1])]},enclosedAngles:function(){var a=this._sides;return[l((b(a[0],2)+b(a[2],2)-b(a[1],2))/(2*a[0]*a[2])),l((b(a[0],2)+b(a[1],2)-b(a[2],2))/(2*a[0]*a[1])),l((b(a[2],2)+b(a[1],2)-b(a[0],2))/(2*a[2]*a[1]))]},semiperimeter:function(){var a=this._sides||this.sides();return(a[0]+a[1]+a[2])/2}},ca:{trianglepath:function(b,c,d,e,h,q,l,n,s){if(l||n||s){this._args=arguments;this._sides=this.sides();var p=this.enclosedAngles(),w;w=this.semiperimeter();w=g(w*(w-this._sides[0])*
(w-this._sides[1])*(w-this._sides[2]))/w;p=[P(l,w)/a(p[0]/2),P(n,w)/a(p[1]/2),P(s,w)/a(p[2]/2)];p=[fa(b,c,h,q,p[0]),fa(b,c,d,e,p[0]),fa(d,e,b,c,p[1]),fa(d,e,h,q,p[1]),fa(h,q,d,e,p[2]),fa(h,q,b,c,p[2])];this.attr({path:["M",p[0].x,p[0].y,"Q",b,c,p[1].x,p[1].y,"L",p[2].x,p[2].y,"Q",d,e,p[3].x,p[3].y,"L",p[4].x,p[4].y,"Q",h,q,p[5].x,p[5].y,"L",p[0].x,p[0].y]})}else this.attr({path:["M",b,c,"L",d,e,h,q,"Z"]})}}}]);w.ca["text-bound"]=function(a,b,c,d,e,g){d=this.paper;var h=this._.textbound;if("text"===
this.type){if(!(b&&"none"!==b||a&&"none"!==a))return this._.textbound=h&&h.unfollow(this).remove(),!1;c&&w.is(c,"finite")||(c=0);e&&w.is(e,"finite")||(e=0);!h&&(h=this._.textbound=d.rect(0,0,0,0,this.group).follow(this,w.ca["text-bound"].reposition,"before"));h.attr({stroke:b,"stroke-width":c,fill:a,"shape-rendering":1===c&&"crisp"||"",r:e});g&&h.attr("stroke-dasharray",g);w.ca["text-bound"].reposition.call(h,this.attr(),this);return!1}};w.ca["text-bound"].reposition=function(a,b){var c={},d,e,g,
h,q;a.hasOwnProperty("visibility")&&this.attr("visibility",a.visibility);if(a.hasOwnProperty("text-bound")||a.hasOwnProperty("x")||a.hasOwnProperty("y")||a.hasOwnProperty("text")||a.hasOwnProperty("text-anchor")||a.hasOwnProperty("text-align")||a.hasOwnProperty("font-size")||a.hasOwnProperty("line-height")||a.hasOwnProperty("vertical-align")||a.hasOwnProperty("transform")||a.hasOwnProperty("rotation"))d=b.attrs["text-bound"],e=M(d&&d[3]||"0").split(ea),d=n(e[0])||0,e=w.pick(n(e[1]),d),g=b.getBBox(),
h=g.width,q=g.height,isNaN(h)||(c.x=g.x-d,c.y=g.y-e,c.width=h+2*d,c.height=q+2*e),this.attr(c)};w.fn.symbol=function(){var a=arguments,b=a.length-1,c=a[b];c&&c.constructor===w.el.constructor?a[b]=void 0:c=void 0;b=this.path(void 0,c);b.ca.symbol=w.fn.symbol.ca.symbol;return a.length===!!c+0?b:b.attr("symbol",a)};w.fn.symbol.cache={"":w._cacher(function(a,b,c,d){return 3<arguments.length?["M",a,b,"h",c,"v",d,"h",-c,"v",-d,"z"]:["M",a-c,b-c,"h",c*=2,"v",c,"h",-c,"v",-c,"z"]})};w.fn.symbol.ca={symbol:function(a){var b=
w.is(a,"object")&&1===arguments.length&&!w.is(a,"function")?a:arguments,c;b===a&&(a=b[0]);b=(c=w.is(a,"function")&&a||w.fn.symbol.cache[a]||w.fn.symbol.cache[""])&&c.apply(w,H.call(b,1));w.is(b,"array")||w.is(b,"string")?this.attr("path",b):b&&this.attr(b)}};w.addSymbol=function(a,b){var c=w.is(b,"function")&&(c={},c[a]=b,c)||a,d=w.fn.symbol.cache,e=[],g;for(g in c)b=c[g],d[g]=w.is(b,"function")&&w._cacher(b,w)||(e.push(g),b);for(;g=e.pop();)d[g]=d[d[g]]};w.svg?(pa="$1",ma=function(a){a?"string"===
typeof a?a=a.replace(ga,pa):a.toString=Z:a="M0,0";this.node.setAttribute("d",a.toString());return this},w._engine.litepath=function(a,b,c,d){a=s("path");(d||b).canvas.appendChild(a);b=new U(a,b,d);b.type="litepath";b.id=a.raphaelid=w._oid++;a.raphael=!0;$(b,{fill:"none",stroke:"#000"});return b},w._getPath.litepath=function(a){return w.parsePathString(a.node.getAttribute("d"))}):w.vml&&(pa=function(a,b){return la[b]||b},L=function(){this._transform.apply(this,arguments);this._.bcoord&&(this.node.coordsize=
this._.bcoord);return this},ma=function(a){a?"string"===typeof a?a=a.replace(ga,pa):a.toString=Z:a="M0,0";this.node.path=a;return this},w._engine.litepath=function(a,b,c,d){a=s("shape");var e=a.style,g=new U(a,b,d);e.cssText="position:absolute;left:0;top:0;width:21600px;height:21600px;";c=n(c);isNaN(c)?a.coordsize="21600 21600":(g._.bzoom=c,e.width="1px",e.height="1px",a.coordsize=g._.bcoord=c+" "+c);a.coordorigin=b.coordorigin;g.type="litepath";g.id=a.raphaelid=w._oid++;a.raphael=!0;g._transform=
g.transform;g.transform=L;w._setFillAndStroke(g,{fill:"none",stroke:"#000"});(d||b).canvas.appendChild(a);b=s("skew");b.on=!0;a.appendChild(b);g.skew=b;return g},w._getPath.litepath=function(a){return w.parsePathString(a.node.path||"")});w.fn.litepath=function(a,b,c){b&&b.constructor===U&&(c=b,b=void 0);a&&a.constructor===U&&(c=a,a="");b=w._engine.litepath(a,this,b,c);b.ca.litepath=ma;a&&b.attr("litepath",w.is(a,"array")?[a]:a);return this.__set__&&this.__set__.push(b),this._elementsById[b.id]=b}}]);
FusionCharts.register("module",["private","modules.renderer.js-htmlrenderer",function(){var d=this.hcLib,m=d.Raphael,D=d.dem,v=this.window,p=v.document,c=/msie/i.test(v.navigator.userAgent)&&!v.opera,K="VML"===m.type,b="createTouch"in p,G={cursor:"cursor"},a={x:"left",y:"top",strokeWidth:"borderThickness","stroke-width":"borderThickness",width:"width",height:"height"},l={fill:"backgroundColor",stroke:"borderColor",color:"color"},P={left:0,top:0,padding:0,border:"none",margin:0,outline:"none","-webkit-apperance":"none",
position:"absolute",zIndex:20},N,z=function(b,c,d,g){b=p.createElement(b);for(var l in c)a[l]?b.style[l]=c[l]:b.setAttribute(l,c[l]);for(l in d)b.style[l]=d[l];g&&g.appendChild&&g.appendChild(b);return b},g;g=function(a,b,c){b&&b instanceof g&&(b=b.element);(this.element=z(a,c,P,b)).ishot="true";this.nodeName=a.toLowerCase();this.added=Boolean(b)};g.prototype={attr:function(b){var d=this.element,g={},m,z,q,J,w,v,s;if("object"!==typeof b){if(!(g=this[b])){if("string"===typeof b)d&&d.getAttribute&&
(J=d.getAttribute(b));else if(void 0!==b&&null!==b&&"object"===typeof b)for(q in b)d.setAttribute(q,b[q]);g=J}return g}for(m in b){q=b[m];if(G[m]){switch(m){case "cursor":"pointer"===q&&K&&(q="hand")}d.style[G[m]]=q;z=!0}else if(a[m])d.style[a[m]]=q+"px",z=!0;else if(l[m])d.style[l[m]]=q&&q.replace(/^#?([a-f0-9]+)/ig,"#$1")||"none",z=!0;else if(/^visibility$/i.test(m))z="hidden"===q,d.style.display=z?"none":"",this.hidden=z,z=!0;else if(/^opacity$/i.test(m))d.style.opacity=q,c&&(z=100*Number(q),d.style.filter=
"progid:DXImageTransform.Microsoft.Alpha(Opacity="+z+")"),z=!0;else if(/^innerhtml$/i.test(m)){if(K&&"select"==d.nodeName.toLowerCase()){for(z=q.match(/<option\s?[\s\S]*?(\/>|><\/option>|>[\s\S]*?<\/option>)/ig);d.firstChild;)d.removeChild(d.firstChild);w=0;for(v=z.length;w<v;w+=1)J=z[w],s=p.createElement("option"),/<option\s([\s\S]*[\'\"])\s*?(\/>|>[\s\S]*<\/option>)/ig.test(J)&&(s.value=J.replace(/<option\s([\s\S]*[\'\"])\s*?(\/>|>[\s\S]*<\/option>)/ig,"$1").replace(/[\s\S]*value\s*\=\s*[\'\"]([\s\S]*)[\'\"]/,
"$1")),s.text=J.replace(/<option\s*[\s\S]*[\'\"]?\s*?[\/>|\>]([\s\S]*)<\/option>/ig,"$1 "),d.options.add(s)}else"input"!==d.nodeName.toLowerCase()&&void 0!==q&&(d.innerHTML=q||"");z=!0}else/^text$/i.test(m)?("input"!==d.nodeName.toLowerCase()&&(d.innerHTML="",void 0!==q&&d.appendChild(p.createTextNode(q))),z=!0):/^type$/i.test(m)&&c&&this.added&&(z=!0);z&&(g[m]=q,delete b[m],z=!1)}for(m in b)d.setAttribute(m,b[m]);for(m in g)this[m]=b[m]=g[m],delete g[m];return this},val:function(a){var b=this.element,
c=void 0===a;return"input"===this.nodeName&&"checkbox"===b.getAttribute("type")?c?this.checked()?1:0:this.checked(a):c?b.value:(b.value=a,this)},checked:function(a){var b=this.element;return void 0===a?b.checked:(a?b.setAttribute("checked","checked"):b.removeAttribute("checked"),this)},css:function(a,b){var c=this.element.style,d;if("object"===typeof a)for(d in a)c[d]=a[d];else d&&void 0!==b&&(c[d]=b);return this},translate:function(a,b){var c=this.element;void 0!==a&&(c.style.left=a+"px");void 0!==
b&&(c.style.top=b+"px");return this},add:function(a,b){var c=this.element,d=a.element;b?d.insertBefore(c,d.firstChild):d.appendChild(c);this.added=!0;return this},hide:function(){this.element.style.display="none";return this},show:function(){this.element.style.display="";return this},focus:function(){"function"===typeof this.element.focus?this.element.focus():d.dem.fire(this.element,"focus")},destroy:function(){var a=this.element||{};a.onclick=a.onmouseout=a.onmouseover=a.onmousemove=a.onblur=a.onfocus=
null;N||(N=z("div"));a&&N.appendChild(a);N.innerHTML="";delete this.element;return null},on:K?function(a,b){this.element["on"+a]=function(){var a=v.event;a.target=a.srcElement;b(a)};return this}:function(a,c){var d=c;b&&"click"===a&&(a="touchstart",d=function(a){a.preventDefault();c()});this.element["on"+a]=d;return this},bind:function(a,b,c){D.listen(this.element,a,b,c);return this},unbind:function(a,b){D.unlisten(this.element,a,b);return this},trigger:function(a,b){D.fire(this.element,a,b);return this},
fadeIn:function(a,b){var c="fast"===a?400:1E3;this.show();this.attr({opacity:0});d.danimate.animate(this.element,{opacity:1},c,"linear",b)}};g.prototype.constructor=g;m.fn.html=function(a,b,c,d){var l={},q;b&&"type"in b&&(l.type=b.type,delete b.type);a=(new g(a,d,l)).css(c).attr(b);for(q in l)b[q]=l[q];return a}}]);
FusionCharts.register("module",["private","modules.renderer.js-raphaeltooltip",function(){var d=this,m=d.window,D=m.document,v=D.body||D.getElementsByTagName("body")[0],p=d.hcLib,c=p.Raphael,K=c.eve,b=p.createElement,G=p.addEvent,a=p.removeEvent,l=p.getPosition,P=p.hasTouch,N=p.getTouchEvent,z=m.Math,g=z.ceil,e=z.floor,h={},n=m.screen.availHeight,M=m.screen.availWidth,H={"":1,moz:1,webkit:1,o:1,ms:1},q={borderRadius:"borderRadius",boxShadow:"boxShadow"},J=/\-([a-z])/ig,w=function(a,b){return b.toUpperCase()},
ja=function(a){var b=s.forbiddenStyle,d,e,g;for(d in a)e=J.test(d)?d.replace(J,w):d,void 0!==a[d]&&!b[e]&&(this[e]=a[d]),c.vml&&/color/ig.test(e)&&(this[e]=c.getRGB(this[e]).toString());for(d in q)if(this[d])for(g in H)this[g+d]=this[d]},s=p.toolTip={elementId:"fusioncharts-tooltip-element",element:null,lastTarget:null,currentTarget:null,currentPaper:null,pointeroffset:12,prevented:!1,defaultStyle:p.extend2(ja.prototype,{backgroundColor:"#ffffee",borderColor:"#000000",borderWidth:"1px",color:"#000000",
fontSize:"10px",lineHeight:"12px",padding:"3px",borderStyle:"solid"}),defaultContainerStyle:{position:"absolute",textAlign:"left",margin:"0",zIndex:"99999",pointer:"default",display:"block"},forbiddenStyle:{}},$=function(b){!0===s._oobready?s._oobready=!1:(a(v,"touchstart",$),!s.hidden&&s.currentTarget&&(b=b.srcElement||b.target||h,b.raphael&&s.currentTarget.paper.getById(b.raphaelid)===s.currentTarget||s.hide()))};c.svg&&(s.defaultContainerStyle.pointerEvents="none",s.defaultStyle.borderRadius="0",
s.defaultStyle.boxShadow="none");c.vml&&(s.forbiddenStyle.borderRadius=!0,s.forbiddenStyle.boxShadow=!0,s.defaultStyle.filter="");s.setup=function(){var a=s.container,e=s.textElement,g=s.style,h=s.defaultContainerStyle,q=s.forbiddenStyle,l;a||(a=s.element=b("span"),(D.body||D.getElementsByTagName("body")[0]).appendChild(a),a.setAttribute("id",s.elementId),g=s.containerStyle=a.style,e=s.textElement=b("span"),a.appendChild(e),s.style=c.vml?e.runtimeStyle:e.style,s.style.overflow="hidden",s.style.display=
"block",s.hidden=!1,s.hide());for(l in h)!q[l]&&(g[l]=h[l]);s.scatted=!0;K.on("raphael.drag.start.*",function(){s.scatted&&(s.waitingScat=!0)});K.on("raphael.drag.move.*",function(){s.waitingScat&&(s.block(),s.waitingScat=!1)});K.on("raphael.drag.end.*",function(){s.waitingScat=!1;s.scatted&&s.unblock(!0)});K.on("raphael.remove",function(){if(s.currentPaper===this||s.currentTarget&&s.currentTarget.paper===this)s.hide(),s.currentTarget=s.currentPaper=null});d.addEventListener("LinkedChartInvoked",
function(a){s.currentPaper===a.sender.jsVars.hcObj.paper&&s.hide()});d.addEventListener("realTimeUpdateComplete",function(a){s.currentPaper===a.sender.jsVars.hcObj.paper&&s.hide()})};s.restyle=function(a){var b=s.style,c;for(c in a)b[c]=a[c]};s.onelement=function(a){if(!a.__tipProcessed){var b=this.paper,c="group"===this.type?b&&b._elementFromEvent(a):this,d=b.__tipStyle;c&&d&&c.__tipNeeded&&((a.originalEvent||a).FusionChartsPreventEvent&&s.preventTooltip(),s.hiding&&(s.hiding=clearTimeout(s.hiding)),
s.currentPaper!==b&&(b.__tipCp=b.canvas&&l(b.canvas.parentNode,!0)||{},s.restyle(b.__tipStyle),s.currentPaper=b),s.lastTarget=s.currentTarget,s.currentTarget=c,s.scatted=c.__tipScatted,s.onredraw.call(this,a),a.__tipProcessed=!0,P&&(s._oobready=!0,G(v||(v=D.body||D.getElementsByTagName("body")[0]),"touchstart",$)))}};s.onredraw=function(a){a.__tipProcessed||(a.__tipProcessed=!0,(this.paper&&this.paper._elementFromEvent(a))===s.currentTarget&&(a=N(a),s.x=e(a.pageX||a.clientX+D.body.scrollLeft+D.documentElement.scrollLeft||
0),s.y=e(a.pageY||a.clientY+D.body.scrollTop+D.documentElement.scrollTop||0),s.redraw()))};s.onhide=function(a){a.__tipProcessed||(a.__tipProcessed=!0,(this.paper&&this.paper._elementFromEvent(a))===s.currentTarget&&(s.hiding=setTimeout(s.hide,200)))};s.redraw=function(){if(!s.prevented&&!s.blocked&&s.currentTarget&&s.currentTarget.__tipNeeded){var a=s.currentTarget,b=a.paper,c=s.textElement,d=s.containerStyle,e=s.style,h=a.__tipText,a=s.pointeroffset,q=b.__tipCp,l=D.documentElement||D.body,p=l.scrollLeft,
l=l.scrollTop,w=s.x,m=s.y,z,t=b.width,J=b.height,b=b.__tipConstrain;if(100>t||100>J)b=!1;s.hidden&&(s.containerStyle.top="-999em",s.show());h!==s.text&&(s.text=h,d.width=d.height="",c.innerHTML=h,e.whiteSpace="nowrap",h=g(e.pixelWidth||c.offsetWidth||0),z=g(e.pixelHeight||c.offsetHeight||0),(s.textWidthOverflow=w+h>q.left+t)?(d.width=(t>h?h+2*a:t-2*a||0)+"px",e.whiteSpace="normal"):d.width="",(s.textHeightOverflow=z>J)?(d.height=(J||0)-2*a+"px",e.whiteSpace="normal"):d.height="");h=g(e.pixelWidth||
c.offsetWidth||0);z=g(e.pixelHeight||c.offsetHeight||0);b?(s.textWidthOverflow?w=(w-h<q.left?q.left:w-h)-p:w+a+h>q.left-p+t-a&&(w=w-h-a),s.textHeightOverflow?m=q.top-l:m+a+z>q.top-l+J-a&&(m=m-z-1.5*a)):(p+M<w+a+h&&(w=w-h-a),l+n<m+a+z&&(m=m-z-1.5*a));d.left=(w+a||0)+"px";d.top=(m+a||0)+"px";s.hidden&&s.show()}};s.hide=function(){s.hiding&&(s.hiding=clearTimeout(s.hiding));s.containerStyle.display="none";s.hidden=!0;s.prevented=!1};s.show=function(){s.blocked||(s.hiding&&(s.hiding=clearTimeout(s.hiding)),
s.containerStyle.display="inline",s.hidden=!1)};s.preventTooltip=function(){s.prevented=!0};s.block=function(){s.blocked=!0;s.containerStyle.display="none"};s.unblock=function(a){s.blocked=!1;a&&(s.containerStyle.display=s.hidden&&"none"||"inline")};c.fn.tooltip=function(a,b,d){b&&(b=.4*(void 0===b.opacity?1:b.opacity),c.svg?a.boxShadow="1px 1px 3px rgba(64,64,64,"+b+")":a.filter='progid:DXImageTransform.Microsoft.Shadow(Strength=2, Direction=135, Color="#404040", shadowOpacity="'+b/2+'")');this.__tipStyle=
new ja(a);this.__tipCp=this.canvas&&l(this.canvas.parentNode,!0)||{};this.__tipConstrain=Boolean(d);return this};c.el.trackTooltip=function(a){var b=!!this.__tiptracking;if(void 0===a||(a=!!a)===b)return this;a?P?this.touchstart(s.onelement):(this.mouseover(s.onelement),this.mousemove(s.onredraw),this.mouseout(s.onhide)):P?this.untouchstart(s.onelement):(this.unmouseover(s.onelement),this.unmousemove(s.onredraw),this.unmouseout(s.onhide));this.__tiptracking=a;return this};c.el.tooltip=function(a,
b,d,e,g){s.setup();c.el.tooltip=function(a,b,c,d,e){b=!1===a||void 0===a||""===a;this.__tipScatted=void 0===d?this.__tipScatted:!d;void 0===this.__tipScatted&&(this.__tipScatted=!0);null!==e&&(this.__tip_blocked=e);b^!this.__tipText&&(this.__tipNeeded=!b);this.__tipText=a;if(s.currentTarget===this&&a!==s.text&&!s.hidden)s[b?"hide":"redraw"]();return this};return c.el.tooltip.call(this,a,b,d,e,g)};d.core._setTooltipZIndex=function(a){a=parseInt(a,10);s&&!isNaN(a)&&(s.defaultContainerStyle.zIndex=a,
s.containerStyle&&(s.containerStyle.zIndex=a))}}]);
FusionCharts.register("module",["private","modules.renderer.js-smartlabel",function(){var d=this.hcLib,m=d.isIE,D=d.hasSVG,v=Math.max,p=this.window,c=/ HtmlUnit/.test(p.navigator.userAgent),K=p.document,b=/ AppleWebKit\//.test(p.navigator.userAgent),G=!!K.createElement("canvas").getContext,a=!(!G||!K.createElement("canvas").getContext("2d").measureText),p=function(){function l(a,b,c){if(!a||!a.length)return 0;var d=c.getWidthFunction(),e=0,g=0,g=d(a),h=g/a.length;c=b;e=Math.ceil(b/h);if(g<b)return a.length-
1;e>a.length&&(c=b-g,e=a.length);for(;0<c;)if(c=b-d(a.substr(0,e)),g=Math.floor(c/h))e+=g;else return e;for(;0>c;)if(c=b-d(a.substr(0,e)),g=Math.floor(c/h))e+=g;else break;return e}function p(a,b){b=5<b?b:5;this.maxContainers=20>b?b:20;this.last=this.first=null;this.containers={};this.length=0;this.rootNode=a;if(ja){var c=K.createElementNS("http://www.w3.org/2000/svg","svg");c.setAttributeNS("http://www.w3.org/2000/svg","xlink","http://www.w3.org/1999/xlink");c.setAttributeNS("http://www.w3.org/2000/svg",
"height","0");c.setAttributeNS("http://www.w3.org/2000/svg","width","0");this.svgRoot=c;this.rootNode.appendChild(c)}}function N(a,b,d){if("undefined"!==typeof a&&"object"!==typeof a){this.id=a;var g;"string"===typeof b&&(b=K.getElementById(b));a:{if(b&&(b.offsetWidth||b.offsetHeight)){if(b.appendChild){b.appendChild(b=K.createElement("div"));b.className="fusioncharts-smartlabel-container";b.setAttribute("aria-hidden","true");b.setAttribute("role","presentation");a=b;break a}}else if((a=K.getElementsByTagName("body")[0])&&
a.appendChild){b=K.createElement("div");b.className="fusioncharts-smartlabel-container";b.setAttribute("aria-hidden","true");b.setAttribute("role","presentation");a.appendChild(b);a=b;break a}a=void 0}a=this.parentContainer=a;a.innerHTML="WgI";if(c||!a.offsetHeight&&!a.offsetWidth)ja=!0;a.innerHTML="";for(g in e)a.style[g]=e[g];this.containerManager=new p(a,10);this.showNoEllipses=!d;this.init=!0;this.style={};this.setStyle()}}var z=d.supportedStyle,g={fontWeight:1,"font-weight":1,fontStyle:1,"font-style":1,
fontSize:1,"font-size":1,fontFamily:1,"font-family":1},e={position:"absolute",top:"-9999em",left:"-9999em",whiteSpace:"nowrap",padding:"0px",width:"1px",height:"1px",overflow:"hidden"},h=b?0:4.5,n=0,M=/\b_SmartLabel\b/,H=/\b_SmartLabelBR\b/,q=/(<[^<\>]+?\>)|(&(?:[a-z]+|#[0-9]+);|.)/ig,J=RegExp("\\<span[^\\>]+?_SmartLabel[^\\>]{0,}\\>(.*?)\\<\\/span\\>","ig"),w=/<[^>][^<]*[^>]+>/i,ja=!1,s=0,$=0,U,ba,Ba;K.getElementsByClassName?(U="getElementsByClassName",ba="_SmartLabel",Ba=!0):(U="getElementsByTagName",
ba="span",Ba=!1);p.prototype={get:function(a){var b=this.containers,c=this.length,d=this.maxContainers,e,g="",h="",h=this.getCanvasFont(a);for(e in z)void 0!==a[e]&&(g+=z[e]+":"+a[e]+";");if(!g)return!1;if(b[g])g=b[g],this.first!==g&&(g.prev&&(g.prev.next=g.next),g.next&&(g.next.prev=g.prev),g.next=this.first,g.next.prev=g,this.last===g&&(this.last=g.prev),g.prev=null,this.first=g);else{if(c>=d)for(a=c-d+1;a--;)this.removeContainer(this.last);g=this.addContainer(g,h)}return g},getCanvasFont:function(b){var c,
d=[];if(!G||!a)return!1;for(c in g)void 0!==b[c]&&d.push(b[c]);return d.join(" ")},setMax:function(a){var b=this.length;a=5<a?a:5;a=20>a?a:20;if(a<b){for(b-=a;b--;)this.removeContainer(this.last);this.length=a}this.maxContainers=a},addContainer:function(a,b){var c,d;this.containers[a]=d={next:null,prev:null,node:null,ellipsesWidth:0,lineHeight:0,dotWidth:0,avgCharWidth:4,keyStr:a,canvasStr:b,charCache:{}};d.next=this.first;d.next&&(d.next.prev=d);this.first=d;this.last||(this.last=d);this.length+=
1;c=d.node=K.createElement("div");this.rootNode.appendChild(c);m&&!D?c.style.setAttribute("cssText",a):c.setAttribute("style",a);c.setAttribute("aria-hidden","true");c.setAttribute("role","presentation");c.style.display="inline-block";c.innerHTML="WgI";d.lineHeight=c.offsetHeight;d.avgCharWidth=c.offsetWidth/3;ja?(c=d.svgText=K.createElementNS("http://www.w3.org/2000/svg","text"),c.setAttribute("style",a),this.svgRoot.appendChild(c),c.textContent="WgI",d.lineHeight=c.getBBox().height,d.avgCharWidth=
(c.getBBox().width-h)/3,c.textContent="...",d.ellipsesWidth=c.getBBox().width-h,c.textContent=".",d.dotWidth=c.getBBox().width-h):b?(c=d.canvas=K.createElement("canvas"),c.style.height=c.style.width="0px",this.rootNode.appendChild(c),d.context=c=c.getContext("2d"),c.font=b,d.ellipsesWidth=c.measureText("...").width,d.dotWidth=c.measureText(".").width):(c.innerHTML="...",d.ellipsesWidth=c.offsetWidth,c.innerHTML=".",d.dotWidth=c.offsetWidth,c.innerHTML="");return d},removeContainer:function(a){var b=
a.keyStr;b&&this.length&&a&&(this.length-=1,a.prev&&(a.prev.next=a.next),a.next&&(a.next.prev=a.prev),this.first===a&&(this.first=a.next),this.last===a&&(this.last=a.prev),a.node.parentNode.removeChild(a.node),a.canvas&&a.canvas.parentNode.removeChild(a.canvas),delete this.containers[b])},dispose:function(){var a,b=this.containers;this.maxContainers=null;for(a in b)this.removeContainer(b[a]);this.rootNode.parentNode.removeChild(this.rootNode);this.last=this.first=this.rootNode=null}};p.prototype.constructor=
p;N.prototype={dispose:function(){this.init&&(this.containerManager.dispose(),delete this.container,delete this.context,delete this.cache,delete this.containerManager,delete this.containerObj,delete this.id,delete this.style,delete this.parentContainer,delete this.showNoEllipses)},useEllipsesOnOverflow:function(a){this.init&&(this.showNoEllipses=!a)},getWidthFunction:function(){var a=this.context,b=this.container,c=this.containerObj.svgText;return c?function(a){var b;c.textContent=a;a=c.getBBox();
b=a.width-h;1>b&&(b=a.width);return b}:a?function(b){return a.measureText(b).width}:function(a){b.innerHTML=a;return b.offsetWidth}},getSmartText:function(a,b,c,d){if(!this.init)return!1;if(void 0===a||null===a)a="";var e={text:a,maxWidth:b,maxHeight:c,width:null,height:null,oriTextWidth:null,oriTextHeight:null,oriText:a,isTruncated:!1},g=!1,h,p,m=0,t,z,D,C=-1,G=g=-1;p=this.container;var P=this.context,N=0;D=0;var qa,za,ya;ya=[];var ta=0,V=this.showNoEllipses?"":"...";z=this.lineHeight;var oa,N=[],
C=h=-1;oa=function(a){a=a.replace(/^\s\s*/,"");for(var b=/\s/,c=a.length;b.test(a.charAt(c-=1)););return a.slice(0,c+1)};g=-1;za=this.getWidthFunction();if(p){if(!ja){p.innerHTML=a;e.oriTextWidth=g=p.offsetWidth;e.oriTextHeight=D=p.offsetHeight;if(D<=c&&g<=b)return e.width=e.oriTextWidth=g,e.height=e.oriTextHeight=D,e;if(z>c)return e.text="",e.width=e.oriTextWidth=0,e.height=e.oriTextHeight=0,e}a=oa(a).replace(/(\s+)/g," ");g=w.test(a);z=this.showNoEllipses?b:b-n;if(g){m=a.replace(q,"$2");a=a.replace(q,
'$1<span class="_SmartLabel">$2</span>');a=a.replace(/(<br\s*\/*\>)/g,'<span class="_SmartLabel _SmartLabelBR">$1</span>');p.innerHTML=a;ta=p[U](ba);P=0;for(za=ta.length;P<za;P+=1)if(a=ta[P],Ba||M.test(a.className))oa=a.innerHTML,""!==oa&&(" "===oa?C=N.length:"-"===oa&&(h=N.length),N.push({spaceIdx:C,dashIdx:h,elem:a}),ya.push(oa));ta=0;h=N.length;s=N[0].elem.offsetWidth;if(s>b)return e.text="",e.width=e.oriTextWidth=e.height=e.oriTextHeight=0,e;s>z&&!this.showNoEllipses&&(z=b-2*$,z>s?V="..":(z=b-
$,z>s?V=".":(z=0,V="")));ya=N[0].elem.offsetLeft;P=N[0].elem.offsetTop;if(d)for(;ta<h;ta+=1)a=N[ta].elem,za=a.offsetLeft-ya+a.offsetWidth,za>z&&(qa||(qa=ta),p.offsetWidth>b&&(t=ta,ta=h));else for(;ta<h;ta+=1)a=N[ta].elem,oa=a.offsetHeight+(a.offsetTop-P),za=a.offsetLeft-ya+a.offsetWidth,d=null,za>z?(qa||(qa=ta),za>b&&(g=N[ta].spaceIdx,C=N[ta].dashIdx,g>G?(N[g].elem.innerHTML="<br/>",G=g):C>G?(N[C].elem.innerHTML=C===ta?"<br/>-":"-<br/>",G=C):a.parentNode.insertBefore(d=K.createElement("br"),a),a.offsetHeight+
a.offsetTop>c?(d?d.parentNode.removeChild(d):G===C?N[C].elem.innerHTML="-":N[g].elem.innerHTML=" ",t=ta,ta=h):qa=null)):oa>c&&(t=ta,ta=h);if(t<h){e.isTruncated=!0;qa=qa?qa:t;for(ta=h-1;ta>=qa;ta-=1)a=N[ta].elem,a.parentNode.removeChild(a);for(;0<=ta;ta-=1)a=N[ta].elem,H.test(a.className)?a.parentNode.removeChild(a):ta=0}e.text=p.innerHTML.replace(J,"$1");e.isTruncated&&(e.text+=V,e.tooltext=m)}else{ya=a.split("");h=ya.length;p="";t=[];qa=ya[0];this.cache[qa]?s=this.cache[qa].width:(s=za(qa),this.cache[qa]=
{width:s});if(z>s)t=a.substr(0,l(a,z,this)).split(""),ta=t.length;else{if(s>b)return e.text="",e.width=e.oriTextWidth=e.height=e.oriTextHeight=0,e;V&&(z=b-2*$,z>s?V="..":(z=b-$,z>s?V=".":(z=0,V="")))}N=za(t.join(""));D=this.lineHeight;if(d){for(;ta<h;ta+=1)if(qa=t[ta]=ya[ta],this.cache[qa]?s=this.cache[qa].width:(s=za(qa),this.cache[qa]={width:s}),N+=s,N>z&&(p||(p=t.slice(0,-1).join("")),N>b))return e.text=oa(p)+V,e.tooltext=e.oriText,e.width=za(e.text),e.height=this.lineHeight,e;e.text=t.join("");
e.width=N;e.height=this.lineHeight}else{for(;ta<h;ta+=1)if(qa=t[ta]=ya[ta]," "!==qa||P||(qa="&nbsp;"),this.cache[qa]?s=this.cache[qa].width:(s=za(qa),this.cache[qa]={width:s}),N+=s,N>z&&(p||(p=t.slice(0,-1).join("")),N>b)){g=a.substr(0,t.length).lastIndexOf(" ");C=a.substr(0,t.length).lastIndexOf("-");g>G?(N=za(t.slice(G+1,g).join("")),t.splice(g,1,"<br/>"),G=g,d=g+1):C>G?(C===t.length-1?(N=za(t.slice(G+1,g).join("")),t.splice(C,1,"<br/>-")):(N=za(t.slice(G+1,g).join("")),t.splice(C,1,"-<br/>")),
G=C,d=C+1):(t.splice(t.length-1,1,"<br/>"+ya[ta]),g=t.length-2,N=za(t.slice(G+1,g+1).join("")),G=g,d=ta);D+=this.lineHeight;if(D>c)return e.text=oa(p)+V,e.tooltext=e.oriText,e.width=b,e.height=D-this.lineHeight,e;m=v(m,N);p=null;qa=l(a.substr(d),z,this);N=za(a.substr(d,qa||1));t.length<d+qa&&(t=t.concat(a.substr(t.length,d+qa-t.length).split("")),ta=t.length-1)}m=v(m,N);e.text=t.join("");e.width=m;e.height=D}return e}e.height=p.offsetHeight;e.width=p.offsetWidth}else e.error=Error("Body Tag Missing!");
return e},setStyle:function(a){if(!this.init)return!1;if(a!==this.style||this.styleNotSet){a||(a=this.style);var b=a,c=b.fontSize=b.fontSize||"12px";b.lineHeight=b.lineHeight||b["line-height"]||1.2*parseInt(c,10)+"px";this.style=a;(this.containerObj=a=this.containerManager.get(a))?(this.container=a.node,this.context=a.context,this.cache=a.charCache,this.lineHeight=a.lineHeight,n=a.ellipsesWidth,$=a.dotWidth,this.styleNotSet=!1):this.styleNotSet=!0}},getTextSize:function(a,b,c){if(!this.init)return!1;
var d={text:a,width:null,height:null,oriTextWidth:null,oriTextHeight:null,isTruncated:!1},e=this.container;e&&(e.innerHTML=a,d.oriTextWidth=e.offsetWidth,d.oriTextHeight=e.offsetHeight,d.width=Math.min(d.oriTextWidth,b),d.height=Math.min(d.oriTextHeight,c),d.width<d.oriTextWidth||d.height<d.oriTextHeight)&&(d.isTruncated=!0);return d},getOriSize:function(a){if(!this.init)return!1;var b={text:a,width:null,height:null},c=this.container,d=this.getWidthFunction(),e=0;if(ja){a=a.split(/(<br\s*\/*\>)/g);
c=a.length;for(b.height=this.lineHeight*c;c--;)e=v(e,d(a[c]));b.width=e}else c&&(c.innerHTML=a,b.width=c.offsetWidth,b.height=c.offsetHeight);return b}};return N.prototype.constructor=N}();d.SmartLabelManager=p}]);
FusionCharts.register("module",["private","modules.renderer.js-numberformatter",function(){var d=this,m=d.hcLib,D=m.pluckNumber,v=m.extend2,p=m.getValidValue,c=m.pluck,K=m.getFirstValue,b=Math.abs,G=Math.pow,a=Math.round,l=function(a){return a&&a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},P={},N=function(a){var b=[],c;for(c in a)b.push(c+"_"+a[c]);b.sort();return b.join(",")},z=function(a){var b={},c;for(c in a)b[c.toLowerCase()]=a[c];return b};m.NumberFormatter=function(){function d(b,c,e){var g;
if(0>=c)return a(b)+"";if(isNaN(c))return b+="",12<b.length&&-1!=b.indexOf(".")&&(c=12-b.split(".")[0].length,g=G(10,c),b=a(b*g)/g+""),b;g=G(10,c);b=a(b*g)/g+"";if(1==e)for(-1==b.indexOf(".")&&(b+=".0"),e=b.split("."),c-=e[1].length,e=1;e<=c;e++)b+="0";return b}function e(a,b,c,d,e){var g=Number(a),h="",l=!1,p="",n="",m=p=0;if(isNaN(g))return"";if(1E15<g)return g.toExponential(e?1:14);p=0;m=a.length;-1!=a.indexOf(".")&&(h=a.substring(a.indexOf(".")+1,a.length),m=a.indexOf("."));0>g&&(l=!0,p=1);p=
a.substring(p,m);a=p.length;e=d.length-1;g=d[e];if(a<g)n=p;else for(;a>=g;)n=(a-g?c:"")+p.substr(a-g,g)+n,a-=g,g=0>=(e-=1)?d[0]:d[e],a<g&&(n=p.substring(a,0)+n);""!=h&&(n=n+b+h);!0===l&&(n="-"+n);return n}var h,n={formatnumber:"1",formatnumberscale:"1",defaultnumberscale:"",numberscaleunit:["K","M"],numberscalevalue:[1E3,1E3],numberprefix:"",numbersuffix:"",decimals:"",forcedecimals:"0",yaxisvaluedecimals:"2",decimalseparator:".",thousandseparator:",",thousandseparatorposition:[3],indecimalseparator:"",
inthousandseparator:"",sformatnumber:"1",sformatnumberscale:"0",sdefaultnumberscale:"",snumberscaleunit:["K","M"],snumberscalevalue:[1E3,1E3],snumberprefix:"",snumbersuffix:"",sdecimals:"2",sforcedecimals:"0",syaxisvaluedecimals:"2",xFormatNumber:"0",xFormatNumberScale:"0",xDefaultNumberScale:"",xNumberScaleUnit:["K","M"],xNumberScaleValue:[1E3,1E3],xNumberPrefix:"",xNumberSuffix:""},m={mscombidy2d:{formatnumberscale:"1"}},z=function(a,b,d){var e,g,h,z,H,G,P,N,ea,pa=b.name,Z=v({},n),ma,L,I,fa,t,R,
Y,C,xa,Pa,Ga;(h=m[pa])&&(Z=v(Z,h));this.csConf=Z;this.chartAPI=b;p(a.numberscaleunit)&&(e=a.numberscaleunit.split(","));if(g=p(a.snumberscaleunit,a.numberscaleunit))g=g.split(",");if(h=p(a.xnumberscaleunit,a.numberscaleunit))h=h.split(",");if(z=p(a.ticknumberscaleunit,a.numberscaleunit))z=z.split(",");if(H=p(a.ynumberscaleunit,a.numberscaleunit))H=H.split(",");p(a.numberscalevalue)&&(G=a.numberscalevalue.split(","));if(L=p(a.snumberscalevalue,a.numberscalevalue))L=L.split(",");if(P=p(a.xnumberscalevalue,
a.numberscalevalue))P=P.split(",");if(N=p(a.ticknumberscalevalue,a.numberscalevalue))N=N.split(",");if(ea=p(a.ynumberscalevalue,a.numberscalevalue))ea=ea.split(",");if(p(a.thousandseparatorposition))for(ma=a.thousandseparatorposition.split(","),I=ma.length,t=n.thousandseparatorposition[0];I--;)fa=parseInt(ma[I],10),0>=fa&&(fa=t),t=ma[I]=fa;b||(b={});I=D(a.scalerecursively,0);fa=D(a.sscalerecursively,I);t=D(a.xscalerecursively,I);R=D(a.maxscalerecursion,-1);Y=D(a.smaxscalerecursion,R);C=D(a.xmaxscalerecursion,
R);xa=p(a.scaleseparator," ");Pa=p(a.sscaleseparator,xa);Ga=p(a.xscaleseparator,xa);R||(R=-1);this.baseConf=e={cacheStore:[],formatnumber:c(a.formatnumber,b.formatnumber,Z.formatnumber),formatnumberscale:c(a.formatnumberscale,b.formatnumberscale,Z.formatnumberscale),defaultnumberscale:K(a.defaultnumberscale,b.defaultnumberscale,Z.defaultnumberscale),numberscaleunit:c(e,b.numberscaleunit,Z.numberscaleunit).concat(),numberscalevalue:c(G,b.numberscalevalue,Z.numberscalevalue).concat(),numberprefix:K(a.numberprefix,
b.numberprefix,Z.numberprefix),numbersuffix:K(a.numbersuffix,b.numbersuffix,Z.numbersuffix),decimalprecision:parseInt("auto"===a.decimals?Z.decimalprecision:c(a.decimals,a.decimalprecision,b.decimals,Z.decimals,b.decimalprecision,Z.decimalprecision),10),forcedecimals:c(a.forcedecimals,b.forcedecimals,Z.forcedecimals),decimalseparator:c(a.decimalseparator,b.decimalseparator,Z.decimalseparator),thousandseparator:c(a.thousandseparator,b.thousandseparator,Z.thousandseparator),thousandseparatorposition:c(ma,
b.thousandseparatorposition,Z.thousandseparatorposition),indecimalseparator:K(a.indecimalseparator,b.indecimalseparator,Z.indecimalseparator),inthousandseparator:K(a.inthousandseparator,b.inthousandseparator,Z.inthousandseparator),scalerecursively:I,maxscalerecursion:R,scaleseparator:xa};p(e.inthousandseparator)&&(this.baseConf._REGinthousandseparator=new RegExp(l(e.inthousandseparator),"g"));p(e.indecimalseparator)&&(this.baseConf._REGindecimalseparator=new RegExp(l(e.indecimalseparator)));this.Y=
[];d||(d={cacheStore:[],formatnumber:e.formatnumber,formatnumberscale:e.formatnumberscale,defaultnumberscale:e.defaultnumberscale,numberscaleunit:e.numberscaleunit.concat(),numberscalevalue:e.numberscalevalue.concat(),numberprefix:e.numberprefix,numbersuffix:e.numbersuffix,decimalprecision:e.decimalprecision,forcedecimals:e.forcedecimals,decimalseparator:e.decimalseparator,thousandseparator:e.thousandseparator,thousandseparatorposition:e.thousandseparatorposition,indecimalseparator:e.indecimalseparator,
inthousandseparator:e.inthousandseparator,scalerecursively:I,maxscalerecursion:R,scaleseparator:xa},b.useScaleRecursively&&(d.numberscalevalue&&d.numberscalevalue.length)==(d.numberscaleunit&&d.numberscaleunit.length)||(d.scalerecursively=I=0),G={cacheStore:[],formatnumber:d.formatnumber,formatnumberscale:d.formatnumberscale,defaultnumberscale:d.defaultnumberscale,numberscaleunit:d.numberscaleunit.concat(),numberscalevalue:d.numberscalevalue.concat(),numberprefix:d.numberprefix,numbersuffix:d.numbersuffix,
decimalprecision:parseInt(c(a.yaxisvaluedecimals,d.decimalprecision,2),10),forcedecimals:c(a.forceyaxisvaluedecimals,d.forcedecimals),decimalseparator:d.decimalseparator,thousandseparator:d.thousandseparator,thousandseparatorposition:d.thousandseparatorposition.concat(),indecimalseparator:d.indecimalseparator,inthousandseparator:d.inthousandseparator,scalerecursively:I,maxscalerecursion:R,scaleseparator:xa},L={cacheStore:[],formatnumber:c(a.sformatnumber,b.sformatnumber,n.sformatnumber),formatnumberscale:c(a.sformatnumberscale,
b.sformatnumberscale,n.sformatnumberscale),defaultnumberscale:K(a.sdefaultnumberscale,b.sdefaultnumberscale,d.defaultnumberscale),numberscaleunit:c(g,b.snumberscaleunit,n.snumberscaleunit).concat(),numberscalevalue:c(L,b.snumberscalevalue,n.snumberscalevalue).concat(),numberprefix:K(a.snumberprefix,b.snumberprefix,n.snumberprefix),numbersuffix:K(a.snumbersuffix,b.snumbersuffix,n.snumbersuffix),decimalprecision:parseInt(c(a.syaxisvaluedecimals,a.sdecimals,a.decimals,b.sdecimals,n.sdecimals),10),forcedecimals:c(a.forcesyaxisvaluedecimals,
a.sforcedecimals,a.forcedecimals,b.sforcedecimals,n.sforcedecimals),decimalseparator:c(a.decimalseparator,b.decimalseparator,n.decimalseparator),thousandseparator:c(a.thousandseparator,b.thousandseparator,n.thousandseparator),thousandseparatorposition:d.thousandseparatorposition.concat(),indecimalseparator:c(a.indecimalseparator,b.indecimalseparator,n.indecimalseparator),inthousandseparator:c(a.inthousandseparator,b.inthousandseparator,n.inthousandseparator),scalerecursively:fa,maxscalerecursion:Y,
scaleseparator:Pa},g=v({},L),g.decimalprecision=parseInt(c(a.sdecimals,a.decimals,a.syaxisvaluedecimals,b.sdecimals,n.sdecimals),10),g.forcedecimals=c(a.sforcedecimals,a.forcedecimals,a.forcesyaxisvaluedecimals,b.sforcedecimals,n.sforcedecimals),g.cacheStore=[],b.useScaleRecursively&&(L.numberscalevalue&&L.numberscalevalue.length)==(L.numberscaleunit&&L.numberscaleunit.length)||(L.scalerecursively=fa=0),/^(bubble|scatter|selectscatter)$/.test(pa)&&(G.formatnumber=c(a.yformatnumber,G.formatnumber),
G.formatnumberscale=c(a.yformatnumberscale,G.formatnumberscale),G.defaultnumberscale=K(a.ydefaultnumberscale,G.defaultnumberscale),G.numberscaleunit=c(H,G.numberscaleunit),G.numberscalevalue=c(ea,G.numberscalevalue),G.numberprefix=c(a.ynumberprefix,G.numberprefix),G.numbersuffix=c(a.ynumbersuffix,G.numbersuffix),d.formatnumber=c(a.yformatnumber,d.formatnumber),d.formatnumberscale=c(a.yformatnumberscale,d.formatnumberscale),d.defaultnumberscale=K(a.ydefaultnumberscale,d.defaultnumberscale),d.numberscaleunit=
c(a.ynumberscaleunit,d.numberscaleunit.concat()),d.numberscalevalue=c(a.ynumberscalevalue,d.numberscalevalue.concat()),d.numberprefix=c(a.ynumberprefix,d.numberprefix),d.numbersuffix=c(a.ynumbersuffix,d.numbersuffix)),/^(mscombidy2d|mscombidy3d)$/.test(pa)&&(L.formatnumberscale=D(a.sformatnumberscale)),/^(pie2d|pie3d|doughnut2d|doughnut3d|marimekko|pareto2d|pareto3d)$/.test(pa)&&(d.decimalprecision=c(a.decimals,"2")),I&&(d.numberscalevalue.push(1),d.numberscaleunit.unshift(d.defaultnumberscale),G.numberscalevalue.push(1),
G.numberscaleunit.unshift(G.defaultnumberscale)),fa&&(L.numberscalevalue.push(1),L.numberscaleunit.unshift(L.defaultnumberscale),g.numberscalevalue.push(1),g.numberscaleunit.unshift(g.defaultnumberscale)),this.Y[0]={yAxisLabelConf:G,dataLabelConf:d},this.Y[1]={yAxisLabelConf:L,dataLabelConf:g},this.paramLabels=d,this.param1=G,this.param2=L,this.paramLabels2=g);this.paramX={cacheStore:[],formatnumber:c(a.xformatnumber,e.formatnumber),formatnumberscale:c(a.xformatnumberscale,e.formatnumberscale),defaultnumberscale:K(a.xdefaultnumberscale,
e.defaultnumberscale),numberscaleunit:c(h,e.numberscaleunit.concat()),numberscalevalue:c(P,e.numberscalevalue.concat()),numberprefix:c(a.xnumberprefix,e.numberprefix),numbersuffix:c(a.xnumbersuffix,e.numbersuffix),decimalprecision:parseInt(c(a.xaxisvaluedecimals,a.xaxisvaluesdecimals,e.decimalprecision,2),10),forcedecimals:c(a.forcexaxisvaluedecimals,0),decimalseparator:e.decimalseparator,thousandseparator:e.thousandseparator,thousandseparatorposition:e.thousandseparatorposition.concat(),indecimalseparator:e.indecimalseparator,
inthousandseparator:e.inthousandseparator,scalerecursively:t,maxscalerecursion:C,scaleseparator:Ga};this.paramLegend=v(v({},e),{cacheStore:[],decimalprecision:parseInt(D(a.legendvaluedecimals,e.decimalprecision,2),10),forcedecimals:D(a.legendvalueforcedecimals,e.forcedecimals,0),formatnumberscale:c(a.legendvalueformatnumberscale,e.formatnumberscale),formatnumber:c(a.legendvalueformatnumber,e.formatnumber)});b.useScaleRecursively&&(this.paramX.numberscalevalue&&this.paramX.numberscalevalue.length)==
(this.paramX.numberscaleunit&&this.paramX.numberscaleunit.length)||(this.paramX.scalerecursively=t=0);t&&(this.paramX.numberscalevalue.push(1),this.paramX.numberscaleunit.unshift(this.paramX.defaultnumberscale));this.paramScale={cacheStore:[],formatnumber:c(a.tickformatnumber,e.formatnumber),formatnumberscale:c(a.tickformatnumberscale,e.formatnumberscale),defaultnumberscale:K(a.tickdefaultnumberscale,e.defaultnumberscale),numberscaleunit:c(z,e.numberscaleunit.concat()),numberscalevalue:c(N,e.numberscalevalue.concat()),
numberprefix:c(a.ticknumberprefix,e.numberprefix),numbersuffix:c(a.ticknumbersuffix,e.numbersuffix),decimalprecision:parseInt(c(a.tickvaluedecimals,e.decimalprecision,"2"),10),forcedecimals:c(a.forcetickvaluedecimals,e.forcedecimals,0),decimalseparator:e.decimalseparator,thousandseparator:e.thousandseparator,thousandseparatorposition:e.thousandseparatorposition.concat(),indecimalseparator:e.indecimalseparator,inthousandseparator:e.inthousandseparator,scalerecursively:I,maxscalerecursion:R,scaleseparator:xa};
I&&(this.paramScale.numberscalevalue.push(1),this.paramScale.numberscaleunit.unshift(this.paramScale.defaultnumberscale));this.timeConf={inputDateFormat:c(a.inputdateformat,a.dateformat,"mm/dd/yyyy"),outputDateFormat:c(a.outputdateformat,a.inputdateformat,a.dateformat,"mm/dd/yyyy"),days:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),months:"January February March April May June July August September October November December".split(" "),daySuffix:" st nd rd th th th th th th th th th th th th th th th th th st nd rd th th th th th th th st".split(" ")};
this.cleaneValueCacheStore={};this.percentStrCacheStore={}};z.prototype={cleaneValueCacheStore:{},percentStrCacheStore:{},dispose:function(){this.Y&&delete this.Y;this.cleaneValueCacheStore&&delete this.cleaneValueCacheStore;this.percentStrCacheStore&&delete this.percentStrCacheStore;this.paramLabels&&delete this.paramLabels;this.param1&&delete this.param1;this.param2&&delete this.param2;this.paramLabels2&&delete this.paramLabels2;this.csConf&&delete this.csConf;this.chartAPI&&delete this.chartAPI;
this.baseConf&&delete this.baseConf;this.timeConf&&delete this.timeConf;this.paramX&&delete this.paramX;this.paramScale&&delete this.paramScale},parseMLAxisConf:function(a,d){var e=this.baseConf,g=this.csConf,h=this.chartAPI,l=D(a.scalerecursively,e.scalerecursively),m=D(a.maxscalerecursion,e.maxscalerecursion),z=p(a.scaleseparator,e.scaleseparator),v,H,G,M,P,N;d=D(d,this.Y.length);p(a.numberscaleunit)&&(v=a.numberscaleunit.split(","));p(a.numberscalevalue)&&(H=a.numberscalevalue.split(","));m||(m=
-1);if(p(a.thousandseparatorposition))for(G=a.thousandseparatorposition.split(","),M=G.length,N=n.thousandseparatorposition[0];M--;)(P=D(b(G[M])))?N=P:P=N,G[M]=P;e={cacheStore:[],formatnumber:c(a.formatnumber,e.formatnumber),formatnumberscale:c(a.formatnumberscale,e.formatnumberscale),defaultnumberscale:K(a.defaultnumberscale,e.defaultnumberscale),numberscaleunit:c(v,e.numberscaleunit).concat(),numberscalevalue:c(H,e.numberscalevalue).concat(),numberprefix:K(a.numberprefix,e.numberprefix),numbersuffix:K(a.numbersuffix,
e.numbersuffix),forcedecimals:c(a.forcedecimals,e.forcedecimals),decimalprecision:parseInt("auto"===a.decimals?g.decimalprecision:c(a.decimals,e.decimalprecision),10),decimalseparator:c(a.decimalseparator,e.decimalseparator),thousandseparator:c(a.thousandseparator,e.thousandseparator),thousandseparatorposition:c(G,e.thousandseparatorposition),indecimalseparator:K(a.indecimalseparator,e.indecimalseparator),inthousandseparator:K(a.inthousandseparator,e.inthousandseparator),scalerecursively:l,maxscalerecursion:m,
scaleseparator:z};h.useScaleRecursively&&(e.numberscalevalue&&e.numberscalevalue.length)==(e.numberscaleunit&&e.numberscaleunit.length)||(e.scalerecursively=l=0);h={cacheStore:[],formatnumber:e.formatnumber,formatnumberscale:e.formatnumberscale,defaultnumberscale:e.defaultnumberscale,numberscaleunit:e.numberscaleunit.concat(),numberscalevalue:e.numberscalevalue.concat(),numberprefix:e.numberprefix,numbersuffix:e.numbersuffix,decimalprecision:parseInt(c(a.yaxisvaluedecimals,e.decimalprecision,2),10),
forcedecimals:c(a.forceyaxisvaluedecimals,e.forcedecimals),decimalseparator:e.decimalseparator,thousandseparator:e.thousandseparator,thousandseparatorposition:e.thousandseparatorposition.concat(),indecimalseparator:e.indecimalseparator,inthousandseparator:e.inthousandseparator,scalerecursively:l,maxscalerecursion:m,scaleseparator:z};l&&(e.numberscalevalue.push(1),e.numberscaleunit.unshift(e.defaultnumberscale),h.numberscalevalue.push(1),h.numberscaleunit.unshift(h.defaultnumberscale));this.Y[d]={dataLabelConf:e,
yAxisLabelConf:h}},percentValue:function(a){var b=this.percentStrCacheStore[a];void 0===b&&(b=isNaN(this.paramLabels.decimalprecision)?"2":this.paramLabels.decimalprecision,b=this.percentStrCacheStore[a]=e(d(a,b,this.paramLabels.forcedecimals),this.paramLabels.decimalseparator,this.paramLabels.thousandseparator,this.paramLabels.thousandseparatorposition)+"%");return b},getCleanValue:function(a,c){var d=this.cleaneValueCacheStore[a];if(void 0===d){var e=this.baseConf,d=a+"";e._REGinthousandseparator&&
(d=d.replace(e._REGinthousandseparator,""));e._REGindecimalseparator&&(d=d.replace(e._REGindecimalseparator,"."));d=parseFloat(d);d=isFinite(d)?d:NaN;this.cleaneValueCacheStore[a]=d=isNaN(d)?null:c?b(d):d}return d},dataLabels:function(a,b){var c=this.Y[b]||(b?this.Y[1]:this.Y[0]),d,c=c&&c.dataLabelConf||this.baseConf;d=c.cacheStore[a];void 0===d&&(d=c.cacheStore[a]=h(a,c));return d},yAxis:function(a,b){var c=this.Y[b]||(b?this.Y[1]:this.Y[0]),d,c=c&&c.yAxisLabelConf||this.baseConf;d=c.cacheStore[a];
void 0===d&&(d=c.cacheStore[a]=h(a,c,!0));return d},xAxis:function(a){var b=this.paramX.cacheStore[a];void 0===b&&(b=this.paramX.cacheStore[a]=h(a,this.paramX,!0));return b},sYAxis:function(a){var b=this.Y[1],c,b=b&&b.yAxisLabelConf||this.baseConf;c=b.cacheStore[a];void 0===c&&(c=b.cacheStore[a]=h(a,b));return c},scale:function(a){var b=this.paramScale.cacheStore[a];void 0===b&&(b=this.paramScale.cacheStore[a]=h(a,this.paramScale));return b},getCleanTime:function(a){var b;this.timeConf.inputDateFormat&&
Date.parseExact&&(b=Date.parseExact(a,this.timeConf.inputDateFormat));return b&&b.getTime()},legendValue:function(a){var b=this.paramLegend.cacheStore[a];void 0===b&&(b=this.paramLegend.cacheStore[a]=h(a,this.paramLegend));return b},legendPercentValue:function(a){var b=this.percentStrCacheStore[a],c=this.paramLegend;void 0===b&&(b=isNaN(c.decimalprecision)?"2":c.decimalprecision,b=this.percentStrCacheStore[a]=e(d(a,b,c.forcedecimals),c.decimalseparator,c.thousandseparator,c.thousandseparatorposition)+
"%");return b},getDateValue:function(a){var b,c,d;a&&!/\//.test(this.timeConf.inputDateFormat)&&(a=a.replace(new RegExp(this.timeConf.inputDateFormat.replace(/[a-z]/ig,"").slice(0,1),"g"),"/"));a=/^dd/.test(this.timeConf.inputDateFormat)&&a&&a.replace(/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/,"$2/$1/$3")||a;b=new Date(a);c=b.getTime();!c&&a&&/\:/.test(a)&&(a=a.split(":"),c=D(a[0],0),d=D(a[1],0),a=D(a[2],0),c=23<c?24===c&&0===d&&0===a?c:23:c,d=59<d?59:d,a=59<a?59:a,b=new Date,b.setHours(c),b.setMinutes(d),
b.setSeconds(a),c=b.getTime());return{ms:c,date:b}},getFormattedDate:function(a,b){var d="object"===typeof a&&a||new Date(a),e=this.timeConf,g=c(b,e.outputDateFormat),h=d.getFullYear(),l=d.getMonth(),p=d.getDate(),n=d.getDay(),m=d.getMinutes(),z=d.getSeconds(),d=d.getHours(),m=9<m?""+m:"0"+m,z=9<z?""+z:"0"+z,d=9<d?""+d:"0"+d;g.match(/dnl/)&&(g=g.replace(/dnl/ig,e.days[n]));g.match(/dns/)&&(g=g.replace(/dns/ig,e.days[n]&&e.days[n].substr(0,3)));g.match(/dd/)&&(g=g.replace(/dd/ig,p));g.match(/mnl/)&&
(g=g.replace(/mnl/ig,e.months[l]));g.match(/mns/)&&(g=g.replace(/mns/ig,e.months[l]&&e.months[l].substr(0,3)));g.match(/mm/)&&(g=g.replace(/mm/ig,l+1));g.match(/yyyy/)&&(g=g.replace(/yyyy/ig,h));g.match(/yy/)&&(g=g.replace(/yy/ig,(h%1E3%100+"").replace(/^(\d)$/,"0$1")));g.match(/hh12/)&&(g=g.replace(/hh12/ig,d%12||12));g.match(/hh/)&&(g=g.replace(/hh/ig,d));g.match(/mn/)&&(g=g.replace(/mn/ig,m));g.match(/ss/)&&(g=g.replace(/ss/ig,z));g.match(/ampm/)&&(g=g.replace(/ampm/ig,12>d?"AM":"PM"));g.match(/ds/)&&
(g=g.replace(/ds/ig,e.daySuffix[p]));return g}};z.prototype.constructor=z;h=function(a,b,h){if(null!==a){a=Number(a);var l=a+"",p,n,m,z,v;p=1==b.formatnumberscale?b.defaultnumberscale:"";v=(v=l.split(".")[1])?v.length:b.forcedecimals?"2":"";if(1==b.formatnumberscale){l=a;n=b.numberscalevalue;a=b.numberscaleunit;p={};var H=b.defaultnumberscale;m=0;var G=[],M=[];if(b.scalerecursively){for(m=0;m<n.length;m++)if(z=D(n[m])||1E3,Math.abs(Number(l))>=z&&m<n.length-1)H=l%z,l=(l-H)/z,0!==H&&(G.push(H),M.push(a[m]));
else{G.push(l);M.push(a[m]);break}G.reverse();M.reverse();p.value=G;p.scale=M}else{if(n.length===a.length)for(m=0;m<n.length;m++)if(z=D(n[m])||1E3,Math.abs(Number(l))>=z)H=a[m]||"",l=Number(l)/z;else break;p.value=l;p.scale=H}n=p;a=l=n.value;p=n.scale}if(b.scalerecursively&&0!==b.formatnumberscale&&"0"!==b.formatnumberscale){h=n.value;n=n.scale;a=-1==b.maxscalerecursion?h.length:Math.min(h.length,b.maxscalerecursion);if(1==b.formatnumber)for(l="",z=0;z<a;z++)p=0===z?h[z]:Math.abs(h[z]),m=p+"",z==
a-1&&(m=d(p,c(b.decimalprecision,v),b.forcedecimals)),l=l+e(m,b.decimalseparator,b.thousandseparator,b.thousandseparatorposition)+n[z]+(z<a-1?b.scaleseparator:"");else for(l="",z=0;z<a;z++)l=l+(0===z?h[z]:Math.abs(h[z])+"")+n[z]+(z<a-1?b.scaleseparator:"");l=(b.numberprefix||"")+l+(b.numbersuffix||"")}else 1==b.formatnumber&&(l=d(a,c(b.decimalprecision,v),b.forcedecimals),l=e(l,b.decimalseparator,b.thousandseparator,b.thousandseparatorposition,h)),l=(b.numberprefix||"")+l+p+(b.numbersuffix||"");return l}};
return z}();d.extend(d.core,{formatNumber:function(a,b){b=b&&z(b)||{};var c=N(b),d;P[c]?d=P[c]:P[c]=d=new m.NumberFormatter(b,{useScaleRecursively:!0});return d.dataLabels(a)}},!1);d.extend(d.core,{formatNumber:function(a,b,c,l){c=c&&z(c)||{};var p=this.jsVars.instanceAPI||{},H=p.numberFormatter,q;""===N(c)?H?q=H:(H=this.getChartData(d.dataFormats.JSON,!0),H=H.data||{},H=H.chart||{},c=N(H),P[c]?q=P[c]:P[c]=q=new m.NumberFormatter(H,p)):(H=this.getChartData(d.dataFormats.JSON,!0),H=H.data||{},H=H.chart||
{},H=v(v({},H),c),c=N(H),P[c]?q=P[c]:P[c]=q=new m.NumberFormatter(H,p));switch((b&&b.toLowerCase?b:"").toLowerCase()){case "yaxisvalues":a=q.yAxis(a,l);break;case "xaxisvalues":a=q.xAxis(a);break;case "scale":a=q.scale(a);break;default:a=q.dataLabels(a,l)}return a}},!0)}]);
FusionCharts.register("module",["private","modules.renderer.js-dom",function(){var d=this.hcLib,m=this.window,D=m.document,v=d.extend2,p="ontouchstart"in m;(function(c){var d=function(){var b={},a;b.pointerdrag={start:["mousedown"],end:["mouseup"],onStart:["mousemove"],postHandlers:{},preHandlers:{}};b.pointerhover={start:["mouseover"],end:["mouseout"]};b.click={start:["click"]};b.escape={start:["keydown"],preHandlers:{start:function(a){a=a||m.event;return a.keyCode&&27===a.keyCode?!0:!1}}};p&&(a=
b.pointerdrag,a.start.push("touchstart"),a.end.push("touchend"),a.onStart.push("touchmove"),a.postHandlers.onStart=function(a){a.preventDefault?a.preventDefault():a.returnValue=!1},a=b.click,a.start.push("touchstart"));return b}(),b;b=v({},d);c.dem=new function(){var c={},a={},d=D.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},p=D.removeEventListener?function(a,b,c){a.removeEventListener(b,c,!1)}:function(a,b,c){a.detachEvent("on"+b,c)},N=function(a,
c,d){var g=[],l,p,v;v=b[c];d.start=function(b){b=b||m.event;for(var c=v.onStart,g=v.end,h=[],l=[],p=c&&c.length||0;p--;)h.push(z(a,c[p],d,"onStart"));for(p=g&&g.length||0;p--;)l.push(z(a,g[p],d,"end"));d.startUn=d.startUn?d.startUn.concat(h):h;d.endUn=d.endUn?d.endUn.concat(l):l;d.state="start";d.closure(b)};d.onStart=function(a){a=a||m.event;d.state="on";if(d.gDef&&d.gDef.preHandlers&&"function"===typeof d.gDef.preHandlers.onStart)d.gDef.preHandlers.onStart(a);d.closure(a);if(d.gDef&&d.gDef.postHandlers&&
"function"===typeof d.gDef.postHandlers.onStart)d.gDef.postHandlers.onStart(a)};d.end=function(a){a=a||m.event;for(var b=d.startUn,c=d.endUn,e=b&&b.length||0;e--;)b[e]();delete d.startUn;d.startUn=[];for(e=c&&c.length||0;e--;)c[e]();delete d.endUn;d.endUn=[];d.state="end";d.closure(a)};if(v)for(c=v.start,p=c.length;p--;)(l=c[p])&&g.push(z(a,l,d,"start"));return g},z=function(a,b,c,g){g=g||"closure";d(a,b,c[g]);return function(){p(a,b,c[g])}},g=function(a){return function(b){b=b||m.event;a.handler.call(a.context||
a.elem,{data:a.data,type:a.type,state:a.state,isGesture:a.isGesture,target:b.target||b.srcElement,originalEvent:b})}};return{listen:function(d,h,l,p,m){var q=this;h="string"===typeof h?h.split(" "):h;var v=h.length,w=[],P=function(a,b,c){w.push(function(){q.unlisten(a,b,c)})},s,K,U,ba,Ba;if(d.ownerDocument&&d.ownerDocument===D)for(;v--;)K=h[v],ba=Boolean(b[K]),Ba="function"===typeof l?l:l[v],U={handler:Ba,elem:d,type:K,isGesture:ba,gDef:ba?b[K]:null,data:p,context:m,start:[],end:[],links:{prev:null,
next:null}},U.closure=g(U),ba?((s=a[K])||(s=a[K]=[]),s.push(U),N(d,K,U)):((s=c[K])||(s=c[K]=[]),s.push(U),z(d,K,U)),P(d,K,Ba);else for(;v--;)K=h[v],Ba="function"===typeof l?l:l[v],U={handler:Ba,elem:d,type:K,isGesture:ba,data:p,context:m,start:[],end:[],links:{prev:null,next:null}},U.closure=g(U),(s=c[K])||(s=c[K]=[]),s.push(U),z(d,K,U),P(d,K,Ba);return{unlisten:function(){for(var a=w.length;a--;)w[a]();w.length=0;w=null}}},unlisten:function(d,g,l){var m,z=!1,q,v;if(Boolean(b[g]))for(q=(m=a[g])&&
m.length||0;q--;){if(v=m[q],v.handler===l&&v.elem===d){var z=d,w=void 0,D=void 0,s=void 0,w=void 0;if(w=b[g])for(w=w.start,s=w.length;s--;)(D=w[s])&&p(z,D,v.start);m.splice(q,1);z=!0}}else for(q=(m=c[g])&&m.length||0;q--;)v=m[q],v.handler===l&&v.elem===d&&(p(d,g,v.closure),m.splice(q,1),z=!0);return z},fire:function(a,b,d,g){var l;if(a.ownerDocument&&a.ownerDocument===D)D.createEvent?(l=D.createEvent("HTMLEvents"),l.initEvent(b,!0,!0),d&&(d.originalEvent?d.originalEvent=l:v(l,d)),"function"===typeof a[b]&&
a[b].call(a),a.dispatchEvent(l)):(l=D.createEventObject(),l.eventType=b,d&&(d.originalEvent?d.originalEvent=l:v(l,d)),"function"===typeof a[b]&&a[b].call(a),a.fireEvent("on"+b,l)),g&&!l.returnValue&&g(l);else for(g=(b=c[b])&&b.length||0;g--;)l=b[g],l.elem===a&&l.closure(d)}}}})(d||m);(function(c){function d(a,b){var c="";D.defaultView&&D.defaultView.getComputedStyle?c=D.defaultView.getComputedStyle(a,"").getPropertyValue(b):a.currentStyle&&(b=b.replace(/\-(\w)/g,function(a,b){return b.toUpperCase()}),
c=a.currentStyle[b]);c=parseInt(c,10);return isNaN(c)?0:c}function b(b,c,d,g,e,h,p,m){var v=c/40,q=a[h||"linear"](g-d,v),D=0,w=function(){var a;D<v?(a=q[D],b.style[e]=d+a+m,l&&"opacity"===e&&(a=100*Number(a),b.style.filter="progid:DXImageTransform.Microsoft.Alpha(Opacity="+a+")"),D+=1,setTimeout(w,40)):p&&p()};m=m||"";setTimeout(w,40)}var p={width:{suffix:"px"},height:{suffix:"px"},opacity:!0,top:{suffix:"px"},left:{suffix:"px"}},a={linear:function(a,b){for(var c=[],d=a/b,e=0;e<b;e+=1)c[e]=d*(e+1);
return c}},l=/msie/i.test(m.navigator.userAgent)&&!m.opera;c.danimate=v({animate:function(a,c,l,g,e){g={};var h={},m=function(){D+=1;D===v&&"function"===typeof e&&e()},v=0,D=0,q,J;if(40>l){for(J in c)a.style[J]=c[J];e&&e()}else for(J in c)p[J]&&(v+=1,g[J]=c[J],h[J]=d(a,J),q="object"===typeof p[J]&&p[J].suffix,b(a,l,h[J],g[J],J,"linear",m,q))}},{})})(d||m)}]);
FusionCharts.register("module",["private","modules.renderer.js-colormanager",function(){var d=this.hcLib,m=d.pluckNumber,D=d.graphics.getDarkColor,v=d.graphics.getLightColor,p="AFD8F8 F6BD0F 8BBA00 FF8E46 008E8E D64646 8E468E 588526 B3AA00 008ED6 9D080D A186BE CC6600 FDC689 ABA000 F26D7D FFF200 0054A6 F7941C CC3300 006600 663300 6DCFF6".split(" "),c="8BBA00 F6BD0F FF654F AFD8F8 FDB398 CDC309 B1D0D2 FAD1B9 B8A79E D7CEA5 C4B3CE E9D3BE EFE9AD CEA7A2 B2D9BA".split(" "),K=d.defaultPaletteOptions={paletteColors:[p,
p,p,p,p],bgColor:["CBCBCB,E9E9E9","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:["0,100","0,100","0,100","0,100","0,100"],bgAlpha:["50,50","60,50","40,20","20,10","30,30"],canvasBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],canvasBgAngle:[0,0,0,0,0],canvasBgAlpha:["100","100","100","100","100"],canvasBgRatio:["","","","",""],canvasBorderColor:["545454","545454","415D6F","845001","68001B"],canvasBorderAlpha:[100,100,100,90,100],showShadow:[0,
1,1,1,1],divLineColor:["717170","7B7D6D","92CDD6","965B01","68001B"],divLineAlpha:[40,45,65,40,30],altHGridColor:["EEEEEE","D8DCC5","99C4CD","DEC49C","FEC1D0"],altHGridAlpha:[50,35,10,20,15],altVGridColor:["767575","D8DCC5","99C4CD","DEC49C","FEC1D0"],altVGridAlpha:[10,20,10,15,10],anchorBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E",
"025B6A","A15E01","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50],legendBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],legendBorderColor:["545454","545454","415D6F","845001","D55979"],plotGradientColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],plotBorderColor:["333333","8A8A8A","FFFFFF","FFFFFF","FFFFFF"],plotFillColor:["767575","D8DCC5","99C4CD","DEC49C","FEC1D0"],bgColor3D:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],bgAlpha3D:["100",
"100","100","100","100"],bgAngle3D:[90,90,90,90,90],bgRatio3D:["","","","",""],canvasBgColor3D:["DDE3D5","D8D8D7","EEDFCA","CFD2D8","FEE8E0"],canvasBaseColor3D:["ACBB99","BCBCBD","C8A06C","96A4AF","FAC7BC"],divLineColor3D:["ACBB99","A4A4A4","BE9B6B","7C8995","D49B8B"],divLineAlpha3D:[100,100,100,100,100],legendBgColor3D:["F0F3ED","F3F3F3","F7F0E8","EEF0F2","FEF8F5"],legendBorderColor3D:["C6CFB8","C8C8C8","DFC29C","CFD5DA","FAD1C7"],toolTipbgColor3D:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor3D:["49563A",
"666666","49351D","576373","681C09"],baseFontColor3D:["49563A","4A4A4A","49351D","48505A","681C09"],anchorBgColor3D:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"]},p=d.colorManager=function(b,c){var a=b.chart,l=d.extend2({},K),p=c.defaultPaletteOptions||{},N;l||(l={});for(N in p)l[N]=p[N];l=this.paletteOptions=l;p=this.themeEnabled=a.palettethemecolor;this.paletteIndex=(0<a.palette&&6>a.palette?a.palette:m(c.paletteIndex,1))-1;this.iterator=0;this.paletteColors=l.paletteColors[this.themeEnabled?0:
this.paletteIndex];N=a.palettecolors;void 0!==N&&null!==N&&""!==a.palettecolors&&(this.paletteColors=a.palettecolors.split(/\s*\,\s*/));this.paletteLen=this.paletteColors.length;this.useFlatColors=m(a.useflatdataplotcolor,c.useFlatColor,0);p&&(this.paletteIndex=5,l.bgColor.push(v(p,35)+","+v(p,10)),l.bgAngle.push(270),l.bgRatio.push("0,100"),l.bgAlpha.push("50,50"),l.canvasBgColor.push("FFFFFF"),l.canvasBgAngle.push(0),l.canvasBgAlpha.push("100"),l.canvasBgRatio.push(""),l.canvasBorderColor.push(D(p,
80)),l.canvasBorderAlpha.push(100),l.showShadow.push(1),l.divLineColor.push(D(p,20)),l.divLineAlpha.push(40),l.altHGridColor.push(v(p,20)),l.altHGridAlpha.push(15),l.altVGridColor.push(v(p,80)),l.altVGridAlpha.push(10),l.anchorBgColor.push("FFFFFF"),l.toolTipBgColor.push("FFFFFF"),l.toolTipBorderColor.push(D(p,80)),l.baseFontColor.push(p.split&&p.split(",")[0]),l.borderColor.push(D(p,60)),l.borderAlpha.push(50),l.legendBgColor.push("FFFFFF"),l.legendBorderColor.push(D(p,80)),l.plotGradientColor.push("FFFFFF"),
l.plotBorderColor.push(D(p,85)),l.plotFillColor.push(D(p,85)),l.bgColor3D.push("FFFFFF"),l.bgAlpha3D.push("100"),l.bgAngle3D.push(90),l.bgRatio3D.push(""),l.canvasBgColor3D.push(v(p,20)),l.canvasBaseColor3D.push(v(p,40)),l.divLineColor3D.push(D(p,20)),l.divLineAlpha3D.push(40),l.legendBgColor3D.push("FFFFFF"),l.legendBorderColor3D.push(D(p,80)),l.toolTipbgColor3D.push("FFFFFF"),l.toolTipBorderColor3D.push(D(p,80)),l.baseFontColor3D.push(p.split&&p.split(",")[0]),l.anchorBgColor3D.push("FFFFFF"),l.tickColor&&
l.tickColor.push(D(p,90)),l.trendDarkColor&&l.trendDarkColor.push(D(p,90)),l.trendLightColor&&l.trendLightColor.push(v(p,l.TrendLightShadeOffset)),l.msgLogColor&&l.msgLogColor.push(v(p,80)),l.dialColor&&l.dialColor.push(D(p,95)+",FFFFFF,"+D(p,95)),l.dialBorderColor&&l.dialBorderColor.push(D(p,95)+",FFFFFF,"+D(p,95)),l.pivotColor&&l.pivotColor.push(v(p,95)+",FFFFFF,"+v(p,95)),l.pivotBorderColor&&l.pivotBorderColor.push(D(p,95)+",FFFFFF,"+D(p,95)),l.pointerBorderColor&&l.pointerBorderColor.push(D(p,
75)),l.pointerBgColor&&l.pointerBgColor.push(D(p,75)),l.thmBorderColor&&l.thmBorderColor.push(D(p,90)),l.thmFillColor&&l.thmFillColor.push(v(p,55)),l.cylFillColor&&l.cylFillColor.push(v(p,55)),l.periodColor&&l.periodColor.push(v(p,10)),l.winColor&&l.winColor.push("666666"),l.lossColor&&l.lossColor.push("CC0000"),l.drawColor&&l.drawColor.push("666666"),l.scorelessColor&&l.scorelessColor.push("FF0000"),l.gridColor&&l.gridColor.push(v(p,30)),l.categoryBgColor&&l.categoryBgColor.push(v(p,10)),l.dataTableBgColor&&
l.dataTableBgColor.push(v(p,10)),l.gridResizeBarColor&&l.gridResizeBarColor.push(D(p,90)),l.scrollBarColor&&l.scrollBarColor.push(v(p,50)))};p.prototype={getColor:function(b){return this.paletteOptions[b][this.paletteIndex]},getPlotColor:function(b){var c=this.paletteColors;b=this.useFlatColors?this.getColor("plotFillColor"):c[b%this.paletteLen];b||(this.iterator===this.paletteLen&&(this.iterator=0),b=c[this.iterator],this.iterator+=1);return b},parseColorMix:function(b,c){var a=[],d,p,m,z,g,e,h,
n,M,H;c=c.replace(/\s/g,"");c=c.toLowerCase();if(""===c||null===c||void 0===c)a=[b];else for(p=c.split(","),m=b.split(","),z=Math.max(p.length,m.length,1),g=p[0],e=m[0],M=/[\{\}]/ig,H=0;H<z;H++)h=(p[H]||g).replace(M,""),n=m[H]||e,"color"==h?a.push(n):"light"==h.substr(0,5)?(d=h.indexOf("-"),d=-1==d?1:h.substr(d+1,h.length-d),d=100-d,a.push(v(n,d))):"dark"==h.substr(0,4)?(d=h.indexOf("-"),d=-1==d?1:h.substr(d+1,h.length-d),d=100-d,a.push(D(n,d))):a.push(h);return a},parseAlphaList:function(b,c){var a=
b.split(","),d=[],p,v=100,z;for(z=0;z<c;z++)p=m(a[z]),void 0!==p&&null!==p&&(v=p),d[z]=v;return d.join()},parseRatioList:function(b,c){var a=b.split(","),d=[],p=0,m,z;for(z=0;z<c;z++)m=a[z],m=isNaN(m)||void 0===m?0:Math.abs(Number(m)),m=100<m?100:m,d[z]=m,p+=m;p=100<p?100:p;if(a.length<c)for(z=a.length;z<c;z++)d[z]=(100-p)/(c-a.length);d[-1]=0;return d.join()}};p.prototype.constructor=p;d.defaultGaugePaletteOptions={paletteColors:[c,c,c,c,c],bgColor:["CBCBCB,E9E9E9","CFD4BE,F3F5DD","C5DADD,EDFBFE",
"A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:["0,100","0,100","0,100","0,100","0,100"],bgAlpha:["50,50","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["555555","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],trendDarkColor:["333333","60634E","025B6A","A15E01","68001B"],trendLightColor:["f1f1f1","F3F5DD",
"EDFBFE","FFF5E8","FFD1DD"],pointerBorderColor:["545454","60634E","415D6F","845001","68001B"],pointerBgColor:["545454","60634E","415D6F","845001","68001B"],canvasBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],canvasBgAngle:[0,0,0,0,0],canvasBgAlpha:["100","100","100","100","100"],canvasBgRatio:["","","","",""],canvasBorderColor:["545454","545454","415D6F","845001","68001B"],canvasBorderAlpha:[100,100,100,90,100],altHGridColor:["EEEEEE","D8DCC5","99C4CD","DEC49C","FEC1D0"],altHGridAlpha:[50,
35,10,20,15],altVGridColor:["767575","D8DCC5","99C4CD","DEC49C","FEC1D0"],altVGridAlpha:[10,20,10,15,10],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50],legendBgColor:["ffffff","ffffff","ffffff","ffffff","ffffff"],legendBorderColor:["545454","545454","415D6F","845001","D55979"],plotFillColor:["767575","D8DCC5","99C4CD","DEC49C","FEC1D0"],plotBorderColor:["999999","8A8A8A","6BA9B6","C1934D","FC819F"],msgLogColor:["717170","7B7D6D","92CDD6","965B01","68001B"],
TrendLightShadeOffset:30}}]);
FusionCharts.register("module",["private","modules.renderer.js-annotations",function(){var d=this,m=d.core,D=d.hcLib,v=d.window,p=/msie/i.test(v.navigator.userAgent)&&!v.opera,c=D.addEvent,K=D.removeEvent,b=D.hasTouch,G=v.Number,a=b?6:5,l="rgba(192,192,192,"+(p?.002:1E-6)+")",p=v.Math,P=p.min,N=p.max,z=p.sin,g=p.cos,e=p.PI,h=e/180,n=d.extend,M=D.pluck,H=D.pluckNumber,q=D.graphics.convertColor,J=D.getValidValue,w=D.parseUnsafeString,ja=D.setImageDisplayMode,s=D.graphics.parseColor,$=D.setLineHeight,
U=D.getMouseCoordinate,ba={style:{}},Ba=D.toRaphaelColor,la=function(a,b){return{start:-b,end:-a,angle:a-b}},ga=function(a,b,c,d,e){var g,h,l=0,p=0;h=void 0===b||null===b?1:b;var m;if(!a||!a.toString)return{value:c,hasDynamicMacros:!1};a=a.toString();a=a.toLowerCase().replace(/\s/g,"");if(c=a.match(/^[\+\-]?\d+(\.\d+)?|[\+\-]\d+(\.\d+)?/g)){for(b=0;b<c.length;b+=1)l+=Number(c[b])||0;l*=h}if(c=a.match(/^[\+\-]?(\$[a-z0-9\.]+)|[\+\-](\$[a-z0-9\.]+)/g))for(b=0;b<c.length;b+=1){g=c[b];var q=d,n=e,s=g.split("."),
z=void 0,v=void 0,w=0;for(h=void 0;z=s.shift();)switch(typeof(v=q[z])){case "object":q=v[z];break;case "function":v=v(s,n),"-"===g.charAt()&&(v*=-1),h=!0;default:w+=G(v)||0,s.length=0}g=w;h&&(m=!0);p+=g}if(c=a.match(/^[\+\-]?\$\d+(\.\d+)?|[\+\-]\$\d+(\.\d+)?/g))for(b=0;b<c.length;b+=1)p=p+Number(c[b].replace("$",""))||0;return{value:l+p,hasDynamicMacros:m}},ea=function(a,b,c){if(!b.removed){b=b.data("annotation");var e=b.getRenderer(),g=U(e.container,c),h=g.annotationOptions=b.options,l=g.groupOptions=
b.group.options;g._shape=b;"id"in h&&(g.annotationId=h.id);"id"in l&&(g.groupId=l.id);d.raiseEvent(a,g,e.fusionCharts,c)}},pa,Z,ma;Z=function(a,b,c,d,e){this.options=a;this.attrs={};this.css={};this.bounds={};this.shared=b;this.snaps=c||{};this.annotations=e;this.items=b=[];this._idstore=d;a.id&&(this._id=a.id,d[a.id]=this);if(a=a.items)for(d=0,c=a.length;d<c;d+=1)b.push(new ma(a[d],this))};n(Z.prototype,{scaleImageX:1,scaleImageY:1,scaleText:1,scaleValue:1,scaleValueComplement:1,scaleX:1,scaleY:1});
Z.prototype.setup=function(){var a=this.options,b=this.shared,c=this.getRenderer();c&&(this.isBelow=0!==H(a.showbelow,a.showbelowchart,b.showbelow),this.useTracker=!this.isBelow&&c.layers.tracker&&this.shared.useTracker,this.raiseOwnEvents=b.interactionevents)};Z.prototype.scale=function(){var a=this.options,b=this.shared,c=this.bounds,d=this.snaps,e=this.getRenderer(),g=b.rootxscale,h=b.rootyscale,l=c.xs=H(a.xscale,b.xscale,100)/100,p=c.ys=H(a.yscale,b.yscale,100)/100,m,q,n;e&&(this.scaleText*=p,
this.scaleImageX*=l,this.scaleImageY*=p,0!==H(a.autoscale,b.autoscale)&&(l=H(a.origw,b.origw),p=H(a.origh,b.origh),l=e.chartWidth/l,p=e.chartHeight/p,e=0!==H(a.constrainedscale,b.constrainedscale),m=l<p?l:p,q=e?m:l,n=e?m:p,this.scaleValue=Z.prototype.scaleValue*m,this.scaleValueComplement=Z.prototype.scaleValueComplement*(e?m:l<p?p:l),this.scaleX=Z.prototype.scaleX*q,this.scaleY=Z.prototype.scaleX*n,c.xs*=q,c.ys*=n,g*=q,h*=n,"1"==M(a.scaletext,b.scaletext)&&(this.scaleText=Z.prototype.scaleText*n),
"1"==M(a.scaleimages,b.scaleimages)&&(this.scaleImageX=Z.prototype.scaleImageX*q,this.scaleImageY=Z.prototype.scaleImageY*n)),c.x=ga(M(a.x,a.xpos),g,0,d,this.isBelow).value+H(a.grpxshift,b.grpxshift,0),c.y=ga(M(a.y,a.ypos),h,0,d,this.isBelow).value+H(a.grpyshift,b.grpyshift,0),this.xshift=H(a.xshift,b.xshift,0),this.yshift=H(a.yshift,b.yshift,0))};Z.prototype.draw=function(){var a=this.getRenderer(),b=this.options,c=this.bounds,d=this.items,e=a&&a.layers.dataset,g=this.wrapper;if(a){g||(this.wrapper=
g=a.paper.group("annotations"),e&&(this.isBelow?g.insertBefore(e):g.insertAfter(a.layers.datalabels||e)));this.wrapper.attr({x:0,y:0,visibility:H(b.visible,1)?"":"hidden"}).translate(c.x,c.y);b=0;for(c=d.length;b<c;b+=1)a=d[b],a.scale(!0),a.queueDraw?a.queue():(a.setup(),a.draw());return this}};Z.prototype.destroy=function(){for(var a=this.wrapper,b=this.items,c;c=b.shift();)c.destroy();a&&(this.wrapper=a.remove());this._idstore[this._id]===this&&delete this._idstore[this._id]};Z.prototype.addItem=
function(a,b){var c;this.items.push(c=new ma(a,this,this._idstore));b&&null!==this.getRenderer()&&(c.scale(),c.setup(),c.draw());return c};Z.prototype.removeItem=function(a){for(var b=this.items,c=b.length;c--;)if(a===b[c]._id)return b.splice(c,1)};Z.prototype.getRenderer=function(){return this.annotations&&this.annotations.getRenderer()||null};ma=function(a,b){var c=!1,d;this.options=a;this.group=b;this.args=[];this.attrs={};this.attrsTracker={};this.style={};this.bounds={};this._idstore=b._idstore;
a.id&&(this._id=a.id,b._idstore[a.id]=this);this.type=a.type&&a.type.toLowerCase&&a.type.toLowerCase();for(d in ma.eventNames)"function"===typeof a[d]&&(this[d]=a[d],c=!0);this.hasEvents=c;"function"===typeof a.onload&&(this.onload=a.onload)};d.extend(ma.prototype,{getAbsoluteBounds:function(){var a=this.bounds,b=a.x1,c=a.y1,d=a.x2,e=a.y2,g=P(b,d),h=P(c,e),b=N(b,d)-g,c=N(c,e)-h;return{x:g,width:b,y:h,height:c,r:a.r,unscaled:{width:b/a.xs,height:c/a.ys}}},queue:function(){this.group.annotations.shapesToDraw.push(this)},
scale:function(a){var b=this,c=b.group,d=c.bounds,e=b.bounds,g=b.options,h=c.snaps,l=M(g.x,g.xpos),p=M(g.y,g.ypos),m=M(g.tox,g.toxpos),q=M(g.toy,g.toypos),n=e.xs=d.xs,d=e.ys=d.ys,s=H(g.xshift,c.xshift,0),z=H(g.yshift,c.yshift,0),v;v=function(d,e,g,h){d=ga(d,e,g,h,c.isBelow);d.hasDynamicMacros&&a&&(b.queueDraw=!0);return d.value};b.hasDimension=!0;b.hasDimensionX=!0;b.hasDimensionY=!0;e.x1=v(l,n,0,h)+s;void 0===m?(b.hasDimension=!1,b.hasDimensionX=!1,e.x2=e.x1):e.x2=v(m,n,0,h)+s;e.y1=v(p,d,0,h)+z;
void 0===q?(b.hasDimension=!1,b.hasDimensionY=!1,e.y2=e.y1):e.y2=v(q,d,0,h)+z;ma.angularShapeTypes[b.type]&&(e.angles=la(v(g.startangle,1,0,h),v(g.endangle,1,360,h)));e.r=v(g.radius,c.scaleValue,0,h)},setup:function(){var a=this.options,b=this.group,c=b.options,d=this.attrs,e=this.style,g=b.scaleValue,h=H(c.fillalpha,c.alpha,100),p=this.fillAlpha=M(a.fillalpha,a.alpha,h),m=this.fillColor=M(a.fillcolor,a.color,c.color),s=this.fillPattern=M(a.fillpattern&&a.fillpattern.toLowerCase&&a.fillpattern.toLowerCase(),
c.fillpattern&&c.fillpattern.toLowerCase&&c.fillpattern.toLowerCase()),z=this.bordered=H(a.showborder,ma.borderedShapeTypes[this.type],!!J(a.bordercolor)),v=this.borderColor=M(a.bordercolor,c.bordercolor,m),h=this.borderAlpha=H(a.borderalpha,a.alpha,c.borderalpha,h),D=this.dashed=!!H(a.dashed,0),G=H(a.borderthickness,a.thickness,2)*g;this.link=M(a.link,c.link);this.shadow="1"==M(a.showshadow,c.showshadow);void 0===m&&(m=ma.borderedShapeTypes[this.type]&&"none"||"#ff0000",void 0===v&&(v="#ff0000"));
z&&G?(d.stroke=q(v,h),d["stroke-linecap"]="round",d["stroke-width"]=G,D&&(d["stroke-dasharray"]=[H(a.dashlen,5)*g,H(a.dashgap,3)*g])):d.stroke="none";this.fillOptions={gradientUnits:"objectBoundingBox",color:m,alpha:p,ratio:M(a.fillratio,c.fillratio),angle:360-H(a.fillangle,0),radialGradient:"radial"===s};this.link&&(e.cursor="pointer",e._cursor="hand");d.visibility=H(a.visible,1)?"":"hidden";this.useTracker=b.useTracker;this.toolText=w(M(a.tooltext,c.tooltext));if(this.useTracker||this.link||this.toolText)n(this.attrsTracker,
{stroke:l,fill:l}),this.link&&(this.attrsTracker.ishot=+new Date);this.raiseOwnEvents=b.raiseOwnEvents},draw:function(){var a=this.getRenderer(),b=this.type,d=this.attrs,e=this.style,g=a&&a.paper,h=ma.types[b]&&ma.types[b].call&&ma.types[b].call(this,a),l=ma.imageShapeTypes[h],p=ma.textShapeTypes[h],m=l||p||ma.trackerShapeTypes[h],q=this.link||this.toolText,n=this.wrapper,b=this.tracker,s=a&&a.layers.tracker||this.group.wrapper,z=!1,v=b||n,w=ma.eventNames,D=ma.ownEvents,H,G;if(a){if(h){if(n)if(n.elemType!==
h){if(this.ownEventsAttached){for(G in D)v["un"+G].apply(n,D[G]);this.ownEventsAttached=!1}n=n.remove()}else if(this.hasEvents)for(H in w)(G=this[H])&&G.eventAttached&&(K(v.node,w[H],G),G.eventAttached=!1);l||(d.fill=Ba(this.fillOptions));n?n.attr(d).css(e):(this.args.push(this.group.wrapper),n=this.wrapper=g[h].apply(g,this.args).attr(d).css(e),n.elemType=h,n.data("annotation",this),z=!0,this.args.pop());!this.shadow||this.shadowAdded||l||p?n.shadow(this.shadowAdded=!1):n.shadow(this.shadowAdded=
!0,N(this.borderAlpha,this.fillOptions.alpha)/100);q?this.useTracker&&(b||(this.args.push(s),b=this.tracker=m?g.rect(0,0,0,0,0,s):g[h].apply(g,this.args),this.args.pop()),b.attr(d).attr(this.attrsTracker)):b&&(b=b.remove());v=b||n;if(this.raiseOwnEvents&&!this.ownEventsAttached){for(G in D)v[G].apply(n,D[G]);this.ownEventsAttached=!0}this.link&&v.click(a.linkClickFN,this);this.toolText&&(v.tooltip(this.toolText||""),this.group.wrapper.trackTooltip(!0));if(this.hasEvents)for(H in w)(G=this[H])&&!G.eventAttached&&
(c(v.node,w[H],G,this),G.eventAttached=!0);l||(b&&m&&(a=n.getBBox(),b.attr({x:a.x,y:a.y,width:a.width,height:a.height})),z&&this.onload&&this.onload(d))}return this}},destroy:function(){var a=this.wrapper,b=this.tracker,c=b||a,d=ma.eventNames,e=ma.ownEvents,g,h;if(a){if(this.ownEventsAttached){for(h in e)c["un"+h].apply(a,e[h]);this.ownEventsAttached=!1}if(this.hasEvents)for(g in d)(h=this[g])&&h.eventAttached&&(K(c.node,d[g],h),h.eventAttached=!1);b&&(this.tracker=b.remove());this.wrapper=a.remove()}this._idstore[this._id]===
this&&delete this._idstore[this._id]},getRenderer:function(){return this.group&&this.group.getRenderer()||null}});d.extend(ma,{imageShapeTypes:{image:!0},angularShapeTypes:{circle:!0,arc:!0},textShapeTypes:{text:!0},trackerShapeTypes:{image:!0,text:!0},borderedShapeTypes:{path:!0,line:!0},eventNames:{onmouseover:b?"touchstart":"mouseover",onmouseout:"mouseout",onmousemove:b?"touchmove":"mousemove",onclick:"click"},ownEvents:{click:[function(a){ea("annotationClick",this,a)}],hover:[function(a){ea("annotationRollOver",
this,a)},function(a){ea("annotationRollOut",this,a)}]},textAlignOptions:{left:"start",right:"end",center:"middle"},textVerticalAlignOptions:{top:"bottom",middle:"middle",bottom:"top"},textRotationOptions:{0:"0",1:"270",right:"90",cw:"90",left:"270",ccw:"270"},types:{rectangle:function(){var a=this.args,b=this.attrs,c=this.getAbsoluteBounds(),d=.5*c.width;c.r>d&&(c.r=d);a[0]=b.x=c.x;a[1]=b.y=c.y;a[2]=b.width=c.width;a[3]=b.height=c.height;a[4]=b.r=c.r;return"rect"},line:function(){var b=this.attrs,
c=this.bounds;this.args[0]=b.path=["M",c.x1,c.y1,"L",c.x2,c.y2];1===b["stroke-width"]&&(b["shape-rendering"]="crisp");b["stroke-width"]<a&&(this.attrsTracker["stroke-width"]=a);this.bordered&&this.dashed&&(this.attrsTracker["stroke-dasharray"]="solid");return"path"},path:function(){var a=this.attrs,b=this.bounds;this.args[0]=a.path=this.options.path;a.transform=["T",b.x1,b.y1,"S",b.xs,b.ys,b.x1,b.y1];1===a["stroke-width"]&&(a["shape-rendering"]="crisp");return"path"},polygon:function(){var a=this.args,
b=this.attrs,c=this.options,d=this.bounds,e=this.group,g=e.snaps;a[0]=ga(c.sides,1,5,g,e.isBelow).value;a[1]=d.x1;a[2]=d.y1;a[3]=d.r;a[4]=ga(c.startangle,1,0,g,e.isBelow).value;a[5]=0;b.polypath=a.slice(0);return"polypath"},circle:function(a){var b=this.args,c=this.attrs,d=this.options,l=this.bounds,p=a.chartWidth,m=a.chartHeight,q=this.group.scaleValueComplement,n=this.group.snaps,s=l.angles,v=this.group;a=l.r;M(d.radius)||(l.r=p<m?p*l.xs:m*l.ys,l.r=a=.3*l.r);d=ga(d.yradius,q,a,n,v.isBelow).value;
this.fillPattern||(this.fillOptions.radialGradient=!0,this.fillPattern="radial");"radial"===this.fillPattern&&(this.fillOptions.cx=this.fillOptions.cy=.5);p=s.angle%360;if(!p&&a===d)return b[0]=c.cx=l.x1,b[1]=c.cy=l.y1,b[2]=c.r=l.r,"circle";p||(s.start-=.001);m=s.start*h;p=s.end*h;s=s.angle*h;q=l.x1;n=l.y1;l=q+g(m)*a;m=n+z(m)*d;q+=g(p)*a;p=n+z(p)*d;b[0]=c.path=["M",l,m,"A",a,d,0,0,s>=e?0:1,q,p,"Z"];return"path"},arc:function(a){var b=this.options,c=this.args,d=this.attrs,e=this.bounds,g=a.chartWidth;
a=a.chartHeight;var l=this.group,p=l.scaleValue,m=e.angles;M(b.radius)||(e.r=g<a?g*e.xs:a*e.ys,e.r*=.3);e.innerR=ga(b.innerradius,p,.8*e.r,this.group.snaps,l.isBelow).value;e.innerR>e.r&&(e.innerR+=e.r,e.r=e.innerR-e.r,e.innerR-=e.r);this.fillPattern||(this.fillOptions.radialGradient=!0,this.fillPattern="radial");"radial"===this.fillPattern&&(this.fillOptions.cx=this.fillOptions.cy=.5);c[0]=e.x1;c[1]=e.y1;c[2]=e.r;c[3]=e.innerR;c[4]=m.start*h;c[5]=m.end*h;d.ringpath=c.slice(0);return"ringpath"},text:function(a){var b=
this.args,c=this.style,d=this.attrs,e=this.group,g=this.bounds,h=this.options,l=this.getAbsoluteBounds(),p=M(h.align,e.options.textalign,"center").toLowerCase(),m=M(h.valign,e.options.textvalign,"middle").toLowerCase(),q=w(M(h.text,h.label)),z=a.logic.smartLabel,v=H(h.wrap,e.options.wraptext,1),D,G,K=M(h.rotatetext,e.options.rotatetext,"0").toLowerCase(),K=ma.textRotationOptions[K],J="0"!==K?"y":"x",N=a.options.orphanStyles;a=n({},N.defaultStyle.style||{});N=e.id&&N[e.id.toLowerCase()]||ba;a=n(a,
N.style);var N=parseFloat(a.fontSize),P=M(h.font,e.options.font,a.fontFamily),e=H(h.fontsize,e.options.fontsize,N)*e.scaleText;v&&(D=H(h.wrapwidth,this.hasDimensionX?l.width/g.xs:void 0),G=H(h.wrapheight,this.hasDimensionY?l.height/g.ys:void 0),D&&(D*=g.xs),G&&(G*=g.ys));c.fontFamily=P;c.fontWeight=H(h.bold,h.isbold,0)?"bold":"normal";H(h.italic,h.isitalic,0)&&(c.fontStyle="italic");h.bgcolor&&(!d["text-bound"]&&(d["text-bound"]=[]),d["text-bound"][0]=s(h.bgcolor));h.bordercolor&&(!d["text-bound"]&&
(d["text-bound"]=[]),d["text-bound"][1]=s(h.bordercolor),d["text-bound"][2]=H(h.borderthickness,1),d["text-bound"][3]=H(h.padding,1));h.fontcolor&&(d.fill=s(h.fontcolor),this.fillOptions&&(this.fillOptions.color=d.fill));c.fontSize=e+"px";e===N?c.lineHeight=a.lineHeight:$(c);d["text-anchor"]=ma.textAlignOptions[p]||ma.textAlignOptions.center;z.setStyle(c);c=z.getSmartText(q,D,G,!1);d["vertical-align"]=ma.textVerticalAlignOptions[m]||ma.textVerticalAlignOptions.middle;d["text-anchor"]===ma.textAlignOptions.left?
l[J]+=H(h.leftmargin,0):d["text-anchor"]===ma.textAlignOptions.center&&(l[J]+=.5*H(h.leftmargin,0));"0"!==K&&(d.rotation=[parseFloat(K),l.x,l.y]);b[0]=d.x=l.x;b[1]=d.y=l.y;b[2]=d.text=c.text;c.tooltext&&(d.title=c.tooltext);delete d.stroke;delete d["stroke-weight"];return"text"},image:function(a){var b=this,c=b.style,d=a.chartWidth,e=a.chartHeight;a=b.options;var g=b.attrs,h=b.args,l=J(a.url),p=b.group.scaleImageX*M(Number(a.xscale),100)/100,m=b.group.scaleImageY*M(Number(a.yscale),100)/100,q=b.getAbsoluteBounds(),
s={width:1,height:1},z;if(!l)return h[0]=g.x=q.x,h[1]=g.y=q.y,h[2]=g.width=q.width,h[3]=g.height=q.height,h[4]=g.r=q.r,"rect";z=new v.Image;z.onload=function(){s=ja("none","top","left",100,0,d,e,z);delete s.x;delete s.y;s=n(s,{width:(b.hasDimensionX?q.unscaled.width:s.width)*p,height:(b.hasDimensionY?q.unscaled.height:s.height)*m});setTimeout(function(){var a,d,e;if(a=b.wrapper){a.attr(s);if(d=b.tracker)e=a.getBBox(),d.attr({x:e.x,y:e.y,width:e.width,height:e.height});a.css({opacity:c.opacity=N(H(b.fillAlpha,
b.borderAlpha),b.borderAlpha)/100})}b.onload&&b.onload(s)},0)};z.src=l;h[0]=g.src=l;h[1]=g.x=q.x;h[2]=g.y=q.y;h[3]=g.width=(b.hasDimensionX?q.unscaled.width:s.width)*p;h[4]=g.height=(b.hasDimensionY?q.unscaled.height:s.height)*m;c.opacity=N(H(b.fillAlpha,b.borderAlpha),b.borderAlpha)/100;delete g.stroke;delete g.fill;delete g["stroke-linecap"];return"image"}}});pa=function(){this.groups=[];this._idstore={};this._options={}};D.Annotations=pa;d.extend(pa.prototype,{reset:function(a,b,c){var d=this.groups,
e;this.clear();if(c){e={};for(var g in c)switch(typeof c[g]){case "object":case "function":e["-$"+g]=e["$"+g]=e["+$"+g]=c[g];break;default:e["$"+g]=e["+$"+g]=c[g],e["-$"+g]=-1*c[g]}e=this._literals=e}b&&(this._options=b);if(a&&a.groups&&d)for(c=0;c<a.groups.length;c+=1)d.push(new Z(a.groups[c],b,e,this._idstore,this))},getRenderer:function(){return this._renderer},addGroup:function(a){var b=this.getRenderer();this.groups.push(a=new Z(a,this._options,this._literals,this._idstore,this));b&&(a.setup(),
a.scale(),a.draw());return a},addItem:function(a,b,c){var e,g=this.getRenderer();"string"===typeof a?e=this._idstore[a]:(c=b,b=a);if(e&&e.addItem){if(!g&&c){d.raiseWarning(this,"04031411430","run","Annotations~addItem()","Cannot draw the shapeif the group has not been drawn. Use Annotations~draw() to draw the group and pass the renderer to it.");return}a=e.addItem(b,c)}else a=this.addGroup({}).addItem(b,c);return a},draw:function(a){var b=this.groups,c,d;if(b&&(this._renderer=a||this._renderer))for(c=
0,d=b.length;c<d;c++)a=b[c],a.setup(),a.scale(),a.draw()},clear:function(){var a=this.groups,b;if(a){for(;b=a.shift();)b.destroy();this.shapesToDraw=[]}},dispose:function(){var a;this.disposing=!0;this.clear();for(a in this)delete this[a];this.disposed=!0},hide:function(a){if(a=this._idstore[a])return a.attrs.visibility="hidden",a.wrapper&&a.wrapper.hide(),a},show:function(a){if(a=this._idstore[a])return a.attrs.visibility="",a.wrapper&&a.wrapper.show(),a},update:function(a,b,c){a=this._idstore[a];
var d;if(a&&b){if("object"===typeof b)for(d in b.id&&delete b.id,b.type&&delete b.type,b)a.options[(d+"").toLowerCase()]=b[d]+"";else a.options[(b+"").toLowerCase()]=c+"";a.wrapper&&(a.scale(),a.setup(),a.draw());return a}},destroy:function(a){var b=this._idstore[a],c=b.group;b&&"function"===typeof b.destroy&&(c&&c.removeItem(a),b.destroy())},shapesToDraw:[]});d.core.addEventListener("beforeinitialize",function(a){"javascript"===a.sender.options.renderer&&(a.sender.annotations=new pa)});d.core.addEventListener("disposed",
function(a){a.sender.annotations&&a.sender.annotations.dispose()});d.addEventListener("internal.animationComplete",function(a){var b=(a=a.sender.annotations)&&a.shapesToDraw,c=b&&b.length,d,e;if(c){for(e=0;e<c;e++)d=b[e],d.queueDraw=!1,d.scale(),d.setup(),d.draw();a.shapesToDraw=[]}});m.addEventListener("rendered",function(a,b){if("javascript"===b.renderer){var c=a.sender,d=c.jsVars||{},e=d.instanceAPI;d.hcObj&&e&&e.drawAnnotations?(c.showAnnotation||(c.showAnnotation=function(){c.annotations.show.apply(c.annotations,
arguments)}),c.hideAnnotation||(c.hideAnnotation=function(){c.annotations.hide.apply(c.annotations,arguments)})):(delete c.showAnnotation,delete c.hideAnnotation)}})}]);
FusionCharts.register("module",["private","modules.renderer.js-base",function(){var d=this,m=d.hcLib,D=d.window,v=D.document,p=m.BLANKSTRING,c=m.createTrendLine,K="https:"===D.location.protocol?"https://export.api3.fusioncharts.com/":"http://export.api3.fusioncharts.com/",b=m.pluck,G=m.getValidValue,a=m.pluckNumber,l=m.getFirstValue,P=m.getDefinedColor,N=m.parseUnsafeString,z=m.FC_CONFIG_STRING,g=m.extend2,e=m.getDashStyle,h=m.parseTooltext,n=m.toPrecision,M=m.regex.dropHash,H=m.HASHSTRING,q=m.getSentenceCase,
J=m.addEvent,w=D.Math,ja=m.TOUCH_THRESHOLD_PIXELS,s=m.CLICK_THRESHOLD_PIXELS,$=w.min,U=w.max,ba=w.abs,Ba=w.ceil,la=w.floor,ga=w.log,ea=w.pow,pa=w.sqrt,Z=w.round,ma=m.graphics.getColumnColor,L=m.getFirstColor,I=m.setLineHeight,fa=m.pluckFontSize,t=m.getFirstAlpha,R=m.graphics.getDarkColor,Y=m.graphics.getLightColor,C=m.graphics.convertColor,xa=m.COLOR_TRANSPARENT,Pa=m.POSITION_CENTER,Ga=m.POSITION_TOP,qa=m.POSITION_BOTTOM,za=m.POSITION_RIGHT,ya=m.POSITION_LEFT,ta=m.parsexAxisStyles,V=m.chartAPI,oa=
m.graphics.mapSymbolName,Ra=V.singleseries,ib=V.multiseries,Da=m.COMMASTRING,Za=m.STRINGUNDEFINED,Ea=m.ZEROSTRING,Ka=m.ONESTRING,Xa=m.HUNDREDSTRING,Ca=m.PXSTRING,yb=m.COMMASPACE,Fb=D.navigator.userAgent.match(/(iPad|iPhone|iPod)/g),vb=!/fusioncharts\.com$/i.test(D.location.hostname),$a={left:"start",right:"end",center:"middle"},sb=m.BLANKSTRINGPLACEHOLDER,db=m.BGRATIOSTRING,nb=m.COLOR_WHITE,k=m.TESTSTR,E=m.graphics.getAngle,A=m.axisLabelAdder,T=m.falseFN,S=m.NumberFormatter,W=m.getLinkAction,da=m.getAxisLimits,
ia=m.createDialog,ha=function(a,b){return 0<a?ga(a)/ga(b||10):null},Na=m.hasTouch=void 0!==v.documentElement.ontouchstart,sa=m.fireEvent=function(a,b,c,d){m.dem.fire(a,b,c,d)},na={1:"bold",0:"normal"},ra={1:"italic",0:"normal"},Q={1:"underline",0:"none"},Ra={font:function(a,b){b.style.fontFamily=a},size:function(a,b){a&&(b.style.fontSize=fa(a)+Ca)},color:function(a,b,c){b.style.color=a&&a.replace&&a.replace(M,H)||p;c&&(b.color=b.style.color)},bgcolor:function(a,b){b.style.backgroundColor=a&&a.replace&&
a.replace(M,H)||p},bordercolor:function(a,b){b.style.border="1px solid";b.style.borderColor=a&&a.replace&&a.replace(M,H)||p},ishtml:p,leftmargin:function(b,c){c.style.marginLeft=a(b,0)+Ca},letterspacing:function(b,c){c.style.letterSpacing=a(b,0)+Ca},bold:function(a,b){b.style.fontWeight=na[a]||""},italic:function(a,b){b.style.fontStyle=ra[a]||""},underline:function(a,b){b.style.textDecoration=Q[a]||""}},wb=m.chartPaletteStr={chart2D:{bgColor:"bgColor",bgAlpha:"bgAlpha",bgAngle:"bgAngle",bgRatio:"bgRatio",
canvasBgColor:"canvasBgColor",canvasBaseColor:"canvasBaseColor",divLineColor:"divLineColor",legendBgColor:"legendBgColor",legendBorderColor:"legendBorderColor",toolTipbgColor:"toolTipbgColor",toolTipBorderColor:"toolTipBorderColor",baseFontColor:"baseFontColor",anchorBgColor:"anchorBgColor"},chart3D:{bgColor:"bgColor3D",bgAlpha:"bgAlpha3D",bgAngle:"bgAngle3D",bgRatio:"bgRatio3D",canvasBgColor:"canvasBgColor3D",canvasBaseColor:"canvasBaseColor3D",divLineColor:"divLineColor3D",divLineAlpha:"divLineAlpha3D",
legendBgColor:"legendBgColor3D",legendBorderColor:"legendBorderColor3D",toolTipbgColor:"toolTipbgColor3D",toolTipBorderColor:"toolTipBorderColor3D",baseFontColor:"baseFontColor3D",anchorBgColor:"anchorBgColor3D"}},Wa=function(){var a={},b,c=function(){var k,f,e,g,h=0,l,p,A=parseInt(d.core.options.resizeTrackingInterval,10)||300,m;for(k in a)h+=1,f=a[k],e=f.jsVars,l=f.ref,!f.disposed&&(g=l&&l.parentNode)&&(p=l.style)&&(/\%/g.test(p.width)||/\%/g.test(p.height))?(l=g.offsetWidth,m=g.offsetHeight,!e.resizeLocked&&
(l&&e._containerOffsetW!==l||m&&e._containerOffsetH!==m)&&(f.resizeTo&&f.resizeTo(),e._containerOffsetW=l,e._containerOffsetH=m)):(delete a[k],h-=1);b=h?setTimeout(c,A):clearTimeout(b)};return function(k,f){var e=k.jsVars,g=f||k.ref&&k.ref.parentNode||{};e._containerOffsetW=g.parentNode.offsetWidth;e._containerOffsetH=g.parentNode.offsetHeight;a[k.id]=k;b||(b=setTimeout(c,parseInt(d.core.options.resizeTrackingInterval,10)||300))}}(),Fa={getExternalInterfaceMethods:function(){var a=V[this.jsVars.type],
a=a&&a.eiMethods,b="saveAsImage,print,exportChart,getXML,hasRendered,signature,cancelExport,getSVGString,lockResize,showChartMessage,",c;if("string"===typeof a)b+=a+Da;else if(void 0!==a||null!==a)for(c in a)b+=c+Da;return b.substr(0,b.length-1)},drawOverlayButton:function(a){var b=this.jsVars,c=b.overlayButton,k,f;if(a&&a.show){c||(c=b.overlayButton=v.createElement("span"),m.dem.listen(c,"click",function(){d.raiseEvent("OverlayButtonClick",a,b.fcObj)}));for(k=a.message?a.message:"Back";c.firstChild;)c.removeChild(c.firstChild);
c.appendChild(v.createTextNode(k));b.overlayButtonMessage=k;k={border:"1px solid "+(a.borderColor?a.borderColor.replace(M,H):"#7f8975"),backgroundColor:a.bgColor?a.bgColor.replace(M,H):"#edefec",fontFamily:a.font?a.font:"Verdana,sans",color:"#"+a.fontColor?a.fontColor:"49563a",fontSize:(a.fontSize?a.fontSize:"10")+Ca,padding:(a.padding?a.padding:"3")+Ca,fontWeight:0===parseInt(a.bold,10)?"normal":"bold",position:"absolute",top:"0",right:"0",_cursor:"hand",cursor:"pointer"};for(f in k)c.style[f]=k[f];
b.hcObj.container.appendChild(c);b.overlayButtonActive=!0}else c&&(b.overlayButton=c.parentNode.removeChild(c),b.overlayButtonActive=!1,delete b.overlayButtonMessage)},print:function(a){return this.jsVars.hcObj&&this.jsVars.hcObj.hasRendered&&this.jsVars.hcObj.print(a)},exportChart:function(a){var b=this.jsVars.hcObj;return b&&b.options&&b.options.exporting&&b.options.exporting.enabled?b.exportChart(a):!1},getSVGString:function(){return this.jsVars&&this.jsVars.hcObj&&this.jsVars.hcObj.paper&&this.jsVars.hcObj.paper.toSVG()},
resize:function(){var a=this.jsVars,b=a.container,c=a.hcObj;c&&(c&&c.destroy&&c.destroy(),m.createChart(a.fcObj,b,a.type,void 0,void 0,!1,!0),delete a.isResizing)},lockResize:function(a){return"boolean"!==typeof a?!!this.jsVars.resizeLocked:this.jsVars.resizeLocked=a},showChartMessage:function(a,b,c){var d=this.jsVars,f=d.hcObj,k=d.fcObj,e=k.options;d.msgStore[a]&&(a=d.msgStore[a]);b&&f&&f.hasRendered?a?f.showMessage(a,c):f.hideLoading():(f&&f.destroy&&f.destroy(),k._chartMessageStyle={color:e.baseChartMessageColor,
fontFamily:e.baseChartMessageFont,fontSize:e.baseChartMessageFontSize},m.createChart(d.fcObj,d.container,d.type,void 0,a));return a},signature:function(){return"FusionCharts/3.4.0 (XT)"}},gc=m.HCstub=function(b,c,d,k){b=b.chart;var f=a(b.showborder,1)?a(b.borderthickness,1):0,e=a(b.charttopmargin,k.charttopmargin,15)+f,g=a(b.chartrightmargin,k.chartrightmargin,15)+f,h=a(b.chartbottommargin,k.chartbottommargin,15)+f,f=a(b.chartleftmargin,k.chartleftmargin,15)+f,l=e+h,A=f+g;d*=.7;c*=.7;l>d&&(e-=(l-
d)*e/l,h-=(l-d)*h/l);A>c&&(f-=(A-c)*f/A,g-=(A-c)*g/A);c={_FCconf:{0:{stack:{}},1:{stack:{}},x:{stack:{}},oriCatTmp:[],noWrap:!1,marginLeftExtraSpace:0,marginRightExtraSpace:0,marginBottomExtraSpace:0,marginTopExtraSpace:0,marimekkoTotal:0},chart:{alignTicks:!1,ignoreHiddenSeries:!1,events:{},reflow:!1,spacingTop:e,spacingRight:g,spacingBottom:h,spacingLeft:f,marginTop:e,marginRight:g,marginBottom:h,marginLeft:f,borderRadius:0,plotBackgroundColor:"#FFFFFF",style:{},animation:a(b.defaultanimation,b.animation,
1)?{duration:500*a(b.animationduration,1)}:!1},colors:"AFD8F8 F6BD0F 8BBA00 FF8E46 008E8E D64646 8E468E 588526 B3AA00 008ED6 9D080D A186BE CC6600 FDC689 ABA000 F26D7D FFF200 0054A6 F7941C CC3300 006600 663300 6DCFF6".split(" "),credits:{href:m.CREDIT_HREF,text:m.CREDIT_STRING,enabled:vb},global:{},labels:{items:[]},lang:{},legend:{enabled:!0,symbolWidth:12,borderRadius:1,backgroundColor:"#FFFFFF",initialItemX:0,title:{text:p,x:0,y:0,padding:2},scroll:{},itemStyle:{}},loading:{},plotOptions:{series:{pointPadding:0,
borderColor:"#333333",events:{},animation:a(b.animation,b.defaultanimation,1)?{duration:1E3*a(b.animationduration,1)}:!1,states:{hover:{enabled:!1},select:{enabled:!1}},dataLabels:{enabled:!0,color:"#555555",style:{},formatter:function(){return this.point.showPercentValues?k.numberFormatter.percentValue(this.percentage):this.point.displayValue}},point:{events:{}}},area:{states:{hover:{enabled:!1}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:!1},select:{enabled:!1}}}},radar:{states:{hover:{enabled:!1}},
marker:{lineWidth:1,radius:3,states:{hover:{enabled:!1},select:{enabled:!1}}}},areaspline:{states:{hover:{enabled:!1}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:!1},select:{enabled:!1}}}},line:{shadow:!0,states:{hover:{enabled:!1}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:!1},select:{enabled:!1}}}},scatter:{states:{hover:{enabled:!1}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:!1},select:{enabled:!1}}}},bubble:{states:{hover:{enabled:!1}},marker:{lineWidth:1,radius:3,
states:{hover:{enabled:!1},select:{enabled:!1}}}},spline:{states:{hover:{enabled:!1}},marker:{lineWidth:1,radius:3,states:{hover:{enabled:!1},select:{enabled:!1}}}},pie:{size:"80%",allowPointSelect:!0,cursor:"pointer",point:{events:{legendItemClick:b.interactivelegend===Ea?T:function(){this.slice()}}}},pie3d:{size:"80%",allowPointSelect:!0,cursor:"pointer",point:{events:{legendItemClick:b.interactivelegend===Ea?T:function(){this.slice()}}}},column:{},floatedcolumn:{},column3d:{},bar:{},bar3d:{}},
point:{},series:[],subtitle:{text:p,style:{}},symbols:[],title:{text:p,style:{}},toolbar:{},tooltip:{style:{}},xAxis:{steppedLabels:{style:{}},labels:{x:0,style:{},enabled:!1},lineWidth:0,plotLines:[],plotBands:[],title:{style:{},text:p},tickWidth:0,scroll:{enabled:!1}},yAxis:[{startOnTick:!1,endOnTick:!1,title:{style:{},text:p},tickLength:0,labels:{x:0,style:{}},plotBands:[],plotLines:[]},{tickLength:0,gridLineWidth:0,startOnTick:!1,endOnTick:!1,title:{style:{},text:p},labels:{x:0,style:{},enabled:!1,
formatter:function(){return this.value!==sb?this.value:p}},opposite:!0,plotBands:[],plotLines:[]}],exporting:{buttons:{exportButton:{},printButton:{enabled:!1}}}};b.palettecolors&&"string"===typeof b.palettecolors&&(c.colors=b.palettecolors.split(/\s*\,\s*/));return k.hcJSON=c},hb=m.placeVerticalAxis=function(b,c,d,e,f,g,h,l,A,m){var E=d[z],q=E.smartLabel,n,s,t,T,S=0,v=E.marginRightExtraSpace,w=E.marginLeftExtraSpace,W={},C={},da={},ha=b.plotLines,D=b.plotBands,E=c.verticalAxisValuesPadding,H=isNaN(c.fixedValuesPadding)?
0:c.fixedValuesPadding,ia=E-H,na=c.verticalAxisValuesPadding,sa=c.verticalAxisNamePadding,Na=c.verticalAxisNameWidth,K=c.rotateVerticalAxisName&&String(c.rotateVerticalAxisName).toLowerCase(),M="none"!==K,Fa=b.offset?b.offset:0,J=0,Wa=0,N=0,I=0,ra=0,Ja=0,R=0,wb,Q,P,L,E=2,R=h?v+5:w+4,$=U(a(d.chart.plotBorderWidth,1),0),ca=b.showLine?b.lineThickness:$,hb=function(a,b){var f,d;a&&a.label&&void 0!==G(a.label.text)&&(P=a.label,P.style&&P.style!==Q&&(Q=P.style,q.setStyle(Q)),n=q.getOriSize(a.label.text),
d=(f=n.width)?f+2:0,a.isGrid?(W[b]={width:f,height:n.height,label:P},I<=d&&(I=d,c.lYLblIdx=b)):a.isTrend&&(h&&P.textAlign===ya||P.textAlign===za?(C[b]={width:f,height:n.height,label:P},ra=U(ra,d)):(da[b]={width:f,height:n.height,label:P},Ja=U(Ja,d))))},aa=function(a,c){var d,k=c?S:S+a;d=b.title.style;s=s||{};if(0<k)return M?(k<s.height&&(q.setStyle(d),s=q.getSmartText(b.title.text,f,k)),d=s.height):(k<s.width&&(q.setStyle(d),s=q.getSmartText(b.title.text,k,f)),d=s.width),b.title._actualWidth=d,b.title.text=
s.text,s.tooltext&&(b.title.originalText=s.tooltext),c?k-d+a:k-d;b.title.text=p;return 0},Oa=function(a,b,c){for(var f in a)a[f].label.x=b,a[f].label.y=c},N=0;for(wb=D.length;N<wb;N+=1)hb(D[N],N);N=0;for(wb=ha.length;N<wb;N+=1)hb(ha[N],N);b.title&&b.title.text!=p&&(Q=b.title.style,q.setStyle(Q),t=q.getOriSize(k).height,b.title._originalText=b.title.text,M?(b.title.rotation="cw"===K?90:270,s=q.getSmartText(b.title.text,f,g),S=s.height,T=t):(b.title.rotation=0,s=q.getSmartText(b.title.text,void 0!==
Na?Na:g,f),S=s.width,T=20));0<Ja&&(Wa=Ja+na);A&&(e=a(e.chart.maxlabelwidthpercent,0),1<=e&&100>=e&&(A=e*A/100,I>A&&(I=A)));J=U(ra,I);J+=J?ia+H:0;0<S&&(J+=S+sa+R);(function(){if(Wa+J>g){L=Wa+J-g;if(Wa){if(na>=L){na-=L;return}L-=na;na=0}if(ia+sa>=L)sa>=L?sa-=L:(ia-=L-sa,sa=0);else{L-=ia+sa;sa=ia=0;if(20<Ja)if(ra>I){if(Ja-ra>=L){Ja-=L;return}if(ra-Ja>=L){ra-=L;return}ra>Ja?(L-=ra-Ja,ra=Ja):(L-=Ja-ra,Ja=ra);if(2*(ra-I)>=L){Ja-=L/2;ra-=L/2;return}L-=2*(ra-I);Ja=ra=I}else{if(Ja-20>=L){Ja-=L;return}L-=Ja-
20;Ja=20}if(ra>I){if(ra-I>=L){ra-=L;return}L-=ra-I;ra=I}S-T>=L?S-=L:(L-=S-T,S=T,Ja>=L?Ja=0:(L-=Ja,Ja=0,S>=L?S=0:(L-=S,S=0,I>=L&&(ra=I-=L))))}}})();N=function(a,b){var c,d=0,r=b?Ja-2:Ja+a-2,k;if(0<Ja){for(k in da)P=da[k].label,da[k].width>r?(P.style&&P.style!==Q&&(Q=P.style,q.setStyle(Q)),c=q.getSmartText(P.text,r,f,!0),P.text=c.text,c.tooltext&&(P.originalText=c.tooltext),da[k].height=c.height,d=U(d,c.width)):d=U(d,da[k].width);return b?r-d+a:r-d}for(k in da)da[k].label.text=p;return 0}(0,!0);N=aa(N,
!0);N=function(a){var b=0,c=U(I,ra)+a-2,d;if(0<c){for(d in W)P=W[d].label,W[d].width>c?(P.style&&P.style!==Q&&(Q=P.style,q.setStyle(Q)),a=q.getSmartText(P.text,c,f,!0),P.text=a.text,a.tooltext&&(P.originalText=a.tooltext),W[d].height=a.height,b=U(b,a.width)):b=U(b,W[d].width);for(d in C)P=C[d].label,C[d].width>c?(P.style&&P.style!==Q&&(Q=P.style,q.setStyle(Q)),a=q.getSmartText(P.text,c,f,!0),P.text=a.text,a.tooltext&&(P.originalText=a.tooltext),C[d].height=a.height,b=U(b,a.width)):b=U(b,C[d].width);
return c-b}for(d in W)W[d].label.text=p;for(d in C)C[d].label.text=p;return 0}(N);N=aa(N);A=c.verticalAxisNamePadding-sa;N&&A&&(N>A?(sa+=A,N-=A):(sa+=N,N=0));A=c.verticalAxisValuesPadding-(ia+H);N&&A&&(N>A?(ia+=A,N-=A):(ia+=N,N=0));A=c.verticalAxisValuesPadding-na;N&&A&&(N>A?(na+=A,N-=A):(na+=N,N=0));0<Ja&&(Wa=Ja+na);J=U(ra,I);J+=J?ia+H:0;0<S&&(J+=S+sa+R);A=U(ra,I);A+=0<A?ia+H:0;0<S?(M?S<s.height&&(s=q.getSmartText(b.title.text,f,S)):(S<s.width&&(s=q.getSmartText(b.title.text,S,f)),b.title.y=-((s.height-
t)/2)),b.title.text=s.text,s.tooltext&&(b.title.originalText=s.tooltext),b.title.margin=A+sa+R+(M?S-t:S/2)):b.title.text=p;t=-(ia+H+Fa+w+2);v=v+na+Fa+2;R=U(ra,I);b.labels.style&&(E=.35*parseInt(b.labels.style.fontSize,10));h?(0<Ja&&Oa(da,t,E),0<R&&(Oa(W,v,E),Oa(C,v,E))):(0<Ja&&Oa(da,v,E),0<R&&(Oa(W,t,E),Oa(C,t,E)));b.labels._textY=E;b.labels._righttX=v;b.labels._leftX=t;J=J||ca;Wa=Wa||(l?0:$);m?(d.chart.marginLeft+=h?Wa:J-m,d.chart.marginRight+=h?J-m:Wa):(d.chart.marginLeft+=h?Wa:J,d.chart.marginRight+=
h?J:Wa);return Wa+J},ib=m.titleSpaceManager=function(b,c,d,k){var f=this.snapLiterals||(this.snapLiterals={}),e=c.chart,g=N(e.caption);c=N(e.subcaption);var h=e=a(e.captionpadding,10),l=b[z],A=this.smartLabel||l.smartLabel,m=!1,E=0,q,n,s=0,t=0,T=0,S=0,v=b.title,w=b.subtitle,W=U(a(b.chart.plotBorderWidth,1),0),C=0,da=0;if(3<k){e<W&&(e=W+2);g!==p&&(q=v.style,T=Ba(a(parseFloat(q.fontHeight,10),parseFloat(q.lineHeight,10),12)));c!==p&&(n=w.style,S=a(parseInt(n.fontHeight,10),parseInt(n.lineHeight,10),
12));if(0<T||0<S)k=U(k,0),E=T+S+e,E>k?(s=k-E,m=!0,s<e?e=U(s,5):(s-=e,e=0,S>s?(t=S-s+10,S=0,w._originalText=w.text,w.text=""):(s-=S,S=0,T>s&&(t=T-s)))):t=k-E,0<T&&(A.setStyle(q),T+=t,k=A.getSmartText(g,d,T),t=T-k.height,v.height=T=k.height,v.text=k.text,k.tooltext&&(v.originalText=k.tooltext),C=k.width),0<S&&(A.setStyle(n),S+=t,d=A.getSmartText(c,d,S),t=S-d.height,S=d.height,w.text=d.text,w.height=d.height,d.tooltext&&(w.originalText=d.tooltext),da=d.width),m&&0<t&&(e+=$(h-e,t)),E=T+S+e;E=E||W;v.isOnTop?
(f.captionstarty=b.chart.marginTop,b.chart.marginTop+=E):(b.chart.marginBottom+=E,f.captionstarty=v.y=l.height-b.chart.marginBottom+e,b.chart.marginTop+=5,E+=5);v._captionWidth=C;w._subCaptionWidth=da;v._lineHeight=T;w._lineHeight=S}else w&&(w.text=""),v&&(v.text="");return E},mb=m.stepYAxisNames=function(a,b,c,d,f,k){var e=0,g=d.plotLines,h=[],l,A=d.plotLines.length;b=b[z].smartLabel;for(var m=parseFloat(fa(c.basefontsize,10)),E;e<A;e+=1)c=g[e],c.isGrid&&c.label&&c.label.text&&(h.push(c),0===c.value&&
(l=h.length-1));if(A=h.length)if(d.labels.style?b.setStyle(d.labels.style):h[0].label&&h[0].label.style&&b.setStyle(d.labels.style),e=b.getOriSize("W").height,k||(e+=.4*m),a/=A-1,a<e){k=U(1,Ba(e/a));for(e=a=l;e<A;e+=1)c=h[e],e===f&&((e-a)%k&&E&&(E.label.text=""),a=f),c&&c.label&&((e-a)%k?c.label.text=p:E=c);for(e=a=l;0<=e;e-=1)c=h[e],e===f&&((a-e)%k&&E&&(E.label.text=""),a=f),c&&c.label&&((a-e)%k?c.label.text=p:E=c)}},Ja=m.placeHorizontalAxis=function(b,c,d,k,f,e,g){var h=d[z],l=k&&k.chart||{},A,
m,E,q,n,s,t,T,S,v,w,W,C=0,da=0,ha=10,D=1,ia=0,H=0,na=0,sa=0,J=!1,Na=!1,M=!1,K=a(l.labelstep,0),N=a(l.xaxisminlabelwidth,0),Fa=a(l.maxlabelheight,e),ra=c.labelDisplay,Wa=c.rotateLabels,I=c.horizontalLabelPadding,Ja=h.marginBottomExtraSpace,L=d.chart.marginLeft,P=d.chart.marginRight,Q=h.smartLabel,R=h.plotBorderThickness,wb=c.catCount,hb=c.slantLabels,ca=f/(b.max-b.min),Oa=0,aa=0,gc=0,mb=0,Zb=k&&k.chart||{},Sb=1E3*a(Zb.updateinterval,Zb.refreshinterval),Kb=Zb.datastreamurl,hc=Boolean(this.realtimeEnabled&&
Sb&&void 0!==Kb),V,Nb,Y,ja,Z,jb,ba,fa,ma,Ob,ea,ta,ga,xa,Aa,oa,Ya,Ra,ab,Da,Ca,Ga,Ea,Xa,kb,Ka=null,Jb=null,Ia,Yb,ib,Qb,Rb,dc,rc,nc,Tb,wa,Lb,db,Ha=[],Mb=[],lb,Ab=0,Bb=0,Ub,fc,rb,ec,jc,$a,cb,kc=c.horizontalAxisNamePadding,xb=0,Ua=c.staggerLines,Gb=Oa,sb=!1,nb=!1,vb=0,lc,uc,yb,Fb,md,Rc,nd,Wc,Xc,Cc,Sc,Yc,oc,Kc,Tc,Ec,Zc,Lc,Uc,yc;Lb=b.plotLines;ha=wa=0;for(cb=Lb.length;wa<cb;wa+=1)(m=Lb[wa])&&m.label&&!m.isTrend&&ha<parseInt(m.label.style.lineHeight,10)&&(ha=parseInt(m.label.style.lineHeight,10),s=m.label.style);
if(s||b.labels.style)s=s||b.labels.style,Q.setStyle(s),T=Q.getOriSize("W"),ha=Q.lineHeight,t=T.width+4,W=Q.getOriSize("WWW").width+4;b.title&&b.title.text!=p&&(s=b.title.style,Q.setStyle(s),H=Q.getOriSize("W").height,b.title.rotation=0,q=Q.getSmartText(b.title.text,f,e),da=q.height);L!=parseInt(l.chartleftmargin,10)&&(rc=!0);P!=parseInt(l.chartrightmargin,10)&&(nc=!0);void 0!==l.canvaspadding&&""!==l.canvaspadding&&(nb=!0);Tb=f-g;switch(ra){case "none":J=M=!0;Wa&&(C=hb?300:270,T=ha,ha=t,t=T);break;
case "rotate":C=hb?300:270;T=ha;ha=t;t=T;J=!0;break;case "stagger":Na=J=!0;S=la((e-H)/ha);S<Ua&&(Ua=S);break;default:Wa&&(C=hb?300:270,T=ha,ha=t,t=T)}h.isBar&&(J=!0);wa=0;Lb=b.plotLines;if(typeof d._FCconf.isXYPlot!==Za||h.isBar){V={};jb=Z=0;Ob=ma=null;Ra={};sb=!0;ca=f/(b.max-b.min);Fb=function(a,c,f){var k,e,u,g,F,h;h=a.plotObj;F=a.labelTextWidth;F||(n=h.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),F=Q.getOriSize(n.text).width+4,a.oriWidth=F,F>Nb&&(F=Nb),a.labelTextWidth=F,a.leftEdge=h.value*
ca-F/2,a.rightEdge=h.value*ca+F/2,f&&(F=$(F,2*(m.value-b.min)*ca+d.chart.marginLeft),a.labelTextWidth=F));if(typeof c!==Za){if(f=c.plotObj,n=f.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),c.oriWidth?u=c.oriWidth:(u=Q.getOriSize(n.text).width+4,c.oriWidth=u),u>Nb&&(u=Nb),c.labelTextWidth=u,c.leftEdge=f.value*ca-u/2,c.rightEdge=f.value*ca+u/2,k=h.value*ca,e=k+F/2,g=f.value*ca,u=g-u/2,u<e)if(k+t<g-t)e-=u,k=g-k,a.labelTextWidth=e>k?$(F,k):U(t,F-e/2),c.labelTextWidth=2*(k-a.labelTextWidth/2),
a.leftEdge=h.value*ca-a.labelTextWidth/2,a.rightEdge=h.value*ca+a.labelTextWidth/2,c.leftEdge=f.value*ca-c.labelTextWidth/2,c.rightEdge=f.value*ca+c.labelTextWidth/2;else return c.labelTextWidth=0,f.label.text=p,!1}else f&&(F=$(F,2*(b.max-m.value)*ca+d.chart.marginRight),a.labelTextWidth=F,a.leftEdge=h.value*ca-F/2,a.rightEdge=h.value*ca+F/2);a.nextCat=c;return!0};Na?Ua>fc?Ua=fc:2>Ua&&(Ua=2):Ua=1;for(cb=Lb.length;wa<cb;wa+=1)(m=Lb[wa])&&m.label&&typeof m.label.text!==Za&&(m.isGrid?(ja={plotObj:m},
m.isCat&&(fa=wa%Ua,V[fa]||(V[fa]=[]),ma?(Ob=ja,V[fa].push(Ob)):(Ob=ma=ja,V[fa].push(ma))),Ha.push(ja)):m.isTrend&&Mb.push({plotObj:m}));db=b.plotBands;wa=0;for(cb=db.length;wa<cb;wa+=1)(m=db[wa])&&m.isTrend&&m.label&&typeof m.label.text!==Za&&Mb.push({plotObj:m});if(Ha.length)if(!M&&!C)if(h.distributedColumns)for(wa=0,cb=Ha.length;wa<cb;wa+=1)oa=Ha[wa],Ya=wa%Ua,m=oa.plotObj,m.label&&m.isCat&&(0<=wa-Ua?(ta=Ha[wa-Ua],Ea=ta.plotObj.value*ca+ta.plotObj._weight*ca/2):(ta=null,Ea=b.min*ca-L),wa+Ua<cb?(ea=
Ha[wa+Ua],Xa=ea.plotObj.value*ca-ea.plotObj._weight*ca/2):(ea=null,Xa=b.max*ca+P),n=m.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),ga=m.value*ca,Xc=ga-m._weight*ca/2,Wc=ga+m._weight*ca/2,1<Ua?(Da=Xc-Ea,Ca=Wc+Xa,kb=Wc-Xc+$(Da,Ca)):kb=Wc-Xc,n=m.label,n.style&&n.style!==s&&Q.setStyle(n.style),kb<t&&t<Q.getOriSize(n.text).width?(m.label.text=p,oa.labelTextWidth=0):(oa.labelTextWidth=kb,A=Q.getSmartText(n.text,kb-4,e,J),kb=A.width+4,oa.labelTextWidth=kb,mb=U(mb,A.height)));else{fc=Ha.length;Ub=
Ha.length-1;(lb=(Ha[Ub].plotObj.value-Ha[0].plotObj.value)*ca)?(Nb=.1*lb,Y=U(.2*lb,lb/fc)):Y=Nb=f;for(E in V)for(wa=0,xa=V[E].length;wa<xa;){for(ba=wa+1;!Fb(V[E][wa],V[E][ba]);)ba+=1;wa=ba}ma&&(jb=(ma.plotObj.value-b.min)*ca+L-ma.labelTextWidth/2);m=Ha[0].plotObj;ma&&m===ma.plotObj||(n=m.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),w=Q.getOriSize(n.text).width+4,ga=(m.value-b.min)*ca+L,ma&&(Ia=jb-ga,w=Ia<w&&Ia>t/2?2*Ia:0),Ha[0].labelTextWidth=w,0<w&&(T=ga-w/2),T<jb&&(jb=T));Ob&&(w=Ob.labelTextWidth,
Z=(b.max-Ob.plotObj.value)*ca+P-w/2);m=Ha[Ub].plotObj;Ob&&m===Ob.plotObj||(n=m.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),w=Q.getOriSize(n.text).width+4,ga=(b.max-m.value)*ca+P,Ob&&(Ia=ga-Z,w=Ia<w&&Ia>t/2?2*Ia:0),Ha[Ub].labelTextWidth=w,0<w&&(T=ga-w/2),T<Z&&(Z=T));Ab=0>jb?-jb:0;Bb=0>Z?-Z:0;$a=Ab+Bb;if(0<$a)for(E in Tb>$a?(Aa=(Aa=Bb*f/(Bb+f))?Aa+4:0,d.chart.marginRight+=Aa,f-=Aa,Aa=(Aa=Ab*f/(Ab+f))?Aa+4:0,d.chart.marginLeft+=Aa,f-=Aa,ca=f/(b.max-b.min)):Ab<Bb?Tb>=Bb&&nc?(Aa=(Aa=Bb*f/(Bb+
f))?Aa+4:0,d.chart.marginRight+=Aa,f-=Aa,ca=f/(b.max-b.min)):rc&&(Aa=(Aa=Ab*f/(Ab+f))?Aa+4:0,d.chart.marginLeft+=Aa,f-=Aa,ca=f/(b.max-b.min)):Tb>=Ab&&rc?(Aa=(Aa=Ab*f/(Ab+f))?Aa+4:0,d.chart.marginLeft+=Aa,f-=Aa,ca=f/(b.max-b.min)):nc&&(Aa=(Aa=Bb*f/(Bb+f))?Aa+4:0,d.chart.marginRight+=Aa,f-=Aa,ca=f/(b.max-b.min)),P=d.chart.marginRight,L=d.chart.marginLeft,lb=(Ha[Ub].plotObj.value-Ha[0].plotObj.value)*ca,Nb=.1*lb,Y=U(.2*lb,lb/fc),V){wa=0;for(xa=V[E].length;wa<xa;){for(ba=wa+1;!Fb(V[E][wa],V[E][ba],!0);)ba+=
1;wa=ba}E+=1}wa=0;for(cb=Ha.length;wa<cb;wa+=1)if(oa=Ha[wa],Ya=wa%Ua,m=oa.plotObj,m.label)if(m.isCat)oa.labelTextWidth&&(Ra[Ya]=oa);else{ea=(ta=Ra[Ya])?ta.nextCat:V[Ya]?V[Ya][0]:null;ab=null;if(wa>=Ua)for(Jb=wa-Ua,ab=Ha[Jb];!ab.labelTextWidth;)if(Jb>=Ua)Jb-=Ua,ab=Ha[Jb];else{ab=null;break}Ea=ab?ab.rightEdge:b.min*ca-L;Xa=ea?ea.leftEdge:b.max*ca+P;n=m.label;n.style&&n.style!==s&&(s=n.style,Q.setStyle(s));w=Q.getOriSize(n.text).width+4;dc=m.value*ca-w/2;if(h.isBar&&wa==cb-1&&ab)Ea>dc&&(ab.plotObj.label.text=
p,ab.labelTextWidth=0,Ea=ab.leftEdge);else if(Ea>dc||Xa<dc+w){m.label.text=p;oa.labelTextWidth=0;continue}Ea=U(Ea,dc);ga=m.value*ca;kb=2*$(ga-Ea,Xa-ga);kb.toFixed&&(kb=kb.toFixed(2));n=m.label;n.style&&n.style!==s&&Q.setStyle(n.style);kb<t&&t<Q.getOriSize(n.text).width?(m.label.text=p,oa.labelTextWidth=0):(oa.labelTextWidth=kb,A=Q.getSmartText(n.text,kb-4,e,J),kb=A.width+4,oa.labelTextWidth=kb,oa.leftEdge=ga-kb/2,oa.rightEdge=ga+kb/2,mb=U(mb,A.height))}ab=Ga=null;wa=0;for(cb=Ha.length;wa<cb;wa+=1)if(oa=
Ha[wa],m=oa.plotObj,Ya=wa%Ua,m.isCat&&oa.labelTextWidth){ab=Ga=null;ga=m.value*ca;if(wa>=Ua)for(Jb=wa-Ua,ab=Ha[Jb];!ab.labelTextWidth;)if(Jb>Ua)Jb-=Ua,ab=Ha[Jb];else{ab=null;break}Da=ab?ga-ab.rightEdge:ga-b.min*ca+d.chart.marginLeft;if(wa+Ua<cb)for(Ka=wa+Ua,Ga=Ha[Ka];!Ga.labelTextWidth;)if(Ka+Ua<cb-1)Ka+=Ua,Ga=Ha[Ka];else{Ga=null;break}Ca=Ga?Ga.leftEdge-ga:b.max*ca+d.chart.marginRight-ga;kb=2*$(Da,Ca);kb>Y&&(kb=Y);kb>oa.oriWidth&&(kb=oa.oriWidth);oa.labelTextWidth=kb;n=m.label;n.style&&n.style!==
s&&Q.setStyle(n.style);A=Q.getSmartText(n.text,kb-4,e,J);oa.labelTextWidth=A.width+4;mb=U(mb,A.height);oa.rightEdge=ga+oa.labelTextWidth/2}}else if(C)for(wa=0,cb=Ha.length;wa<cb;wa+=1)if((m=Ha[wa].plotObj)&&m.label&&m.label.text){n=m.label;n.style&&n.style!==s&&(s=n.style,Q.setStyle(s));E=1;if(wa+E<cb)for(Cc=Ha[E+wa].plotObj;Cc&&(Cc.value-m.value)*ca<t;)if(m.isCat){if(Cc.label){Cc.label.text=p;E+=1;if(E+wa>=cb-1)break;Cc=Lb[E+wa].plotObj}}else if(Cc.isCat){m.label.text=p;m=Cc;wa+=E-1;n=m.label;n.style&&
n.style!==s&&(s=n.style,Q.setStyle(s));break}gc=U(gc,Q.getOriSize(n.text).width+4)}E=0;for(cb=Mb.length;E<cb;E+=1)(m=Mb[E].plotObj)&&m.label&&void 0!==G(m.label.text)&&(n=m.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),A=Q.getOriSize(n.text),n.verticalAlign===qa?Oa=U(Oa,A.height):aa=U(aa,A.height))}else{for(cb=Lb.length;wa<cb;wa+=1)(m=Lb[wa])&&(m.isGrid?Ha.push(m):m.isTrend&&Mb.push(m));db=b.plotBands;wa=0;for(cb=db.length;wa<cb;wa+=1)(m=db[wa])&&Mb.push(m);Ub=Ha.length-1;fc=Ha.length;Na&&
(Ua>fc?Ua=fc:2>Ua&&(Ua=2));if(fc)for(b.scroll&&b.scroll.viewPortMin&&b.scroll.viewPortMax?(Qb=b.scroll.viewPortMin,Rb=b.scroll.viewPortMax,nc=rc=!1):(Qb=b.min,Rb=b.max),lb=(Ha[Ub].value-Ha[0].value)*ca,rb=md=lb/(wb-1),ec=(Ha[0].value-Qb)*ca,jc=(Rb-Ha[Ub].value)*ca,"auto"===ra?rb<W&&(C=hb?300:270,T=ha,ha=t,t=T,J=!0):"stagger"===ra&&(rb*=Ua),"line"!==this.defaultSeriesType&&("area"===this.defaultSeriesType?h.drawFullAreaBorder&&(R>ec&&(Qb=b.min-=R/(2*ca),ec+=(Ha[0].value-Qb)*ca),R>jc&&(Rb=b.max+=R/
(2*ca),jc+=(Rb-Ha[Ub].value)*ca)):(R>ec&&(Qb=b.min-=R/(2*ca),ec+=(Ha[0].value-Qb)*ca),R>jc&&(Rb=b.max+=R/(2*ca),jc+=(Rb-Ha[Ub].value)*ca))),t<N&&(t=N),D=Na||M?U(1,K):U(1,K,Ba(t/rb)),h.x&&(h.x.stepValue=D),rb*=D,v=2*(ec+L),(n=Lb[0].label)&&n.text&&(n.style&&Q.setStyle(n.style),w=270===C?$(rb,Q.getOriSize(n.text).height+4):$(rb,Q.getOriSize(n.text).width+4),w>v&&(M||(Ab=(w-v)/2),rc||(nb&&(Ab=0),rb-=Ab/(wb-1),yb=rb*(wb-1),ca=rb,lc=(lb-yb)/ca,Rb=b.max+=lc,Qb=b.min-=lc,Ab=0,lb=yb,ec=(Ha[0].value-Qb)*ca,
jc=(Rb-Ha[Ub].value)*ca))),v=2*(jc+P),(n=Lb[Ub].label)&&n.text&&(n.style&&Q.setStyle(n.style),w=270===C?$(rb,Q.getOriSize(n.text).height+4):$(rb,Q.getOriSize(n.text).width+4),w>v&&(M||(Bb=(w-v)/2),nc||(nb&&(Bb=0),rb-=Bb/(wb-1),yb=rb*(wb-1),ca=rb,lc=(lb-yb)/ca,Bb=0,lb=yb,ec=(Ha[0].value-Qb)*ca,jc=(Rb-Ha[Ub].value)*ca))),$a=Ab+Bb,0<$a&&(Tb>$a?(Aa=(Aa=Bb*f/(Bb+f))?Aa+4:0,d.chart.marginRight+=Aa,f-=Aa,Aa=(Aa=Ab*f/(Ab+f))?Aa+4:0,d.chart.marginLeft+=Aa,f-=Aa,ca=f/(b.max-b.min)):Ab<Bb?Tb>=Bb&&nc?(Aa=(Aa=
Bb*f/(Bb+f))?Aa+4:0,d.chart.marginRight+=Aa,f-=Aa,ca=f/(b.max-b.min)):rc&&(Aa=(Aa=Ab*f/(Ab+f))?Aa+4:0,d.chart.marginLeft+=Aa,f-=Aa,ca=f/(b.max-b.min)):Tb>=Ab&&rc?(Aa=(Aa=Ab*f/(Ab+f))?Aa+4:0,d.chart.marginLeft+=Aa,f-=Aa,ca=f/(b.max-b.min)):nc&&(Aa=(Aa=Bb*f/(Bb+f))?Aa+4:0,d.chart.marginRight+=Aa,f-=Aa,ca=f/(b.max-b.min)),lb=(Ha[Ub].value-Ha[0].value)*ca,rb=lb/(wb-1),Na&&(rb*=Ua),D=Na||M?U(1,K):C?U(1,K,Ba(ha/rb)):U(1,K,Ba(t/rb)),h.x&&(h.x.stepValue=D),rb*=D),E=0;E<fc;E+=1){m=Ha[E];if(E%D&&m.label){if(m.stepped=
!0,m.label.style=b.steppedLabels.style,!hc)continue}else m.stepped=!1;m&&m.label&&void 0!==G(m.label.text)&&(n=m.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),C&&M?(A=Q.getOriSize(n.text),gc=U(gc,A.width+4),mb=U(mb,A.height)):M||(A=C||Na?Q.getOriSize(n.text):Q.getSmartText(n.text,rb-4,e,J),gc=U(gc,A.width+4),mb=U(mb,A.height)))}E=0;for(cb=Mb.length;E<cb;E+=1)(m=Mb[E])&&m.label&&void 0!==G(m.label.text)&&(n=m.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),A=Q.getOriSize(n.text),n.verticalAlign===
qa?Oa=U(Oa,A.height):aa=U(aa,A.height));b.scroll&&b.scroll.enabled&&!C&&!M&&(lc=gc/2,d.chart.marginLeft<lc&&(uc=lc-d.chart.marginLeft,Tb>uc&&(f-=uc,Tb-=uc,d.chart.marginLeft+=uc)),d.chart.marginRight<lc&&(uc=lc-d.chart.marginRight,Tb>uc&&(f-=uc,Tb-=uc,d.chart.marginRight+=uc)))}M?(xb=ha,C&&(xb=gc)):xb=C?gc:Na?Ua*mb:mb;0<xb&&(xb+I>Fa&&(xb=Fa-I,Ua=Math.floor(xb/mb)),Gb+=I+xb);0<da&&(Gb+=da+kc);Yb=I-4;ib=aa+Gb+2;T=0;ib>e&&(Ia=ib-e,kc>Ia?(kc-=Ia,Ia=0):(Ia-=kc,kc=0,Yb>Ia?(Yb-=Ia,Ia=0):(Ia-=Yb,Yb=0),I=
Yb+4),aa>Ia?(aa-=Ia,Ia=0):(0<aa&&(Ia-=aa,aa=0),0<Ia&&(Oa>Ia?(Oa-=Ia,Ia=0):(0<Oa&&(Ia-=Oa,Oa=0),0<Ia&&((T=da-H)>Ia?(da-=Ia,Ia=0):(Ia-=T,da=H,0<Ia&&((T=xb-ha)>Ia?(xb-=Ia,Ia=0):(Ia-=T,xb=ha,0<Ia&&(Ia-=da+kc,da=0,0<Ia&&(Ia-=xb,xb=0,0<Ia&&(I-=Ia)))))))))));I+=Ja;Sc=h.is3d?-d.chart.xDepth:0;Yc=xb+I;Ec=Sc;Zc=.5*ha;ia=ha+I;cb=Ha.length;na=0;if(sb)if(C)for(yc=za,oc=hb?I+8:I+4,cb=Ha.length,E=0;E<cb;E+=1)(m=Ha[E].plotObj)&&m.label&&void 0!==G(m.label.text)&&(n=m.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),
wa=1,A=Q.getSmartText(n.text,xb-4,t,J),n.text=A.text,A.tooltext&&(n.originalText=A.tooltext),Ec=Sc+Zc/2,n.y=oc,n.x=Ec,n.rotation=C,n.textAlign=yc,na+=1);else for(Kc=xb,yc=Pa,oc=ia,E=0;E<cb;E+=D)m=Ha[E].plotObj,ha=parseInt(m.label.style.lineHeight,10),m&&m.label&&void 0!==G(m.label.text)&&(n=m.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),M||(A=Q.getSmartText(n.text,Ha[E].labelTextWidth-4,Kc,J),n.text=A.text,A.tooltext&&(n.originalText=A.tooltext),Na&&(oc=ia+na%Ua*ha)),n.y=oc,n.x=Ec,n.rotation=
C,n.textAlign=yc,na+=1);else{C?(Kc=rb,Tc=xb-4,yc=za,oc=hb?I+8:I+4):Na?(Tc=rb-4,yc=Pa):(Kc=xb,Tc=rb-4,yc=Pa,oc=ia);for(E=0;E<cb;E+=D)m=Ha[E],ha=Ba(parseFloat(m.label.style.lineHeight)),Zc=.5*ha,ia=ha+I,m&&m.label&&void 0!==G(m.label.text)&&(n=m.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),M||(Na&&(Kc=ha),Rc=L+(E-Qb)*md-d.chart.spacingLeft,nd=300===C?$(pa(2.999*Rc*Rc+Rc*Rc)-I,Tc):Tc,A=Q.getSmartText(n.text,nd,Kc,J),vb=U(vb,C?A.width:A.height),n.text=A.text,A.tooltext&&(n.originalText=A.tooltext),
Na&&(oc=ia+na%Ua*ha)),C?Ec=Sc+.5*ha:Na||(oc=ha+I),n.y=oc,n.x=Ec,n.rotation=C,n.textAlign=yc,na+=1);300===C&&(xb=vb,Yc=xb+I);c._labelY=ia;c._labelX=Sc;c._yShipment=oc;c._isStagger=Na;c._rotation=C;c._textAlign=yc;c._adjustedPx=Zc;c._staggerLines=Ua;c._labelHeight=ha}cb=Mb.length;for(E=Uc=Lc=0;E<cb;E+=1)(m=Mb[E].plotObj?Mb[E].plotObj:Mb[E])&&m.label&&void 0!==G(m.label.text)&&(n=m.label,n.style&&n.style!==s&&(s=n.style,Q.setStyle(s)),n.verticalAlign===qa?(A=Q.getSmartText(n.text,f,Oa,!0),Uc=U(Uc,A.height),
n.text=A.text,A.tooltext&&(n.originalText=A.tooltext),n.y=Yc+Q.getOriSize(n.text).height,n.x=Ec):(A=Q.getSmartText(n.text,f,aa,!0),Lc=U(Lc,A.height),n.text=A.text,A.tooltext&&(n.originalText=A.tooltext),n.y=-(aa-Q.getOriSize("W").height+I+2)));0<da&&(Q.setStyle(b.title.style),q=Q.getSmartText(b.title.text,f,da),b.title.text=q.text,q.tooltext&&(b.title.originalText=q.tooltext),b.title.margin=Yc+Uc+kc);Gb=Uc;0<xb&&(h.horizontalAxisHeight=I+xb-Ja,Gb+=h.horizontalAxisHeight);0<da&&(Gb+=sa=da+kc);Gb=Gb||
I-Ja;d.chart.marginBottom+=Gb;0<Lc&&(d.chart.marginTop+=Lc,Gb+=Lc);if(b.opposite)for(b.title.margin-=xb-(q&&q.height||0)+I,Gb-=sa,d.chart.marginTop+=Gb,d.chart.marginBottom-=Gb,d.xAxis.opposite=1,cb=Lb.length,wa=0;wa<cb;wa+=1)(m=Lb[wa])&&m.isGrid&&(n=m.label)&&void 0!==n.text&&(n.textAlign=ya,n.y-=oc+I+4);return Gb},Zb=m.configureLegendOptions=function(c,d,k,e,f){e=c.legend;var g=c.chart,h=g.is3D?wb.chart3D:wb.chart2D,A=g.useRoundEdges,m=a(d.legendiconscale,1),n=(parseInt(e.itemStyle.fontSize,10)||
10)+1,E=this.colorManager,q;if(0>=m||5<m)m=1;e.padding=4;0>=n&&(n=1);q=3*m;n=$(n*m,f-8);0>=n&&(q=n=0);e.symbolWidth=n;e.symbolPadding=q;e.textPadding=4;e.legendHeight=f=n+2*q;e.rowHeight=U(parseInt(e.itemStyle.lineHeight,10)||12,f);k?(e.align=za,e.verticalAlign="middle",e.layout="vertical"):e.x=(g.marginLeft-g.spacingLeft-g.marginRight+g.spacingRight)/2;k=b(d.legendbordercolor,E.getColor(h.legendBorderColor));f=a(d.legendborderalpha,100);g=a(d.legendbgalpha,100);e.backgroundColor=C(b(d.legendbgcolor,
E.getColor(h.legendBgColor)),g);e.borderColor=C(k,f);e.borderWidth=a(d.legendborderthickness,!A||d.legendbordercolor?1:0);e.shadow=Boolean(a(d.legendshadow,1));e.symbol3DLighting=Boolean(a(d.use3dlighting,d.useplotgradientcolor,1));e.shadow&&(e.shadow={enabled:e.shadow,opacity:U(f,g)/100});e.reversed=Boolean(a(d.reverselegend,0)-a(this.reverseLegend,0));e.style={padding:4};Boolean(a(d.interactivelegend,1))?e.symbolStyle={_cursor:"hand",cursor:"pointer"}:(c.legend.interactiveLegend=!1,e.itemStyle.cursor=
"default",e.itemHoverStyle={cursor:"inherit"});e.borderRadius=a(d.legendborderradius,A?3:0);e.legendAllowDrag=Boolean(a(d.legendallowdrag,0));e.title.text=N(l(d.legendcaption,p));e.legendScrollBgColor=L(b(d.legendscrollbgcolor,d.scrollcolor,E.getColor("altHGridColor")));e.legendScrollBarColor=b(d.legendscrollbarcolor,k);e.legendScrollBtnColor=b(d.legendscrollbtncolor,k)},Oa=m.placeLegendBlockRight=function(b,c,d,e,f){this.configureLegendOptions(b,c.chart,!0,f,d);var k=this.snapLiterals||(this.snapLiterals=
{}),g=0,h=b.series,l,A=b[z],m=this.smartLabel||A.smartLabel,n=b.chart.spacingRight,E=b.legend,q,s=E.textPadding,t=E.title.padding,T=E.symbolWidth,S=E.symbolPadding,v=T+2*S,w=2*e,C=0,W=a(c.chart.legendpadding,7);c=W+E.borderWidth/2+a(c.chart.canvasborderthickness,1);var da=2*E.padding,ha=da,D=!1,ia=[];d-=da+W;f&&(h=h&&h[0]&&h[0].data);if(typeof h===Za||typeof h.length===Za)return 0;f=h.length;for(g=0;g<f;g+=1)(l=h[g])&&!1!==l.showInLegend&&(l.__i=g,ia.push(l));ia.sort(function(a,b){return a.legendIndex-
b.legendIndex||a.__i-b.__i});f=ia.length;q=d-v-W-s;0>q&&(q=0);m.setStyle(E.itemStyle);E.reversed&&ia.reverse();for(g=0;g<f;g+=1)l=ia[g],D=!0,l._legendX=0,l._legendY=ha,0===q?(ha+=l._legendH=v,l.name=p,l._totalWidth=T+S):(h=m.getSmartText(l.name,q,w),l.name=h.text,h.tooltext&&(l.originalText=h.tooltext),h.height<v&&(l._legendTestY=(v-h.height)/2),l._totalWidth=T+S+s+h.width+W,ha+=l._legendH=U(h.height,v),C=U(h.width,C));if(D)return E.itemWidth=C+v+W+s,E.width=E.itemWidth+da,E.title.text!==p&&(m.setStyle(E.title.style),
h=m.getSmartText(E.title.text,d,w),E.title.text=h.text,h.tooltext&&(E.title.originalText=h.tooltext),g=h.width+da,E.width<g&&(E.initialItemX=(g-E.width)/2,E.width=g),E.initialItemY=h.height+t,ha+=E.initialItemY),E.height=E.totalHeight=ha,E.height>e&&(E.height=e,E.scroll.enabled=!0,E.scroll.flatScrollBars=A.flatScrollBars,E.scroll.scrollBar3DLighting=A.scrollBar3DLighting,E.width+=(E.scroll.scrollBarWidth=10)+(E.scroll.scrollBarPadding=2)),k.legendstartx=A.width-n-E.width,k.legendwidth=E.width,k.legendendx=
k.legendstartx+k.legendwidth,k.legendheight=E.height,c=$(E.width+c,d),b.chart.marginRight+=c+W,c;E.enabled=!1;return 0},ca=m.placeLegendBlockBottom=function(b,c,d,e,f){this.configureLegendOptions(b,c.chart,!1,f,d);var g=this.snapLiterals||(this.snapLiterals={}),h=0,l=b.series,A=b[z],m=A.smartLabel||this.smartLabel,E=b.chart,n=E.spacingBottom,q=E.spacingLeft,E=E.spacingRight,s=b.legend,t,T=s.textPadding,S=s.title.padding,v,w=s.symbolWidth,W=s.symbolPadding,C=s.legendHeight,da=c.chart;v=0;var ha=2*
e,D=s.rowHeight,ia=.05*D,H=[];t=a(da.minimisewrappinginlegend,0);var da=a(parseInt(da.legendnumcolumns,10),0),na=0,G=0,J=0,sa=h=0,Na=s.padding,M=2*Na,Na=T+W+Na;c=a(c.chart.legendpadding,7)+s.borderWidth/2+1;var K=M,I=!1,Q,N=[],Fa=!1,ra=0,Wa=0;0>da&&(da=0);d-=M;m.setStyle(s.itemStyle);h=m.getOriSize(k).height;c=$(c,e-h-8);e-=c;f&&(l=l&&l[0]&&l[0].data);if(typeof l===Za||typeof l.length===Za)return 0;f=l.length;for(h=0;h<f;h+=1)(Q=l[h])&&!1!==Q.showInLegend&&(Q.__i=h,N.push(Q));N.sort(function(a,b){return a.legendIndex-
b.legendIndex||a.__i-b.__i});f=N.length;m.setStyle(s.itemStyle);for(h=0;h<f;h+=1)I=!0,l=m.getOriSize(N[h].name),na=U(na,l.width),G+=l.width,J+=1;h=G/J;C=C+ia+T+W+M;G+=C*J;if(I){h+=C;na+=C;0<da&&J<da&&(da=J);G<=d&&(0>=da||da===J)?(da=J,sa=h=G/J,Fa=!0):0<da&&(sa=d/da)>h?sa>na&&(sa=na):d>na&&(t||1.5*h>na)?(da=la(d/na),J<da&&(da=J),sa=na):d>=2*h?(da=la(d/h),J<da&&(da=J),sa=la(d/da),sa>na&&(sa=na)):(da=1,sa=d);s.itemWidth=sa;t=sa-C;0>t&&(W=t=T=0);s.symbolPadding=W;s.textPadding=T;s.width=sa*da-ia;s.title.text!==
p&&(m.setStyle(s.title.style),l=m.getSmartText(s.title.text,d,ha),s.title.text=l.text,l.tooltext&&(s.title.originalText=l.tooltext),v=l.width+M,s.width<v&&(s.initialItemX=(v-s.width)/2,s.width=v),s.initialItemY=v=l.height+S);m.setStyle(s.itemStyle);s.reversed&&N.reverse();for(h=0;h<f;h+=1){d=N[h];0===t&&(H[ra]=!0,d.name=p,S=1,T=parseInt(ra/da,10),ia=ra%da,d._legendX=ia*sa,d._legendY=T*D+M,d._legendH=S*D,d._totalWidth=w+W);if(Fa)l=m.getOriSize(d.name),l.height<D&&(d._legendTestY=(D-l.height)/2),d._legendX=
Wa,d._legendY=M,d._legendH=D,d._totalWidth=w+Na+l.width,Wa+=l.width+C;else{l=m.getSmartText(d.name,t,ha);d.name=l.text;for(l.tooltext&&(d.originalText=l.tooltext);!0===H[ra];)ra+=1;T=l.height/D;ia=ra;for(S=0;S<T;S+=1,ia+=da)H[ia]=!0;l.height<D&&(d._legendTestY=(D-l.height)/2);T=parseInt(ra/da,10);ia=ra%da;d._legendX=ia*sa;d._legendY=T*D+M;d._legendH=S*D;d._totalWidth=w+Na+l.width}ra+=1}m=Fa?1:Ba(H.length/da);s.height=s.totalHeight=K+(m*D+v);s.rowHeight=D;s.legendNumColumns=da;s.height>e&&(s.height=
e,s.scroll.enabled=!0,s.scroll.flatScrollBars=A.flatScrollBars,s.scroll.scrollBar3DLighting=A.scrollBar3DLighting,s.width+=(s.scroll.scrollBarWidth=10)+(s.scroll.scrollBarPadding=2));g.legendstartx=q+.5*(A.width-q-E-s.width)+(s.x||0);g.legendwidth=s.width;g.legendendx=g.legendstartx+g.legendwidth;g.legendstarty=A.height-n-s.height;g.legendheight=s.height;g.legendendy=g.legendstarty+g.legendheight;c+=s.height;b.chart.marginBottom+=c;return c}s.enabled=!1;return 0},hc=function(a,b){return a.value-b.value},
Kb=function(a,b,c){var d=b._originalText;a=a[z].smartLabel;b.text=b.rotation?a.getSmartText(d,c,b._actualWidth).text:a.getSmartText(d,b._actualWidth,c).text;b.centerYAxisName=!0},Sb=m.adjustVerticalAxisTitle=function(a,b,c){if(b&&b.text){var d=b.text,f=a[z].smartLabel,e=2*$(a.chart.marginTop,a.chart.marginBottom)+c,k=c+a.chart.marginTop+a.chart.marginBottom;b.style&&f.setStyle(b.style);d=f.getOriSize(d);void 0===b.centerYAxisName&&(b.centerYAxisName=!0);b.rotation?d.width>e&&(b.y=k/2-(c/2+a.chart.marginTop),
b.centerYAxisName=!1):d.height>e&&(b.y=(k/2-(c/2+a.chart.marginTop))/2,b.centerYAxisName=!1)}},Nb=m.adjustVerticalCanvasMargin=function(b,c,d,e){var f=c.chart,k=c=0,g=0,h=a(f.canvastopmargin,0),f=a(f.canvasbottommargin,0),l=h/(h+f),A=b.chart.marginTop,p=b.chart.marginBottom;f>p&&(c+=f-p);h>A&&(c+=h-A);c>d?h>A&&f>p?(k=d*l,g=d*(1-l)):h>A?k=d:g=d:0<c&&(f>p&&(g=f-p),h>A&&(k=h-A));k&&(b.chart.marginTop+=k);g&&(b.chart.marginBottom+=g,e&&e.title&&(e.title.margin+=g));return k+g},jb=m.adjustHorizontalCanvasMargin=
function(b,c,d,e,f){var k=c.chart;c=a(k.canvasleftmargin,0);var k=a(k.canvasrightmargin,0),g=c/(c+k),h=0,l=b.chart.marginLeft,A=b.chart.marginRight,p=0,m=0;c>l&&(h+=c-l);k>A&&(h+=k-A);h>d?c>l&&k>A?(p=d*g,m=d*(1-g)):k>A?m=d:p=d:0<h&&(c>l&&(p=c-l),k>A&&(m=k-A));p&&(b.chart.marginLeft+=p,e&&e.title&&(e.title.margin+=p));m&&(b.chart.marginRight+=m,f&&f.title&&(f.title.margin+=m));return m+p},Ob=function(a,b){return a-b},aa=m.getDataParser={column:function(c,d,k){var g=c[z],f=d.borderWidth;return function(h,
l,A){var p=d.plotgradientcolor,m=d.is3d,E=d.isRoundEdges,n=d.plotBorderColor,s=b(h.color,d.color),q=b(h.ratio,d.ratio),T=t(d.plotBorderAlpha),z=a(h.dashed,d.dashed),S=b(h.dashlen,d.dashLen),v=b(h.dashgap,d.dashGap),w=d.use3DLighting,da=t(b(h.alpha,d.alpha)).toString(),C={opacity:da/100},W=d.isBar,ha=d.fillAangle,D=0>A?W?180-ha:360-ha:ha,ha=ma(s+Da+p,da,q,D,E,n,$(da,T).toString(),W,m),ia=z?e(S,v,f):"none";l=k.getPointStub(h,A,g.oriCatTmp[l],c,d,d.showValues,d.yAxis);h=k.pointHoverOptions(h,d,{plotType:"column",
is3d:m,isBar:W,use3DLighting:w,isRoundEdged:E,color:s,gradientColor:p,alpha:da,ratio:q,angle:D,borderWidth:f,borderColor:n,borderAlpha:T,borderDashed:z,borderDashGap:v,borderDashLen:S,shadow:C});l.y=A;l.shadow=C;l.color=ha[0];l.borderColor=ha[1];l.borderWidth=f;l.use3DLighting=w;l.dashStyle=ia;l.tooltipConstraint=k.tooltipConstraint;l.hoverEffects=h.enabled&&h.options;l.rolloverProperties=h.enabled&&h.rolloverOptions;return l}},line:function(c,d,k){var g=c[z];return function(f,h,l){var A=a(f.alpha,
d.lineAlpha),p={opacity:A/100},m=a(f.anchorsides,d.anchorSides,0),E=a(f.anchorborderthickness,d.anchorBorderThickness,1),n=L(b(f.anchorbordercolor,d.anchorBorderColor)),s=L(b(f.anchorbgcolor,d.anchorBgColor)),q=a(f.anchorstartangle,d.anchorStartAngle,90),t=b(f.anchoralpha,d.anchorAlpha),T=b(f.anchorbgalpha,t),z=a(f.anchorradius,d.anchorRadius),S=Boolean(a(f.anchorshadow,d.anchorShadow,0));h=k.getPointStub(f,l,g.oriCatTmp[h],c,d,d.showValues,d.yAxis);var v=b(f.anchorimageurl,d.imageUrl),w=b(f.anchorimagescale,
d.imageScale),da=b(f.anchorimagealpha,d.imageAlpha);h.y=l;h.shadow=p;h.anchorShadow=d.anchorShadow;h.dashStyle=a(f.dashed,d.lineDashed)?e(d.lineDashLen,d.lineDashGap,d.lineThickness):null;h.color={FCcolor:{color:L(b(f.color,d.lineColor)),alpha:A}};h.valuePosition=b(f.valueposition,d.valuePosition);l=k.pointHoverOptions(f,d,{plotType:"anchor",anchorBgColor:s,anchorAlpha:t,anchorBgAlpha:T,anchorAngle:q,anchorBorderThickness:E,anchorBorderColor:n,anchorBorderAlpha:t,anchorSides:m,anchorRadius:z,imageUrl:v,
imageScale:w,imageAlpha:da,shadow:p});h.marker={enabled:void 0===d.drawAnchors?0!==A:!!d.drawAnchors,shadow:S&&{opacity:t/100},fillColor:{FCcolor:{color:L(b(f.anchorbgcolor,d.anchorBgColor)),alpha:(b(f.anchorbgalpha,d.anchorBgAlpha)*t/100).toString()}},lineColor:{FCcolor:{color:L(b(f.anchorbordercolor,d.anchorBorderColor)),alpha:t}},imageUrl:v,imageScale:w,imageAlpha:da,lineWidth:a(f.anchorborderthickness,d.anchorBorderThickness),radius:a(f.anchorradius,d.anchorRadius),symbol:oa(a(f.anchorsides,d.anchorSides)),
startAngle:b(f.anchorstartangle,d.anchorAngle)};h.hoverEffects=l.enabled&&l.options;h.rolloverProperties=l.enabled&&l.rolloverOptions;return h}},area:function(c,d,k){var e=c[z];return function(f,g,h){var l=b(f.alpha,d.fillAlpha),A={opacity:U(l,d.lineAlpha)/100,inverted:!0},p=a(f.anchorsides,d.anchorSides,0),m=a(f.anchorborderthickness,d.anchorBorderThickness,1),E=L(b(f.anchorbordercolor,d.anchorBorderColor)),n=L(b(f.anchorbgcolor,d.anchorBgColor)),s=a(f.anchorstartangle,d.anchorStartAngle,90),q=b(f.anchoralpha,
d.anchorAlpha),t=b(f.anchorbgalpha,q),T=a(f.anchorradius,d.anchorRadius),z=Boolean(a(f.anchorshadow,d.anchorShadow,0));g=k.getPointStub(f,h,e.oriCatTmp[g],c,d,d.showValues,d.yAxis);var S=b(f.anchorimageurl,d.imageUrl),v=b(f.anchorimagescale,d.imageScale),w=b(f.anchorimagealpha,d.imageAlpha);g.y=h;g.shadow=A;g.anchorShadow=d.anchorShadow;g.color={FCcolor:{color:L(b(f.color,d.fillColor)),alpha:l}};g.valuePosition=b(f.valueposition,d.valuePosition);h=k.pointHoverOptions(f,d,{plotType:"anchor",anchorBgColor:n,
anchorAlpha:q,anchorBgAlpha:t,anchorAngle:s,anchorBorderThickness:m,anchorBorderColor:E,anchorBorderAlpha:q,anchorSides:p,anchorRadius:T,imageUrl:S,imageScale:v,imageAlpha:w,shadow:A});g.marker={enabled:d.drawAnchors,shadow:z&&{opacity:q/100},fillColor:{FCcolor:{color:L(b(f.anchorbgcolor,d.anchorBgColor)),alpha:(b(f.anchorbgalpha,d.anchorBgAlpha)*q/100).toString()}},lineColor:{FCcolor:{color:L(b(f.anchorbordercolor,d.anchorBorderColor)),alpha:q}},imageUrl:S,imageScale:v,imageAlpha:w,lineWidth:a(f.anchorborderthickness,
d.anchorBorderThickness),radius:T,symbol:oa(a(f.anchorsides,d.anchorSides)),startAngle:b(f.anchorstartangle,d.anchorAngle)};g.hoverEffects=h.enabled&&h.options;g.rolloverProperties=h.enabled&&h.rolloverOptions;g.events={click:d.getLink};return g}}};d.core.options.resizeTrackingInterval=300;d.core.options.preventTrackResize=!1;m.createChart=function(a,b,c,k,f,e,g){var h=a.jsVars,l,A,p=V[c||(c=a.chartType())],E,n=h.hasNativeMessage,s=a.options,q=a.args,t;t=function(f){var e={renderer:"javascript"},
l=h.fcObj,A=l.width,s=l.height,q=p&&p.eiMethods,t=h.overlayButton,T;b.jsVars=a.jsVars;h.container=b;h.hcObj=f;h.type=c;h.width=b.offsetWidth;h.height=b.offsetHeight;h.instanceAPI=E;if(f.hasRendered){d.extend(b,Fa);if(q&&"string"!==typeof q)for(T in q)b[T]=q[T];h.overlayButtonActive&&t&&(t.innerHTML="",t.appendChild(v.createTextNode(h.overlayButtonMessage)),f.container.appendChild(t))}(/\%/g.test(A)||/\%/g.test(s))&&b&&b.parentNode&&!d.core.options.preventTrackResize&&Wa(l,b);k&&(k({success:f.hasRendered,
ref:b,id:a.id}),f.hasRendered&&(m.raiseEvent("loaded",{type:c,renderer:"javascript"},a,[a.id]),n||(l.__state.firstRenderNotified=!0,setTimeout(function(){m.raiseEvent("rendered",{renderer:"javascript"},l,[l.id])},0))));f.hasRendered&&h.previousDrawCount<h.drawCount&&(e.width=h.width,e.height=h.height,e.drawCount=h.drawCount,e.displayingMessage=n,e.renderer=l.options.renderer,m.raiseEvent("drawcomplete",e,l,[l.id]),n||g||setTimeout(function(){l.__state&&!l.__state.firstRenderNotified&&m.raiseEvent("rendered",
{renderer:"javascript"},l,[l.id]);d.raiseEvent("renderComplete",e,l)},0))};h.instanceAPI&&h.instanceAPI.dispose&&h.instanceAPI.dispose();E=p?new V(c):new V("stub");E.chartInstance=a;E.origRenderWidth=a.__state.renderedWidth;E.origRenderHeight=a.__state.renderedHeight;void 0!==f?"string"===typeof f&&(f=new ia(b,f,a),n=h.hasNativeMessage=!0):!p||!p.init||p&&"stub"===p.name?(a._chartMessageStyle={color:q.typeNotSupportedMessageColor||s.baseChartMessageColor,fontFamily:q.typeNotSupportedMessageFont||
s.baseChartMessageFont,fontSize:q.typeNotSupportedMessageFontSize||s.baseChartMessageFontSize},f=new ia(b,s.typeNotSupportedMessage,a),n=h.hasNativeMessage=!0):h.message?(f=new ia(b,h.message,a),n=h.hasNativeMessage=!0):h.loadError?(a._chartMessageStyle={color:q.dataLoadErrorMessageColor||s.baseChartMessageColor,fontFamily:q.dataLoadErrorMessageFont||s.baseChartMessageFont,fontSize:q.dataLoadErrorMessageFontSize||s.baseChartMessageFontSize},f=new ia(b,s.dataLoadErrorMessage,a),n=h.hasNativeMessage=
!0):h.stallLoad?(a._chartMessageStyle={fontFamily:q.dataLoadStartMessageFont||s.baseChartMessageFont,fontSize:q.dataLoadStartMessageFontSize||s.baseChartMessageFontSize,color:q.dataLoadStartMessageColor||s.baseChartMessageColor},f=new ia(b,s.dataLoadStartMessage,a),n=h.hasNativeMessage=!0):(d.raiseEvent("internal.drawStart",{chartType:c,logicName:E.name,logicBase:E.base&&E.base.name,defaultSeriesType:E.defaultSeriesType},a),l=a.jsVars&&a.jsVars.themeObject&&a.jsVars.themeObject.getThemedJSONData()||
a.getChartData(d.dataFormats.JSON,!0),A=l.data,l.error instanceof Error?(a._chartMessageStyle={fontFamily:q.dataInvalidMessageFont||s.baseChartMessageFont,fontSize:q.dataInvalidMessageFontSize||s.baseChartMessageFontSize,color:q.dataInvalidMessageColor||s.baseChartMessageColor},f=new ia(b,s.dataInvalidMessage,a),n=h.hasNativeMessage=!0,a.__state.dataReady=!1,g||d.raiseEvent("dataInvalid",{error:l.error},h.fcObj,void 0,function(){m.raiseEvent("dataxmlinvalid",{},a,[a.id])})):(g||m.raiseEvent("dataloaded",
{},a,[a.id]),f=E.init(b,A,a,t),E.inited=!0,h.previousDrawCount=h.drawCount,h.drawCount+=1,0===f.series.length?(a._chartMessageStyle={fontFamily:q.dataEmptyMessageFont||s.baseChartMessageFont,fontSize:q.dataEmptyMessageFontSize||s.baseChartMessageFontSize,color:q.dataEmptyMessageColor||s.baseChartMessageColor},f=new ia(b,s.dataEmptyMessage,a),n=h.hasNativeMessage=!0,a.__state.dataReady=!1,g||m.raiseEvent("nodatatodisplay",{},a,[a.id])):(a.__state.dataReady=!0,n=h.hasNativeMessage=!1,delete h.message)));
f||(a._chartMessageStyle={fontFamily:s.baseChartMessageFont,fontSize:s.baseChartMessageFontSize,color:s.baseChartMessageColor},f=new ia(b,"Error rendering chart {0x01}",a),n=h.hasNativeMessage=!0);n&&!E.inited&&E.init(b,A,a,t);f.chart=f.chart||{};f.credits=f.credits||{};f.credits.enabled=p&&!0===p.creditLabel?!0:!1;!1===e&&(f.chart.animation=!1,f.plotOptions||(f.plotOptions={}),f.plotOptions.series||(f.plotOptions.series={}),f.plotOptions.series.animation=!1);b.style&&(f.chart.containerBackgroundColor=
m.getContainerBackgroundColor(a));return E.draw(f,t)};V("base",{useScaleRecursively:!0,tooltipConstraint:"chart",rendererId:"root",canvasPaddingModifiers:["anchor","anchorlabel"],drawAnnotations:!0,draw:function(a,b){var c=this.renderer;c||(c=this.renderer=new V("renderer."+this.rendererId));this.updateDefaultAnnotations();return c.init(this,a,b)},init:function(b,c,d){var e=this.chartInstance||d,f=e.jsVars;d=f._reflowData||(f._reflowData={});var k=f._reflowClean,h=e.options,l=h.args,A,p;this.dataObj=
c=g({},c);p=c.chart=c.chart||c.graph||c.map||{};delete c.graph;delete c.map;d&&!this.stateless&&(A=d.hcJSON,delete d.hcJSON,g(this,d,!0),this.preReflowAdjustments&&this.preReflowAdjustments.call(this),d.hcJSON=A);this.containerElement=b;this.config={};this.smartLabel=f.smartLabel;this.smartLabel.useEllipsesOnOverflow(a(p.useellipseswhenoverflow,p.useellipsewhenoverflow,1));this.colorManager=new m.colorManager(c,this);this.linkClickFN=W(c,e);this.numberFormatter=new S(c.chart,this);if(!this.standaloneInit)return e._chartMessageStyle=
{fontFamily:l.typeNotSupportedMessageFont||h.baseChartMessageFont,fontSize:l.typeNotSupportedMessageFontSize||h.baseChartMessageFontSize,color:l.typeNotSupportedMessageColor||h.baseChartMessageColor},new m.createDialog(b,h.typeNotSupportedMessage,e);b=this.chart(b.offsetWidth||parseFloat(b.style.width),b.offsetHeight||parseFloat(b.style.height),e);d&&!this.stateless&&(d.hcJSON&&g(b,d.hcJSON,!0),this.postReflowAdjustments&&this.postReflowAdjustments.call(this),k&&this.cleanedData&&(this.cleanedData(this,
k),this.cleanedData(d,k)));return b},postSpaceManager:function(){var b=this.hcJSON,c=b._FCconf,d=b.chart,e=d.marginLeft,f=d.spacingLeft,k=d.spacingRight,g=c.width-e-d.marginRight,h=b.title,b=b.subtitle,l=c.width,A=h.align,c=h.x,p=h.horizontalPadding,m=h.alignWithCanvas,E=(Z(e)||0)+a(g,l)/2,e=this.snapLiterals||(this.snapLiterals={}),g=h._captionWidth,n=b._subCaptionWidth,s=h._lineHeight,q=b._lineHeight,t=h.text;if(void 0===c){switch(A){case za:c=m?l-d.marginRight-p:l-p;break;case ya:c=m?d.marginLeft+
p:p;break;default:c=m?E:f+.5*(l-f-k)||l/2}h.align===ya?(k=f=0,h.align="start"):h.align===za?(f=g,k=n,h.align="end"):(f=g/2,k=n/2,h.align="middle");h.x=c;h.y=h.y||d.spacingTop||0;b.y=t?h.y+s+2:h.y||d.spacingTop||0;e.captionstartx=c-f-2;e.captionwidth=g+4;e.captionendx=e.captionstartx+e.captionwidth;e.captionstarty=h.y||0;e.captionheight=s+2;e.captionendy=e.captionstarty+e.captionheight;e.subcaptionstartx=c-k-2;e.subcaptionwidth=n+4;e.subcaptionendx=e.subcaptionstartx+e.subcaptionwidth;e.subcaptionstarty=
b.y||0;e.subcaptionheight=q+2;e.subcaptionendy=e.subcaptionstarty+e.subcaptionheight}},chart:function(c,k){var h=this.name,F=this.dataObj,f=F.chart,m=this.colorManager,n,q,t,T,S,v,w,da=this.defaultSeriesType,W,ha,ia,H,J,sa,M,K,Q,Fa,ra,Wa,ca,Ja,P,$,Oa,aa,hb,mb,Zb,Sb,V,Kb,hc,Nb,Z,jb,ma,Ob,ga,ea,ta,oa,Ba,la,pa,xa,Ra,ob,eb,Za,tb,ib,Cb,Vb,zb,Ta,sb,Wb,Qa,Eb,ub,Xb,Aa,nb,Ya,Hb,ab,mc,sc,wc,qc,vb,kb,Fb,Jb,Ia,Yb,Bc,Qb,Rb,dc,rc,nc,Tb,wa,Lb,Jc,Ha,Mb,lb,Ab,Bb,Ub,fc,rb,ec,jc,ld,cb,kc,xb,Ua,Gb,Qc,Vc,hd,lc;n=gc(F,
c,k,this);Q=n.chart;K=n.xAxis;W=n[z];this.snapLiterals||(this.snapLiterals={});ra=this.snapLiterals;ra.chartstartx=0;ra.chartstarty=0;ra.chartwidth=c;ra.chartheight=k;ra.chartendx=c;ra.chartendy=k;ra.chartcenterx=c/2;ra.chartcentery=k/2;ra.chartbottommargin=Q.spacingBottom;ra.chartleftmargin=Q.spacingLeft;ra.chartrightmargin=Q.spacingRight;ra.charttopmargin=Q.spacingTop;this.updateSnapPoints&&this.updateSnapPoints();this.postHCJSONCreation&&this.postHCJSONCreation.call(this,n);d.raiseEvent("internal.postlogic",
this,this.chartInstance);n.labels.smartLabel=v=W.smartLabel=this.smartLabel;W.width=c;W.height=k;ia=n.plotOptions;W.isDual=this.isDual;W.numberFormatter=this.numberFormatter;W.axisGridManager=new A(da,f);W.tooltext=f.plottooltext;W.trendLineToolText=f.trendlinetooltext;Q.is3D=q=W.is3d=/3d$/.test(da);Q.isBar=ha=W.isBar=this.isBar;w=/^pie/.test(da);M=1==f.useroundedges;sa=q?wb.chart3D:wb.chart2D;Q.events.click=n.plotOptions.series.point.events.click=this.linkClickFN;Q.defaultSeriesType=da;$=0<f.palette&&
6>f.palette?f.palette:a(this.paletteIndex,1);$-=1;Q.paletteIndex=$;Q.usePerPointLabelColor=f.colorlabelsfromplot==Ka;Q.syncLabelWithAnchor=a(f.synclabelwithanchoronhover,1);Q.useRoundEdges=M&&!q&&!this.distributedColumns&&"pie"!==this.defaultSeriesType;void 0!==b(f.clickurl)&&(Q.link=f.clickurl,Q.style.cursor="pointer",n.plotOptions.series.point.events.click=function(){Q.events.click.call({link:f.clickurl})});Oa=b(f.basefont,"Verdana,sans");aa=fa(f.basefontsize,10);hb=b(f.basefontcolor,m.getColor(sa.baseFontColor));
mb=b(f.outcnvbasefont,Oa);Zb=fa(f.outcnvbasefontsize,aa);Sb=Zb+Ca;V=b(f.outcnvbasefontcolor,hb).replace(/^#?([a-f0-9]+)/ig,"#$1");Nb=aa;aa+=Ca;hb=hb.replace(/^#?([a-f0-9]+)/ig,"#$1");W.trendStyle=W.outCanvasStyle={fontFamily:mb,color:V,fontSize:Sb};Kb=I(W.trendStyle);W.inCanvasStyle={fontFamily:Oa,fontSize:aa,color:hb};hc=I(W.inCanvasStyle);W.divlineStyle={fontFamily:Oa,fontSize:aa,color:hb,lineHeight:hc};K.labels.style={fontFamily:b(f.labelfont,mb),fontSize:a(f.labelfontsize,Zb)+Ca,color:b(f.labelfontcolor,
V)};K.labels.style.lineHeight=I(K.labels.style);K.steppedLabels.style={fontFamily:mb,fontSize:Sb,lineHeight:Kb,color:V,visibility:"hidden"};n.yAxis[0].labels.style={fontFamily:mb,fontSize:Sb,lineHeight:Kb,color:V};n.yAxis[1].labels.style={fontFamily:mb,fontSize:Sb,lineHeight:Kb,color:V};jb=b(f.legenditemfont,mb);ma=fa(f.legenditemfontsize,Zb);Ob=b(f.legenditemfontcolor,V).replace(/^#?([a-f0-9]+)/ig,"#$1");ga=na[a(f.legenditemfontbold,0)]||"";Z=fa(f.legendcaptionfontsize,Zb)+Ca;ma+=Ca;n.legend.itemStyle=
{fontFamily:jb,fontSize:ma,color:Ob,fontWeight:ga};I(n.legend.itemStyle);n.legend.itemHiddenStyle={fontFamily:jb,fontSize:ma,color:b(f.legenditemhiddencolor,"cccccc").replace(/^#?([a-f0-9]+)/ig,"#$1"),fontWeight:ga};I(n.legend.itemHiddenStyle);n.legend.itemHoverStyle={color:b(f.legenditemhoverfontcolor,Ob).replace(/^#?([a-f0-9]+)/ig,"#$1")};n.legend.title.style={fontFamily:b(f.legendcaptionfont,jb),fontSize:Z,color:b(f.legendcaptionfontcolor,V).replace(/^#?([a-f0-9]+)/ig,"#$1"),fontWeight:na[a(f.legendcaptionfontbold,
1)]||""};I(n.legend.title.style);n.legend.title.align=$a[f.legendcaptionalignment&&f.legendcaptionalignment.toLowerCase()||Pa]||$a.center;Fa=(Fa=l(f.valuebordercolor,p))?C(Fa,a(f.valueborderalpha,f.valuealpha,100)):p;n.plotOptions.series.dataLabels.style={fontFamily:b(f.valuefont,Oa),fontSize:b(f.valuefontsize,parseInt(aa,10))+Ca,lineHeight:hc,color:C(b(f.valuefontcolor,hb),a(f.valuefontalpha,f.valuealpha,100)),fontWeight:a(f.valuefontbold)?"bold":"normal",fontStyle:a(f.valuefontitalic)?"italic":
"normal",border:Fa||f.valuebgcolor?a(f.valueborderthickness,1)+"px solid":"",borderColor:Fa,borderThickness:a(f.valueborderthickness,1),borderPadding:a(f.valueborderpadding,2),borderRadius:a(f.valueborderradius,0),backgroundColor:f.valuebgcolor?C(f.valuebgcolor,a(f.valuebgalpha,f.valuealpha,100)):p,borderDash:a(f.valueborderdashed,0)?e(a(f.valueborderdashlen,4),a(f.valueborderdashgap,2),a(f.valueborderthickness,1)):void 0};I(n.plotOptions.series.dataLabels.style);n.plotOptions.series.dataLabels.color=
n.plotOptions.series.dataLabels.style.color;n.tooltip.style={fontFamily:Oa,fontSize:aa,lineHeight:hc,color:hb};n.title.style={fontFamily:b(f.captionfont,mb),color:b(f.captionfontcolor,V).replace(/^#?([a-f0-9]+)/ig,"#$1"),fontSize:a(f.captionfontsize,Zb+3)+Ca,fontWeight:0===a(f.captionfontbold)?"normal":"bold"};n.title.align=b(f.captionalignment,Pa);n.title.isOnTop=a(f.captionontop,1);n.title.alignWithCanvas=a(f.aligncaptionwithcanvas,this.alignCaptionWithCanvas,1);n.title.horizontalPadding=a(f.captionhorizontalpadding,
n.title.alignWithCanvas?0:15);I(n.title.style);n.subtitle.style={fontFamily:b(f.subcaptionfont,f.captionfont,mb),color:b(f.subcaptionfontcolor,f.captionfontcolor,V).replace(/^#?([a-f0-9]+)/ig,"#$1"),fontSize:a(f.subcaptionfontsize,a(U(a(f.captionfontsize)-3,-1),Zb)+a(this.subTitleFontSizeExtender,1))+Ca,fontWeight:0===a(f.subcaptionfontbold,this.subTitleFontWeight,f.captionfontbold)?"normal":"bold"};n.subtitle.align=n.title.align;n.subtitle.isOnTop=n.title.isOnTop;n.subtitle.alignWithCanvas=n.title.alignWithCanvas;
n.subtitle.horizontalPadding=n.title.horizontalPadding;I(n.subtitle.style);Fa=(Fa=l(f.xaxisnamebordercolor,p))?C(Fa,a(f.xaxisnameborderalpha,f.xaxisnamealpha,100)):p;K.title.style={fontFamily:b(f.xaxisnamefont,mb),fontSize:b(f.xaxisnamefontsize,parseInt(Sb,10))+Ca,color:C(b(f.xaxisnamefontcolor,V),a(f.xaxisnamefontalpha,f.xaxisnamealpha,100)),fontWeight:a(f.xaxisnamefontbold,1)?"bold":"normal",fontStyle:a(f.xaxisnamefontitalic)?"italic":"normal",border:Fa||f.xaxisnamebgcolor?a(f.xaxisnameborderthickness,
1)+"px solid":void 0,borderColor:Fa,borderThickness:a(f.xaxisnameborderthickness,1),borderPadding:a(f.xaxisnameborderpadding,2),borderRadius:a(f.xaxisnameborderradius,0),backgroundColor:f.xaxisnamebgcolor?C(f.xaxisnamebgcolor,a(f.xaxisnamebgalpha,f.xaxisnamealpha,100)):p,borderDash:a(f.xaxisnameborderdashed,0)?e(a(f.xaxisnameborderdashlen,4),a(f.xaxisnameborderdashgap,2),a(f.xaxisnameborderthickness,1)):void 0};I(K.title.style);Fa=(Fa=b(f.pyaxisnamebordercolor,f.yaxisnamebordercolor,p))?C(Fa,a(f.pyaxisnameborderalpha,
f.yaxisnameborderalpha,f.pyaxisnamealpha,f.yaxisnamealpha,100)):p;n.yAxis[0].title.style={fontFamily:b(f.pyaxisnamefont,f.yaxisnamefont,mb),fontSize:b(f.pyaxisnamefontsize,f.yaxisnamefontsize,parseInt(Sb,10))+Ca,color:C(b(f.pyaxisnamefontcolor,f.yaxisnamefontcolor,V),a(f.pyaxisnamefontalpha,f.yaxisnamefontalpha,f.pyaxisnamealpha,f.yaxisnamealpha,100)),fontWeight:a(f.pyaxisnamefontbold,f.yaxisnamefontbold,1)?"bold":"normal",fontStyle:a(f.pyaxisnamefontitalic,f.yaxisnamefontitalic)?"italic":"normal",
border:Fa||f.pyaxisnamebgcolor||f.yaxisnamebgcolor?a(f.pyaxisnameborderthickness,f.yaxisnameborderthickness,1)+"px solid":void 0,borderColor:Fa,borderThickness:a(f.pyaxisnameborderthickness,f.yaxisnameborderthickness,1),borderPadding:a(f.pyaxisnameborderpadding,f.yaxisnameborderpadding,2),borderRadius:a(f.pyaxisnameborderradius,f.yaxisnameborderradius,0),backgroundColor:f.pyaxisnamebgcolor||f.yaxisnamebgcolor?C(b(f.pyaxisnamebgcolor,f.yaxisnamebgcolor),a(f.pyaxisnamebgalpha,f.yaxisnamebgalpha,f.pyaxisnamealpha,
f.yaxisnamealpha,100)):p,borderDash:a(f.pyaxisnameborderdashed,f.yaxisnameborderdashed,0)?e(a(f.pyaxisnameborderdashlen,f.yaxisnameborderdashlen,4),a(f.pyaxisnameborderdashgap,f.yaxisnameborderdashgap,2),a(f.pyaxisnameborderthickness,f.yaxisnameborderthickness,1)):void 0};I(n.yAxis[0].title.style);n.yAxis[1].title.style={fontFamily:mb,color:V,fontSize:Sb,lineHeight:void 0,fontWeight:"bold"};Fa=(Fa=b(f.syaxisnamebordercolor,f.yaxisnamebordercolor,p))?C(Fa,a(f.syaxisnameborderalpha,f.yaxisnameborderalpha,
f.syaxisnamealpha,f.yaxisnamealpha,100)):p;n.yAxis[1].title.style={fontFamily:b(f.syaxisnamefont,f.yaxisnamefont,mb),fontSize:b(f.syaxisnamefontsize,f.yaxisnamefontsize,parseInt(Sb,10))+Ca,color:C(b(f.syaxisnamefontcolor,f.yaxisnamefontcolor,V),a(f.syaxisnamefontalpha,f.yaxisnamefontalpha,f.syaxisnamealpha,f.yaxisnamealpha,100)),fontWeight:a(f.syaxisnamefontbold,f.yaxisnamefontbold,1)?"bold":"normal",fontStyle:a(f.syaxisnamefontitalic,f.yaxisnamefontitalic)?"italic":"normal",border:Fa||f.syaxisnamebgcolor||
f.yaxisnamebgcolor?a(f.syaxisnameborderthickness,f.yaxisnameborderthickness,1)+"px solid":void 0,borderColor:Fa,borderThickness:a(f.syaxisnameborderthickness,f.yaxisnameborderthickness,1),borderPadding:a(f.syaxisnameborderpadding,f.yaxisnameborderpadding,2),borderRadius:a(f.syaxisnameborderradius,f.yaxisnameborderradius,0),backgroundColor:f.syaxisnamebgcolor||f.yaxisnamebgcolor?C(b(f.syaxisnamebgcolor,f.yaxisnamebgcolor),a(f.syaxisnamebgalpha,f.yaxisnamebgalpha,f.syaxisnamealpha,f.yaxisnamealpha,
100)):p,borderDash:a(f.syaxisnameborderdashed,f.yaxisnameborderdashed,0)?e(a(f.syaxisnameborderdashlen,f.yaxisnameborderdashlen,4),a(f.syaxisnameborderdashgap,f.yaxisnameborderdashgap,2),a(f.syaxisnameborderthickness,f.yaxisnameborderthickness,1)):void 0};I(n.yAxis[1].title.style);Q.overlapColumns=a(f[ha&&"overlapbars"||"overlapcolumns"],q?0:1);n.orphanStyles={defaultStyle:{style:g({},W.inCanvasStyle)},connectorlabels:{style:g({},n.plotOptions.series.dataLabels)},vyaxisname:{style:g({},n.yAxis[0].title.style)}};
n.plotOptions.series.dataLabels.tlLabelStyle={fontFamily:G(f.tlfont,Oa),color:L(G(f.tlfontcolor,hb)),fontSize:fa(f.tlfontsize,Nb)+"px"};I(n.plotOptions.series.dataLabels.tlLabelStyle);n.plotOptions.series.dataLabels.trLabelStyle={fontFamily:G(f.trfont,Oa),color:L(G(f.trfontcolor,hb)),fontSize:fa(f.trfontsize,Nb)+"px"};I(n.plotOptions.series.dataLabels.trLabelStyle);n.plotOptions.series.dataLabels.blLabelStyle={fontFamily:G(f.blfont,Oa),color:L(G(f.blfontcolor,hb)),fontSize:fa(f.blfontsize,Nb)+"px"};
I(n.plotOptions.series.dataLabels.blLabelStyle);n.plotOptions.series.dataLabels.brLabelStyle={fontFamily:G(f.brfont,Oa),color:L(G(f.brfontcolor,hb)),fontSize:fa(f.brfontsize,Nb)+"px"};I(n.plotOptions.series.dataLabels.brLabelStyle);this.parseStyles(n);delete n.xAxis.labels.style.backgroundColor;delete n.xAxis.labels.style.borderColor;delete n.yAxis[0].labels.style.backgroundColor;delete n.yAxis[0].labels.style.borderColor;delete n.yAxis[1].labels.style.backgroundColor;delete n.yAxis[1].labels.style.borderColor;
W.showTooltip=a(f.showtooltip,this.showtooltip,1);W.tooltipSepChar=b(f.tooltipsepchar,this.tooltipsepchar,yb);W.showValues=a(f.showvalues,this.showValues,1);W.seriesNameInToolTip=a(f.seriesnameintooltip,1);W.showVLines=a(f.showvlines,1);W.showVLinesOnTop=a(f.showvlinesontop,0);W.showVLineLabels=a(f.showvlinelabels,this.showVLineLabels,1);W.showVLineLabelBorder=a(f.showvlinelabelborder,1);W.rotateVLineLabels=a(f.rotatevlinelabels,0);W.vLineColor=b(f.vlinecolor,"333333");W.vLineLabelColor=b(f.vlinelabelcolor);
W.vLineThickness=b(f.vlinethickness,1);W.vLineAlpha=a(f.vlinealpha,80);W.vLineLabelBgColor=b(f.vlinelabelbgcolor,"ffffff");W.vLineLabelBgAlpha=a(f.vlinelabelbgalpha,q?50:100);W.trendlineColor=b(f.trendlinecolor,"333333");W.trendlineThickness=b(f.trendlinethickness,1);W.trendlineAlpha=a(f.trendlinealpha);W.showTrendlinesOnTop=b(f.showtrendlinesontop,0);W.trendlineValuesOnOpp=b(f.trendlinevaluesonopp,f.trendlinevaluesonright,0);W.trendlinesAreDashed=a(f.trendlinesaredashed,0);W.trendlinesDashLen=a(f.trendlinedashlen,
5);W.trendlinesDashGap=a(f.trendlinedashgap,2);W.showTrendlines=a(f.showtrendlines,1);W.showTrendlineLabels=a(f.showtrendlinelabels,this.showTrendlineLabels,1);W.flatScrollBars=a(f.flatscrollbars,0);W.scrollBar3DLighting=a(f.scrollbar3dlighting,1);Q.anchorTrackingRadius=a(f.anchortrackingradius,Na?ja:s);n.plotOptions.series.connectNullData=a(f.connectnulldata,0);Q.backgroundColor={FCcolor:{color:b(f.bgcolor,m.getColor(sa.bgColor)),alpha:b(f.bgalpha,m.getColor(sa.bgAlpha)),angle:b(f.bgangle,m.getColor(sa.bgAngle)),
ratio:b(f.bgratio,m.getColor(sa.bgRatio))}};Q.rotateValues=a(f.rotatevalues,0);Q.placeValuesInside=a(f.placevaluesinside,0);Q.valuePosition=b(f.valueposition,"auto");Q.valuePadding=a(f.valuepadding,2);Q.managePlotOverflow=a(f.manageplotoverflow,1);Q.borderColor=C(b(f.bordercolor,q?"#666666":m.getColor("borderColor")),b(f.borderalpha,q?"100":m.getColor("borderAlpha")));H=a(f.showborder,q?0:1);Q.borderWidth=H?a(f.borderthickness,1):0;Q.borderRadius=a(f.borderradius,0);Q.borderDashStyle=a(f.borderdashed,
0)?e(a(f.borderdashlen,4),a(f.borderdashgap,2),Q.borderWidth):void 0;Q.plotBorderColor=C(b(f.canvasbordercolor,m.getColor("canvasBorderColor")),b(f.canvasborderalpha,m.getColor("canvasBorderAlpha")));"0"!==f.showcanvasborder&&(J=Boolean(b(f.canvasborderthickness,M?0:1)),"1"!==f.showaxislines&&"1"!==f.showxaxisline&&"1"!==f.showyaxisline&&"1"!==f.showsyaxisline||"1"===f.showcanvasborder||(J=0));Q.plotBorderWidth=q||!J?0:a(f.canvasborderthickness,this.canvasborderthickness,Q.useRoundEdges?1:2);Q.bgSWF=
b(f.bgimage,f.bgswf);Q.bgSWFAlpha=a(f.bgimagealpha,f.bgswfalpha,100);ea=b(f.bgimagedisplaymode,"none").toLowerCase();ta=G(f.bgimagevalign,p).toLowerCase();oa=G(f.bgimagehalign,p).toLowerCase();"tile"==ea||"fill"==ea||"fit"==ea?(ta!=Ga&&"middle"!=ta&&ta!=qa&&(ta="middle"),oa!=ya&&"middle"!=oa&&oa!=za&&(oa="middle")):(ta!=Ga&&"middle"!=ta&&ta!=qa&&(ta=Ga),oa!=ya&&"middle"!=oa&&oa!=za&&(oa=ya));Q.bgImageDisplayMode=ea;Q.bgImageVAlign=ta;Q.bgImageHAlign=oa;Q.bgImageScale=a(f.bgimagescale,100);Q.logoURL=
G(f.logourl);Q.logoPosition=b(f.logoposition,"tl").toLowerCase();Q.logoAlpha=a(f.logoalpha,100);Q.logoLink=G(f.logolink);Q.logoScale=a(f.logoscale,100);Q.logoLeftMargin=a(f.logoleftmargin,0);Q.logoTopMargin=a(f.logotopmargin,0);Ba=Q.toolbar={button:{}};la=Ba.button;la.scale=a(f.toolbarbuttonscale,1.15);la.width=a(f.toolbarbuttonwidth,15);la.height=a(f.toolbarbuttonheight,15);la.radius=a(f.toolbarbuttonradius,2);la.spacing=a(f.toolbarbuttonspacing,5);la.fill=C(b(f.toolbarbuttoncolor,"ffffff"));la.labelFill=
C(b(f.toolbarlabelcolor,"cccccc"));la.symbolFill=C(b(f.toolbarsymbolcolor,"ffffff"));la.hoverFill=C(b(f.toolbarbuttonhovercolor,"ffffff"));la.stroke=C(b(f.toolbarbuttonbordercolor,"bbbbbb"));la.symbolStroke=C(b(f.toolbarsymbolbordercolor,"9a9a9a"));la.strokeWidth=a(f.toolbarbuttonborderthickness,1);la.symbolStrokeWidth=a(f.toolbarsymbolborderthickness,1);pa=la.symbolPadding=a(f.toolbarsymbolpadding,5);la.symbolHPadding=a(f.toolbarsymbolhpadding,pa);la.symbolVPadding=a(f.toolbarsymbolvpadding,pa);
xa=Ba.position=b(f.toolbarposition,"tr").toLowerCase();switch(xa){case "tr":case "rt":case "top right":case "right top":xa="tr";break;case "br":case "rb":case "bottom right":case "right bottom":xa="br";break;case "tl":case "lt":case "top left":case "left top":xa="tl";break;case "bl":case "lb":case "bottom left":case "left bottom":xa="bl";break;default:xa="tr"}Ra=Ba.hAlign="left"===(p+f.toolbarhalign).toLowerCase()?"l":xa.charAt(1);ob=Ba.vAlign="bottom"===(p+f.toolbarvalign).toLowerCase()?"b":xa.charAt(0);
Ba.hDirection=a(f.toolbarhdirection,"r"===Ra?-1:1);Ba.vDirection=a(f.toolbarvdirection,"b"===ob?-1:1);Ba.vMargin=a(f.toolbarvmargin,6);Ba.hMargin=a(f.toolbarhmargin,10);Ba.x=a(f.toolbarx,"l"===Ra?0:c);Ba.y=a(f.toolbary,"t"===ob?0:k);eb=b(f.divlinecolor,m.getColor(sa.divLineColor));Za=b(f.divlinealpha,q?m.getColor("divLineAlpha3D"):m.getColor("divLineAlpha"));tb=a(f.divlinethickness,1);ib=Boolean(a(f.divlinedashed,f.divlineisdashed,this.divLineIsDashed,0));Cb=a(f.divlinedashlen,4);Vb=a(f.divlinedashgap,
2);n.yAxis[0].gridLineColor=C(eb,Za);n.yAxis[0].gridLineWidth=tb;n.yAxis[0].gridLineDashStyle=ib?e(Cb,Vb,tb):"none";n.yAxis[0].alternateGridColor=ha?C(b(f.alternatevgridcolor,m.getColor("altVGridColor")),1===a(f.showalternatevgridcolor,1)?b(f.alternatevgridalpha,m.getColor("altVGridAlpha")):Ea):C(b(f.alternatehgridcolor,m.getColor("altHGridColor")),"0"===f.showalternatehgridcolor?0:b(f.alternatehgridalpha,m.getColor("altHGridAlpha")));mc=a(f.vdivlinethickness,1);sc=Boolean(a(f.vdivlinedashed,f.vdivlineisdashed,
0));wc=a(f.vdivlinedashlen,4);qc=a(f.vdivlinedashgap,2);K.gridLineColor=C(b(f.vdivlinecolor,m.getColor(sa.divLineColor)),b(f.vdivlinealpha,m.getColor("divLineAlpha")));K.gridLineWidth=mc;K.gridLineDashStyle=sc?e(wc,qc,mc):"none";K.alternateGridColor=C(b(f.alternatevgridcolor,m.getColor("altVGridColor")),"1"===f.showalternatehgridcolor?b(f.alternatevgridalpha,m.getColor("altVGridAlpha")):0);Ta=b(f.canvasbgcolor,m.getColor(sa.canvasBgColor));Wb=b(f.canvasbgalpha,m.getColor("canvasBgAlpha"));b(f.showcanvasbg,
Ka)==Ea&&(Wb="0");n.plotOptions.series.shadow=a(f.showshadow,f.showcolumnshadow,this.defaultPlotShadow,m.getColor("showShadow"));this.inversed&&(n.yAxis[0].reversed=!0,n.yAxis[1].reversed=!0);this.isStacked&&(this.distributedColumns?(W.showStackTotal=Boolean(a(f.showsum,1)),S=a(f.usepercentdistribution,1),zb=a(f.showpercentvalues,0),sb=a(f.showpercentintooltip,S,0),W.showXAxisPercentValues=a(f.showxaxispercentvalues,1)):(W.showStackTotal=Boolean(a(this.showSum,f.showsum,0)),S=a(this.stack100percent,
f.stack100percent,0),zb=a(f.showpercentvalues,S,0),sb=a(f.showpercentintooltip,zb)),W.showPercentValues=zb,W.showPercentInToolTip=sb,S?(W.isValueAbs=!0,ia[da].stacking="percent",W[0].stacking100Percent=!0):ia[da].stacking="normal");this.isDual&&("0"===f.primaryaxisonleft&&(n.yAxis[0].opposite=!0,n.yAxis[1].opposite=!1),n.yAxis[0].showAlways=!0,n.yAxis[1].showAlways=!0);Q.useRoundEdges&&(n.plotOptions.series.shadow=a(f.showshadow,f.showcolumnshadow,1),n.plotOptions.series.borderRadius=1,n.tooltip.style.borderRadius=
"2px",Q.plotBorderRadius=3,J||(Q.plotBorderWidth=0),Q.plotShadow=n.plotOptions.series.shadow?{enabled:!0,opacity:Wb/100}:0);1===a(f.use3dlighting,1)&&(n.legend.lighting3d=!0);n.plotOptions.series.userMaxColWidth=ha?f.maxbarheight:a(f.maxcolwidth,this.maxColWidth);n.plotOptions.series.maxColWidth=ba(a(n.plotOptions.series.userMaxColWidth,50))||1;n.title.text=N(f.caption);n.subtitle.text=N(f.subcaption);0===a(f.showtooltip,this.showtooltip)&&(n.tooltip.enabled=!1);Qa=n.tooltip.style;Qa.backgroundColor=
C(b(Qa.backgroundColor,f.tooltipbgcolor,m.getColor("toolTipBgColor")),b(f.tooltipbgalpha,100));Qa.borderColor=C(b(Qa.borderColor,f.tooltipbordercolor,m.getColor("toolTipBorderColor")),b(f.tooltipborderalpha,100));n.tooltip.shadow=a(f.showtooltipshadow,f.showshadow,1)?{enabled:!0,opacity:U(a(f.tooltipbgalpha,100),a(f.tooltipborderalpha,100))/100}:!1;n.tooltip.constrain=a(f.constraintooltip,1);Qa.borderWidth=a(f.tooltipborderthickness,1)+"px";f.tooltipborderradius&&(Qa.borderRadius=a(f.tooltipborderradius,
1)+"px");Qa.padding=a(f.tooltippadding,this.tooltippadding,3)+"px";f.tooltipcolor&&(Qa.color=L(f.tooltipcolor));W.userPlotSpacePercent=n.plotOptions.series.userPlotSpacePercent=f.plotspacepercent;Eb=a(f.plotspacepercent,20)%100;W.plotSpacePercent=n.plotOptions.series.groupPadding=Eb/200;q&&!w?(Q.series2D3Dshift="mscombi3d"===h?!0:Boolean(a(f.use3dlineshift,0)),Q.canvasBaseColor3D=b(f.canvasbasecolor,m.getColor("canvasBaseColor3D")),Q.canvasBaseDepth=a(f.canvasbasedepth,10),Q.canvasBgDepth=a(f.canvasbgdepth,
3),Q.showCanvasBg=Boolean(a(f.showcanvasbg,1)),Q.showCanvasBase=Boolean(a(f.showcanvasbase,1)),ha?(Q.xDepth=5,Q.yDepth=5,Q.showCanvasBg&&(W.marginTopExtraSpace+=Q.canvasBgDepth),W.marginLeftExtraSpace+=Q.yDepth+(Q.showCanvasBase?Q.canvasBaseDepth:0),W.marginBottomExtraSpace+=5):(Q.xDepth=10,Q.yDepth=10,Q.showCanvasBg&&(W.marginRightExtraSpace+=Q.canvasBgDepth),W.marginBottomExtraSpace+=Q.yDepth+(Q.showCanvasBase?Q.canvasBaseDepth:0)),Ta=Ta.split(Da)[0],Wb=Wb.split(Da)[0],Q.use3DLighting=Boolean(a(f.use3dlighting,
1)),Q.plotBackgroundColor=Q.use3DLighting?{FCcolor:{color:R(Ta,85)+Da+Y(Ta,55),alpha:Wb+Da+Wb,ratio:db,angle:E(c-(Q.marginLeft+Q.marginRight),k-(Q.marginTop+Q.marginBottom),1)}}:C(Ta,Wb),Q.canvasBgColor=C(R(Ta,80),Wb),t=b(f.zeroplanecolor,f.divlinecolor,m.getColor(sa.divLineColor)),T=b(f.zeroplanealpha,f.divlinealpha,m.getColor("divLineAlpha")),Q.zeroPlaneColor=C(t,T),Q.zeroPlaneBorderColor=C(b(f.zeroplanebordercolor,t),a(f.zeroplaneshowborder,1)?T:0),Q.zeroPlaneShowBorder=a(f.zeroplaneshowborder,
1)):(Q.is3D=!1,Q.plotBackgroundColor={FCcolor:{color:Ta,alpha:Wb,angle:b(f.canvasbgangle,m.getColor("canvasBgAngle")),ratio:b(f.canvasbgratio,m.getColor("canvasBgRatio"))}});this.parseExportOptions(n);this.parseHoverEffectOptions(Q);this.preSeriesAddition&&this.preSeriesAddition(n,F,c,k);this.series&&this.series(F,n,h,c,k);this.postSeriesAddition(n,F,c,k);this.spaceManager(n,F,c,k);this.postSpaceManager&&this.postSpaceManager(n,F,c,k);ub=a(f.drawquadrant,0);W.isXYPlot&&ub&&(Xb=K.min,Aa=K.max,nb=n.yAxis[0].min,
Ya=n.yAxis[0].max,Hb=a(f.quadrantxval,(Xb+Aa)/2),ab=a(f.quadrantyval,(nb+Ya)/2),ab>=nb&&ab<=Ya&&Hb>=Xb&&Hb<=Aa&&(vb=C(b(f.quadrantlinecolor,Q.plotBorderColor),b(f.quadrantlinealpha,Xa)),kb=a(f.quadrantlinethickness,Q.plotBorderWidth),Fb=a(f.quadrantlinedashed,f.quadrantlineisdashed,0),Jb=a(f.quadrantlinedashLen,4),Ia=a(f.quadrantlinedashgap,2),Yb=G(f.quadrantlabeltl,p),Bc=G(f.quadrantlabeltr,p),Qb=G(f.quadrantlabelbl,p),Rb=G(f.quadrantlabelbr,p),dc=a(f.quadrantlabelpadding,3),rc=Fb?e(Jb,Ia,kb):"none",
K.plotLines.push({color:vb,value:Hb,width:kb,dashStyle:rc,zIndex:3}),n.yAxis[0].plotLines.push({color:vb,value:ab,width:kb,dashStyle:rc,zIndex:3}),nc=c-Q.marginRight-Q.marginLeft,Tb=k-Q.marginTop-Q.marginBottom,lb=W.inCanvasStyle,wa=nc/(Aa-Xb)*(Hb-Xb),Lb=nc-wa,Ha=Tb/(Ya-nb)*(ab-nb),Jc=Tb-Ha,wa-=dc,Lb-=dc,Jc-=dc,Ha-=dc,Ab=dc+Ca,Bb=Tb-dc+Ca,Ub=dc+Ca,fc=nc-dc+Ca,v.setStyle(lb),0<Jc&&(Yb!==p&&0<wa&&(Mb=v.getSmartText(Yb,wa,Jc),n.labels.items.push({html:Mb.text,zIndex:3,vAlign:Ga,style:{left:Ub,top:Ab,
fontSize:lb.fontSize,lineHeight:lb.lineHeight,fontFamily:lb.fontFamily,color:lb.color}})),Bc!==p&&0<Lb&&(Mb=v.getSmartText(Bc,Lb,Jc),n.labels.items.push({html:Mb.text,textAlign:za,vAlign:Ga,zIndex:3,style:{left:fc,top:Ab,fontSize:lb.fontSize,lineHeight:lb.lineHeight,fontFamily:lb.fontFamily,color:lb.color}}))),0<Ha&&(Qb!==p&&0<wa&&(Mb=v.getSmartText(Qb,wa,Ha),n.labels.items.push({html:Mb.text,vAlign:qa,zIndex:3,style:{left:Ub,top:Bb,fontSize:lb.fontSize,lineHeight:lb.lineHeight,fontFamily:lb.fontFamily,
color:lb.color}})),Rb!==p&&0<Lb&&(Mb=v.getSmartText(Rb,Lb,Ha),n.labels.items.push({html:Mb.text,textAlign:za,vAlign:qa,zIndex:3,style:{left:fc,top:Bb,fontSize:lb.fontSize,lineHeight:lb.lineHeight,fontFamily:lb.fontFamily,color:lb.color}})))));if(this.hasVDivLine&&(rb=a(f.showvdivlines,0),ec=a(f.numvdivlines,0)+1,rb&&(ec=W.x.catCount-1),1<ec)){cb=K.min;kc=W.x.catCount-1;xb=K.max;Gb=kc/ec;Qc=!0;Vc=cb;K.scroll&&!isNaN(K.scroll.viewPortMax)&&(xb=K.scroll.viewPortMax);jc=b(f.vdivlinecolor,eb);ld=a(f.vdivlinealpha,
Za);mc=a(f.vdivlinethickness,tb);sc=a(f.vdivlinedashed,f.vdivlineisdashed,ib);wc=a(f.vdivlinedashlen,Cb);qc=a(f.vdivlinedashgap,Vb);(lc=a(f.showalternatevgridcolor,0))&&(hd=C(b(f.alternatevgridcolor,m.getColor("altVGridColor")),b(f.alternatevgridalpha,m.getColor("altVGridAlpha"))));for(Ua=Gb;Ua<kc;Ua+=Gb,Qc=!Qc)Qc&&lc&&K.plotBands.push({isNumVDIV:!0,color:hd,from:Vc,to:Ua,zIndex:1}),K.plotLines.push({isNumVDIV:!0,width:mc,color:C(jc,ld),dashStyle:sc?e(wc,qc,mc):"none",value:Ua,zIndex:1}),Vc=Ua;Qc&&
lc&&K.plotBands.push({isNumVDIV:!0,color:hd,from:Vc,to:xb,zIndex:1})}Wa=Q.marginTop;ca=Q.marginBottom;Ja=Q.marginLeft;P=Q.marginRight;ra.canvasstartx=Ja;ra.canvasstarty=Wa;ra.canvasendx=c-P;ra.canvasendy=k-ca;ra.canvaswidth=ra.canvasendx-ra.canvasstartx;ra.canvasheight=ra.canvasendy-ra.canvasstarty;n.legend&&n.legend.enabled&&"vertical"===n.legend.layout&&(ra.legendstarty=Wa+.5*(W.height-ca-Wa-ra.legendheight)+(n.legend.y||0),ra.legendendy=ra.legendstarty+ra.legendheight);q&&Q.xDepth>Q.marginLeft&&
(Q.marginLeft=Q.xDepth);D.console&&D.console.log&&D.FC_DEV_ENVIRONMENT&&console.log(n);return n},parseHoverEffectOptions:function(c){var d=this.dataObj.chart,e;c.showHoverEffect=d.showhovereffect;c.plotHoverEffect=a(d.plothovereffect,d.anchorhovereffect,c.showHoverEffect);e=c.plotHoverEffects={enabled:c.plotHoverEffect};e.highlight=a(d.highlightonhover,d.highlightplotonhover,c.plotHoverEffect);e.columnHighlight=a(e.highlight,d.highlightcolumnonhover,d.highlightbaronhover);e.anchorHighlight=a(e.highlight,
d.highlightanchoronhover);e.imageHighlight=a(e.highlight,d.highlightanchorimageonhover);e.anchorImageHoverAlpha=b(d.anchorimagehoveralpha);e.anchorImageHoverScale=b(d.anchorimagehoverscale);e.bubbleHighlight=a(e.highlight,d.highlightbubbleonhover);e.color=b(d.plotfillhovercolor,d.columnhovercolor,d.barhovercolor,d.bubblehovercolor);e.alpha=b(d.plotfillhoveralpha,d.columnhoveralpha,d.barhoveralpha,d.bubblehoveralpha);e.scale=b(d.plothoverscale,d.columnhoverscale,d.barhoverscale,d.bubblehoverscale);
e.gradientColor=d.plothovergradientcolor;e.ratio=d.plothoverratio;e.angle=d.plothoverangle;e.borderColor=d.plotborderhovercolor;e.borderAlpha=d.plotborderhoveralpha;e.borderThickness=d.plotborderhoverthickness;e.borderDashed=d.plotborderhoverdashed;e.borderDashGap=d.plotborderhoverdashgap;e.borderDashLen=d.plotborderhoverdashlen;e.shadow=d.plothovershadow;e.anchorScale=d.anchorhoverscale;e.anchorSides=d.anchorhoversides;e.anchorRadius=d.anchorhoverradius;e.anchorAlpha=d.anchorhoveralpha;e.anchorBgColor=
b(d.anchorbghovercolor,d.anchorhovercolor);e.anchorBgAlpha=d.anchorbghoveralpha;e.anchorBorderColor=d.anchorborderhovercolor;e.anchorBorderAlpha=d.anchorborderhoveralpha;e.anchorBorderThickness=d.anchorborderhoverthickness;e.anchorStartAngle=d.anchorhoverstartangle;e.anchorDip=a(d.anchorhoverdip);e.anchorAnimation=a(d.anchorhoveranimation,1);e.negativeColor=b(d.negativehovercolor,d.negativecolor);e.is3DBubble=a(d.is3donhover)},parseExportOptions:function(c){var d=this.chartInstance,e=this.dataObj.chart;
g(c.exporting,{enabled:a(e.exportenabled,0),bgcolor:d.jsVars.transparent||0===a(d.options.containerBackgroundOpacity,1)?p:d.options.containerBackgroundColor||"#ffffff",bgalpha:(d.jsVars.transparent?0:a(d.options.containerBackgroundOpacity,1))+p,exporttargetwindow:b(e.exporttargetwindow,Fb?"_blank":"_self"),exportaction:e.exportaction&&"save"===e.exportaction.toString().toLowerCase()&&"save"||"download",exportfilename:b(e.exportfilename,"FusionCharts"),exporthandler:b(e.html5exporthandler,e.exporthandler,
K),exportparameters:b(e.exportparameters,p),exportformat:b(e.exportformat,"PNG"),exportcallback:b(e.exportcallback,p),exportwithimages:a(e.exportwithimages,0),buttons:{printButton:{enabled:!!a(e.printshowbutton,e.showprintmenuitem,0)},exportButton:{enabled:!(!a(e.exportenabled,0)||!a(e.exportshowbutton,e.exportshowmenuitem,1))}}});var d=c.exporting,k;e=e.exportformats;c=q(c.exporting.exportaction);c={JPG:c+" as JPEG image",PNG:c+" as PNG image",PDF:c+" as PDF document",SVG:c+" as SVG vector image"};
var f,h,l;if(e){e=e.split(/\s*?\|\s*?/);for(l=0;l<e.length;l++)h=(f=e[l].split(/\s*?=\s*?/))&&f[0].toUpperCase()||p,f=f&&f[1]||p,c[h]&&(k||(k={}))&&(k[h]=f||c[h]);k=k||c}else k=c;d.exportformats=k},defaultSeriesType:p,paletteIndex:1,creditLabel:vb,titleSpaceManager:ib,placeLegendBlockBottom:ca,configureLegendOptions:Zb,placeLegendBlockRight:Oa,placeHorizontalAxis:Ja,placeVerticalAxis:hb,placeHorizontalCanvasMarginAdjustment:jb,placeVerticalCanvasMarginAdjustment:Nb,placeHorizontalXYSpaceManager:function(c,
d,e,k){var f=c[z],g,h,l,A,n=d.chart,p,m,E,s,q,t,T,S=c.chart,v=f.marginLeftExtraSpace,W=f.marginTopExtraSpace,w=f.marginBottomExtraSpace,da=f.marginRightExtraSpace;A=e-(v+da+S.marginRight+S.marginLeft);var C=k-(w+S.marginBottom+S.marginTop),ha=.3*A;e=.3*C;var Q=c.xAxis.showLine?c.xAxis.lineThickness:0;l=c.yAxis[0].showLine?c.yAxis[0].lineThickness:0;g=A-ha;k=C-e;p=b(n.legendposition,qa).toLowerCase();c.legend.enabled&&p===za&&(g-=this.placeLegendBlockRight(c,d,g/2,C));q=a(n.xaxisnamepadding,5);t=a(n.labelpadding,
4);T=b(n.rotatexaxisname,"ccw");T=T===Ea?"none":T;m=b(n.showplotborder,f.is3d?Ea:Ka)===Ka;m=f.plotBorderThickness=m?f.is3d?1:a(n.plotborderthickness,1):0;E=U(a(S.plotBorderWidth,1),0);!f.isDual&&S.marginRight<E&&void 0===n.chartrightmargin&&(h=E-S.marginRight,A>ha+h&&(S.marginRight=E,A-=h,ha=.3*A,g=A-ha));h=f.x;s=U(E,m/2);t<s&&(t=s);h.verticalAxisNamePadding=q;h.verticalAxisValuesPadding=t+Q;h.rotateVerticalAxisName=T;h.verticalAxisNameWidth=a(n.xaxisnamewidth);g-=hb(c.xAxis,h,c,d,C,g,!1,!1,A);c.xAxis.lineEndExtension=
l;g-=jb(c,d,g,c.xAxis);A=g+ha;c.legend.enabled&&p!==za&&(k-=this.placeLegendBlockBottom(c,d,A,k/2));k-=this.titleSpaceManager(c,d,A,k/2);h=f[0];h.horizontalAxisNamePadding=a(n.yaxisnamepadding,5);h.horizontalLabelPadding=U(a(n.yaxisvaluespadding,4))+l;h.labelDisplay="auto";h.staggerLines=a(n.staggerlines,2);h.slantLabels=a(n.slantlabels,0);h.horizontalLabelPadding=h.horizontalLabelPadding<E?E:h.horizontalLabelPadding;this.xAxisMinMaxSetter(c,d,A);l=c.xAxis;q=l.plotLines;g=k/(l.max-l.min);q&&q.length&&
(E=(q[0].value-l.min)*g,q=(l.max-q[q.length-1].value)*g,f.isBar&&(m>E&&(l.min-=(m-E)/(2*g)),m>q&&(l.max+=(m-q)/(2*g))));k-=this.placeHorizontalAxis(c.yAxis[0],h,c,d,A,k,ha);k-=Nb(c,d,k,c.yAxis[0]);mb(e+k,c,n,c.xAxis,f.x.lYLblIdx,!0);Sb(c,c.xAxis.title,k);c.legend.enabled&&p===za&&(c=c.legend,d=e+k,c.height>d&&(c.height=d,c.scroll.enabled=!0,d=(c.scroll.scrollBarWidth=10)+(c.scroll.scrollBarPadding=2),c.width+=d,S.marginRight+=d),c.y=20);S.marginLeft+=v;S.marginTop+=W;S.marginBottom+=w;S.marginRight+=
da},placeVerticalXYSpaceManager:function(c,d,e,k){var f=c[z],g,h,l=!0;g=0;var A=d.chart,n=!1,p,m,E,s,q=c.chart,t,T,S,v=f.marginLeftExtraSpace,W=f.marginTopExtraSpace,w=f.marginBottomExtraSpace,da=f.marginRightExtraSpace;s=e-(v+da+q.marginRight+q.marginLeft);var C=k-(w+q.marginBottom+q.marginTop),ha=.3*s;k=.3*C;var Q=s-ha;e=C-k;g=f.drawFullAreaBorder=a(A.drawfullareaborder,1);var D=b(A.legendposition,qa).toLowerCase();t=c.xAxis.showLine?c.xAxis.lineThickness:0;T=c.yAxis[0].showLine?c.yAxis[0].lineThickness:
0;S=f.isDual&&c.yAxis[1].showLine?c.yAxis[1].lineThickness:0;p=a(A.yaxisnamepadding,5);m=a(A.yaxisvaluespadding,A.labelypadding,4);h=b(A.showplotborder,f.is3d?Ea:Ka)===Ka;h=f.plotBorderThickness=h?f.is3d?1:a(A.plotborderthickness,1):0;E=U(a(q.plotBorderWidth,1),0);h=U(E,h/2);"area"!==this.defaultSeriesType||g||(h=E);m<E&&(m=E);!f.isDual&&q.marginRight<E&&void 0===A.chartrightmargin&&(g=E-c.chart.marginRight,s>ha+g&&(s-=g,ha=.3*s,Q=s-ha));c.legend.enabled&&D===za&&(Q-=this.placeLegendBlockRight(c,
d,Q/2,C));f.isDual&&(n=!0,g=f[1],l=c.yAxis[1].opposite,E=b(A.rotateyaxisname,l?"cw":"ccw"),E=E===Ea?"none":E,g.verticalAxisNamePadding=p,g.verticalAxisValuesPadding=m+S,g.rotateVerticalAxisName=E,g.verticalAxisNameWidth=a(A.syaxisnamewidth),Q-=hb(c.yAxis[1],g,c,d,C,Q/2,l,n));g=f[0];l=!l;E=b(A.rotateyaxisname,l?"cw":"ccw");E=E===Ea?"none":E;g.verticalAxisNamePadding=p;g.verticalAxisValuesPadding=m+T;g.rotateVerticalAxisName=E;g.verticalAxisNameWidth=a(n?A.pyaxisnamewidth:A.yaxisnamewidth);Q-=hb(c.yAxis[0],
g,c,d,C,Q,l,n,s);Q-=jb(c,d,Q,c.yAxis[0],c.yAxis[1]);l=Q+ha;c.legend.enabled&&D!==za&&(e-=this.placeLegendBlockBottom(c,d,l,e/2));e-=this.titleSpaceManager(c,d,l,e/2);g=f.x;g.horizontalAxisNamePadding=a(A.xaxisnamepadding,5);g.horizontalLabelPadding=a(A.labelpadding,A.labelxpadding,4)+t;g.labelDisplay=b(A.labeldisplay,"auto").toLowerCase();g.rotateLabels=a(A.rotatelabels,A.rotatexaxislabels,0);g.staggerLines=a(A.staggerlines,2);g.slantLabels=a(A.slantlabels,A.slantlabel,0);c.yAxis[0].opposite?(c.xAxis.lineEndExtension=
T,c.xAxis.lineStartExtension=S):(c.xAxis.lineEndExtension=S,c.xAxis.lineStartExtension=T);g.horizontalLabelPadding<h&&(g.horizontalLabelPadding=h);s={left:0,right:0};s=q.managePlotOverflow&&this.canvasPaddingModifiers&&this.calculateCanvasOverflow(c,!0)||s;t=s.left+s.right;T=.6*l;t>T&&(S=s.left/t,s.left-=S*(t-T),s.right-=(1-S)*(t-T));this.xAxisMinMaxSetter(c,d,l,s.left,s.right);e-=this.placeHorizontalAxis(c.xAxis,g,c,d,l,e,ha);e-=Nb(c,d,e,c.xAxis);c.title.alignWithCanvas||("left"===c.title.align&&
c.yAxis[0].title.text&&Kb(c,c.yAxis[0].title,k+e),"right"===c.title.align&&n&&c.yAxis[1].title.text&&Kb(c,c.yAxis[1].title,k+e));n&&(mb(k+e,c,A,c.yAxis[1],f[1].lYLblIdx),Sb(c,c.yAxis[1].title,k+e));mb(k+e,c,A,c.yAxis[0],f[0].lYLblIdx);Sb(c,c.yAxis[0].title,k+e);c.legend.enabled&&D===za&&(c=c.legend,d=k+e,c.height>d&&"gradient"!==c.type&&(c.height=d,c.scroll.enabled=!0,d=(c.scroll.scrollBarWidth=10)+(c.scroll.scrollBarPadding=2),c.width+=d,q.marginRight+=d));q.marginLeft+=v;q.marginTop+=W;q.marginBottom+=
w;q.marginRight+=da},placeVerticalAxisTitle:Sb,calculateCanvasOverflow:function(a,b){for(var c=this.canvasPaddingModifiers,d=a.chart,f=this.smartLabel,e=0,k=0,g=0,h=0,l=e=!1,A=!1,n=c&&c.length||0,m,E,s,q,t;n--;)switch(k=c[n],k){case "anchor":l=E=e=!0;break;case "anchorlabel":s=E=e=!0;break;case "errorbar":A=e=!0}if(e&&(n=(c=a.series)&&c.length||0,b))for(;n--;)m=c[n],E&&(e=m&&m.data||[],1<e.length&&(q=e[0],t=e[e.length-1],l&&(e=q&&q.marker&&q.marker.enabled&&(q.marker.radius||0)+(q.marker.lineWidth||
0)||0,k=t&&t.marker&&t.marker.enabled&&(t.marker.radius||0)+(t.marker.lineWidth||0)||0,g=U(e+2,g),h=U(k+2,h)),s&&(f.setStyle(a.plotOptions.series.dataLabels.style),d.rotateValues?(k=f.getOriSize(q&&q.displayValue||p),e=k.height/2,k=f.getOriSize(t&&t.displayValue||p),k=k.height/2):(k=f.getOriSize(q&&q.displayValue||p),e=k.width/2,k=f.getOriSize(t&&t.displayValue||p),k=k.width/2),g=U(e+2,g),h=U(k+2,h)))),A&&(k=e=m.errorBarWidth/2+m.errorBarThickness||0,g=U(e+2,g),h=U(k+2,h));return{left:g,right:h}},
spaceManager:function(){return this.placeVerticalXYSpaceManager.apply(this,arguments)},axisMinMaxSetter:function(b,c,d,e,f,k,g,h){d=c.stacking100Percent?da(99,1,100,0,f,k,g,h):da(a(c.max,d),a(c.min,e),d,e,f,k,g,h);b.min=Number(n(d.Min,10));b.max=Number(n(d.Max,10));b.tickInterval=Number(n(d.divGap,10));c.numdivlines=w.round((b.max-b.min)/b.tickInterval)-1;2>=d.Range/d.divGap&&(b.alternateGridColor=xa);this.highValue=c.max;this.lowValue=c.min;delete c.max;delete c.min},configurePlotLines:function(c,
d,e,k,f,g,h,l,A,m,E){var s=e.min,q=e.max,t=e.tickInterval,T=m?"xAxis":k.stacking100Percent?"percentValue":"yAxis",S=s,v=1,W=e.gridLineColor,w=e.gridLineWidth,da=e.gridLineDashStyle,ha=0>s&&0<q?!0:!1,Q=0===s,D=0===q,ia=0===a(k.showzeroplanevalue,c.showzeroplanevalue),H=!0,na,sa=1,J=0<a(c.numdivlines,0),G=d[z].axisGridManager,K=this.colorManager,ra=this.is3D,M=a(c.showaxislimitgridlines,this.showAxisLimitGridLines),ra=a(M,ra||d.chart.plotBorderWidth?0:1),Na=this.inversed;d=d.xAxis;E=a(E,A?1:0);delete e._altGrid;
delete e._lastValue;m&&!k.catOccupied&&(k.catOccupied={});!ha||m&&k.catOccupied[0]||(m?(H=a(c.showvzeroplane,1),na=a(c.showvzeroplanevalue,g),J=a(c.vzeroplanethickness,1),K=b(c.vzeroplanealpha,c.vdivlinealpha,K.getColor("divLineAlpha")),c=0<J?C(b(c.vzeroplanecolor,W),K):xa):(K=a(c.divlinealpha,K.getColor("divLineAlpha")),na=a(k.showzeroplanevalue,c.showzeroplanevalue,g),!1===this.defaultZeroPlaneHighlighted?(H=a(k.showzeroplane,c.showzeroplane,!(this.defaultZeroPlaneHidden&&!J)),J=w):(J=1===w?2:w,
sa=5,K=$(2*K,100)),J=a(k.zeroplanethickness,c.zeroplanethickness,J),K=b(k.zeroplanealpha,c.zeroplanealpha,K),c=0<J?C(b(k.zeroplanecolor,c.zeroplanecolor,W),K):xa),H&&(na=na?l[T](0,E):p,(sa=G.addAxisGridLine(e,0,na,J,da,c,sa,m))&&(sa.isZeroPlane=!0)),e.effectiveZeroPlaneThickness=H&&parseInt(K,10)&&J);m&&k.catOccupied[s]||(na=!f||Q&&ia?p:l[T](s,E),(sa=M||ra&&(Na||!d.showLine)?G.addAxisGridLine(e,s,na,w,da,W||xa,2,m):G.addAxisGridLine(e,s,na,.1,void 0,xa,2,m))&&(sa.isMinLabel=!0));0>=w&&(w=.1,W=xa);
for(s=Number(n(S+t,10));s<q;s=Number(n(s+t,10)),v+=1)ha&&0>S&&0<s&&!A&&(G.addAxisAltGrid(e,0),v+=1),0===s||m&&k.catOccupied[s]||(na=1===g&&0===v%h?l[T](s,E):p,G.addAxisGridLine(e,s,na,w,da,W,2,m)),S=s,A||G.addAxisAltGrid(e,s);A||G.addAxisAltGrid(e,q);0!==v%h||m&&k.catOccupied[q]||(na=!f||D&&ia?p:l[T](q,E),(sa=M||ra&&(!Na||!d.showLine)?G.addAxisGridLine(e,q,na,w,da,W||xa,2,m):G.addAxisGridLine(e,q,na,.1,da,xa,2,m))&&(sa.isMaxLabel=!0));this.realtimeEnabled&&(e.labels._enabled=e.labels.enabled,e._gridLineWidth=
e.gridLineWidth,e._alternateGridColor=e.alternateGridColor);e.labels.enabled=!1;e.gridLineWidth=0;e.alternateGridColor=xa;e.plotLines.sort(hc)},xAxisMinMaxSetter:function(b,d,e,k,f){var g=b[z],h=g.x,l=d.chart,A=h.min=a(h.min,0),n=h.max=a(h.max,h.catCount-1),m=0,p=0,E=b.chart.defaultSeriesType,s=/^(column|column3d|bar|bar3d|floatedcolumn|sparkwinloss|boxandwhisker2d|dragcolumn)$/.test(E),q=/^(line|area|spline|areaspline)$/.test(E),E=/^(scatter|bubble|candlestick|dragnode)$/.test(E),t=b.xAxis,T=t.scroll,
S=T&&T.enabled,v=a(l.canvaspadding),W=void 0!==v&&null!==v,w=Ba($(a(v,k,0),e/2-10)),v=Ba($(a(v,f,0),e/2-10)),da,C,ha,Q;h.adjustMinMax&&(da=a(l.setadaptivexmin,1),n=A=!da,C=a(this.numVDivLines,l.numvdivlines,4),ha=l.adjustvdiv!==Ea,Q=a(l.showxaxisvalues,l.showxaxisvalue,1),da=a(l.showvlimits,Q),Q=a(l.showvdivlinevalue,l.showvdivlinevalues,Q),this.axisMinMaxSetter(t,h,l.xaxismaxvalue,l.xaxisminvalue,A,n,C,ha),A=t.min,n=t.max,h.requiredAutoNumericLabels&&(C=a(parseInt(l.xaxisvaluesstep,10),1),this.configurePlotLines(l,
b,t,h,da,Q,1>C?1:C,g.numberFormatter,!1,!0)),t.plotLines.sort(hc));t.labels.enabled=!1;t.gridLineWidth=0;t.alternateGridColor=xa;!s&&!g.isScroll||g.hasNoColumn||W||void 0===k||null===k||void 0===f||null===f||(p=e/(n-A+1)*.5,w=0<p-k?0:w,v=0<p-f?0:v,m=0<p-k?.5:0,p=0<p-f?.5:0);s&&!g.hasNoColumn&&(p=m=.5);g.is3d&&(w+=a(b.chart.xDepth,0));b=(e-(w+v))/((S?T.vxLength:n)-A+(m+p));t.min=A-(m+w/b);t.max=n+(p+v/b);S&&(m=T.vxLength,b=t.max-t.min,T.viewPortMin=t.min,T.viewPortMax=t.max,T.scrollRatio=m/b,T.flatScrollBars=
g.flatScrollBars,T.scrollBar3DLighting=g.scrollBar3DLighting,t.max=t.min+m);q&&t.min===t.max&&(t.min-=.65,t.max+=.65);E&&d.vtrendlines&&c(d.vtrendlines,t,g,!1,!0,!0)},postSeriesAddition:function(c){var d=c[z],e=d.isBar,k=d.is3d,f=c.chart.rotateValues&&!e?270:0,l=d[0],A=l&&l.stacking100Percent,n,m,p,E,s,q,t,T,S,v,W,w,da,C,ha,Q,D,ia,H,na,sa,J,G;if(this.isStacked)for(p in n=d.plotSpacePercent,m=c.chart.defaultSeriesType,n=1-2*n,Q=c.series,D=this.numberFormatter,sa=g({},c.plotOptions.series.dataLabels.style),
J=parseFloat(sa.fontSize),G=!l.stacking100Percent,sa.color=c.plotOptions.series.dataLabels.color,E=l.stack,E){l=E[p].length;s=n/l;t=-(n-s)/2;C=[];w=0;for(T=Q.length;w<T;w+=1)S=Q[w],S.yAxis||b(S.type,m)!==p||C.push(S);for(q=0;q<l;q+=1,t+=s){W=E[p][q];ha=[];w=0;for(T=C.length;w<T;w+=1)S=C[w],a(S.columnPosition,0)===q&&ha.push(S.data);if(W&&W.length)for(v=0,S=W.length;v<S;v+=1)if(w=W[v])for(da=(w.n||0)+(w.p||0),d.showStackTotal&&(T=v,T+=t,w=0>da?w.n:w.p,c.xAxis.plotLines.push({value:T,width:0,isVline:G,
isTrend:!G,zIndex:4,_isStackSum:1,_catPosition:v,_stackIndex:q,label:{align:Pa,textAlign:k||270!==f?e?0>da?za:ya:Pa:0>da?za:ya,offsetScale:G?w:void 0,offsetScaleIndex:0,rotation:f,style:sa,verticalAlign:Ga,y:e?0:0>da?270===f?4:J:-4,x:0,text:d.numberFormatter.yAxis(da)}})),w=0,T=ha.length;w<T;w+=1)if(H=ha[w][v])if(na=da&&(H.y||0)/da*100,ia=D.percentValue(na),H.toolText=h(H.toolText,[14,24,25,112],{percentValue:ia,sum:D.dataLabels(da),unformattedSum:da}),H.y||0===H.y)A&&(H.y=na,H.previousY||0===H.previousY)&&
(H.previousY=H.previousY/da*100),H.showPercentValues&&(H.displayValue=ia)}}},styleMapForFont:Ra,styleApplicationDefinition_font:function(a,b,c){var d,f,e=!1,k,g,h=this.styleMapForFont;switch(b){case "caption":d=a.title;break;case "datalabels":d=a.xAxis.labels;break;case "datavalues":d=a.plotOptions.series.dataLabels;e=!0;break;case "tldatavalues":d={style:a.plotOptions.series.dataLabels.tlLabelStyle};break;case "trdatavalues":d={style:a.plotOptions.series.dataLabels.trLabelStyle};break;case "bldatavalues":d=
{style:a.plotOptions.series.dataLabels.blLabelStyle};break;case "brdatavalues":d={style:a.plotOptions.series.dataLabels.brLabelStyle};break;case "subcaption":d=a.subtitle;break;case "tooltip":d=a.tooltip;break;case "trendvalues":d={style:a[z].trendStyle};break;case "xaxisname":d=a.xAxis.title;break;case "yaxisname":case "pyaxisname":case "axistitle":d=[];b=0;for(k=a.yAxis.length;b<k;b+=1)d.push(a.yAxis[b].title);break;case "yaxisvalues":d=[];b=0;for(k=a.yAxis.length;b<k;b+=1)d.push(a.yAxis[b].labels);
break;case "vlinelabels":d={style:a[z].divlineStyle};break;case "legend":d={style:a.legend.itemStyle};break;default:(d=a.orphanStyles[b])||(a.orphanStyles[b]=d={text:"",style:{}})}if("object"===typeof d)if(d instanceof Array)for(b=0,k=d.length;b<k;b+=1){g=d[b];for(f in c)if(a=f.toLowerCase(),"function"===typeof h[a])h[a](c[f],g,e);I(g.style)}else{for(f in c)if(a=f.toLowerCase(),"function"===typeof h[a])h[a](c[f],d,e);I(d.style)}},parseStyles:function(a){var b,c,d,f={},e,k=this.dataObj;if(k.styles&&
k.styles.definition instanceof Array&&k.styles.application instanceof Array){for(b=0;b<k.styles.definition.length;b+=1)c=k.styles.definition[b],c.type&&c.name&&this["styleApplicationDefinition_"+c.type.toLowerCase()]&&(f[c.name.toLowerCase()]=c);for(b=0;b<k.styles.application.length;b+=1)for(c=k.styles.application[b].styles&&k.styles.application[b].styles.split(Da)||[],e=0;e<c.length;e+=1)if(d=c[e].toLowerCase(),f[d]&&k.styles.application[b].toobject)this["styleApplicationDefinition_"+f[d].type.toLowerCase()](a,
k.styles.application[b].toobject.toLowerCase(),f[d])}},updateDefaultAnnotations:function(){var c=this.renderer,d=this.dataObj,e=this.chartInstance,k=d&&d.annotations||{},f={},g;if(this.drawAnnotations&&e.dataReady()&&d&&d.chart&&a(d.chart.showannotations,1)){g=a(k.scaleonresize,d.chart.scaleonresize,1);var c={interactionevents:b(this.annotationInteractionEvents,!0),showbelow:b(k.showbelow,k.showbelowchart),autoscale:k.autoscale,scaletext:k.scaletext,scaleimages:k.scaleimages,constrainedscale:k.constrainedscale,
scaleonresize:g,origw:b(k.origw,d.chart.origw,g?this.origRenderWidth:c.chartWidth),origh:b(k.origh,d.chart.origh,g?this.origRenderHeight:c.chartHeight),xshift:k.xshift,yshift:k.yshift,grpxshift:k.grpxshift,grpyshift:k.grpyshift,xscale:k.xscale,yscale:k.yscale,rootxscale:a(k.xscale,100)/100,rootyscale:a(k.yscale,100)/100},h;c||(c={});for(h in f)c[h]=f[h];e.annotations.reset(k,c,this.snapLiterals)}else e.annotations.clear()},dispose:function(){var a;this.disposing=!0;this.renderer&&this.renderer.dispose();
this.numberFormatter&&this.numberFormatter.dispose();this.hcJSON&&this.hcJSON.chart&&this.hcJSON.chart.renderTo&&delete this.hcJSON.chart.renderTo;for(a in this)delete this[a];delete this.disposing;this.disposed=!0}});V("stub",{init:function(a,b,c){this.containerElement=a;this.smartLabel=c.jsVars.smartLabel},standaloneInit:!0},V.base);V("barbase",{spaceManager:function(){return this.placeHorizontalXYSpaceManager.apply(this,arguments)}},V.base);V("singleseries",{series:function(a,b,d){var e=a.data||
a.dataset&&a.dataset[0]&&a.dataset[0].data,f;e&&0<e.length&&e instanceof Array&&(f={data:[],hoverEffects:this.parseSeriesHoverOptions(a,b,{},d),colorByPoint:!0},b.legend.enabled=!1,d=this.point(d,f,e,a.chart,b),d instanceof Array?b.series=b.series.concat(d):b.series.push(d),this.configureAxis(b,a),a.trendlines&&c(a.trendlines,b.yAxis,b[z],!1,this.isBar))},defaultSeriesType:p,configureAxis:function(c,d){var e=c[z],k=c.xAxis,f=d.chart,g=c.chart.is3D,h,l,A,n,m,p,E,s,q,t,T,S,v=0,w,W,da,ha,Q,D,ia,H=this.numberFormatter,
na=a(f.syncaxislimits,0),sa;k.title.text=N(f.xaxisname);sa=a(parseInt(f.yaxisvaluesstep,10),parseInt(f.yaxisvaluestep,10),1);sa=1>sa?1:sa;h=c.yAxis[0];l=e[0];e.isDual?(A=H.getCleanValue(f.pyaxismaxvalue),n=H.getCleanValue(f.pyaxisminvalue),h.title.text=N(f.pyaxisname),na&&!l.stacking100Percent?(S=e[1],T=a(S.max),S=a(S.min),void 0!==T&&void 0!==S&&(l.min=$(l.min,S),l.max=U(l.max,T)),T=H.getCleanValue(f.syaxismaxvalue),S=H.getCleanValue(f.syaxisminvalue),null!==S&&(n=null!==n?$(n,S):S),null!==T&&(A=
null!==A?U(A,T):T)):na=0):(A=H.getCleanValue(f.yaxismaxvalue),n=H.getCleanValue(f.yaxisminvalue),h.title.text=N(f.yaxisname));E=a(this.isStacked?0:this.setAdaptiveYMin,f.setadaptiveymin,this.defSetAdaptiveYMin,0);p=m=!E;s=a(e.numdivlines,f.numdivlines,this.numdivlines,4);q=f.adjustdiv!==Ea;t=a(this.showYAxisValues,f.showyaxisvalues,f.showyaxisvalue,1);T=a(f.showyaxislimits,f.showlimits,t);S=a(f.showdivlinevalue,f.showdivlinevalues,t);g||(v=a(f.showaxislines,f.drawAxisLines,0),da=a(f.axislinethickness,
1),Q=a(f.axislinealpha,100),100<Q&&(Q=100),W=C(b(f.axislinecolor,"#000000"),Q),h.showLine=a(f.showyaxisline,v),w=k.showLine=a(f.showxaxisline,v),ha=k.lineThickness=a(f.xaxislinethickness,da),h.lineThickness=a(f.yaxislinethickness,da),D=k.lineAlpha=a(f.xaxislinealpha,Q),100<D&&(D=k.lineAlpha=100),ia=h.lineAlpha=a(f.yaxislinealpha,Q),100<ia&&(ia=h.lineAlpha=100),k.lineColor=C(b(f.xaxislinecolor,W),D),h.lineColor=C(b(f.yaxislinecolor,W),ia),c.chart.xAxisLineVisible=w&&!!ha&&0<D);this.axisMinMaxSetter(h,
l,A,n,m,p,s,q);this.configurePlotLines(f,c,h,l,T,S,sa,e.numberFormatter,!1);h.reversed&&0<=h.min&&(c.plotOptions.series.threshold=h.max);e.isDual&&(h=c.yAxis[1],l=e[1],T=a(f.showsecondarylimits,T),S=a(f.showdivlinesecondaryvalue,t),na?(k=c.yAxis[0],h.min=k.min,h.max=k.max,h.tickInterval=k.tickInterval,delete l.max,delete l.min):(A=H.getCleanValue(f.syaxismaxvalue),n=H.getCleanValue(f.syaxisminvalue),E=a(f.setadaptivesymin,E),p=m=!E,this.axisMinMaxSetter(h,l,A,n,m,p,s,q)),g||(h.showLine=a(f.showsyaxisline,
v),h.lineThickness=a(f.syaxislinethickness,da),g=h.lineAlpha=a(f.syaxislinealpha,Q),100<g&&(g=100),h.lineColor=C(b(f.syaxislinecolor,W),g)),this.configurePlotLines(f,c,h,l,T,S,sa,e.numberFormatter,!0),h.title.text=N(f.syaxisname))},pointValueWatcher:function(c,d,e,k,f,g,h){c=c[z];var l;if(null!==d)return e=a(e,0),c[e]||(c[e]={}),e=c[e],k&&(this.distributedColumns&&(c.marimekkoTotal+=d),k=e.stack,f=a(f,0),g=a(g,0),h=b(h,Za),k[h]||(k[h]=[]),h=k[h],h[g]||(h[g]=[]),g=h[g],g[f]||(g[f]={}),f=g[f],0<=d?
f.p?(l=f.p,d=f.p+=d):f.p=d:f.n?(l=f.n,d=f.n+=d):f.n=d),e.max=e.max>d?e.max:d,e.min=e.min<d?e.min:d,l},parseSeriesHoverOptions:function(c,d,e){c=d.chart.plotHoverEffects;d={enabled:b(e.showhovereffect,e.hovereffect,c.enabled)};d.highlight=a(e.highlightonhover,e.highlightplotonhover,c.highlight);d.columnHighlight=a(d.highlight,e.highlightcolumnonhover,e.highlightbaronhover,c.columnHighlight);d.anchorHighlight=a(d.highlight,e.highlightanchoronhover,c.anchorHighlight);d.anchorHighlight=a(d.highlight,
e.highlightimageonhover,c.imageHighlight);d.bubbleHighlight=a(d.highlight,e.highlightbubbleonhover,e.highlightbaronhover,c.bubbleHighlight);d.imageHoverAlpha=b(e.anchorimagehoveralpha,c.anchorImageHoverAlpha);d.imageHoverScale=b(e.anchorimagehoverscale,c.anchorImageHoverScale);d.color=b(e.hovercolor,e.bubblehovercolor,c.color);d.alpha=b(e.hoveralpha,c.alpha);d.scale=b(e.hoverscale,e.bubblehoverscale,c.scale);d.gradientColor=void 0!==e.hovergradientcolor?e.hovergradientcolor:c.gradientColor;d.ratio=
b(e.hoverratio,c.ratio);d.angle=b(e.hoverangle,c.angle);d.borderColor=b(e.borderhovercolor,c.borderColor);d.borderAlpha=b(e.borderhoveralpha,c.borderAlpha);d.borderThickness=a(e.borderhoverthickness,c.borderThickness);d.borderDashed=a(e.borderhoverdashed,c.borderDashed);d.borderDashGap=a(e.borderhoverdashgap,c.borderDashGap);d.borderDashLen=a(e.borderhoverdashlen,c.borderDashLen);d.shadow=b(e.hovershadow,c.shadow);d.anchorSides=b(e.anchorhoversides,c.anchorSides);d.anchorRadius=b(e.anchorhoverradius,
c.anchorRadius);d.anchorScale=b(e.anchorhoverscale,c.anchorScale);d.anchorAlpha=b(e.anchorhoveralpha,e.hoveralpha,c.anchorAlpha);d.anchorBgColor=b(e.anchorbghovercolor,e.anchorhovercolor,c.anchorBgColor);d.anchorBgAlpha=b(e.anchorbghoveralpha,c.anchorBgAlpha);d.anchorBorderColor=b(e.anchorborderhovercolor,c.anchorBorderColor);d.anchorBorderAlpha=b(e.anchorborderhoveralpha,c.anchorBorderAlpha);d.anchorBorderThickness=a(e.anchorborderhoverthickness,c.anchorBorderThickness);d.anchorStartAngle=b(e.anchorhoverstartangle,
c.anchorStartAngle);d.anchorDip=b(e.anchorhoverdip,c.anchorDip);d.anchorAnimation=a(e.anchorhoveranimation,c.anchorAnimation,1);d.negativeColor=b(e.negativehovercolor,c.negativeColor);d.is3DBubble=a(e.is3donhover,c.is3DBubble);return d},pointHoverOptions:function(c,d,k){var g,f,h,l={};g=d.hoverEffects;d=a(c.hovereffect,g&&g.enabled);f=!1;var A={enabled:d},n=k&&p+k.plotType.toLowerCase();if(void 0===d)if(this.forceHoverEnable)f=d=A.enabled=!0;else{"anchor"==n&&(f=k.imageUrl?d=A.enabled=void 0!==b(c.anchorimagehoveralpha,
g.imageHoverAlpha,c.anchorimagehoverscale,g.imageHoverScale,void 0):d=A.enabled=void 0!==b(c.hovercolor,c.anchorhovercolor,c.anchorbghovercolor,g.anchorBgColor,g.color,c.hoveralpha,c.anchorhoveralpha,g.anchorAlpha,c.bghoveralpha,c.anchorbghoveralpha,g.anchorBgAlpha,c.anchorborderhovercolor,c.borderhovercolor,g.anchorBorderColor,c.anchorborderhoverthickness,c.borderhoverthickness,g.anchorBorderThickness,c.anchorborderhoveralpha,c.borderhoveralpha,g.anchorBorderAlpha,c.hoverdip,c.anchorhoverdip,g.anchorDip,
c.anchorhoverstartangle,g.anchorStartAngle,c.hoversides,c.anchorhoversides,g.anchorSides,c.hoverradius,c.anchorhoverradius,g.anchorRadius,void 0));if("column"==n||"bubble"==n)f=d=A.enabled=void 0!==b(c.hoveralpha,g.alpha,c.hovergradientcolor,g.gradientColor,c.borderhovercolor,g.borderColor,c.borderhoverthickness,g.borderThickness,c.hoverratio,g.ratio,c.hoverangle,g.angle,c.borderhoveralpha,g.borderAlpha,c.borderhoverdashed,g.borderDashed,c.borderhoverdashgap,g.borderDashGap,c.borderhoverdashlen,g.borderDashLen,
c.hovercolor,g.color,void 0);f||"bubble"!=n||(f=d=A.enabled=void 0!==b(c.negativehovercolor,g.negativeColor,c.is3donhover,g.is3DBubble,c.hoverscale,g.scale,void 0));"pie"==n&&(f=d=A.enabled=void 0!==b(c.hovercolor,g.color,c.hoveralpha,g.alpha,c.borderhovercolor,g.borderColor,c.borderhoverthickness,g.borderThickness,c.borderhoveralpha,g.borderAlpha,void 0))}if(d){A.highlight=a(c.highlightonhover,g.highlight);A.columnHighlight=a(A.highlight,c.highlightcolumnonhover,c.highlightbaronhover);A.anchorHighlight=
a(A.highlight,c.highlightanchoronhover);A.bubbleHighlight=a(A.highlight,c.highlightbubbleonhover);A.alpha=b(c.hoveralpha,g.alpha,k.alpha);A.scale=b(c.hoverscale,g.scale,1);A.gradientColor=void 0===c.hovergradientcolor?g.gradientColor:c.hovergradientcolor;A.borderColor=b(c.borderhovercolor,g.borderColor,k.borderColor);A.borderThickness=a(c.borderhoverthickness,g.borderThickness,k.borderWidth);A.ratio=b(c.hoverratio,g.ratio,k.ratio);A.angle=b(c.hoverangle,g.angle,k.angle);A.borderAlpha=b(c.borderhoveralpha,
g.borderAlpha,k.borderAlpha);A.borderDashed=a(c.borderhoverdashed,g.borderDashed,k.borderDashed,0);A.borderDashGap=a(c.borderhoverdashgap,g.borderDashGap,k.borderDashGap);A.borderDashLen=a(c.borderhoverdashlen,g.borderDashLen,k.borderDashLen);A.shadow=b(c.hovershadow,g.shadow,0);A.color=b(c.hovercolor,g.color);"anchor"==n&&(k.imageUrl?(A.imageHoverAlpha=a(c.anchorimagehoveralpha,g.imageHoverAlpha,100),A.imageHoverScale=k.imageScale*ba(a(c.anchorimagehoverscale,g.imageHoverScale,110))*.01,A.anchorAnimation=
a(c.anchorhoveranimation,g.anchorAnimation,1)):(A.anchorColor=L(b(c.hovercolor,c.anchorhovercolor,c.anchorbghovercolor,g.anchorBgColor,g.color,k.anchorBgColor)),A.anchorAlpha=b(c.hoveralpha,c.anchorhoveralpha,g.anchorAlpha,k.anchorAlpha),A.anchorBgAlpha=b(c.bghoveralpha,c.anchorbghoveralpha,g.anchorBgAlpha,A.anchorAlpha,k.anchorBgAlpha),A.anchorBorderColor=b(c.anchorborderhovercolor,c.borderhovercolor,g.anchorBorderColor,k.anchorBorderColor),A.anchorBorderThickness=b(c.anchorborderhoverthickness,
c.borderhoverthickness,g.anchorBorderThickness,k.anchorBorderThickness),A.anchorBorderAlpha=a(c.anchorborderhoveralpha,c.borderhoveralpha,g.anchorBorderAlpha,A.anchorAlpha,k.anchorBorderAlpha),A.anchorDip=a(c.hoverdip,c.anchorhoverdip,g.anchorDip),A.startAngle=b(c.anchorhoverstartangle,g.anchorStartAngle,k.anchorAngle),A.anchorSides=a(c.hoversides,c.anchorhoversides,g.anchorSides,k.anchorSides),A.anchorRadius=a(c.hoverradius,c.anchorhoverradius,g.anchorRadius),A.anchorScale=a(c.hoverscale,c.anchorhoverscale,
g.anchorScale),A.anchorAnimation=a(c.anchorhoveranimation,g.anchorAnimation,1),void 0===A.anchorRadius&&(A.anchorRadius=!f||A.anchorHighlight?k.anchorRadius&&k.anchorRadius+1:k.anchorRadius)));if(f||(A.columnHighlight||A.bubbleHighlight)&&A.color&&1==A.highlight)A.highlight=0;"column"==n&&(A.color=(b(A.color,k.color)+Da+(void 0===A.gradientColor?k.gradientColor:A.gradientColor)).replace(/,+?$/,""));"pie"===n&&(A.color=b(A.color,k.color).replace(/,+?$/,""));"bubble"==n&&(A.negativeColor=b(c.negativehovercolor,
g.negativeColor,k.negativeColor),A.is3d=a(c.is3donhover,g.is3DBubble,k.is3d),A.color=A.negativeColor&&0>c.z?A.negativeColor:A.color||k.color,h="string"==typeof A.color,A.color=L(h?A.color:A.color.FCcolor.color),A.color=A.is3d?V.bubble.getPointColor(A.color,A.alpha):{FCcolor:{color:A.color,alpha:A.alpha}});if(1==A.highlight&&"anchor"!==n){c=(h="string"==typeof A.color)?A.color.split(/\s{0,},\s{0,}/):A.color.FCcolor.color.split(/\s{0,},\s{0,}/);g=c.length;for(f=0;f<g;f++)c[f]=Y(c[f],70);h?A.color=c.join(","):
A.color.FCcolor.color=c.join(",")}"pie"===n&&(l={color:this.getPointColor(A.color,A.alpha,k.radius3D),alpha:A.alpha,borderColor:C(A.borderColor,A.borderAlpha),borderWidth:A.borderThickness});"column"==n&&(A.colorArr=ma(A.color,A.alpha,A.ratio,A.angle,k.isRoundEdged,A.borderColor,$(A.alpha,A.borderAlpha).toString(),k.isBar,k.is3d),A.dashStyle=A.borderDashed?e(A.borderDashLen,A.borderDashGap,A.borderThickness):"none",l={shadow:A.shadow,color:A.colorArr[0],borderColor:A.colorArr[1],borderWidth:A.borderThickness,
use3DLighting:k.use3DLighting,dashStyle:A.dashStyle});"anchor"==n&&(l=k.imageUrl?{animation:A.anchorAnimation,imageHoverAlpha:A.imageHoverAlpha,imageHoverScale:A.imageHoverScale}:{animation:A.anchorAnimation,shadow:A.shadow,fillColor:{FCcolor:{color:A.anchorColor,alpha:A.anchorBgAlpha*A.anchorAlpha/100+p}},lineColor:{FCcolor:{color:A.anchorBorderColor,alpha:A.anchorBorderAlpha}},lineWidth:A.anchorBorderThickness,radius:A.anchorRadius,symbol:oa(A.anchorSides),startAngle:A.startAngle,sides:A.anchorSides,
scale:A.anchorScale,dip:A.anchorDip});"bubble"==n&&(l={symbol:A.seriesAnchorSymbol,shadow:A.shadow,scale:A.scale,fillColor:A.color,lineColor:{FCcolor:{color:A.borderColor,alpha:A.alpha}},lineWidth:A.borderThickness})}return{enabled:d,options:A,rolloverOptions:l}},getPointStub:function(c,d,e,k){var f=this.dataObj.chart;k=k[z];d=null===d?d:k.numberFormatter.dataLabels(d);var g=G(N(b(c.tooltext,k.tooltext))),A=G(N(c.displayvalue)),f=k.showTooltip?void 0!==g?h(g,[1,2,3,5,6,7],{formattedValue:d,label:e,
yaxisName:N(f.yaxisname),xaxisName:N(f.xaxisname)},c,f):null===d?!1:e!==p?e+k.tooltipSepChar+d:d:p;k=a(c.showvalue,k.showValues)?void 0!==A?A:d:p;c=b(c.link);return{displayValue:k,categoryLabel:e,toolText:f,link:c}},updateSnapPoints:function(){var a=this,b=a.snapLiterals,c=function(a,b){var c=0;switch(a){case "startx":c=b.x;break;case "starty":c=b.y;break;case "x":case "middlex":case "centerx":c=b.x+b.width/2;break;case "y":case "middley":case "centery":c=b.y+b.height/2;break;case "endx":c=b.x+b.width;
break;case "endy":c=b.y+b.height;break;default:c=0}return c};b.dataset=function(b,d){var e=a.renderer&&a.renderer.plots,k,g,h,A;h=a.is3D;if(!e||!e.length)return 0;isNaN(b[0])?k=0:(k=Number(b[0]),b=b.slice(1));g=b[0];if("set"===g){isNaN(b[1])?(A=0,b=b.slice(1)):(A=Number(b[1]),b=b.slice(2));g=b[0];e=(e=e[k]&&e[k].items[A])&&e.graphic;if(!e)return 0;h=d&&h?e._getBBox2():e.getBBox();A=c(g,h)}return A};b.xaxis=function(b){var d=a.renderer&&a.renderer.xAxis&&a.renderer.xAxis[0]&&a.renderer.xAxis[0].labels,
e,k;if(!d||!d.length)return 0;k=b[0];if("label"===k){isNaN(b[1])?(e=0,b=b.slice(1)):(e=Number(b[1]),b=b.slice(2));k=b[0];b=d[e];if(!b)return 0;b=b.getBBox();e=c(k,b)}return e};b.yaxis=function(b){var d=a.renderer&&a.renderer.yAxis,e,k;if(!d||!d.length)return 0;isNaN(b[0])?e=0:(e=Number(b[0]),b=b.slice(1));e=d[e];if(!e)return 0;d=b[0];if("label"===d){k=e.labels;isNaN(b[1])?(e=0,b=b.slice(1)):(e=Number(b[1]),b=b.slice(2));d=b[0];b=k[e];if(!b)return 0;b=b.getBBox();k=c(d,b)}return k}}},V.base);V("multiseries",
{series:function(b,d,e){var k,f,g=d[z],h,A;d.legend.enabled=Boolean(a(b.chart.showlegend,1));if(b.dataset&&0<b.dataset.length){this.categoryAdder(b,d);k=0;for(f=b.dataset.length;k<f;k+=1)h=b.dataset[k],A={hoverEffects:this.parseSeriesHoverOptions(b,d,h,e),visible:!a(h.initiallyhidden,0),data:[]},this.isStacked||(A.numColumns=f),h=this.point(e,A,h,b.chart,d,g.oriCatTmp.length,k),h instanceof Array?d.series=d.series.concat(h):d.series.push(h);this.configureAxis(d,b);b.trendlines&&!this.isLog&&c(b.trendlines,
d.yAxis,g,!1,this.isBar,void 0,this.inversed)}},categoryAdder:function(b,c){var d,e=0,f=c[z],k=f.axisGridManager,g=b.chart,h=c.xAxis,A,f=f.x,n,m,E,s;if(b.categories&&b.categories[0]&&b.categories[0].category)for(b.categories[0].font&&(c.xAxis.labels.style.fontFamily=b.categories[0].font),void 0!==(d=a(b.categories[0].fontsize))&&(1>d&&(d=1),c.xAxis.labels.style.fontSize=d+Ca,I(c.xAxis.labels.style)),b.categories[0].fontcolor&&(c.xAxis.labels.style.color=b.categories[0].fontcolor.split(Da)[0].replace(/^\#?/,
"#")),m=c[z].oriCatTmp,E=b.categories[0].category,d=0;d<E.length;d+=1)E[d].vline?k.addVline(h,E[d],e,c):(n=a(E[d].showlabel,g.showlabels,1),s=b.categories[0].category[d],A=N(l(s.label,s.name)),k.addXaxisCat(h,e,e,n?A:p,{},s,g),m[e]=l(N(s.tooltext),A),e+=1);f.catCount=e},getPointStub:function(c,d,e,k,f,g,A,n,m,E){var s=this.dataObj.chart,q=this.isDual,t=this.isXY,T=this.isMLAxis,S=this.isStacked,v=this.isErrorChart,w;k=k[z];var W,da,C=null===d?d:this.numberFormatter.dataLabels(d,A),ha,Q=G(N(b(c.tooltext,
f.plottooltext,k.tooltext))),D=k.tooltipSepChar,ia,H={},na,sa,J,K,ra,M,Na,Fa,I;v&&(sa=null===n?n:this.numberFormatter.dataLabels(n,A),M=null===d?p:this.numberFormatter.percentValue(n/d*100),ia=[1,2,3,4,5,6,7,99,100,101,102],d={yaxisName:K=N(q?A?s.syaxisname:s.pyaxisname:s.yaxisname),xaxisName:ra=N(s.xaxisname),formattedValue:C,label:e,errorDataValue:sa,errorPercentValue:M},t?(J=null===m?m:this.numberFormatter.xAxis(m),Na=null===E?p:this.numberFormatter.percentValue(m/E*100),ia.push(103,104,105,106,
107,108,109,110),I=b(c.horizontalerrorvalue,c.errorvalue),d.errorValue=Fa=b(c.verticalerrorvalue,c.errorvalue),E=G(N(b(c.verticalerrorplottooltext,c.errorplottooltext,f.verticalerrorplottooltext,f.errorplottooltext,s.verticalerrorplottooltext,s.errorplottooltext))),null!==n&&(d.verticalErrorDataValue=sa,d.verticalErrorPercentValue=M,d.verticalErrorValue=Fa),null!==m&&(d.horizontalErrorDataValue=J,d.horizontalErrorPercentValue=Na,d.horizontalErrorValue=I),na=G(N(b(c.horizontalerrorplottooltext,c.errorplottooltext,
f.horizontalerrorplottooltext,f.errorplottooltext,s.horizontalerrorplottooltext,s.errorplottooltext))),H._hErrortoolText=k.showTooltip?void 0!==na?h(na,ia,{yaxisName:K=N(q?A?s.syaxisname:s.pyaxisname:s.yaxisname),xaxisName:ra=N(s.xaxisname),formattedValue:C,label:e,errorDataValue:J,errorPercentValue:Na,errorValue:I,verticalErrorDataValue:sa,verticalErrorPercentValue:M,verticalErrorValue:Fa,horizontalErrorDataValue:J,horizontalErrorPercentValue:Na,horizontalErrorValue:I},c,s,f):null===n?!1:J:!1):(E=
G(N(b(c.errorplottooltext,f.errorplottooltext,s.errorplottooltext))),d.errorValue=Fa=b(c.errorvalue)),H._errortoolText=k.showTooltip?void 0!==E?h(E,ia,d,c,s,f):null===n?!1:sa:!1);k.showTooltip?void 0!==Q?(S=[4,5,6,7],A={yaxisName:K||N(q?A?s.syaxisname:s.pyaxisname:T?f._yAxisName:s.yaxisname),xaxisName:ra||N(s.xaxisname)},t?(S.push(8,9,10,11),A.yDataValue=C,A.xDataValue=e,v&&(S.push(103,104,105,106,107,108,109,110),null!==n&&(A.verticalErrorDataValue=sa,A.verticalErrorPercentValue=M,A.verticalErrorValue=
Fa),null!==m&&(A.horizontalErrorDataValue=J,A.horizontalErrorPercentValue=Na,A.horizontalErrorValue=I))):(S.push(1,2,3),A.formattedValue=C,A.label=e,v&&(S.push(99,100,101,102),A.errorValue=Fa,null!==n&&(A.errorDataValue=sa,A.errorPercentValue=M))),f=h(Q,S,A,c,s,f)):null===C?f=!1:(k.seriesNameInToolTip&&(ha=l(f&&f.seriesname)),f=ha?ha+D:p,f+=e?e+D:p,k.showPercentInToolTip&&S?(da=!0,f+="$percentValue"):f+=C):f=!1;a(c.showvalue,g)?void 0!==G(c.displayvalue)?w=N(c.displayvalue):k.showPercentValues?W=
!0:w=C:w=p;H.link=b(c.link);H.displayValue=w;H.categoryLabel=e;H.toolText=f;H.showPercentValues=W;H.showPercentInToolTip=da;return H}},V.singleseries);V("xybase",{hideRLine:function(){var a=this.chart.series[this.index+1];a&&a.hide&&a.hide()},showRLine:function(){var a=this.chart.series[this.index+1];a&&a.show&&a.show()},getRegressionLineSeries:function(a,b,c){var d,f,e,k;k=a.sumXY;var g=a.sumX,h=a.sumY;f=a.xValues;e=a.sumXsqure;d=a.yValues;a=a.sumYsqure;b?(f.sort(Ob),d=f[0],f=f[f.length-1],k=(c*
k-g*h)/(c*e-ea(g,2)),e=isNaN(k)?h/c:k*(d-g/c)+h/c,c=isNaN(k)?h/c:k*(f-g/c)+h/c,c=[{x:d,y:e},{x:f,y:c}]):(d.sort(Ob),e=d[0],d=d[d.length-1],k=(c*k-g*h)/(c*a-ea(h,2)),f=isNaN(k)?g/c:k*(e-h/c)+g/c,c=isNaN(k)?g/c:k*(d-h/c)+g/c,c=[{x:f,y:e},{x:c,y:d}]);return c},pointValueWatcher:function(a,b,c,d){var f=a[z];null!==b&&(a=f[0],a.max=a.max>b?a.max:b,a.min=a.min<b?a.min:b);null!==c&&(a=f.x,a.max=a.max>c?a.max:c,a.min=a.min<c?a.min:c);d&&(c=c||0,b=b||0,d.sumX+=c,d.sumY+=b,d.sumXY+=c*b,d.sumXsqure+=ea(c,2),
d.xValues.push(c),d.sumYsqure+=ea(b,2),d.yValues.push(b))}},V.multiseries);V("scrollbase",{postSeriesAddition:function(){var c=this.hcJSON,d=c.xAxis.scroll,e=c[z],k=e.width,f=e.x.catCount,g=this.dataObj.chart,h=this.colorManager,A,l,n,m,p,E;e.isScroll=!0;c.chart.hasScroll=!0;if(this.isStacked)A=1;else{l=A=0;m=c.series;E=c.chart.defaultSeriesType;for(n=m.length;l<n;l++)p=b(m[l].type,E),"column"===p&&(A+=1);1>A&&(A=1)}f*=A;k=a(g.numvisibleplot,la(k/this.avgScrollPointWidth));d&&2<=k&&k<f&&(d.enabled=
!0,d.vxLength=k/A,d.startPercent=$(1,U(0,parseFloat(g.scrolltoend)||0)),d.padding=a(g.scrollpadding,0),d.height=a(g.scrollheight,16),d.showButtons=!!a(g.scrollshowbuttons,1),d.buttonPadding=a(g.scrollbtnpadding,0),d.color=L(b(g.scrollcolor,h.getColor("altHGridColor"))),e.marginBottomExtraSpace+=d.padding+d.height);if(Na||a(g.enabletouchscroll,0))c.chart.zoomType="x",c.chart.nativeZoom=!1,c.chart.selectionMarkerFill="rgba(255,255,255,0)",(c.callbacks||(c.callbacks=[])).push(function(a){J(a,"selectionstart selectiondrag",
V.scrollbase.performTouchScroll,{})})},performTouchScroll:function(a){var b=this.xAxis[0].scroller,c=b.config,c=c.trackLength/(c.width/c.scrollRatio)*(a.chartX||1);!0!==a.isOutsidePlot&&sa(b.elements.anchor.element,"selectionstart"===a.type?"dragstart":"drag",{pageX:-c,pageY:-a.chartY})}},V.multiseries);V("logbase",{isLog:!0,isValueAbs:!0,configureAxis:function(d,e){var k=d[z],h=k.axisGridManager,f=this.numberFormatter,A=d.series,l=d.xAxis,n=d.yAxis[0],m=k[0],E=e.chart,s=!a(E.showyaxislimits,E.showlimits,
E.showyaxisvalues,1),q=!a(E.showdivlinevalues,E.showyaxisvalues,1),t=a(E.base,E.logbase,10),T=a(E.yaxismaxvalue),S=a(E.yaxisminvalue),v=this.colorManager,w=1===a(E.showminordivlinevalues),W=b(E.minordivlinecolor,n.gridLineColor,v.getColor("divLineColor")),da=a(E.minordivlinealpha,E.divlinealpha,v.getColor("divLineAlpha")),v=[n,void 0,void 0,a(E.divlinethickness,2),n.gridLineDashStyle,n.gridLineColor,2],W=[n,void 0,void 0,a(E.minordivlinethickness,1),n.gridLineDashStyle,C(b(E.minordivlinecolor,W),
a(E.minordivlinealpha,da/2)),2],da=w||da&&W[3],Q=a(E.showaxislimitgridlines,this.showAxisLimitGridLines),D=a(Q,this.is3D||d.chart.plotBorderWidth?0:1),ia,H;0>=t&&(t=10);0>=T&&(T=void 0);0>=S&&(S=void 0);T=this.getLogAxisLimits(m.max||t,m.min||1,T,S,t,da?E.numminordivlines:0);l.title.text=N(E.xaxisname);l.showLine=a(E.showxaxisline,E.showaxislines,0);l.lineThickness=a(E.xaxislinethickness,E.axislinethickness,1);l.lineAlpha=a(E.xaxislinealpha,E.axislinealpha,100);l.lineColor=C(b(E.xaxislinecolor,E.axislinecolor,
"000"));g(n,{title:{text:N(E.yaxisname)},labels:{enabled:!1},gridLineWidth:0,alternateGridColor:xa,reversed:"1"===E.invertyaxis,max:ha(T.Max,t),min:ha(T.Min,t),showLine:a(E.showyaxisline,E.showaxislines,0),lineThickness:a(E.yaxislinethickness,E.axislinethickness,1),lineAlpha:a(E.yaxislinealpha,E.axislinealpha,100),lineColor:C(b(E.yaxislinecolor,E.axislinecolor,"000"))});for(E=A.length;E--;)if(S=A[E])for(S.threshold=n.min,H=(S=S.data)&&S.length||0;H--;)ia=S[H],ia.y=ha(ia.y,t);delete m.max;delete m.min;
m.isLog=!0;n.reversed&&0<=n.min&&(d.plotOptions.series.threshold=n.max);e.trendlines&&c(e.trendlines,[{max:T.Max,min:T.Min,plotLines:n.plotLines,plotBands:n.plotBands,title:n.title}],k);for(E=n.plotLines.length;E--;)ia=n.plotLines[E],ia.value&&(ia.value=ha(ia.value,t)),ia.from&&(ia.from=ha(ia.from,t)),ia.to&&(ia.to=ha(ia.to,t));for(E=n.plotBands.length;E--;)ia=n.plotBands[E],ia.from&&(ia.from=ha(ia.from,t)),ia.to&&(ia.to=ha(ia.to,t));for(E=T.divArr.length;E--;){ia=T.divArr[E];if(ia.ismajor)v[1]=ha(ia.value,
t),v[2]=f.yAxis(ia.value),h.addAxisGridLine.apply(h,v);else if(da||ia.isextreme)W[1]=ha(ia.value,t),W[2]=w||ia.isextreme?f.yAxis(ia.value):p,h.addAxisGridLine.apply(h,W);S=n.plotLines[n.plotLines.length-1];ia.isextreme?(S.width=Q||D&&(!ia.isMin||!l.showLine)?S.width:.1,s&&(S.label.text=p)):q&&S.label&&(S.label.text=p)}},getLogAxisLimits:function(a,b,c,d,f,e){var k=function(a){return null===a||void 0===a||""===a||isNaN(a)?!1:!0},g=0,h=[],A,l,n,E,m,p,s,q;k(c)&&Number(c)>=a?a=Number(c):(c=1<f?Ba(ga(a)/
ga(f)):la(ga(a)/ga(f)),a=ea(f,c),l=c);l||(l=1<f?Ba(ga(a)/ga(f)):la(ga(a)/ga(f)));k(d)&&Number(d)<=b?b=Number(d):(c=1<f?la(ga(b)/ga(f)):Ba(ga(b)/ga(f)),b=ea(f,c),A=c);A||(A=1<f?la(ga(b)/ga(f)):Ba(ga(b)/ga(f)));d=Number(String(ga(f)/ga(10)));e=Number(e)||(la(d)==d?8:4);1<f?(n=l,E=A):0<f&&1>f&&(n=A,E=l);d=l;for(A=n;A>=E;--A)if(n=ea(f,d),b<=n&&a>=n&&(h[g++]={value:n,ismajor:!0}),A!=E){l=1<f?-1:1;n=ea(f,d)-ea(f,d+l);c=n/(e+1);for(k=1;k<=e;++k)n=ea(f,d+l)+c*k,b<=n&&a>=n&&(h[g++]={value:n,ismajor:!1});1<
f?d--:d++}for(s in h)for(q in h[s])"value"==q&&(m||(m=h[s][q]==b&&(h[s].isextreme=h[s].isMin=!0)),p||(p=h[s][q]==a&&(h[s].isextreme=h[s].isMax=!0)));m||(h[g++]={value:b,ismajor:!0,isMin:!0,isextreme:!0});p||(h[g]={value:a,ismajor:!0,isMax:!0,isextreme:!0});return{Max:a,Min:b,divArr:h}},pointValueWatcher:function(b,c,d){b=b[z];d=a(d,0);0<c&&(b[d]||(b[d]={}),d=b[d],d.max=d.max>c?d.max:c,d.min=d.min<c?d.min:c)}},V.mslinebase);Ra=V.singleseries;ib=V.multiseries;V("column2dbase",{point:function(c,d,k,
h,f){var A=k.length,n=f[z],E=n.axisGridManager,m=f.xAxis,n=n.x,s=this.colorManager,q=/3d$/.test(f.chart.defaultSeriesType),t=this.isBar,T=/^spark/i.test(c);c=b(h.showplotborder,T||q?Ea:Ka)===Ka?q?1:a(h.plotborderthickness,1):0;var S=f.chart.useRoundEdges,v=a(h.plotborderalpha,h.plotfillalpha,100),W=b(h.plotbordercolor,s.getColor("plotBorderColor")).split(Da)[0],T=T?"":a(h.useplotgradientcolor,1)?P(h.plotgradientcolor,s.getColor("plotGradientColor")):p,w=0,da=Boolean(a(h.use3dlighting,1)),C=f[z].numberFormatter,
ha,Q=a(h.plotborderdashed,0),ia=a(h.plotborderdashlen,5),D=a(h.plotborderdashgap,4),H,sa,na,J,G,K,M,ra,Na,Fa,I,Wa,ca,L;for(na=0;na<A;na+=1)ca=k[na],ca.vline?E.addVline(m,ca,w,f):(sa=C.getCleanValue(ca.value),ha=a(ca.showlabel,h.showlabels,1),J=N(l(ca.label,ca.name)),H=b(ca.color,s.getPlotColor()),G=b(ca.alpha,h.plotfillalpha,Xa),K=b(ca.ratio,h.plotfillratio),M=b(360-h.plotfillangle,t?180:90),ra=b(ca.alpha,v),Na=a(ca.dashed,Q),Fa=b(ca.dashgap,D),I=b(ca.dashlen,ia),E.addXaxisCat(m,w,w,ha?J:p,ca,{},
h,H),w+=1,0>sa&&(M=t?180-M:360-M),L={opacity:G/100},Wa=ma(H+Da+T.replace(/,+?$/,""),G,K,M,S,W,ra+p,t,q),ha=Na?e(I,Fa,c):"none",H=this.pointHoverOptions(ca,d,{plotType:"column",is3d:q,isBar:t,use3DLighting:da,isRoundEdged:S,color:H,gradientColor:T,alpha:G,ratio:K,angle:M,borderWidth:c,borderColor:W,borderAlpha:ra,borderDashed:Na,borderDashGap:Fa,borderDashLen:I,shadow:L}),d.data.push(g(this.getPointStub(ca,sa,J,f),{y:sa,shadow:L,color:Wa[0],borderColor:Wa[1],borderWidth:c,use3DLighting:da,dashStyle:ha,
tooltipConstraint:this.tooltipConstraint,hoverEffects:H.enabled&&H.options,rolloverProperties:H.enabled&&H.rolloverOptions})),this.pointValueWatcher(f,sa));n.catCount=w;return d},defaultSeriesType:"column"},Ra);V("linebase",{defaultSeriesType:"line",hasVDivLine:!0,defaultPlotShadow:1,point:function(c,d,k,h,f){var A,n,E,m,s,q,t,T,S,v,w,W,da,C,ha,Q,ia,D,H,sa,na,J,G,K,M,ra;c=f.chart;var Na=k.length,Fa=f.xAxis;A=f[z];var I=this.colorManager,ca,Wa=A.axisGridManager,Ja=0,P=A.x,R=f[z].numberFormatter,wb,
Oa,aa;C=L(b(h.linecolor,h.palettecolors,I.getColor("plotFillColor")));ha=b(h.linealpha,Xa);w=a(h.linethickness,this.lineThickness,4);W=Boolean(a(h.linedashed,0));t=a(h.linedashlen,5);T=a(h.linedashgap,4);M=a(h.anchorshadow,0);d.color={FCcolor:{color:C,alpha:ha}};d.lineWidth=w;d.anchorShadow=M;d.step=b(this.stepLine,d.step);d.drawVerticalJoins=Boolean(a(d.drawVerticalJoins,h.drawverticaljoins,1));d.useForwardSteps=Boolean(a(d.useForwardSteps,h.useforwardsteps,1));da=a(h.drawanchors,h.showanchors);
for(n=0;n<Na;n+=1)m=k[n],m.vline?Wa.addVline(Fa,m,Ja,f):(A=R.getCleanValue(m.value),s=a(m.showlabel,h.showlabels,1),E=N(l(m.label,m.name)),Wa.addXaxisCat(Fa,Ja,Ja,s?E:p,m,{},h),Ja+=1,S=L(b(m.color,C)),v=a(m.alpha,ha),s=a(m.dashed,W)?e(t,T,w):"none",q={opacity:v/100},ia=a(m.anchorsides,h.anchorsides,0),K=a(m.anchorstartangle,h.anchorstartangle,90),sa=a(m.anchorradius,h.anchorradius,this.anchorRadius,3),H=L(b(m.anchorbordercolor,h.anchorbordercolor,C)),D=a(m.anchorborderthickness,h.anchorborderthickness,
this.anchorBorderThickness,1),na=L(b(m.anchorbgcolor,h.anchorbgcolor,I.getColor("anchorBgColor"))),J=b(m.anchoralpha,h.anchoralpha,Xa),G=b(m.anchorbgalpha,h.anchorbgalpha,J),wb=b(m.anchorimageurl,h.anchorimageurl),Oa=b(m.anchorimagescale,h.anchorimagescale,100),aa=b(m.anchorimagealpha,h.anchorimagealpha,100),Q=void 0===da?0!==v:!!da,ra=Boolean(a(m.anchorshadow,M,0)),ca=this.pointHoverOptions(m,d,{plotType:"anchor",anchorBgColor:na,anchorAlpha:J,anchorBgAlpha:G,anchorAngle:K,anchorBorderThickness:D,
anchorBorderColor:H,anchorBorderAlpha:J,anchorSides:ia,anchorRadius:sa,imageUrl:wb,imageScale:Oa,imageAlpha:aa,shadow:q}),d.data.push(g(this.getPointStub(m,A,E,f),{y:A,color:{FCcolor:{color:S,alpha:v}},shadow:q,dashStyle:s,valuePosition:b(m.valueposition,c.valuePosition),marker:{enabled:!!Q,shadow:ra&&{opacity:J/100},fillColor:{FCcolor:{color:na,alpha:G*J/100+p}},lineColor:{FCcolor:{color:H,alpha:J}},lineWidth:D,radius:sa,startAngle:K,symbol:oa(ia),imageUrl:wb,imageScale:Oa,imageAlpha:aa},tooltipConstraint:this.tooltipConstraint,
hoverEffects:ca.enabled&&ca.options,rolloverProperties:ca.enabled&&ca.rolloverOptions})),this.pointValueWatcher(f,A));P.catCount=Ja;return d},defaultZeroPlaneHighlighted:!1},Ra);V("area2dbase",{defaultSeriesType:"area",hasVDivLine:!0,point:function(c,d,k,h,f){c=f.chart;var A=k.length,n=f.xAxis,m=f[z],E=m.axisGridManager,m=m.x,s=f[z].numberFormatter,q=this.colorManager,T=0,S,v,w,W,da,C,ha,Q,ia,D,H,sa,na,J,K,M,ra,Na,Fa,I,ca,Wa,Ja,R,wb,Oa,aa,hb;da=b(h.plotfillcolor,h.areabgcolor,G(h.palettecolors)?q.getPlotColor(0):
q.getColor("plotFillColor")).split(/\s*\,\s*/)[0];ca=Da+(a(h.useplotgradientcolor,1)?P(h.plotgradientcolor,q.getColor("plotGradientColor")):p);C=b(h.plotfillalpha,h.areaalpha,this.isStacked?Xa:"90");ha=a(h.plotfillangle,270);Q=b(h.plotbordercolor,h.areabordercolor,G(h.palettecolors)?q.getPlotColor(0):q.getColor("plotBorderColor")).split(/\s*\,\s*/)[0];ia=h.showplotborder==Ea?Ea:b(h.plotborderalpha,h.plotfillalpha,h.areaalpha,Xa);S=a(h.plotborderangle,270);v=Boolean(a(h.plotborderdashed,0));w=a(h.plotborderdashlen,
5);na=a(h.plotborderdashgap,4);ra=a(h.plotborderthickness,h.areaborderthickness,1);Wa=d.fillColor={FCcolor:{color:da+ca.replace(/,+?$/,""),alpha:C,ratio:db,angle:ha}};d.lineWidth=ra;d.dashStyle=v?e(w,na,ra):"none";d.lineColor={FCcolor:{color:Q,alpha:ia,ratio:Xa,angle:S}};d.step=b(this.stepLine,d.step);d.drawVerticalJoins=Boolean(a(d.drawVerticalJoins,h.drawverticaljoins,1));d.useForwardSteps=Boolean(a(d.useForwardSteps,h.useforwardsteps,1));ra=Boolean(a(h.drawanchors,h.showanchors,1));d.anchorShadow=
Ja=a(h.anchorshadow,0);for(v=0;v<A;v+=1)na=k[v],na.vline?E.addVline(n,na,T,f):(S=s.getCleanValue(na.value),W=a(na.showlabel,h.showlabels,1),w=N(l(na.label,na.name)),E.addXaxisCat(n,T,T,W?w:p,na,{},h),T+=1,W=a(na.anchorsides,h.anchorsides,0),sa=a(na.anchorstartangle,h.anchorstartangle,90),D=a(na.anchorradius,h.anchorradius,3),H=L(b(na.anchorbordercolor,h.anchorbordercolor,Q)),Na=a(na.anchorborderthickness,h.anchorborderthickness,1),J=L(b(na.anchorbgcolor,h.anchorbgcolor,q.getColor("anchorBgColor"))),
K=b(na.anchoralpha,h.anchoralpha,this.anchorAlpha,Ea),M=b(na.anchorbgalpha,h.anchorbgalpha,K),R=Boolean(a(na.anchorshadow,Ja,0)),Fa=G(na.color),I=a(na.alpha),Fa=void 0!==Fa||void 0!==I?{FCcolor:{color:Fa?L(Fa)+ca:da,alpha:void 0===I?t(I)+p:C,ratio:db,angle:ha}}:Wa,wb=b(na.anchorimageurl,h.anchorimageurl),Oa=b(na.anchorimagescale,h.anchorimagescale,100),aa=b(na.anchorimagealpha,h.anchorimagealpha,100),I={opacity:U(I,ia)/100,inverted:!0},hb=this.pointHoverOptions(na,d,{plotType:"anchor",anchorBgColor:J,
anchorAlpha:K,anchorBgAlpha:M,anchorAngle:sa,anchorBorderThickness:Na,anchorBorderColor:H,anchorBorderAlpha:K,anchorSides:W,anchorRadius:D,imageUrl:wb,imageScale:Oa,imageAlpha:aa,shadow:I}),d.data.push(g(this.getPointStub(na,S,w,f),{y:S,shadow:I,color:Fa,valuePosition:b(na.valueposition,c.valuePosition),marker:{enabled:ra,shadow:R&&{opacity:K/100},fillColor:{FCcolor:{color:J,alpha:M*K/100+p}},lineColor:{FCcolor:{color:H,alpha:K}},lineWidth:Na,radius:D,symbol:oa(W),startAngle:sa,imageUrl:wb,imageScale:Oa,
imageAlpha:aa},tooltipConstraint:this.tooltipConstraint,previousY:this.pointValueWatcher(f,S),hoverEffects:hb.enabled&&hb.options,rolloverProperties:hb.enabled&&hb.rolloverOptions})));m.catCount=T;return d}},Ra);V("mscolumn2dbase",{point:function(c,d,e,k,f,g,h,A,l){c=a(k.ignoreemptydatasets,0);var n=!1,m=e.data||[],E=f[z],s=b(d.type,this.defaultSeriesType),q=b(d.isStacked,f.plotOptions[s]&&f.plotOptions[s].stacking),t=b(this.isValueAbs,E.isValueAbs,!1),T=a(d.yAxis,0),S=f[z].numberFormatter,v=this.colorManager,
w=v.getPlotColor(),W,da=f._FCconf.isBar,C=d.hoverEffects;q||(d.columnPosition=a(l,A,h));d.name=G(e.seriesname);if(0===a(e.includeinlegend)||void 0===d.name)d.showInLegend=!1;d.color=b(e.color,w).split(Da)[0].replace(/^#?/g,"#");h=/3d$/.test(f.chart.defaultSeriesType);l=b(360-k.plotfillangle,da?180:90);0>W&&(l=360-l);e=d._dataParser=aa.column(f,{seriesname:d.name,plottooltext:e.plottooltext,color:b(e.color,w),alpha:b(e.alpha,k.plotfillalpha,Xa),plotgradientcolor:a(k.useplotgradientcolor,1)?P(k.plotgradientcolor,
v.getColor("plotGradientColor")):p,ratio:b(e.ratio,k.plotfillratio),fillAangle:l,isRoundEdges:f.chart.useRoundEdges,plotBorderColor:b(k.plotbordercolor,h?nb:v.getColor("plotBorderColor")).split(Da)[0],plotBorderAlpha:k.showplotborder==Ea||h&&k.showplotborder!=Ka?Ea:b(k.plotborderalpha,Xa),isBar:this.isBar,is3d:h,dashed:a(e.dashed,k.plotborderdashed,0),dashLen:a(e.dashlen,k.plotborderdashlen,5),dashGap:a(e.dashgap,k.plotborderdashgap,4),borderWidth:a(k.plotborderthickness,Ka),showValues:a(e.showvalues,
E.showValues),yAxis:T,use3DLighting:a(k.use3dlighting,1),_sourceDataset:e,hoverEffects:C},this);for(k=0;k<g;k+=1)(E=m[k])?(W=S.getCleanValue(E.value,t),null===W?d.data.push({y:null}):(n=!0,E=e(E,k,W),d.data.push(E),E.previousY=this.pointValueWatcher(f,W,T,q,k,A,s))):d.data.push({y:null});!c||n||this.realtimeEnabled||(d.showInLegend=!1);return d},defaultSeriesType:"column"},ib);V("mslinebase",{hasVDivLine:!0,point:function(c,d,e,k,f,g){c=a(k.ignoreemptydatasets,0);var h=!1,A=this.colorManager,l,n;
l=f.chart;var m=e.data||[];n=f[z];var E=b(d.type,this.defaultSeriesType),s=b(d.isStacked,f.plotOptions[E]&&f.plotOptions[E].stacking),q=b(this.isValueAbs,n.isValueAbs,!1),t=a(d.yAxis,0),T=this.numberFormatter,S=L(b(e.color,k.linecolor,A.getPlotColor())),v=a(e.alpha,k.linealpha,Xa),w=a(k.showshadow,this.defaultPlotShadow,1),W=a(e.drawanchors,e.showanchors,k.drawanchors,k.showanchors),da=a(e.anchorsides,k.anchorsides,0),C=a(e.anchorstartangle,k.anchorstartangle,90),ha=a(e.anchorradius,k.anchorradius,
3),Q=L(b(e.anchorbordercolor,k.anchorbordercolor,S)),ia=a(e.anchorborderthickness,k.anchorborderthickness,1),A=L(b(e.anchorbgcolor,k.anchorbgcolor,A.getColor("anchorBgColor"))),D=b(e.anchoralpha,k.anchoralpha,Xa),H=b(e.anchorbgalpha,k.anchorbgalpha,D),na=D&&b(e.anchorshadow,k.anchorshadow,0),sa=d.hoverEffects;d.name=G(e.seriesname);if(0===a(e.includeinlegend)||void 0===d.name||0===v&&1!==W)d.showInLegend=!1;d.marker={enabled:Boolean(a(W,1)),fillColor:{FCcolor:{color:A,alpha:H*D/100+p}},lineColor:{FCcolor:{color:Q,
alpha:D+p}},lineWidth:ia,radius:ha,symbol:oa(da),startAngle:C};d.color={FCcolor:{color:S,alpha:v}};d.shadow=w?{opacity:w?v/100:0}:!1;d.anchorShadow=na;d.step=b(this.stepLine,d.step);d.drawVerticalJoins=Boolean(a(d.drawVerticalJoins,k.drawverticaljoins,1));d.useForwardSteps=Boolean(a(d.useForwardSteps,k.useforwardsteps,1));d.lineWidth=a(e.linethickness,k.linethickness,2);l=d._dataParser=aa.line(f,{seriesname:d.name,plottooltext:e.plottooltext,lineAlpha:v,anchorAlpha:D,showValues:a(e.showvalues,n.showValues),
yAxis:t,lineDashed:Boolean(a(e.dashed,k.linedashed,0)),lineDashLen:a(e.linedashlen,k.linedashlen,5),lineDashGap:a(e.linedashgap,k.linedashgap,4),lineThickness:d.lineWidth,lineColor:S,valuePosition:b(e.valueposition,l.valuePosition),drawAnchors:W,anchorBgColor:A,anchorBgAlpha:H,anchorBorderColor:Q,anchorBorderThickness:ia,anchorRadius:ha,anchorSides:da,anchorAngle:C,anchorShadow:d.anchorShadow,anchorStartAngle:a(e.anchorstartangle,k.anchorstartangle),_sourceDataset:e,hoverEffects:sa,imageUrl:b(e.anchorimageurl,
k.anchorimageurl),imageScale:b(e.anchorimagescale,k.anchorimagescale,100),imageAlpha:b(e.anchorimagealpha,k.anchorimagealpha,100)},this);for(k=0;k<g;k+=1)(n=m[k])?(e=T.getCleanValue(n.value,q),null===e?d.data.push({y:null}):(h=!0,n=l(n,k,e),d.data.push(n),n.previousY=this.pointValueWatcher(f,e,t,s,k,0,E))):d.data.push({y:null});!c||h||this.realtimeEnabled||(d.showInLegend=!1);return d},defaultSeriesType:"line",defaultPlotShadow:1,defaultZeroPlaneHighlighted:!1},ib);V("msareabase",{hasVDivLine:!0,
point:function(c,d,k,g,f,h){c=a(g.ignoreemptydatasets,0);var A=!1,l=f.chart,n=k.data||[],m=f[z],E=b(d.type,this.defaultSeriesType),s=b(d.isStacked,f.plotOptions[E]&&f.plotOptions[E].stacking),q=b(this.isValueAbs,m.isValueAbs,!1),t=a(d.yAxis,0),T=f[z].numberFormatter,S=this.colorManager,v=S.getPlotColor(),W=b(k.color,g.plotfillcolor,v).split(Da)[0].replace(/^#?/g,"#").split(Da)[0],w=b(k.alpha,g.plotfillalpha,g.areaalpha,this.areaAlpha,70),da=a(g.plotfillangle,270),v=b(k.plotbordercolor,g.plotbordercolor,
g.areabordercolor,this.isRadar?v:"666666").split(Da)[0],C=b(k.showplotborder,g.showplotborder)==Ea?Ea:b(k.plotborderalpha,g.plotborderalpha,k.alpha,g.plotfillalpha,g.areaalpha,"95"),ha=a(g.plotborderangle,270),Q=a(k.anchorsides,g.anchorsides,0),ia=a(k.anchorstartangle,g.anchorstartangle,90),D=a(k.anchorradius,g.anchorradius,3),H=L(b(k.anchorbordercolor,g.anchorbordercolor,W)),na=a(k.anchorborderthickness,g.anchorborderthickness,1),sa=L(b(k.anchorbgcolor,g.anchorbgcolor,S.getColor("anchorBgColor"))),
J=a(k.anchoralpha,g.anchoralpha,this.anchorAlpha,0),K=a(k.anchorbgalpha,g.anchorbgalpha,J),G=J&&b(k.anchorshadow,g.anchorshadow,0),M=d.hoverEffects;this.isRadar||(W+=Da+(a(g.useplotgradientcolor,1)?P(g.plotgradientcolor,S.getColor("plotGradientColor")):p),W=W.replace(/,+?$/,""));d.step=b(this.stepLine,d.step);d.drawVerticalJoins=Boolean(a(d.drawVerticalJoins,g.drawverticaljoins,1));d.useForwardSteps=Boolean(a(d.useForwardSteps,g.useforwardsteps,1));d.name=b(k.seriesname);if(0===a(k.includeinlegend)||
void 0===d.name)d.showInLegend=!1;d.fillColor={FCcolor:{color:W,alpha:w,ratio:db,angle:da}};d.color=W;d.shadow={opacity:a(g.showshadow,1)?C/100:0};d.anchorShadow=G;d.lineColor={FCcolor:{color:v,alpha:C,ratio:Xa,angle:ha}};d.lineWidth=b(k.plotborderthickness,g.plotborderthickness,1);d.dashStyle=Boolean(a(k.dashed,g.plotborderdashed,0))?e(a(k.dashlen,g.plotborderdashlen,5),a(k.dashgap,g.plotborderdashgap,4),d.lineWidth):void 0;d.marker={fillColor:{FCcolor:{color:sa,alpha:K*J/100+p}},lineColor:{FCcolor:{color:H,
alpha:J+p}},lineWidth:na,radius:D,symbol:oa(Q),startAngle:ia};k=d._dataParser=aa.area(f,{seriesname:d.name,plottooltext:k.plottooltext,lineAlpha:C,anchorAlpha:J,showValues:a(k.showvalues,m.showValues),yAxis:t,fillColor:W,fillAlpha:w,valuePosition:b(k.valueposition,l.valuePosition),drawAnchors:Boolean(a(k.drawanchors,g.drawanchors,g.showanchors,1)),anchorBgColor:sa,anchorBgAlpha:K,anchorBorderColor:H,anchorBorderThickness:na,anchorRadius:D,anchorSides:Q,anchorAngle:ia,anchorShadow:d.anchorShadow,getLink:this.linkClickFN,
anchorStartAngle:a(k.anchorstartangle,g.anchorstartangle),_sourceDataset:k,hoverEffects:M,imageUrl:b(k.anchorimageurl,g.anchorimageurl),imageScale:b(k.anchorimagescale,g.anchorimagescale,100),imageAlpha:b(k.anchorimagealpha,g.anchorimagealpha,100)},this);for(l=0;l<h;l+=1)(m=n[l])?(g=m?T.getCleanValue(m.value,q):null,null===g?d.data.push({y:null}):(A=!0,m=k(m,l,g),d.data.push(m),m.previousY=this.pointValueWatcher(f,g,t,s,l,0,E))):d.data.push({y:null});!c||A||this.realtimeEnabled||(d.showInLegend=!1);
return d},defaultSeriesType:"area",defaultPlotShadow:0},ib);V("scatterbase",{showValues:0,defaultPlotShadow:0,rendererId:"cartesian",defaultSeriesType:"scatter",canvasPaddingModifiers:["anchorlabel"],point:function(c,d,k,g,f,h,A){c=a(g.ignoreemptydatasets,0);var l=this.colorManager,n=l.getPlotColor(),m,E,s,q,T,S,v,W,w,da,ha,Q,ia,D,H,na,sa,J,K;h=!1;var M,ra;T=a(k.drawline,g.drawlines,0);S=a(k.drawprogressioncurve,0);q=k.data||[];var Na,Fa,I,ca,N,Wa=a(k.showvalues,f[z].showValues),Ja=this.numberFormatter,
P,R=d._showRegression=a(k.showregressionline,g.showregressionline,0);d.zIndex=1;d.name=G(k.seriesname);if(0===a(k.includeinlegend)||void 0===d.name)d.showInLegend=!1;if(T||S)s=L(b(k.color,n)),q=b(k.alpha,Xa),T=a(k.linethickness,g.linethickness,2),S=Boolean(a(k.linedashed,k.dashed,g.linedashed,0)),v=a(k.linedashlen,g.linedashlen,5),W=a(k.linedashgap,g.linedashgap,4),d.color=C(b(k.linecolor,g.linecolor,s),a(k.linealpha,g.linealpha,q)),d.lineWidth=T,d.dashStyle=S?e(v,W,T):"none";T=Boolean(a(k.drawanchors,
k.showanchors,g.drawanchors,g.showanchors,1));A=a(k.anchorsides,g.anchorsides,A+3);S=a(k.anchorradius,g.anchorradius,3);s=L(b(k.anchorbordercolor,k.color,g.anchorbordercolor,s,n));n=a(k.anchorborderthickness,g.anchorborderthickness,1);v=L(b(k.anchorbgcolor,g.anchorbgcolor,l.getColor("anchorBgColor")));W=b(k.anchoralpha,k.alpha,g.anchoralpha,Xa);ha=b(k.anchorbgalpha,k.alpha,g.anchorbgalpha,W);M=b(k.anchorstartangle,g.anchorstartangle,90);d.anchorShadow=l=a(g.anchorshadow,0);d.marker={fillColor:this.getPointColor(v,
Xa),lineColor:{FCcolor:{color:s,alpha:W+p}},lineWidth:n,radius:S,symbol:oa(A)};q=k.data||[];N=q.length;R&&(d.events={hide:this.hideRLine,show:this.showRLine},Na={sumX:0,sumY:0,sumXY:0,sumXsqure:0,sumYsqure:0,xValues:[],yValues:[]},ca=a(k.showyonx,g.showyonx,1),Fa=L(b(k.regressionlinecolor,g.regressionlinecolor,s)),I=a(k.regressionlinethickness,g.regressionlinethickness,n),m=t(a(k.regressionlinealpha,g.regressionlinealpha,W)),Fa=C(Fa,m));for(E=0;E<N;E+=1)(w=q[E])?(m=Ja.getCleanValue(w.y),K=Ja.getCleanValue(w.x),
null===m?d.data.push({y:null,x:K}):(h=!0,ra=this.getPointStub(w,m,Ja.xAxis(K),f,k,Wa),Q=a(w.anchorsides,A),ia=a(w.anchorradius,S),D=L(b(w.anchorbordercolor,s)),H=a(w.anchorborderthickness,n),na=L(b(w.anchorbgcolor,v)),sa=b(w.anchoralpha,w.alpha,W),J=b(w.anchorbgalpha,ha),da=Boolean(a(w.anchorshadow,l,0)),P=this.pointHoverOptions(w,d,{plotType:"anchor",anchorBgColor:na,anchorAlpha:sa,anchorBgAlpha:J,anchorAngle:M,anchorBorderThickness:H,anchorBorderColor:D,anchorBorderAlpha:sa,anchorSides:Q,anchorRadius:ia,
shadow:void 0}),d.data.push({y:m,x:K,displayValue:ra.displayValue,toolText:ra.toolText,link:ra.link,marker:{enabled:T,shadow:da&&{opacity:sa/100},fillColor:{FCcolor:{color:na,alpha:J*sa/100+p}},lineColor:{FCcolor:{color:D,alpha:sa}},lineWidth:H,radius:ia,symbol:oa(Q),startAngle:b(w.anchorstartangle,k.anchorstartangle,g.anchorstartangle,90)},hoverEffects:P.enabled&&P.options,rolloverProperties:P.enabled&&P.rolloverOptions}),this.pointValueWatcher(f,m,K,R&&Na))):d.data.push({y:null});R&&(k=this.getRegressionLineSeries(Na,
ca,N),this.pointValueWatcher(f,k[0].y,k[0].x),this.pointValueWatcher(f,k[1].y,k[1].x),f={type:"line",color:Fa,showInLegend:!1,lineWidth:I,enableMouseTracking:!1,marker:{enabled:!1},data:k,zIndex:0},d=[d,f]);c&&!h&&(d.showInLegend=!1);return d},postSeriesAddition:function(b,c){for(var d=b.chart,k=c.chart,f=b.series,e=0,g=f.length;e<g;e+=1)f[e]._showRegression&&(f[e].relatedSeries=[e+1]);d.clipBubbles=a(k.clipbubbles,1)},categoryAdder:function(c,d){var k,g=0,f,h=d[z].x,A,n=d.xAxis,m,E,s=c.chart,q=parseInt(s.labelstep,
10),t=a(s.showlabels,1),T=b(s.xaxislabelmode,"categories").toLowerCase(),S=this.colorManager,v=d[z].numberFormatter,w,W,da,ha,Q,ia;d._FCconf.isXYPlot=!0;q=1<q?q:1;h.catOccupied={};if("auto"!==T&&c.categories&&c.categories[0]&&c.categories[0].category){E=c.categories[0];E.font&&(d.xAxis.labels.style.fontFamily=E.font);void 0!==(f=a(E.fontsize))&&(1>f&&(f=1),d.xAxis.labels.style.fontSize=f+Ca,I(d.xAxis.labels.style));E.fontcolor&&(d.xAxis.labels.style.color=E.fontcolor.split(Da)[0].replace(/^\#?/,"#"));
k=b(E.verticallinecolor,S.getColor("divLineColor"));f=a(E.verticallinethickness,1);A=a(E.verticallinealpha,S.getColor("divLineAlpha"));S=a(E.verticallinedashed,0);w=a(E.verticallinedashlen,4);W=a(E.verticallinedashgap,2);da=C(k,A);for(k=0;k<E.category.length;k+=1)ha=E.category[k],A=v.getCleanValue(ha.x),null===A||ha.vline||(h.catOccupied[A]=!0,m=a(ha.showlabel,ha.showname,t),Q=a(ha.showverticalline,ha.showline,ha.sl,0),ia=a(ha.linedashed,S),m=0===m||0!==g%q?p:N(l(ha.label,ha.name)),n.plotLines.push({isGrid:!0,
isCat:!0,isDataLabel:!0,width:Q?f:0,color:da,dashStyle:e(w,W,f,ia),value:A,label:{text:m,link:b(ha.link,s.labellink),style:ta({},ha,s,n.labels.style),align:Pa,verticalAlign:qa,textAlign:Pa,rotation:0,x:0,y:0}}),this.pointValueWatcher(d,null,A),g+=1);"mixed"===T&&(h.requiredAutoNumericLabels=a(this.requiredAutoNumericLabels,1))}else h.requiredAutoNumericLabels=a(this.requiredAutoNumericLabels,1);h.adjustMinMax=!0},getPointColor:function(a,b){var c,d;a=L(a);b=t(b);c=Y(a,70);d=R(a,50);return{FCcolor:{gradientUnits:"objectBoundingBox",
cx:.4,cy:.4,r:"100%",color:c+Da+d,alpha:b+Da+b,ratio:db,radialGradient:!0}}}},V.xybase);V("mscombibase",{canvasPaddingModifiers:["anchor","anchorlabel"],series:function(d,k,e){var g,f,h,A,n=d.chart,m,E=[],p=[],s=[],q,t,T=k[z],S=this.isDual,v=0,w;k.legend.enabled=Boolean(a(d.chart.showlegend,1));if(d.dataset&&0<d.dataset.length){this.categoryAdder(d,k);A=T.oriCatTmp.length;g=0;for(f=d.dataset.length;g<f;g+=1)switch(h=d.dataset[g],q=S&&"s"===b(h.parentyaxis,"p").toLowerCase()?!0:!1,m={hoverEffects:this.parseSeriesHoverOptions(d,
k,h,e),visible:!a(h.initiallyhidden,0),legendIndex:g,data:[]},q?(m.yAxis=1,t=l(h.renderas,this.secondarySeriesType),this.secondarySeriesFilter&&(w=this.secondarySeriesFilter[t])):(t=l(h.renderas,this.defaultSeriesType),this.defaultSeriesFilter&&(w=this.defaultSeriesFilter[t])),t=t.toLowerCase(),t){case "line":case "spline":m.type=!0===w?t:"line";E.push(V.mslinebase.point.call(this,e,m,h,n,k,A,g));break;case "area":case "splinearea":m.type=!0===w?t:"area";k.chart.series2D3Dshift=!0;s.push(V.msareabase.point.call(this,
e,m,h,n,k,A,g));break;case "column":case "column3d":p.push(V.mscolumn2dbase.point.call(this,e,m,d.dataset[g],n,k,A,g,void 0,v));v+=1;break;default:q?(m.type="line",E.push(V.mslinebase.point.call(this,e,m,h,n,k,A,g))):(p.push(V.mscolumn2dbase.point.call(this,e,m,d.dataset[g],n,k,A,g,void 0,v)),v+=1)}"0"!==n.areaovercolumns?(k.chart.areaOverColumns=!0,k.series=k.series.concat(p,s,E)):(k.chart.areaOverColumns=!1,k.series=k.series.concat(s,p,E));if(0===p.length&&1!==A)T.hasNoColumn=!0;else if(!this.isStacked)for(e=
0,g=p.length;e<g;e+=1)p[e].numColumns=g;this.configureAxis(k,d);d.trendlines&&c(d.trendlines,k.yAxis,k[z],S,this.isBar)}}},V.mscolumn2dbase)}]);
FusionCharts.register("module",["private","modules.renderer.js-renderer",function(){function d(a,b,c,d){var e=b.paper,g=b.layers,h=c?"y-axis":"x-axis",l=this.layerAboveDataset=g.layerAboveDataset,n=this.layerBelowDataset=g.layerBelowDataset,g=l.bands||(l.bands=[]),m=g.length,p=n.bands||(n.bands=[]),s=p.length,q=l.lines||(l.lines=[]),t=q.length,v=n.lines||(n.lines=[]),w=v.length,l=l.labels||(l.labels=[]),z=l.length,n=n.labels||(n.labels=[]),C=n.length;this.renderer=b;this.axisData=a||{};this.globalOptions=
b.options;this.isVertical=c;this.topBandGroup=this.topBandGroup||e.group(h+"-bands",this.layerAboveDataset);this.belowBandGroup=this.belowBandGroup||e.group(h+"-bands",this.layerBelowDataset);g.push(this.topBandGroup);m&&g[m].insertAfter(g[m-1]);p.push(this.belowBandGroup);s&&p[s].insertAfter(p[s-1]);this.topLineGroup=this.topLineGroup||e.group(h+"-lines",this.layerAboveDataset);this.belowLineGroup=this.belowLineGroup||e.group(h+"-lines",this.layerBelowDataset);this.topLabelGroup=this.topLabelGroup||
e.group(h+"-labels",this.layerAboveDataset);this.belowLabelGroup=this.belowLabelGroup||e.group(h+"-labels",this.layerBelowDataset);q.push(this.topLineGroup);t&&q[t].insertAfter(q[t-1]);v.push(this.belowLineGroup);w&&v[w].insertAfter(v[w-1]);l.push(this.topLabelGroup);z&&l[z].insertAfter(l[z-1]);n.push(this.belowLabelGroup);C&&n[C].insertAfter(n[C-1]);this.isReverse=d;this.configure()}function m(a,b,c,d){return ta(b-c[1]-d.top,a-c[0]-d.left)}function D(a,b){var c=b?360:Ca;a=(a||0)%c;return 0>a?c+a:
a}var v=this,p=v.window,c=v.hcLib,K=c.Raphael,b=c.chartAPI,G=/msie/i.test(p.navigator.userAgent)&&!p.opera,a=p.document,l=p.Image,P="VML"===K.type,N=c.BLANKSTRING,z="rgba(192,192,192,"+(G?.002:1E-6)+")",G=c.TOUCH_THRESHOLD_PIXELS,g=c.CLICK_THRESHOLD_PIXELS,e=c.stubFN,h={pageX:0,pageY:0},n=parseFloat,M=parseInt,H=c.extend2,q=c.addEvent,J=c.getMouseCoordinate,w=c.removeEvent,ja=c.pluck,s=c.pluckNumber,$=c.toRaphaelColor,U=c.setImageDisplayMode,ba=c.FC_CONFIG_STRING,Ba=c.plotEventHandler,la=c.isArray,
ga=c.each=function(a,b,c,d){var e;c||(c=a);d||(d={});if(la(a))for(e=0;e<a.length;e+=1){if(!1===b.call(c,a[e],e,a,d))return e}else if(null!==a&&void 0!==a)for(e in a)if(!1===b.call(c,a[e],e,a,d))return e},ea=c.createElement,pa=c.createContextMenu,Z=c.hasTouch,ma=Z?G:g,L=c.getSentenceCase,I=c.getCrispValues,fa=c.getValidValue,t=c.getFirstValue,R=c.regex.dropHash,Y=c.HASHSTRING,C=function(a){return a!==Pa&&null!==a},xa=function(a,b){a[1]===a[4]&&(a[1]=a[4]=V(a[1])+b%2/2);a[2]===a[5]&&(a[2]=a[5]=V(a[2])+
b%2/2);return a},Pa,Ga=8===a.documentMode?"visible":"",qa=p.Math,za=qa.sin,ya=qa.cos,ta=qa.atan2,V=qa.round,oa=qa.min,Ra=qa.max,ib=qa.abs,Da=qa.ceil,Za=qa.floor,Ea=180/qa.PI,Ka=qa.PI,Xa=Ka/2,Ca=2*Ka,yb=Ka+Xa,Fb=c.getFirstColor,vb=c.graphics.getLightColor,$a=c.POSITION_TOP,sb=c.POSITION_BOTTOM,db=c.POSITION_RIGHT,nb=c.POSITION_LEFT;K.ca.ishot=function(a){if(this.removed)return!1;var b=this.node;a=a||"";b.ishot=a;switch(this.type){case "group":for(b=this.bottom;b;)b.attr("ishot",a),b=b.next;break;case "text":if(K.svg)for(b=
b.getElementsByTagName("tspan")[0];b;)b.ishot=a,b=b.nextSibling}return!1};K.addSymbol({printIcon:function(a,b,c){var d=.75*c,e=.5*c,g=.33*c,h=V(a-c)+.5,l=V(b-c)+.5,n=V(a+c)+.5;c=V(b+c)+.5;var m=V(a-d)+.5,p=V(b-d)+.5,d=V(a+d)+.5,s=V(b+e)+.5,q=V(a+e)+.5,t=V(b+g)+.5;a=V(a-e)+.5;g=V(b+g+g)+.5;return["M",m,l,"L",d,l,d,p,m,p,"Z","M",h,p,"L",h,s,m,s,m,b,d,b,d,s,n,s,n,p,"Z","M",m,b,"L",m,c,d,c,d,b,"Z","M",q,t,"L",a,t,"M",q,g,"L",a,g]},exportIcon:function(a,b,c){var d=.66*c,e=.5*d,g=V(a-c)+.5,h=V(b-c)+.5,
l=V(a+c)+.5;c=V(b+c)-.5;var n=V(a-e)+.5,m=b<c-3?c-3:V(b)+.5,e=V(a+e)-.5,p=V(a+d)-.5,d=V(a-d)+.5;return["M",g,m,"L",g,c,l,c,l,m,l,c,g,c,"Z","M",a,c-1,"L",d,b,n,b,n,h,e,h,e,b,p,b,"Z"]}});c.rendererRoot=b("renderer.root",{standaloneInit:!1,isRenderer:!0,inited:!1,callbacks:[],init:function(a,b,c){var d=this,e=d.container=a&&a.containerElement||b.chart.renderTo,g=b.tooltip,h=d.layer,l,n;d.options=b;d.logic=a;d.definition=a.dataObj;d.smartLabel=a.smartLabel;d.numberFormatter=a.numberFormatter;d.fusionCharts=
a.chartInstance;d.linkClickFN=a.linkClickFN;n=(l=b.chart)&&l.animation&&l.animation.duration;d.animationCompleteQueue=[];e.innerHTML=N;e=d.paper=d.fusionCharts.jsVars.paper=new K(e,e.offsetWidth||a.width,e.offsetHeight||a.height);!1!==v.core.options._useSVGDescTag&&e._desc&&(l=a.friendlyName||"Vector image",d.definition&&d.definition.chart&&d.definition.chart.caption&&(l+=' with caption "'+d.definition.chart.caption+'"'),e._desc(l));d.chartWidth=e.width;d.chartHeight=e.height;d.elements||(d.elements=
{});h||(h=d.layers={},h.background=h.background||e.group("background"),h.dataset=h.dataset||e.group("dataset").insertAfter(h.background),h.tracker=h.tracker||e.group("hot").insertAfter(h.dataset));g&&!1!==g.enabled&&(e.tooltip(g.style,g.shadow,g.constrain),h.tracker.trackTooltip(!0),h.dataset.trackTooltip(!0));d.disposeChartStyleSheet();d.setMargins();d.drawBackground();d.drawButtons();d.drawGraph();b.legend&&b.legend.enabled&&d.drawLegend();d.drawCaption();d.drawLogo();d.setChartEvents();d.drawLabels&&
d.drawLabels();ga(b.callbacks,function(a){a.apply(d,this)},[a]);ga(d.callbacks,function(a){a.apply(d,this)},[a]);d.fusionCharts.annotations&&d.fusionCharts.annotations.draw(d);d.createChartStyleSheet();d.options.nativeMessage||n||v.raiseEvent("internal.animationComplete",{},d.fusionCharts);d.hasRendered=!0;c&&c(d)},disposeChartStyleSheet:function(){this.paper.cssClear()},createChartStyleSheet:function(){this.paper.cssRender()},addCSSDefinition:function(a,b){var c=this.paper;b.color&&(b.fill=b.color);
c.cssAddRule(a,b)},animationCompleteQueue:[],animationComplete:function(){var a,b,c,d;this.animatedElements=this.animatedElements?++this.animatedElements:1;if(this.animatedElements===this.animatingElementsCount){c=this.animationCompleteQueue;a=0;for(b=c.length;a<b;a++)d=c[a],d.fn&&d.fn.call(d.scope);this.animationCompleteQueue=[];v.raiseEvent("internal.animationComplete",{},this.fusionCharts)}},getAnimationCompleteFn:function(){var a=this;a.animatingElementsCount=a.animatingElementsCount?++a.animatingElementsCount:
1;return function(){a.animationComplete()}},reinit:function(a,b,c){this.hasRendered||this.init(b,c)},dispose:function(){var a=this.eventListeners,b=a&&a.length;this.disposing=!0;if(b)for(;b--;)a[b].unlisten();if(this.toolbar&&this.toolbar.length){for(;this.toolbar.length;)a=this.toolbar.pop(),a.remove();this.toolbar.add=null}if(this.menus&&this.menus.length)for(;this.menus.length;)a=this.menus.pop(),a.destroy();this.paper&&(this.paper.clear(),this.paper.remove(),delete this.paper);this.exportIframe&&
(this.exportIframe.parentNode.removeChild(this.exportIframe),delete this.exportIframe);delete this.disposing;this.container=null;this.disposed=!0},onContainerClick:function(a){var b=a.target||a.originalTarget||a.srcElement||a.relatedTarget||a.fromElement,d=a.data,e=d.fusionCharts;a=c.getMouseCoordinate(d.container,a.originalEvent);e.ref&&(e=H({height:e.args.height,width:e.args.width,pixelHeight:e.ref.offsetHeight,pixelWidth:e.ref.offsetWidth,id:e.args.id,renderer:e.args.renderer,container:e.options.containerElement},
a),v.raiseEvent("chartclick",e,d.logic.chartInstance),b&&b.ishot&&d||d.options.chart.link&&d.linkClickFN.call(d,d))},onContainerMouseMove:function(a){var b=a.data,d=b.fusionCharts;a=c.getMouseCoordinate(b.container,a.originalEvent);d.ref&&(d=H({height:d.args.height,width:d.args.width,pixelHeight:d.ref.offsetHeight,pixelWidth:d.ref.offsetWidth,id:d.args.id,renderer:d.args.renderer,container:d.options.containerElement},a),v.raiseEvent("chartMouseMove",d,b.logic.chartInstance))},onContainerRollOver:function(a){var b=
a.data,d=b.fusionCharts;a=c.getMouseCoordinate(b.container,a.originalEvent);d.ref&&(d=H({height:d.args.height,width:d.args.width,pixelHeight:d.ref.offsetHeight,pixelWidth:d.ref.offsetWidth,id:d.args.id,renderer:d.args.renderer,container:d.options.containerElement},a),v.raiseEvent("chartRollOver",d,b.logic.chartInstance))},onContainerRollOut:function(a){var b=a.chart,d=b.fusionCharts;a=c.getMouseCoordinate(b.container,a.event);d.ref&&(d=H({height:d.args.height,width:d.args.width,pixelHeight:d.ref.offsetHeight,
pixelWidth:d.ref.offsetWidth,id:d.args.id,renderer:d.args.renderer,container:d.options.containerElement},a),v.raiseEvent("chartRollOut",d,b.logic.chartInstance))},mouseStateIn:!1,winMouseHover:function(b){var c=b.originalEvent,c=c.target||c.originalTarget||c.srcElement||c.relatedTarget||c.fromElement,d=b.data,e=d.paper;b={chart:d,event:b.originalEvent};P?e.getById(c.parentNode.raphaelid)||(d.onContainerRollOut(b),d.mouseStateIn=!1,w(a,"mouseover",d.winMouseHover)):c.viewportElement||(d.mouseStateIn=
!1,d.onContainerRollOut(b),w(p,"mouseover",d.winMouseHover))},chartHoverManager:function(){return function(b){var c=b.type,d=b.data,e=d.eventListeners||(d.eventListeners=[]);"mouseover"!==c&&"touchstart"!==c||!1!==d.mouseStateIn||(d.mouseStateIn=!0,d.onContainerRollOver(b),e.push(q(P?a:p,"mouseover",d.winMouseHover,d)))}}(),setChartEvents:function(){var a=this.options,b=this.eventListeners||(this.eventListeners=[]),a=this.link=a.chart.link,c=this.container,d=s(this.definition&&this.definition.chart.enablechartmousemoveevent,
0);w(c,"click",this.onContainerClick);b.push(q(c,"click",this.onContainerClick,this));w(this.paper.canvas,"mouseover",this.chartHoverManager,this);w(this.paper.canvas,"touchstart",this.chartHoverManager,this);w(this.paper.canvas,"mouseout",this.chartHoverManager,this);w(this.paper.canvas,"touchend",this.chartHoverManager,this);b.push(q(this.paper.canvas,"mouseover touchstart mouseout touchend",this.chartHoverManager,this));w(c,"mousemove",this.onContainerMouseMove,this);w(c,"touchmove",this.onContainerMouseMove,
this);d&&b.push(q(c,"mousemove touchmove",this.onContainerMouseMove,this));this.paper.canvas.style.cursor=K.svg?a&&"pointer"||"default":a&&"hand"||"default"},onOverlayMessageClick:function(){var a=this.elements;K.animation({opacity:0},1E3);a.messageText&&a.messageText.hide();a.messageVeil&&a.messageVeil.hide()},showMessage:function(a,b){var c=this.paper,d=this.options.chart,e=this.elements,g=e.messageText,h=e.messageVeil,l=c.width,n=c.height;h||(h=e.messageVeil=c.rect(0,0,l,n).attr({fill:"rgba(0,0,0,0.2)",
stroke:"none"}));h.show().toFront().attr("cursor",b?"pointer":"default")[b?"click":"unclick"](this.onOverlayMessageClick,this);g||(g=e.messageText=c.text(l/2,n/2,N).attr({fill:"rgba(255,255,255,1)","font-family":"Verdana,sans","font-size":10,"line-height":14,ishot:!0}));a=a||N;this.smartLabel.setStyle({"line-height":"14px","font-family":"Verdana,sans","font-size":"10px"});c=this.smartLabel.getSmartText(a,l-(d.spacingRight||0)-(d.spacingLeft||0),n-(d.spacingTop||0)-(d.spacingBotton||0));g.attr({text:c.text,
ishot:!0,cursor:b?"pointer":"default"})[b?"click":"unclick"](this.onOverlayMessageClick,this).show().toFront()},drawButtons:function(){var a=this,b=a.logic,c="zoomline"===b.rendererId,d=a.paper,e=a.elements,g=a.toolbar||(a.toolbar=[]),h=a.menus||(a.menus=[]),l=a.layers,n=a.options,m=n[ba],b=m&&m.outCanvasStyle||b.outCanvasStyle||{},m=n.chart.toolbar||{},p=m.hDirection,s=c?1:m.vDirection,q=m.button||{},t=q.scale,v=q.width*q.scale,w=q.height*q.scale,z=p*(q.spacing*q.scale+v),C=q.radius,D=(n=n.exporting)&&
n.buttons||{},H=D.exportButton&&!1!==D.exportButton.enabled,D=D.printButton&&!1!==D.printButton.enabled,J,K=l.buttons||(l.buttons=d.group("buttons").trackTooltip(!0));g.y||(g.y=(c?0:m.y)+m.vMargin*s+oa(0,w*s));g.x||(g.x=m.x+m.hMargin*p-Ra(0,v*p));g.count=0;g.add=function(a,b,c){c="string"===typeof c?{tooltip:c}:c||{};var e=0===g.count?z-p*q.spacing*q.scale:z,e=c.x||(g.x+=e),k=c.tooltip||"";g.push(a=d.button(e,c.y||g.y,Pa,a,{width:v,height:w,r:C,id:g.count++,verticalPadding:q.symbolHPadding*t,horizontalPadding:q.symbolHPadding},
K).attr({ishot:!0,fill:[q.fill,q.labelFill,q.symbolFill,q.hoverFill],stroke:[q.stroke,q.symbolStroke],"stroke-width":[q.strokeWidth,q.symbolStrokeWidth]}).tooltip(k).buttonclick(b));return a};H&&(h.push(J=e.exportMenu=pa({chart:a,basicStyle:b,items:function(b){var c=[],d=function(b){return function(){a.logic.chartInstance.exportChart({exportFormat:b})}},e;for(e in b)c.push({text:b[e],onclick:d(e)});return c}(n.exportformats)})),e.exportButton=g.add("exportIcon",function(a,b){return function(){J.visible?
J.hide():J.show({x:a,y:b+1})}}(g.x+v,g.y+w),{tooltip:"Export chart"}));D&&(e.printButton=g.add("printIcon",function(){a.print()},{tooltip:"Print chart"}))},setMargins:function(){var a=this.paper,b=this.options.chart||{},c=V;this.canvasBorderWidth=b.plotBorderWidth||0;this.canvasTop=c(b.marginTop)||0;this.canvasLeft=c(b.marginLeft)||0;this.canvasWidth=c(a.width-(b.marginLeft||0)-(b.marginRight||0));this.canvasHeight=c(a.height-(b.marginTop||0)-(b.marginBottom||0));this.canvasRight=this.canvasLeft+
this.canvasWidth;this.canvasBottom=this.canvasTop+this.canvasHeight},drawBackground:function(){var a=this,b=a.paper,c=a.layers,d=a.elements,e=c.background,g=d.background,h=d.chartborder,m=a.options.chart||{},p=n(m.borderWidth)||0,s=.5*p,q=2*p,t=m.borderWidth||0,w=a.chartHeight,z=a.chartWidth,C=d.backgroundImage,D=m.bgSWF,H=m.bgSWFAlpha/100,J=m.bgImageDisplayMode,K=m.bgImageVAlign,G=m.bgImageHAlign,M=m.bgImageScale,I=t+","+t+","+(z-2*t)+","+(w-2*t),N,ca,L,P,R,V,jb;b.canvas.style.backgroundColor=m.containerBackgroundColor;
!e&&(e=c.background=b.group("background"));c={x:p,y:p,width:b.width-q,height:b.height-q,stroke:"none",fill:$(m.backgroundColor)};g?g.attr(c):g=d.background=b.rect(c,e);c={x:s,y:s,width:b.width-p,height:b.height-p,stroke:m.borderColor,"stroke-width":p,"stroke-dasharray":m.borderDashStyle,fill:"none",r:m.borderRadius||0};h?h.attr(c):h=d.chartborder=b.rect(c,e);D&&(N=new l,R=L=1,C=[],N.onload=function(){ca=U(J,K,G,M,t,z,w,N);ca["clip-rect"]=I;if(ca.tileInfo)for(L=ca.tileInfo.xCount,R=V=ca.tileInfo.yCount,
jb=ca.y,delete ca.tileInfo;L&&ca.width&&ca.height;)V-=1,P?(C[void 0]=P.clone().attr({x:ca.x,y:ca.y}),e.appendChild(C[void 0])):C[void 0]=P=b.image(D,e).attr(ca).css({opacity:H}),ca.y+=ca.height,0===V&&(V=R,L-=1,ca.x+=ca.width,ca.y=jb);else C[0]=b.image(D,e),C[0].attr(ca).css({opacity:H}).attr({visibility:Ga,"clip-rect":I});v.raiseEvent("BackgroundLoaded",{url:D,bgImageAlpha:100*H,bgImageDisplayMode:J,bgImageVAlign:K,bgImageHAlign:G,bgImageScale:M,imageWidth:N.width,imageHeight:N.height},a.logic.chartInstance)},
N.onerror=function(b){v.raiseEvent("BackgroundLoadError",{url:D,bgImageAlpha:100*H,error:b,bgImageDisplayMode:J,bgImageVAlign:K,bgImageHAlign:G,bgImageScale:M},a.logic.chartInstance)},N.src=D,d.backgroundImage=C)},drawGraph:function(){var a=this,b=a.paper,c=a.plots=a.elements.plots,d=a.logic,e=a.layers,g=a.options,h=a.elements,l=g.chart,g=a.datasets=g.series,n=t(l.rendererId,l.defaultSeriesType),m=e.background,p=e.dataset=e.dataset||b.group("dataset").insertAfter(m),s,q,m=function(a,b){return function(e){var k=
c[a],g,h={hcJSON:{series:[]}},l=h.hcJSON.series[a]||(h.hcJSON.series[a]={}),n=d.chartInstance.jsVars._reflowData;g=(e=t(e,!k.visible))?"visible":"hidden";ga(k.graphics,function(a){!0!==a.data("alwaysInvisible")&&a.attr("visibility",g)});k.visible=e;b.visible=e;l.visible=e;H(n,h,!0)}},v=function(b){return function(d,e){a["legendClick"+n]&&a["legendClick"+n](c[b],d,e)||a.legendClick&&a.legendClick(c[b],d,e)}},w=function(b){return function(){return a.getEventArgs&&a.getEventArgs(c[b])}},z=function(b,
d,e){return function(g,h){d.call(a,c[b],e,{numUpdate:g,hasAxisChanged:h})}};e.tracker=e.tracker||b.group("hot").insertAfter(p);a.drawCanvas();a.drawAxes();c||(c=a.plots=a.plots||[],h.plots=c);e=0;for(h=g.length;e<h;e++)b=g[e]||{},p=b.updatePlot="updatePlot"+L(ja(b.type,b.plotType,n)),p=a[p],s=b.drawPlot="drawPlot"+L(ja(b.type,b.plotType,n)),s=a[s]||a.drawPlot,(q=c[e])||(c.push(q={index:e,items:[],data:b.data||[],name:b.name,userID:b.userID,setVisible:m(e,b),legendClick:v(e),getEventArgs:w(e),realtimeUpdate:z(e,
p||s,b)}),b.plot=q,b.legendClick=q.legendClick,b.getEventArgs=q.getEventArgs,b.setVisible=q.setVisible),s.call(a,q,b);l.hasScroll&&(a.drawScroller(),a.finalizeScrollPlots())},drawPlot:e,drawCanvas:e,drawAxes:e,drawScroller:function(){},drawLegend:function(){var a=this,b=a.options,c=a.paper,d=b.chart||{},e=b.legend,g=e.scroll,b={elements:{}},h=b.elements,l=a.layers.legend,n=h.box,m=h.caption,p=h.elementGroup,q="vertical"===e.layout,t=d.marginBottom,v=d.spacingBottom,w=d.spacingLeft,z=d.spacingRight,
C=c.width,D=c.height,J=a.canvasTop,G=e.width,M=e.height,I=e.borderRadius,P=e.backgroundColor,ca=e.borderColor,R=e.borderWidth||0,$=.5*R,V=.5*R+2,d=s(e.padding,4),U=.5*d,jb,Z,aa,r,u,B,F,f=g&&g.enabled;q?(q=C-z-G,t=J+.5*(D-t-J-M)+(e.y||0)):(q=w+.5*(C-w-z-G)+(e.x||0),t=D-v-M);v=K.crispBound(q,t,G,M,R);q=v.x;t=v.y;G=v.width;M=v.height;l||(l=a.layers.legend=c.group("legend").insertBefore(a.layers.tracker).translate(q,t).attr("class","fusioncharts-legend"));a.addCSSDefinition(".fusioncharts-legend .fusioncharts-caption",
H({"text-anchor":e.title.align},e.title.style));e.legendAllowDrag&&(a.addCSSDefinition(".fusioncharts-legend",{cursor:"move"}),Z=q,aa=t,l.drag(function(a,b){r=B+a;u=F+b;r+G+V>C&&(r=C-G-V);u+M+V>D&&(u=D-M-V);r<V&&(r=V);u<V&&(u=V);l.translate(r-Z,u-aa);Z=r;aa=u},function(){B=Z;F=aa}));I={x:0,y:0,width:G,height:M,r:I,stroke:ca,"stroke-width":R,fill:P||"none",ishot:e.legendAllowDrag};n?n.attr(I):n=h.box=c.rect(I,l);n.shadow(e&&e.shadow);f?(jb=M-d,n=","+G+","+jb,p=h.elementGroup=c.group("legenditems",
l).attr({"clip-rect":"0,"+U+n}),g=h.scroller||(h.scroller=c.scroller(G-10+U-R,$,10,M-R,!1,{scrollPosition:g.scrollPosition||0,scrollRatio:(jb+d)/e.totalHeight,showButtons:!1,displayStyleFlat:g.flatScrollBars},l)),g.attr("fill",e.legendScrollBgColor).scroll(function(b){p.transform(["T",0,(jb-e.totalHeight)*b]);H(a.fusionCharts.jsVars._reflowData,{hcJSON:{legend:{scroll:{position:b}}}},!0)})):p=h.elementGroup=l;if(e.title&&e.title.text!==N){switch(e.title.align){case "start":g=d;break;case "end":g=
G-d-(f?10:0);break;default:g=.5*G}I={"class":"fusioncharts-caption","text-anchor":e.title.align,text:e.title.text,title:e.title.originalText||"",x:g,y:d,fill:e.title.style.color,"vertical-align":"top","line-height":e.title.style.lineHeight};m?m.attr(I):m=h.caption=c.text(I,p).attr("class","fusioncharts-caption")}this["draw"+L(e.type||"point")+"LegendItem"](b)},drawPointLegendItem:function(a){var b=this,c=b.paper,d=b.options,e=d.series,g=d.chart.defaultSeriesType,d=d.legend,h=d.legendHeight,l=d.symbolPadding,
n=d.textPadding||2,m=s(d.padding,4),p=d.itemHoverStyle,q=d.itemHiddenStyle,t=d.itemStyle,w=t.color,q=q&&q.color||"#CCCCCC",C=p&&p.color||w,p=d.symbol3DLighting,D=d.symbolWidth,G=!1!==d.interactiveLegend,K=a.elements,M=K.elementGroup;a=a.item=[];var K=K.item=[],I=[],N={line:!0,spline:!0,scatter:!0,bubble:!0,dragnode:!0,zoomline:!0},L,P,ca,R,V,U,Z,jb,Y,aa,r,u,B,F,f,Ma,O,X,pb,qb,ua;u=0;for(B=e.length;u<B;u+=1)if((L=e[u])&&!1!==L.showInLegend)if(jb=L.type||g,"point"===L.legendType)for(L=L.data||[],V=
0,U=L.length;V<U;V+=1)ca=L[V]||{},!1!==ca.showInLegend&&(ca._legendType=jb,I.push(ca));else switch(L._legendType=jb,jb){case "pie":case "pie3d":case "funnel":case "pyramid":I=L.data;break;default:I.push(L)}I.sort(function(a,b){return(a.legendIndex||0)-(b.legendIndex||0)||a.__i-b.__i});d.reversed&&I.reverse();e=d.initialItemX||0;g=d.initialItemY||0;V=function(a){var c=this.data("legendItem"),d=c.getEventArgs?c.getEventArgs():{},e;a=J(b.logic.chartInstance.ref,a);d.chartX=a.chartX;d.chartY=a.chartY;
d.pageX=a.pageX;d.pageY=a.pageY;d.preventDefaults=function(){e=!0};v.raiseEvent("LegendItemClicked",d,b.logic.chartInstance);G&&!e&&c.legendClick()};U=function(a){var c=this.data("legendItem"),d=c.getEventArgs?c.getEventArgs():{};a=J(b.logic.chartInstance.ref,a);var e=!1!==c.visible,c=c.plot.legend.elements.legendItemText;d.chartX=a.chartX;d.chartY=a.chartY;d.pageX=a.pageX;d.pageY=a.pageY;e&&c&&c.attr({fill:C});v.raiseEvent("LegendItemRollover",d,b.logic.chartInstance)};Z=function(a){var c=this.data("legendItem"),
d=c.getEventArgs?c.getEventArgs():{};a=J(b.logic.chartInstance.ref,a);var e=!1!==c.visible,c=c.plot.legend.elements.legendItemText;d.chartX=a.chartX;d.chartY=a.chartY;d.pageX=a.pageX;d.pageY=a.pageY;e&&c&&c.attr({fill:w});v.raiseEvent("LegendItemRollout",d,b.logic.chartInstance)};b.addCSSDefinition(".fusioncharts-legend .fusioncharts-legenditem",d.itemStyle);u=0;for(B=I.length;u<B;u+=1)!1!==I[u].showInLegend&&(ua={elements:{},hiddenColor:q,itemTextColor:w,hoverColor:C},a.push(ua),K.push(ua.elements),
L=I[u],Y=e+L._legendX+m,aa=g+L._legendY-m,r=L._legendH,P=L._legendType||jb,ca=!1!==L.visible,R=ua.itemLineColor=$(L.color||{}),L.plot.legend=ua,ua.elements.legendItemText=c.text({"class":"fusioncharts-legenditem",x:Y+h+n-2,y:aa+(L._legendTestY||0),text:L.name,fill:ca?w:q,"vertical-align":"top","text-anchor":"start",cursor:t.cursor||"pointer",ishot:G,"line-height":t.lineHeight,"font-size":t.fontSize},M).data("legendItem",L),N[P]?(P=aa+l+.5*D,L.lineWidth&&(qb=ua.elements.legendItemLine=c.path({"stroke-width":L.lineWidth,
stroke:ca?R:q,cursor:t.cursor||"pointer",ishot:G,path:["M",Y+l,P,"L",Y+l+D,P]},M).data("legendItem",L)),L&&(O=L.marker)&&!1!==O.enabled&&(ua.symbolStroke=$(ja((X=O.lineColor)&&(X.FCcolor&&X.FCcolor.color.split(",")[0]||X),R)),p?O.fillColor&&O.fillColor.FCcolor?(P=H({},O.fillColor),P.FCcolor.alpha="100"):P=ja(O.fillColor,R):P={FCcolor:{color:ja((pb=O.fillColor)&&(pb.FCcolor&&pb.FCcolor.color.split(",")[0]||pb),R),angle:0,ratio:"0",alpha:"100"}},ua.symbolColor=$(P),F=.5*D,R=Y+l+F,P=aa+l+F,qb&&(F*=.6),
f=O.symbol.split("_"),Ma="spoke"===f[0]?1:0,P=f[1]?ua.elements.legendItemSymbol=c.polypath(f[1],R,P,F,O.startAngle,Ma,M):ua.elements.legendItemSymbol=c.circle(R,P,F,M),P.data("legendItem",L).attr({cursor:t.cursor||"pointer",stroke:ca?ua.symbolStroke:q,fill:ca?ua.symbolColor:q,"stroke-width":1,ishot:G}))):(P=b.getSymbolPath(Y+l,aa+l,D,D,P,L,!p),ua.symbolColor=$(P.color),ua.symbolStroke=$(P.strokeColor),P=ua.elements.legendItemSymbol=c.path({path:P.path,"stroke-width":P.strokeWidth,stroke:ca?ua.symbolStroke:
q,fill:ca?ua.symbolColor:q,cursor:t.cursor||"pointer",ishot:G},M).data("legendItem",L)),ua.elements.legendItemBackground=c.rect({x:Y,y:aa,width:L._totalWidth,height:r,r:0,fill:$(L.legendFillColor||z),"stroke-width":1,stroke:$(L.legendBorderColor||"none"),cursor:t.cursor||"pointer",ishot:G},M).click(V).mouseover(U).mouseout(Z).data("legendItem",L));d.reversed&&I.reverse()},drawCaption:function(){var a=this.options.chart,b=this.options.title,c=this.options.subtitle,d=this.paper,e=this.smartLabel,g=
this.elements,h=this.layers,l=h.caption,n=g.caption,m=g.subcaption,p=b.text,s=c&&c.text,q=b.x,t;!p&&!s||l||(l=h.caption=d.group("caption"),h.tracker?l.insertBefore(h.tracker):l.insertAfter(h.dataset));p?(this.addCSSDefinition(".fusioncharts-caption",b.style),t={"class":"fusioncharts-caption",text:b.text,fill:b.style.color,x:q,y:b.y||a.spacingTop||0,"text-anchor":b.align||"middle","vertical-align":b.verticalAlign||"top",visibility:"visible",title:b.originalText||""},n?n.attr(t):n=g.caption=d.text(t,
l).attr("class","fusioncharts-caption"),n.css(b.style),e?(e.setStyle(b.style),t=e.getOriSize(b.text).height):t=10):n&&(n=g.caption=n.remove());s?(this.addCSSDefinition(".fusioncharts-subcaption",c.style),t={"class":"fusioncharts-subcaption",text:c.text,title:c.originalText||"",fill:c.style.color,x:q,y:p?n.attrs.y+t+2:b.y||a.spacingTop||0,"text-anchor":b.align||"middle","vertical-align":"top",visibility:"visible"},m?m.attr(t):m=g.subcaption=d.text(t,l).attr("class","fusioncharts-subcaption"),m.css(c.style)):
m&&(g.subcaption=m.remove());p||s||!l||(h.caption=l.remove())},drawLogo:function(){var a=this,b=a.paper,c=a.elements,d=a.options,e=d.credits,g=d.chart||{},h=g.borderWidth||0,n=a.chartHeight,m=a.chartWidth,s=c.logoImage,q=g.logoURL,t=g.logoAlpha/100,w=g.logoPosition,z=g.logoLink,C=g.logoScale,D=g.logoLeftMargin,H=g.logoTopMargin,d={tr:{vAlign:$a,hAlign:db},bl:{vAlign:sb,hAlign:nb},br:{vAlign:sb,hAlign:db},cc:{vAlign:"middle",hAlign:"middle"}},G,K,M;a.logic&&e.enabled&&b.text().attr({text:e.text,x:6,
y:n-4,"vertical-align":sb,"text-anchor":"start",fill:"rgba(0,0,0,0.5)",title:e.title||""}).css({fontSize:9,fontFamily:"Verdana,sans",cursor:"pointer",_cursor:"hand"}).click(function(){try{p.open(e.href)}catch(a){(p.top||p).location.href=e.href}});q&&(G=new l,(M=d[w])||(M={vAlign:$a,hAlign:nb}),G.onload=function(){a.disposed||b.disposed||(K=U("none",M.vAlign,M.hAlign,C,h,m,n,G),P&&(K.w=K.width||0,K.h=K.height||0),K.src=q,s=a.paper.image(K).translate(D,H).css("opacity",t),z&&s.css({cursor:"pointer",
_cursor:"hand"}),s.mouseover(function(b){b=J(a.logic.chartInstance.ref,b);v.raiseEvent("LogoRollover",{logoURL:q,logoAlpha:100*t,logoPosition:w||"tl",logoScale:C,logoLink:z,chartX:b.chartX,chartY:b.chartY,pageX:b.pageX,pageY:b.pageY},a.logic.chartInstance)}),s.mouseout(function(b){b=J(a.logic.chartInstance.ref,b);v.raiseEvent("LogoRollout",{logoURL:q,logoAlpha:100*t,logoPosition:w||"tl",logoScale:C,logoLink:z,chartX:b.chartX,chartY:b.chartY,pageX:b.pageX,pageY:b.pageY},a.logic.chartInstance)}),s.click(function(b){b=
J(a.logic.chartInstance.ref,b);v.raiseEvent("LogoClick",{logoURL:q,logoAlpha:100*t,logoPosition:w||"tl",logoScale:C,logoLink:z,chartX:b.chartX,chartY:b.chartY,pageX:b.pageX,pageY:b.pageY},a.logic.chartInstance,void 0,function(){z&&g.events.click.call({link:z})})}),v.raiseEvent("LogoLoaded",{logoURL:q,logoAlpha:100*t,logoPosition:w||"tl",logoScale:C,logoLink:z},a.logic.chartInstance))},G.onerror=function(b){v.raiseEvent("LogoLoadError",{logoURL:q,logoAlpha:100*t,logoPosition:w||"tl",logoScale:C,logoLink:z,
error:b},a.logic.chartInstance)},G.src=q,c.logoImage=s)},getEventArgs:function(a){a=a||{};return{datasetName:a.name,datasetIndex:a.index,id:a.userID,visible:a.visible}},legendClick:function(a,b){var c=a.legend,d=c&&c.elements,e=d&&d.legendItemText,g=d&&d.legendItemSymbol,d=d&&d.legendItemLine,h=c&&c.hiddenColor,l=c&&c.itemLineColor,n=c&&c.itemTextColor,m=c&&c.symbolColor,p=c&&c.symbolStroke,c=ja(b,!a.visible);a.setVisible(b);c?(g&&g.attr({fill:m||l,stroke:p}),e&&e.attr({fill:n}),d&&d.attr({stroke:l})):
(g&&g.attr({fill:h,stroke:h}),e&&e.attr({fill:h}),d&&d.attr({stroke:h}));if((e=this.datasets&&this.datasets[a.index]&&this.datasets[a.index].relatedSeries)&&e instanceof Array&&0<e.length)for(g=e.length;g--;)d=parseFloat(e[g]),d=this.plots[d],d.legendClick.call(d,c,!1)},exportChart:function(b){var d=this,e=d.fusionCharts,g=d.options;b="object"===typeof b&&function(a){var b={},c;for(c in a)b[c.toLowerCase()]=a[c];return b}(b)||{};var h=H(H({},g.exporting),b),n=(h.exportformat||"png").toLowerCase(),
m=h.exporthandler,s=(h.exportaction||N).toLowerCase(),q=h.exporttargetwindow||N,t=h.exportfilename,w=h.exportparameters,z=h.exportcallback,C=h.exportwithimages;if(!g.exporting||!g.exporting.enabled||!m)return!1;v.raiseEvent("beforeExport",h,e,void 0,function(){function b(){var g;if("download"===s){/webkit/ig.test(p.navigator.userAgent)&&"_self"===q&&(q=J=k+"export_iframe",d.exportIframe||(d.exportIframe=G=ea("IFRAME",{name:J,width:"1px",height:"1px"},a.body),G.style.cssText="position:absolute;left:-10px;top:-10px;"));
K=ea("form",{method:"POST",action:m,target:q,style:"display:none;"},a.body);for(g in H)ea("input",{type:"hidden",name:g,value:H[g]},K);K.submit();a.body.removeChild(K);K=void 0;return!0}M=new v.ajax(function(a){var b={};a.replace(RegExp("([^?=&]+)(=([^&]*))?","g"),function(a,c,d,e){b[c]=e});z&&p[z]&&"function"===typeof p[z]&&p[z].call(p,b);c.raiseEvent("exported",b,e)},function(a){a={statusCode:0,statusMessage:"failure",error:a,DOMId:k,width:T.width,height:T.height};z&&p[z]&&"function"===typeof p[z]&&
p[z].call(p,a);c.raiseEvent("exported",a,e,[a])});for(g in H)H.hasOwnProperty(g)&&(H[g]=encodeURIComponent(H[g]));M.post(m,H)}var g=d.layers.buttons,k=e.id,T=d.paper,D=v&&v.hcLib,H,J,G,K,M,I,D=D&&D.isCanvasElemSupported(),L,N,P=0,R={},V,$,aa,r,u={};g&&g.attr("visibility","hidden");I=T.toSVG(C&&D&&"svg"!==n);g&&g.attr("visibility","visible");I=I.replace(/(\sd\s*=\s*["'])[M\s\d\.]*(["'])/ig,"$1M 0 0 L 0 0$2");H={charttype:e.chartType(),stream:I,stream_type:"svg",meta_bgColor:h.bgcolor||"",meta_bgAlpha:h.bgalpha||
"1",meta_DOMId:e.id,meta_width:T.width,meta_height:T.height,parameters:["exportfilename="+t,"exportformat="+n,"exportaction="+s,"exportparameters="+w].join("|")};-1!==I.indexOf("<image ")?D?(N=(L=I.match(/<image [^\>]*\>/gi))&&L.length,V=function(a){a=a&&a.split("/");a=a[a.length-1].split(".");return{name:a[0],type:a[1]||"png"}},$=function(b,c,d,e,g){var k=new l;k.onload=function(){var h="image/"+d,l=a.createElement("canvas"),n=l.getContext("2d"),m="";l.width=k.width;l.height=k.height;n.drawImage(k,
0,0);m=l.toDataURL(h);u[b]=m;r(m,c,d,e,g)};k.onerror=function(){aa()};k.src=b},r=function(a,b,c,d,e){R["image_"+P]={name:b,type:c,encodedData:a,width:d,height:e};aa()},aa=function(){var a={},c,d,e,g,k,h=!1;P<N?(c=L[P].replace(/\"/g,""),c.split(" ").forEach(function(b){b=b.split("=");a[b[0]]=b[1]}),a["xlink:href"]&&(c=(d=V(a["xlink:href"]))&&d.name||"temp_image_"+P,e=d&&d.type||"png",g=parseInt(a.width,10),k=parseInt(a.height,10),d=c+"."+e,u[a["xlink:href"]]?h=!0:$(a["xlink:href"],c,e,g,k)),c='xlink:href="'+
a["xlink:href"],I=I.replace(c,'xlink:href="temp/'+d),P+=1,h&&aa()):(H.encodedImgData=JSON.stringify(R),H.stream=I,b())},aa()):b():b();v.raiseEvent("exportDataReady",H,e)},function(){v.raiseEvent("exportCancelled",h,e)})},print:function(b){var c=this,d=H({},b);if(c.isPrinting)return!1;v.raiseEvent("BeforePrint",d,c.logic.chartInstance,void 0,function(){var b=c.container,e=c.elements,g=e.printButton,k=e.exportButton,h=[],l=b.parentNode,e=a.body||a.getElementsByTagName("body")[0],n=e.childNodes;c.isPrinting=
!0;ga(n,function(a,b){1==a.nodeType&&(h[b]=a.style.display,a.style.display="none")});!1!==d.hideButtons&&(g&&"hidden"!=g.attrs.visibility&&g.attr({visibility:"hidden"}),k&&"hidden"!=k.attrs.visibility&&k.attr({visibility:"hidden"}));e.appendChild(b);p.print();setTimeout(function(){g&&g.attr({visibility:"visible"});k&&k.attr({visibility:"visible"});l.appendChild(b);ga(n,function(a,b){1==a.nodeType&&(a.style.display=h[b])});c.isPrinting=!1;v.raiseEvent("PrintComplete",d,c.logic.chartInstance)},1E3)},
function(){v.raiseEvent("PrintCancelled",d,c.logic.chartInstance)})},getSymbolPath:function(a,b,c,d,e,g,h){var l=["M"],n,m,p;n=(g.color&&Fb("string"===typeof g.color?g.color:g.color.FCcolor.color)||N).replace(R,"");p=vb(n,60).replace(R,Y);h?n={FCcolor:{color:n,angle:0,ratio:"0",alpha:"100"}}:(h=vb(n,40),n={FCcolor:{color:n+","+n+","+h+","+n+","+n,ratio:"0,30,30,30,10",angle:0,alpha:"100,100,100,100,100"}});switch(e){case "column":case "dragcolumn":case "column3d":g=.25*c;e=.5*g;h=.7*d;m=.4*d;l=l.concat([a,
b+d,"l",0,-h,g,0,0,h,"z","m",g+e,0,"l",0,-d,g,0,0,d,"z","m",g+e,0,"l",0,-m,g,0,0,m,"z"]);n.FCcolor.angle=270;break;case "bar":case "bar3d":g=.3*c;e=.6*c;h=d/4;m=h/2;l=l.concat([a,b,"L",a+e,b,a+e,b+h,a,b+h,"Z","M",a,b+h+m,"L",a+c,b+h+m,a+c,b+h+m+h,a,b+2*h+m,"Z","M",a,b+2*(h+m),"L",a+g,b+2*(h+m),a+g,b+d,a,b+d,"Z"]);break;case "area":case "area3d":case "areaspline":case "dragarea":h=.6*d;m=.2*d;d*=.8;l=l.concat([a,b+d,"L",a,b+h,a+.3*c,b+m,a+.6*c,b+h,a+c,b+m,a+c,b+d,"Z"]);n.FCcolor.angle=270;break;case "pie":case "pie3d":g=
.5*c;e=.9*g;c=a+g+1;d=b+g-1;a=a+g-1;b=b+g+1;l=l.concat(["M",c,d,"L",c,d-e+1,"A",e-1,e-1,0,0,1,c+e-1,d,"Z","M",a,b,"L",a,b-e,"A",e,e,0,1,0,a+e,b,"Z"]);n.FCcolor.radialGradient="1";n.FCcolor.ratio="0,0,0,100,0";break;case "boxandwhisker2d":l=l.concat([a,b,"L",a+c,b,a+c,b+d,a,b+d,"Z"]);n=g.color;p="#000000";break;default:l=l.concat([a,b,"L",a+c,b,a+c,b+d,a,b+d,"Z"]),n.FCcolor.angle=270,n.FCcolor.ratio="0,70,30"}return{path:l,color:n,strokeWidth:.5,strokeColor:p}}});d.prototype={configure:function(){var a=
this.axisData,b=this.renderer,c=this.isVertical,d=this.isReverse,e=b.options,g=e.chart,h=g.marginBottom,g=g.marginRight,l=b.canvasTop,n=b.canvasLeft,m=this.min=a.min,m=this.span=(this.max=a.max)-m,n=this.startX=s(a.startX,n),l=this.startY=s(a.startY,l),p=this.endX=s(a.endX,b.canvasRight),a=this.endY=s(a.endY,b.canvasBottom),m=this.pixelRatio=c?(a-l)/m:(p-n)/m,q=this.relatedObj={};q.marginObj={top:l,right:g,bottom:h,left:n};q.canvasObj={x:n,y:l,w:p-n,h:a-l,toX:p,toY:a};this.startPixel=d?c?a:p:c?l:
n;this.pixelValueRatio=d?-m:m;this.primaryOffset=this.secondaryOffset=0;this.cache={lowestVal:0,highestVal:0,indexArr:[],hashTable:{}};this.elements=this.elements||{};this.belowBandGroup&&(b.elements.axes=b.elements.axes||{},b.elements.axes.belowBandGroup=this.belowBandGroup,e&&e.chart&&e.chart.hasScroll&&this.belowBandGroup.attr({"clip-rect":b.elements["clip-canvas"]}));this.poi={}},draw:function(){var a=this.axisData,b=a&&a.plotLines||[],c=a&&a.plotBands||[],d=a&&a.showLine,e=a&&a.tickLength,g=
a&&a.tickWidth;a&&a.title&&this.drawAxisName();a&&a.labels&&(this.renderer.addCSSDefinition("."+a.labels.className+" .fusioncharts-label",a.labels.style),this.belowLabelGroup&&this.belowLabelGroup.attr("class",a.labels.className),this.topLabelGroup&&this.topLabelGroup.attr("class",a.labels.className));b&&0<b.length&&this.drawPlotLine();c&&0<c.length&&this.drawPlotBands();isNaN(e)||0===e||isNaN(g)||0===g||this.drawTicks();d&&this.drawLine()},scroll:function(){},setOffset:function(a,b){var c=this.primaryOffset=
a,d=this.secondaryOffset=b||this.secondaryOffset,e=this.isVertical,g,h,l,n=[this.topLabelGroup,this.belowLabelGroup,this.topLineGroup,this.belowLineGroup,this.topBandGroup,this.belowBandGroup],m,p;m=0;for(p=n.length;m<p;m+=1)if(l=n[m])g=e?d:c,h=e?c:d,l.attr({transform:"t"+g+","+h});e||this.drawPlotLine&&this.drawPlotLine()},update:function(){},drawTicks:function(){var a=this.axisData,b=this.renderer.paper,c=this.min,d=this.max,e=this.isVertical,g=this.layerBelowDataset,g=this.tickGroup=this.tickGroup||
b.group("axis-ticks",g),h=this.relatedObj.canvasObj,l=a.offset,n=a.opposite,m=a.showAxis,p=a.tickInterval,q=a.tickLength,s=a.tickWidth,a=a.tickColor,t=c;if(e&&m)for(c=this.getAxisPosition(c),e=this.getAxisPosition(d),h=n?h.toX+l:h.x-l,b.path(["M",h,c,"L",h,e],g).attr({stroke:a,"stroke-width":s});Za(t)<=d;)l=this.getAxisPosition(t),c=n?h+q:h-q,b.path(["M",h,l,"L",c,l],g).attr({stroke:a,"stroke-width":s}),t+=p},getAxisPosition:function(a,b){var c;b?c=(a-this.startPixel)/this.pixelValueRatio+this.min:
(a=this.axisData.reversed?this.min+(this.max-a):a,c=this.startPixel+(a-this.min)*this.pixelValueRatio);return c},drawPlotLine:function(){var a=this.renderer,b=a.paper,c=this.isVertical,d=+!c,e=this.lines=this.lines||[],g=this.labels=this.labels||[],h=this.relatedObj.canvasObj,l=this.globalOptions||{},n=this.elements||{},m=this.axisData.plotLines||[],p=this.primaryOffset,q=c?this.startY:this.startX,t=c?this.endY:this.endX,v=parseFloat(a.canvasBorderWidth)||0,w=Ra(m.length,Ra(e.length,g.length)),C=
a.layers.datalabels,D=this.belowLineGroup,H=this.topLineGroup,J=this.belowLabelGroup,K=this.topLabelGroup,G=!1!==(a.tooltip||{}).enabled,M=function(b){return function(c){Ba.call(this,a,c,b)}},l=l.chart.xDepth||0,I=[],L=0,P,R,V,U,Z,Y,aa,r,u,B,F,f,Ma,O,X,pb,qb,ua,ba,ja,va,ta,ga,ea,ka,fa,oa,la,qa,pa,za,Ga,Ea,Db,bb,Va,La,Da,Ca,fb,Pa,gb,ya;for(ya=0;ya<w;ya+=1){V=U=Z=null;V=e[ya];U=g[ya];if(aa=m[ya])if(r=aa.width,u=aa.isVline,B=aa.isTrend,F=aa.isGrid,f=aa.tooltext,Ma=aa.value,O=aa.color,X=aa.dashStyle,
pb=B?aa.to:null,qb=aa._isStackSum,P=3<aa.zIndex?H:D,ua=aa.label){ba=ua.style;ja=ua.text;va=ba&&ba.color;ta=ua.offsetScaleIndex||0;ga=ua.offsetScale;if(ea=ba&&ba.fontSize)ka=ea,-1!==ka.indexOf("px")&&(ka=ka.replace("px",""),ka=parseFloat(ka));R=ba&&ba.lineHeight;ea=ba?{fontFamily:ba.fontFamily,fontSize:ba.fontSize,lineHeight:ba.lineHeight,fontWeight:ba.fontWeight,fontStyle:ba.fontStyle}:null;R&&(fa=R,-1!==fa.indexOf("px")&&(fa=fa.replace("px",""),fa=parseFloat(fa)));oa=ua.rotation;la=ua.x||0;qa=ua.y||
0;pa=ua.align;za=ua.verticalAlign;Ga=ua.textAlign;Ea=(Ea=ua.borderWidth)?-1!==Ea.indexOf("px")?Ea.replace("px",""):1:1;R=qb?C:3<=aa.zIndex?K:J;ua.backgroundColor&&(ua.labelBgClr=$({color:ua.backgroundColor,alpha:100*ua.backgroundOpacity}));ua.borderColor&&(ua.labelBorderClr=$({color:ua.borderColor,alpha:"100"}));Db=ka?.2*ka:2;Ga="left"===Ga?"start":"right"===Ga?"end":"middle"}Y=Pa="visible";gb=0>s(ga,Ma,0);c?(Va=this.getAxisPosition(Ma),Da=B?this.getAxisPosition(pb)||Va:Va,Ca=Va!==Da?!0:!1,fb=["M",
h.x,Va,"L",h.toX,Da],u?a.logic.isBar&&(bb=a.yAxis[ta],!qb&&!isNaN(ga)&&0<=ga&&1>=ga&&(ga=bb.min+(bb.max-bb.min)*ga),La=bb.getAxisPosition(s(ga,Ma))+la+Db*(gb?-1:1)):La=ua?bb=this.axisData.isOpposite||"right"===pa?h.toX+la:h.x+la:bb=this.axisData.isOpposite?h.toX:h.x):(bb=this.getAxisPosition(Ma)||0,La=B?this.getAxisPosition(pb)||bb:bb,!B&&!u&&0<l&&(bb+=l,La+=l,t+=l),Ca=bb!==La?!0:!1,fb=["M"+bb,h.y,"L",La,h.toY],Pa=bb+p<q||bb+p>t?"hidden":Pa,u?(bb=a.yAxis[ta],!qb&&!isNaN(ga)&&0<=ga&&1>=ga&&(ga=bb.min+
(bb.max-bb.min)*(1-ga)),Va=bb.getAxisPosition(s(ga,Ma))+qa,Va-=(v+parseFloat(Ea))*(qa&&(0<qa?-1:1))):this.axisData.opposite||"top"===za&&!F?(Va=h.y+qa,Da="bottom"):Va=h.toY+qa,Da=Va);Y=c?Y:La+p<q||La+p>t?"hidden":Y;if(aa&&"visible"===Pa&&.1<r)Ca={path:xa(fb,r),stroke:O,"stroke-width":r,"shape-rendering":!Ca&&1<=r?"crisp":void 0,"stroke-dasharray":X?X:void 0,visibility:Pa},V?V.attr(Ca):(V=e[ya]=b.path(Ca,P).css(aa.style),n.lines=n.lines||[],n.lines.push(V)),G&&f&&r<ma&&Pa&&(Z=b.path({stroke:z,"stroke-width":ma,
ishot:!0,path:fb,fill:z},a.layers.tracker)),Z=Z||V,G&&f&&Z.tooltip(f);else if(V||U)V&&V.remove(),V=null,e&&(e[ya]=null),n&&n.lines&&(n.lines[ya]=null);ua&&aa&&!aa.stepped&&"visible"===Y&&ua.text!=N&&" "!=ua.text?(Va=B?"left"===pa?Va:Da:Da,Z=La-+!u*d*l+d*(la||0),qb?(Da=c||oa?"middle":"bottom",Va+=c?0:ka*(gb?-.4:.4),oa&&(Va+=gb?4:-2,Ga=gb?"end":"start")):d&&this.axisData.opposite?(Da=sb,Ga=oa?"start":"middle"):Da=za,/\n|<br\s*?\/?>/ig.test(ja)&&F&&(oa?(Da="middle",Z-=d*(la||0)):(Da=d&&this.axisData.opposite&&
!oa?"middle":$a,Va-=fa)),Ca={"class":"fusioncharts-label",text:ja,fill:ea?va||O:null,title:ua&&(ua.originalText||N),cursor:ua.link?"pointer":N,x:Z,y:Va,"text-anchor":Ga,"vertical-align":Da,transform:" ","text-bound":[ba.backgroundColor||ua.labelBgClr,ba.borderColor||ua.labelBorderClr,ba.borderThickness||Ea,ba.borderPadding||Db,ba.borderRadius,ba.borderDash],visibility:Y,"line-height":ba.lineHeight},U?U.attr(Ca):(U=g[ya]=b.text(Ca,R).attr("class","fusioncharts-label"),V&&(V.label=U),n.labels=n.labels||
[],n.labels.push(U)),ea&&U.css(ea),aa.isDataLabel&&(Y={text:ja,index:L,link:ua.link},L+=1,U.click(M("dataLabelClick")).hover(M("dataLabelRollOver"),M("dataLabelRollOut")).data("eventArgs",Y)),oa&&U.attr("transform",["r",oa,Z,Va]),qb&&U&&I.push(U)):U&&(U.isRotationSet=!1,U.remove(),g&&(g[ya]=null),n&&n.labels&&(n.labels[ya]=null));!V&&!U||aa&&null===aa.value||(aa&&aa.isMinLabel?this.poi.min={label:U,index:ya,line:V}:aa&&aa.isMaxLabel?this.poi.max={label:U,index:ya,line:V}:aa&&aa.isZeroPlane&&(this.poi.zero=
{label:U,index:ya,line:V}));V=U=null}s(a.options.plotOptions.series.animation.duration,0)},drawPlotBands:function(){var a=this.renderer,b=a.paper,c=this.isVertical,d=this.axisData.plotBands||[],e=this.bands=this.bands||[],g=this.bandLabels=this.bandLabels||[],h=this.relatedObj.canvasObj,l=this.primaryOffset,n=c?this.startY:this.startX,m=c?this.endY:this.endX,p=a.options.chart.hasScroll,q=this.belowBandGroup,t=this.topBandGroup,v=this.belowLabelGroup,w=this.topLabelGroup,z=this.elements||{},a=!1!==
(a.tooltip||{}).enabled,C,D,H,J,K,G,M,I,L,N,P,R,V,U,aa,r,u,B,F,f,Z,O,X,ba,Y,ua,ga,ja,va,oa,ea,fa,ka,ta,ma,la=Ra(d.length,e.length);for(ma=0;ma<la;ma+=1){ta="visible";fa=e[ma];ka=g[ma];if(C=d[ma])if(D=C.tooltext,H=C.to,J=C.from,K=C.value,G=C.width,M=C.color,oa=3<C.zIndex?t:q,I=C.label){if(L=I.style){if(U=L.fontSize)N=U,-1!==N.indexOf("px")&&(N=N.replace("px",""),parseFloat(N));(N=L.lineHeight)&&-1!==N.indexOf("px")&&(N=N.replace("px",""),parseFloat(N));F=L.color}(N=I.borderWidth)&&-1!==N.indexOf("px")&&
N.replace("px","");P=I.align;R=I.x;V=I.y;u=I.text;B=I.originalText;aa=I.backgroundColor;r=I.backgroundOpacity;aa&&(Z=I.labelBgClr=$({color:aa,alpha:100*r}));if(aa=I.borderColor)O=I.labelBorderClr=$({color:aa,alpha:"100"});aa=I.textAlign;aa="left"===aa?"start":"right"===aa?"end":"middle";r=I.verticalAlign;f=I.borderType;ea=3<C.zIndex?w:v}X=this.getAxisPosition(s(H,K));ba=this.getAxisPosition(s(J,K));Y=c?h.x:ba;ua=c?X:h.y;ga=c?h.w:(this.axisData.reversed?ba-X:X-ba)||G||1;ba=c?ba-X||1:h.h;X=Y+ga;ga=
ib(ga);0>ba&&(ba=ib(ba),ua-=ba);c||(ta=p?"hidden":Y+l>m||X+l<n?"hidden":ta);I&&(ja=c?"right"===P?h.toX+R:h.x+R:Y+ga/2,va=c?ua+ba/2:h.toY+V);if(!fa&&C&&"visible"===ta)C={x:Y,y:ua,width:ga,height:ba,fill:$(M),"stroke-width":0},fa?fa.attr(C):(fa=e[ma]=b.rect(C,oa),z.bands=z.bands||[],z.bands[ma]=fa),a&&D&&fa.tooltip(D);else if(fa&&(!C||"hidden"===ta)){z.labels&&(g[ma]=z.labels[ma]=null);fa.label&&fa.label.remove();e[ma]=z.bands[ma]=null;fa.remove();continue}fa&&I&&I.text&&(C={"class":"fusioncharts-label",
text:u,title:B||"",fill:F,"text-bound":[Z,O,N,.2*U,"solid"===f?!1:!0],x:ja,y:va,"text-anchor":aa,"vertical-align":r,"line-height":L.lineHeight},ka?ka.attr(C):(ka=g[ma]=fa.label=b.text(C,ea).attr("class","fusioncharts-label"),L&&ka.css(L),z.labels=z.labels||[],z.labels[ma]=ka))}},drawAxisName:function(){var a=this.axisData,b=a.title||{},c=b&&b.style,d=b&&b.className,e=b.align,g=b.centerYAxisName||!1,h=this.renderer.paper,l=this.isVertical,n=this.relatedObj.canvasObj,m=s(a.offset,0)+s(b.margin,0),p=
b.text||"",q=this.name||void 0,a=a.opposite,t=this.layerBelowDataset,t=t.nameGroup=t.nameGroup||h.group("axis-name",t),v=s(b.rotation,a?90:270),w=l?a?n.toX+m:n.x-m:(n.x+n.toX)/2,z={fontFamily:c.fontFamily,fontSize:c.fontSize,lineHeight:c.lineHeight,fontWeight:c.fontWeight,fontStyle:c.fontStyle},C,g=l?"low"===e?n.toY:g?(n.y+n.toY)/2:this.renderer.chartHeight/2:n.toY+m;p?(!isNaN(v)&&v&&l&&(C=c.fontSize,C=-1!=C.indexOf("px")?C.replace("px",""):C,a?(w+=parseFloat(C),C=270===v?"bottom":"top"):(w-=parseFloat(C),
C=270===v?"top":"bottom")),this.renderer.addCSSDefinition("."+d,z),d={"class":d,x:0,y:0,text:p,fill:c.color,"text-anchor":"low"===e?90==v?"end":"start":"middle","vertical-align":l?v?C:"middle":a?sb:"top",transform:l?"t"+w+","+g+"r"+v:"t"+w+","+g,"font-size":c.fontSize},b.originalText&&(d.title=b.originalText),q?q.attr(d):q=this.name=h.text(d,t),setTimeout(function(){q.attr({"line-height":c.lineHeight,"text-bound":[c.backgroundColor,c.borderColor,c.borderThickness,c.borderPadding,c.borderRadius,c.borderDash]})},
0)):q&&q.remove();this.elements.name=q},drawLine:function(){var a=this.axisData,b=this.renderer.paper,c=this.min,d=this.max,e=this.isVertical,g=a.opposite,h=this.layerBelowDataset,h=this.lineGroup=this.lineGroup||b.group("axis-lines",h),l=a.lineColor,n=a.lineThickness,m=a.lineEndExtension||0,p=a.lineStartExtension||0,a=this.relatedObj.canvasObj;e?(c=this.getAxisPosition(c)-p,m=this.getAxisPosition(d)+m,d=e=g?a.toX+n/2:a.x-n/2):(d=a.x-p,e=a.toX+m,c=m=g?a.y-n/2:a.toY+n/2);b=b.path({path:["M",d,c,"L",
e,m],stroke:l,"stroke-width":n},h);this.elements.axisLine=b},realtimeUpdateX:function(a){if(0<a){for(var b=this.axisData.plotBands,c=this.min+a,d,e=b.length;e--;)(d=b[e])&&!d.isNumVDIV&&(d.value<c||d.from<c||d.to<c?b.splice(e,1):(void 0!==d.value&&(d.value-=a),void 0!==d.from&&(d.from-=a),void 0!==d.to&&(d.to-=a)));this.drawPlotLine();this.drawPlotBands()}},realtimeUpdateY:function(a,b){var c=this.axisData,d=this.min=c.min=a,c=this.span=(this.max=c.max=b)-d,c=this.pixelRatio=this.isVertical?this.relatedObj.canvasObj.h/
c:this.relatedObj.canvasObj.w/c;this.pixelValueRatio=this.isReverse?-c:c;this.drawPlotLine();this.drawPlotBands()}};d.prototype.constructor=d;b("renderer.cartesian",{drawCanvas:function(){var a=this.options.chart||{},b=a.plotBackgroundColor,c=this.paper,d=this.elements,e=d.canvas,g=d.canvas3DBase,h=d.canvas3dbaseline,g=d.canvasBorder,l=d.canvasBg,n=this.canvasTop,m=this.canvasLeft,p=this.canvasWidth,q=this.canvasHeight,t=s(a.plotBorderRadius,0),l=a.plotBorderWidth,v=.5*l,w=a.plotBorderColor,z=a.isBar,
C=a.is3D,D=a.use3DLighting,H=a.showCanvasBg,J=a.canvasBgDepth,G=a.showCanvasBase,M=a.canvasBaseColor3D,I=a.canvasBaseDepth,L=a.plotShadow,N=P&&0===l&&L&&L.enabled,V=a.xDepth||0,a=a.yDepth||0,U=this.layers,ba=U.background,Z=U.dataset;U.tracker=U.tracker||c.group("hot").insertAfter(Z);U.datalabels=U.datalabels||c.group("datalabels").insertAfter(Z);U=U.canvas=U.canvas||c.group("canvas").insertAfter(ba);g||(d.canvasBorder=c.rect({x:m-v,y:n-v,width:p+l,height:q+l,r:t,"stroke-width":l,stroke:w,"stroke-linejoin":2<
l?"round":"miter"},U).shadow(L));d["clip-canvas"]=[Ra(0,m-V),Ra(0,n-a),Ra(1,p+2*V),Ra(1,q+2*a)];d["clip-canvas-init"]=[Ra(0,m-V),Ra(0,n-a),1,Ra(1,q+2*a)];C&&(H&&(l=z?d.canvasBg=c.path(["M",m,",",n,"L",m+1.2*J,",",n-J,",",m+p-J,",",n-J,",",m+p,",",n,"Z"],U):d.canvasBg=c.path(["M",m+p,",",n,"L",m+p+J,",",n+1.2*J,",",m+p+J,",",n+q-J,",",m+p,",",n+q,"Z"],U),l.attr({"stroke-width":0,stroke:"none",fill:$(b)})),G&&(g=z?d.canvas3DBase=c.cubepath(m-V-I-1,n+a+1,I,q,V+1,a+1,U):d.canvas3DBase=c.cubepath(m-V-
1,n+q+a+1,p,I,V+1,a+1,U),g.attr({stroke:"none","stroke-width":0,fill:[M.replace(R,Y),!D]}),h||(h=d.canvas3dbaseline=c.path(void 0,U)),h.attr({path:z?["M",m,n,"V",q+n]:["M",m,n+q,"H",p+m],stroke:K.tintshade(M.replace(R,Y),.05).rgba})));!e&&b&&(d.canvas=c.rect({x:m,y:n,width:p,height:q,r:t,"stroke-width":0,stroke:"none",fill:$(b)},U).shadow(N))},drawAxes:function(){var a=this.logic,b=this.options,c=this.paper,e=this.layers,g=e.dataset,h=e.layerBelowDataset=e.layerBelowDataset||c.group("axisbottom").trackTooltip(!0),
l=e.layerAboveDataset=e.layerAboveDataset||c.group("axistop").trackTooltip(!0),c=this.xAxis=[],e=this.yAxis=[];h.insertBefore(g);l.insertAfter(g);if(b.xAxis&&b.xAxis.length)for(g=0,h=b.xAxis.length;g<h;g+=1)c[g]=this.xAxis[g]=new d(b.xAxis[g],this,a.isBar);else c[0]=this.xAxis[0]=new d(b.xAxis,this,a.isBar);if(b.yAxis)for(g=0,h=b.yAxis.length;g<h;g+=1)e[g]=this.yAxis[g]=new d(b.yAxis[g],this,!a.isBar,!a.isBar);g=0;for(h=e.length;g<h;g+=1)e[g].axisData&&(e[g].axisData.title&&(e[g].axisData.title.className=
"fusioncharts-yaxis-"+g+"-title"),e[g].axisData.labels&&(e[g].axisData.labels.className="fusioncharts-yaxis-"+g+"-gridlabels")),e[g].draw();g=0;for(h=c.length;g<h;g+=1)c[g].axisData&&(c[g].axisData.title&&(c[g].axisData.title.className="fusioncharts-xaxis-"+g+"-title"),c[g].axisData.labels&&(c[g].axisData.labels.className="fusioncharts-xaxis-"+g+"-gridlabels")),c[g].draw()},drawScroller:function(){var a=this,b=a.options,c=a.paper,d=a.layers,e=a.xAxis["0"]||{},g=e.axisData||{},h=g.scroll||{},l=a.canvasTop,
n=a.canvasLeft,m=a.canvasWidth,p=a.canvasHeight,q=a.canvasBorderWidth,t=q||(g.showLine?g.lineThickness:0),w=q||g.lineStartExtension,g=q||g.lineEndExtension,q=b.chart.useRoundEdges,z,C,D,J,G,M,I,L,N,P,R,U,$,Z,Y,ga=d.dataset,aa=d.datalabels,r=d.tracker;J=d.layerAboveDataset;var u,B;h.enabled&&(u=d.scroll=d.scroll||c.group("scroll").insertAfter(J),J=h.scrollRatio,b=s(b[ba].xAxisScrollPos,h.startPercent),G=h.viewPortMax,M=h.viewPortMin,C=h.vxLength,I=Da(C),L=h.showButtons,N=h.height,P=h.padding,R=h.color,
U=h.flatScrollBars,C=h.windowedCanvasWidth=e.getAxisPosition(C),z=h.fullCanvasWidth=e.getAxisPosition(G-M)-C,D=V(b*z),$=a.fusionCharts.jsVars._reflowData,Z={hcJSON:{_FCconf:{xAxisScrollPos:0}}},Y=Z.hcJSON._FCconf,d.scroller=c.scroller(n-w,l+p+t+P-!!t,m+w+g,N,!0,{showButtons:L,displayStyleFlat:U,scrollRatio:J,scrollPosition:b},u).data("fullCanvasWidth",z).data("windowedCanvasWidth",C).attr({"scroll-display-style":U,fill:R,r:q&&2||0}).scroll(function(b){var c;D=-V(b*z);ga&&ga.transform(["T",D,0]);aa&&
aa.transform(["T",D,0]);r&&r.transform(["T",D,0]);e.setOffset&&e.setOffset(D);c={position:b,direction:b-h.lastPos||0,vxLength:I};Y.xAxisScrollPos=h.lastPos=b;H($,Z,!0);if(0!==c.direction)for(B=0;B<a.datasets.length;B++)a[a.datasets[B].drawPlot+"Scroll"]&&a[a.datasets[B].drawPlot+"Scroll"].call(a,a.plots[B],a.datasets[B],c)}),function(){var b;K.eve.on("raphael.scroll.start."+d.scroller.id,function(c){b=c;v.raiseEvent("scrollstart",{scrollPosition:c},a.logic.chartInstance)});K.eve.on("raphael.scroll.end."+
d.scroller.id,function(c){v.raiseEvent("scrollend",{prevScrollPosition:b,scrollPosition:c},a.logic.chartInstance)})}());return h.enabled},finalizeScrollPlots:function(){var a=this,b=a.container,d=a.elements,e=a.layers,g=e.scroller,l=e.dataset,n=e.datalabels,e=e.tracker,m,p={},t,z=a.xAxis["0"]||{},C=(z.axisData||{}).scroll||{},D=s(a.options[ba].xAxisScrollPos,C.startPercent),H=C.fullCanvasWidth;C.enabled&&(l.attr({"clip-rect":d["clip-canvas"]}),n.attr({"clip-rect":d["clip-canvas"]}),e.attr({"clip-rect":d["clip-canvas"]}),
d=function(b){var d=a.elements.canvas,e=m.left,l=m.top,n=b.state,q=Z&&c.getTouchEvent(b)||h;b=b.originalEvent;e=(b.clientX||b.pageX||q.pageX)-e;l=(b.clientY||b.pageY||q.pageY)-l;switch(n){case "start":t=d.isPointInside(e,l);p.ox=t&&e||null;if(!t)return!1;p.prevScrollPosition=g.attrs["scroll-position"];v.raiseEvent("scrollstart",{scrollPosition:p.prevScrollPosition},a.logic.chartInstance);break;case "end":v.raiseEvent("scrollend",{prevScrollPosition:p.prevScrollPosition,scrollPosition:p.scrollPosition},
a.logic.chartInstance);t=!1;p={};break;default:if(!t)break;d=e-p.ox;p.ox=e;p.scrollPosition=g.attrs["scroll-position"]-d/H;g.attr({"scroll-position":p.scrollPosition})}},Z&&(m=c.getPosition(b),b&&(w(b,"pointerdrag",d),q(b,"pointerdrag",d))),0<D&&(b=-V(D*H),l&&l.transform(["T",b,0]),n&&n.transform(["T",b,0]),e&&e.transform(["T",b,0]),z.setOffset&&z.setOffset(b)))},drawPlotColumn:function(a,b,c){var d=this,e=a.data,g=e.length,h=a.items,l=a.graphics||(a.graphics=[]),m=d.paper,p=d.smartLabel,q=d.logic,
t=d.layers,v=d.options,w=d.elements,D=v.chart,H=!1!==(v.tooltip||{}).enabled,J,G=d.definition.chart,I=v.plotOptions.series,L=I.dataLabels.style,N=d.xAxis[b.xAxis||0],P=d.yAxis[b.yAxis||0],R=d.chartWidth,ca=d.chartHeight,U=P.axisData.reversed,Z=q.isLog,Y=q.is3D,ga=q.isStacked,fa=q.isWaterfall,ta=q.isCandleStick,aa=ja(N.axisData.scroll,{}),r=c||{},u=aa.enabled,B=s(r.position,v[ba].xAxisScrollPos,aa.startPercent),F=r.vxLength||Da(aa.vxLength),f=r.scrollStart||Ra(0,V((g-F)*B)-1)||0,Ma=r.scrollEnd||oa(g,
f+F+2)||g,O=D.canvasBorderOpacity=K.color(D.plotBorderColor).opacity,X=d.canvasBorderWidth,pb=D.isCanvasBorder=0!==O&&0<X,ea,ua=c!==Pa?0:isNaN(+I.animation)&&I.animation.duration||1E3*I.animation,la=b.numColumns||1,qa=b.columnPosition||0,va=D.use3DLighting,pa=!1===b.visible?"hidden":"visible",xa=D.overlapColumns,za=N.getAxisPosition(0),ka=N.getAxisPosition(1)-za,ya=G&&G.plotspacepercent,Pb=s(G&&G.plotpaddingpercent),Ga=I.groupPadding,Ca=I.maxColWidth,Ea=(1-.01*ya)*ka||oa(ka*(1-2*Ga),Ca*la),Xa=Ea/
2,Ka=Ea/la,Pc=oa(Ka-1,1<la?xa||Pb!==Pa?0<Pb?Ka*Pb/100:0:4:0),Db=qa*Ka-Xa+Pc/2,bb=P.max,Va=P.min,La=0<bb&&0<=Va,Za=0>=bb&&0>Va,db=0<bb&&0>Va,fb=Za||U&&La?bb:Z||La?Va:0,ic=P.yBasePos=P.getAxisPosition(fb),gb,nb=s(D.useRoundEdges,0),xc=t.dataset=t.dataset||m.group("dataset-orphan"),Sa=t.datalabels=t.datalabels||m.group("datalabels").insertAfter(xc),id=t.tracker,$a=d.canvasTop,sb=d.canvasLeft,vb=d.canvasWidth,yb=d.canvasBottom,Fc=d.canvasRight,vc,Fb,Dc,Gc,bc,cc,Mc,Ib,$b,ob,eb,pc,tb,zc,Cb,Vb,zb,Ta,Ac,
Wb,Qa,Eb,ub,Xb,Aa,Nc,Ya,Hb,ab,mc,sc,wc,qc,Oc,kb,ad,Jb,Ia,Yb,Bc=function(a){Ba.call(this,d,a)},Qb=function(a,b){return function(c){a.attr(b);Ba.call(this,d,c,"DataPlotRollOver")}},Rb=function(a,b){return function(c){a.attr(b);Ba.call(this,d,c,"DataPlotRollOut")}};d.addCSSDefinition(".fusioncharts-datalabels .fusioncharts-label",{fontFamily:L.fontFamily,fontSize:L.fontSize,lineHeight:L.lineHeight,fontWeight:L.fontWeight,fontStyle:L.fontStyle,color:L.color});Sa.attr("class","fusioncharts-datalabels");
ua&&(!c&&Sa.attr({transform:"...t"+R+","+ca}),d.animationCompleteQueue.push({fn:function(){Sa.attr({transform:"...t"+-R+","+-ca})},scope:d}));Ka-=Pc;u&&f>Ma-F-2&&(f=Ra(0,Ma-F-2));ga&&(ad=xc.shadows||(xc.shadows=m.group("shadows",xc).toBack()));ab=xc.column||(xc.column=m.group("columns",xc));ta||Y||u||ab.attrs["clip-rect"]||ab.attr({"clip-rect":w["clip-canvas"]});fa&&ab.toBack();if(Y)for(bc=D.xDepth||0,cc=D.yDepth||0,mc=ab.negative=ab.negative||m.group("negative-values",ab),qc=ab.column=ab.column||
m.group("positive-values",ab),wc=ab.zeroPlane,!wc&&0>Va&&0<=bb&&(wc=ab.zeroPlane=m.group("zero-plane",ab).insertBefore(qc),Fb=D.zeroPlaneColor,Dc=D.zeroPlaneBorderColor,Gc=D.zeroPlaneShowBorder,w.zeroplane=m.cubepath(sb-bc,ic+cc,vb,1,bc,cc,wc).attr({fill:[Fb,!va],stroke:Dc||"none","stroke-width":Gc?1:0})),(sc=mc.data("categoryplots"))||(mc.data("categoryplots",Array(g)),sc=mc.data("categoryplots")),(Oc=qc.data("categoryplots"))||(qc.data("categoryplots",Array(g)),Oc=qc.data("categoryplots")),ob=0;ob<
g;ob+=1)sc[ob]=sc[ob]||m.group(mc),Oc[ob]=Oc[ob]||m.group(qc);else kb=ab;p.setStyle({fontFamily:L.fontFamily,fontSize:L.fontSize,lineHeight:L.lineHeight,fontWeight:L.fontWeight,fontStyle:L.fontStyle});for(ob=f;ob<Ma;ob+=1){eb=e[ob];Cb=eb.y;J=eb.toolText;vc=a.index+"_"+ob;Ya=Hb=null;if(null===Cb){if($b=h[ob])Ya=$b.graphic,Y||Ya.attr({height:0})}else{Mc=!1;zc=s(eb.x,ob);pc=eb.link;tb=n(eb.borderWidth)||0;Nc=eb._FCW*ka;zb=N.getAxisPosition(eb._FCX)||N.getAxisPosition(zc)+Db;Vb=eb.previousY;Ac=P.getAxisPosition(Vb||
fb);Ta=P.getAxisPosition(Cb+(Vb||0));Qa=ib(Ta-Ac);Eb=Nc||Ka;Yb={index:ob,link:pc,value:eb.y,displayValue:eb.displayValue,categoryLabel:eb.categoryLabel,toolText:eb.toolText,id:a.userID,datasetIndex:a.index,datasetName:a.name,visible:a.visible};if(Y){0>Cb&&(Ta=Ac,Mc=!0);kb=0>Cb?sc:Oc;($b=h[ob])||($b=h[ob]={index:ob,value:Cb,graphic:m.cubepath(kb[ob]),dataLabel:null,tracker:null,hot:null});Ya=$b.graphic;Xb=Aa={};eb.hoverEffects&&(Xb={fill:[$(eb.color),!va],stroke:tb&&$(eb.borderColor)||"NONE","stroke-width":tb},
ub=eb.rolloverProperties,Aa={fill:[$(ub.color),!va],stroke:ub.borderWidth&&$(ub.borderColor)||"NONE","stroke-width":ub.borderWidth});Ya.attr({cubepath:[zb-bc,ua?ic+cc:Ta+cc,Eb,ua?0:Qa,bc,cc],fill:[$(eb.color),!va],stroke:tb&&$(eb.borderColor)||"NONE","stroke-width":tb,visibility:pa}).shadow(I.shadow&&eb.shadow,ad).data("BBox",{height:Qa,width:Eb,x:zb,y:Ta});ua&&Ya.animate({cubepath:[zb-bc,Ta+cc,Eb,Qa,bc,cc]},ua,"normal",d.getAnimationCompleteFn());if(pc||H)!ga&&Qa<ma&&(Ta-=(ma-Qa)/2,Qa=ma),$b.tracker||
($b.tracker=m.cubepath(id)),Hb=$b.tracker,Hb.attr({cubepath:[zb-bc,Ta+cc,Eb,Qa,bc,cc],cursor:pc?"pointer":"",stroke:tb&&z||"NONE","stroke-width":tb,fill:z,ishot:!0,visibility:pa});(Hb||Ya).data("eventArgs",Yb).data("groupId",vc).click(Bc).hover(Qb(Ya,Aa),Rb(Ya,Xb)).tooltip(J);(Hb||Ya)._.cubetop.data("eventArgs",Yb).data("groupId",vc).click(Bc).hover(Qb(Ya,Aa),Rb(Ya,Xb)).tooltip(J);(Hb||Ya)._.cubeside.data("eventArgs",Yb).data("groupId",vc).click(Bc).hover(Qb(Ya,Aa),Rb(Ya,Xb)).tooltip(J);ga&&Mc&&(Ya.toBack(),
Hb&&Hb.toBack())}else{Ib=!1;if(!Z&&!U&&0>Cb||!Z&&U&&0<Cb)Ta=Ac,Ib=!0;U&&!db&&0<Cb&&(Ta=Ac-Qa,Ib=!1);fa&&0>Cb&&C(Vb)&&(Ta-=Qa,Ib=!0);ta||u||(M(Ta)<=$a&&(Qa-=$a-Ta-+pb,Ta=$a-+pb),V(Ta+Qa)>=yb&&(Qa-=V(Ta+Qa)-yb+ +!!tb+ +pb,D.xAxisLineVisible&&!pb&&(Qa+=1)),1>=tb&&(V(zb)<=sb&&(Eb+=zb,zb=sb-tb/2+ +!!tb-+pb,Eb-=zb),V(zb+Eb)>=Fc&&(Eb=Fc-zb+tb/2-+!!tb+ +pb)));Jb=K.crispBound(zb,Ta,Eb,Qa,tb);zb=Jb.x;Ta=Jb.y;Eb=Jb.width;Qa=Jb.height;if(!ta&&pb&&(!C(Vb)||fa&&Vb===Cb&&Cb===eb._FCY))if(Za&&!U)ea=Ta-($a-tb/2),
Qa+=ea,ic=Ta-=ea;else if(Z||La||U&&Za)Qa=yb-Ta+tb/2,ic=Ta+Qa;fa&&Vb&&0<tb&&0!==I.connectorOpacity&&1===I.connectorWidth&&I.connectorDashStyle&&(Qa-=1,0>Cb&&(Ta+=1));1>Qa&&(Ta+=0>Cb?1:0===Cb?0:-(1-Qa),Qa=1);b._columnWidth=Eb;if(!($b=h[ob])){$b=h[ob]={index:ob,value:Cb,width:Eb,graphic:null,valueBelowPlot:Ib,dataLabel:null,tracker:null};gb=0;ua||(ic=Ta,gb=Qa||1);Xb=Aa={};eb.hoverEffects&&(Xb={fill:$(eb.color),stroke:$(eb.borderColor),"stroke-width":tb,"stroke-dasharray":eb.dashStyle},ub=eb.rolloverProperties,
Aa={fill:$(ub.color),stroke:$(ub.borderColor),"stroke-width":ub.borderWidth,"stroke-dasharray":ub.dashStyle});Ia={x:zb,y:ic,width:Eb,height:gb,r:nb,fill:$(eb.color),stroke:$(eb.borderColor),"stroke-width":tb,"stroke-dasharray":eb.dashStyle,"stroke-linejoin":"miter",visibility:pa};Ya?Ya.attr(Ia):Ya=$b.graphic=m.rect(Ia,kb);Ya.shadow(I.shadow&&eb.shadow,ad).data("BBox",Jb);ua&&Ya.animate({y:Ta,height:Qa||1},ua,"normal",d.getAnimationCompleteFn());if(pc||H)!ga&&Qa<ma&&(Ta-=(ma-Qa)/2,Qa=ma),Ia={x:zb,
y:Ta,width:Eb,height:Qa,r:nb,cursor:pc?"pointer":"",stroke:z,"stroke-width":tb,fill:z,ishot:!0,visibility:pa},(Hb=$b.tracker)?Hb.attr(Ia):Hb=$b.tracker=m.rect(Ia,id);Hb=$b.tracker;(Hb||Ya).data("eventArgs",Yb).data("groupId",vc).click(Bc).hover(Qb(Ya,Aa),Rb(Ya,Xb)).tooltip(J)}}Wb=d.drawPlotColumnLabel(a,b,ob,zb,Ta)}Wb&&l.push(Wb);Ya&&l.push(Ya);Hb&&l.push(Hb);d.drawTracker&&d.drawTracker.call(d,a,b,ob)}a.visible=!1!==b.visible;return a},drawPlotColumnScroll:function(a,b,c){var d=a.data.length,e=a.items,
g;g=c.vxLength;var h=Ra(0,V((d-g)*c.position)-1)||0,d=oa(d,h+g+2)||d;h>d-g-2&&(h=Ra(0,d-g-2));c.scrollEnd=d;for(g=h;g<d;g++)if(!e[g]){c.scrollStart=g;this.drawPlotColumn(a,b,c);break}},drawPlotColumnLabel:function(a,b,c,d,e,g){var h=this.options,l=this.logic,n=h.chart;d=this.paper;var m=this.smartLabel,p=this.layers,h=h.plotOptions.series.dataLabels.style,q=1===n.rotateValues?270:0,s=this.canvasHeight,t=this.canvasTop,v=a.data[c];a=a.items[c];var w=n.valuePadding+2,z=a.graphic;c=a.dataLabel;var D=
ja(a.valueBelowPlot,0>v.y),H=l.isStacked,l=l.is3D,J=n.xDepth||0,G=n.yDepth||0,K=v.displayValue;b=!1===b.visible?"hidden":"visible";var n=n.placeValuesInside,I;g=g||p.datalabels;C(K)&&K!==N&&null!==v.y?(a._state&&a._state.labelWidth||(m=m.getOriSize(K),a._state=q?{labelWidth:m.height,labelHeight:m.width}:{labelWidth:m.width,labelHeight:m.height}),z=z.data("BBox"),p=z.height,m=I=a._state.labelHeight+w,w=.5*I+w,z=z.x+.5*z.width,I=D?t+s-(e+p):e-t,H?(e=oa(t+s-.5*m,e+.5*p+(G||0)),e=Ra(t+.5*m,e),z-=J):n?
p>=m?(e+=D?p-w:w,v._valueBelowPoint=1,l&&(z-=J,e+=G)):I>=m?(e+=D?p+w:-w,l&&D&&(z-=J,e+=G)):(e+=D?p-w:w,v._valueBelowPoint=1,l&&(z-=J,e+=G)):I>=m?(e+=D?p+w:-w,l&&(D?(z-=J,e+=G):z-=J/2)):(e+=D?p-w:w,v._valueBelowPoint=1,l&&(z-=J,e+=G)),c?c.attr({x:z,y:e,visibility:b}):c=a.dataLabel=d.text({text:K,"class":"fusioncharts-label",x:z,y:e,fill:h.color,"font-size":h.fontSize,visibility:b},g).attr({"line-height":h.lineHeight,"text-bound":[h.backgroundColor,h.borderColor,h.borderThickness,h.borderPadding,h.borderRadius,
h.borderDash]}),q&&c.attr("transform","T0,0,R"+q)):c&&c.attr({text:N});return c},drawPlotFloatedcolumn:function(a,b){this.drawPlotColumn.call(this,a,b)},drawPlotColumn3d:function(a,b){this.drawPlotColumn.call(this,a,b)},drawPlotBar:function(a,b){var c=this,d=a.data,e=d.length,g=a.items,h=a.graphics=[],l=c.paper,m=c.logic,p=c.layers,q=c.options,t=c.elements,w=q.chart,v=!1!==(q.tooltip||{}).enabled,C,D=c.definition.chart,q=q.plotOptions.series,H=q.dataLabels.style,J={fontFamily:H.fontFamily,fontSize:H.fontSize,
lineHeight:H.lineHeight,fontWeight:H.fontWeight,fontStyle:H.fontStyle},H=c.xAxis[b.xAxis||0],G=c.yAxis[b.yAxis||0],I=m.is3D,m=m.isStacked,L=w.canvasBorderOpacity=K.color(w.plotBorderColor).opacity,N=c.canvasBorderWidth,L=w.isCanvasBorder=0!==L&&0<N,N=isNaN(+q.animation)&&q.animation.duration||1E3*q.animation,P=b.numColumns||1,R=b.columnPosition||0,U=w.use3DLighting,Z=!1===b.visible?"hidden":"visible",ba=w.overlapColumns,Y=H.getAxisPosition(0),Y=H.getAxisPosition(1)-Y,ga=D&&D.plotspacepercent,D=s(D&&
D.plotpaddingpercent),fa=q.groupPadding,aa=q.maxColWidth,ga=(1-.01*ga)*Y||oa(Y*(1-2*fa),aa*P),Y=ga/2,ga=ga/P,ba=oa(ga-1,1<P?ba||D!==Pa?0<D?ga*D/100:0:4:0),P=ga-ba,R=R*ga-Y+ba/2,r=G.max,u=G.min,ba=G.getAxisPosition(0>r&&0>u?r:0<r&&0<u?u:0),D=s(w.useRoundEdges,0),B=c.canvasTop,Y=c.canvasLeft,F=c.canvasHeight,ga=c.canvasRight,f=c.chartWidth,ta=c.chartHeight,O,X,ja,ea,ua,la,qa,va,pa,xa,fa=G.axisData.effectiveZeroPlaneThickness;qa=p.dataset=p.dataset||l.group("dataset-orphan");var za=p.datalabels=p.datalabels||
l.group("datalabels").insertAfter(qa),p=p.tracker,ka,ya,Pb,Da,Ga,Ea,aa=function(a){Ba.call(this,c,a)},Ca=function(a,b){return function(d){a.attr(b);Ba.call(this,c,d,"DataPlotRollOver")}},Ra=function(a,b){return function(d){a.attr(b);Ba.call(this,c,d,"DataPlotRollOut")}},Ka;c.addCSSDefinition(".fusioncharts-datalabels .fusioncharts-label",J);za.attr("class","fusioncharts-datalabels");N&&(c.animationCompleteQueue.push({fn:function(){za.attr({transform:"...t"+-f+","+-ta})},scope:c}),za.attr({transform:"...t"+
f+","+ta}));m&&(Ga=qa.shadows||(qa.shadows=l.group("shadows",qa).toBack()));va=qa.column=qa.column||l.group("bars",qa);if(I)for(O=w.xDepth||0,X=w.yDepth||0,J=va.negative=va.negative||l.group("negative-values",va),qa=va.column=va.column||l.group("positive-values",va),Pb=va.zeroPlane,!Pb&&0>u&&0<=r&&(Pb=va.zeroPlane=l.group("zero-plane",va).insertBefore(qa),xa=w.zeroPlaneColor,r=w.zeroPlaneBorderColor,u=w.zeroPlaneShowBorder,t.zeroplane=l.cubepath(ba-O,B+X,1,F,O,X,Pb).attr({fill:[xa,!U],stroke:r||"none",
"stroke-width":u?1:0})),(Pb=J.data("categoryplots"))||(J.data("categoryplots",Array(e)),Pb=J.data("categoryplots")),(xa=qa.data("categoryplots"))||(qa.data("categoryplots",Array(e)),xa=qa.data("categoryplots")),t=0;t<e;t+=1)Pb[t]=Pb[t]||l.group(J),xa[t]=xa[t]||l.group(qa);else va.attrs["clip-rect"]||va.attr({"clip-rect":t["clip-canvas"]}),Da=va;t=0;for(J=e-1;t<e;t+=1,J-=1){B=d[t];u=B.y;ka=F=null;if(null===u){if(la=g[t])ka=la.graphic,I||ka.attr({width:0})}else{va=s(B.x,t);qa=B.link;C=B.toolText;r=
n(B.borderWidth)||0;va=H.getAxisPosition(va)+R;la=(ja=B.previousY)?G.getAxisPosition(ja):ba;pa=G.getAxisPosition(u+(ja||0));ja=ib(pa-la);0<u&&(pa=la);ya={index:t,link:qa,value:B.y,displayValue:B.displayValue,categoryLabel:B.categoryLabel,toolText:B.toolText,id:a.userID,datasetIndex:a.index,datasetName:a.name,visible:a.visible};if(I){Da=0>u?Pb:xa;(la=g[t])||(la=g[t]={index:t,value:u,graphic:l.cubepath(Da[J]),dataLabel:null,tracker:null});ka=la.graphic;ua=ea={};B.hoverEffects&&(ua={fill:[$(B.color),
!U],stroke:r&&$(B.borderColor)||"NONE","stroke-width":r},ea=B.rolloverProperties,ea={fill:[$(ea.color),!U],stroke:ea.borderWidth&&$(ea.borderColor)||"NONE","stroke-width":ea.borderWidth});ka.attr({cubepath:[N?ba-O:pa-O,va+X,N?0:ja,P,O,X],fill:[$(B.color),!U],stroke:r&&$(B.borderColor)||"NONE","stroke-width":r,"stroke-dasharray":B.dashStyle,cursor:qa?"pointer":"",visibility:Z}).shadow(q.shadow&&B.shadow,Ga).data("BBox",{height:P,width:ja,x:pa,y:va});N&&ka.animate({cubepath:[pa-O,va+X,ja,P,O,X]},N,
"normal",c.getAnimationCompleteFn());if(qa||v)!m&&ja<ma&&(pa-=(ma-ja)/2,ja=ma),la.tracker||(la.tracker=l.cubepath(p)),F=la.tracker,F.attr({cubepath:[pa-O,va+X,ja,P,O,X],cursor:qa?"pointer":"",stroke:r&&z||"NONE","stroke-width":r,fill:z,ishot:!0});(F||ka).data("eventArgs",ya).click(aa).hover(Ca(ka,ea),Ra(ka,ua)).tooltip(C);(F||ka)._.cubetop.data("eventArgs",ya).click(aa).hover(Ca(ka,ea),Ra(ka,ua));(F||ka)._.cubeside.data("eventArgs",ya).click(aa).hover(Ca(ka,ea),Ra(ka,ua));if(!m||m&&0>u)ka.toBack(),
F&&F.toBack()}else{M(pa)<=Y&&(ja+=pa,pa=Y+r/2+.2,w.xAxisLineVisible&&!L&&(pa-=1),ja-=pa);V(pa+ja)>=ga&&(ja=ga-pa-r/2-.2);Ea=K.crispBound(pa,va,ja,P,r);pa=Ea.x;va=Ea.y;ja=Ea.width;Ka=Ea.height;1>=ja&&(ja=1,pa+=0>u?-ja:0===u?0:1<fa?ja:0);(la=g[t])||(la=g[t]={index:t,value:u,height:Ka,graphic:null,dataLabel:null,tracker:null});ka=la.graphic;ua=ea={};B.hoverEffects&&(ua={fill:$(B.color),stroke:$(B.borderColor),"stroke-width":r,"stroke-dasharray":B.dashStyle},ea=B.rolloverProperties,ea={fill:$(ea.color),
stroke:$(ea.borderColor),"stroke-width":ea.borderWidth,"stroke-dasharray":ea.dashStyle});u={x:N?ba:pa,y:va,width:N?0:ja||1,height:Ka,r:D,fill:$(B.color),stroke:$(B.borderColor),"stroke-width":r,"stroke-dasharray":B.dashStyle,"stroke-linejoin":"miter",cursor:qa?"pointer":"",visibility:Z};ka?ka.attr(u):ka=la.graphic=l.rect(u,Da);ka.shadow(q.shadow&&B.shadow,Ga).data("BBox",Ea);N&&ka.animate({x:pa,width:ja||1},N,"normal",c.getAnimationCompleteFn());if(qa||v)!m&&ja<ma&&(pa-=(ma-ja)/2,ja=ma),F=la.tracker,
u={x:pa,y:va,width:ja,height:P,r:D,cursor:qa?"pointer":"",stroke:z,"stroke-width":r,fill:z,ishot:!0},F?F.attr(u):F=la.tracker=l.rect(u,p),F.data("eventArgs",ya);(F||ka).data("eventArgs",ya).click(aa).hover(Ca(ka,ea),Ra(ka,ua)).tooltip(C)}C=c.drawPlotBarLabel(a,b,t,pa,va)}C&&h.push(C);ka&&h.push(ka);F&&h.push(F);c.drawTracker&&c.drawTracker.call(c,a,b,t)}a.visible=!1!==b.visible;return a},drawPlotBarLabel:function(a,b,c,d,e,g){var h=this.options,l=this.logic,n=h.chart,m=this.paper,p=this.layers,q=
h.plotOptions.series.dataLabels.style,h=this.canvasLeft,s=this.canvasWidth,t=a.data[c],w=a.items[c];a=n.valuePadding+2;var z=w.graphic;c=w.dataLabel;var v=0>t.y,D=l.isStacked,l=l.is3D,H=n.xDepth||0,J=n.yDepth||0,G=t.displayValue;b=!1===b.visible?"hidden":"visible";n=n.placeValuesInside;g=g||p.datalabels;if(C(G)&&G!==N&&null!==t.y){c||(c=w.dataLabel=m.text({"class":"fusioncharts-label",text:G,"font-size":q.fontSize,title:t.originalText||"",fill:q.color,x:0,y:0,"line-height":q.lineHeight},g).attr("text-bound",
[q.backgroundColor,q.borderColor,q.borderThickness,q.borderPadding,q.borderRadius,q.borderDash]));q=c.getBBox();g=z.data("BBox");t=g.height;p=g.width;g=D?"middle":v?n?"start":"end":n?"end":"start";m=v?d-h:h+s-(d+p);q=q.width;q+=a;t=e+.5*t;z=d+(v?0:p);e=v?d-h:h+s-(d+p);if(D)z=Ra(h+.5*q,z+.5*(v?p:-p)),z=oa(h+s-.5*q,z),z-=l?H:0,t+=l?J:0;else if(n?p>=q?(z+=v?a:-a,l&&(t+=J,z-=H)):q<m?(z+=v?-a:a,g=v?"end":"start",l&&v&&(z-=H)):(v?(z=d+p+Ra(q-d-p+h,0)-a,g="end",z-=l?H:0):(z=d-Ra(q-(h+s-d),0)+a,g="start"),
l&&(z-=H,t+=J)):e>=q?(z+=v?-a:a,l&&v&&(z-=H,t+=H)):(z+=v?a+q:-(a+q),l&&(z-=H,t+=J)),z>h+s||z<h)z=h+4,g="start";c.attr({x:z,y:t,"text-anchor":g,visibility:b})}else c&&c.attr({text:N});return c},drawPlotBar3d:function(a,b){this.drawPlotBar.call(this,a,b)},drawPlotLine:function(a,b){var c=this,d=c.paper,e=c.elements,g=c.options,h=g.chart,m=c.logic,p=g.plotOptions.series,q=a.items,t=a.graphics=a.graphics||[],w,v=c.xAxis[b.xAxis||0],C=c.yAxis[b.yAxis||0],D=m.multisetRealtime||m.dragExtended,H=m.isWaterfall,
J,G,M,L,N,P=0,R=!1!==(g.tooltip||{}).enabled,U,V=isNaN(+p.animation)&&p.animation.duration||1E3*p.animation,ba,Z=p.dataLabels.style,Y={fontFamily:Z.fontFamily,fontSize:Z.fontSize,lineHeight:Z.lineHeight,fontWeight:Z.fontWeight,fontStyle:Z.fontStyle},ja=h.xDepth||0,ga=h.yDepth||0,aa=h.series2D3Dshift,r=b.step,u=b.drawVerticalJoins,B=b.useForwardSteps,F=a.data,f=!1===b.visible?"hidden":"visible",ea,O=F.length,X=v.getAxisPosition(0),fa=v.getAxisPosition(1)-X,la=fa*O,ua=v.axisData.scroll||{},ma=h.hasScroll||
!1,ta,va=p.connectNullData,pa=c.chartWidth,qa=c.chartHeight,xa=function(){Vb.attr({"clip-rect":null});Cb.show();zc.show();zb.show();Fc.attr({transform:"...t"+-pa+","+-qa})},ka,za,ya,Da,Ea,Ca,Ga,Pa=null,Ka,Db,bb=p.connectorWidth=n(b.lineWidth),Va=b.color,La,Xa,Za=p.connectorDashStyle=b.dashStyle,fb,ib,gb,db,$a,Sa,nb,sb,vb,yb=c.layers,Fb=yb.dataset=yb.dataset||d.group("dataset-orphan"),Fc=yb.datalabels=yb.datalabels||d.group("datalabels").insertAfter(Fb),vc=yb.tracker,$c=e["clip-canvas-init"].slice(0),
Dc=e["clip-canvas"].slice(0),Gc=C.axisData.reversed,bc=C.max,cc=C.min,Mc=C.getAxisPosition(0<bc&&0<cc?Gc?bc:cc:0>bc&&0>cc?Gc?cc:bc:Gc?bc:0)+(aa?ga:0),Ib=[],$b=h.anchorTrackingRadius,ob=/drag/ig.test(c.logic.rendererId),eb,pc,tb,zc,Cb,Vb,zb,Ta,Ac,Wb,Qa,Eb,ub=[],Xb=function(a){Ba.call(this,c,a)},Aa=function(a){return function(b){c.hoverPlotAnchor(this,b,"DataPlotRollOver",a,c)}},Nc=function(a){return function(b){c.hoverPlotAnchor(this,b,"DataPlotRollOut",a,c)}},Ya=function(e,g,h,l,n,m,p,q){return function(){var r=
h.imageUrl,s=h.imageScale,u=h.imageAlpha,w=p.imageHoverAlpha,v=p.imageHoverScale,B=this.height*s*.01,C=this.width*s*.01,F=this.width*v*.01;nb={x:e-this.width*s*.005,y:g-this.height*s*.005,width:C,height:B,alpha:u};sb={x:e-this.width*v*.005,y:g-this.height*v*.005,width:F,height:this.height*v*.01,alpha:w};w=F>C?sb:nb;ob&&(w={cx:e,cy:g,r:.5*Ra(B,C)});(l.graphic=db=d.image(r,zb).attr(nb).css({opacity:.01*u}).data("alwaysInvisible",!s).data("setRolloverProperties",p).data("setRolloverAttr",sb).data("setRolloutAttr",
nb).data("anchorRadius",s).data("anchorHoverRadius",v))&&t.push(db);if(za||R||p)$a=l.tracker=(ob?d.circle(vc):d.rect(vc)).attr(w).attr({cursor:za?"pointer":"",stroke:z,"stroke-width":h.lineWidth,fill:z,ishot:!0,visibility:f}).data("eventArgs",n).data("groupId",eb).click(Xb).hover(Aa(l),Nc(l)).tooltip(m);c.drawTracker&&c.drawTracker.call(c,a,b,q);(Qa=l.dataLabel=c.drawPlotLineLabel(a,b,q,e,g))&&t.push(Qa)}},Hb=function(d,e,f,g,h,l,n,m){return function(){(Qa=g.dataLabel=c.drawPlotLineLabel(a,b,m,d,
e))&&t.push(Qa)}};c.addCSSDefinition(".fusioncharts-datalabels .fusioncharts-label",Y);Fc.attr("class","fusioncharts-datalabels");p.connectorOpacity=K.color(Va).opacity;C.yBasePos=Mc;H&&(J=(G=c.definition.chart)&&G.plotspacepercent,M=p.groupPadding,L=p.maxColWidth,N=(1-.01*J)*fa||oa(fa*(1-2*M),1*L),P=N/2);Fc.attr({transform:"...t"+pa+","+qa});V&&c.animationCompleteQueue.push({fn:xa,scope:c});tb=Fb.line||(Fb.line=d.group("line-connector",Fb));zc=a.lineShadowLayer||(a.lineShadowLayer=d.group("connector-shadow",
tb));Cb=a.anchorShadowLayer||(a.anchorShadowLayer=d.group("anchor-shadow",tb));Vb=a.lineLayer||(a.lineLayer=d.group("connector",tb));zb=a.anchorLayer||(a.anchorLayer=d.group("anchors",tb));zb.hide();zc.hide();Cb.hide();for(ea=0;ea<O;ea+=1){ka=F[ea];Ea=ka.y;Ca=ka.previousY||0;U=ka.toolText;eb=a.index+"_"+ea;vb=Qa=db=$a=null;w=q[ea]={index:ea,value:null,graphic:null,connector:null,dataLabel:null,shadowGroup:Cb,tracker:null};if(null===Ea)ub.length=0,0===va&&(Pa=null);else{Da=s(ka.x,ea);za=ka.link;"boxandwhisker"===
b.relatedSeries&&b.pointStart&&(Da+=b.pointStart);Db=C.getAxisPosition(Ea+Ca)+(aa?ga:0);Ka=v.getAxisPosition(Da)-ja;Ka=I(Ka,bb,bb).position;Db=I(Db,bb,bb).position;if((fb=ka.marker)&&fb.enabled)if(ib=fb.symbol.split("_"),gb="spoke"===ib[0]?1:0,ya=fb.radius,Ta=fb.shadow,pc={index:ea,link:za,value:ka.y,displayValue:ka.displayValue,categoryLabel:ka.categoryLabel,toolText:ka.toolText,id:a.userID,datasetIndex:a.index,datasetName:a.name,visible:a.visible},nb=sb={},Sa=ka.rolloverProperties,fb.imageUrl)Eb=
new l,Eb.onload=Ya(Ka,Db,fb,w,pc,U,Sa,ea),Eb.onerror=Hb(Ka,Db,fb,w,pc,U,Sa,ea),Eb.src=fb.imageUrl;else{Sa&&(nb={polypath:[ib[1]||2,Ka,Db,ya,fb.startAngle,gb],fill:$(fb.fillColor),"stroke-width":fb.lineWidth,stroke:$(fb.lineColor)},sb={polypath:[Sa.sides||2,Ka,Db,Sa.radius,Sa.startAngle,Sa.dip],fill:$(Sa.fillColor),"stroke-width":Sa.lineWidth,stroke:$(Sa.lineColor)});db=w.graphic=d.polypath(ib[1]||2,Ka,Db,ya,fb.startAngle,gb,zb).attr({fill:$(fb.fillColor),"stroke-width":fb.lineWidth,stroke:$(fb.lineColor),
cursor:za?"pointer":"",visibility:ya?f:"hidden"}).data("alwaysInvisible",!ya).data("setRolloverProperties",Sa).data("setRolloverAttr",sb).data("setRolloutAttr",nb).data("anchorRadius",ya).data("anchorHoverRadius",Sa&&Sa.radius).shadow(Ta||!1,Cb);if(za||R||Sa)ya=Ra(ya,Sa&&Sa.radius||0,$b),$a=w.tracker=d.circle({cx:Ka,cy:Db,r:ya,cursor:za?"pointer":"",stroke:z,"stroke-width":fb.lineWidth,fill:z,ishot:!0,visibility:f},vc);($a||db).data("eventArgs",pc).data("groupId",eb).click(Xb).hover(Aa(w),Nc(w)).tooltip(U);
c.drawTracker&&c.drawTracker.call(c,a,b,ea)}Ac=Wb!==[$(ka.color||Va),ka.dashStyle||Za].join(":");if(null!==Pa){if(ub.length&&(Ib=Ib.concat(ub),ub.length=0),(D||H||!Ib.join(""))&&Ib.push("M",Ga,Pa),H&&Ib.push("m",-P,0),r?B?(Ib.push("H",Ka),H&&Ib.push("h",P),u?Ib.push("V",Db):Ib.push("m",0,Db-Pa)):(u&&Ib.push("V",Db),Ib.push("M",Ga,Db,"H",Ka)):Ib.push("L",Ka,Db),D||Ac)vb=w.connector=d.path(Ib,Vb).attr({"stroke-dasharray":Xa,"stroke-width":bb,stroke:La,"stroke-linecap":"round","stroke-linejoin":2<bb?
"round":"miter",visibility:f}).shadow(p.shadow&&ka.shadow,zc),Ib=[]}else!D&&ub.push("M",Ka,Db);fb&&fb.imageUrl||(Qa=w.dataLabel=c.drawPlotLineLabel(a,b,ea,Ka,Db));Ga=Ka;Pa=Db;La=$(ka.color||Va);Xa=ka.dashStyle||Za;Wb=[La,Xa].join(":")}Qa&&t.push(Qa);db&&t.push(db);vb&&t.push(vb);$a&&t.push($a)}!D&&Ib.join("")&&(vb=d.path(Ib,Vb).attr({"stroke-dasharray":Xa,"stroke-width":bb,stroke:La,"stroke-linecap":"round","stroke-linejoin":2<bb?"round":"miter",visibility:f}).shadow(p.shadow&&ka.shadow,zc))&&t.push(vb);
ma&&(ta=ua.startPercent,Dc[2]=la+$c[0],1===ta&&($c[0]=Dc[2],Dc[0]=0));V?(ba=K.animation({"clip-rect":Dc},V,ma?"easeIn":"normal",c.getAnimationCompleteFn()),Vb.attr({"clip-rect":$c}).animate(H?ba.delay(V):ba)):(xa&&xa(),xa=void 0);a.visible=!1!==b.visible;return a},hoverPlotAnchor:function(a,b,c,d,e){var g=d.graphic;d=d.dataLabel;var h=e.options.chart,l=1===h.rotateValues?270:0,n=g.data("setRolloverProperties"),m=g.data("isRealtime"),p=m&&g.attr("polypath"),q=g.data("setRolloverAttr"),s="image"===
g.type,t=g.data("setRolloutAttr"),z=d&&(d.data("isBelow")?1:-1)*(s?.5*(q.height-t.height):g.data("anchorHoverRadius")-g.data("anchorRadius")),w="DataPlotRollOver"==c?q:t,v={transform:"T0,"+("DataPlotRollOver"===c?z:0)+"R"+l},C={fill:w.fill,"stroke-width":w["stroke-width"],stroke:w.stroke},w=s?w:{polypath:w.polypath},h=h.syncLabelWithAnchor,D=g.data("anchorRadius"),H=g.data("anchorHoverRadius"),q=!(/,0\)$/.test(q.fill)&&/,0\)$/.test(t.fill))&&g.data("anchorHoverRadius")-g.data("anchorRadius")&&n.animation&&
50;d&&d.data("isMiddle")&&(v={transform:"T,"+("DataPlotRollOver"===c?z:0)+",0R"+l});n&&(("DataPlotRollOver"==c&&0!==H||"DataPlotRollOut"==c&&0!==D)&&g.attr({visibility:"visible"}),s?g.css({opacity:.01*w.alpha}):g.attr(C),m&&!s&&(w.polypath[1]=p[1],w.polypath[2]=p[2]),g.stop(),g.animate(w,q,"easeOut",function(){("DataPlotRollOver"==c&&!H||"DataPlotRollOut"==c&&!D)&&g.attr({visibility:"hidden"})}),d&&d.stop(),q&&h&&d&&d.animate(v,q,"easeOut"));Ba.call(a,e,b,c)},drawPlotArea:function(a,b){var c=this,
d=c.paper,e=c.options,g=e.chart,h=c.logic,n=e.plotOptions.series,m=c.elements,p=a.items,q=a.graphics=a.graphics||[],t,w=c.xAxis[b.xAxis||0],v=c.yAxis[b.yAxis||0],C=v.axisData.reversed,D=g.xDepth||0,J=g.yDepth||0,h=h.isStacked,G=!1!==(e.tooltip||{}).enabled,I,K,e=n.dataLabels.style,M={fontFamily:e.fontFamily,fontSize:e.fontSize,lineHeight:e.lineHeight,fontWeight:e.fontWeight,fontStyle:e.fontStyle,color:e.color},e=isNaN(+n.animation)&&n.animation.duration||1E3*n.animation,L=g.series2D3Dshift,N="0"===
c.definition.chart.drawfullareaborder,P=a.data,R=!1===b.visible?"hidden":"visible",U=P.length,V=w.getAxisPosition(0),ba=(w.getAxisPosition(1)-V)*U,Z=w.axisData.scroll||{},V=g.hasScroll||!1,Y=n.connectNullData,aa,r,u,B,F,f=v.max,ja=v.min,O=v.getAxisPosition(0<f&&0>ja?0:!C&&0<f&&0<=ja?ja:f)+(L?J:0),X=c.chartWidth,ea=c.chartHeight,C=function(){db.attr({"clip-rect":null});fb.show();Xa.show();Ka.attr({transform:"...t"+-X+","+-ea})},ga=null,ua,fa,f=b.lineWidth,ja=b.dashStyle,la=$(b.fillColor),va=$(b.lineColor),
ma=0,ta=/drag/ig.test(c.logic.rendererId),pa,ka,qa,oa,xa,za,ya=[],Da=[],Ea=null,Ga=[],Ca=c.layers;B=Ca.dataset=Ca.dataset||d.group("dataset-orphan");var Ka=Ca.datalabels=Ca.datalabels||d.group("datalabels").insertAfter(B),Pa=Ca.tracker,Ca=m["clip-canvas-init"].slice(0),m=m["clip-canvas"].slice(0),g=g.anchorTrackingRadius,La,Xa,Za,fb,db,gb,ib,nb,Sa,$a,sb=function(a){Ba.call(this,c,a)},vb=function(a){return function(b){c.hoverPlotAnchor(this,b,"DataPlotRollOver",a,c)}},yb=function(a){return function(b){c.hoverPlotAnchor(this,
b,"DataPlotRollOut",a,c)}},Ea=function(e,f,g,h,l,n,m,p){return function(){var s=g.imageUrl,t=g.imageScale,u=g.imageAlpha,w=m.imageHoverAlpha,v=m.imageHoverScale,B=this.width*t*.01,C=this.width*v*.01;xa={x:e-this.width*t*.005,y:f-this.height*t*.005,width:B,height:this.height*t*.01,alpha:u};za={x:e-this.width*v*.005,y:f-this.height*v*.005,width:C,height:this.height*v*.01,alpha:w};w=C>B?za:xa;ta&&(w={cx:e,cy:f,r:.5*Ra(C,B)});(h.graphic=ka=d.image(s,fb).attr(xa).css({opacity:.01*u}).data("alwaysInvisible",
!t).data("setRolloverProperties",m).data("setRolloverAttr",za).data("setRolloutAttr",xa).data("anchorRadius",t).data("anchorHoverRadius",v))&&q.push(ka);if(r||G||m)La=H({cursor:r?"pointer":"",stroke:z,"stroke-width":g.lineWidth,fill:z,ishot:!0,visibility:R},w),qa=h.tracker=(ta?d.circle(La,Pa):d.rect(La,Pa)).data("eventArgs",l).click(sb).hover(vb(h),yb(h)).tooltip(n),c.drawTracker&&c.drawTracker.call(c,a,b,p);($a=h.dataLabel=c.drawPlotLineLabel(a,b,p,e,f))&&q.push($a)}},Fb=function(d,e,f,g,h,l,n,m){return function(){($a=
g.dataLabel=c.drawPlotLineLabel(a,b,m,d,e))&&q.push($a)}};c.addCSSDefinition(".fusioncharts-datalabels .fusioncharts-label",M);Ka.attr("class","fusioncharts-datalabels");v.yBasePos=O;Ka.attr({transform:"...t"+X+","+ea});e&&c.animationCompleteQueue.push({fn:C,scope:c});M=B;h&&(gb=M.shadows||(M.shadows=d.group("shadows",M).toBack()));db=M.area=M.area||d.group("area",M);M=M.areaConnector||(M.areaConnector=d.group("area-connector",M));a.lineShadowLayer||(a.lineShadowLayer=d.group("connector-shadow",M));
Xa=a.anchorShadowLayer||(a.anchorShadowLayer=d.group("anchor-shadow",M));Za=a.lineLayer||(a.lineLayer=d.group("connector",M));fb=a.anchorLayer||(a.anchorLayer=d.group("anchors",M));fb.hide();Xa.hide();M=B;for(M=0;M<U;M+=1){aa=P[M];B=aa.y;t=s(aa.x,M);ua=w.getAxisPosition(t)-D;ka=$a=qa=null;t=p[M]={};if(null===B)0===Y&&(ga=null,0<ma&&(1===ma?ya.splice(-8,8):(ya=ya.concat(Da),ya.push("Z")),Da=[])),t.chart=c,t.index=M,t.value=B;else{r=aa.link;I=aa.toolText;K=aa.previousY;F=(F=v.getAxisPosition(K)||null)||
O;fa=v.getAxisPosition(B+(K||0))+(L?J:0);if((Sa=aa.marker)&&Sa.enabled)if(K={index:M,link:r,value:aa.y,displayValue:aa.displayValue,categoryLabel:aa.categoryLabel,toolText:aa.toolText,id:a.userID,datasetIndex:a.index,datasetName:a.name,visible:a.visible},xa=za={},oa=aa.rolloverProperties,Sa.imageUrl)u=new l,u.onload=Ea(ua,fa,Sa,t,K,I,oa,M),u.onerror=Fb(ua,fa,Sa,t,K,I,oa,M),u.src=Sa.imageUrl;else{pa=Sa.symbol.split("_");u=Sa.radius;nb=Sa.shadow;oa&&(xa={polypath:[pa[1]||2,ua,fa,u,Sa.startAngle,0],
fill:$(Sa.fillColor),"stroke-width":Sa.lineWidth,stroke:$(Sa.lineColor)},oa=aa.rolloverProperties,za={polypath:[oa.sides||2,ua,fa,oa.radius,oa.startAngle,oa.dip],fill:$(oa.fillColor),"stroke-width":oa.lineWidth,stroke:$(oa.lineColor)});ka=t.graphic=d.polypath(pa[1]||2,ua,fa,u,Sa.startAngle,0,fb).attr({fill:$(Sa.fillColor),"stroke-width":Sa.lineWidth,stroke:$(Sa.lineColor),cursor:r?"pointer":"",visibility:u?R:"hidden"}).data("alwaysInvisible",!u).data("setRolloverProperties",oa).data("setRolloverAttr",
za).data("setRolloutAttr",xa).data("anchorRadius",u).data("anchorHoverRadius",oa&&oa.radius).shadow(nb||!1,Xa);if(r||G||oa)h||(u=Ra(u,oa&&oa.radius||0,g)),qa=t.tracker=d.circle({cx:ua,cy:fa,r:u,cursor:r?"pointer":"",stroke:z,"stroke-width":Sa.lineWidth,fill:z,ishot:!0,visibility:R},Pa);(qa||ka).data("eventArgs",K).click(sb).hover(vb(t),yb(t)).tooltip(I);c.drawTracker&&c.drawTracker.call(c,a,b,M)}null===ga?(Ga.push("M",ua,",",fa),ya.push("M",ua,",",F),ma=0):Ga.push("L",ua,",",fa);ya.push("L",ua,",",
fa);Da.unshift("L",ua,",",F);ma++;ga=fa;Sa&&Sa.imageUrl||($a=t.dataLabel=c.drawPlotLineLabel(a,b,M,ua,fa));t.chart=c;t.index=M;t.value=B;t.dataLabel=$a}$a&&q.push($a);ka&&q.push(ka);qa&&q.push(qa)}0<ma&&(1===ma?ya.splice(-8,8):(ya=ya.concat(Da),ya.push("Z")));(Ea=a.graphic=d.path(ya,db).attr({fill:la,"stroke-dasharray":ja,"stroke-width":N?0:f,stroke:va,"stroke-linecap":"round","stroke-linejoin":2<f?"round":"miter",visibility:R}).shadow(n.shadow&&aa.shadow,gb))&&q.push(Ea);V&&(n=Z.startPercent,m[2]=
ba+Ca[0],1===n&&(Ca[0]=m[2],m[0]=0));e?ib=db.attr({"clip-rect":Ca}).animate({"clip-rect":m},e,V?"easeIn":"normal",c.getAnimationCompleteFn()):(C&&C(),C=void 0);gb&&(e?gb.attr({"clip-rect":Ca}).animateWith(db,ib,{"clip-rect":m},e,V?"easeIn":"normal",function(){gb.attr({"clip-rect":null})}):gb.attr({"clip-rect":null}));N&&(n=a.connector=d.path(Ga,Za).attr({"stroke-dasharray":ja,"stroke-width":f,stroke:va,"stroke-linecap":"round","stroke-linejoin":2<f?"round":"miter",visibility:R}),e?Za.attr({"clip-rect":Ca}).animateWith(db,
ib,{"clip-rect":m},e,V?"easeIn":"normal",function(){Za.attr({"clip-rect":null})}):Za.attr({"clip-rect":null}),n&&q.push(n));a.visible=!1!==b.visible;return a},drawPlotScatter:function(a,b){var c=this,d=c.options,e=d.chart,g=d.plotOptions.series,h=c.paper,l=c.elements,n=a.items,m,p=a.graphics=a.graphics||[],q=c.xAxis[b.xAxis||0],s=c.yAxis[b.yAxis||0],t=a.data,w=!1===b.visible?"hidden":"visible",d=!1!==(d.tooltip||{}).enabled,v,C=g.dataLabels.style,D={fontFamily:C.fontFamily,fontSize:C.fontSize,lineHeight:C.lineHeight,
fontWeight:C.fontWeight,fontStyle:C.fontStyle,color:C.color},C=isNaN(+g.animation)&&g.animation.duration||1E3*g.animation,H=c.chartWidth,J=c.chartHeight,G,M,K,I,L,N,P,R,U,V=b.lineWidth,aa=0<V,r=b.color,u=b.dashStyle,B=g.connectNullData,F=[],f,ba,O,X,Z,ja,Y=c.layers,ga=Y.dataset||(Y.dataset=h.group("dataset-orphan")),ea=Y.datalabels||(Y.datalabels=h.group("datalabels").insertAfter(ga)),Y=Y.tracker,e=e.anchorTrackingRadius,fa,la,ma,oa=function(a){Ba.call(this,c,a)},ka=function(a){return function(b){c.hoverPlotAnchor(this,
b,"DataPlotRollOver",a,c)}},qa=function(a){return function(b){c.hoverPlotAnchor(this,b,"DataPlotRollOut",a,c)}};c.addCSSDefinition(".fusioncharts-datalabels .fusioncharts-label",D);ea.attr("class","fusioncharts-datalabels");C&&(c.animationCompleteQueue.push({fn:function(){ea.attr({transform:"...t"+-H+","+-J})},scope:c}),ea.attr({transform:"...t"+H+","+J}));fa=ga.line||(ga.line=h.group("line-connector",ga));a.lineShadowLayer=h.group("connector-shadow",fa);ga=a.anchorShadowLayer=h.group("anchor-shadow",
fa);D=a.lineLayer=h.group("connector",fa);fa=a.anchorLayer=h.group("anchors",fa);G=0;for(M=t.length;G<M;G+=1){K=t[G];f=K.marker;R=U=X=v=Z=null;ma=a.index+"_"+G;N=K.y;L=K.x;if(null!==N&&null!==L){if(f&&f.enabled){I=K.link;v=K.toolText;O=f.radius;la=f.shadow;U=s.getAxisPosition(N);R=q.getAxisPosition(L);ba={index:G,link:I,y:K.y,x:K.x,displayValue:K.displayValue,categoryLabel:K.categoryLabel,toolText:K.toolText,id:a.userID,datasetIndex:a.index,datasetName:a.name,visible:a.visible};X=f.symbol.split("_");
m=n[G]={index:G,x:L,y:N,value:N};L=N={};K.hoverEffects&&(L={polypath:[X[1]||2,R,U,O,f.startAngle,0],fill:$(f.fillColor),"stroke-width":f.lineWidth,stroke:$(f.lineColor)},ja=K.rolloverProperties,N={polypath:[ja.sides||2,R,U,ja.radius,ja.startAngle,ja.dip],fill:$(ja.fillColor),"stroke-width":ja.lineWidth,stroke:$(ja.lineColor)});X=m.graphic=h.polypath(X[1]||2,R,U,O,f.startAngle,0,fa).attr({fill:$(f.fillColor),"stroke-width":f.lineWidth,stroke:$(f.lineColor),cursor:I?"pointer":"",visibility:O?w:"hidden"}).data("alwaysInvisible",
!O).data("setRolloverProperties",ja).data("setRolloverAttr",N).data("setRolloutAttr",L).data("anchorRadius",O).data("anchorHoverRadius",ja&&ja.radius).shadow(la||!1,ga);if(I||d||ja)O=Ra(O,ja&&ja.radius||0,e),Z=m.tracker=h.circle({cx:R,cy:U,r:O,cursor:I?"pointer":"",stroke:z,"stroke-width":f.lineWidth,fill:z,ishot:!0,visibility:w},Y);(Z||X).data("eventArgs",ba).data("groupId",ma).click(oa).hover(ka(m),qa(m)).tooltip(v)}aa&&((void 0===P||null===P&&0===B)&&R&&U&&F.push("M",R,",",U),R&&U&&F.push("L",
R,",",U),P=U);v=m.dataLabel=c.drawPlotLineLabel(a,b,G,R,U)}else aa&&0===B&&(P=null),n[G]={chart:c,index:G,x:L,y:N};v&&p.push(v);X&&p.push(X);Z&&p.push(Z);c.drawTracker&&c.drawTracker.call(c,a,b,G)}F.length&&(g=a.graphic=h.path(F,D).attr({"stroke-dasharray":u,"stroke-width":V,stroke:r,"stroke-linecap":"round","stroke-linejoin":2<V?"round":"miter",visibility:w}).shadow(g.shadow&&K.shadow),D.attr({"clip-rect":l[C?"clip-canvas-init":"clip-canvas"]}),C&&D.animate({"clip-rect":l["clip-canvas"]},C,"normal"),
p.push(g));C&&fa.attr({opacity:0}).animate({opacity:1},C,"normal",c.getAnimationCompleteFn());a.visible=!1!==b.visible;return a},drawPlotLineLabel:function(a,b,c,d,e,g){var h=this.options,l=h.chart,n=this.paper,m=this.layers,p=h.plotOptions.series.dataLabels.style,h=1===l.rotateValues?270:0,q=this.canvasHeight,s=this.canvasTop,t=a.data,w=t[c],v=a.items[c],z=fa(w.valuePosition,"auto").toLowerCase();a=this.logic.defaultSeriesType;var D=v.graphic,H=w.marker,D=H&&H.enabled?D&&"image"==D.type&&.5*D.attr("height")||
H&&H.radius-3:0,l=l.valuePadding+2+D;b=!1===b.visible?"hidden":"visible";D=v.dataLabel;g=g||m.datalabels;switch(z){case "above":c=0;break;case "below":c=1;break;default:m=t[c-1]||{},t=t[c+1]||{},c=c?m.y>w.y?1:(null==m.y&&t.y)>w.y?1:0:0}m=w.displayValue;C(m)&&m!==N?(D?h&&D.attr("transform",["r",360-h]):D=v.dataLabel=n.text(g).attr({"class":"fusioncharts-label",text:m,fill:p.color,"text-bound":[p.backgroundColor,p.borderColor,p.borderThickness,p.borderPadding,p.borderRadius,p.borderDash],"font-weight":p.fontWeight,
"font-style":p.fontStyle,"font-family":p.fontFamily,"font-size":p.fontSize,"line-height":p.lineHeight}),D.attr({title:w.originalText||"",fill:p.color}),v._state&&v._state.labelWidth||(g=D.getBBox(),v._state={labelWidth:g.width,labelHeight:g.height}),n=p=h?v._state.labelWidth:v._state.labelHeight,g=e-s,q=s+q-e,n=n+l+4,s=.5*p+l,/bubble/i.test(a)||(c?q>n?(e+=s,w._valueBelowPoint=1):g>n&&(e-=s,w._valueBelowPoint=0):g>n?(e-=s,w._valueBelowPoint=0):q>n&&(e+=s,w._valueBelowPoint=1)),D.attr({x:d,y:e,visibility:b}).data("isBelow",
w._valueBelowPoint),h&&D.attr("transform","T0,0,R"+h)):D&&D.attr({text:N});return D},drawLabels:function(){for(var a=this.paper,b=this.options,c=(b=b.labels&&b.labels.items&&b.labels.items)&&b.length,d=this.layers.layerAboveDataset,e=this.elements.quadran||(this.elements.quadran=[]),g=this.canvasTop,h=this.canvasLeft,l={right:"end",left:"start",undefined:"start"},n,m,p;c--;)p=b[c],n=p.style,m={fontFamily:n.fontFamily,fontSize:n.fontSize,lineHeight:n.lineHeight,fontWeight:n.fontWeight,fontStyle:n.fontStyle,
fill:n.color},C(p.html)&&p.html!==N&&(e[c]=a.text(d).attr({text:p.html,x:parseInt(n.left,10)+h,y:parseInt(n.top,10)+g,"text-anchor":l[p.textAlign],"vertical-align":p.vAlign}).css(m))}},b["renderer.root"]);b("renderer.piebase",{isHovered:!1,getPlotData:function(a,b){var c=this.datasets[0],d=c.data[a],c=c.userData||(c.userData=[]),e,g;if(c[a])c=c[a];else{c=c[a]={};for(g in d)"object"!==typeof(e=d[g])&&"function"!==typeof e&&0!==g.indexOf("_")&&(c[g]=e);c.value=c.y;c.label=c.name;delete c.y;delete c.total;
delete c.doNotSlice;delete c.name;delete c.centerAngle;delete c.showInLegend}c.sliced=b;return c},redrawDataLabels:function(a){var b=a.elements.plots[0];a.placeDataLabels(!0,b.items,b);return{}},sliceInOtherPies:function(a){var b=this.options.series[0],c=b.plot.items,d=c.length,e=0,g;for(b.enableMultiSlicing=!0;d--;)d!==a&&(g=c[d]).sliced&&++e&&this.plotGraphicClick.call(g);b.enableMultiSlicing=!1;return!!e},plotGraphicClick:function(a){var b=this.graphic||this,c=b.plotItem||b.data("plotItem"),d=
c.seriesData,e=c.chart,g=e.logic.chartInstance,h=c.index,l=b.data("eventArgs")||{},n=e.options.series[0].enableMultiSlicing,m=d.data[c.index].doNotSlice,p=c.slicedTranslation,q,s;!d.isRotating&&Ba.call(b,e,a);if(!(d.isRotating||d.singletonCase||m||(b=!n&&e.sliceInOtherPies(h),(a=c.sliced)&&b)))return b=c.graphic,d=c.connector,n=c.dataLabel,p="object"===typeof p?"t"+p:p,m=c.connectorPath,q=(a?-1:1)*c.transX,s=(a?-1:1)*c.transY,v.raiseEvent("slicingStart",{slicedState:a,dataIndex:"index"in l&&l.index,
data:e.getPlotData(h,a)},g),b.animate({transform:a?"t0,0":p},200,"easeIn",function(){v.raiseEvent("slicingEnd",{slicedState:c.sliced,dataIndex:"index"in l&&l.index,data:e.getPlotData(h,c.sliced)},g)}),n&&n.x&&n.animate({x:n.x+(a?0:q)},200,"easeIn"),m&&(m[1]+=q,m[2]+=s,m[4]+=q,m[6]+=q,d.animate({path:m},200,"easeIn")),a=c.sliced=!a,b={hcJSON:{series:[]}},b.hcJSON.series[0]={data:p=[]},p[h]={sliced:a},H(g.jsVars._reflowData,b,!0),a},plotDragStart:function(a,b,c){var d=this.data("plotItem"),e=d.chart,
d=d.seriesData,g=-e.datasets[0].startAngle*Ea;e.options.series[0].enableRotation&&(a=m.call(c,a,b,d.pieCenter,d.chartPosition),d.dragStartAngle=a,d.startingAngleOnDragStart=g)},plotDragEnd:function(){var a=this.data("plotItem"),b=a.chart,c=a.seriesData,a=-b.datasets[0].startAngle*Ea,d={hcJSON:{series:[{startAngle:a}]}};b.disposed||(H(b.logic.chartInstance.jsVars._reflowData,d,!0),b.rotate(c,b.options.series[0]));c.isRotating&&(setTimeout(function(){c.isRotating=!1},0),v.raiseEvent("RotationEnd",{startingAngle:D(a,
!0),changeInAngle:a-c.startingAngleOnDragStart},b.logic.chartInstance));!b.isHovered&&b.onPlotHover(this,!1)},plotDragMove:function(a,b,c,d,e){a=this.data("plotItem");var g=a.chart,h=a.seriesData,l=g.options.series;l[0].enableRotation&&!h.singletonCase&&(h.isRotating||(h.isRotating=!0,v.raiseEvent("RotationStart",{startingAngle:D(h.startingAngleOnDragStart,!0)},g.logic.chartInstance)),c=m.call(e,c,d,h.pieCenter,h.chartPosition),l[0].startAngle+=c-h.dragStartAngle,h.dragStartAngle=c,h.moveDuration=
0,c=(new Date).getTime(),!h._lastTime||h._lastTime+h.timerThreshold<c)&&(setTimeout(function(){g.rotate(h,l[0])},0),h._lastTime=c)},plotMouseDown:function(){(this.plotItem||this.data("plotItem")).seriesData.isRotating=!1},plotMouseUp:function(a){var b=this.plotItem||this.data("plotItem"),c=b.chart,d=b.seriesData;K.supportsTouch&&!d.isRotating&&c.plotGraphicClick.call(b,a)},plotRollOver:function(a){var b=this.plotItem||this.data("plotItem"),c=b.chart,d,e;b.seriesData.isRotating||(Ba.call(this,c,a,
"DataPlotRollOver"),c.onPlotHover(this,!0));c.isHovered=!0;(a=b.innerDiameter)&&(d=b.centerLabelConfig)&&(e=d.label)&&c.drawDoughnutCenterLabel(e,b.center[0],b.center[1],a,a,d,!1)},plotRollOut:function(a){var b=this.plotItem||this.data("plotItem"),c=b.chart,d=c.options.series[0],e,g;b.seriesData.isRotating||(Ba.call(this,c,a,"DataPlotRollOut"),c.onPlotHover(this,!1));c.isHovered=!1;(a=b.innerDiameter)&&(e=d.centerLabelConfig)&&((g=e.label)||!g)&&c.drawDoughnutCenterLabel(g,b.center[0],b.center[1],
a,a,e,!1)},onPlotHover:function(a,b){var c=a.data("plotItem"),d=c.rolloverProperties,e=b?d.color:c.color,g=b?d.borderWidth:c.borderWidth,h=b?d.borderColor:c.borderColor;d&&c.graphic.attr({fill:$(e),"stroke-width":g,stroke:h})},getEventArgs:function(a){a=a||{};return{datasetName:a.label,datasetIndex:a.originalIndex,id:a.userID,visible:!0,label:a.label,value:a.value,percentValue:a.percentage,tooltext:a.toolText,link:a.link,sliced:a.sliced}},legendClick:function(a){var b=a.chart;b.elements.plots[0].isRotating=
!1;b.plotGraphicClick.call(a)},placeDataLabels:function(){var a=function(a,b){return a.point.value-b.point.value},b=function(a,b){return a.angle-b.angle},c=["start","start","end","end"],d=[-1,1,1,-1],e=[1,1,-1,-1];return function(g,h,l,n){var m=this.options.plotOptions,p=m.pie,q=this.canvasLeft+.5*this.canvasWidth,w=this.canvasTop+.5*this.canvasHeight,v=this.smartLabel,z=m.series.dataLabels,C=z.style,D=s(Da(parseFloat(C.lineHeight)),12),D=t(z.placeLabelsInside,1===h.length?!0:!1),m=z.skipOverlapLabels,
H=z.manageLabelOverflow,J=z.connectorPadding,G=z.distance,M=n&&n.metrics||[q,w,p.size,p.innerSize||0],K=M[1],I=M[0];n=.5*M[2];var L=[[],[],[],[]],N=this.canvasLeft,P=this.canvasTop,p=this.canvasWidth,G=l.labelsRadius||(l.labelsRadius=n+G),w=q=parseInt(C.fontSize,10),R=w/2,J=[J,J,-J,-J];l=l.labelsMaxInQuadrant||(l.labelsMaxInQuadrant=Za(G/w));var z=z.isSmartLineSlanted,M=M[3]/2,U,V,$,aa,r,u,B,F,f,ja,O,X,Z,ba,Y,fa,ea,la,ma,pa;g||v.setStyle(C);if(1==h.length&&!M&&D)aa=h[0],(Y=aa.dataLabel)&&Y.show(),
aa.slicedTranslation=[N,P],Y&&(Y.attr({visibility:Ga,align:"middle",transform:["t",I,K]}),Y.x=I);else if(D)pa=M+(n-M)/2,ga(h,function(a){(Y=a.dataLabel)&&Y.show();Y&&(Z=a.angle,X=K+pa*za(Z),F=I+pa*ya(Z),Y.x=F,Y._x=F,Y.y=X,a.sliced&&(ma=a.slicedTranslation,ea=ma[0]-N,la=ma[1]-P,F+=ea,X+=la),Y.attr({visibility:Ga,align:"middle",transform:["t",F,X]}))});else{ga(h,function(a){(Y=a.dataLabel)&&Y.show();Y&&(Z=a.angle%Ca,0>Z&&(Z=Ca+Z),fa=0<=Z&&Z<Xa?1:Z<Ka?2:Z<yb?3:0,L[fa].push({point:a,angle:Z}))});for(h=
g=4;h--;){if(m&&(D=L[h].length-l,0<D))for(L[h].sort(a),C=L[h].splice(0,D),D=0,$=C.length;D<$;D+=1)aa=C[D].point,aa.dataLabel.attr({visibility:"hidden"}),aa.connector&&aa.connector.attr({visibility:"hidden"});L[h].sort(b)}D=Ra(L[0].length,L[1].length,L[2].length,L[3].length);ba=Ra(oa(D,l)*w,G+w);L[1].reverse();for(L[3].reverse();g--;){M=L[g];$=M.length;m||(w=$>l?ba/$:q,R=w/2);aa=$*w;C=ba;for(h=0;h<$;h+=1,aa-=w)D=ib(ba*za(M[h].angle)),C<D?D=C:D<aa&&(D=aa),C=(M[h].oriY=D)-w;U=c[g];$=ba-($-1)*w;C=0;for(h=
M.length-1;0<=h;h-=1,$+=w)if(aa=M[h].point,Z=M[h].angle,r=aa.sliced,Y=aa.dataLabel,D=ib(ba*za(Z)),D<C?D=C:D>$&&(D=$),C=D+w,ja=(D+M[h].oriY)/2,u=I+e[g]*G*ya(qa.asin(ja/ba)),ja*=d[g],ja+=K,O=K+n*za(Z),B=I+n*ya(Z),(2>g&&u<B||1<g&&u>B)&&(u=B),F=u+J[g],X=ja-R-2,f=F+J[g],Y.x=f,Y._x=f,H&&(V=1<g?f-this.canvasLeft:this.canvasLeft+p-f,v.setStyle(aa.style),D=s(Da(parseFloat(aa.style.lineHeight)),12)+2*Da(parseFloat(aa.style.border),12),D=v.getSmartText(aa.labelText,V,D),Y.attr({text:D.text,title:D.tooltext||
""})),Y.y=X,r&&(ea=aa.transX,la=aa.transY,F+=ea,u+=ea,B+=ea,O+=la,f+=ea),Y.attr({visibility:Ga,"text-anchor":U,vAlign:"middle",x:f,y:ja}),D=aa.connector)aa.connectorPath=aa=["M",B,O,"L",z?u:B,ja,F,ja],D.attr({path:aa,visibility:Ga})}}}}()},b["renderer.root"])}]);
FusionCharts.register("module",["private","modules.renderer.js-interface",function(){var d=this,m=d.hcLib,D=d.renderer.getRenderer("javascript"),v=m.hasModule,p=m.loadModule,c=m.getMetaSentence,K=m.moduleCmdQueue,b=m.executeWaitingCommands,G=m.injectModuleDependency,a=m.moduleDependencies,l=m.getDependentModuleName,P,N;P=function(a){var g,e,h,n={},p;a=c(a);for(g in d.core.items)g=d.core.items[g],e=g.chartType(),h=g.options.chartTypeSourcePath+e,(e=g.jsVars)&&e.waitingModule&&g.__state.rendering&&
m.needsModule(a.predicate,h)&&(e.waitingModuleError=!0,e=l(h).concat(e.userModules),e.length&&(e=e[e.length-1],n[e]=m.moduleCmdQueue[e]));for(p in n)b(n[p]);d.raiseError(d.core,"11171116151","run","HC-interface~renderer.load","Unable to load required modules and resources: "+a.key)};N=function(a,b,c){var h=a.args,l=a.options;a._chartMessageStyle={color:h.typeNotSupportedMessageColor||l.baseChartMessageColor,fontFamily:h.typeNotSupportedMessageFont||l.baseChartMessageFont,fontSize:h.typeNotSupportedMessageFontSize||
l.baseChartMessageFontSize};d.hcLib.createChart(a,b,"stub",c,l.typeNotSupportedMessage)};m.eventList=d.extend(d.legacyEventList,{loaded:"FC_Loaded",dataloaded:"FC_DataLoaded",rendered:"FC_Rendered",drawcomplete:"FC_DrawComplete",dataxmlinvalid:"FC_DataXMLInvalid",nodatatodisplay:"FC_NoDataToDisplay",exported:"FC_Exported"});m.raiseEvent=d.raiseEventWithLegacy;a.charts=d.extend(a.charts||{},{column2d:0,column3d:0,bar2d:0,bar3d:0,pie2d:0,pie3d:0,line:0,area2d:0,doughnut2d:0,doughnut3d:0,pareto2d:0,
pareto3d:0,mscolumn2d:0,mscolumn3d:0,msline:0,msarea:0,msbar2d:0,msbar3d:0,stackedcolumn2d:0,marimekko:0,stackedcolumn3d:0,stackedarea2d:0,stackedcolumn2dline:0,stackedcolumn3dline:0,stackedbar2d:0,stackedbar3d:0,msstackedcolumn2d:0,mscombi2d:0,mscombi3d:0,mscolumnline3d:0,mscombidy2d:0,mscolumn3dlinedy:0,stackedcolumn3dlinedy:0,msstackedcolumn2dlinedy:0,scatter:0,bubble:0,ssgrid:0,scrollcolumn2d:0,scrollcolumn3d:0,scrollline2d:0,scrollarea2d:0,scrollstackedcolumn2d:0,scrollcombi2d:0,scrollcombidy2d:0,
zoomline:0});a.powercharts=d.extend(a.powercharts||{},{spline:0,splinearea:0,msspline:0,mssplinearea:0,mssplinedy:0,multiaxisline:0,multilevelpie:0,waterfall2d:0,msstepline:0,inversemsline:0,inversemscolumn2d:0,inversemsarea:0,errorbar2d:0,errorscatter:0,errorline:0,logmsline:0,logmscolumn2d:0,logstackedcolumn2d:0,radar:0,dragnode:0,candlestick:0,selectscatter:0,dragcolumn2d:0,dragline:0,dragarea:0,boxandwhisker2d:0,kagi:0,heatmap:0});a.widgets=d.extend(a.widgets||{},{angulargauge:0,bulb:0,cylinder:0,
drawingpad:0,funnel:0,hbullet:0,hled:0,hlineargauge:0,vlineargauge:0,pyramid:0,realtimearea:0,realtimecolumn:0,realtimeline:0,realtimelinedy:0,realtimestackedarea:0,realtimestackedcolumn:0,sparkcolumn:0,sparkline:0,sparkwinloss:0,thermometer:0,vbullet:0,gantt:0,vled:0});a.maps=d.extend(a.maps||{},{});d.extend(D,{render:function(a,b){var c=this.chartType(),h=this.options.chartTypeSourcePath+c,n=this.jsVars,p=this.__state,H=m.chartAPI,q=this.options,J=this.args,w=this.options.showChartLoadingMessage,
P,s;P=l(h).concat(n.userModules);n.isResizing&&(n.isResizing=clearTimeout(n.isResizing));n.hcObj&&n.hcObj.destroy&&n.hcObj.destroy();if(H[c]){if(H[p.lastRenderedType]&&p.lastRenderedType!==c)for(s in d.raiseEvent("chartTypeChanged",{previousType:p.lastRenderedType,newType:c},this),H[p.lastRenderedType].eiMethods)delete this[s];p.lastRenderedType=c;p.lastRenderedSrc=this.src;!n.waitingModuleError&&m.raiseEvent("internal.loaded",{type:c,triggeredModuleLoad:n.drLoadAttempted||n.waitingModule},this,[this.id]);
delete n.waitingModule;delete n.waitingModuleError;delete n.drLoadAttempted;d.hcLib.createChart(this,a,c,b)}else{if(c&&v(P)){if(n.drLoadAttempted){d.raiseError(this,11112822001,"run","HC-interface~renderer.render","Chart runtimes not loaded even when resource is present");N(this,a,b);return}G(h)&&(P=l(h).concat(n.userModules));n.drLoadAttempted=!0}else{if(!P.length){N(this,a,b);return}if(n.waitingModuleError){N(this,a,b);delete n.waitingModule;delete n.waitingModuleError;return}}(c=K[P[P.length-1]])?
(c.push({cmd:"render",obj:this,args:arguments}),n.waitingModule||(n=w?q.PBarLoadingText||q.loadMessage:"",this._chartMessageStyle={color:J.loadMessageColor||q.baseChartMessageColor,fontFamily:J.loadMessageFont||q.baseChartMessageFont,fontSize:J.loadMessageFontSize||q.baseChartMessageFontSize},d.hcLib.createChart(this,a,"stub",void 0,n),D.load.call(this,a,b))):(d.raiseError(this,12080515551,"run","HC-interface~renderer.render","Unregistered module in dependentModule definition."),this._chartMessageStyle=
{color:J.renderErrorMessageColor||q.baseChartMessageColor,fontFamily:J.renderErrorMessageFont||q.baseChartMessageFont,fontSize:J.renderErrorMessageFontSize||q.baseChartMessageFontSize},d.hcLib.createChart(this,a,"stub",void 0,q.renderErrorMessage))}},update:function(a){var b=this.ref,c=this.jsVars;c.hcObj&&c.hcObj.destroy&&c.hcObj.destroy();c.isResizing&&(c.isResizing=clearTimeout(c.isResizing));void 0===a.error?(delete c.stallLoad,delete c.loadError,this.isActive()?this.src!==this.__state.lastRenderedSrc?
this.render():d.hcLib.createChart(this,c.container):this.__state.rendering&&!c.waitingModule&&d.hcLib.createChart(this,c.container)):(this.isActive()&&"function"===typeof b.showChartMessage&&b.showChartMessage("InvalidXMLText"),delete c.loadError)},resize:function(a){var b=this.ref,c,h=this.jsVars;b&&b.resize&&(h.isResizing&&(h.isResizing=clearTimeout(h.isResizing)),h.isResizing=setTimeout(function(){c=d.normalizeCSSDimension(a.width,a.height,b);void 0!==a.width&&(b.style.width=c.width);void 0!==
a.height&&(b.style.height=c.height);b.resize();delete h.isResizing},0))},dispose:function(){var a,b=this.jsVars;b.isResizing&&(b.isResizing=clearTimeout(b.isResizing));b.instanceAPI&&b.instanceAPI.dispose&&(b.instanceAPI.dispose(),delete b.instanceAPI);if(a=this.ref)d.purgeDOM(a),a.parentNode&&a.parentNode.removeChild(a);b.container=null;m.cleanupWaitingCommands(this)},load:function(a,c){var e=this.jsVars,h=this.chartType(),n=d.hcLib.chartAPI[h],h=l(h).concat(e.userModules),v=h[h.length-1];n||!h||
h&&0===h.length?(delete e.waitingModule,a&&N(this,a||this.ref,c)):e.waitingModule||(e.waitingModule=!0,delete e.waitingModuleError,p(h,function(){delete e.waitingModule;b(m.moduleCmdQueue[v])},P,this))}})}]);
FusionCharts.register("module",["private","modules.api.dynamicchartattributes",function(){var d=this;d.extend(d.core,{setChartAttribute:function(m,D){var v,p,c,K;if("string"===typeof m)v=m,m={},m[v]=D;else if(null===m||"object"!==typeof m)return;K=0;if(c=(v=this.getChartData(d.dataFormats.JSON))&&(v.chart||v.graph||v.map)){for(p in m)K+=1,null===m[p]?delete c[p.toLowerCase()]:c[p.toLowerCase()]=m[p];0<K&&("undefined"===typeof c.animation&&(c.animation="0"),this.setChartData(v,d.dataFormats.JSON))}else d.raiseError(this,
"2105141421","run","#setChartAttribute()","Could not retrieve attribute list. Is data ready?")},getChartAttribute:function(m){var D=this.getChartData(d.dataFormats.JSON),D=D&&(D.chart||D.graph||D.map),v,p;if(0===arguments.length||void 0===m||void 0===D)return D;if("string"===typeof m)v=D[m.toString().toLowerCase()];else if(m instanceof Array)for(v={},p=0;p<m.length;p+=1)v[m[p]]=D[m[p].toString().toLowerCase()];else d.raiseError(this,"25081429","param","~getChartAttribute()",'Unexpected value of "attribute"');
return v}},!0)}]);
FusionCharts.register("module",["private","api.linkmanager",function(){var d=this,m=d.FusionChartsDOMInsertModes,D={},v=function(c,m){this.items={};this.root=c;this.parent=m;m instanceof d.core?this.level=this.parent.link.level+1:(D[c.id]=[{}],this.level=0)},p=function(c,d){return(c.options.containerElement===d.options.containerElement||c.options.containerElementId===d.options.containerElementId)&&c.options.insertMode===m.REPLACE};d.policies.link=["link",void 0];v.prototype.configuration=function(){return D[this.root.id][this.level]||
(D[this.root.id][this.level]={})};d.extend(d.core,{configureLink:function(c,m){var b;if(c instanceof Array){for(b=0;b<c.length;b+=1)"object"!==typeof D[this.link.root.id][b]&&(D[this.link.root.id][b]={}),d.extend(D[this.link.root.id][b],c[b]);D[this.link.root.id].splice(c.length)}else"object"===typeof c?("number"!==typeof m&&(m=this.link.level),void 0===D[this.link.root.id][m]&&(D[this.link.root.id][m]={}),d.extend(D[this.link.root.id][m],c)):d.raiseError(this,"25081731","param","~configureLink()",
"Unable to update link configuration from set parameters")}},!0);d.addEventListener("beforeInitialize",function(c){c.sender.link instanceof v?c.sender.link.parent instanceof d.core&&(c.sender.link.parent.link.items[c.sender.id]=c.sender):c.sender.link=new v(c.sender)});d.addEventListener("linkedChartInvoked",function(c,m){var b=c.sender,D=b.clone({dataSource:m.data,dataFormat:m.linkType,link:new v(b.link.root,b)},!0),a=m.alias,l;a&&(!D.typeSource&&D.swfUrl&&(D.typeSource=D.swfUrl.replace(/(.*?)?[^\/]*\.swf.*?/ig,
"$1")),D.type=a);b.args&&0!==parseInt(b.args.animate,10)&&delete D.animate;d.extend(D,b.link.configuration());d.raiseEvent("beforeLinkedItemOpen",{level:b.link.level},b.link.root,void 0,function(){d.core.items[D.id]instanceof d.core&&d.core.items[D.id].dispose();l=new d.core(D);p(l,b)||b.options.overlayButton&&b.options.overlayButton.message||("object"!==typeof b.options.overlayButton&&(b.options.overlayButton={}),b.options.overlayButton.message="Close");l.render();d.raiseEvent("linkedItemOpened",
{level:b.link.level,item:l},b.link.root)})});d.addEventListener("overlayButtonClick",function(c,m){if("LinkManager"===m.id){var b=c.sender,v=b.link.level-1,a=b.link.parent,l=b.link.root;d.raiseEvent("beforeLinkedItemClose",{level:v,item:b},l,b,function(){setTimeout(function(){d.core.items[b.id]&&b.dispose();d.raiseEvent("linkedItemClosed",{level:v},l)},0);a.disposed||a.isActive()||!p(b,a)||a.render()})}});d.addEventListener("Loaded",function(c){c=c.sender;var m;c&&void 0!==c.link&&c.link.root!==c&&
c.link.parent instanceof d.core&&(c.ref&&"function"===typeof c.ref.drawOverlayButton?(m=d.extend({show:!0,id:"LinkManager"},c.link.parent.options.overlayButton),d.extend(m,c.link.parent.link.configuration().overlayButton||{}),c.ref.drawOverlayButton(m)):d.raiseWarning(c,"04091602","run","::LinkManager^Loaded","Unable to draw overlay button on object. -"+c.id))});d.addEventListener("beforeDispose",function(c){var m=c.sender;m&&m.link instanceof v&&(m&&m.link&&m.link.parent instanceof d.core&&m.link.parent.link&&
m.link.parent.link.items&&delete m.link.parent.link.items[c.sender.id],delete D[m.id])})}]);
FusionCharts.register("module",["private","modules.renderer.js-thememanager",function(){var d=this,m,D,v,p=/\s+!important$/,c=/\\!important$/,K=function(a,b){for(var c=b.length,d=-1;c--;)if(a===b[c]){d=c;break}return d},b=function(a,c,d,l,m){var p,q,v,w;m?(l.push(a),m.push(c)):(l=[a],m=[c]);if(c instanceof Array)for(p=0;p<c.length;p+=1){try{q=a[p],v=c[p]}catch(z){continue}if("object"!==typeof v)d&&void 0===v||(a[p]=v);else{if(null===q||"object"!==typeof q)q=a[p]=v instanceof Array?[]:{};w=K(v,m);
-1!==w?q=a[p]=l[w]:b(q,v,d,l,m)}}else for(p in c){try{q=a[p],v=c[p]}catch(s){continue}if(null!==v&&"object"===typeof v)if(w=Object.prototype.toString.call(v),"[object Object]"===w){if(null===q||"object"!==typeof q)q=a[p]={};w=K(v,m);-1!==w?q=a[p]=l[w]:b(q,v,d,l,m)}else"[object Array]"===w?(null!==q&&q instanceof Array||(q=a[p]=[]),w=K(v,m),-1!==w?q=a[p]=l[w]:b(q,v,d,l,m)):a[p]=v;else a[p]=v}return a},G=function(a,c,d){if("object"!==typeof a&&"object"!==typeof c)return null;if("object"!==typeof c||
null===c)return a;"object"!==typeof a&&(a=c instanceof Array?[]:{});b(a,c,d);return a},a=function(a){var b={important:!1,str:""};if(!a)return b;a=a.toString();p.test(a)?(a=a.replace(p,""),b.important=!0):(a=a.replace(c,"!imporant"),b.important=!1);b.str=a;return b},l=function(a,b){var c,d,m,p,q,v,w=0,z=0;for(c in a)if(d=a[c],d instanceof Array)for(v=d.length,q=0;q<v;q+=1){if(p=d[q],"object"===typeof p)if("category"===c)if("true"===p.vline){if(m=b.component("vline",w,p))P(p,m),w+=1}else{if(m=b.component("category",
z,p,v))P(p,m),z+=1}else if(m=b.component(c,q,p,v))P(p,m),l(p,m)}else"object"===typeof d&&(m=b.component(c,null,d))&&(P(d,m),l(d,m))},P=function(b,c){var d=c.getAll(),l,m;for(l in d)m=d[l].toString(),m=a(m),m.important?b[l.toLowerCase()]=m.str:void 0===b[l.toLowerCase()]&&(b[l.toLowerCase()]=m.str)},N=function(a,b){"geo"===b.defaultSeriesType&&z.call(this,a,b)},z=function(a,b){var c=a.sender,l=c.getChartData(d.dataFormats.JSON,!0),m;l.error||((m=l.data.chart.theme)?v.themify(m,c,c.chartType(),l.data,
"geo"===b.defaultSeriesType&&"geo"):c.jsVars.themeObject&&c.jsVars.themeObject.dispose())};m=function(){this.themeStore={}};m.prototype={constructor:m,add:function(a){for(var b=0,c=a.length,d;b<c;b+=1)(d=a[b].name)&&(this.themeStore[d]=a[b])},themify:function(a,b,c,l,m){var p=b.jsVars,q=a.split(","),v=[],w=q.length,G,s;if(w){for(s=0;s<w;s+=1){G=this.themeStore;var K;K=q[s];K=K.replace(/^\s\s*/,"");for(var P=/\s/,ba=K.length;P.test(K.charAt(ba-=1)););K=K.slice(0,ba+1);(G=G[K])&&v.push(this.evaluateThemeJSON(G.theme,
b,c,m))}v.length?(p.themeObject=new D(v,b,!1,l),this.applyTheme(b),b.addEventListener("chartTypeChanged",z),b.addEventListener("internal.drawstart",N)):d.raiseWarning(b,"14051100501","run","api.themes~themify()",'The theme "'+a+'" requested has not been registered.')}},evaluateThemeJSON:function(a,b,c,d){var l={},m=b.jsVars,p=function(a){var b,c;for(b in a)c=a[b],l[b]=c instanceof Array?G(l[b]||[],c):"object"===typeof c?G(l[b]||{},c):c};c=c||b.chartType();m.themeObject&&a!==m.themeObject&&(m.themeObject.dispose(),
delete m.themeObject);p(a.base);d&&a[d]&&p(a[d]);c&&a[c]&&p(a[c]);return l},applyTheme:function(a){a=a.jsVars.themeObject;var b=a.getThemedJSONData().data;b&&l(b,a)}};D=function(a,b,c,d){this.themeArray=a;this.themeComponents={};this.base={};this.chartInstance=b;this.isChildInstance=Boolean(c);this.themedData=c?null:G({},d);this.length=a.length;b=0;for(c=a.length;b<c;b+=1)this.parse(a[b])};D.prototype={constructor:D,pushTheme:function(a){a&&(this.themeArray.push(a),this.parse(a),this.length+=1)},
popTheme:function(){},parse:function(b){var c=this.themeComponents,d=this.chartInstance,l=this.base,m,p,q;for(p in b)if("string"===typeof b[p]||"number"===typeof b[p])if(l[p]){if(m=a(b[p]),q=a(l[p]),m.important||!q.important)l[p]=b[p]}else l[p]=b[p];else c[p]||(c[p]=[]),m=c[p],b[p]instanceof Array?m.push(G([],b[p])):"object"===typeof b[p]?m.push(new D([b[p]],d,!0)):"function"===typeof b[p]&&m.push(b[p])},merge:function(b){var c=this.base,d=b.base,l=this.themeComponents,m=b.themeComponents,p,q,v;for(v in d)if(p=
a(c[v]),q=a(d[v]),!p.important||q.important)c[v]=d[v];for(v in m)l[v]=l[v]?l[v].concat(m[v]):[].concat(m[v]);this.length+=b.length},get:function(a){return this.base[a]},getAll:function(){return G({},this.base)},component:function(a,b,c,d){var l=this.themeComponents,m=this.chartInstance,p=new D([],m,!0),v,w,z;w=l[a];if(!w)return null;a=0;for(l=w.length;a<l;a+=1)z=w[a],"function"===typeof z?(b=b||0,p.pushTheme(z.call(m,b,c,d))):z instanceof Array?(b=b||0,v=z.length,b%=v,v=z[b],v instanceof D?p.merge(v):
"function"===typeof v?p.pushTheme(v.call(m,b,c,d)):p.pushTheme(v)):z instanceof D?p.merge(z):p.pushTheme(z);return p},getThemedJSONData:function(){return{data:this.themedData}},dispose:function(){var a=this.themeComponents,b=this.chartInstance,c,d;for(c in a)if(d=a[c].length){for(;d--;)a[c][d].dispose&&a[c][d].dispose();delete a[c]}this.isChildInstance||(b.removeEventListener("chartTypeChanged",z),b.removeEventListener("internal.drawstart",N));this.dataWithoutTheme=this.isChildInstance=this.themeArray=
this.base=this.chartInstance=this.themeComponents=null}};v=new m;d.registrars.theme=d.registerTheme=function(a){a&&("[object Array]"!==Object.prototype.toString.call(a)&&(a=[a]),v.add(a))};d.addEventListener("beforeDataUpdate",function(a,b){var c=a.sender,l=d.core.transcodeData(b.data,b.format,d.dataFormats.JSON),m=l.chart&&l.chart.theme;m?v.themify(m,c,c.args.type,l):c.jsVars.themeObject&&(c.jsVars.themeObject.dispose(),delete c.jsVars.themeObject)})}]);
FusionCharts.register("theme",{name:"default",theme:{base:{chart:{labelDisplay:"stagger !important",caption:"Theme Caption \\!important",canvasBgColor:"#56EF22",borderThickness:"5 !important",borderColor:"#E60539",baseFontColor:"#781129"},categories:[{fontColor:"#0F4F40",fontSize:15,category:function(d){return{showLabel:d%2?0:1}},vline:{color:"#000000",thickness:2}}],dataset:[{color:"#8C3146",data:function(d,m){8==d&&(m.value="");return{color:32E3>Number(m.value)?"#8C3146":"#FF0000",alpha:"100"}}}],
trendlines:[{line:function(d){return d?{color:"#ff0000",thickness:3}:{color:"#ffff00",thickness:3}}}]},pie2d:{chart:{bgColor:"#FF0000"}},msline:{chart:{canvasBgColor:"#ff0000"}},geo:{chart:{canvasBgColor:"#0000ff"}},world:{chart:{canvasBgColor:"#00ff00"}}}});
/*
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.6.0
*/
FusionCharts.register("module",["private","modules.renderer.js-charts",function(){function Aa(a){var p={left:a.offsetLeft,top:a.offsetTop};for(a=a.offsetParent;a;)p.left+=a.offsetLeft,p.top+=a.offsetTop,a!==Ia.body&&a!==Ia.documentElement&&(p.left-=a.scrollLeft,p.top-=a.scrollTop),a=a.offsetParent;return p}function na(a,p){for(var c=[],d=0,q=a.length;d<q;d++)c[d]=p.call(a[d],a[d],d,a);return c}function fa(a,p){var c=p?360:U;a=(a||0)%c;return 0>a?c+a:a}function La(a,p){return a<=y?a:p<=y?p:p>a?0:p}
function Oa(a,p,c,d,q){return $((p-c[1]-d.top)/q,a-c[0]-d.left)}function Ma(a,p,c,d,q,b,t,ea,e,r){"object"===typeof a&&(p=a.y,c=a.r,d=a.innerR,q=a.radiusYFactor,b=a.depth,t=a.seriesGroup,ea=a.renderer,a=a.x);if(0>q||1<=q)q=.6;a=a||0;p=p||0;c=c||1;d=d||0;b=b||0;this.renderer=ea;this.hasOnePoint=e;this.use3DLighting=r;this.cx=a;this.cy=p;this.rx=c;this.ry=c*q;this.radiusYFactor=q;this.isDoughnut=0<d;this.innerRx=d;this.innerRy=d*q;this.depth=b;this.leftX=a-c;this.rightX=a+c;this.leftInnerX=a-d;this.rightInnerX=
a+d;this.depthY=p+b;this.topY=p-this.ry;this.bottomY=this.depthY+this.ry;this.bottomBorderGroup=ea.group("bottom-border",t).attr({transform:"t0,"+b});this.outerBackGroup=ea.group("outer-back-Side",t);this.slicingWallsBackGroup=ea.group("slicingWalls-back-Side",t);this.innerBackGroup=ea.group("inner-back-Side",t);this.innerFrontGroup=ea.group("inner-front-Side",t);this.slicingWallsFrontGroup=ea.group("slicingWalls-front-Side",t);this.topGroup=ea.group("top-Side",t);this.moveCmdArr=["M"];this.lineCmdArr=
["L"];this.closeCmdArr=["Z"];this.centerPoint=[a,p];this.leftPoint=[this.leftX,p];this.topPoint=[a,this.topY];this.rightPoint=[this.rightX,p];this.bottomPoint=[a,p+this.ry];this.leftDepthPoint=[this.leftX,this.depthY];this.rightDepthPoint=[this.rightX,this.depthY];this.leftInnerPoint=[this.leftInnerX,p];this.rightInnerPoint=[this.rightInnerX,p];this.leftInnerDepthPoint=[this.leftInnerX,this.depthY];this.rightInnerDepthPoint=[this.rightInnerX,this.depthY];this.pointElemStore=[];this.slicingWallsArr=
[];a=["A",this.rx,this.ry,0,0,1,this.rightX,p];c=["A",this.rx,this.ry,0,0,1,this.leftX,p];d=["A",this.rx,this.ry,0,0,0,this.rightX,this.depthY];q=["A",this.rx,this.ry,0,0,0,this.leftX,this.depthY];b=["A",this.innerRx,this.innerRy,0,0,0,this.rightInnerX,p];p=["A",this.innerRx,this.innerRy,0,0,0,this.leftInnerX,p];t=["A",this.innerRx,this.innerRy,0,0,1,this.rightInnerX,this.depthY];ea=["A",this.innerRx,this.innerRy,0,0,1,this.leftInnerX,this.depthY];this.isDoughnut?(this.topBorderPath=this.moveCmdArr.concat(this.leftPoint,
a,c,this.moveCmdArr,this.leftInnerPoint,b,p),this.topPath=this.moveCmdArr.concat(this.leftPoint,a,c,this.lineCmdArr,this.leftInnerPoint,b,p,this.closeCmdArr),this.innerFrontPath=this.moveCmdArr.concat(this.leftInnerPoint,b,this.lineCmdArr,this.rightInnerDepthPoint,ea,this.closeCmdArr),this.innerBackPath=this.moveCmdArr.concat(this.rightInnerPoint,p,this.lineCmdArr,this.leftInnerDepthPoint,t,this.closeCmdArr)):this.topBorderPath=this.topPath=this.moveCmdArr.concat(this.leftPoint,a,c,this.closeCmdArr);
this.outerBackPath=this.moveCmdArr.concat(this.leftPoint,a,this.lineCmdArr,this.rightDepthPoint,q,this.closeCmdArr);this.outerFrontPath=this.moveCmdArr.concat(this.rightPoint,c,this.lineCmdArr,this.leftDepthPoint,d,this.closeCmdArr);this.clipPathforOuter=["M",this.leftX,this.topY,"L",this.rightX,this.topY,this.rightX,this.bottomY,this.leftX,this.bottomY,"Z"];this.clipPathforInner=["M",this.leftInnerX,this.topY,"L",this.rightInnerX,this.topY,this.rightInnerX,this.bottomY,this.leftInnerX,this.bottomY,
"Z"];this.clipPathforNoClip=["M",this.leftInnerX,this.topY,"L",this.leftInnerX,this.bottomY,"Z"];this.colorObjs=[]}var qa=this,z=qa.hcLib,la=z.Raphael,s=qa.window,Ia=s.document,L=z.BLANKSTRING,Va=z.createTrendLine,g=z.pluck,wa=z.getValidValue,Fa=z.parseTooltext,k=z.pluckNumber,Ga=z.getFirstValue,Wa=z.getDefinedColor,ka=z.parseUnsafeString,ta=z.FC_CONFIG_STRING,ua=z.extend2,Da=z.getDashStyle,C=z.toRaphaelColor,Pa=z.toPrecision,Ta=z.stubFN,da=z.hasSVG,xa=z.each,ya=z.TOUCH_THRESHOLD_PIXELS,Qa=z.CLICK_THRESHOLD_PIXELS,
sa=z.plotEventHandler,b=z.hasTouch?ya:Qa,e="rgba(192,192,192,"+(z.isIE?.002:1E-6)+")",h=8===s.document.documentMode?"visible":"",f=Math,V=f.sin,O=f.cos,$=f.atan2,v=f.round,Z=f.min,m=f.max,X=f.abs,w=f.PI,G=f.ceil,u=f.floor,oa=f.sqrt,pa=w/180,W=180/w,y=Math.PI,Xa=y/2,U=2*y,Ea=y+Xa,ma=z.graphics.getColumnColor,ca=z.getFirstColor,aa=z.setLineHeight,Ja=z.pluckFontSize,Na=z.getFirstAlpha,ia=z.graphics.getDarkColor,ha=z.graphics.getLightColor,ja=z.graphics.convertColor,Ra=z.COLOR_TRANSPARENT,Ua=z.POSITION_CENTER,
$a=z.POSITION_TOP,Ya=z.POSITION_BOTTOM,ab=z.POSITION_RIGHT,bb=z.POSITION_LEFT,cb=z.parsexAxisStyles,Za=z.hashify,n=z.chartAPI,db=z.graphics.mapSymbolName,ya=n.singleseries,ba=z.COMMASTRING,Ca=z.ZEROSTRING,Ka=z.ONESTRING,Ha=z.HUNDREDSTRING,Sa=z.PXSTRING,eb=z.COMMASPACE,Ba=!/fusioncharts\.com$/i.test(s.location.hostname);n("column2d",{standaloneInit:!0,friendlyName:"Column Chart",creditLabel:Ba,rendererId:"cartesian"},n.column2dbase);n("column3d",{friendlyName:"3D Column Chart",defaultSeriesType:"column3d",
defaultPlotShadow:1,is3D:!0,fireGroupEvent:!0,defaultZeroPlaneHighlighted:!1},n.column2d);n("bar2d",{friendlyName:"Bar Chart",isBar:!0,defaultSeriesType:"bar",spaceManager:n.barbase},n.column2d);n("bar3d",{friendlyName:"3D Bar Chart",defaultSeriesType:"bar3d",defaultPlotShadow:1,fireGroupEvent:!0,is3D:!0,defaultZeroPlaneHighlighted:!1},n.bar2d);n("line",{friendlyName:"Line Chart",standaloneInit:!0,creditLabel:Ba,rendererId:"cartesian"},n.linebase);n("area2d",{friendlyName:"Area Chart",standaloneInit:!0,
creditLabel:Ba,rendererId:"cartesian"},n.area2dbase);n("pie2d",{friendlyName:"Pie Chart",standaloneInit:!0,defaultSeriesType:"pie",defaultPlotShadow:1,reverseLegend:1,alignCaptionWithCanvas:0,sliceOnLegendClick:!0,rendererId:"pie",point:function(a,p,c,d,q){a=q[ta];var b=this.colorManager,t=a.is3d,ea=k(d.plotborderthickness),e=k(ea,t?.1:1),r=k(d.enablemultislicing,1),T=k(d.use3dlighting,1),l=T?k(d.radius3d,d["3dradius"],90):100,va=k(d.showzeropies,1),h=k(d.showpercentintooltip,1),f=k(d.showlabels,
1),x=k(d.showvalues,1),n=k(d.showpercentvalues,d.showpercentagevalues,0),A=g(d.tooltipsepchar,d.hovercapsepchar,eb),fb=g(d.labelsepchar,A),P=g(d.plotbordercolor,d.piebordercolor),B=q[ta].numberFormatter,O=c.length,V=k(d.plotborderdashed,0),N=k(d.plotborderdashlen,5),D=k(d.plotborderdashgap,4),H=k(d.showvalueinlegend,0),J=k(d.showlabelinlegend,1),v=k(d.valuebeforelabelinlegend,0),ga=k(d.showvalueaspercentinlegend,1),I=k(d.reverseplotorder,0),Q=g(d.legendsepchar,", "),S=q.plotOptions.series.dataLabels.style,
R=0,m=[],u,M,Y,E,F,K,y,G,w,Z,U,z,s,$,C,W,X,pa,oa,aa=-1;X=p.centerLabelConfig={label:ka(g(d.defaultcenterlabel,"")),font:g(d.centerlabelfont,S.fontFamily),fontSize:k(d.centerlabelfontsize,parseInt(S.fontSize,10)),color:ca(g(d.centerlabelcolor,d.valuefontcolor,a.inCanvasStyle.color,"555555")),alpha:k(d.centerlabelalpha,100),bold:k(d.centerlabelbold,S.fontWeight),italic:k(d.centerlabelitalic,S.style),bgColor:g(d.centerlabelbgcolor,""),bgAlpha:k(d.centerlabelbgalpha,100),borderColor:g(d.centerlabelbordercolor,
S.borderColor),borderAlpha:k(d.centerlabelborderalpha,100),borderThickness:k(d.centerlabelborderthickness,S.borderThickness),borderRadius:k(d.centerlabelborderradius,S.borderRadius),textPadding:k(d.centerlabeltextpadding,S.borderPadding),padding:k(d.centerlabelpadding,2),bgOval:k(d.centerlabelbgoval,0),shadow:k(d.showcenterlabelshadow,0),hoverColor:d.centerlabelhovercolor&&ca(g(d.centerlabelhovercolor)),hoverAlpha:k(d.centerlabelhoveralpha),toolText:ka(g(d.centerlabeltooltext,""))};100<l&&(l=100);
0>l&&(l=0);k(d.showlegend,0)&&(q.legend.enabled=!0,q.legend.reversed=!Boolean(k(d.reverselegend,0)),p.showInLegend=!0);for(M=0;M<O;M+=1)E=c[M],Y=B.getCleanValue(E.value,!0),null===Y||!va&&0===Y||(m.push(E),R+=Y);0===R&&(m=[]);p.enableRotation=1<m.length?k(d.enablerotation,1):0;p.alphaAnimation=k(d.alphaanimation,1);p.is3D=t;p.placeLabelsInside=d.placevaluesinside;p.use3DLighting=T;p.pieYScale=k(d.pieyscale,40);1>p.pieYScale&&(p.pieYScale=1);100<=p.pieYScale&&(p.pieYScale=80);p.pieYScale/=100;p.pieSliceDepth=
k(d.pieslicedepth,15);1>p.pieSliceDepth&&(p.pieSliceDepth=1);p.managedPieSliceDepth=p.pieSliceDepth;p.enableMultiSlicing=!!r;t&&d.showplotborder!=Ka&&!ea&&(p.showBorderEffect=1);for(M=m.length-1;0<=M;M-=1){E=m[M];Y=B.getCleanValue(E.value,!0);u=ka(g(E.label,E.name,L));O=g(E.color,b.getPlotColor(M));K=g(E.alpha,d.plotfillalpha);y=g(E.bordercolor,P);G=g(E.borderalpha,d.plotborderalpha,d.pieborderalpha);t&&(y||void 0!==G)&&(p.showBorderEffect=0);y=g(y,ha(O,t?90:25)).split(ba)[0];G=d.showplotborder==
Ca?Ca:g(G,K,"80");K=g(K,Ha);va={opacity:Math.max(K,G)/100};if(c=Boolean(k(E.issliced,d.issliced,0)))r||(-1!==aa&&(p.data[m.length-aa-1].sliced=!1),aa=M),a.preSliced=c;ea=(C=k(E.dashed,V))?Da(g(E.dashlen,N),g(E.dashgap,D),e):void 0;F=wa(ka(g(E.tooltext,a.tooltext)));U=B.percentValue(Y/R*100);z=B.dataLabels(Y)||L;Z=1===k(E.showlabel,f)?u:L;w=1===(s=k(E.showvalue,x))?1===n?U:z:L;$=wa(ka(E.displayvalue));w=void 0!==$&&s?$:w!==L&&Z!==L?Z+fb+w:g(Z,w);void 0!==F?F=Fa(F,[1,2,3,5,6,7,14,24,25],{formattedValue:z,
label:u,yaxisName:ka(d.yaxisname),xaxisName:ka(d.xaxisname),percentValue:U,sum:B.dataLabels(R),unformattedSum:R},E,d):(F=u,s=h?U:z,F=F!=L?F+A+s:s);s=J?u:L;H&&(W=ga?B.legendPercentValue(Y/R*100):B.legendValue(Y),s=v?W+(s&&Q+s):(s&&s+Q)+W);C=this.pointHoverOptions(E,p,{plotType:"pie",use3DLighting:T,color:O,alpha:K,borderWidth:e,borderColor:y,borderAlpha:G,borderDashed:C,borderDashGap:g(E.dashgap,D),borderDashLen:k(E.dashlen,N),radius3D:l,shadow:va});u={label:g((pa=E.centerlabel||d.centerlabel)&&this.replaceMacros(pa,
["\\$value","\\$percentValue","\\$displayValue","\\$label"],[z,U,void 0===$?"":$,u]),""),font:X.font,fontSize:k(E.centerlabelfontsize,X.fontSize),color:ca(g(E.centerlabelcolor,X.color)),alpha:k(E.centerlabelalpha,X.alpha),bold:k(E.centerlabelbold,X.bold),italic:k(E.centerlabelitalic,X.italic),bgColor:g(E.centerlabelbgcolor,X.bgColor),bgAlpha:k(E.centerlabelbgalpha,X.bgAlpha),borderColor:g(E.centerlabelbordercolor,X.borderColor),borderAlpha:k(E.centerlabelborderalpha,X.borderAlpha),borderThickness:X.borderThickness,
borderRadius:X.borderRadius,textPadding:X.textPadding,padding:X.padding,bgOval:X.bgOval,shadow:X.shadow,hoverColor:(oa=g(E.centerlabelhovercolor,X.hoverColor))&&ca(oa),hoverAlpha:k(E.centerlabelhoveralpha,X.hoverAlpha),toolText:g(E.centerlabeltooltext,"")};p.data.push({displayValue:w,style:cb(E,{},d,S,O),categoryLabel:Z,showInLegend:s!==L,y:Y,name:s,shadow:va,toolText:F,color:this.getPointColor(O,K,l),_3dAlpha:K,borderColor:ja(y,G),borderWidth:e,link:wa(E.link),sliced:c,dashStyle:ea,doNotSlice:g(d.enableslicing,
Ka)!=Ka,hoverEffects:C.enabled&&C.options,rolloverProperties:C.enabled&&C.rolloverOptions,centerLabelConfig:u})}I&&(p.reversePlotOrder=!0,p.data&&p.data.reverse());p.valueTotal=R;q.legend.enabled=d.showlegend===Ka?!0:!1;p.startAngle=k(d.startingangle,0);q.chart.startingAngle=g(1<m.length?d.startingangle:0,0);return p},replaceMacros:function(a,p,c){for(var d=p.length||0,q;d--;)q=new RegExp(p[d],"gi"),a=a.replace(q,c[d]);return a},containsMacro:function(a,p){for(var c=p.length||0,d;c--;)if(d=new RegExp(p[c],
"gi"),d=a.match(d))return!0;return!1},getPointColor:function(a,p,c){var d,q;a=ca(a);p=Na(p);100>c&&da?(d=Math.floor(85*(100-.35*c))/100,d=ia(a,d),q=Math.floor(50*(100+c))/100,a=ha(a,q),p={FCcolor:{color:a+ba+d,alpha:p+ba+p,ratio:c+","+(100-c),radialGradient:!0,gradientUnits:"userSpaceOnUse"}}):p={FCcolor:{color:a+ba+a,alpha:p+ba+p,ratio:"0,100"}};return p},configureAxis:function(a,p){var c=0,d=a[ta],q=p.chart,b=a.xAxis.labels.style,t,ea;t=(t=Ga(q.valuebordercolor,L))?ja(t,k(q.valueborderalpha,q.valuealpha,
100)):L;b={fontFamily:g(q.valuefont,b.fontFamily),fontSize:g(q.valuefontsize,parseInt(b.fontSize,10))+Sa,lineHeight:b.lineHeight,color:ja(g(q.valuefontcolor,b.color),k(q.valuefontalpha,q.valuealpha,100)),fontWeight:k(q.valuefontbold)?"bold":"normal",fontStyle:k(q.valuefontitalic)?"italic":"normal",border:t||q.valuebgcolor?k(q.valueborderthickness,1)+"px solid":void 0,borderColor:t,borderThickness:k(q.valueborderthickness,1),borderPadding:k(q.valueborderpadding,2),borderRadius:k(q.valueborderradius,
0),backgroundColor:q.valuebgcolor?ja(q.valuebgcolor,k(q.valuebgalpha,q.valuealpha,100)):L,borderDash:k(q.valueborderdashed,0)?Da(k(q.valueborderdashlen,4),k(q.valueborderdashgap,2),k(q.valueborderthickness,1)):"none"};a.plotOptions.series.dataLabels.style=b;delete d.x;delete d[0];delete d[1];a.chart.plotBorderColor=a.chart.plotBackgroundColor=Ra;d=d.pieDATALabels=[];if(1===a.series.length&&(ea=a.series[0].data)&&0<(c=a.series[0].data.length)&&a.plotOptions.series.dataLabels.enabled)for(;c--;)ea[c]&&
void 0!==wa(ea[c].displayValue)&&d.push({text:ea[c].displayValue,style:ea[c].style})},spaceManager:function(a,p,c,d){var q=a[ta],b=q.is3d,t=this.name,ea=this.colorManager,e=this.smartLabel||q.smartLabel,r=k(q.pieDATALabels&&q.pieDATALabels.length,0),T=0,l=p.chart,va=k(l.managelabeloverflow,0),h=k(l.slicingdistance),f=q.preSliced||l.enableslicing!==Ca||l.showlegend===Ka&&l.interactivelegend!==Ca?X(k(h,20)):0,x=k(l.pieradius,0),n=k(l.enablesmartlabels,l.enablesmartlabel,1),A=n?k(l.skipoverlaplabels,
l.skipoverlaplabel,1):0,O=k(l.issmartlineslanted,1),P=r?k(l.labeldistance,l.nametbdistance,5):f,B=k(l.smartlabelclearance,5);c-=a.chart.marginRight+a.chart.marginLeft;var V=d-(a.chart.marginTop+a.chart.marginBottom);d=Z(V,c);var v=g(l.smartlinecolor,ea.getColor("plotFillColor")),N=k(l.smartlinealpha,100),D=k(l.smartlinethickness,.7),H=a.plotOptions.series.dataLabels,ea=H.style,J=r?k(parseInt(ea.lineHeight,10),12):0,ea=a.series[0]||{},u=ea.pieYScale,ga=ea.pieSliceDepth;d=0===x?.15*d:x;var I=0,I=2*
d,Q=k("doughnut2d"===t?0:l.placevaluesinside);H.connectorWidth=D;H.connectorPadding=k(l.connectorpadding,5);H.connectorColor=ja(v,N);r&&(n&&(P=B),P+=f);B=I+2*(J+P);V-=this.titleSpaceManager(a,p,c,m(B<V?V-B:V/2,parseFloat(a.title.style.lineHeight,10)));l.showlegend===Ka&&(g(l.legendposition,Ya).toLowerCase()!==ab?V-=this.placeLegendBlockBottom(a,p,c,V/2,!0):c-=this.placeLegendBlockRight(a,p,c/3,V,!0));if(1!==r)for(;r--;)e.setStyle(q.pieDATALabels[r].style),p=e.getOriSize(q.pieDATALabels[r].text),T=
m(T,p.width);0===x&&(b?(V-=ga,I=Z(c/2-T-f,(V/2-J)/u)-P):I=Z(c/2-T-f,V/2-J)-P,I>=d?d=I:h||(f=P=m(Z(P-(d-I),f),10)));b&&(r=V-2*(d*u+J),ga>r&&(ea.managedPieSliceDepth=ga-r));a.plotOptions.pie3d.slicedOffset=a.plotOptions.pie.slicedOffset=f;a.plotOptions.pie3d.size=a.plotOptions.pie.size=2*d;a.plotOptions.series.dataLabels.distance=P;a.plotOptions.series.dataLabels.isSmartLineSlanted=O;a.plotOptions.series.dataLabels.enableSmartLabels=n;a.plotOptions.series.dataLabels.skipOverlapLabels=A;a.plotOptions.series.dataLabels.manageLabelOverflow=
va;a.plotOptions.series.dataLabels.placeLabelsInside=Q;if("doughnut2d"===t||"doughnut3d"===t)if(t=k(l.doughnutradius,0),r=(r=k(l.use3dlighting,1))?k(l.radius3d,l["3dradius"],50):100,100<r&&(r=100),0>r&&(r=0),l=0===t||t>=d?d/2:t,a.plotOptions.pie3d.innerSize=a.plotOptions.pie.innerSize=2*l,0<r&&da&&(l=parseInt(l/d*100,10),t=(100-l)/2,r=parseInt(t*r/100,10),l=l+ba+r+ba+2*(t-r)+ba+r,a.series[0]&&a.series[0].data))for(va=a.series[0].data,a=0,r=va.length;a<r;a+=1)t=va[a],t.color.FCcolor&&(t.color.FCcolor.ratio=
l,t.rolloverProperties.color&&(t.rolloverProperties.color.FCcolor.ratio=l))},creditLabel:Ba,eiMethods:{isPlotItemSliced:function(a){var p=this.jsVars.hcObj,c,d,q;return p&&p.datasets&&p.datasets[0]&&(c=p.datasets[0].data)&&(q=c.length)&&c[a=q-a-1]&&(d=c[a].plot)&&d.sliced},slicePlotItem:function(a,p){var c=this.jsVars.hcObj,d,q,b,t;return c&&c.datasets&&(d=c.datasets[0])&&(q=d.data)&&(t=q.length)&&q[a=d.reversePlotOrder?a:t-a-1]&&(b=q[a].plot)&&((!!p!==b.sliced||void 0===p)&&c.plotGraphicClick.call(b)||
b.sliced)},centerLabel:function(a,p){var c=this.jsVars.hcObj,d=c.options,q=d.series[0],d=d.plotOptions.pie.innerSize,b=c.canvasLeft+.5*c.canvasWidth,t=c.canvasTop+.5*c.canvasHeight,e=q.centerLabelConfig,k;if("object"!==typeof p)p=e;else for(k in e)void 0===p[k]&&(p[k]=e[k]);p.label=a;q.centerLabelConfig=p;d&&c.drawDoughnutCenterLabel(a||"",b,t,d,d,p,!0)},startingAngle:function(a,p){var c=this.jsVars.hcObj,d=c.datasets[0].plot,q="pie"===c.options.chart.defaultSeriesType,b,t=(b=c.datasets[0].startAngle)*
(q?-W:1)+(0>(q?-1:1)*b?360:0);if(!isNaN(a)){if(d.singletonCase||d.isRotating)return;a+=p?t:0;q?((q=c.options.series[0]).startAngle=-a*pa,c.rotate(d,q)):c.rotate(a);t=a}return v(100*((t%=360)+(0>t?360:0)))/100}}},ya);n.pie2d.eiMethods.togglePieSlice=n.pie2d.eiMethods.sliceDataItem=n.pie2d.eiMethods.slicePlotItem;n.pie2d.eiMethods.enableSlicingMovement=n.pie2d.eiMethods.enablelink=function(){qa.raiseWarning(this,"1301081430","run","JSRenderer~enablelink()","Method deprecated.")};n("pie3d",{friendlyName:"3D Pie Chart",
defaultSeriesType:"pie3d",rendererId:"pie3d",creditLabel:Ba,fireGroupEvent:!0,getPointColor:function(a){return a},defaultPlotShadow:0},n.pie2d);n("doughnut2d",{friendlyName:"Doughnut Chart",getPointColor:function(a,p,c){var d;a=ca(a);p=Na(p);100>c&&da?(d=ia(a,u(100*(85-.2*(100-c)))/100),a=ha(a,u(100*(100-.5*c))/100),p={FCcolor:{color:d+","+a+","+a+","+d,alpha:p+","+p+","+p+","+p,radialGradient:!0,gradientUnits:"userSpaceOnUse",r:c}}):p={FCcolor:{color:a+","+a,alpha:p+","+p,ratio:"0,100"}};return p}},
n.pie2d);n("doughnut3d",{friendlyName:"3D Doughnut Chart",defaultSeriesType:"pie3d",rendererId:"pie3d",fireGroupEvent:!0,getPointColor:n.pie3d,defaultPlotShadow:0},n.doughnut2d);n("pareto2d",{standaloneInit:!0,friendlyName:"Pareto Chart",point:function(a,p,c,d,q){a=c.length;var b=0,t=0,e={},h=this.colorManager,r=/3d$/.test(q.chart.defaultSeriesType),T=this.isBar,l=g(360-d.plotfillangle,90),va=g(d.showplotborder,r?Ca:Ka)===Ka?r?1:k(d.plotborderthickness,1):0,f=q.chart.useRoundEdges,n=g(d.tooltipsepchar,
", "),x=g(d.plotbordercolor,h.getColor("plotBorderColor")).split(ba)[0],V=d.showplotborder==Ca?Ca:g(d.plotborderalpha,d.plotfillalpha,Ha),A=q.xAxis,O=k(d.showcumulativeline,1),P=q[ta],B=P.axisGridManager,v=P.x,m=d.showtooltip!=Ca,N=[],D=k(d.use3dlighting,1),H=q[ta].numberFormatter,J=k(d.showlinevalues,d.showvalues),u=k(d.plotborderdashed,0),ga,I=k(d.plotborderdashlen,5),Q=k(d.plotborderdashgap,4),S=ka(d.xaxisname),R=ka(d.yaxisname),y=P.numberFormatter,G=p,M,Y,E,F,K,w,s,Z,X,U,z,$,C,W,pa,oa,aa,ia,ha,
ra,ja,fa,Ea,la,V=r?d.showplotborder?V:Ca:V,x=r?g(d.plotbordercolor,"#FFFFFF"):x;E=k(d.useplotgradientcolor,1)?Wa(d.plotgradientcolor,h.getColor("plotGradientColor")):L;for(pa=Y=0;Y<a;Y+=1)ra=c[Y],c[Y].vline?B.addVline(A,ra,pa,q):(M=H.getCleanValue(ra.value,!0),null!==M&&(t+=ra.value=M,N.push(ra),pa+=1));a=N.length;N.sort(function(a,c){return c.value-a.value});O&&0<t?(U=k(d.linedashed,0),ja=ca(g(d.linecolor,h.getColor("plotBorderColor"))),e=g(d.linealpha,100),z=k(d.linedashlen,5),F=k(d.linedashgap,
4),Y=k(d.linethickness,2),C={opacity:e/100},ha=g(d.valueposition,"auto"),W=k(d.drawanchors,d.showanchors),void 0===W&&(W=e!=Ca),aa=k(d.anchorborderthickness,1),ia=k(d.anchorsides,0),ga=k(d.anchorradius,3),oa=ca(g(d.anchorbordercolor,ja)),M=ca(g(d.anchorbgcolor,h.getColor("anchorBgColor"))),pa=Na(g(d.anchoralpha,Ha)),c=Na(g(d.anchorbgalpha,pa))*pa/100,U=U?Da(z,F,Y):void 0,F=Boolean(k(ra.anchorshadow,d.anchorshadow,0)),z=this.pointHoverOptions(ra,p,{plotType:"anchor",anchorBgColor:M,anchorAlpha:pa,
anchorBgAlpha:c,anchorAngle:g(d.anchorstartangle,90),anchorBorderThickness:aa,anchorBorderColor:oa,anchorBorderAlpha:pa,anchorSides:ia,anchorRadius:ga,shadow:$}),e={yAxis:1,data:[],type:"line",color:{FCcolor:{color:ja,alpha:e}},lineWidth:Y,marker:{enabled:W,shadow:F&&1<=ga?{opacity:pa/100}:!1,fillColor:{FCcolor:{color:M,alpha:c}},lineColor:{FCcolor:{color:oa,alpha:pa}},lineWidth:aa,radius:ga,symbol:db(ia),startAngle:g(d.anchorstartangle,90)}},G=[G,e],P[1]||(P[1]={}),P[1].stacking100Percent=!0):("1"!==
d.showsecondarylimits&&(d.showsecondarylimits="0"),"1"!==d.showdivlinesecondaryvalue&&(d.showdivlinesecondaryvalue="0"));P[1]||(P[1]={});P[1].stacking100Percent=!0;for(Y=0;Y<a;Y+=1)ra=N[Y],$=k(ra.showlabel,d.showlabels,1),c=ka($?Ga(ra.label,ra.name):L),s=g(ra.color,h.getPlotColor()),B.addXaxisCat(A,Y,Y,c,ra,{},d,s),b+=M=ra.value,F=k(ra.dashed,u),K=g(ra.dashgap,Q),w=g(ra.dashlen,I),Z=g(ra.alpha,d.plotfillalpha,Ha),X=g(ra.ratio,d.plotfillratio),$={opacity:Z/100},fa=g(ra.alpha,V)+L,ja=ma(s+ba+E.replace(/,+?$/,
""),Z,X,l,f,x+L,fa+L,T,r),ga=F?Da(w,K,va):"none",pa=b/t*100,aa=H.percentValue(pa),oa=null===M?M:y.dataLabels(M),ia=wa(ka(ra.displayvalue)),ia=k(ra.showvalue,P.showValues)?void 0!==ia?ia:oa:L,P.showTooltip?void 0!==(W=wa(ka(g(ra.tooltext,P.tooltext))))?(Ea={formattedValue:oa,label:c,yaxisName:R,xaxisName:S,cumulativeValue:b,cumulativeDataValue:y.dataLabels(b),cumulativePercentValue:aa,sum:y.dataLabels(t),unformattedSum:t},la=[1,2,3,5,6,7,20,21,22,23,24,25],W=Fa(W,la,Ea,ra,d)):W=null===oa?!1:c!==L?
c+P.tooltipSepChar+oa:oa:W=L,K=this.pointHoverOptions(ra,p,{plotType:"column",is3d:r,isBar:T,use3DLighting:D,isRoundEdged:f,color:s,gradientColor:E,alpha:Z,ratio:X,angle:l,borderWidth:va,borderColor:x,borderAlpha:fa,borderDashed:F,borderDashGap:K,borderDashLen:w,shadow:$}),F=g(ra.link),p.data.push({link:F,toolText:W,displayValue:ia,categoryLabel:c,y:M,shadow:$,color:ja[0],borderColor:ja[1],borderWidth:va,use3DLighting:D,dashStyle:ga,tooltipConstraint:this.tooltipConstraint,hoverEffects:K.enabled&&
K.options,rolloverProperties:K.enabled&&K.rolloverOptions}),this.pointValueWatcher(q,M),O&&(M=wa(ka(g(ra.cumulativeplottooltext,d.cumulativeplottooltext))),$=1==J?aa:0===J||ia===L?L:aa,W=m?void 0!==M?Fa(M,la||[1,2,3,5,6,7,20,21,22,23,24,25],Ea||{formattedValue:oa,label:c,yaxisName:R,xaxisName:S,cumulativeValue:b,cumulativeDataValue:y.dataLabels(b),cumulativePercentValue:aa,sum:y.dataLabels(t),unformattedSum:t},ra,d):(c!==L?c+n:L)+aa:L,e.data.push({shadow:C,color:e.color,marker:e.marker,y:pa,toolText:W,
displayValue:$,valuePosition:ha,categoryLabel:c,link:F,dashStyle:U,hoverEffects:z.enabled&&z.options,rolloverProperties:z.enabled&&z.rolloverOptions}));v.catCount=a;return G},defaultSeriesType:"column",isDual:!0,creditLabel:Ba,rendererId:"cartesian"},ya);n("pareto3d",{friendlyName:"3D Pareto Chart",defaultSeriesType:"column3d",fireGroupEvent:!0,defaultPlotShadow:1,is3D:!0},n.pareto2d);n("mscolumn2d",{standaloneInit:!0,friendlyName:"Multi-series Column Chart",creditLabel:Ba,rendererId:"cartesian"},
n.mscolumn2dbase);n("mscolumn3d",{defaultSeriesType:"column3d",friendlyName:"Multi-series 3D Column Chart",defaultPlotShadow:1,fireGroupEvent:!0,is3D:!0,defaultZeroPlaneHighlighted:!1},n.mscolumn2d);n("msbar2d",{friendlyName:"Multi-series Bar Chart",isBar:!0,defaultSeriesType:"bar",spaceManager:n.barbase},n.mscolumn2d);n("msbar3d",{defaultSeriesType:"bar3d",friendlyName:"Multi-series 3D Bar Chart",fireGroupEvent:!0,defaultPlotShadow:1,is3D:!0,defaultZeroPlaneHighlighted:!1},n.msbar2d);n("msline",
{standaloneInit:!0,friendlyName:"Multi-series Line Chart",creditLabel:Ba,rendererId:"cartesian"},n.mslinebase);n("msarea",{standaloneInit:!0,friendlyName:"Multi-series Area Chart",creditLabel:Ba,rendererId:"cartesian"},n.msareabase);n("stackedcolumn2d",{friendlyName:"Stacked Column Chart",isStacked:!0},n.mscolumn2d);n("stackedcolumn3d",{friendlyName:"3D Stacked Column Chart",isStacked:!0},n.mscolumn3d);n("stackedbar2d",{friendlyName:"Stacked Bar Chart",isStacked:!0},n.msbar2d);n("stackedbar3d",{friendlyName:"3D Stacked Bar Chart",
isStacked:!0},n.msbar3d);n("stackedarea2d",{friendlyName:"Stacked Area Chart",isStacked:!0,areaAlpha:100,showSum:0},n.msarea);n("marimekko",{friendlyName:"Marimekko Chart",isValueAbs:!0,distributedColumns:!0,isStacked:!0,xAxisMinMaxSetter:Ta,postSeriesAddition:function(a,p){var c=a[ta],d=0,b=a.xAxis,e=100/c.marimekkoTotal,t=[],ea=a.series,h=0,r=ua({},a.plotOptions.series.dataLabels.style),T=parseInt(r.fontSize,10),l=k(p.chart.plotborderthickness,1),va=a.chart.rotateValues,f=k(p.chart.rotatexaxispercentvalues,
0),n=-.5*l-(l%2+(f?1:0)+!a.chart.plotBorderWidth),x=f?T/2*1.2:0,V=va?270:0,A=c[0],O=A.stacking100Percent,P=!O,B=c.inCanvasStyle,g=this.numberFormatter,m=p.categories&&p.categories[0]&&p.categories[0].category||[],N=0,D=[],H,J,y,ga,I,Q,S,R,w,s,l=[];c.isXYPlot=!0;c.distributedColumns=!0;b.min=0;b.max=100;b.labels.enabled=!1;b.gridLineWidth=0;b.alternateGridColor=Ra;H=A.stack;p.chart.interactivelegend="0";A=0;for(J=a.xAxis.plotLines.length;A<J;A+=1)y=b.plotLines[A],y.isGrid&&(y.isCat=!0,t[y.value]=y,
y._hideLabel=!0);for(A=J=0;A<m.length;A+=1)m[A].vline||(N+=D[J]=g.getCleanValue(m[A].widthpercent||0),J+=1);y=H.floatedcolumn&&H.floatedcolumn[0]||[];if(100===N&&(y&&y.length)!==J)for(;J--;)y[J]||(y[J]={p:null});N=v(N);if(y)for(I=0,J=y.length;I<J;){s=y[I];d+=ga=s&&s.p||0;S=100===N?D[I]:ga*e;Q=h+S/2;R=h+S;l.push(R);for(A=0;A<ea.length;A+=1)if(a.series[A].visible=!0,m=a.series[A].data[I],m._FCX=h,m._FCW=S,w=g.percentValue(m.y/ga*100),m.toolText=Fa(m.toolText,[14,24,25,111,112],{xAxisPercentValue:g.percentValue(S),
percentValue:w,sum:g.dataLabels(ga),unformattedSum:ga}),O){if(m.y||0===m.y)H=m.y/ga*100,m.y=H,m.showPercentValues&&(m.displayValue=w);if(m.previousY||0===m.previousY)m.previousY=m.previousY/ga*100}c.showStackTotal&&a.xAxis.plotLines.push({value:Q,width:0,isVline:P,isTrend:!P,_isStackSum:1,zIndex:4,label:{align:Ua,textAlign:Ua,rotation:V,style:r,verticalAlign:$a,offsetScale:P?0>ga?s.n:s.p:void 0,offsetScaleIndex:0,y:0>ga?270===va?4:T:-4,x:0,text:g.yAxis(Pa(ga,10))}});t[I]&&(t[I].value=Q,t[I]._weight=
S,t[I]._hideLabel=!1);I+=1;c.showXAxisPercentValues&&I<J&&a.xAxis.plotLines.push({value:R,width:0,isVine:!0,label:{align:Ua,textAlign:f?bb:Ua,rotation:f?270:0,backgroundColor:"#ffffff",backgroundOpacity:1,borderWidth:"1px",borderType:"solid",borderColor:B.color,style:{color:B.color,fontSize:B.fontSize,fontFamily:B.fontFamily,lineHeight:B.lineHeight},verticalAlign:Ya,y:n,x:x,text:this.numberFormatter.percentValue(R)},zIndex:5});h=R}I=0;for(J=t.length;I<J;I+=1)t[I]&&t[I]._hideLabel&&(t[I].value=null);
A=0;for(J=a.xAxis.plotLines.length;A<J;A+=1)if(y=b.plotLines[A],y.isVline&&!y._isStackSum&&(c=y.value))c-=.5,d=l[u(c)],e=l[G(c)],y.value=d+(e-d)*(c-u(c))},defaultSeriesType:"floatedcolumn"},n.stackedcolumn2d);n("msstackedcolumn2d",{friendlyName:"Multi-series Stacked Column Chart",series:function(a,p,c){var d,b,e,t,ea=p[ta],h=0,r,T;r=[];var l;p.legend.enabled=Boolean(k(a.chart.showlegend,1));if(a.dataset&&0<a.dataset.length){this.categoryAdder(a,p);d=0;for(b=a.dataset.length;d<b;d+=1)if(l=a.dataset[d].dataset)for(e=
0,t=l.length;e<t;e+=1,h+=1)r={hoverEffects:this.parseSeriesHoverOptions(a,p,l[e],c),visible:!k(l[e].initiallyhidden,0),data:[],numColumns:b,columnPosition:d},T=Math.min(ea.oriCatTmp.length,l[e].data&&l[e].data.length),r=this.point(c,r,l[e],a.chart,p,T,h,d),p.series.push(r);if(this.isDual&&a.lineset&&0<a.lineset.length)for(e=0,t=a.lineset.length;e<t;e+=1,h+=1)d=a.lineset[e],r={hoverEffects:this.parseSeriesHoverOptions(a,p,d,c),visible:!k(d.initiallyhidden,0),data:[],yAxis:1,type:"line"},T=Math.min(ea.oriCatTmp.length,
d.data&&d.data.length),p.series.push(n.msline.point.call(this,"msline",r,d,a.chart,p,T,h));this.configureAxis(p,a);a.trendlines&&Va(a.trendlines,p.yAxis,p[ta],this.isDual,this.isBar)}},postSpaceManager:function(a,p,c){var d=a[ta],b,e,t;n.base.postSpaceManager.call(this);if(this.isStacked&&d.showStackTotal&&(b=a.chart,a=(p=a.xAxis)&&p.plotLines,b=c-b.marginLeft-b.marginRight,c=d.plotSpacePercent,d=d[0].stack,d=d.column&&d.column.length,e=(1-2*c)/d,p=b/(p.max-p.min),50<p*e&&.1==c))for(p=50/p,c=a&&a.length,
d=-((d-1)/2)*p,t=0;t<c;t+=1)e=a[t],e._isStackSum&&(b=e._catPosition+(d+p*e._stackIndex),e.value=b)}},n.stackedcolumn2d);n("mscombi2d",{friendlyName:"Multi-series Combination Chart",standaloneInit:!0,creditLabel:Ba,rendererId:"cartesian"},n.mscombibase);n("mscombi3d",{friendlyName:"Multi-series 3D Combination Chart",series:n.mscombi2d.series,eiMethods:function(a){var p={};xa(a.split(","),function(a){p[a]=function(){qa.raiseWarning(this,"1301081430","run","JSRenderer~"+a+"()","Method not applicable.")}});
return p}("view2D,view3D,resetView,rotateView,getViewAngles,fitToStage")},n.mscolumn3d);n("mscolumnline3d",{friendlyName:"Multi-series Column and Line Chart"},n.mscombi3d);n("stackedcolumn2dline",{friendlyName:"Stacked Column and Line Chart",isStacked:!0,stack100percent:0},n.mscombi2d);n("stackedcolumn3dline",{friendlyName:"Stacked 3D Column and Line Chart",isStacked:!0,stack100percent:0},n.mscombi3d);n("mscombidy2d",{friendlyName:"Multi-series Dual Y-Axis Combination Chart",isDual:!0,secondarySeriesType:void 0},
n.mscombi2d);n("mscolumn3dlinedy",{friendlyName:"Multi-series 3D Column and Line Chart",isDual:!0,secondarySeriesType:"line"},n.mscolumnline3d);n("stackedcolumn3dlinedy",{friendlyName:"Stacked 3D Column and Line Chart",isDual:!0,secondarySeriesType:"line"},n.stackedcolumn3dline);n("msstackedcolumn2dlinedy",{friendlyName:"Multi-series Dual Y-Axis Stacked Column and Line Chart",isDual:!0,stack100percent:0,secondarySeriesType:"line"},n.msstackedcolumn2d);n("scrollcolumn2d",{friendlyName:"Scrollable Multi-series Column Chart",
postSeriesAddition:n.scrollbase.postSeriesAddition,tooltipConstraint:"plot",canvasborderthickness:1,avgScrollPointWidth:40},n.mscolumn2d);n("scrollline2d",{friendlyName:"Scrollable Multi-series Line Chart",postSeriesAddition:n.scrollbase.postSeriesAddition,tooltipConstraint:"plot",canvasborderthickness:1,avgScrollPointWidth:75},n.msline);n("scrollarea2d",{friendlyName:"Scrollable Multi-series Area Chart",postSeriesAddition:n.scrollbase.postSeriesAddition,tooltipConstraint:"plot",canvasborderthickness:1,
avgScrollPointWidth:75},n.msarea);n("scrollstackedcolumn2d",{friendlyName:"Scrollable Stacked Column Chart",postSeriesAddition:function(a,p,c,d){n.base.postSeriesAddition.call(this,a,p,c,d);n.scrollbase.postSeriesAddition.call(this,a,p,c,d)},canvasborderthickness:1,tooltipConstraint:"plot",avgScrollPointWidth:75},n.stackedcolumn2d);n("scrollcombi2d",{friendlyName:"Scrollable Combination Chart",postSeriesAddition:n.scrollbase.postSeriesAddition,tooltipConstraint:"plot",canvasborderthickness:1,avgScrollPointWidth:40},
n.mscombi2d);n("scrollcombidy2d",{friendlyName:"Scrollable Dual Y-Axis Combination Chart",postSeriesAddition:n.scrollbase.postSeriesAddition,tooltipConstraint:"plot",canvasborderthickness:1,avgScrollPointWidth:40},n.mscombidy2d);n("scatter",{friendlyName:"Scatter Chart",isXY:!0,standaloneInit:!0,defaultSeriesType:"scatter",defaultZeroPlaneHighlighted:!1,creditLabel:Ba},n.scatterbase);n("bubble",{friendlyName:"Bubble Chart",standaloneInit:!0,standaloneInut:!0,defaultSeriesType:"bubble",rendererId:"bubble",
point:function(a,p,c,d,b){a=k(d.ignoreemptydatasets,0);var e=!1,t=this.colorManager,ea,h,r,T,l,f,n,V,x,O,A,m,P,B,y,v,N=k(c.showvalues,b[ta].showValues);ea=k(d.bubblescale,1);var D=g(d.negativecolor,"FF0000"),H=b.plotOptions.bubble,J=this.numberFormatter,u=p._showRegression=k(c.showregressionline,d.showregressionline,0),ga,I,Q,S;p.name=wa(c.seriesname);r=Boolean(k(c.drawanchors,c.showanchors,d.drawanchors,1));V=g(c.plotfillalpha,c.bubblefillalpha,d.plotfillalpha,Ha);x=k(c.showplotborder,d.showplotborder,
1);O=ca(g(c.plotbordercolor,d.plotbordercolor,"666666"));A=g(c.plotborderthickness,d.plotborderthickness,1);m=g(c.plotborderalpha,d.plotborderalpha,"95");x=1===x?A:0;t=g(c.color,c.plotfillcolor,d.plotfillcolor,t.getPlotColor());p.marker={enabled:r,fillColor:this.getPointColor(t,Ha),lineColor:ja(O,x?m:0),lineWidth:x,symbol:"circle"};if(A=c.data){v=A.length;H.bubbleScale=ea;if(0===k(c.includeinlegend)||void 0===p.name)p.showInLegend=!1;u&&(p.events={hide:this.hideRLine,show:this.showRLine},ga={sumX:0,
sumY:0,sumXY:0,sumXsqure:0,sumYsqure:0,xValues:[],yValues:[]},I=k(c.showyonx,d.showyonx,1),Q=ca(g(c.regressionlinecolor,d.regressionlinecolor,t)),S=k(c.regressionlinethickness,d.regressionlinethickness,1),ea=Na(k(c.regressionlinealpha,d.regressionlinealpha,100)),Q=ja(Q,ea));for(h=0;h<v;h+=1)(T=A[h])?(ea=J.getCleanValue(T.y),P=J.getCleanValue(T.x),B=J.getCleanValue(T.z,!0),null===ea?p.data.push({y:null,x:P}):(e=!0,n=0!==k(d.use3dlighting,T.is3d,c.is3d,d.is3d),l=ca(g(T.color,0>T.z?D:t)),f=g(T.alpha,
V),y=this.getPointStub(T,ea,P,b,c,N),l=n?this.getPointColor(l,f):{FCcolor:{color:l,alpha:f}},null!==B&&(H.zMax=H.zMax>B?H.zMax:B,H.zMin=H.zMin<B?H.zMin:B),T=this.pointHoverOptions(T,p,{plotType:"bubble",is3d:n,seriesAnchorSymbol:"circle",color:l,negativeColor:D,alpha:f,borderWidth:x,borderColor:O,borderAlpha:m,shadow:!1}),p.data.push({y:ea,x:P,z:B,displayValue:y.displayValue,toolText:y.toolText,link:y.link,hoverEffects:T.enabled&&T.options,rolloverProperties:T.enabled&&T.rolloverOptions,marker:{enabled:r,
fillColor:l,lineColor:{FCcolor:{color:O,alpha:m}},lineWidth:x,symbol:"circle"}}),this.pointValueWatcher(b,ea,P,u&&ga))):p.data.push({y:null});u&&(c={type:"line",color:Q,showInLegend:!1,lineWidth:S,enableMouseTracking:!1,marker:{enabled:!1},data:this.getRegressionLineSeries(ga,I,v),zIndex:0},p=[p,c])}a&&!e&&(p.showInLegend=!1);return p},getPointStub:function(a,p,c,d,b,e){var t=this.dataObj.chart;d=d[ta];p=null===p?p:d.numberFormatter.dataLabels(p);var ea,h=d.tooltipSepChar,r=wa(ka(g(a.tooltext,b.plottooltext,
d.tooltext)));d.showTooltip?void 0!==r?b=Fa(r,[4,5,6,7,8,9,10,11,12,13,118],{yDataValue:p,xDataValue:d.numberFormatter.xAxis(c),yaxisName:ka(t.yaxisname),xaxisName:ka(t.xaxisname),zDataValue:d.numberFormatter.dataLabels(a.z)},a,t,b):null===p?b=!1:(d.seriesNameInToolTip&&(ea=g(b&&b.seriesname)),b=ea?ea+h:L,b+=c?d.numberFormatter.xAxis(c)+h:L,b=b+p+(a.z?h+d.numberFormatter.dataLabels(a.z):L)):b=L;c=k(a.showvalue,e,d.showValues)?void 0!==g(a.displayvalue,a.name,a.label)?ka(g(a.displayvalue,a.name,a.label)):
p:L;a=wa(a.link);return{displayValue:c,toolText:b,link:a}}},n.scatter);n("ssgrid",{friendlyName:"Grid Component",standaloneInit:!0,defaultSeriesType:"ssgrid",rendererId:"ssgrid",chart:function(a,b){var c=this.containerElement,d=ua({},this.dataObj),q=d.chart||(d.chart=d.graph||{}),e=this.chartInstance,t=0,ea=[],h=d.data,r=h&&h.length,T=this.smartLabel,l=this.numberFormatter,f=c.offsetHeight,V=c.offsetWidth,O=this.colorManager,x,m,A,y,P,B,v,u,N,D,H,J,s,ga,I,Q,S,R,w,G,M,Y,E,F,K,Z=0;m=0;var c={_FCconf:{0:{stack:{}},
1:{stack:{}},x:{stack:{}},noWrap:!1,marginLeftExtraSpace:0,marginRightExtraSpace:0,marginBottomExtraSpace:0,marginTopExtraSpace:0,marimekkoTotal:0},chart:{ignoreHiddenSeries:!1,events:{},spacingTop:0,spacingRight:0,spacingBottom:0,spacingLeft:0,marginTop:0,marginRight:0,marginBottom:0,marginLeft:0,borderRadius:0,borderColor:"#000000",borderWidth:1,defaultSeriesType:"ssgrid",style:{fontFamily:g(q.basefont,"Verdana,sans"),fontSize:Ja(q.basefontsize,20)+Sa,color:g(q.basefontcolor,O.getColor("baseFontColor")).replace(/^#?([a-f0-9]+)/ig,
"#$1")},plotBackgroundColor:Ra},labels:{smartLabel:T},colors:"AFD8F8 F6BD0F 8BBA00 FF8E46 008E8E D64646 8E468E 588526 B3AA00 008ED6 9D080D A186BE CC6600 FDC689 ABA000 F26D7D FFF200 0054A6 F7941C CC3300 006600 663300 6DCFF6".split(" "),credits:{href:z.CREDIT_HREF,text:z.CREDIT_STRING,enabled:Ba},legend:{enabled:!1},series:[],subtitle:{text:L},title:{text:L},tooltip:{enabled:!1},exporting:{buttons:{exportButton:{},printButton:{enabled:!1}}}},X=c[ta],$=x=m=Z=0,U=t=ga=0;K=e.jsVars.cfgStore;e=c.chart;
P=e.toolbar={button:{}};B=P.button;delete d.graph;aa(c.chart.style);e.events.click=this.linkClickFN;B.scale=k(q.toolbarbuttonscale,1.15);B.width=k(q.toolbarbuttonwidth,15);B.height=k(q.toolbarbuttonheight,15);B.radius=k(q.toolbarbuttonradius,2);B.spacing=k(q.toolbarbuttonspacing,5);B.fill=ja(g(q.toolbarbuttoncolor,"ffffff"));B.labelFill=ja(g(q.toolbarlabelcolor,"cccccc"));B.symbolFill=ja(g(q.toolbarsymbolcolor,"ffffff"));B.hoverFill=ja(g(q.toolbarbuttonhovercolor,"ffffff"));B.stroke=ja(g(q.toolbarbuttonbordercolor,
"bbbbbb"));B.symbolStroke=ja(g(q.toolbarsymbolbordercolor,"9a9a9a"));B.strokeWidth=k(q.toolbarbuttonborderthickness,1);B.symbolStrokeWidth=k(q.toolbarsymbolborderthickness,1);d=B.symbolPadding=k(q.toolbarsymbolpadding,5);B.symbolHPadding=k(q.toolbarsymbolhpadding,d);B.symbolVPadding=k(q.toolbarsymbolvpadding,d);B=P.position=g(q.toolbarposition,"tr").toLowerCase();switch(B){case "tr":case "tl":case "br":case "bl":break;default:B="tr"}d=P.hAlign="left"===(L+q.toolbarhalign).toLowerCase()?"l":B.charAt(1);
B=P.vAlign="bottom"===(L+q.toolbarvalign).toLowerCase()?"b":B.charAt(0);P.hDirection=k(q.toolbarhdirection,"r"===d?-1:1);P.vDirection=k(q.toolbarvdirection,"b"===B?-1:1);P.vMargin=k(q.toolbarvmargin,6);P.hMargin=k(q.toolbarhmargin,10);P.x=k(q.toolbarx,"l"===d?0:a);P.y=k(q.toolbary,"t"===B?0:b);void 0!==g(q.clickurl)&&(e.link=q.clickurl,e.style.cursor="pointer");x=k(K.showpercentvalues,q.showpercentvalues,0);m=g(K.numberitemsperpage,q.numberitemsperpage);k(K.showshadow,q.showshadow,0);t=g(K.basefont,
q.basefont,"Verdana,sans");A=Ja(K.basefontsize,q.basefontsize,10);A+=Sa;y=ca(g(K.basefontcolor,q.basefontcolor,O.getColor("baseFontColor")));d=ca(g(K.alternaterowbgcolor,q.alternaterowbgcolor,O.getColor("altHGridColor")));P=g(K.alternaterowbgalpha,q.alternaterowbgalpha,O.getColor("altHGridAlpha"))+L;B=k(K.listrowdividerthickness,q.listrowdividerthickness,1);v=ca(g(K.listrowdividercolor,q.listrowdividercolor,O.getColor("borderColor")));u=k(K.listrowdivideralpha,q.listrowdivideralpha,O.getColor("altHGridAlpha"))+
15+L;N=k(K.colorboxwidth,q.colorboxwidth,8);D=k(K.colorboxheight,q.colorboxheight,8);H=k(K.navbuttonradius,q.navbuttonradius,7);J=ca(g(K.navbuttoncolor,q.navbuttoncolor,O.getColor("canvasBorderColor")));s=ca(g(K.navbuttonhovercolor,q.navbuttonhovercolor,O.getColor("altHGridColor")));ga=k(K.textverticalpadding,q.textverticalpadding,3);I=k(K.navbuttonpadding,q.navbuttonpadding,5);Q=k(K.colorboxpadding,q.colorboxpadding,10);S=k(K.valuecolumnpadding,q.valuecolumnpadding,10);R=k(K.namecolumnpadding,q.namecolumnpadding,
5);w=k(K.borderthickness,q.borderthickness,1);G=ca(g(K.bordercolor,q.bordercolor,O.getColor("borderColor")));M=g(K.borderalpha,q.borderalpha,O.getColor("borderAlpha"))+L;Y=g(K.bgcolor,q.bgcolor,"FFFFFF");E=g(K.bgalpha,q.bgalpha,Ha);F=g(K.bgratio,q.bgratio,Ha);K=g(K.bgangle,q.bgangle,Ca);e.borderRadius=w/16;e.borderWidth=w;e.borderColor=C({FCcolor:{color:G,alpha:M}});e.backgroundColor={FCcolor:{color:Y,alpha:E,ratio:F,angle:K}};e.borderRadius=k(q.borderradius,0);K={fontFamily:t,fontSize:A,color:y};
aa(K);T.setStyle(K);for(t=0;t<r;t+=1)if(A=h[t],w=l.getCleanValue(A.value),G=ka(Ga(A.label,A.name)),y=ca(g(A.color,O.getPlotColor())),g(A.alpha,q.plotfillalpha,Ha),G!=L||null!=w)ea.push({value:w,label:G,color:y}),Z+=w,U+=1;for(t=0;t<U;t+=1)A=ea[t],w=A.value,A.dataLabel=A.label,A.displayValue=x?l.percentValue(w/Z*100):l.dataLabels(w),h=T.getOriSize(A.displayValue),$=Math.max($,h.width+S);m?m>=U?(x=f/U,m=U):(l=f-2*(I+H),x=l/m):(Z=parseInt(K.lineHeight,10),Z=Math.max(Z+2*ga,D),m=f/Z,m>=U?(x=f/U,m=U):
(l=f-2*(I+H),m=Math.floor(l/Z),x=l/m));ga=V-Q-N-R-$-S;t=Q+N+R;l=g(q.basefont,"Verdana,sans");$=Ja(q.basefontsize,10);O=g(q.basefontcolor,O.getColor("baseFontColor"));h=g(q.outcnvbasefont,l);A=Ja(q.outcnvbasefontsize,$);r=A+Sa;q=g(q.outcnvbasefontcolor,O).replace(/^#?([a-f0-9]+)/ig,"#$1");$+=Sa;O=O.replace(/^#?([a-f0-9]+)/ig,"#$1");X.trendStyle=X.outCanvasStyle={fontFamily:h,color:q,fontSize:r};aa(X.trendStyle);X.inCanvasStyle={fontFamily:l,fontSize:$,color:O};c.tooltip.style={fontFamily:l,fontSize:$,
lineHeight:void 0,color:O};c.tooltip.shadow=!1;e.height=f;e.width=V;e.rowHeight=x;e.labelX=t;e.colorBoxWidth=N;e.colorBoxHeight=D;e.colorBoxX=Q;e.valueX=Q+N+R+ga+S;e.valueColumnPadding=S;e.textStyle=K;e.listRowDividerAttr={"stroke-width":B,stroke:{FCcolor:{color:v,alpha:u}}};e.alternateRowColor={FCcolor:{color:d,alpha:P}};e.navButtonRadius=H;e.navButtonPadding=I;e.navButtonColor=J;e.navButtonHoverColor=s;e.lineHeight=parseInt(K.lineHeight,10);f=[];q=0;X=!0;for(t=0;t<U&0!==m;t+=1)0===t%m&&(f.push({data:[],
visible:X}),X=!1,q+=1),A=ea[t],V=T.getSmartText(A.dataLabel,ga,x),f[q-1].data.push({label:V.text,originalText:V.tooltext,displayValue:A.displayValue,y:A.value,color:A.color});c.series=f;n.base.parseExportOptions.call(this,c);c.tooltip.enabled=!!c.exporting.enabled;return c},creditLabel:Ba},n.base);n("renderer.bubble",{drawPlotBubble:function(a,p){var c=this,d=c.options,q=d.chart,h=d.plotOptions.series,t=h.dataLabels&&h.dataLabels.style||{},ea={fontFamily:t.fontFamily,fontSize:t.fontSize,lineHeight:t.lineHeight,
fontWeight:t.fontWeight,fontStyle:t.fontStyle},t=c.paper,f=c.elements,r=a.items,T=a.graphics=a.graphics||[],l=c.xAxis[p.xAxis||0],va=c.yAxis[p.yAxis||0],O=a.data,V=!1!==(d.tooltip||{}).enabled,x,n,h=isNaN(+h.animation)&&h.animation.duration||1E3*h.animation,A=!1===p.visible?"hidden":"visible",d=d.plotOptions.bubble,m=d.zMax,d=d.bubbleScale,g=Z(c.canvasHeight,c.canvasWidth)/8,m=oa(m),B,y,u,N,D,H,J,w,s,I,Q;B=c.layers;y=B.dataset=B.dataset||t.group("dataset-orphan");var S=B.tracker,R,G,$=function(a){sa.call(this,
c,a)},M=function(a,d,b){return function(p){a.attr(d);sa.call(this,c,p,b)}};c.addCSSDefinition(".fusioncharts-datalabels .fusioncharts-label",ea);B.datalabels?B.datalabels.attr("class","fusioncharts-datalabels"):B.datalabels=t.group({"class":"fusioncharts-datalabels"},"datalables").insertAfter(y);ea=y.bubble=y.bubble||t.group("bubble",y);q.clipBubbles&&!ea.attrs["clip-rect"]&&ea.attr({"clip-rect":f["clip-canvas"]});B=0;for(y=O.length;B<y;B+=1){u=O[B];I=Q=G=null;s=u.marker;if(null!==u.y&&s&&s.enabled){N=
u.link;q=u.toolText;D=k(u.x,B);H=u.y;f={index:B,link:N,value:H,y:H,x:D,z:u.z,displayValue:u.displayValue,toolText:u.toolText,id:a.userID,datasetIndex:a.index,datasetName:a.name,visible:a.visible};w=va.getAxisPosition(H);J=l.getAxisPosition(D);n=oa(u.z);R=v(n*g/m)*d||0;n=x={};u.hoverEffects&&(n={fill:C(s.fillColor),"stroke-width":s.lineWidth,stroke:C(s.lineColor),r:R},x=u.rolloverProperties,x={fill:C(x.fillColor),"stroke-width":x.lineWidth,stroke:C(x.lineColor),r:R*x.scale});I=t.circle(J,w,0,ea).attr({fill:C(s.fillColor),
"stroke-width":s.lineWidth,stroke:C(s.lineColor),visibility:A}).animate({r:R||0},h,"easeOut",c.getAnimationCompleteFn());if(N||V)R<b&&(R=b),Q=t.circle(J,w,R,S).attr({cursor:N?"pointer":"",stroke:e,"stroke-width":s.lineWidth,fill:e,ishot:!!N,visibility:A});(Q||I).data("eventArgs",f).click($).hover(M(I,x,"DataPlotRollOver"),M(I,n,"DataPlotRollOut")).tooltip(q);r[B]={index:B,x:D,y:H,z:u.z,value:H,graphic:I,dataLabel:G,tracker:Q};G=c.drawPlotLineLabel(a,p,B,J,w)}else r[B]={index:B,x:D,y:H};G&&T.push(G);
I&&T.push(I);Q&&T.push(Q)}a.visible=!1!==p.visible;return a}},n["renderer.cartesian"]);n("renderer.ssgrid",{drawGraph:function(){var a=this.options.series,b=this.elements,c=b.plots,d=a.length,q;c||(c=this.plots=this.plots||[],b.plots=c);this.drawSSGridNavButton();for(q=0;q<d;q++)(b=c[q])||c.push(b={items:[],data:a[q].data}),a[q].data&&a[q].data.length&&this.drawPlot(b,a[q]);1<d&&this.nenagitePage(0)},drawPlot:function(a){var b=a.data,c=this.paper,d=this.options.chart,q=d.colorBoxHeight,e=d.colorBoxWidth,
t=d.colorBoxX,h=d.labelX,f=d.valueX,r=d.rowHeight,k=d.width,l=d.listRowDividerAttr,O=l["stroke-width"],l=C(l.stroke),V=O%2/2,n=d.textStyle,x=this.layers,x=x.dataset=x.dataset||c.group("dataset-orphan"),d=C(d.alternateRowColor);a=a.items;var m=0,A,y,g,B;b&&b.length||(b=[]);l={stroke:l,"stroke-width":O};B=0;for(O=b.length;B<O;B+=1)g=b[B],y=g.y,A=a[B]={index:B,value:y,graphic:null,dataLabel:null,dataValue:null,alternateRow:null,listRowDivider:null,hot:null},null!==y&&void 0!==y&&(0===B%2&&(A.alternateRow=
c.rect(0,m,k,r,0,x).attr({fill:d,"stroke-width":0})),y=v(m)+V,A.listRowDivider=c.path(["M",0,y,"L",k,y],x).attr(l),A.graphic=c.rect(t,m+r/2-q/2,e,q,0,x).attr({fill:g.color,"stroke-width":0,stroke:"#000000"}),y=A.dataLabel=c.text().attr({text:g.label,title:g.originalText||"",x:h,y:m+r/2,fill:n.color,"text-anchor":"start"}).css(n),x.appendChild(y),A=A.dataValue=c.text().attr({text:g.displayValue,title:g.originalText||"",x:f,y:m+r/2,fill:n.color,"text-anchor":"start"}).css(n),x.appendChild(A),m+=r);
y=v(m)+V;c.path(["M",0,y,"L",k,y],x).attr(l)},drawSSGridNavButton:function(){var a=this,b=a.paper,c=a.options,d=c.chart,q=c.series,e=d.navButtonColor,t=d.navButtonHoverColor,c=d.navButtonRadius,h=.67*c,f=d.navButtonPadding+h+(q&&q[0].data&&q[0].data.length*d.rowHeight)+.5*c,d=d.width-20,r,k,l,O;1<q.length&&(O=a.naviigator=b.group("navigation"),a.navElePrv=q=b.group(O),r=b.path(["M",20,f,"L",20+c+h,f-h,20+c,f,20+c+h,f+h,"Z"]).attr({fill:e,"stroke-width":0,cursor:"pointer"}),q.appendChild(r),l=b.circle(20+
c,f,c).attr({fill:Ra,"stroke-width":0,cursor:"pointer"}).mouseover(function(){r.attr({fill:t,cursor:"pointer"})}).mouseout(function(){r.attr({fill:e})}).click(function(){a.nenagitePage(-1)}),q.appendChild(l),a.navEleNxt=q=b.group(O),k=b.path(["M",d,f,"L",d-c-h,f-h,d-c,f,d-c-h,f+h,"Z"]).attr({fill:e,"stroke-width":0,cursor:"pointer"}),q.appendChild(k),b=b.circle(d-c,f,c).attr({fill:Ra,"stroke-width":0,cursor:"pointer"}).mouseover(function(){k.attr({fill:t})}).mouseout(function(){k.attr({fill:e})}).click(function(){a.nenagitePage(1)}),
q.appendChild(b))},nenagitePage:function(a){var b=this.plots,c=b.length;a=(this.currentSeriesIndex||0)+(a||0);var d,q=function(a){a.graphic&&a.graphic.hide();a.dataLabel&&a.dataLabel.hide();a.dataValue&&a.dataValue.hide();a.alternateRow&&a.alternateRow.hide();a.listRowDivider&&a.listRowDivider.hide()};if(b[a]){for(d=c;d--;)xa(b[d].items,q);xa(b[a].items,function(a){a.graphic&&a.graphic.show();a.dataLabel&&a.dataLabel.show();a.dataValue&&a.dataValue.show();a.alternateRow&&a.alternateRow.show();a.listRowDivider&&
a.listRowDivider.show()});this.currentSeriesIndex=a;qa.raiseEvent("pageNavigated",{pageId:a,data:this.options.series[a].data},this.logic.chartInstance);0===a?this.navElePrv.hide():this.navElePrv.show();a===c-1?this.navEleNxt.hide():this.navEleNxt.show()}}},n["renderer.root"]);Ma.prototype={getArcPath:function(a,b,c,d,q,e,t,h,f,r){return c==q&&d==e?[]:["A",t,h,0,r,f,q,e]},parseColor:function(a,b){var c,d,q,e,t,h,f,r,k,l,O=b/2,m,n,x,V,A;A=3;this.use3DLighting?(c=ia(a,80),d=ia(a,75),h=ha(a,85),f=ha(a,
70),r=ha(a,40),k=ha(a,50),ha(a,30),l=ha(a,65),ia(a,85),q=ia(a,69),e=ia(a,75),t=ia(a,95)):(A=10,c=ia(a,90),d=ia(a,87),h=ha(a,93),f=ha(a,87),r=ha(a,80),l=k=ha(a,85),ha(a,80),t=ia(a,85),q=ia(a,75),e=ia(a,80));m=d+ba+h+ba+f+ba+h+ba+d;x=b+ba+b+ba+b+ba+b+ba+b;n=d+ba+a+ba+h+ba+a+ba+d;V=O+ba+O+ba+O+ba+O+ba+O;r=d+ba+a+ba+r+ba+a+ba+d;q=e+ba+h+ba+k+ba+h+ba+q;e="FFFFFF"+ba+"FFFFFF"+ba+"FFFFFF"+ba+"FFFFFF"+ba+"FFFFFF";A=0+ba+O/A+ba+b/A+ba+O/A+ba+0;return{frontOuter:{FCcolor:{gradientUnits:"userSpaceOnUse",x1:this.leftX,
y1:0,x2:this.rightX,y2:0,color:q,alpha:x,angle:0,ratio:"0,20,15,15,50"}},backOuter:{FCcolor:{gradientUnits:"userSpaceOnUse",x1:this.leftX,y1:0,x2:this.rightX,y2:0,color:r,alpha:V,angle:0,ratio:"0,62,8,8,22"}},frontInner:{FCcolor:{gradientUnits:"userSpaceOnUse",x1:this.leftInnerX,y1:0,x2:this.rightInnerX,y2:0,color:n,alpha:V,angle:0,ratio:"0,25,5,5,65"}},backInner:{FCcolor:{gradientUnits:"userSpaceOnUse",x1:this.leftInnerX,y1:0,x2:this.rightInnerX,y2:0,color:m,alpha:x,angle:0,ratio:"0,62,8,8,22"}},
topBorder:{FCcolor:{gradientUnits:"userSpaceOnUse",x1:this.leftX,y1:0,x2:this.rightX,y2:0,color:e,alpha:A,angle:0,ratio:"0,20,15,15,50"}},topInnerBorder:{FCcolor:{gradientUnits:"userSpaceOnUse",x1:this.leftInnerX,y1:0,x2:this.rightInnerX,y2:0,color:e,alpha:A,angle:0,ratio:"0,50,15,15,20"}},top:da?{FCcolor:{gradientUnits:"userSpaceOnUse",radialGradient:!0,cx:this.cx,cy:this.cy,r:this.rx,fx:this.cx-.3*this.rx,fy:this.cy+1.2*this.ry,color:l+ba+t,alpha:b+ba+b,ratio:"0,100"}}:{FCcolor:{gradientUnits:"objectBoundingBox",
color:f+ba+f+ba+h+ba+d,alpha:b+ba+b+ba+b+ba+b,angle:-72,ratio:"0,8,15,77"}},bottom:C(ja(a,O)),startSlice:C(ja(c,b)),endSlice:C(ja(c,b))}},rotate:function(a){if(!this.hasOnePoint){for(var b=this.pointElemStore,c=0,d=b.length,e;c<d;c+=1)e=b[c],e=e._confObject,e.start+=a,e.end+=a,this.updateSliceConf(e);this.refreshDrawing()}},refreshDrawing:function(){return function(){var a=this.slicingWallsArr,b=0,c,d=a.length,e,h,t,f,k=this.slicingWallsFrontGroup,r=this.slicingWallsBackGroup;a:{var O=a[0]&&a[0]._conf.index,
l,m;f=O<=y;e=1;for(c=a.length;e<c;e+=1)if(m=a[e]._conf.index,l=m<=y,l!=f||m<O)break a;e=0}for(;b<d;b+=1,e+=1)e===d&&(e=0),c=a[e],f=c._conf.index,f<Xa?k.appendChild(c):f<=y?(h?c.insertBefore(h):k.appendChild(c),h=c):f<Ea?(t?c.insertBefore(t):r.appendChild(c),t=c):r.appendChild(c)}}(),updateSliceConf:function(a,b){var c=this.getArcPath,d=a.start,e=a.end,h=fa(d),t=fa(e),f,k,r,T,l,m,n,g,x,u,A,v,P,B,w,s,N=this.cx,D=this.cy,H=this.rx,J=this.ry,G=H+(da?-1:2),Z=J+(da?-1:2),I=this.innerRx,Q=this.innerRy,S=
this.depth,R=this.depthY,$=a.elements,X,M,Y,E,F,K,z;f=O(h);k=V(h);r=O(t);T=V(t);l=N+H*f;m=D+J*k;n=N+G*f;g=D+Z*k;X=m+S;M=N+H*r;Y=D+J*T;x=N+G*r;u=D+Z*T;E=Y+S;this.isDoughnut?(A=N+I*f,v=D+Q*k,w=v+S,P=N+I*r,B=D+Q*T,s=B+S,a.startSlice=["M",l,m,"L",l,X,A,w,A,v,"Z"],a.endSlice=["M",M,Y,"L",M,E,P,s,P,B,"Z"]):(a.startSlice=["M",l,m,"L",l,X,N,R,N,D,"Z"],a.endSlice=["M",M,Y,"L",M,E,N,R,N,D,"Z"]);da?(c=(h>t?U:0)+t-h,a.clipTopPath=this.isDoughnut?["M",l,m,"A",H,J,0,c>y?1:0,1,M,Y,"L",P,B,"A",I,Q,0,c>y?1:0,0,A,
v,"Z"]:["M",l,m,"A",H,J,0,c>y?1:0,1,M,Y,"L",this.cx,this.cy,"Z"],a.clipOuterFrontPath1=this.clipPathforNoClip,a.clipTopBorderPath=["M",n,g,"A",G,Z,0,c>y?1:0,1,x,u,"L",M,Y,M,Y+1,"A",H,J,0,c>y?1:0,0,l,m+1,"L",l,m,"Z"],d!=e?h>t?h<y?(a.clipOuterFrontPath=["M",this.rightX,D,"A",H,J,0,0,1,M,Y,"v",S,"A",H,J,0,0,0,this.rightX,D+S,"Z"],a.clipOuterFrontPath1=["M",this.leftX,D,"A",H,J,0,0,0,l,m,"v",S,"A",H,J,0,0,1,this.leftX,D+S,"Z"],a.clipOuterBackPath=["M",this.rightX,D,"A",H,J,0,1,0,this.leftX,D,"v",S,"A",
H,J,0,1,1,this.rightX,D+S,"Z"],this.isDoughnut&&(a.clipInnerBackPath=["M",this.rightInnerX,D,"A",I,Q,0,1,0,this.leftInnerX,D,"v",S,"A",I,Q,0,1,1,this.rightInnerX,D+S,"Z"],a.clipInnerFrontPath=["M",this.rightInnerX,D,"A",I,Q,0,0,1,P,B,"v",S,"A",I,Q,0,0,0,this.rightInnerX,D+S,"Z","M",this.leftInnerX,D,"A",I,Q,0,0,0,A,v,"v",S,"A",I,Q,0,0,1,this.leftInnerX,D+S,"Z"])):t>y?(a.clipOuterFrontPath=["M",this.rightX,D,"A",H,J,0,1,1,this.leftX,D,"v",S,"A",H,J,0,1,0,this.rightX,D+S,"Z"],a.clipOuterBackPath=["M",
this.leftX,D,"A",H,J,0,0,1,M,Y,"v",S,"A",H,J,0,0,0,this.leftX,D+S,"Z","M",this.rightX,D,"A",H,J,0,0,0,l,m,"v",S,"A",H,J,0,0,1,this.rightX,D+S,"Z"],this.isDoughnut&&(a.clipInnerFrontPath=["M",this.rightInnerX,D,"A",I,Q,0,1,1,this.leftInnerX,D,"v",S,"A",I,Q,0,1,0,this.rightInnerX,D+S,"Z"],a.clipInnerBackPath=["M",this.leftInnerX,D,"A",I,Q,0,0,1,P,B,"v",S,"A",I,Q,0,0,0,this.leftInnerX,D+S,"Z","M",this.rightInnerX,D,"A",I,Q,0,0,0,A,v,"v",S,"A",I,Q,0,0,1,this.rightInnerX,D+S,"Z"])):(a.clipOuterFrontPath=
["M",this.rightX,D,"A",H,J,0,0,1,M,Y,"v",S,"A",H,J,0,0,0,this.rightX,D+S,"Z"],a.clipOuterBackPath=["M",l,m,"A",H,J,0,0,1,this.rightX,D,"v",S,"A",H,J,0,0,0,l,X,"Z"],this.isDoughnut&&(a.clipInnerFrontPath=["M",this.rightInnerX,D,"A",I,Q,0,0,1,P,B,"v",S,"A",I,Q,0,0,0,this.rightInnerX,D+S,"Z"],a.clipInnerBackPath=["M",A,v,"A",I,Q,0,0,1,this.rightInnerX,D,"v",S,"A",I,Q,0,0,0,A,w,"Z"])):h<y?t>y?(a.clipOuterFrontPath=["M",l,m,"A",H,J,0,0,1,this.leftX,D,"v",S,"A",H,J,0,0,0,l,X,"Z"],a.clipOuterBackPath=["M",
this.leftX,D,"A",H,J,0,0,1,M,Y,"v",S,"A",H,J,0,0,0,this.leftX,D+S,"Z"],this.isDoughnut&&(a.clipInnerFrontPath=["M",A,v,"A",I,Q,0,0,1,this.leftInnerX,D,"v",S,"A",I,Q,0,0,0,A,w,"Z"],a.clipInnerBackPath=["M",this.leftInnerX,D,"A",I,Q,0,0,1,P,B,"v",S,"A",I,Q,0,0,0,this.leftInnerX,D+S,"Z"])):(a.clipOuterFrontPath=["M",l,m,"A",H,J,0,0,1,M,Y,"v",S,"A",H,J,0,0,0,l,X,"Z"],a.clipOuterBackPath=this.clipPathforNoClip,this.isDoughnut&&(a.clipInnerFrontPath=["M",A,v,"A",I,Q,0,0,1,P,B,"v",S,"A",I,Q,0,0,0,A,w,"Z"],
a.clipInnerBackPath=this.clipPathforNoClip)):(a.clipOuterFrontPath=this.clipPathforNoClip,a.clipOuterBackPath=["M",l,m,"A",H,J,0,0,1,M,Y,"v",S,"A",H,J,0,0,0,l,X,"Z"],this.isDoughnut&&(a.clipInnerFrontPath=this.clipPathforNoClip,a.clipInnerBackPath=["M",A,v,"A",I,Q,0,0,1,P,B,"v",S,"A",I,Q,0,0,0,A,w,"Z"])):a.clipOuterFrontPath=a.clipOuterBackPath=a.clipInnerBackPath=a.clipInnerFrontPath=this.clipPathforNoClip,b||(a.elements.startSlice._conf.index=h,a.elements.endSlice._conf.index=t,a.elements.frontOuter._conf.index=
La(t,h),a.elements.frontOuter1&&(a.elements.frontOuter1._conf.index=h,a.elements.frontOuter1.attr("litepath",[a.clipOuterFrontPath1])),a.thisElement.attr("litepath",[a.clipTopPath]),a.elements.bottom.attr("litepath",[a.clipTopPath]),a.elements.bottomBorder.attr("litepath",[a.clipTopPath]),a.elements.topBorder&&a.elements.topBorder.attr("litepath",[a.clipTopBorderPath]),a.elements.frontOuter.attr("litepath",[a.clipOuterFrontPath]),a.elements.backOuter.attr("litepath",[a.clipOuterBackPath]),this.isDoughnut&&
(a.elements.backInner.attr("litepath",[a.clipInnerBackPath]),a.elements.frontInner.attr("litepath",[a.clipInnerFrontPath]),a.elements.backInner._conf.index=La(t,h)),this.hasOnePoint?(a.elements.startSlice.hide(),a.elements.endSlice.hide()):(a.elements.startSlice.attr("litepath",[a.startSlice]).show(),a.elements.endSlice.attr("litepath",[a.endSlice]).show()))):(n=this.moveCmdArr,g=this.lineCmdArr,x=this.closeCmdArr,F=this.centerPoint,u=this.leftPoint,G=this.topPoint,Z=this.rightPoint,S=this.bottomPoint,
K=this.leftDepthPoint,z=this.rightDepthPoint,f=this.leftInnerPoint,k=this.rightInnerPoint,r=this.leftInnerDepthPoint,T=this.rightInnerDepthPoint,a.clipOuterFrontPath1=[],d!=e?(h>t?h<y?(d=c(N,D,l,m,this.leftX,D,H,J,1,0),e=c(N,D,this.leftX,D,this.rightX,D,H,J,1,0),Y=c(N,D,this.rightX,D,M,Y,H,J,1,0),a.clipOuterBackPath=n.concat(u,e,g,z,c(N,R,this.rightX,R,this.leftX,R,H,J,0,0),x),a.clipOuterFrontPath1=n.concat([l,m],d,g,K,c(N,R,this.leftX,R,l,X,H,J,0,0),x),a.clipOuterFrontPath=n.concat(Z,Y,g,[M,E],c(N,
R,M,E,this.rightX,R,H,J,0,0),x),a.clipTopBorderPath=n.concat([l,m],d,e,Y),this.isDoughnut?(l=c(N,D,P,B,this.rightInnerX,D,I,Q,0,0),m=c(N,D,this.rightInnerX,D,this.leftInnerX,D,I,Q,0,0),v=c(N,D,this.leftInnerX,D,A,v,I,Q,0,0),a.clipInnerBackPath=n.concat(k,m,g,r,c(N,R,this.leftInnerX,R,this.rightInnerX,R,I,Q,1,0),x),a.clipInnerFrontPath=n.concat(f,v,g,[A,w],c(N,R,A,w,this.leftInnerX,R,I,Q,1,0),x,n,[P,B],l,g,T,c(N,R,this.rightInnerX,R,P,s,I,Q,1,0),x),a.clipTopPath=a.clipTopBorderPath.concat(g,[P,B],
l,m,v,x),a.clipTopBorderPath=a.clipTopBorderPath.concat(n,[P,B],l,m,v)):a.clipTopPath=a.clipTopBorderPath.concat(g,F,x)):t>y?(d=c(N,D,l,m,this.rightX,D,H,J,1,0),e=c(N,D,this.rightX,D,this.leftX,D,H,J,1,0),Y=c(N,D,this.leftX,D,M,Y,H,J,1,0),a.clipOuterFrontPath=n.concat(Z,e,g,K,c(N,R,this.leftX,R,this.rightX,R,H,J,0,0),x),a.clipOuterBackPath=n.concat([l,m],d,g,z,c(N,R,this.rightX,R,l,X,H,J,0,0),x,n,u,Y,g,[M,E],c(N,R,M,E,this.leftX,R,H,J,0,0),x),a.clipTopBorderPath=n.concat([l,m],d,e,Y),this.isDoughnut?
(l=c(N,D,P,B,this.leftInnerX,D,I,Q,0,0),m=c(N,D,this.leftInnerX,D,this.rightInnerX,D,I,Q,0,0),v=c(N,D,this.rightInnerX,D,A,v,I,Q,0,0),a.clipInnerFrontPath=n.concat(f,m,g,T,c(N,R,this.rightInnerX,R,this.leftInnerX,R,I,Q,1,0),x),a.clipInnerBackPath=n.concat(k,v,g,[A,w],c(N,R,A,w,this.rightInnerX,R,I,Q,1,0),x,n,[P,B],l,g,r,c(N,R,this.leftInnerX,R,P,s,I,Q,1,0),x),a.clipTopPath=a.clipTopBorderPath.concat(g,[P,B],l,m,v,x),a.clipTopBorderPath=a.clipTopBorderPath.concat(n,[P,B],l,m,v)):a.clipTopPath=a.clipTopBorderPath.concat(g,
F,x)):(d=c(N,D,l,m,this.rightX,D,H,J,1,0),e=c(N,D,this.rightX,D,M,Y,H,J,1,0),a.clipOuterFrontPath=n.concat(Z,e,g,[M,E],c(N,R,M,E,this.rightX,R,H,J,0,0),x),a.clipOuterBackPath=n.concat([l,m],d,g,z,c(N,R,this.rightX,R,l,X,H,J,0,0),x),a.clipTopBorderPath=n.concat([l,m],d,e),this.isDoughnut?(l=c(N,D,P,B,this.rightInnerX,D,I,Q,0,0),m=c(N,D,this.rightInnerX,D,A,v,I,Q,0,0),a.clipInnerFrontPath=n.concat([P,B],l,g,T,c(N,R,this.rightInnerX,R,P,s,I,Q,1,0),x),a.clipInnerBackPath=n.concat(k,m,g,[A,w],c(N,R,A,
w,this.rightInnerX,R,I,Q,1,0),x),a.clipTopPath=a.clipTopBorderPath.concat(g,[P,B],l,m,x),a.clipTopBorderPath=a.clipTopBorderPath.concat(n,[P,B],l,m)):a.clipTopPath=a.clipTopBorderPath.concat(g,F,x)):h<y?t>y?(d=c(N,D,l,m,this.leftX,D,H,J,1,0),e=c(N,D,this.leftX,D,M,Y,H,J,1,0),a.clipOuterBackPath=n.concat(u,e,g,[M,E],c(N,R,M,E,this.leftX,R,H,J,0,0),x),a.clipOuterFrontPath=n.concat([l,m],d,g,K,c(N,R,this.leftX,R,l,X,H,J,0,0),x),a.clipTopBorderPath=n.concat([l,m],d,e),this.isDoughnut?(l=c(N,D,P,B,this.leftInnerX,
D,I,Q,0,0),m=c(N,D,this.leftInnerX,D,A,v,I,Q,0,0),a.clipInnerBackPath=n.concat([P,B],l,g,r,c(N,R,this.leftInnerX,R,P,s,I,Q,1,0),x),a.clipInnerFrontPath=n.concat(f,m,g,[A,w],c(N,R,A,w,this.leftInnerX,R,I,Q,1,0),x),a.clipTopPath=a.clipTopBorderPath.concat(g,[P,B],l,m,x),a.clipTopBorderPath=a.clipTopBorderPath.concat(n,[P,B],l,m)):a.clipTopPath=a.clipTopBorderPath.concat(g,F,x)):(d=c(N,D,l,m,M,Y,H,J,1,0),a.clipOuterBackPath=n.concat([l,m]),a.clipTopBorderPath=a.clipOuterBackPath.concat(d),a.clipOuterFrontPath=
a.clipTopBorderPath.concat(g,[M,E],c(N,R,M,E,l,X,H,J,0,0),x),this.isDoughnut?(l=c(N,D,P,B,A,v,I,Q,0,0),a.clipInnerBackPath=n.concat([P,B]),a.clipTopPath=a.clipTopBorderPath.concat(g,[P,B],l,x),a.clipTopBorderPath=a.clipTopBorderPath.concat(n,[P,B],l),a.clipInnerFrontPath=a.clipInnerBackPath.concat(l,g,[A,w],c(N,R,A,w,P,s,I,Q,1,0),x)):a.clipTopPath=a.clipTopBorderPath.concat(g,F,x)):(d=c(N,D,l,m,M,Y,H,J,1,0),a.clipOuterFrontPath=n.concat([l,m]),a.clipTopBorderPath=a.clipOuterFrontPath.concat(d),a.clipOuterBackPath=
a.clipTopBorderPath.concat(g,[M,E],c(N,R,M,E,l,X,H,J,0,0),x),this.isDoughnut?(l=c(N,D,P,B,A,v,I,Q,0,0),a.clipInnerFrontPath=n.concat([P,B]),a.clipTopPath=a.clipTopBorderPath.concat(g,[P,B],l,x),a.clipTopBorderPath=a.clipTopBorderPath.concat(a.clipInnerFrontPath,l),a.clipInnerBackPath=a.clipInnerFrontPath.concat(l,g,[A,w],c(N,R,A,w,P,s,I,Q,1,0),x)):a.clipTopPath=a.clipTopBorderPath.concat(g,F,x)),d=n.concat(u,g,Z),l=n.concat(G,g,S),a.clipTopPath=a.clipTopPath.concat(d,l),a.clipOuterFrontPath=a.clipOuterFrontPath.concat(d),
a.clipOuterFrontPath1=a.clipOuterFrontPath1.concat(d),a.clipOuterBackPath=a.clipOuterBackPath.concat(d),this.isDoughnut&&(l=n.concat(f,g,k),a.clipInnerFrontPath=a.clipInnerFrontPath.concat(l),a.clipInnerBackPath=a.clipInnerBackPath.concat(l))):(a.clipTopPath=a.clipOuterFrontPath=a.clipOuterBackPath=[],this.isDoughnut&&(a.clipInnerFrontPath=a.clipInnerBackPath=[])),b||(a.elements.startSlice._conf.index=h,a.elements.endSlice._conf.index=t,a.elements.frontOuter._conf.index=La(t,h),a.elements.frontOuter1&&
(a.elements.frontOuter1._conf.index=h,$.frontOuter1.attr({path:a.clipOuterFrontPath1})),a.thisElement.attr({path:a.clipTopPath}),$.topBorder.attr({path:a.clipTopBorderPath}),$.bottom.attr({path:a.clipTopPath}),$.bottomBorder.attr({path:a.clipTopBorderPath}),$.frontOuter.attr({path:a.clipOuterFrontPath}),$.backOuter.attr({path:a.clipOuterBackPath}),this.isDoughnut&&($.frontInner.attr({path:a.clipInnerFrontPath}),$.backInner.attr({path:a.clipInnerBackPath})),this.hasOnePoint?(a.elements.startSlice.hide(),
a.elements.endSlice.hide()):(a.elements.startSlice.attr({path:a.startSlice}).show(),a.elements.endSlice.attr({path:a.endSlice}).show())))},onPlotHover:function(a,b){var c=this.pointElemStore[a]._confObject,d=c.thisElement,e=c.elements,h=this.colorObjs[a],t=h.hoverProps,f=b?t.hoverColorObj:h.color,k=h.showBorderEffect,r=b?t.borderColor:h.borderColor,h=b?t.borderWidth:h.borderWidth;da?(t={fill:C(f.top),"stroke-width":0},1!==k&&(t.stroke=r,t["stroke-width"]=h),d._attr(t),k&&e.topBorder.attr({fill:C(f.topBorder),
"stroke-width":0})):(d._attr({fill:C(f.top),"stroke-width":0}),e.topBorder.attr({stroke:r,"stroke-width":h}));e.bottom.attr({fill:C(f.bottom),"stroke-width":0});e.bottomBorder.attr({stroke:r,"stroke-width":h});e.frontOuter.attr({fill:C(f.frontOuter),"stroke-width":0});e.backOuter.attr({fill:C(f.backOuter),"stroke-width":0});e.startSlice.attr({fill:C(f.startSlice),stroke:r,"stroke-width":h});e.endSlice.attr({fill:C(f.endSlice),stroke:r,"stroke-width":h});d=fa(c.start);c=fa(c.end);(d>c?U:0)+c-d>y&&
e.frontOuter1.attr({fill:C(f.frontOuter),"stroke-width":0});this.isDoughnut&&(e.frontInner.attr({fill:C(f.frontInner),"stroke-width":0}),e.backInner.attr({fill:C(f.backInner),"stroke-width":0}))},createSlice:function(){var a={stroke:!0,strokeWidth:!0,"stroke-width":!0,dashstyle:!0,"stroke-dasharray":!0,translateX:!0,translateY:!0,"stroke-opacity":!0,transform:!0,fill:!0,opacity:!0,ishot:!0,start:!0,end:!0,cursor:!0},b=function(b,c){var d,e,p=this,h=p._confObject,q,f=h.elements,k,m,n=h.Pie3DManager;
"string"===typeof b&&void 0!==c&&null!==c&&(d=b,b={},b[d]=c);if(b&&"string"!==typeof b){void 0!==b.cx&&(b.start=b.cx);void 0!==b.cy&&(b.end=b.cy);for(d in b)if(e=b[d],a[d])if(h[d]=e,"ishot"===d||"cursor"===d){q={};q[d]=e;for(k in f)f[k].attr(q);p._attr(q)}else if("transform"===d){for(k in f)f[k].attr({transform:b[d]});p._attr({transform:b[d]})}else"stroke"===d||"strokeWidth"===d||"stroke-width"===d||"dashstyle"===d||"stroke-dasharray"===d?(q={},q[d]=e,f.topBorder&&f.topBorder.attr(q),f.startSlice.attr(q),
f.endSlice.attr(q),f.bottomBorder.attr(q)):"fill"===d||"start"!==d&&"end"!==d||(m=!0);else p._attr(d,e);m&&(n.updateSliceConf(h),n.refreshDrawing())}else p=p._attr(b);return p},c=function(a,b,c,d){var e=this._confObject.elements,p;for(p in e)if(c)e[p].drag(b,c,d);else e[p].on(a,b);return c?this.drag(b,c,d):this._on(a,b)},d=function(){var a=this._confObject.elements,b;for(b in a)a[b].hide();return this._hide()},e=function(){var a=this._confObject.elements,b;for(b in a)a[b].show();return this._show()},
h=function(){var a=this._confObject,b=a.elements,c;for(c in b)b[c].destroy();da&&(a.clipTop.destroy(),a.clipOuterFront.destroy(),a.clipOuterBack.destroy(),a.clipOuterFront1&&a.clipOuterFront1.destroy(),a.clipInnerFront&&a.clipInnerFront.destroy(),a.clipInnerBack&&a.clipInnerBack.destroy());return this._destroy()};return function(a,f,k,r,m,l,n,g,O,x){var V=this.renderer;k=this.parseColor(k,r);a={start:a,end:f,elements:{},Pie3DManager:this};f=this.slicingWallsArr;r=a.elements;var A,v=da?"litepath":
"path";x&&(this.colorObjs[n]={color:k,borderColor:m,borderWidth:l,showBorderEffect:!1},x.hoverColorObj=this.parseColor(x.color,x.alpha),this.colorObjs[n].hoverProps=x);this.updateSliceConf(a,!0);da?(x={fill:C(k.top),"stroke-width":0},1!==O&&(x.stroke=m,x["stroke-width"]=l),x=V[v](a.clipTopPath,this.topGroup).attr(x),O&&(r.topBorder=V[v](a.clipTopBorderPath,this.topGroup).attr({fill:C(k.topBorder),"stroke-width":0}))):(x=V[v](a.clipTopPath,this.topGroup).attr({fill:C(k.top),"stroke-width":0}),r.topBorder=
V[v](a.clipTopBorderPath,this.topGroup).attr({stroke:m,"stroke-width":l}));r.bottom=V[v](a.clipTopPath,this.bottomBorderGroup).attr({fill:C(k.bottom),"stroke-width":0});r.bottomBorder=V[v](da?a.clipTopPath:a.clipTopBorderPath,this.bottomBorderGroup).attr({stroke:m,"stroke-width":l});r.frontOuter=V[v](a.clipOuterFrontPath,this.slicingWallsFrontGroup).attr({fill:C(k.frontOuter),"stroke-width":0});r.backOuter=V[v](a.clipOuterBackPath,this.outerBackGroup).attr({fill:C(k.backOuter),"stroke-width":0});
r.startSlice=V[v](a.startSlice,this.slicingWallsFrontGroup).attr({fill:C(k.startSlice),stroke:m,"stroke-width":l});r.endSlice=V[v](a.endSlice,this.slicingWallsFrontGroup).attr({fill:C(k.endSlice),stroke:m,"stroke-width":l});m=fa(a.start);l=fa(a.end);O=(m>l?U:0)+l-m;O>y&&(r.frontOuter1=V[v](a.clipOuterFrontPath1,this.slicingWallsFrontGroup).attr({fill:C(k.frontOuter),"stroke-width":0}),r.frontOuter1._conf={index:m,isStart:.5,pIndex:n},da&&(a.clipOuterFront1=a.clipOuterFrontPath1));r.frontOuter._conf=
{index:La(l,m),isStart:.5,pIndex:n};r.startSlice._conf={index:m,isStart:0,pIndex:n};r.endSlice._conf={index:l,isStart:1,pIndex:n};this.hasOnePoint&&(r.startSlice.hide(),r.endSlice.hide());this.isDoughnut?(r.frontInner=V[v](a.clipInnerFrontPath,this.innerFrontGroup).attr({fill:C(k.frontInner),"stroke-width":0}),r.backInner=V[v](a.clipInnerBackPath,this.innerBackGroup).attr({fill:C(k.backInner),"stroke-width":0}),r.backInner._conf={index:La(l,m),isStart:.5,pIndex:n},O>y?da?f.push(r.startSlice,r.frontOuter1,
r.frontOuter,r.backInner,r.endSlice):f.push(r.startSlice,r.frontOuter1,r.frontOuter,r.endSlice):da?f.push(r.startSlice,r.frontOuter,r.backInner,r.endSlice):f.push(r.startSlice,r.frontOuter,r.endSlice)):O>y?f.push(r.startSlice,r.frontOuter1,r.frontOuter,r.endSlice):f.push(r.startSlice,r.frontOuter,r.endSlice);if(void 0!==g){for(A in r)r[A].tooltip(g);x.tooltip(g)}da&&(a.clipTop=a.clipTopPath,a.clipOuterFront=a.clipOuterFrontPath,a.clipOuterBack=a.clipOuterBackPath,this.isDoughnut&&(a.clipInnerFront=
a.clipInnerFrontPath,a.clipInnerBack=a.clipInnerBackPath));x._confObject=a;a.thisElement=x;x._destroy=x.destroy;x.destroy=h;x._show=x.show;x.show=e;x._hide=x.hide;x.hide=d;x._on=x.on;x.on=c;x._attr=x.attr;x.attr=b;this.pointElemStore.push(x);return x}}()};Ma.prototype.constructor=Ma;n("renderer.pie3d",{type:"pie3d",isHovered:!1,translate:function(){var a=0,b=this.options,c=b.series[0],d=b.plotOptions.series.dataLabels,e=b.plotOptions.pie3d,h=g(c.startAngle,0)%360,m=c.managedPieSliceDepth,n=c.slicedOffset=
e.slicedOffset,y=this.canvasWidth,r=this.canvasHeight,T=[this.canvasLeft+.5*y,this.canvasTop+.5*r-.5*m],l,w,s,G,x,b=c.data,X,A=Z(y,r),$,P,B,z=d.distance,W=c.pieYScale,N=c.pieSliceDepth,D=c.slicedOffsetY=n*W;T.push(e.size,e.innerSize||0);T=na(T,function(a,b){return($=/%$/.test(a))?[y,r-m,A,A][b]*parseInt(a,10)/100:a});T[2]/=2;T[3]/=2;T.push(T[2]*W);T.push((T[2]+T[3])/2);T.push(T[5]*W);c.getX=function(a,b){s=f.asin((a-T[1])/(T[2]+z));return T[0]+(b?-1:1)*O(s)*(T[2]+z)};c.center=T;xa(b,function(b){a+=
b.y});c.labelsRadius=T[2]+z;c.labelsRadiusY=c.labelsRadius*W;c.quadrantHeight=(r-m)/2;c.quadrantWidth=y/2;G=-h*pa;G=v(1E3*G)/1E3;x=G+U;e=k(parseInt(d.style.fontSize,10),10)+4;c.maxLabels=u(c.quadrantHeight/e);c.labelFontSize=e;c.connectorPadding=k(d.connectorPadding,5);c.isSmartLineSlanted=g(d.isSmartLineSlanted,!0);c.connectorWidth=k(d.connectorWidth,1);c.enableSmartLabels=d.enableSmartLabels;c.Pie3DManager||(c.Pie3DManager=new Ma(T[0],T[1],T[2],T[3],W,N,this.layers.dataset,this.paper,1===c.data.length,
c.use3DLighting));xa(b,function(b){l=G;X=a?b.y/a:0;G=v(1E3*(G+X*U))/1E3;G>x&&(G=x);w=G;b.shapeArgs={start:v(1E3*l)/1E3,end:v(1E3*w)/1E3};b.centerAngle=s=(w+l)/2%U;b.slicedTranslation=[v(O(s)*n),v(V(s)*D)];P=O(s)*T[2];c.radiusY=B=V(s)*T[4];b.tooltipPos=[T[0]+.7*P,T[1]+B];b.percentage=100*X;b.total=a})},drawPlotPie3d:function(a,b){this.translate();var c=this,d=a.items,e=a.data,h=c.options,f=h.plotOptions,m=f.series,n=c.layers,r=c.elements.plots[0],g=c.datasets[0],f=f.series.dataLabels,l=m.dataLabels.style,
m=k(a.moveDuration,m.animation.duration),v=c.paper,y=h.tooltip||{},y=y&&!1!==y.enabled,u=g.slicedOffset,x=g.slicedOffsetY,w=c.plotGraphicClick,A=c.plotDragMove,s=c.plotDragStart,G=c.plotDragEnd,B=c.plotMouseDown,X=c.plotMouseUp,$=c.plotRollOver,N=c.plotRollOut,D=!!c.datasets[0].enableRotation,H=b.showBorderEffect,J=e.length,h=h.chart.usePerPointLabelColor,Z={fontFamily:l.fontFamily,fontSize:l.fontSize,lineHeight:l.lineHeight,fontWeight:l.fontWeight,fontStyle:l.fontStyle},U=function(a){return function(){c.legendClick(a,
!0,!1)}},I=function(a){return function(){return c.getEventArgs(a)}},Q=function(a){return function(b,c,d,e,p){A.call(a,b,c,d,e,p)}},S=function(a){return function(b,c,d){s.call(a,b,c,d)}},R=function(a){return function(){G.call(a)}},z=function(a){return function(){B.call(a)}},W=function(a){return function(b){X.call(a,b)}},M=function(a){return function(b){N.call(a,b)}},Y=function(a){return function(b){$.call(a,b)}},E,F,K,pa,oa,ba,aa,L,ia,ca;e&&J||(e=[]);r.singletonCase=1===J;r.chartPosition=Aa(c.container);
r.pieCenter=g.center;r.timerThreshold=30;for(ca=-1;++ca<J;)K=e[ca],l=K.y,pa=K.displayValue,Z=K.sliced,L=K.shapeArgs,E=K.centerAngle,ia=K.toolText,ba=(oa=!!K.link)||D||!K.doNotSlice,null===l||void 0===l||(F=d[ca])||(b.data[ca].plot=F=d[ca]={chart:c,index:ca,seriesData:r,value:l,angle:E,link:K.link,shapeArgs:L,slicedX:Z&&!r.singletonCase?O(E)*u:0,slicedY:Z&&!r.singletonCase?V(E)*x:0,sliced:Z,labelText:pa,name:K.name,label:K.name,percentage:K.percentage,toolText:ia,originalIndex:J-ca-1,style:K.style,
graphic:g.Pie3DManager.createSlice(L.start,L.end,K.color,K._3dAlpha,K.borderColor,K.borderWidth,ca,y?ia:"",H,K.rolloverProperties)},b.data[ca].legendClick=U(F),b.data[ca].getEventArgs=I(F),F.graphic.plotItem=F,F.graphic.data("plotItem",F),F.transX=O(E)*u,F.transY=V(E)*x,F.slicedTranslation="t"+F.transX+","+F.transY,E={index:b.reversePlotOrder?ca:J-1-ca,link:K.link,value:K.y,displayValue:K.displayValue,categoryLabel:K.categoryLabel,isSliced:K.sliced,toolText:K.toolText},F.graphic.attr({transform:"t"+
F.slicedX+","+F.slicedY,ishot:ba,cursor:oa?"pointer":""}).click(w).drag(Q(F),S(F),R(F)).mousedown(z(F.graphic)).mouseup(W(F.graphic)).data("groupId",ca).data("eventArgs",E).mouseover(Y(F)).mouseout(M(F)),void 0!==pa&&(l=K.style,Z={fontFamily:l.fontFamily,fontSize:l.fontSize,lineHeight:l.lineHeight,fontWeight:l.fontWeight,fontStyle:l.fontStyle},F.dataLabel=v.text(n.dataset).css(Z).attr({text:pa,title:K.originalText||"",fill:(h?C(K.color):l.color)||"#000000","text-bound":[l.backgroundColor,l.borderColor,
l.borderThickness,l.borderPadding,l.borderRadius,l.borderDash],visibility:"hidden",ishot:ba,cursor:oa?"pointer":""}).data("eventArgs",E).hover(Y(F),M(F)).click(w).mousedown(B,F.dataLabel).mouseup(X,F.dataLabel).data("plotItem",F),0<f.distance&&(aa=f.connectorWidth)&&f.enableSmartLabels&&(F.connector=v.path("M 0 0 l 0 0",n.dataset).attr({"stroke-width":aa,stroke:f.connectorColor||"#606060",visibility:"hidden",ishot:ba,cursor:oa?"pointer":""}).data("eventArgs",E).click(w).hover(Y(F),M(F)).mousedown(B,
F.connector).mouseup(X,F.connector).data("plotItem",F))));g.Pie3DManager.refreshDrawing();0<m?c.animate(d,m):c.placeDataLabels(!1,d)},rotate:function(a){var b=this.datasets[0],c=this.elements.plots[0].items,d=b.slicedOffset,e=b.slicedOffsetY,h=b.startAngle,f;a=isNaN(a)?-b._lastAngle:a;f=(a-h)%360;b.startAngle=k(a,b.startAngle)%360;f=-(f*w)/180;b.Pie3DManager&&b.Pie3DManager.rotate(f);xa(c,function(a){var b=a.graphic,c=a.shapeArgs,p=c.start+=f,c=c.end+=f,h=a.angle=fa((p+c)/2),p=a.sliced,c=O(h),h=V(h);
a.slicedTranslation=[v(c*d),v(h*e)];a.transX=a.slicedTranslation[0];a.transY=a.slicedTranslation[1];a.slicedX=p?O(f)*d:0;a.slicedY=p?V(f)*e:0;b&&p&&a.graphic.attr({transform:"t"+a.slicedTranslation[0]+","+a.slicedTranslation[1]})});this.placeDataLabels(!0,c)},plotRollOver:function(a){var b=this.chart,c=b.datasets[0].Pie3DManager;this.seriesData.isRotating||(sa.call(this.graphic,b,a,"DataPlotRollOver"),c.colorObjs[this.index]&&c.onPlotHover(this.index,!0));b.isHovered=!0},plotRollOut:function(a){var b=
this.chart,c=b.datasets[0].Pie3DManager;this.seriesData.isRotating||(sa.call(this.graphic,b,a,"DataPlotRollOut"),c.colorObjs[this.index]&&c.onPlotHover(this.index,!1));b.isHovered=!1},plotDragStart:function(a,b,c){var d=this.seriesData,e=this.chart.datasets[0];e.enableRotation&&(a=Oa.call(c,a,b,d.pieCenter,d.chartPosition,e.pieYScale),e.dragStartAngle=a,e._lastAngle=-e.startAngle,e.startingAngleOnDragStart=e.startAngle)},plotDragEnd:function(){var a=this.chart,b=a.datasets[0],c=b.Pie3DManager,d=b.startAngle,
e=this.seriesData,h={hcJSON:{series:[{startAngle:d}]}};a.disposed||ua(a.logic.chartInstance.jsVars._reflowData,h,!0);e.isRotating&&(setTimeout(function(){e.isRotating=!1},0),qa.raiseEvent("rotationEnd",{startingAngle:fa(d,!0),changeInAngle:d-b.startingAngleOnDragStart},a.logic.chartInstance),!a.isHovered&&c.colorObjs[this.index]&&c.onPlotHover(this.index,!1))},plotDragMove:function(a,b,c,d,e){var h=this.chart;a=h.datasets[0];b=this.seriesData;h.options.series[0].enableRotation&&!b.singletonCase&&
(b.isRotating||(b.isRotating=!0,qa.raiseEvent("rotationStart",{startingAngle:fa(a.startAngle,!0)},h.logic.chartInstance)),c=Oa.call(e,c,d,b.pieCenter,b.chartPosition,a.pieYScale),d=c-a.dragStartAngle,a.dragStartAngle=c,b.moveDuration=0,a._lastAngle+=180*d/w,c=(new Date).getTime(),!a._lastTime||a._lastTime+b.timerThreshold<c)&&(a._lastTime||h.rotate(),b.timerId=setTimeout(function(){h.disposed&&h.disposing||h.rotate()},b.timerThreshold),a._lastTime=c)},animate:function(a,b){var c,d,e,h=a.length,f,
m,k,n=this,g,l=function(){n.disposed||n.disposing||n.placeDataLabels(!1,a)};if(n.datasets[0].alphaAnimation)n.layers.dataset.attr({opacity:0}),n.layers.dataset.animate({opacity:1},b,"ease-in",function(){n.disposed||n.disposing||n.placeDataLabels(!1,a)});else for(c=0;c<h;c++)f=a[c],m=f.graphic,k=f.shapeArgs,f=2*w,m&&(m.attr({start:f,end:f}),g=k.start,k=k.end,d?m.animateWith(d,e,{cx:g-f,cy:k-f},b,"ease-in"):(e=la.animation({cx:g-f,cy:k-f},b,"ease-in",l),d=m.animate(e)))},placeDataLabels:function(){var a=
function(a,b){return a.point.value-b.point.value},b=function(a,b){return a.angle-b.angle},c=["start","start","end","end"],d=[-1,1,1,-1],e=[1,1,-1,-1];return function(n,g){var u=this.datasets[0],w=this.smartLabel,r=this.options.plotOptions.series.dataLabels,s=r.style,l=k(G(parseFloat(s.lineHeight)),12),$=Ga(r.placeInside,!1),z=r.skipOverlapLabels,W=r.manageLabelOverflow,x=r.connectorPadding,pa=r.connectorWidth,A,C,P=0<r.distance,B=u.center,oa=B[1],ca=B[0],N=B[2],D=B[4],H=[[],[],[],[]],J,ba,ga,I=this.canvasLeft,
Q=this.canvasTop,S=this.canvasWidth,R,aa,L,M,Y,E,F,K,ia,ja,ha,fa=u.labelsRadius,la=v(100*u.labelsRadiusY)/100,ma=u.labelFontSize,ka=ma,da=ka/2,x=[x,x,-x,-x],qa=u.maxLabels,na=u.isSmartLineSlanted,Ja=u.enableSmartLabels,za,u=u.pieSliceDepth/2;n||w.setStyle(s);if(1==g.length)M=g[0],za=M.dataLabel,M.slicedTranslation=[I,Q],za&&(za.attr({visibility:h,"text-anchor":"middle",x:ca,y:oa+da-2}),za.x=ca);else if($)xa(g,function(a){if(za=a.dataLabel){ha=a.angle;ja=oa+B[6]*V(ha)+da-2;F=ca+B[5]*O(ha);za.x=F;za._x=
F;za.y=ja;if(a.sliced){a=a.slicedTranslation;var b=a[1]-Q;F+=a[0]-I;ja+=b}za.attr({visibility:h,align:"middle",x:F,y:ja})}});else{xa(g,function(a){if(za=a.dataLabel)ha=a.angle,0>ha&&(ha=U+ha),J=0<=ha&&ha<Xa?1:ha<y?2:ha<Ea?3:0,H[J].push({point:a,angle:ha})});for(ga=$=4;ga--;){if(z&&(M=H[ga].length-qa,0<M))for(H[ga].sort(a),ba=H[ga].splice(0,M),aa=0,L=ba.length;aa<L;aa+=1)M=ba[aa].point,M.dataLabel.attr({visibility:"hidden"}),M.connector&&M.connector.attr({visibility:"hidden"});H[ga].sort(b)}ga=m(H[0].length,
H[1].length,H[2].length,H[3].length);la=m(Z(ga,qa)*ka,la+ka);H[1].reverse();H[3].reverse();for(w.setStyle(s);$--;){aa=H[$];L=aa.length;z||(ka=L>qa?la/L:ma,da=ka/2);M=L*ka;s=la;for(ga=0;ga<L;ga+=1,M-=ka)C=X(la*V(aa[ga].angle)),s<C?C=s:C<M&&(C=M),s=(aa[ga].oriY=C)-ka;ba=c[$];L=la-(L-1)*ka;s=0;for(ga=aa.length-1;0<=ga;ga-=1,L+=ka)M=aa[ga].point,ha=aa[ga].angle,Y=M.sliced,za=M.dataLabel,C=X(la*V(ha)),C<s?C=s:C>L&&(C=L),s=C+ka,K=(C+aa[ga].oriY)/2,C=ca+e[$]*fa*O(f.asin(K/la)),K*=d[$],K+=oa,ia=oa+D*V(ha),
E=ca+N*O(ha),(2>$&&C<E||1<$&&C>E)&&(C=E),F=C+x[$],ja=K+da-2,A=F+x[$],za.x=A,za._x=A,W&&(R=1<$?A-this.canvasLeft:this.canvasLeft+S-A,w.setStyle(M.style),l=k(G(parseFloat(M.style.lineHeight)),12)+2*G(parseFloat(M.style.border),12),l=w.getSmartText(M.labelText,R,l),za.attr({text:l.text,title:l.tooltext||""})),ha<y&&(K+=u,ia+=u,ja+=u),za.y=ja,Y&&(l=M.transX,Y=M.transY,F+=l,C+=l,E+=l,ia+=Y,A+=l),za.attr({visibility:h,"text-anchor":ba,x:A,y:K}),P&&pa&&Ja&&(A=M.connector,M.connectorPath=C=["M",E,ia,"L",
na?C:E,K,F,K],A?(A.attr({path:C}),A.attr("visibility",h)):M.connector=A=this.paper.path(C).attr({"stroke-width":pa,stroke:r.connectorColor||"#606060",visibility:h}))}}}}()},n["renderer.piebase"]);n("renderer.pie",{drawDoughnutCenterLabel:function(a,b,c,d,e,f,k){var m=this.options.series[0];f=f||m.lastCenterLabelConfig;var n=this.paper,g=this.smartLabel,O=this.layers.dataset,l=this.elements,V=f.padding,y=2*f.textPadding,v={fontFamily:f.font,fontSize:f.fontSize+"px",lineHeight:1.2*f.fontSize+"px",fontWeight:f.bold?
"bold":"",fontStyle:f.italic?"italic":""},x=1.414*(.5*d-V)-y;e=1.414*(.5*e-V)-y;var u;g.setStyle(v);g=g.getSmartText(a,x,e);(e=l.doughnutCenterLabel)?(e.attr("text")!==a&&this.centerLabelChange(a),u=l.centerLabelOvalBg):(f.bgOval&&(l.centerLabelOvalBg=u=n.circle(b,c,.5*d-V,O)),e=l.doughnutCenterLabel=n.text(O).hover(this.centerLabelRollover,this.centerLabelRollout).click(this.centerLabelClick),e.chart=this);a?(e.css(v).attr({x:b,y:c,text:g.text,visibility:h,title:f.toolText?"":g.tooltext||"",fill:C({FCcolor:{color:f.color,
alpha:f.alpha}}),"text-bound":f.bgOval?"none":[C({FCcolor:{color:f.bgColor,alpha:f.bgAlpha}}),C({FCcolor:{color:f.borderColor,alpha:f.borderAlpha}}),f.borderThickness,f.textPadding,f.borderRadius]}).tooltip(f.toolText),f.bgOval&&u&&u.attr({visibility:h,fill:Za(f.bgColor),"fill-opacity":f.bgAlpha/100,stroke:Za(f.borderColor),"stroke-width":f.borderThickness,"stroke-opacity":f.borderAlpha/100})):(e.attr("visibility","hidden"),u&&u.attr("visibility","hidden"));k&&(m.lastCenterLabelConfig=f)},centerLabelRollover:function(){var a=
this.chart,b=a.fusionCharts,c=a.options.series[0].lastCenterLabelConfig,b={height:b.args.height,width:b.args.width,pixelHeight:b.ref.offsetHeight,pixelWidth:b.ref.offsetWidth,id:b.args.id,renderer:b.args.renderer,container:b.options.containerElement,centerLabelText:c&&c.label};this.attr("text")&&qa.raiseEvent("centerLabelRollover",b,a.logic.chartInstance,this,a.hoverOnCenterLabel)},centerLabelRollout:function(){var a=this.chart,b=a.fusionCharts,c=a.options.series[0].lastCenterLabelConfig,b={height:b.args.height,
width:b.args.width,pixelHeight:b.ref.offsetHeight,pixelWidth:b.ref.offsetWidth,id:b.args.id,renderer:b.args.renderer,container:b.options.containerElement,centerLabelText:c&&c.label};this.attr("text")&&qa.raiseEvent("centerLabelRollout",b,a.logic.chartInstance,this,a.hoverOffCenterLabel)},centerLabelClick:function(){var a=this.chart,b=a.fusionCharts,c=a.options.series[0].lastCenterLabelConfig,b={height:b.args.height,width:b.args.width,pixelHeight:b.ref.offsetHeight,pixelWidth:b.ref.offsetWidth,id:b.args.id,
renderer:b.args.renderer,container:b.options.containerElement,centerLabelText:c&&c.label};this.attr("text")&&qa.raiseEvent("centerLabelClick",b,a.logic.chartInstance)},centerLabelChange:function(a){var b=this.fusionCharts;qa.raiseEvent("centerLabelChanged",{height:b.args.height,width:b.args.width,pixelHeight:b.ref.offsetHeight,pixelWidth:b.ref.offsetWidth,id:b.args.id,renderer:b.args.renderer,container:b.options.containerElement,centerLabelText:a},this.logic.chartInstance)},hoverOnCenterLabel:function(){var a=
this.chart.options.series[0].lastCenterLabelConfig;(a.hoverColor||a.hoverAlpha)&&this.attr({fill:C({FCcolor:{color:a.hoverColor||a.color,alpha:a.hoverAlpha||a.alpha}})})},hoverOffCenterLabel:function(){var a=this.chart.options.series[0].lastCenterLabelConfig;(a.hoverColor||a.hoverAlpha)&&this.attr({fill:C({FCcolor:{color:a.color,alpha:a.alpha}})})},drawPlotPie:function(a,b){var c=this,d=a.items,e=a.data,f=c.options,m=f.series[0],n=f.plotOptions,g=n.pie,r=n.series,v=c.layers,l=v.dataset,u=c.elements.plots[0],
n=n.series.dataLabels,w=r.dataLabels.style,s=r.shadow,r=k(a.moveDuration,r.animation.duration),x=c.paper,G=f.tooltip||{},G=G&&!1!==G.enabled,A=((b.startAngle*=-y/180)||0)%U,$=g.slicedOffset,X=b.valueTotal,B=U/X,Z=c.canvasLeft+.5*c.canvasWidth,z=c.canvasTop+.5*c.canvasHeight,N=.5*g.size,g=.5*(g.innerSize||0),D=c.plotGraphicClick,H=c.plotDragMove,J=c.plotDragStart,W=c.plotDragEnd,pa=c.plotMouseDown,I=c.plotMouseUp,Q=c.plotRollOver,S=c.plotRollOut,R=!!c.datasets[0].enableRotation,oa=e.length,f=f.chart.usePerPointLabelColor,
aa=m.centerLabelConfig,M=aa.label,Y={fontFamily:w.fontFamily,fontSize:w.fontSize,lineHeight:w.lineHeight,fontWeight:w.fontWeight,fontStyle:w.fontStyle},E,F,K,L,ca,ba,ia,ha,ja,ka,fa=a.shadowGroup,ma,da,Ea,qa,na,Ja=function(a){return function(){c.legendClick(a,!0,!1)}},ra=function(a){return function(){return c.getEventArgs(a)}},Na=function(){c.disposed||c.disposing||c.paper.ca.redrawDataLabels||(c.placeDataLabels(!1,d,a),c.paper.ca.redrawDataLabels=c.redrawDataLabels)};e&&oa||(e=[]);fa||(fa=a.shadowGroup=
x.group(l).toBack());u.singletonCase=1===oa;u.chartPosition||(u.chartPosition=Aa(c.container));u.pieCenter=[Z,z];u.timerThreshold=30;ja=ha=A;for(ma=oa;ma--;)F=e[ma],Y=F.y,K=F.displayValue,ca=F.sliced,w=F.toolText,ba=(L=!!F.link)||R||!F.doNotSlice,null!==Y&&void 0!==Y&&(E=F.color.FCcolor,E.r=N,E.cx=Z,E.cy=z,F.rolloverProperties&&(E=F.rolloverProperties.color.FCcolor,E.r=N,E.cx=Z,E.cy=z),ja=ha,ha-=u.singletonCase?U:Y*B,ia=.5*(ha+ja),r?qa=na=A:(qa=ha,na=ja),(E=d[ma])||(b.data[ma].plot=E=d[ma]={chart:c,
index:ma,seriesData:u,value:Y,angle:ia,slicedX:O(ia)*$,slicedY:V(ia)*$,sliced:ca,labelText:K,toolText:w,label:F.name,link:F.link,percentage:X?Y*X/100:0,originalIndex:oa-ma-1,style:F.style,color:F.color,borderColor:F.borderColor,borderWidth:F.borderWidth,rolloverProperties:F.rolloverProperties,center:[Z,z],innerDiameter:2*g,centerLabelConfig:F.centerLabelConfig,graphic:x.ringpath(Z,z,N,g,qa,na,v.dataset).attr({"stroke-width":F.borderWidth,"stroke-linejoin":"round",stroke:F.borderColor,fill:C(F.color),
"stroke-dasharray":F.dashStyle,redrawDataLabels:A,ishot:ba,cursor:L?"pointer":""}).shadow(s&&F.shadow,fa).drag(H,J,W).mousedown(pa).mouseup(I).hover(Q,S)},E.graphic.click(D),G&&E.graphic.tooltip(w),b.data[ma].legendClick=Ja(E),b.data[ma].getEventArgs=ra(E),E.graphic.data("plotItem",E),L={index:b.reversePlotOrder?ma:oa-1-ma,link:F.link,value:F.y,displayValue:F.displayValue,categoryLabel:F.categoryLabel,isSliced:F.sliced,toolText:F.toolText},E.graphic.data("eventArgs",L),void 0!==K&&(w=F.style,Y={fontFamily:w.fontFamily,
fontSize:w.fontSize,lineHeight:w.lineHeight,fontWeight:w.fontWeight,fontStyle:w.fontStyle},E.dataLabel=x.text(l).css(Y).attr({text:K,fill:(f?C(F.color):w.color)||"#000000","text-bound":[w.backgroundColor,w.borderColor,w.borderThickness,w.borderPadding,w.borderRadius,w.borderDash],ishot:ba,visibility:"hidden"}).click(D).drag(H,J,W).mousedown(pa).mouseup(I).hover(Q,S).data("eventArgs",L).hide(),E.dataLabel.data("plotItem",E),0<n.distance&&(ka=n.connectorWidth)&&n.enableSmartLabels&&(E.connector=x.path("M 0 0 l 0 0",
l).attr({"stroke-width":ka,stroke:n.connectorColor||"#606060",visibility:h,ishot:!0}).click(D).data("eventArgs",L).drag(H,J,W).mousedown(pa).mouseup(I).hover(Q,S),E.connector.data("plotItem",E)))),E.angle=ia,E.transX=O(ia)*$,E.transY=V(ia)*$,E.slicedTranslation="t"+O(ia)*$+","+V(ia)*$,r?da?E.graphic.animateWith(da,Ea,{ringpath:[Z,z,N,g,ha,ja],transform:E.sliced?E.slicedTranslation:""},r,"easeIn"):(Ea=la.animation({ringpath:[Z,z,N,g,ha,ja],redrawDataLabels:c,transform:E.sliced?E.slicedTranslation:
""},r,"easeIn",Na),da=E.graphic.animate(Ea)):E.graphic.attr({transform:E.sliced?E.slicedTranslation:""}));M&&g&&c.drawDoughnutCenterLabel(M,Z,z,2*g,2*g,aa,!0);m.lastCenterLabelConfig=aa;r?m.doughnutCenterLabel&&m.doughnutCenterLabel.attr({"fill-opacity":0}).animate(la.animation({"fill-opacity":100},100).delay(100<r?r-100:0)):c.placeDataLabels(!1,d,a)},rotate:function(a,b){var c=a.items,d=a.data,e=this.options.plotOptions.pie,f=e.slicedOffset,h=U/b.valueTotal,m=this.canvasLeft+.5*this.canvasWidth,
k=this.canvasTop+.5*this.canvasHeight,n=.5*e.size,e=.5*(e.innerSize||0),g,l,u,w,v;u=(b.startAngle||0)%U;for(v=d.length;v--;)g=d[v],l=g.y,null!==l&&void 0!==l&&(g=c[v],w=u,u-=g.seriesData.singletonCase?U:l*h,l=.5*(u+w),g.angle=l,g.transX=O(l)*f,g.transY=V(l)*f,g.slicedTranslation="t"+O(l)*f+","+V(l)*f,g.graphic.attr({ringpath:[m,k,n,e,u,w],transform:g.sliced?g.slicedTranslation:""}));this.placeDataLabels(!0,c,a)}},n["renderer.piebase"])},[3,2,2,"sr4"]]);
FusionCharts.register("module",["private","modules.renderer.js-zoomline",function(){var Aa=this,na=Aa.hcLib,fa=Aa.window,La=/msie/i.test(fa.navigator.userAgent)&&!fa.opera,Oa=na.chartAPI,Ma=na.chartAPI,qa=na.extend2,z=na.raiseEvent,la=na.pluck,s=na.pluckNumber,Ia=na.getFirstColor,L=na.graphics.convertColor,Va=na.bindSelectionEvent,g=na.createTrendLine,wa=na.parseUnsafeString,Fa=na.regescape,k=na.Raphael,Ga=na.hasTouch,Wa=na.getMouseCoordinate,ka=na.FC_CONFIG_STRING,ta="rgba(192,192,192,"+(La?.002:
1E-6)+")",ua=fa.Math,Da=ua.ceil,C=ua.floor,Pa=ua.max,Ta=ua.min,da=ua.cos,xa=ua.sin,ya=fa.parseFloat,Qa=fa.parseInt,sa;qa(na.eventList,{zoomed:"FC_Zoomed",pinned:"FC_Pinned",resetzoomchart:"FC_ResetZoomChart"});Oa("zoomline",{friendlyName:"Zoomable and Panable Multi-series Line Chart",rendererId:"zoomline",standaloneInit:!0,hasVDivLine:!0,defaultSeriesType:"stepzoom",canvasborderthickness:1,defaultPlotShadow:1,chart:function(){var b=this.base.chart.apply(this,arguments),e=b[ka],h=this.dataObj.chart,
f=this.colorManager.getColor("canvasBorderColor");qa(b.chart,{animation:!1,zoomType:"x",canvasPadding:s(h.canvaspadding,0),scrollColor:Ia(la(h.scrollcolor,this.colorManager.getColor("altHGridColor"))),scrollShowButtons:!!s(h.scrollshowbuttons,1),scrollHeight:s(h.scrollheight,16)||16,scrollBarFlat:e.flatScrollBars,allowPinMode:s(h.allowpinmode,1),skipOverlapPoints:s(h.skipoverlappoints,1),showToolBarButtonTooltext:s(h.showtoolbarbuttontooltext,1),btnResetChartTooltext:la(h.btnresetcharttooltext,"Reset Chart"),
btnZoomOutTooltext:la(h.btnzoomouttooltext,"Zoom out one level"),btnSwitchToZoomModeTooltext:la(h.btnswitchtozoommodetooltext,"<strong>Switch to Zoom Mode</strong><br/>Select a subset of data to zoom into it for detailed view"),btnSwitchToPinModeTooltext:la(h.btnswitchtopinmodetooltext,"<strong>Switch to Pin Mode</strong><br/>Select a subset of data and compare with the rest of the view"),pinPaneFill:L(la(h.pinpanebgcolor,f),s(h.pinpanebgalpha,15)),zoomPaneFill:L(la(h.zoompanebgcolor,"#b9d5f1"),s(h.zoompanebgalpha,
30)),zoomPaneStroke:L(la(h.zoompanebordercolor,"#3399ff"),s(h.zoompaneborderalpha,80)),crossline:{enabled:s(h.showcrossline,1),line:{"stroke-width":s(h.crosslinethickness,1),stroke:Ia(la(h.crosslinecolor,"#000000")),"stroke-opacity":s(h.crosslinealpha,20)/100},labelEnabled:s(h.showcrosslinelabel,h.showcrossline,1),labelstyle:{fontSize:ya(h.crosslinelabelsize)?ya(h.crosslinelabelsize)+"px":e.outCanvasStyle.fontSize,fontFamily:la(h.crosslinelabelfont,e.outCanvasStyle.fontFamily)},valueEnabled:s(h.showcrosslinevalues,
h.showcrossline,1),valuestyle:{fontSize:ya(h.crosslinevaluesize)?ya(h.crosslinevaluesize)+"px":e.inCanvasStyle.fontSize,fontFamily:la(h.crosslinevaluefont,e.inCanvasStyle.fontFamily)}},useCrossline:s(h.usecrossline,1),tooltipSepChar:la(h.tooltipsepchar,", ")});return b},preSeriesAddition:function(){var b=this.dataObj,e=b.chart,h=this.hcJSON,f=h[ka],k=this.smartLabel,g=s(e.compactdatamode,0),$=la(e.dataseparator,"|"),v=s(e.showlabels,1),Z=e.labeldisplay&&e.labeldisplay.toLowerCase(),m=v&&s(e.labelheight),
X="rotate"===Z?270:s(e.rotatelabels,1)?270:0,w=h.xAxis.labels.style,G=ya(w.lineHeight),u=h.chart.labelPadding=s(e.labelpadding,.2*G)+h.chart.plotBorderWidth,z,C,W,y=0,L=-1,U,da,ma;0>m&&(m=void 0);0>u&&(u=(h.chart.plotBorderWidth||0)+2);z=(z=b.categories)&&z[0]||{};b=z.category;delete z.category;h.categories=Z=qa({data:C=g&&b&&b.split&&b.split($)||b||[],rotate:X,wrap:"none"!==Z},z);void 0!==b&&(z.category=b);z=C.length||0;if(U=!g&&v&&0!==m&&z||0){for(;U--;)C[U]=C[U]&&(W=C[U].label||"")&&((da=W.length)>
y&&(y=da,L=U,W)||W)||"";y&&(W=C[L])}else if(g&&z&&!m)if(X){g=fa.document.createElement("div");m=fa.document.createElement("span");g.setAttribute("class","fusioncharts-zoomline-localsmartlabel");g.style.cssText="display:block;width:1px;position:absolute;";for(ma in w)g.style[ma]=w[ma];m.innerHTML=b.replace(/\s*/g,"").replace(/\{br\}/ig,"<br />").replace(new RegExp(Fa($),"g")," ");g.appendChild(m);fa.document.body.appendChild(g);m=m.offsetWidth||void 0;g.parentNode.removeChild(g)}else W=C[z-1]||C[0];
void 0!==m&&0!==m||!v||(W?(k.setStyle(w),W=k.getSmartText(W),m=X?W.width:W.height):m=G*(X&&3||1));m>.3*f.height&&(m=.3*f.height);Z.labelHeight=m&&m+6||0;Z.show=m&&v||0;Z.css=qa({},w);X?(Z.css.rotation=X,Z.css["text-anchor"]="end"):Z.css["vertical-align"]="top";h.xAxis.min=0;h.xAxis.max=z&&z-1||0;m+=s(e.scrollheight,16)||16;h.chart.marginBottom+=u;f.marginBottomExtraSpace+=m;la(e.caption,e.subcaption)||(f.marginTopExtraSpace+=16)},series:function(){var b=this.dataObj,e=b.chart,h=b.dataset,f=this.hcJSON,
k=f[ka],O=k[0],$=f.series,v=s(e.yaxismaxvalue),Z=s(e.yaxisminvalue),m=s(e.forceyaxislimits,0),z=s(e.compactdatamode,0),w=la(e.dataseparator,"|"),G=Fa(e.indecimalseparator),u=Fa(e.inthousandseparator),C=s(e.drawanchors,e.showanchors,1),L=!!s(e.showlegend,1),W,y,fa,U,da,ma=Infinity,ca=-Infinity,aa;da=f.categories.data.length;if(h&&h.length&&da){G&&(G=new RegExp(G,"g"));u&&(u=new RegExp(u,"g"));!u&&!G&&z&&m&&void 0!==v&&void 0!==Z?(m=!0,ca=Pa(v,Z),ma=Ta(Z,v)):m=!1;v=0;for(Z=h.length;v<Z;v++){W=h[v];
fa=W.data;delete W.data;z?(U=fa||"",u&&(U=U.replace(u,"")),G&&(U=U.replace(G,".")),U=U.split(w)):U=fa||[];U.length>da&&(U.length=da);aa=U.length;if(z){if(!m)for(;aa--;)y=ya(U[aa]),isNaN(y)&&(y=void 0),y>ca&&(ca=y),y<=ma&&(ma=y),U[aa]=y}else for(;aa--;)y=U[aa]&&U[aa].value||"",u&&(y=y.replace(u,"")),G&&(y=y.replace(G,".")),y=ya(y),isNaN(y)&&(y=void 0),y>ca&&(ca=y),y<=ma&&(ma=y),U[aa]=y;$.push(y={index:v,type:"zoomline",data:U,name:W.seriesname||"",showInLegend:W.seriesname&&s(W.includeinlegend,1)&&
L||!1,showAnchors:s(W.drawanchors,W.showanchors,C),visible:!s(W.initiallyhidden,0),lineWidth:2});U.length=da;void 0!==fa&&(W.data=fa);y.attrs=this.seriesGraphicsAttrs(W);W=y.attrs.anchors;y.color=y.attrs.graphics.stroke;y.ancorRadius=W.r+W["stroke-width"]/2;y.marker={fillColor:W.fill,lineColor:W.stroke,lineWidth:1,symbol:"circle"}}-Infinity!==ca&&Infinity!==ma||(ca=ma=void 0);m=Qa(s(e.displaystartindex,1),10)-1;w=Qa(s(e.displayendindex,da||2),10)-1;1>(h=s(e.pixelsperpoint,15))&&(h=1);($=s(e.pixelsperlabel,
e.xaxisminlabelwidth,f.categories.rotate?20:60))<h&&($=h);(0>m||m>=(da-1||1))&&(m=0);(w<=m||w>(da-1||1))&&(w=da-1||1);f.stepZoom={cnd:s(e.connectnulldata,0),amrd:s(e.anchorminrenderdistance,20),nvl:s(e.numvisiblelabels,0),cdm:z,oppp:h,oppl:$,dsi:m,dei:w,vdl:w-m,dmax:O.max=ca,dmin:O.min=ma,clen:da,offset:0,step:1,llen:0,alen:0,ddsi:m,ddei:w,ppc:0};this.configureAxis(f,b);b.trendlines&&g(b.trendlines,f.yAxis,k,!1,this.isBar)}},seriesGraphicsAttrs:function(b){var e=this.dataObj.chart,h="0"!=(b.dashed||
e.linedashed||"0"),f,g,h={"stroke-width":s(b.linethickness,e.linethickness,2),stroke:Ia(la(b.color,e.linecolor,this.colorManager.getPlotColor())),"stroke-opacity":s(b.alpha,e.linealpha,100)/100,"stroke-dasharray":h?[s(b.linedashlen,e.linedashlen,5),s(b.linedashgap,e.linedashgap,4)]:"none","stroke-linejoin":"round","stroke-linecap":"round"};f=qa({},h);g=h["stroke-width"]+s(e.pinlinethicknessdelta,1);f["stroke-width"]=0<g&&g||0;f["stroke-dasharray"]=[3,2];return{graphics:h,pin:f,shadow:{opacity:h["stroke-opacity"],
apply:s(e.showshadow,+!k.vml)},anchors:{"stroke-linejoin":"round","stroke-linecap":"round",r:s(b.anchorradius,e.anchorradius,h["stroke-width"]+2),stroke:Ia(la(b.anchorbordercolor,e.anchorbordercolor,h.stroke)),"stroke-opacity":s(b.anchorborderalpha,e.anchorborderalpha,100)/100,"stroke-width":s(b.anchorborderthickness,e.anchorborderthickness,h["stroke-width"]),fill:Ia(la(b.anchorbgcolor,e.anchorbgcolor,"#ffffff")),"fill-opacity":s(b.anchorbgalpha,e.anchorbgalpha,100)/100,opacity:s(b.anchoralpha,e.anchoralpha,
100)/100},anchorShadow:s(e.anchorshadow,e.showshadow,+!k.vml)&&{apply:!0,opacity:s(b.anchoralpha,e.anchoralpha,100)/100}}},eiMethods:{zoomOut:function(){var b=this.jsVars,e;if(b&&(e=b.hcObj))return e.zoomOut&&b.hcObj.zoomOut()},zoomTo:function(b,e){var h=this.jsVars,f;if(h&&(f=h.hcObj))return f.zoomRange&&h.hcObj.zoomRange(b,e)},resetChart:function(){var b=this.jsVars,e;b&&(e=b.hcObj)&&(e.pinRangePixels&&b.hcObj.pinRangePixels(),e.resetZoom&&b.hcObj.resetZoom())},setZoomMode:function(b){var e=this.jsVars,
h;e&&(h=e.hcObj)&&h.activatePin&&h.activatePin(!b)},getViewStartIndex:function(){var b=this.jsVars,e;if(b&&b.hcObj&&(e=b.hcObj._zoominfo))return e.ddsi},getViewEndIndex:function(){var b=this.jsVars,e;if(b&&b.hcObj&&(e=b.hcObj._zoominfo))return b=e.ddei-1,(b>=e.clen?e.clen:b)-1}}},Oa.msline);Ma("renderer.zoomline",{resetZoom:function(){var b=this._zoomhistory,e=this.options.stepZoom;if(!b.length)return!1;b.length=0;this.zoomTo(e.dsi,e.dei)&&z("zoomReset",this._zoomargs,this.fusionCharts,[this.fusionCharts.id]);
return!0},zoomOut:function(){var b=this._zoomhistory.pop(),e=this.options.stepZoom,h,f,k;b?(h=b.dsi,f=b.dei):this._prezoomed&&(h=0,f=e.clen-1);(k=this.zoomTo(h,f))&&Aa.raiseEvent("zoomedout",k,this.fusionCharts);return!0},zoomRangePixels:function(b,e){var h=this._zoomhistory,f=this._zoominfo,k=f.ppp,f=f.ddsi,g;h.push(this._zoominfo);(g=this.zoomTo(f+C(b/k),f+C(e/k)))?Aa.raiseEvent("zoomedin",g,this.fusionCharts):h.pop()},zoomRange:function(b,e){var h=this._zoomhistory,f;h.push(this._zoominfo);(f=
this.zoomTo(+b,+e))?Aa.raiseEvent("zoomedin",f,this.fusionCharts):h.pop()},zoomTo:function(b,e){var h=this.xlabels.data,f=this._zoominfo,k=this._zoomhistory,g=f.clen;0>b&&(b=0);b>=g-1&&(b=g-1);e<=b&&(e=b+1);e>g-1&&(e=g-1);if(b===e||b===f.dsi&&e===f.dei)return!1;this.pinRangePixels();f=qa({},f);f.dsi=b;f.dei=e;f=this._zoominfo=f;this.updatePlotZoomline();this.zoomOutButton[f.vdl===f.clen-1?"hide":"show"]();this.resetButton[k.length?"show":"hide"]();this.elements.zoomscroller.attr({"scroll-ratio":f.vdl/
(g-!!g),"scroll-position":[f.dsi/(g-f.vdl-1),!0]});h={level:k.length+1,startIndex:b,startLabel:h[b],endIndex:e,endLabel:h[e]};z("zoomed",h,this.fusionCharts,[this.fusionCharts.id,b,e,h.startLabel,h.endLabel,h.level]);return h},activatePin:function(b){var e=this._zoominfo,h=this.options.chart,f=this.pinButton;if(f&&e.pinned^(b=!!b))return b||this.pinRangePixels(),z("zoomModeChanged",{pinModeActive:b},this.fusionCharts,[]),h.showToolBarButtonTooltext&&f.tooltip(h[b&&"btnSwitchToZoomModeTooltext"||"btnSwitchToPinModeTooltext"]||
""),f.attr("button-active",b),e.pinned=b},pinRangePixels:function(b,e){var h=this.paper,f=this.elements,k=this.xlabels.data,g=this._zoominfo,s=this.layers.zoompin,v=f.pinrect,Z=f["clip-pinrect"],m=this._pingrouptransform,X=this.plots,w=e-b,G,u;if(g&&s&&v){if(b===e)return s.hide(),f.pintracker.hide(),this.pinButton.attr("button-active",!1),g.pinned=!1;for(u=X.length;u--;)v=X[u],G=v.pinline,G||(G=v.pinline=h.path(void 0,s).attr(v.attrPin)),G.attr("path",v.graphic.attrs.path);Z[0]=b+this.canvasLeft;
Z[2]=w;s.attr({"clip-rect":Z,transform:m}).show();f.pintracker.__pindragdelta=0;f.pintracker.show().attr({transform:m,x:b,width:w});b=this.getValuePixel(b);e=this.getValuePixel(e);z("pinned",{startIndex:b,endIndex:e,startLabel:k[b],endLabel:k[e]},this.fusionCharts,[this.fusionCharts.id,b,e,k[b],k[e]]);return g.pinned=!0}},getValuePixel:function(b){var e=this._zoominfo;return e.ddsi+C(b/e.ppp)},getParsedLabel:function(b){var e=this.xlabels;return e.parsed[b]||(e.parsed[b]=wa(e.data[b]||""))},drawGraph:function(){var b=
this,e=b.paper,h=b.canvasLeft,f=b.canvasTop,g=b.canvasWidth,O=b.canvasHeight,s=b.options,v=s.chart,z=v.plotBorderWidth,m=v.useRoundEdges,X=v.showToolBarButtonTooltext,w=v.crossline,G=b.layers,u=b.toolbar,C=b.elements,L=v.allowPinMode,W=s.categories,y=!1,da,U,fa,ma,ca,aa,ka;aa=b._zoominfo=qa({},s.stepZoom);b._zoomhistory=[];aa.clen&&(y=b._prezoomed=aa.dei-aa.dsi<aa.clen-1,ca=b._visw=b.canvasWidth-2*v.canvasPadding,ma=b._visx=b.canvasLeft+v.canvasPadding,b._visout=-(b.chartHeight+b.canvasHeight+1E3),
b.base.drawGraph.apply(b,arguments),b._ypvr=b.yAxis[0]&&b.yAxis[0].pixelValueRatio||0,ka=b._ymin||(b._ymin=b.yAxis[0].endY),b._yminValue=b.yAxis[0].min,s=G.dataset.attr("clip-rect",[b._visx,b.canvasTop,b._visw,b.canvasHeight]),fa=G.scroll||(G.scroll=e.group("scroll").insertAfter(G.layerAboveDataset)),b.xlabels=[],b.xlabels.show=W.show,b.xlabels.height=W.labelHeight,b.xlabels.wrap=W.wrap,b.xlabels.rotate=W.rotate,b.xlabels.data=W.data||[],b.xlabels.parsed=[],b.xlabels.css=W.css,b.xlabels.group=e.group("zoomline-plot-xlabels",
G.datalabels),G.datalabels.transform(["T",ma,f+O+v.scrollHeight+v.labelPadding]),b._lcmd=W.rotate?"y":"x",L&&(L=k.crispBound(0,f-ka,0,O,z),da=C["clip-pinrect"]=[L.x,f,L.width,L.height],U=G.zoompin=e.group("zoompin").insertBefore(s).transform(b._pingrouptransform=["T",ma,ka]).hide(),C.pinrect=e.rect(0,f-ka,b._visw,O,G.zoompin).attr({"stroke-width":0,stroke:"none",fill:v.pinPaneFill,"shape-rendering":"crisp",ishot:!0}),C.pintracker=e.rect(G.tracker).attr({transform:U.transform(),x:0,y:f-ka,width:0,
height:O,stroke:"none",fill:ta,ishot:!0,cursor:k.svg&&"ew-resize"||"e-resize"}).drag(function(b){var e=ma+b+this.__pindragdelta,f=this.__pinboundleft,h=this.__pinboundright,g=this.data("cliprect").slice(0);e<f?e=f:e>h&&(e=h);U.transform(["T",e,ka]);C.pintracker.transform(U.transform());k.svg||(g[0]=g[0]+e-ma-this.__pindragdelta,U.attr("clip-rect",g));this.__pindragoffset=b},function(){this.__pinboundleft=0-da[0]+ma+h;this.__pinboundright=this.__pinboundleft+ca-da[2];this.data("cliprect",U.attr("clip-rect"));
U._.clipispath=!0},function(){U._.clipispath=!1;this.__pindragdelta=this.__pindragoffset;delete this.__pindragoffset;delete this.__pinboundleft;delete this.__pinboundright}),b.pinButton=u.add("pinModeIcon",function(){b.activatePin(!b._zoominfo.pinned)},{tooltip:X&&v.btnSwitchToPinModeTooltext||""})),z++,L=k.crispBound(h-z,f+O+z,g+z+z,v.scrollHeight,z),z--,C.zoomscroller=e.scroller(L.x+(m&&-1||z%2),L.y-(m&&4||2),L.width-(!m&&2||0),L.height,!0,{showButtons:v.scrollShowButtons,scrollRatio:aa.vdl/(aa.clen-
!!aa.clen),scrollPosition:[aa.dsi/(aa.clen-aa.vdl-1),!1],displayStyleFlat:v.scrollBarFlat},fa).attr({fill:v.scrollColor,r:m&&2||0}).scroll(b.updatePlotZoomline,b),m&&C.zoomscroller.shadow(!0),function(){var e;k.eve.on("raphael.scroll.start."+C.zoomscroller.id,function(f){e=f;b.crossline&&b.crossline.disable(!0);Aa.raiseEvent("scrollstart",{scrollPosition:f},b.logic.chartInstance)});k.eve.on("raphael.scroll.end."+C.zoomscroller.id,function(f){b.crossline&&b.crossline.disable(!1);Aa.raiseEvent("scrollend",
{prevScrollPosition:e,scrollPosition:f},b.logic.chartInstance)})}(),Va(b,{attr:{stroke:v.zoomPaneStroke,fill:v.zoomPaneFill,strokeWidth:0},selectionStart:function(){},selectionEnd:function(e){var f=e.selectionLeft-h;e=f+e.selectionWidth;b.crossline&&b.crossline.hide();b[b._zoominfo.pinned?"pinRangePixels":"zoomRangePixels"](f,e)}}),b.zoomOutButton=u.add("zoomOutIcon",function(){b.zoomOut()},{tooltip:X&&v.btnZoomOutTooltext||""})[y&&"show"||"hide"](),b.resetButton=u.add("resetIcon",function(){b.resetZoom()},
{tooltip:X&&v.btnResetChartTooltext||""}).hide(),L=b.resetButton.attr("fill"),L[2]="rgba(255,255,255,0)",b.resetButton.attr("fill",[L[0],L[1],L[2],L[3]]),w&&0!==w.enabled&&1===v.useCrossline&&(b.crossline=new sa(b,w)),b.updatePlotZoomline())},drawPlotZoomline:function(b,e){var h=this.paper,f=e.attrs,k=e.visible,g=k?"show":"hide",s=this.layers.dataset,v=b.group||(b.group=h.group("plot-zoomline-dataset",s)),s=b.anchorGroup||(b.anchorGroup=h.group("plot-zoomline-anchors",s)),h=b.graphic||(b.graphic=
h.path(void 0,v)),z=["T",this._visx,this._ymin||(this._ymin=this.yAxis[0].endY)];v.transform(z)[g]();s.transform(z)[g]();b.graphic=h.attr(f.graphics).shadow(f.shadow);b.attrPin=f.pin;b.visible=k;b.anchors=[];b.anchors.show=e.showAnchors;b.anchors.attrs=f.anchors;b.anchors.attrsShadow=f.anchorShadow;b.anchors.left=-(f.anchors.r+.5*f.anchors["stroke-width"]);b.anchors.right=this._visw-b.anchors.right},updatePlotZoomline:function(b,e){var h=this.paper,f=this._ypvr,k=this._visw,g=this.xlabels,s=g.css,
v=g.group,z=this.plots,m,C,w,G,u,L,da;!e&&(e=this._zoominfo);w=e.oppp;G=e.vdl=e.dei-e.dsi;u=e.ppl=e.nvl?k/e.nvl:e.oppl;k=e.step=(C=e.ppp=k/G)<w?Da(w/C):1;u=e.lskip=Da(Pa(u,ya(s.lineHeight))/C/k);void 0!==b?(w=(e.clen-G-1)*b,e.offset=(w-(w=Qa(w)))*C,L=w+G):(w=e.dsi,L=e.dei,e.offset=0);G=e.norm=w%k;e.ddsi=w-=G;e.ddei=L=L+2*k-G;e.pvr=f;e._ymin=this._ymin;e._yminValue=this._yminValue;f=g.show?Da((L-w)/k/u):0;G=e.llen-1;e.llen=f;da=e.ppc=C*u*k;if(f>G)for(u=G,G=f;u<G;u++)(m=g[u])&&m.show()||(g[u]=h.text(0,
0,"",v).css(s));else for(u=f,G+=1;u<G;u++)g[u].hide();f=C*k<e.amrd?0:Da((L-w)/k);s=f-e.alen;e.alen=f;g.wrap&&(g.rotate?(g._width=g.height,g._height=da):(g._width=da,g._height=g.height));for(k=z.length;k--;){v=z[k];e.plotName=v.name||"";m=v.anchors;if(m.show&&s){C=m.attrs;u=0;for(G=f;u<G;u++)m[u]=m[u]&&m[u].show()||h.circle(C,v.anchorGroup);u=f;for(G=m.length;u<G;u++)m[u]&&m[u].hide()}this.drawPlotZoomlineGraphics(e,v.data,v.graphic,m,!k&&g)}fa.FC_DEV_ENVIRONMENT&&fa.jQuery&&(FusionCharts["debugger"].enable()?
(this.debug=this.debug||(fa.jQuery("#fc-zoominfo").length||fa.jQuery("body").append('<pre id="fc-zoominfo">'),fa.jQuery("#fc-zoominfo").css({position:"absolute",left:"10px",top:"0","pointer-events":"none",opacity:.7,width:"250px",zIndex:"999",border:"1px solid #cccccc","box-shadow":"1px 1px 3px #cccccc",background:"#ffffff"})),this.debug.text(JSON.stringify(e,0,2))):(this.debug&&fa.jQuery("#fc-zoominfo").remove(),delete this.debug))},drawPlotZoomlineGraphics:function(b,e,h,f,k){var g=this.smartLabel,
s=this.numberFormatter,v=this.options.chart,z=v.useCrossline,m=[],C=!b.cnd,w=b.ddei,G=b.clen,u=b.step,L=b.lskip,da=b.ppp,W=b.offset,y=b.pvr,ka=this._visw,U=this._visout,fa=this._lcmd,ma="M",ca,aa,la=k&&k[0],qa,ia;f=f[0];var ha={},ja={},na,ta,sa=0,xa,ya,wa=-b.norm,ua=b.ddsi,Aa=0,n,v=v.tooltipSepChar;la&&(k.group.transform(["T",-W,0]),ya=k.wrap,qa=k._height,ia=k._width,ya&&g.setStyle(k.css));for(;ua<=w;ua+=u,wa+=u)aa=this.getParsedLabel(ua),z||(n=aa+v+s.yAxis(e[ua]),n=b.plotName&&b.plotName+v+n||n),
xa=sa/3+Aa,ta=wa*da,void 0===(ca=e[ua])?(C&&(ma="M"),na=U,k=ta-W,ca=U,Aa++):(m[sa++]=ma,m[sa++]=na=k=ta-W,m[sa++]=ca=(ca-b._yminValue)*y,ma="L"),z?f&&(f=f.attr((ha.cx=na,ha.cy=ca,ha)).next):f&&(f=f.attr((ha.cx=na,ha.cy=ca,ha)).tooltip(n).next),!la||xa%L||(na=la.attrs,k=0>k||k>ka?U:ta,la._prevtext===aa?delete ja.text:ja.text=la._prevtext=aa,na[fa]===k?delete ja[fa]:ja[fa]=k,ya&&aa&&(ja.text=g.getSmartText(aa,ia,qa).text),la=la.attr(ja).next);w>=G&&(void 0!==(ca=e[G-1])&&(m[sa++]="L",m[sa++]=(wa-(w-
G))*da-W,m[sa++]=ca*y),f&&f.attr((ha.cx=U,ha.cy=U,ha)));h.attr("path",m)},legendClick:function(b){var e=!b.visible,h=e?"show":"hide";b.group[h]();b.anchorGroup[h]();this.base.legendClick.apply(this,arguments);return b.visible=e},dispose:function(){var b;this.crossline&&(this.crossline.dispose(),delete this.crossline);(b=this.elements.pintracker)&&(b.undrag(),delete this.elements.pintracker);delete this.zoomOutButton;delete this.resetButton;delete this.pinButton;this.xlabels&&(this.xlabels.length=
0);delete this.xlabels;this.base.dispose.apply(this)}},Ma["renderer.cartesian"]);sa=function(b,e){var h=b.paper,f=this.left=b._visx,k=this.width=b._visw,g=this.top=b.canvasTop,s=this.height=b.canvasHeight,v=this._visout=b._visout,z=this.plots=b.plots,m=b.layers.dataset,C,w=e.labelstyle,G=e.valuestyle;C=this.group=h.group("crossline-labels",m).attr({transform:["T",f,b._ymin]});this.tracker=h.rect(f,g,k,s,m).attr({stroke:"none","stroke-width":0,fill:ta}).toFront().mousedown(this.onMouseDown,this).mouseup(this.onMouseUp,
this,!0).mouseout(this.onMouseOut,this).mousemove(this.onMouseMove,this);Ga&&this.tracker.touchstart(this.onMouseMove,this);this.container=b.container;this.line=h.path(void 0,m).attr(qa({path:["M",f,g,"l",0,s]},e.line)).toBack();f=this.labels=e.valueEnabled&&h.set();e.labelEnabled&&(this.positionLabel=h.text(v,g+s+(b.options.chart.scrollHeight||0)+2.5,"").insertAfter(b.xlabels.group.parent).css(w).attr({"vertical-align":"top","text-bound":["rgba(255,255,255,1)","rgba(0,0,0,1)",1,2.5]}));this.hide();
this.pixelRatio=b._ypvr;this.yminValue=b._yminValue;this.positionLabels=b.xlabels||{data:[],parsed:[]};this.getZoomInfo=function(){return b._zoominfo};this.getDataIndexFromPixel=function(e){return b.getValuePixel(e)};this.getPositionLabel=function(e){return b.getParsedLabel(e)};if(e.valueEnabled){g=0;for(s=z.length;g<s;g++)w=z[g],w=w.graphic.attrs.stroke,f.push(h.text(0,v,"",C).css(G).attr({fill:w,"text-bound":["rgba(255,255,255,0.8)","rgba(0,0,0,0.2)",1,2.5]}));this.numberFormatter=b.numberFormatter}};
sa.prototype.disable=function(b){void 0!==b&&(this.disabled=!!b)&&this.visible&&this.hide();return this.disabled};sa.prototype.onMouseOut=function(){this.hide()};sa.prototype.onMouseDown=function(){!Ga&&this.hide();this._mouseIsDown=!0};sa.prototype.onMouseUp=function(){!Ga&&this.hide();delete this._mouseIsDown};sa.prototype.onMouseMove=function(b){if(!(this.disabled||this._mouseIsDown&&!Ga)){var e=this.getZoomInfo(),h=this.line,f=this.left,k=e.step,g=e.ppp*k;b=Wa(this.container,b).chartX-f;var s;
b=(b+=g/2+e.offset)-b%g;s=(s=this.getDataIndexFromPixel(Da(b)))+s%k;b-=e.offset;h.transform(["T",C(b),0]);this.hidden&&this.show();if(s!==this.position||this.hidden)this.position=s,this.lineX=b,this.updateLabels()}};sa.prototype.updateLabels=function(){var b=this,e=b.labels,h=b.plots,f=b.width,k=b.position,g=b.lineX,s=C(g),v=b.pixelRatio,z=b.yminValue,m=b._visout,L=b.numberFormatter;e&&e.forEach(function(e,C){var u=h[C],da=u.data[k],fa,W;e.attr({text:L.xAxis(da)});fa=e.getBBox();W=.5*fa.width+10;
fa=fa.height;u=void 0!==da&&u.visible?(da-z)*v:m;u<-1*(b.height-fa)?u+=fa:u>z*v-fa&&(u-=fa);e.attr({x:Pa(0,Ta(s,f)),y:u,"text-anchor":g<=W&&"start"||g+W>=f&&"end"||"middle"})});b.positionLabel&&b.positionLabel.attr({x:g+b.left,text:b.getPositionLabel(k)})};sa.prototype.show=function(){this.disabled||(this.hidden=!1,this.group.attr("visibility","visible"),this.line.attr("visibility","visible"),this.positionLabel&&this.positionLabel.attr("visibility","visible"))};sa.prototype.hide=function(){this.hidden=
!0;this.group.attr("visibility","hidden");this.line.attr("visibility","hidden");this.positionLabel&&this.positionLabel.attr("visibility","hidden")};sa.prototype.dispose=function(){for(var b in this)this.hasOwnProperty(b)&&delete this[b]};k.addSymbol({pinModeIcon:function(b,e,h){var f=.5*h,k=b-h,g=b+h,s=b-f,v=b+f,z=b+.5,m=z+1,C=z+1.5,w=e-h,G=e+f,u=e-f,f=e+(h-f);return["M",k,w,"L",s,u,s,f,k,G,b-.5,G,b,e+h+.5,z,G,g,G,v,f,v,u,g,w,C,w,C,u,C,f,m,f,m,u,C,u,C,w,"Z"]},zoomOutIcon:function(b,e,h){b-=.2*h;e-=
.2*h;var f=.8*h,g=k.rad(43),s=k.rad(48),z=b+f*da(g),g=e+f*xa(g),v=b+f*da(s),s=e+f*xa(s),C=k.rad(45),m=z+h*da(C),L=g+h*xa(C),w=v+h*da(C);h=s+h*xa(C);return["M",z,g,"A",f,f,0,1,0,v,s,"Z","M",z+1,g+1,"L",m,L,w,h,v+1,s+1,"Z","M",b-2,e,"L",b+2,e,"Z"]},resetIcon:function(b,e,h){var f=b-h,g=(ua.PI/2+ua.PI)/2;b+=h*da(g);var g=e+h*xa(g),k=2*h/3;return["M",f,e,"A",h,h,0,1,1,b,g,"L",b+k,g-1,b+2,g+k-.5,b,g]}})}]);
/*
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.6.0
*/
FusionCharts.register("module",["private","modules.renderer.js-messagelogger",function(){var R=this.hcLib,Xa=R.Raphael,Ha,Ya=R.isIE,ka=R.graphics.HEXtoRGB,y=R.graphics.convertColor,Ia,M,Za,Ea,q,B,h,ua,wa,P,V,Y,ha,Ka,ob=this.window,oa=ob.document,ub=8===oa.documentMode,ea=!0,W=!1,G=R.pluck,qa=R.pluckNumber,vb=R.FC_CONFIG_STRING,xa={display:"block",paddingLeft:"10px",paddingRight:"10px","font-family":"Arial","font-size":"11px"},v=function(h,q){var w=this,B;q||(q="");for(B=w.indexOf(h);-1!==B;)w=w.replace(h,
q),B=w.indexOf(h);return w};Ka=function(v,G,w){var M=v.hcJSON,V=M&&M[vb],P=G&&G.chartWidth,U=G&&G.chartHeight,M=Ea/100*P,ha=q/100*U,ba=(P-M)/2,X=(U-ha)/2,qa=M-18-22,fa=ha-18-22,oa=ua,xa=ua;v=w.html("div",{fill:"transparent",width:P,height:U},{fontSize:"10px",lineHeight:"15px",fontFamily:(V&&V.inCanvasStyle||v.inCanvasStyle).fontFamily},G&&G.container);v.veil=w.html("div",{id:"veil",fill:"000000",width:P,height:U,opacity:.1},void 0,v).on("click",function(){Y&&R.messageLogger.close()});h&&B&&(v.title=
w.html("p",{id:"Title",innerHTML:h,x:5,y:5},{"font-weight":"bold"},v));v.dialog=w.html("div",{id:"dialog",x:ba,y:X,fill:"ffffff",strokeWidth:1,stroke:oa,width:M,height:ha},{borderRadius:"5px",boxShadow:"1px 1px 3px #000000","-webkit-border-radius":"5px","-webkit-box-shadow":"1px 1px 3px #000000",filter:'progid:DXImageTransform.Microsoft.Shadow(Strength=4, Direction=135, Color="#000000")'},v);v.logBackground=w.html("div",{id:"dialogBackground",x:0,y:0,fill:xa,width:M,height:ha},void 0,v.dialog);Y&&
(v.closeBtnContainer=w.html("div",{id:"closeBtnContainer",width:18,height:18,x:ba+M-21,y:X+3},{},v),G=new Xa("closeBtnContainer",18,18),P=G.group("closeGroup"),v.closeButton=G.symbol("closeIcon",0,0,6,P).attr({transform:"t9,9","stroke-width":2,stroke:y("999999"),ishot:!0,"stroke-linecap":"round","stroke-linejoin":"round"}).css({cursor:"pointer",_cursor:"hand"}).click(function(){R.messageLogger.close()}));v.logWrapper=w.html("div",{id:"logWrapper",x:(M-qa)/2,y:(ha-fa)/2,width:qa,height:fa},{overflow:"auto"},
v.dialog).on("scroll",function(){var h=this&&this.scrollTop,q=this&&this.scrollHeight,w=this&&this.offsetHeight;W?W=!1:ea=q-h===w?!0:!1});v.log=w.html("div",{id:"log",x:0,y:0},{},v.logWrapper);v.hide();return v};Ha=function(h,q,w,v){if(R.messageLogger)return R.messageLogger;this.chart=h;this.instanceAPI=q;this.renderer=w;this.paper=v;this.menuCreated=!1;this.log=(h=this.ui=Ka(q,w,v))&&h.log;h&&this.updateStatus("INITIALIZED")};Ha.prototype={STATUS:"",updateStatus:function(h){var q=this.renderer,q=
q&&q.menu instanceof Array&&q.menu[0];this.status=h;switch(q&&this.status.toLowerCase()){case "initialized":Ia?q.hideItem(4):q.hideItem(1);break;case "closed":Ia?q.showItem(3):q.showItem(0);Ia?q.hideItem(4):q.hideItem(1);break;case "active":Ia?q.showItem(4):q.showItem(1),Ia?q.hideItem(3):q.hideItem(0)}},appendMessage:function(h){var q=this.status,w=G(h.msgid,""),B=G(h.msgtitle,""),y=G(h.msgtext,""),M=h&&G(h.msgtype,"literal"),U=h&&!!qa(h.clearlog,0),ha=h&&!!qa(h.hidelog,0),ba=h&&!!qa(h.showlog,0),
X=h&&!!qa(h.msggoestolog,Za),Ea=h&&!!qa(h.msggoestojs,wa);X&&"INITIALIZED"===q&&this.updateStatus("CLOSED");ha&&this.close();U&&this.clear();ba&&this.open();X&&"ACTIVE"!==this.status&&this.show();if((""!==B&&void 0!==B||""!==y&&void 0!==y)&&this.log&&X){var q=this.log,U=h&&h.msgtitle,ha=h&&h.msgtext,ba=h&&G(h.msgtype,"literal"),fa,R;h="";var Y,ta,la;q&&q.element&&(Y=q.element);Y&&(ta=Y.parentElement);U&&(U+=" : ");switch(ba.toLowerCase()){case "info":U&&(fa='<span style="color: #005900">$titleVal$</span>');
ha&&(R="<span>$msgVal$</span>");break;case "literal":U&&(fa='<span style="color: #005900">$titleVal$</span>');ha&&(R="<span>$msgVal$</span>");break;case "error":U&&(fa='<span style="color: #CC0000">$titleVal$</span>');ha&&(R='<span style="color: #CC0000">$msgVal$</span>');break;case "link":U&&(fa='<span style="color: #005900">$titleVal$</span>');ha&&(R='<a href="$msgVal$">$msgVal$</a>');break;default:U&&(fa='<span style="color: #005900">$titleVal$</span>'),ha&&(R="<span>$msgVal$</span>")}fa&&(fa=
fa.replace("$titleVal$",U),h+=fa);R&&(R=v.call(R,"$msgVal$",ha),h+=R);if(Y&&h){fa=oa.createElement("span");for(la in xa)fa.style[la]=xa[la];fa.innerHTML=h;Y.appendChild&&Y.appendChild(fa);Ya&&ub&&(la=Y.innerHTML,Y.innerHTML=la);ea&&(W=!0,Y=ta.scrollHeight,ta.scrollTop=Y)}Ya||(this.ui.element.scrollHeight+=30,this.ui.element.scrollTop=this.ui.element.scrollHeight)}Ea&&P&&(Ea=ob[P],"function"===typeof Ea&&(V?Ea(w,B,y,M):Ea(y)))},hide:function(){"ACTIVE"===this.status&&(this.ui.hide(),this.updateStatus("BEFORE CLOSE"))},
close:function(){"ACTIVE"===this.status&&(this.ui.hide(),this.updateStatus("CLOSED"))},open:function(){"ACTIVE"!==this.status&&(this.ui.show(),this.updateStatus("ACTIVE"))},show:function(){"ACTIVE"!==this.status&&"CLOSED"!==this.status&&(this.ui.show(),this.updateStatus("ACTIVE"))},clear:function(){var h=this.log;if(h=h&&h.element)for(;h.hasChildNodes();)h.removeChild(h.lastChild)},destroy:function(){this.hide();this.updateStatus("DESTROYED");R.messageLogger=null;delete R.messageLogger;return null}};
Ha.prototype.constructor=Ha;this.core.addEventListener(["rendered","dataupdated","resized"],function(v){var G=v&&v.sender;v=v&&v.eventType;var w=G&&G.jsVars,y=w&&w.hcObj,W=y&&y.options,ea=w&&w.instanceAPI,U=ea&&ea.renderer,y=U&&U.paper,W=W&&W.chart,oa=G&&G.options,oa=oa&&oa.renderer,ba=R&&R.messageLogger,X=ba&&ba.status,xa=w&&w._reflowData,fa=xa&&xa._messageLogger||{},w=fa&&fa.appendedMessages,Ka;if(!oa||"javascript"===oa.toLowerCase())if(M=W&&W.useMessageLog){W&&(Ia=W.showRTMenuItem,Za=W.messageGoesToLog,
wa=W.messageGoesToJS,P=W.messageJSHandler,V=W.messagePassAllToJS,Ea=W.messageLogWPercent,q=W.messageLogHPercent,B=W.messageLogShowTitle,h=W.messageLogTitle,Y=W.messageLogIsCancelable,ua=W.messageLogColor,ua=ua.replace(/^#?([a-f0-9]+)/ig,"$1"),ka(ua),ha=W.alwaysShowMessageLogMenu);ba&&(ba=R.messageLogger=ba.destroy());Ka=(ba=R.messageLogger=new Ha(G,ea,U,y))&&ba.ui&&ba.ui.log&&ba.ui.log.element;if("resized"===v)switch(w&&(Ka.innerHTML=w),X.toLowerCase()){case "active":ba.ui.show();ba.updateStatus(X);
break;case "closed":ba.updateStatus(X)}ha&&(ba.menuCreated=!0);G.addEventListener("RealTimeUpdateComplete",function(h,q){var w=q&&q.updateObject,v=w&&w.msgtitle,B=w&&w.msgtext,y=w&&qa(w.showlog,0),W=w&&qa(w.hidelog,0),V=w&&qa(w.clearlog,0);if(v||B||y||W||V)!M||Ia||!Za||ha||ba.menuCreated||(ea.drawMLMenuButtons.call(U,G),ba.menuCreated=!0),ba.appendMessage(w),fa.appendedMessages=Ka&&Ka.innerHTML,xa._messageLogger=fa});G.addEventListener("beforeDispose",function(){ba&&ba.destroy()})}})}]);
FusionCharts.register("module",["private","modules.renderer.js-realtime",function(){var R=this,Xa=R.window,Ha=Math,Ya=Ha.random,ka=Ha.max,y=R.hcLib.pluckNumber,Ia=function(y,q,B){clearTimeout(B);return setTimeout(y,q)},M,Za;M=function(y){var q=y.sender,B=q.jsVars;y=q.__state;var h=B.instanceAPI,M=h.hcJSON,wa=h.numberFormatter,P=M&&M.alerts&&M.alerts.alert||[],B=B._rtLastUpdatedData&&B._rtLastUpdatedData.values,V=P.length,Y;if(B&&B.length){h=function(h){var B,y=wa.getCleanValue(h),M,Y=function(h){return function(){eval(h.param)}};
for(M=0;M<V;M+=1)if(h=P[M],B=h.action&&h.action.toLowerCase(),h.minvalue<y&&h.maxvalue>y){if("1"!==h.occuronce||!h.hasOccurred){h.hasOccurred=!0;h.state="1";switch(B){case "calljs":setTimeout(Y(h),0);break;case "showannotation":q.showAnnotation&&q.showAnnotation(h.param)}R.raiseEvent("AlertComplete",null,h)}}else"showannotation"===B&&"1"===h.state&&q.hideAnnotation&&q.hideAnnotation(h.param),h.state="2"};M=ka(B.length,0);for(Y=0;Y<M;Y+=1)y.lastSetValues&&B[Y]===y.lastSetValues[Y]||h(B[Y]);y.lastSetValues=
B}};Za=function(Ea){var q=Ea.sender,B=q.__state,h,ua,wa,P,V,Y,ha,Ka,ka,oa,Ha,ea;B.dataSetDuringConstruction&&!B.rtStateChanged&&void 0===B.rtPreInit&&(q.dataReady()?(B.rtStateChanged=!0,B.rtPreInit=!0):B.rtPreInit=!1);B.rtStateChanged&&(B.rtStateChanged=!1,h=q.jsVars,ua=h.hcObj)&&(wa=ua.logic,V=(P=ua.options)&&P.chart||{},Y=1E3*y(V.updateInterval,V.refreshInterval),ha=1E3*y(V.clearInterval,0),Ka=V.dataStreamURL,ka=V.dataStamp,V=Boolean(wa&&wa.realtimeEnabled&&0<Y&&void 0!==Ka&&V),P=P&&P.plotOptions&&
P.plotOptions.series.animation&&P.plotOptions.series.animation.duration||0,oa=B._rtAjaxObj,Ha=function(){q.clearChart&&q.clearChart();ha&&(B._toClearChart=setTimeout(Ha,ha))},ea=function(){var h=Ka,h=h+((-1===Ka.indexOf("?")?"?num=":"&num=")+Ya());ka&&(h+="&dataStamp="+ka);oa.open&&oa.abort();oa.get(h);B._rtAjaxLatencyStart=new Date},0>=Y?(B._toRealtime=clearTimeout(B._toRealtime),oa&&oa.abort()):10>Y&&(Y=10),B._toClearChart=clearTimeout(B._toClearChart),0<ha&&(10>ha?ha=10:B._toClearChart=setTimeout(Ha,
ha)),B._rtStaticRefreshMS=Y,V&&(void 0===B._rtPaused&&(B._rtPaused=!1),B._rtDataUrl=Ka,B.lastSetValues=null,oa=B._rtAjaxObj||(B._rtAjaxObj=new R.ajax),oa.onSuccess=function(y,G,M,V){if(!q.disposed){var P=h.hcObj&&h.hcObj.logic;M=P.linearDataParser&&P.linearDataParser(y,P.multisetRealtime);B._rtAjaxLatencyStart&&(B._rtAjaxLatency=new Date-B._rtAjaxLatencyStart);if(q.isActive()&&M&&ua&&(ua.realtimeUpdate||P.realtimeUpdate)){ka=M.dataStamp?M.dataStamp:null;M.interval=1E3>Y?Y:1E3;G=q.getDataJSON();ua.realtimeUpdate?
ua.realtimeUpdate(M):P.realtimeUpdate(M);h._rtLastUpdatedData=P.multisetRealtime?M:q.getDataJSON();P=(P.realtimeDrawingLatency||0)+(B._rtAjaxLatency||0);R.raiseEvent("realtimeUpdateComplete",{data:y,updateObject:M,prevData:G.values,source:"XmlHttpRequest",url:V,networkLatency:B._rtAjaxLatency,latency:P},Ea.sender);try{Xa.FC_ChartUpdated&&Xa.FC_ChartUpdated(Ea.sender.id)}catch(v){setTimeout(function(){throw v;},1)}B._rtPaused||(P>=B._rtStaticRefreshMS&&(P=B._rtStaticRefreshMS-1),B._toRealtime=setTimeout(ea,
B._rtStaticRefreshMS-P))}else B._toRealtime=clearTimeout(B._toRealtime)}},oa.onError=function(h,G,y,M){B._rtAjaxLatencyStart&&(B._rtAjaxLatency=new Date-B._rtAjaxLatencyStart);R.raiseEvent("realtimeUpdateError",{source:"XmlHttpRequest",url:M,xmlHttpRequestObject:G.xhr,error:h,httpStatus:G.xhr&&G.xhr.status?G.xhr.status:-1,networkLatency:B._rtAjaxLatency},Ea.sender);B._toRealtime=q.isActive()?setTimeout(ea,Y):clearTimeout(B._toRealtime)},B._rtPaused||(B._toRealtime=Ia(ea,P>Y?P:Y,B._toRealtime))),q.removeEventListener("realtimeUpdateComplete",
M),wa.dataObj&&wa.dataObj.alerts&&wa.dataObj.alerts&&wa.dataObj.alerts.alert&&wa.dataObj.alerts.alert.length&&q.addEventListener("realtimeUpdateComplete",M))};R.addEventListener(["beforeDataUpdate","beforeRender"],function(y){y=y.sender;var q=y.__state;y.jsVars&&(y.jsVars._rtLastUpdatedData=null);q._toRealtime&&(q._toRealtime=clearTimeout(q._toRealtime));q._toClearChart&&(q._toClearChart=clearTimeout(q._toClearChart));q._rtAjaxLatencyStart=null;q._rtAjaxLatency=null});R.addEventListener(["renderComplete",
"dataUpdated"],function(y){var q=y.sender.__state;q&&(void 0===q.rtPreInit&&(q.rtPreInit=!1),q._rtPaused&&delete q._rtPaused,q.rtStateChanged||(q.rtStateChanged=!0,Za.apply(this,arguments)))});R.core.addEventListener("beforeDispose",function(y){y=y.sender.__state;y._toRealtime&&(y._toRealtime=clearTimeout(y._toRealtime));y._toClearChart&&(y._toClearChart=clearTimeout(y._toClearChart))});R.core.addEventListener("drawComplete",Za)}]);
FusionCharts.register("module",["private","modules.renderer.js-widgets",function(){function R(){}function Xa(a,e,c,d){e=h(e,d);a=h(a,c);return e&&a?a/c==e/d?c/a:Math.min(c/a,d/e):1}function Ha(a,e){var c=a.labels,d=c._textY,b=c._righttX,c=c._leftX,f,m,g=e.length;for(f=0;f<g;f+=1)if(m=e[f]&&e[f].label)m.y=d,m.x=m.align===ab?b:c}function Ya(a,e,c,d){var b,f,m,g,p,n;c instanceof Array||(c=this.colorManager.getPlotColor(0));if(a&&0<a.length){for(f=m=a.length-1;0<=f;f-=1)if(b=a[f])b.minvalue=d.numberFormatter.getCleanValue(b.minvalue),
b.maxvalue=d.numberFormatter.getCleanValue(b.maxvalue),null===b.minvalue&&(null!==b.maxvalue?b.minvalue=b.maxvalue:f!==m&&a.splice(f,1)),void 0!==b.label&&(b.label=U(b.label)),void 0!==b.name&&(b.name=U(b.name)),null!==b.maxvalue&&b.minvalue>b.maxvalue&&(g=b.minvalue,b.minvalue=b.maxvalue,b.maxvalue=g);a.sort(Ib);a[0].code||(a[0].code=c[0]);void 0===B(a[0].alpha)&&(a[0].alpha=Qa);f=0;for(m=a.length-1;f<m;f+=1)if(g=f+1,b=a[f],d=a[g],d.code||(d.code=c[g]),void 0===B(d.alpha)&&(d.alpha=Qa),null===b.maxvalue&&
(b.maxvalue=d.minvalue),b.maxvalue>d.minvalue){if(b.maxvalue>d.maxvalue){g=V(b);g.maxvalue=b.maxvalue;n=g.minvalue=d.maxvalue;for(p=f+2;p<m&&a[p].minvalue<n;p+=1);a.splice(p,0,g);m+=1}b.maxvalue=d.minvalue}b=a[f];null===b.maxvalue&&(b.maxvalue=b.minvalue)}a&&0<a.length||(e||(e={code:"CCCCCC",alpha:"100",bordercolor:"000000",borderalpha:"100"}),a=[e],this.defaultAsigned=!0);this.colorArr=a}var ka=this,y=ka.hcLib,Ia=y.Raphael,M=y.BLANKSTRING,Za=y.createTrendLine,Ea=y.createContextMenu,q=y.pluck,B=y.getValidValue,
h=y.pluckNumber,ua=y.getFirstDefinedValue,wa=y.getColorCodeString,P=y.FC_CONFIG_STRING,V=y.extend2,Y=y.getDashStyle,ha=y.hashify,Ka=y.hasSVG,ob=y.falseFN,oa=y.getFirstValue,ub=y.getFirstColor,ea=y.graphics.getDarkColor,W=y.graphics.getLightColor,G=y.graphics.convertColor,qa=y.graphics.parseColor,vb=y.graphics.parseAlpha,xa=y.COLOR_TRANSPARENT,v=y.chartAPI,$a=y.parseTooltext,Ob=v.singleseries,w=y.COMMASTRING,bb=y.ZEROSTRING,Fb=y.ONESTRING,Pb=/\\,/ig,U=y.parseUnsafeString,Qb=y.HCstub,ba=ka.window,X=
/msie/i.test(ba.navigator.userAgent)&&!ba.opera,pb=y.regex.hexcode,fa="rgba(192,192,192,"+(X?.002:1E-6)+")",Rb=parseFloat,Sb=parseInt,ta=Math,la=ta.round,Gb=ta.ceil,ya=ta.max,La=ta.min,wb=ta.abs,Hb=ta.atan2,ma=ta.pow,kb=ta.sqrt,cb=ta.PI/180,db=y.regex.dropHash,xb=y.toPrecision,Tb=y.isArray,eb=y.HASHSTRING,S=y.toRaphaelColor,ta=y.TOUCH_THRESHOLD_PIXELS,Ub=y.CLICK_THRESHOLD_PIXELS,yb=void 0!==ba.document.documentElement.ontouchstart,zb=yb?ta:Ub,Vb=y.getPosition,ca=y.plotEventHandler,Ib,Ab,Bb,Cb,fb,
Jb,Kb,Lb,Wb={left:"start",right:"end",center:"middle"},qb={"true":void 0,"false":"crisp"},Db=function(a,e,c){var d=0,b=a.length;if(c)for(;d<b;d++){if(!1===e.call(c,a[d],d,a))return d}else for(;d<b;d++)if(!1===e.call(a[d],a[d],d,a))return d},za=function(a,e){var c;a||(a={});for(c in e)a[c]=e[c];return a},lb=function(a){return"object"===typeof a},Ra=function(a){return"string"===typeof a},$=function(a){return void 0!==a&&null!==a},rb=X&&!Ka?"visible":"",sb=y.regex.startsRGBA,Da=y.setLineHeight,Mb=y.pluckFontSize,
Ma=y.POSITION_MIDDLE,Fa=y.POSITION_TOP,mb=y.POSITION_BOTTOM,ab=y.POSITION_RIGHT,Ja=y.POSITION_LEFT,Ga=y.POSITION_MIDDLE,Qa=y.HUNDREDSTRING,hb=y.PXSTRING,Nb=y.COMMASPACE,sa={right:"end",left:"start",middle:"middle",start:"start",end:"end",center:"middle",undefined:"","":""},X=!/fusioncharts\.com$/i.test(ba.location.hostname),Xb=function(){return function(a,e,c){var d,b=this,f=this._Attr,m=Ia.vml?-1.5:0,g=Ia.vml?-1.5:0,p;f||(f=b._Attr={});Ra(a)&&$(e)&&(d=a,a={},a[d]=e);if(Ra(a)||void 0===a)b="angle"==
a?b._Attr[a]:b._attr(a);else for(d in a)e=a[d],"angle"===d?(f[d]=e,p=e*cb,f.tooltipPos[0]=f.cx+f.toolTipRadius*Math.cos(p),f.tooltipPos[1]=f.cy+f.toolTipRadius*Math.sin(p),f.prevValue=e,c&&c.duration?b.animate({transform:"R"+e+","+m+","+g},c.duration,"easeIn"):b.attr({transform:"R"+e+","+m+","+g})):b._attr(d,e);return b}},nb=function(a){var e=[],c;(function(a){(c=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(a))?e=[parseInt(c[1],10),parseInt(c[2],
10),parseInt(c[3],10),parseFloat(c[4])]:(c=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(a))&&(e=[parseInt(c[1],16),parseInt(c[2],16),parseInt(c[3],16),1])})(a);return{get:function(c){return e&&!isNaN(e[0])?"rgb"===c?"rgb("+e[0]+","+e[1]+","+e[2]+")":"hex"===c?"#"+("000000"+(e[0]<<16|e[1]<<8|e[2]).toString(16)).slice(-6):"a"===c?e[3]:"rgba("+e.join(",")+")":a},brighten:function(a){if(!isNaN(a)&&0!==a){var b;for(b=0;3>b;b++)e[b]+=parseInt(255*a,10),0>e[b]&&(e[b]=0),255<e[b]&&(e[b]=255)}return this},
setOpacity:function(a){e[3]=a;return this}}},ta=V({},y.defaultGaugePaletteOptions);R.prototype={numDecimals:function(a){a=xb(a,10);a=Math.abs(a);a=xb(a-Math.floor(a),10);a=String(a).length-2;return 0>a?0:a},toRadians:function(a){return a/180*Math.PI},toDegrees:function(a){return a/Math.PI*180},flashToStandardAngle:function(a){return-1*a},standardToFlashAngle:function(a){return-1*a},flash180ToStandardAngle:function(a){var e=360-(0>(a%=360)?a+360:a);return 360==e?0:e},getAngularPoint:function(a,e,c,
d){d*=Math.PI/180;a+=c*Math.cos(d);e-=c*Math.sin(d);return{x:a,y:e}},remainderOf:function(a,e){var c=a%e,d=void 0,d=ma(10,void 0===d?2:d),c=la(Number(String(c*d)));return c/=d},boundAngle:function(a){return 0<=a?R.prototype.remainderOf(a,360):360-R.prototype.remainderOf(Math.abs(a),360)},toNearestTwip:function(a){var e=0>a?-1:1;a=Math.abs(a);a=la(100*a);var c=Math.floor(a/5);return(2<Number(String(a-5*c))?5*c+5:5*c)/100*e},roundUp:function(a,e){var c=ma(10,void 0===e?2:e);a=la(Number(String(a*c)));
return a/=c}};R.prototype.constructor=R;y.MathExt=R;Ab=function(a,e,c,d,b,f,m,g){var p=a[P].smartLabel,n=e.chart,k=a.chart,l,s,u=0;e=a.title;m=a.subtitle;var t=e.text,r=m.text;b=h(n.captionpadding,b,2);var K=0,E=0,u=0,q=h(n.captiononright,0),J=B(n.captionposition,"top").toLowerCase(),n=0,x={left:0,right:0};g=g.snapLiterals||(g.snapLiterals={});var z=0,F=0;t!==M&&(l=e.style,K=h(parseInt(l.fontHeight,10),parseInt(l.lineHeight,10),12),h(parseInt(l.fontSize,10),10));r!==M&&(s=m.style,E=h(parseInt(s.fontHeight,
10),parseInt(s.lineHeight,10),12),u=h(parseInt(s.fontSize,10),10));if(0<K||0<E){p.setStyle(l);l=p.getSmartText(e.text,c,d);0<l.width&&(l.width+=2,n=l.height);p.setStyle(s);s=p.getSmartText(m.text,c,d-n);0<s.width&&(s.width+=2);p=l.height+0+u/2;switch(J){case "middle":e.y=d/2-l.height;m.y=e.y+p;break;case "bottom":m.y=d-k.marginBottom-k.marginTop-s.height;e.y=m.y-(0<l.height?p:0);break;default:e.y=0,m.y=p}u=Math.max(l.width,s.width);a.title.text=l.text;l.tooltext&&(a.title.originalText=l.tooltext);
a.subtitle.text=s.text;s.tooltext&&(a.subtitle.originalText=s.tooltext);0<u&&(u+=b);a=Math.min(u,c);q?(e.align=m.align=sa.start,x.right=a,e.x=f-u+b,m.x=f-u+b):(e.align=m.align=sa.end,x.left=a,e.x=u-b,m.x=u-b,z=a,F=s.width);e._captionWidth=l.width;m._subCaptionWidth=s.width;g.captionstartx=e.x-z;g.captionstarty=e.y;g.captionwidth=l.width;g.captionheight=n||0;g.captionendx=g.captionstartx+g.captionwidth;g.captionendy=g.captionstarty+g.captionheight;g.subcaptionstartx=m.x-F;g.subcaptionstarty=m.y;g.subcaptionwidth=
0<s.width?s.width:0;g.subcaptionheight=0<s.height?s.height:0;g.subcaptionendx=g.subcaptionstartx+g.subcaptionwidth;g.subcaptionendy=g.subcaptionstarty+g.subcaptionheight}return x};Bb=function(a,e,c,d,b,f){var m=a.chart,g=e.chart;e=a.title;var p=h(g.captionpadding,2),g=h(g.captiononright,0);a=a.subtitle;f=f.snapLiterals;var n=0,k=0;m.spacingRight=m.spacingLeft=0;$(d)||(d=0);$(b)||(b=0);g?(c-=m.marginRight,a.align=e.align=sa.start,e.x=a.x=c+p+b+2):(a.align=e.align=sa.end,e.x=a.x=m.marginLeft-m.spacingLeft-
p-d-2,n=e._captionWidth,k=a._subCaptionWidth);f.captionstartx=e.x-n;f.subcaptionstartx=a.x-k;f.captionendx=f.captionstartx+f.captionwidth;f.subcaptionendx=f.subcaptionstartx+f.subcaptionwidth};Cb=function(a,e,c,d,b){this.userMin=a;this.userMax=e;this.numMajorTM=h(d.majorTMNumber,-1);this.numMinorTM=h(d.minorTMNumber,5);this.adjustTM=d.adjustTM;this.tickValueStep=h(d.tickValueStep,1);this.showLimits=h(d.showLimits,1);this.showTickValues=h(d.showTickValues,1);this.nf=b;this.stopMaxAtZero=c;this.setMinAsZero=
!d.setAdaptiveMin;this.upperLimitDisplay=d.upperLimitDisplay;this.lowerLimitDisplay=d.lowerLimitDisplay;this.userMaxGiven=null===this.userMax||void 0===this.userMax||""===this.userMax?!1:!0;this.userMinGiven=null===this.userMin||void 0===this.userMin||""===this.userMin?!1:!0;this.majorTM=[];this.minorTM=[];this.MathExt=new R};Cb.prototype={setAxisCoords:function(a,e){this.startAxisPos=a;this.endAxisPos=e},calculateLimits:function(a,e){var c=!0,d=!0,b=Number(this.userMax),f=Number(this.userMin),m,
g;if(this.userMaxGiven&&this.userMinGiven)a=b,e=f;else if(isNaN(a)&&(a=.9,d=!1),isNaN(e)&&(e=0,c=!1),a===e&&0===a&&(isNaN(b)||(a=b),isNaN(b)||0===b))a=.9;f=Math.floor(Math.log(Math.abs(a))/Math.LN10);m=Math.floor(Math.log(Math.abs(e))/Math.LN10);m=Math.max(m,f);f=ma(10,m);2>Math.abs(a)/f&&2>Math.abs(e)/f&&(m--,f=ma(10,m));m=Math.floor(Math.log(a-e)/Math.LN10);m=ma(10,m);0<a-e&&10<=f/m&&(f=m);m=(Math.floor(a/f)+1)*f;0>e?g=-1*(Math.floor(Math.abs(e/f))+1)*f:this.setMinAsZero?g=0:(g=Math.floor(Math.abs(e/
f)-1)*f,g=0>g?0:g);this.stopMaxAtZero&&0>=a&&(m=0);this.max=!1===this.userMaxGiven||!0===this.userMaxGiven&&b<a&&d?m:b;this.min=!1===this.userMinGiven||!0===this.userMinGiven&&Number(this.userMin)>e&&c?g:Number(this.userMin);this.min>this.max?this.min==Number(this.userMin)&&this.max==b?(c=this.min,this.min=this.max,this.max=c):this.min==Number(this.userMin)?this.max=this.min+1:this.max==b&&(this.min=this.max-1):this.min==this.max&&(this.max=this.min+1);this.range=Math.abs(this.max-this.min);this.interval=
f;this.calcTickInterval()},calcTickInterval:function(){var a,e,c;-1!=this.numMajorTM&&2>this.numMajorTM&&(this.numMajorTM=2);if(!1===this.userMinGiven&&!1===this.userMaxGiven&&-1!==this.numMajorTM)this.numMajorTM=-1==this.numMajorTM?5:this.numMajorTM,a=this.getDivisibleRange(this.min,this.max,this.numMajorTM,this.interval,!0),e=a-this.range,this.range=a,0<this.max?this.max+=e:this.min-=e;else if(this.numMajorTM=-1==this.numMajorTM?5:this.numMajorTM,!0===this.adjustTM){a=0;for(e=1;;){c=this.numMajorTM+
a*e;c=0===c?1:c;if(this.isRangeDivisible(this.range,c,this.interval))break;a=-1==e||a>this.numMajorTM?++a:a;if(25<a){c=this.numMajorTM;break}e=a<=this.numMajorTM?-1*e:1}this.numMajorTM=1<c?c:this.numMajorTM}this.majorTickInt=(this.max-this.min)/(this.numMajorTM-1)},isRangeDivisible:function(a,e,c){return this.MathExt.numDecimals(a/(e-1))>this.MathExt.numDecimals(c)?!1:!0},getDivisibleRange:function(a,e,c,d,b){if(3>c)return this.range;a=Math.abs(e-a);e=a/(c-1);this.isRangeDivisible(a,c,d)||(b&&Number(e)/
Number(d)<(1<d?2:.5)&&(d/=10),e=(Math.floor(e/d)+1)*d,a=e*(c-1));return a},calculateTicks:function(){this.majorTM=[];this.minorTM=[];for(var a=0,e,c,d=this.numMajorTM,b=this.numMinorTM,f=this.nf,m=this.tickValueStep,g=U(this.lowerLimitDisplay),p=U(this.upperLimitDisplay),n=this.majorTickInt,k=this.min,l=this.showTickValues,s=!1,u=h(this.showLimits,l);a<d;a+=1)e=xb(Number(k+n*a),10),c=f.scale(e),s=!1,0!==a%m&&a!==d-1?c=M:0===a||a===d-1?u?0===a&&g?(c=g,s=!0):a==d-1&&p&&(c=p,s=!0):c=M:l||(c=M),this.majorTM.push({displayValue:c,
isString:s,value:e});c=n/(b+1);for(a=0;a<d-1;a+=1)for(e=1;e<=b;e+=1)this.minorTM.push(this.majorTM[a].value+c*e)},returnDataAsTick:function(a,e){var c={};c.value=a;c.displayValue=this.nf.dataLabels(a);c.showValue=e;return c},getMax:function(){return this.max},getMin:function(){return this.min},getMajorTM:function(){return this.majorTM},getMinorTM:function(){return this.minorTM},getAxisPosition:function(a){if(void 0===this.startAxisPos||void 0===this.endAxisPos)throw Error("Cannot calculate position, as axis co-ordinates have not been defined. Please use setAxisCoords() method to define the same.");
return this.startAxisPos+(this.endAxisPos-this.startAxisPos)/(this.max-this.min)*(a-this.min)},getValueFromPosition:function(a){if(void 0===this.startAxisPos||void 0===this.endAxisPos)throw Error("Cannot calculate value, as axis co-ordinates have not been defined. Please use setAxisCoords() method to define the same.");var e,c;e=this.max-this.min;c=a-this.startAxisPos;return c/(c+(this.endAxisPos-a))*e+this.min}};v("gaugebase",{creditLabel:X,defaultPaletteOptions:ta,multiValueGauge:!1,decimals:2,
formatnumberscale:0,drawAnnotations:!0,useScaleRecursively:!0,includeColorRangeInLimits:!1,init:function(a,e,c){var d=c.jsVars;this.rtLatestSeriesData=d&&d._rtLastUpdatedData?d._rtLastUpdatedData:null;return v.base.init.apply(this,arguments)},chart:function(a,e){var c=this.name,d=this.dataObj||{},b=d.chart||{},f=this.defaultSeriesType,m=this.realtimeEnabled,g=this.colorManager,p,n=d.alerts,k,l,s,u,t,r,K,E,A,J,x,z,F;l=Qb(d,a,e,this);t=l.chart;k=l[P];l.labels.smartLabel=k.smartLabel=this.smartLabel;
this.width=a;this.height=e;k.width=a;k.height=e;u=l.plotOptions;t.useRoundEdges=1==b.useroundedges;k.tooltext=b.plottooltext;k.targettooltext=b.targettooltext;p=(t.is3D=s=k.is3d=/3d$/.test(f))?y.chartPaletteStr.chart3D:y.chartPaletteStr.chart2D;t.defaultSeriesType=f;r=0<b.palette&&6>b.palette?b.palette:h(this.paletteIndex,1);r-=1;t.paletteIndex=r;f=V({},d.colorrange);this.colorRangeGetter=new Ya(f.color,void 0,this.defaultPaletteOptions.paletteColors[r],this);t.events.click=l.plotOptions.series.point.events.click=
this.linkClickFN;void 0!==q(b.clickurl)&&(t.link=b.clickurl,t.style.cursor="pointer",l.plotOptions.series.point.events.click=function(){t.events.click.call({link:b.clickurl})});K=q(b.basefont,"Verdana,sans");E=Mb(b.basefontsize,10);A=q(b.basefontcolor,g.getColor("baseFontColor"));f=q(b.outcnvbasefont,K);x=Mb(b.outcnvbasefontsize,E);r=x+hb;J=q(b.outcnvbasefontcolor,A).replace(/^#?([a-f0-9]+)/ig,"#$1");E+=hb;A=A.replace(/^#?([a-f0-9]+)/ig,"#$1");this.trendStyle=this.outCanvasStyle={fontFamily:f,color:J,
fontSize:r};z=Da(this.trendStyle);this.inCanvasStyle={fontFamily:K,fontSize:E,color:A};F=Da(this.inCanvasStyle);k.trendStyle=k.outCanvasStyle={fontFamily:f,color:J,fontSize:r};V(l.legend,{title:{style:{fontFamily:q(b.legendcaptionfont,f),fontSize:h(b.legendcaptionfontsize,x)+"px",color:ha(q(b.legendcaptionfontcolor,J)),fontWeight:h(b.legendcaptionfontbold,1)?"bold":"normal"},align:Wb[q(b.legendcaptionalignment)]},itemStyle:{fontFamily:q(b.legenditemfont,f),fontSize:h(b.legenditemfontsize,x)+"px",
color:ha(q(b.legenditemfontcolor,J)),fontWeight:h(b.legenditemfontbold)?"bold":"normal"},itemHiddenStyle:{fontFamily:f,fontSize:x+"px",color:ha(q(b.legenditemhiddencolor,J))},itemHoverStyle:{color:ha(q(b.legenditemhoverfontcolor,b.legenditemfontcolor,J))}});l.legend.title.style.lineHeight=Da(l.legend.title.style);l.legend.itemStyle.lineHeight=Da(l.legend.itemStyle);l.legend.itemHiddenStyle.lineHeight=Da(l.legend.itemHiddenStyle);k=(k=oa(b.valuebordercolor,M))?G(k,h(b.valueborderalpha,b.valuealpha,
100)):M;k=u.series.dataLabels.style={fontFamily:q(b.valuefont,K),fontSize:q(b.valuefontsize,parseInt(E,10))+hb,color:G(q(b.valuefontcolor,A),h(b.valuefontalpha,b.valuealpha,100)),fontWeight:h(b.valuefontbold)?"bold":"normal",fontStyle:h(b.valuefontitalic)?"italic":"normal",border:k||b.valuebgcolor?h(b.valueborderthickness,1)+"px solid":void 0,borderColor:k,borderThickness:h(b.valueborderthickness,1),borderPadding:h(b.valueborderpadding,2),borderRadius:h(b.valueborderradius,0),backgroundColor:b.valuebgcolor?
G(b.valuebgcolor,h(b.valuebgalpha,b.valuealpha,100)):M,borderDash:h(b.valueborderdashed,0)?Y(h(b.valueborderdashlen,4),h(b.valueborderdashgap,2),h(b.valueborderthickness,1)):"none"};Da(k);u.series.dataLabels.color=k.color;this.isDataLabelBold&&(k.fontWeight="bold",delete k.lineHeight,Da(k));l.tooltip.style={fontFamily:K,fontSize:E,lineHeight:F,color:A};l.title.style={fontFamily:q(b.captionfont,f),color:q(b.captionfontcolor,J).replace(/^#?([a-f0-9]+)/ig,"#$1"),fontSize:h(b.captionfontsize,x+3)+hb,
fontWeight:0===h(b.captionfontbold)?"normal":"bold"};l.title.align=q(b.captionalignment,Ma);l.title.isOnTop=h(b.captionontop,1);l.title.alignWithCanvas=h(b.aligncaptionwithcanvas,this.alignCaptionWithCanvas,1);l.title.horizontalPadding=h(b.captionhorizontalpadding,l.title.alignWithCanvas?0:15);Da(l.title.style);l.subtitle.style={fontFamily:q(b.subcaptionfont,b.captionfont,f),color:q(b.subcaptionfontcolor,b.captionfontcolor,J).replace(/^#?([a-f0-9]+)/ig,"#$1"),fontSize:h(b.subcaptionfontsize,h(ya(h(b.captionfontsize)-
3,-1),x)+h(this.subTitleFontSizeExtender,1))+hb,fontWeight:0===h(b.subcaptionfontbold,this.subTitleFontWeight,b.captionfontbold)?"normal":"bold"};l.subtitle.align=l.title.align;l.subtitle.isOnTop=l.title.isOnTop;l.subtitle.alignWithCanvas=l.title.alignWithCanvas;l.subtitle.horizontalPadding=l.title.horizontalPadding;Da(l.subtitle.style);l.chart.trendPointStyle={style:this.trendStyle};l.orphanStyles={defaultStyle:{style:V({},this.inCanvasStyle)}};l.chart.colorRangeStyle={style:{fontFamily:K,fontSize:E,
lineHeight:F,color:A}};Da(l.chart.colorRangeStyle);k=h(b.scaleonresize,1);t.origW=u=h(b.origw,k?this.origRenderWidth:a);t.origH=k=h(b.origh,k?this.origRenderHeight:e);u=(t.autoScale=K=h(b.autoscale,1))?Xa(u,k,a,e):1;this.scaleFactor=t.scaleFactor=u;this.createGaugeAxis&&this.createGaugeAxis(d,l,{fontFamily:f,fontSize:r,lineHeight:z,color:J});this.parseStyles(l);delete l.xAxis.labels.style.backgroundColor;delete l.xAxis.labels.style.borderColor;delete l.yAxis[0].labels.style.backgroundColor;delete l.yAxis[0].labels.style.borderColor;
delete l.yAxis[1].labels.style.backgroundColor;delete l.yAxis[1].labels.style.borderColor;this.showTooltip=h(b.showtooltip,this.showTooltip,1);this.tooltipSepChar=q(b.tooltipsepchar,Nb);this.showValues=h(b.showvalues,b.showvalue,this.showValues,1);this.seriesNameInToolTip=h(b.seriesnameintooltip,1);this.showTooltip||(l.tooltip.enabled=!1);l.plotOptions.series.connectNullData=h(b.connectnulldata,0);t.backgroundColor={FCcolor:{color:q(b.bgcolor,g.getColor(p.bgColor)),alpha:q(b.bgalpha,g.getColor(p.bgAlpha)),
angle:q(b.bgangle,g.getColor(p.bgAngle)),ratio:q(b.bgratio,g.getColor(p.bgRatio))}};p=h(b.showborder,s?0:1);t.borderWidth=p?h(b.borderthickness,1):0;t.borderRadius=h(b.borderradius,0);t.borderDashStyle=h(b.borderdashed,0)?Y(h(b.borderdashlen,4),h(b.borderdashgap,2),t.borderWidth):void 0;t.borderColor=G(q(b.bordercolor,s?"#666666":g.getColor("borderColor")),q(b.borderalpha,s?"100":g.getColor("borderAlpha")));t.plotBackgroundColor=t.plotBorderColor=xa;t.plotBorderWidth=0;t.plotShadow=0;t.bgSWF=q(b.bgimage,
b.bgswf);t.bgSWFAlpha=h(b.bgimagealpha,b.bgswfalpha,100);s=q(b.bgimagedisplaymode,"none").toLowerCase();p=B(b.bgimagevalign,M).toLowerCase();f=B(b.bgimagehalign,M).toLowerCase();"tile"==s||"fill"==s||"fit"==s?(p!=Fa&&p!=Ga&&p!=mb&&(p=Ga),"left"!=f&&f!=Ga&&"right"!=f&&(f=Ga)):(p!=Fa&&p!=Ga&&p!=mb&&(p=Fa),"left"!=f&&f!=Ga&&"right"!=f&&(f="left"));t.bgImageDisplayMode=s;t.bgImageVAlign=p;t.bgImageHAlign=f;t.bgImageScale=h(b.bgimagescale,100);t.logoURL=B(b.logourl);t.logoPosition=q(b.logoposition,"tl").toLowerCase();
t.logoAlpha=h(b.logoalpha,100);t.logoLink=B(b.logolink);t.logoScale=h(b.logoscale,100);t.logoLeftMargin=h(b.logoleftmargin,0);t.logoTopMargin=h(b.logotopmargin,0);t.annRenderDelay=B(b.annrenderdelay);s=l.tooltip.style;s.backgroundColor=G(q(s.backgroundColor,b.tooltipbgcolor,b.hovercapbgcolor,b.hovercapbg,g.getColor("toolTipBgColor")),q(b.tooltipbgalpha,100));s.borderColor=G(q(s.borderColor,b.tooltipbordercolor,b.hovercapbordercolor,b.hovercapborder,g.getColor("toolTipBorderColor")),q(b.tooltipborderalpha,
100));l.tooltip.constrain=h(b.constraintooltip,1);l.tooltip.shadow=h(b.showtooltipshadow,b.showshadow,1)?{enabled:!0,opacity:ya(h(b.tooltipbgalpha,100),h(b.tooltipborderalpha,100))/100}:!1;s.borderWidth=h(b.tooltipborderthickness,1)+"px";b.tooltipborderradius&&(s.borderRadius=h(b.tooltipborderradius,1)+"px");l.tooltip.style.padding=h(b.tooltippadding,this.tooltippadding,3)+"px";b.tooltipcolor&&(s.color=ub(b.tooltipcolor));t.rotateValues=h(b.rotatevalues,0);t.placeValuesInside=h(b.placevaluesinside,
0);t.valuePosition=b.valueposition;t.valuePadding=h(b.valuepadding,4);l.plotOptions.series.shadow=h(b.showshadow,b.showcolumnshadow,this.defaultPlotShadow,this.colorManager.getColor("showShadow"));t.useRoundEdges&&(l.plotOptions.series.shadow=h(b.showshadow,b.showcolumnshadow,1),l.plotOptions.series.borderRadius=1,l.tooltip.borderRadius=2);l.title.text=U(b.caption);l.subtitle.text=U(b.subcaption);b.showtooltip==bb&&(l.tooltip.enabled=!1);g=h(b.plotspacepercent,20);if(80<g||0>g)g=20;this.plotSpacePercent=
l.plotOptions.series.groupPadding=g/200;this.parseExportOptions(l);t.dataStreamURL=q(b.datastreamurl,"");t.refreshInterval=h(b.refreshinterval,1);t.dataStamp=b.datastamp;t.useMessageLog=h(b.usemessagelog,0);t.messageLogWPercent=La(h(b.messagelogwpercent,80),100);t.messageLogHPercent=La(h(b.messageloghpercent,70),100);t.messageLogShowTitle=h(b.messagelogshowtitle,1);t.messageLogTitle=q(b.messagelogtitle,"Message Log");t.messageLogColor=q(b.messagelogcolor,"#fbfbfb");t.messageGoesToJS=h(b.messagegoestojs,
0);t.messageGoesToLog=h(b.messagegoestolog,1);t.messageJSHandler=q(b.messagejshandler,"");t.messagePassAllToJS=h(b.messagepassalltojs,0);t.messageLogIsCancelable=h(b.messagelogiscancelable,1);t.alwaysShowMessageLogMenu=h(b.alwaysshowmessagelogmenu,t.useMessageLog);t.showRTMenuItem=h(b.showrtmenuitem,0);g=h(b.showgaugeborder,1);t.gaugeBorderColor=q(b.gaugebordercolor,this.gaugeBorderColor,"333333");t.gaugeBorderThickness=g?h(b.gaugeborderthickness,this.gaugeBorderThickness,2):0;t.gaugeBorderAlpha=
q(b.gaugeborderalpha,Qa);t.gaugeFillColor=q(b.gaugefillcolor,b.ledbgcolor,"000000");t.useSameFillColor=h(b.usesamefillcolor,0);t.useSameFillBgColor=h(b.usesamefillbgcolor,t.useSameFillColor);t.colorRangeFillMix=ua(b.colorrangefillmix,b.gaugefillmix,this.colorRangeFillMix,"{light-10},{dark-10},{light-10},{dark-10}");t.colorRangeFillRatio=ua(b.colorrangefillratio,b.gaugefillratio,this.colorRangeFillRatio,b.gaugefillratio,"0,10,80,10");t.showColorRangeBorder=h(b.showcolorrangeborder,b.showgaugeborder,
this.showColorRangeBorder,0);t.colorRangeBorderColor=q(b.colorrangebordercolor,b.gaugebordercolor,"{dark-20}");t.colorRangeBorderThickness=g?h(b.colorrangeborderthickness,b.gaugeborderthickness,1):0;t.colorRangeBorderAlpha=h(b.colorrangeborderalpha,b.gaugeborderalpha,100);t.roundRadius=h(b.roundradius,b.gaugeroundradius,0);t.showShadow=h(b.showshadow,1);t.gaugeType=h(b.gaugetype,this.gaugeType,1);this.preSeriesAddition&&this.preSeriesAddition(l,d,a,e);this.series(d,l,c,a,e);this.postSeriesAddition&&
this.postSeriesAddition(l,d,a,e);this.configureAxis&&this.configureAxis(l,d);this.spaceManager&&this.spaceManager(l,d,a,e);this.postSpaceManager&&this.postSpaceManager();this.updateSnapPoints&&this.updateSnapPoints(l);this.latestDataUpdater&&this.latestDataUpdater(l,d,a,e);c=t.toolbar={button:{}};g=c.button;g.scale=h(b.toolbarbuttonscale,1.15);g.width=h(b.toolbarbuttonwidth,15);g.height=h(b.toolbarbuttonheight,15);g.radius=h(b.toolbarbuttonradius,2);g.spacing=h(b.toolbarbuttonspacing,5);g.fill=G(q(b.toolbarbuttoncolor,
"ffffff"));g.labelFill=G(q(b.toolbarlabelcolor,"cccccc"));g.symbolFill=G(q(b.toolbarsymbolcolor,"ffffff"));g.hoverFill=G(q(b.toolbarbuttonhovercolor,"ffffff"));g.stroke=G(q(b.toolbarbuttonbordercolor,"bbbbbb"));g.symbolStroke=G(q(b.toolbarsymbolbordercolor,"9a9a9a"));g.strokeWidth=h(b.toolbarbuttonborderthickness,1);g.symbolStrokeWidth=h(b.toolbarsymbolborderthickness,1);d=g.symbolPadding=h(b.toolbarsymbolpadding,5);g.symbolHPadding=h(b.toolbarsymbolhpadding,d);g.symbolVPadding=h(b.toolbarsymbolvpadding,
d);g=c.position=q(b.toolbarposition,"tr").toLowerCase();switch(g){case "tr":case "tl":case "br":case "bl":break;default:g="tr"}d=c.hAlign="left"===(M+b.toolbarhalign).toLowerCase()?"l":g.charAt(1);g=c.vAlign="bottom"===(M+b.toolbarvalign).toLowerCase()?"b":g.charAt(0);c.hDirection=h(b.toolbarhdirection,"r"===d?-1:1);c.vDirection=h(b.toolbarvdirection,"b"===g?-1:1);c.vMargin=h(b.toolbarvmargin,6);c.hMargin=h(b.toolbarhmargin,10);c.x=h(b.toolbarx,"l"===d?0:a);c.y=h(b.toolbary,"t"===g?0:e);ba.console&&
ba.console.log&&ba.FC_DEV_ENVIRONMENT&&console.log(l);h(b.showrtmenuitem,0)?(l.callbacks||(l.callbacks=[])).push(this.drawRTMenuButtons):t.useMessageLog&&t.alwaysShowMessageLogMenu&&t.messageGoesToLog&&(l.callbacks||(l.callbacks=[])).push(this.drawMLMenuButtons);m&&n&&(this.hcJSON.alerts=this.parseAlertObj(n));return l},parseAlertObj:function(){return fb.parseAlertObj.apply(this,arguments)},drawMLMenuButtons:function(){var a=this.options,e=a.chart,c=this.menu||(this.menu=[]),d=this.toolbar,a=a[P],
b;c.push(b=Ea({chart:this,basicStyle:a&&a.outCanvasStyle||this.outCanvasStyle||{},items:[{text:"Show Log",visibility:"hidden",onclick:function(){y&&y.messageLogger&&y.messageLogger.open();b.showItem(4);b.hideItem(3)}},{text:"Hide Log",visibility:"hidden",onclick:function(){y&&y.messageLogger&&y.messageLogger.close();b.showItem(3);b.hideItem(4)}}],position:{x:e.spacingLeft,y:this.chartHeight-e.spacingBottom+(e.showFormBtn||e.showRestoreBtn?10:-15)}}));b.hideItem(1);this.elements.configureButton=d.add("loggerIcon",
function(a,c){return function(){b.visible?b.hide():b.show({x:a,y:c+1})}}(),{x:e.spacingLeft,y:this.chartHeight-e.spacingBottom+(e.showFormBtn||e.showRestoreBtn?10:-15),tooltip:"Show & Hide Message"})},drawRTMenuButtons:function(){var a=this.logic,e=a.chartInstance,c=this.options,d=c.chart,b=d&&d.alwaysShowMessageLogMenu,f=this.menu||(this.menu=[]),m=this.toolbar,c=(c=c[P])&&c.outCanvasStyle||this.outCanvasStyle||{},g,a=(a=e.isUpdateActive||a.eiMethods.isUpdateActive)&&a.call(e);f.push(g=Ea({chart:this,
basicStyle:c,items:[{text:"Stop Update",visibility:a?rb:"hidden",onclick:function(){g.hideItem(0);g.showItem(1);e.stopUpdate()}},{text:"Start Update",visibility:a?"hidden":rb,onclick:function(){g.hideItem(1);g.showItem(0);e.restartUpdate()}},{text:"Clear Chart",onclick:function(){e.clearChart()}},{text:"Show Log",visibility:"hidden",onclick:function(){y&&y.messageLogger&&y.messageLogger.open();g.showItem(4);g.hideItem(3)}},{text:"Hide Log",visibility:"hidden",onclick:function(){y&&y.messageLogger&&
y.messageLogger.close();g.showItem(3);g.hideItem(4)}}],position:{x:d.spacingLeft,y:this.chartHeight-d.spacingBottom+(d.showFormBtn||d.showRestoreBtn?10:-15)}}));g.hideItem(2);g.hideItem(0);g.hideItem(1);g.showItem(a?0:1);!b&&g.hideItem(3);g.hideItem(4);this.elements.configureButton=m.add("configureIcon",function(a,b){return function(){g.visible?g.hide():g.show({x:a,y:b+1})}}(),{x:d.spacingLeft,y:this.chartHeight-d.spacingBottom+(d.showFormBtn||d.showRestoreBtn?10:-15),tooltip:"Manage RealTime Update"})},
latestDataUpdater:function(a){var e=this.chartInstance;a=(a=a.series&&a.series)&&a[0]&&a[0].data;var c,d,b;if((e=e&&e.jsVars&&e.jsVars._rtLastUpdatedData)&&a)for(c=0,d=e.values&&e.values.length;c<d;c+=1)if(b=a[c])b.y=e.values[c],b.displayValue=e.labels[c],b.toolText=e.toolTexts[c]},styleApplicationDefinition_font:function(a,e,c){var d,b=!1,f,m,g,p=this.styleMapForFont;switch(e){case "caption":a=a.title;break;case "datalabels":a=a.plotOptions.series.dataLabels;break;case "value":a=a.plotOptions.series.dataLabels;
break;case "datavalues":a=a.plotOptions.series.dataLabels;b=!0;break;case "subcaption":a=a.subtitle;break;case "tooltip":a=a.tooltip;break;case "trendvalues":a=a.chart.trendPointStyle;break;case "xaxisname":a=a.xAxis.title;break;case "vlinelabels":a={style:a[P].divlineStyle};break;case "gaugelabels":a=a.chart.colorRangeStyle;break;case "tickvalues":a=a.scale.tickValues;break;case "limitvalues":a=a.scale.limitValues;break;case "openvalue":a=a.chart.openValue;break;case "closevalue":a=a.chart.closeValue;
break;case "highlowvalue":a=a.chart.highLowValue;break;case "legend":a={style:a.legend.itemStyle};break;default:a.orphanStyles[e]=a={text:"",style:{}}}if("object"===typeof a)if(a instanceof Array)for(f=0,m=a.length;f<m;f+=1){g=a[f];for(d in c)if(e=d.toLowerCase(),"function"===typeof p[e])p[e](c[d],g,b);Da(g.style)}else{for(d in c)if(e=d.toLowerCase(),"function"===typeof p[e])p[e](c[d],a,b);Da(a.style)}},createGaugeAxis:function(a,e,c){a=a.chart;var d=this.colorManager,b=this.numberFormatter,f=this.isHorizontal?
h(a.ticksbelowgauge,a.ticksbelowgraph,this.ticksbelowgauge,1)?3:1:h(a.ticksonright,this.ticksOnRight,1)?2:4,d=q(a.majortmcolor,d.getColor("tickColor")),m=h(a.majortmalpha,100),g=h(h(a.majortmheight)*this.scaleFactor,this.majorTMHeight,6),p=h(a.tickvaluestep,a.tickvaluesstep,1),n=h(a.showtickmarks,1),k=n?h(a.connecttickmarks,this.connectTickMarks,1):0,l=h(a.showtickvalues,n),s=h(a.majortmthickness,1),u=h(b.getCleanValue(a.upperlimit)),b=h(b.getCleanValue(a.lowerlimit)),t=1==h(a.reversescale,0);this.isHorizontal||
(t=!t);p=1>p?1:p;e.scale={min:null,max:null,axisPosition:f,showTickMarks:n,showTickValues:l,showLimits:h(a.showlimits,l),adjustTM:Boolean(h(a.adjusttm,1)),majorTMNumber:h(a.majortmnumber,-1),majorTMColor:G(d,m),majorTMHeight:n?g:0,majorTMThickness:s,minorTMNumber:h(a.minortmnumber,this.minorTMNumber,4),minorTMColor:G(q(a.minortmcolor,d),h(a.minortmalpha,m)),minorTMHeight:n?h(h(a.minortmheight,a.minortmwidth)*this.scaleFactor,la(g/2)):0,minorTMThickness:h(a.minortmthickness,1),tickMarkDistance:h(h(a.tickmarkdistance,
a.tickmarkgap)*this.scaleFactor,this.tickMarkDistance,3),tickValueDistance:h(h(a.tickvaluedistance,a.displayvaluedistance)*this.scaleFactor,2)+2,placeTicksInside:h(a.placeticksinside,0),placeValuesInside:h(a.placevaluesinside,0),tickValueStep:p,setAdaptiveMin:h(a.setadaptivemin,0),upperLimit:u,lowerLimit:b,upperLimitDisplay:B(a.upperlimitdisplay),lowerLimitDisplay:B(a.lowerlimitdisplay),reverseScale:t,connectorColor:G(q(a.connectorcolor,d),h(a.connectoralpha,m)),connectorThickness:k?h(a.connectorthickness,
s):0,majorTM:[],minorTM:[],trendPoint:[],labels:{style:V({},c)},tickValues:{style:V({},c)},limitValues:{style:V({},c)}}},configureAxis:function(a,e){var c=e.chart,d,b,f,m,g=this.colorManager,p,n,k,l,s,u=this.colorRangeGetter,t=(u=u&&u.colorArr)&&u.length;b=u&&u[0];d=u&&u[t-1];m=this.minDataValue;n=this.maxDataValue;u=a.scale;k=u.lowerLimit;l=u.upperLimit;var t=this.numberFormatter,r;if(a.series[0]&&($(m)&&$(n)?(k=k<=m?k:b&&b.minvalue,l=l>=n?l:d&&d.maxvalue):(k=h(k,b&&b.minvalue),l=h(l,d&&d.maxvalue)),
d=new Cb(k,l,!1,u,this.numberFormatter),d.calculateLimits(this.maxDataValue,this.minDataValue),d.calculateTicks(),u.majorTM=d.getMajorTM(),u.minorTM=d.getMinorTM(),b=u.min=d.min,d=u.max=d.max,e.trendpoints&&(f=e.trendpoints.point)&&0<(p=f.length))){u.trendPoint=[];for(n=0;n<p;n+=1)m=f[n],s=h(m.dashed,0)?Y(q(Math.max(m.dashlen,m.thickness),4),h(m.dashgap,3),h(m.thickness,1)):void 0,k=h(m.startvalue,m.value),l=h(m.endvalue,k),r=k!==l,k<=d&&k>=b&&l<=d&&l>=b&&(u.trendPoint.push({style:V(V(a.chart.trendPointStyle.style),
{}),startValue:k,endValue:l,tooltext:B(U(m.markertooltext)),displayValue:B(U(m.displayvalue),r?M:t.scale(k)),showOnTop:h(m.showontop,c.ticksbelowgauge,c.ticksbelowgraph,1),color:q(m.color,g.getColor("trendLightColor")),alpha:h(m.alpha,99),thickness:h(m.thickness,1),dashStyle:s,useMarker:h(m.usemarker,0),markerColor:G(q(m.markercolor,m.color,g.getColor("trendLightColor")),100),markerBorderColor:G(q(m.markerbordercolor,m.bordercolor,g.getColor("trendDarkColor")),100),markerRadius:h(h(m.markerradius)*
this.scaleFactor,5),markerToolText:oa(m.markertooltext),trendValueDistance:h(h(m.trendvaluedistance,c.trendvaluedistance)*this.scaleFactor,u.tickValueDistance),isZone:r,valueInside:h(m.valueinside,c.placevaluesinside,0),showBorder:h(m.showborder,1),borderColor:G(q(m.bordercolor,m.color,g.getColor("trendDarkColor")),h(m.borderalpha,m.alpha,100)),radius:h(h(m.radius)*this.scaleFactor),innerRadius:h(h(m.innerradius)*this.scaleFactor)}),qa(q(m.bordercolor,m.color,g.getColor("trendDarkColor"))));"lineargauge"===
this.defaultSeriesType&&y.stableSort&&y.stableSort(u.trendPoint,function(a,b){return a.startValue-b.startValue})}},placeTickMark:function(a,e,c){var d=this.smartLabel,b=a.chart,f=this.width-(b.marginRight+b.marginLeft),m=this.height-(b.marginTop+b.marginBottom);a=a.scale;var g=a.min,p=a.max,n=a.axisPosition,k=a.showLimits,l=a.showTickValues,s=a.tickMarkDistance,u=a.tickValueDistance,t=Math.max(a.majorTMHeight,a.minorTMHeight),r=a.placeTicksInside,K=a.placeValuesInside,E=a.reverseScale,q=0,J=0,x=1,
z,F=a.majorTM.length-1,C=2===n||4===n?!1:!0,D=6;e=C?m-c:f-e;c=0;var T=a.tickValues.style,pa=a.limitValues.style;a.majorTM[0]&&a.majorTM[1]&&(z=a.majorTM[1].value-a.majorTM[0].value);r||(q+=s+t);if(l||k)for(d.setStyle(pa),k=h(parseInt(pa.fontSize,10),10),l=h(parseInt(pa.lineHeight,10),12),l/=2,K||(q+=u),3===n&&(J=k),C?(m=e-q,f=f/(p-g)*z/2+6):(f=e-q,m=m/(p-g)*z+l),a.majorTM[0]&&(z=a.majorTM[0],z.isString?z.displayValue&&(g=d.getSmartText(z.displayValue,f,m),z.displayValue=g.text,z._oriText=g.oriText,
g.tooltext&&(z.originalText=g.tooltext),C?(c=Math.max(c,g.height),z.labelY=1===n&&!K||3===n&&K?k-g.height:J,D=Math.min(6,g.width/2)):(c=Math.max(c,g.width),z.labelY=k-(E?g.height-l:l),z.labelX=0)):x=0,C&&(E?(z.labelX=D,z.align=ab):(z.labelX=-D,z.align=Ja))),a.majorTM[F]&&(z=a.majorTM[F],z.isString?z.displayValue&&(g=d.getSmartText(z.displayValue,f,m),z.displayValue=g.text,z._oriText=g.oriText,g.tooltext&&(z.originalText=g.tooltext),C?(c=Math.max(c,g.height),z.labelY=1===n&&!K||3===n&&K?k-g.height:
J,D=Math.min(6,g.width/2)):(c=Math.max(c,g.width),z.labelY=k-(E?l:g.height-l),z.labelX=0)):(D=6,F+=1),C&&(E?(z.labelX=-D,z.align=Ja):(z.labelX=D,z.align=ab)));x<F;x++)0===x||x===F-1?(d.setStyle(pa),k=h(parseInt(pa.fontSize,10),10),l=h(parseInt(pa.lineHeight,10),12)):(d.setStyle(T),k=h(parseInt(T.fontSize,10),10),l=h(parseInt(T.lineHeight,10),12)),C&&(J=1===n&&K||3===n&&!K?k:0),z=a.majorTM[x],z.displayValue&&(z.labelX=h(z.labelX,0),C?(c=Math.max(c,l),z.labelY=J):(g=d.getOriSize(z.displayValue),c=Math.max(c,
g.width),z.labelY=k-g.height/2));d=q;K||(q+=c);q=Math.min(e,q);a._labelUsedSpace=K?c:q-d;switch(n){case 1:b.marginTop+=q;break;case 2:b.marginRight+=q;break;case 3:b.marginBottom+=q;break;case 4:b.marginLeft+=q}return q},eiMethods:{feedData:function(a){var e=this.jsVars,c=e.hcObj,d=c.logic,b=c.options&&c.options.series&&c.options.series[0],f,m;if(this.isActive()&&d&&d.linearDataParser&&(m=d.linearDataParser(a,d.multisetRealtime))){f=this.getDataJSON();c.realtimeUpdate?c.realtimeUpdate(m):c.logic.realtimeUpdate?
c.logic.realtimeUpdate(m):b&&b.realtimeUpdate&&b.realtimeUpdate(m);e._rtLastUpdatedData=d.multisetRealtime?m:this.getDataJSON();ka.raiseEvent("realtimeUpdateComplete",{data:a,updateObject:m,prevData:f.values,source:"feedData",url:null},e.fcObj);try{ba.FC_ChartUpdated&&ba.FC_ChartUpdated(e.fcObj.id)}catch(g){setTimeout(function(){throw g;},0)}return!0}return!1},getData:function(){var a,e=(a=this.jsVars)&&(a=a.hcObj)&&(a=a.options)&&(a=a.series)&&(a=a[0])&&a.data;return(a=e&&e[0])?h(a.value,a.y):null},
setData:function(a,e){var c="";if(a&&a.toString||""===a||0===a)c="value="+a.toString();if(e&&e.toString||""===e)c=c+"&label="+e.toString();c&&this.feedData(c)},stopUpdate:function(a){var e=this.__state;clearTimeout(e._toRealtime);e._rtAjaxObj&&e._rtAjaxObj.abort();e._rtPaused=!0;ka.raiseEvent("realimeUpdateStopped",{source:a},this)},restartUpdate:function(){var a=this.__state;a._rtDataUrl&&a._rtPaused&&(a._rtPaused=!1,a._rtAjaxObj.get(a._rtDataUrl))},isUpdateActive:function(){return!this.__state._rtPaused},
clearChart:function(a){var e=this.jsVars,c;a=a&&a.toString&&a.toString();(c=e.hcObj)&&(c=c.options)&&(c=c.scale)&&(e=c.min,isNaN(e)||(this.jsVars.hcObj.fusionCharts.feedData("&showLabel=0&value="+e),y.raiseEvent("chartCleared",{source:a},this,[this.id,a])))},getDataJSON:function(){var a=0,e,c,d=[],b=[],f=[],m=(e=this.jsVars)&&(e=e.hcObj)&&(e=e.options)&&(e=e.series)&&(e=e[0])&&e.data;for(e=m&&m.length?m.length:0;a<e;a+=1)c=m[a],d.push(h(c.value,c.y)),b.push(c.displayValue||""),f.push(c.toolText||
"");return{values:d,labels:b,toolTexts:f}},showLog:function(){return this.feedData("showLog=1")},hideLog:function(){return this.feedData("hideLog=1")},clearLog:function(){return this.feedData("clearLog=1")}},linearDataParser:function(a,e){var c={values:w,colors:w,toolTexts:w,links:function(a){var b=[],c;a=a.replace(Pb,"_fc_escaped_comma_");b=a.split(",");a=0;for(c=b.length;a<c;a+=1)b[a]=b[a].replace(/_fc_escaped_comma_/ig,",");return b},valueVisibility:w},d=this.chartInstance,b,f,m,g,p,n={},k=0;a=
a&&a.toString&&a.toString()||"";b=a.split("&");g=0;for(p=b.length;g<p;g+=1)if(f=b[g].split("="),m=f[1],f=f[0],f!==M&&void 0!==f&&void 0!==m&&(m!==M||e))switch(f=f.toLowerCase(),f){case "label":n.labels=m.split(",");break;case "vline":n.vlines=m.split(",");break;case "vlinelabel":n.vlineLabels=m.split(",");break;case "vlinecolor":n.vlineColors=m.split(",");break;case "vlinethickness":n.vlineThickness=m.split(",");break;case "vlinedashed":n.vlineDashed=m.split(",");break;case "value":n.values=m.split("|");
k=1;break;case "showlabel":n.showLabels=m.split(",");break;case "showvalue":n.valueVisibility=m.split("|");break;case "tooltext":n.toolTexts=m.split("|");break;case "link":n.links=m.split("|");break;case "color":n.colors=m.split("|");break;case "datastamp":n.dataStamp=m;break;case "stopupdate":n.pause="1"==m;break;case "clear":n.clear="1"==m;break;default:n[f]=m}if(e)for(n.values||(n.values=[]),g=n.values.length;g--;){for(f in c)n[f]?"function"===typeof c[f]?n[f][g]&&(n[f][g]=c[f].call(this,n[f][g])):
n[f][g]&&(n[f][g]=n[f][g].split(c[f])):n[f]=[];k=ya(n.values[g].length,k)}n.labels&&(k=ya(k,n.labels.length));n.dimension=k;n.pause&&d.stopUpdate&&d.stopUpdate("datastream");return n},series:function(){var a=this.dataObj,e=this.hcJSON,c=a.pointers&&a.pointers.pointer||a.value,d=a.chart,b=this.colorRangeGetter,f=(b=b&&b.colorArr)&&b.length,m={},g=m.data=[],p,n;e.legend.enabled=!1;Tb(c)||(c="object"!==typeof c?[{value:c}]:[c]);p=0;for(n=this.multiValueGauge?c.length:1;p<n;p++)g.push(this.getPointStub(c[p],
p,e,a));e.series[0]=m;f&&this.pointValueWatcher&&h(d.includecolorrangeinlimits,this.includeColorRangeInLimits)&&(a=h(b[0].minvalue),$(a)&&this.pointValueWatcher(a),a=h(b[f-1].maxvalue),$(a)&&this.pointValueWatcher(a))},pointValueWatcher:function(a){null!==a&&(this.maxDataValue=this.maxDataValue>a?this.maxDataValue:a,this.minDataValue=this.minDataValue<a?this.minDataValue:a)},updateSnapPoints:function(a){var e=a.chart,c=this.width,d=this.height,b=e.marginBottom;a=e.marginLeft;var f=e.marginRight,e=
e.marginTop,c=za(this.snapLiterals||(this.snapLiterals={}),{chartstartx:0,chartstarty:0,chartwidth:c,chartheight:d,chartendx:c,chartendy:d,chartcenterx:c/2,chartcentery:d/2,chartbottommargin:b,chartleftmargin:a,chartrightmargin:f,charttopmargin:e,canvasstartx:a,canvasstarty:e,canvaswidth:c-a-f,canvasheight:d-e-b,canvasendx:c-f,canvasendy:d-b});c.gaugestartx=c.canvasstartx;c.gaugestarty=c.canvasstarty;c.gaugeendx=c.canvasendx;c.gaugeendy=c.canvasendy;c.gaugecenterx=c.canvascenterx=a+c.canvaswidth/
2;c.gaugecentery=c.canvascentery=e+c.canvasheight/2}},v.base);v("linearscalegauge",{spaceManager:function(a,e,c,d){var b=a.chart,f=c-(b.marginRight+b.marginLeft),m=d-(b.marginTop+b.marginBottom),g=b.marginRight,p=b.marginLeft,n=b.marginTop,k=b.marginBottom,l=La(ya(.3*f,5),f),h=La(ya(.3*m,5),m),u,t,r=0,K;5>l&&10<c&&(l=f=5,K=g+p,g=b.marginRight=(c-f)*g/K,p=b.marginLeft=(c-f)*p/K);5>h&&10<d&&(h=m=5,K=n+k,n=b.marginRight=(d-m)*n/K,k=b.marginLeft=(d-m)*k/K);this.manageTitleSpace&&a.title.alignCaptionWithCanvas&&
(t=this.manageTitleSpace(a,e,l,h));this.placeTickMark&&(u=this.placeTickMark(a,l,h));this.manageTitleSpace&&!a.title.alignCaptionWithCanvas&&(t=this.manageTitleSpace(a,e,l,h));this.placeDataLabels&&(r=this.placeDataLabels(a,l,h,n,g,k,p,u));this.postDataLabelsPlacement&&this.postDataLabelsPlacement(a,l,h);this.fixCaptionAlignment&&this.fixCaptionAlignment(t,a,e,c,0,r)},manageTitleSpace:function(a,e,c,d){c=a.chart;return this.titleSpaceManager(a,e,this.width-(c.marginRight+c.marginLeft),this.height-
(c.marginTop+c.marginBottom)-d)},placeDataLabels:function(a,e,c,d,b,f){var m=this.smartLabel;e=a.chart;var g=this.width-(e.marginRight+e.marginLeft),p=this.height-(e.marginTop+e.marginBottom);d=e.marginBottom;b=a.plotOptions.series.dataLabels;var n=b.style,k=h(parseInt(n.lineHeight,10),12);c=p-c;var p=e.valuePadding,l=0;(a=a.series[0].data[0])&&a.displayValue!==M&&(m.setStyle(n),a.isLabelString?(m=m.getSmartText(a.displayValue,g,c-p),a.displayValue=m.text,m.tooltext&&(a.originalText=m.tooltext)):
m=m.getOriSize(a.displayValue)," "===a.displayValue&&(m={height:k}),0<m.height&&(l=m.height+p),l>c&&(a=l-c,p=a<p?p-a:0,l=c),e.marginBottom+=l,b.align=Ma,e.valuePadding=d-f+p);return l},postDataLabelsPlacement:function(a){var e=this.smartLabel,c=a.chart,d=this.width-(c.marginRight+c.marginLeft),b=this.height-(c.marginTop+c.marginBottom);a=a.scale;var f=a.min,m=a.max,g=a.axisPosition,p=a.limitValues.style,c=a.reverseScale,n,k=a.majorTM.length-1,g=2===g||4===g?!1:!0,l=h(parseInt(p.fontSize,10),10),s=
h(parseInt(p.lineHeight,10),12)/2;a.majorTM[0]&&a.majorTM[1]&&(n=a.majorTM[1].value-a.majorTM[0].value);g?(b=a._labelUsedSpace,d=d/(m-f)*n/2+6):(d=a._labelUsedSpace,b=b/(m-f)*n+s);e.setStyle(p);a.majorTM[0]&&a.majorTM[0].isString&&(n=a.majorTM[0],n.displayValue&&(f=e.getSmartText(n._oriText,d,b),n.displayValue=f.text,f.tooltext&&(n.originalText=f.tooltext),g?(f=Math.min(6,f.width/2),n.labelX=c?f:-f):n.labelY=l-(c?f.height-s:s)));a.majorTM[k]&&a.majorTM[k].isString&&(n=a.majorTM[k],n.displayValue&&
(f=e.getSmartText(n._oriText,d,b),n.displayValue=f.text,f.tooltext&&(n.originalText=f.tooltext),g?(f=Math.min(6,f.width/2),n.labelX=c?-f:f):n.labelY=l-(c?s:f.height-s)))},getPointStub:function(a,e,c,d,b){var f=c[P];e=this.colorManager;var m=this.numberFormatter;c=m.getCleanValue(a.value);var g=B(a.link),p=B(U(q(a.tooltext,f.tooltext))),f=B(U(a.displayvalue)),n=m.dataLabels(c),k,m=d.chart;d=h(m.showhovereffect);var l,s,u;this.showTooltip?void 0!==p?(b=$a(p,[1,2],{formattedValue:n},a,m),u=!0):b=null===
n?!1:void 0!==b?b+this.tooltipSepChar+n:n:b=!1;a=h(a.showvalue,this.showValues)?void 0!==f?f:B(n," "):M;this.pointValueWatcher&&this.pointValueWatcher(c);this.getPointColorObj&&(k=this.getPointColorObj(m,c));0!==d&&(d||m.gaugefillhovercolor||m.plotfillhovercolor||m.gaugefillhoveralpha||m.plotfillhoveralpha||0===m.gaugefillhoveralpha)&&(d=!0,f=q(m.gaugefillhovercolor,m.plotfillhovercolor,"{dark-10}"),m=h(m.gaugefillhoveralpha,m.plotfillhoveralpha),l={},s={},s.fluidColor=k.code,s.fluidAlpha=k.alpha,
f=(p=/\{/.test(f))?e.parseColorMix(B(k.code,M),f)[0]:f,l.fluidColor=f,l.fluidAlpha=h(m,k.alpha));return{y:c,displayValue:a,toolText:b,isLabelString:u,color:G(k.code,k.alpha),link:g,colorRange:k,doNotSlice:!0,rolloverProperties:{enabled:d,hoverAttr:l,outAttr:s}}},getPointColorObj:function(a,e){return this.colorRangeGetter.getColorObj(e)}},v.gaugebase);v("led",{singleValued:!0,isDataLabelBold:!0,preSeriesAddition:function(a,e){var c=e.chart,d=a.chart;d.ledGap=h(c.ledgap,2);d.ledSize=h(c.ledsize,2);
d.plotHoverEffect=h(c.showhovereffect,0)}},v.linearscalegauge);v("vled",{friendlyName:"Vertical LED Gauge",defaultSeriesType:"led",defaultPlotShadow:1,standaloneInit:!0,realtimeEnabled:!0,chartleftmargin:15,chartrightmargin:15,charttopmargin:10,chartbottommargin:10,showTooltip:0,connectTickMarks:0,rendererId:"led",creditLabel:X},v.led);v("hled",{friendlyName:"Horizontal LED Gauge",defaultPlotShadow:1,standaloneInit:!0,creditLabel:X,isHorizontal:!0,rendererId:"led",connectTickMarks:1,realtimeEnabled:!0},
v.vled);v("bullet",{creditLabel:X,defaultSeriesType:"bullet",defaultPlotShadow:1,drawAnnotations:!0,realtimeEnabled:!1,subTitleFontSizeExtender:0,subTitleFontWeight:0,connectTickMarks:0,minorTMNumber:0,majorTMHeight:4,chartleftmargin:10,chartrightmargin:15,charttopmargin:5,chartbottommargin:5,isDataLabelBold:!0,defaultPaletteOptions:za(V({},ta),{paletteColors:[["A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE","CEF8FF"],["FA9101","FEB654","FED7A0",
"FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:["0,100","0,100","0,100","0,100","0,100"],bgAlpha:["100","60,50","40,20","20,10","30,30"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["333333","60634E","025B6A","A15E01","68001B"],tickColor:["333333","60634E","025B6A","A15E01","68001B"],
trendColor:["545454","60634E","415D6F","845001","68001B"],plotFillColor:["545454","60634E","415D6F","845001","68001B"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50]}),preSeriesAddition:function(){var a=this.dataObj.chart;this.hcJSON.chart.colorRangeBorderThickness=h(a.showgaugeborder,a.showcolorrangeborder,0)?h(a.colorrangeborderthickness,a.gaugeborderthickness,this.gaugeBorderThickness,2):0},postSeriesAddition:function(a){var e=this.dataObj,c=this.colorManager,
d=a.series[0],b=e.chart,f=h(b.showhovereffect),m={value:e.target},g=h(b.targetthickness,3),p=q(b.targetcolor,c.getColor("plotFillColor")),n=B(b.targetalpha,100),k=G(p,n),l=h(b.targetfillpercent,60),s,u,t,r;0!==f&&(f||b.targethovercolor||b.targethoveralpha||0===b.targethoveralpha||b.targethoverthickness||0===b.targethoverthickness)&&(f=!0,t={},r={},u=h(b.targethoverthickness,g+2),g!==u&&(t["stroke-width"]=u,r["stroke-width"]=g),s=q(b.targethovercolor,"{dark-10}"),n=h(b.targethoveralpha,n),u&&(r.stroke=
k,u=/\{/.test(s),t.stroke=G(u?c.parseColorMix(p,s)[0]:s,n)),s=!!h(b.showhoveranimation,1));a=this.getPointStub(m,1,a,e);delete a.rolloverProperties;d.data.push(V(a,{borderColor:k,borderWidth:g,targetThickness:g,targetFillPercent:l,rolloverProperties:{enabled:f,hoverAttr:t,outAttr:r,showHoverAnimation:s}}))},getPointStub:function(a,e,c,d,b){var f=this.numberFormatter,m=this.colorManager,g=c[P];c=f.getCleanValue(a.value);var p=B(a.link),n=B(U(e?g.targettooltext:g.tooltext)),k=B(U(a.displayvalue)),l=
f.dataLabels(c),g=this.colorRangeGetter.getColorObj(c),s=d.chart,u=e?f.dataLabels(f.getCleanValue(d.value)):l,t=e?c:f.getCleanValue(d.target),r=e?l:f.dataLabels(t),K=q(s.plotfillcolor,m.getColor("plotFillColor"));e=h(s.plotasdot,0);var f=h(s.showhovereffect),E=h(s.showplotborder,0),A=E?h(s.plotborderthickness,1):0,J=h(s.plotfillpercent,e?25:40),x,z,F,C;d=this.showTooltip?void 0!==n?$a(n,[1,2,26,27],{formattedValue:u,targetValue:t,targetDataValue:r},d,s):null===l?!1:void 0!==b?b+this.tooltipSepChar+
l:l:M;a=h(a.showvalue,this.showValues)?void 0!==k?k:B(l," "):M;this.pointValueWatcher&&this.pointValueWatcher(c);/\{/.test(b=q(s.plotbordercolor,"{dark-20}"))&&(z=!0,b=m.parseColorMix(K,b).join());u=h(s.plotfillalpha,100);k=G(K,u);n=h(s.plotborderalpha,100);l=G(b,n);0!==f&&(f||s.plotfillhovercolor||s.plotfillhoveralpha||0===s.plotfillhoveralpha||s.showplotborderonhover||0===s.showplotborderonhover||s.plotborderhovercolor||s.plotborderhoverthickness||0===s.plotborderhoverthickness||s.plotborderhoveralpha||
0===s.plotborderhoveralpha)&&(f=!0,F={},C={},x=q(s.plotfillhovercolor,"{dark-10}"),u=h(s.plotfillhoveralpha,u),x=/\{/.test(x)?m.parseColorMix(K,x)[0]:x,F.fill=G(x,u),C.fill=k,K=h(s.showplotborderonhover),void 0===K&&(K=s.plotborderhoverthickness||s.plotborderhovercolor||s.plotborderhoveralpha?1:E),K=K?h(s.plotborderhoverthickness,A||1):0,A!==K&&(F["stroke-width"]=K,C["stroke-width"]=A),E=q(s.plotborderhovercolor,"{dark-10}"),n=h(s.plotborderhoveralpha,n),K&&(C.stroke=l,K=/\{/.test(E),F.stroke=G(K?
m.parseColorMix(z?x:b,E)[0]:E,n)),x=!!h(s.showhoveranimation,1));return{y:c,displayValue:a,toolText:d,plotAsDot:e,plotFillPercent:J,color:k,borderColor:l,borderWidth:A,link:p,colorRange:g,doNotSlice:!0,rolloverProperties:{enabled:f,hoverAttr:F,outAttr:C,showHoverAnimation:x}}}},v.linearscalegauge);v("lineargauge",{creditLabel:X,defaultSeriesType:"lineargauge",multiValueGauge:!0,realtimeEnabled:!0,gaugeType:1,chartleftmargin:15,chartrightmargin:15,charttopmargin:10,
chartbottommargin:10,colorRangeFillMix:"{light-10},{dark-20},{light-50},{light-85}",colorRangeFillRatio:"0,8,84,8",isDataLabelBold:!0,eiMethods:V(V({},v.gaugebase.eiMethods),{getData:function(a){var e,c=(e=this.jsVars)&&(e=e.hcObj)&&(e=e.options)&&(e=e.series)&&(e=e[0])&&e.data;e=c&&c.length?c.length:0;return void 0!==a&&0<a&&a<=e?(a=c[a-1],h(a.value,a.y)):null},getDataForId:function(a){var e,c=(e=this.jsVars)&&(e=e.hcObj)&&e.dataById;return c[a]&&c[a].point?(a=c[a].point,h(a.value,a.y)):null},setData:function(a,
e,c){var d="",b,f=(b=this.jsVars)&&(b=b.hcObj)&&(b=b.options)&&(b=b.series)&&(b=b[0])&&b.data;b=f&&f.length||0;f=0;if(0<a&&a<=b&&(e&&e.toString()||""===e||0===e)){for(f=a;--f;)d+="|";a="value="+(d+e);if(c&&c.toString||""===c)a+="&label="+d+c.toString();this.feedData(a)}},setDataForId:function(a,e,c){var d,b=(d=this.jsVars)&&(d=d.hcObj)&&d.dataById;b[a]&&void 0!==b[a].index&&this.setData(b[a].index+1,e,c)}}),placeDataLabels:function(a,e,c,d,b,f,m,g){d=a.scale;b=this.smartLabel;f=a.chart;m=this.width-
(f.marginRight+f.marginLeft);var p=this.height-(f.marginTop+f.marginBottom),n,k=a.plotOptions.series.dataLabels;n=k.style;var l=a.scale&&a.scale.labels&&a.scale.labels.style,s=h(parseInt(n.lineHeight,10),12);c=p-c;e=m-e;var u=f.valuePadding,t,r=0,K=0,q=0,A=0,J=0,x=0,z=a.series&&a.series[0]&&a.series[0].data||[];a=a.scale&&a.scale.trendPoint||[];var F=0,C=z.length,D;for(b.setStyle(n);F<C;F+=1)(D=z[F])&&D.displayValue!==M&&(t=u+D.radius*(3>=D.sides?.5:D.sides%2?1.1-1/D.sides:1),f.valuePadding=Math.max(f.valuePadding,
t),this.isHorizontal?(D.isLabelString?(n=b.getSmartText(D.displayValue,m,c-u),D.displayValue=n.text,n.tooltext&&(D.originalText=n.tooltext)):n=b.getOriSize(D.displayValue)," "===D.displayValue&&(n={height:s}),0<n.height&&(r=n.height+t),r>c&&(r=c),f.pointerOnOpp?(3===d.axisPosition&&(A=Math.max(g,A),r=Math.max(g,r)),K=Math.max(K,r)):(1===d.axisPosition&&(J=Math.max(g,J),r=Math.max(g,r)),q=Math.max(r,q))):(D.isLabelString?(n=b.getSmartText(D.displayValue,e-u,p),D.displayValue=n.text,n.tooltext&&(D.originalText=
n.tooltext)):n=b.getOriSize(D.displayValue),0<n.width&&(x=n.width+t),x>e&&(x=e),f.pointerOnOpp?2===d.axisPosition?(f.marginRight-=g,f.marginRight+=Math.max(g,x)):f.marginRight+=x:4===d.axisPosition?(f.marginLeft-=g,f.marginLeft+=Math.max(g,x)):f.marginLeft+=x),k.align=Ma);b.setStyle(l);F=0;for(C=a.length;F<C;F+=1)(D=a[F])&&D.displayValue!==M&&(t=u+.5*D.markerRadius,f.valuePadding=Math.max(t,f.valuePadding),this.isHorizontal&&(n=b.getOriSize(D.displayValue),0<n.height&&(r=n.height+t),r>c&&(r=c),D.showOnTop?
(1===d.axisPosition&&(J=Math.max(g,J),r=Math.max(g,r)),q=Math.max(q,r)):(3===d.axisPosition&&(A=Math.max(g,A),r=Math.max(g,r)),K=Math.max(r,K)),k.align=Ma));this.isHorizontal&&(f.marginBottom+=K-A,f.marginTop+=q-J,r=q+K-A-J);return r},preSeriesAddition:function(a,e){var c=a.chart,d=e.chart,b=this.colorManager,f=a.scale;c.pointerRadius=h(d.pointerradius,10);c.pointerBgColor=q(d.pointerbgcolor,d.pointercolor,b.getColor("pointerBgColor"));c.pointerBgAlpha=h(d.pointerbgalpha,100);c.pointerBorderColor=
q(d.pointerbordercolor,b.getColor("pointerBorderColor"));c.pointerBorderThickness=h(d.pointerborderthickness,1);c.pointerBorderAlpha=h(d.pointerborderalpha,100);c.pointerSides=h(d.pointersides,3);c.showGaugeLabels=h(d.showgaugelabels,1);c.showPointerShadow=h(d.showpointershadow,d.showshadow,1);c.valuePadding=h(d.valuepadding,2);this.isHorizontal?(c.pointerOnOpp=h(d.pointerontop,1==f.axisPosition?0:1)?0:1,c.gaugeType=f.reverseScale?2:1,c.valueAbovePointer=h(d.valueabovepointer,c.pointerOnOpp?0:1,1),
c.valueInsideGauge=c.valueAbovePointer===c.pointerOnOpp?1:0):(c.pointerOnOpp=h(d.pointeronright,2==f.axisPosition?0:1),c.gaugeType=f.reverseScale?4:3)},getPointStub:function(a,e,c,d,b){var f=this.numberFormatter,m=this.colorManager,g=c.chart,p=c[P];c=f.getCleanValue(a.value);var n=B(a.link),k=B(U(q(a.tooltext,p.tooltext))),l=B(U(a.displayvalue)),s=f.dataLabels(c),f=this.colorRangeGetter.getColorObj(c);d=d.chart;var p=h(a.alpha,a.bgalpha,g.pointerBgAlpha),u=q(a.color,a.bgcolor,g.pointerBgColor),t=
G(u,p),r=h(a.showborder,d.showplotborder,1),K=h(a.borderalpha,g.pointerBorderAlpha),E=q(a.bordercolor,g.pointerBorderColor),A=G(E,K),J=r?h(a.borderthickness,g.pointerBorderThickness):0,x=h(a.radius,g.pointerRadius),z=h(a.showhovereffect,d.showhovereffect),F,C,D,T,pa,I,w,H=!1,N=!1,v,Aa,L;this.showTooltip?void 0!==k?(b=$a(k,[1,2],{formattedValue:s},a,d),N=!0):b=null===s?!1:void 0!==b?b+this.tooltipSepChar+s:s:b=M;h(a.showvalue,this.showValues)?void 0!==l?H=!0:l=B(s," "):l=M;k=h(a.sides,g.pointerSides);
3>k&&(k=3);this.pointValueWatcher&&this.pointValueWatcher(c);0!==z&&(z||a.bghovercolor||d.pointerbghovercolor||d.plotfillhovercolor||a.bghoveralpha||d.pointerbghoveralpha||d.plotfillhoveralpha||0===a.bghoveralpha||0===d.pointerbghoveralpha||a.showborderonhover||d.showborderonhover||0===a.showborderonhover||0===d.showborderonhover||a.borderhoverthickness||d.pointerborderhoverthickness||0===a.borderhoverthickness||0===d.pointerborderhoverthickness||a.borderhovercolor||d.pointerborderhovercolor||a.borderhoveralpha||
d.pointerborderhoveralpha||0===a.borderhoveralpha||0===d.pointerborderhoveralpha||a.hoverradius||d.pointerhoverradius||0===a.hoverradius||0===d.pointerhoverradius)&&(z=!0,s=q(a.bghovercolor,d.pointerbghovercolor,d.plotfillhovercolor,"{dark-10}"),D=h(a.bghoveralpha,d.pointerbghoveralpha,d.plotfillhoveralpha),F=h(a.showborderonhover,d.showborderonhover),void 0===F&&(F=a.borderhoverthickness||0===a.borderhoverthickness||a.borderhovercolor||a.borderhoveralpha||0===a.borderhoveralpha?1:r),r=q(a.borderhovercolor,
d.pointerborderhovercolor,"{dark-10}"),pa=h(a.borderhoveralpha,d.pointerborderhoveralpha),T=F?h(a.borderhoverthickness,d.pointerborderhoverthickness,J||1):0,C=h(a.hoverradius,d.pointerhoverradius,x+2),I=!!h(a.showhoveranimation,d.showhoveranimation,1),F={},Aa={},J!==T&&(F["stroke-width"]=T,Aa["stroke-width"]=J),Aa.fill=t,s=(w=/\{/.test(s))?m.parseColorMix(u,s)[0]:s,F.fill=G(s,h(D,p)),T&&(Aa.stroke=A,u=/\{/.test(r),F.stroke=G(u?m.parseColorMix(E,r)[0]:r,h(pa,K))),C&&(I?(v={r:C},L={r:x}):(F.r=C,Aa.r=
x)));return{y:c,displayValue:l,id:q(a.id,"pointer_"+e),editMode:h(a.editmode,d.editmode),isLabelString:H,isTooltextString:N,toolText:b,_tooltext:a.tooltext,plotFillPercent:q(d.plotfillpercent,40),bgalpha:p,color:t,borderAlpha:h(d.showplotborder,1)?g.pointerBorderAlpha:0,borderColor:A,borderWidth:J,radius:x,sides:k,link:n,colorRange:f,doNotSlice:!0,tooltipConstraint:this.tooltipConstraint,rolloverProperties:{enabled:z,hoverAttr:F,hoverAnimAttr:v,outAttr:Aa,outAnimAttr:L}}}},v.linearscalegauge);v("hlineargauge",
{friendlyName:"Horizontal Linear Gauge",creditLabel:X,defaultSeriesType:"lineargauge",rendererId:"hlinear",standaloneInit:!0,isHorizontal:!0},v.lineargauge);v("vlineargauge",{friendlyName:"Vertical Linear Gauge",creditLabel:X,defaultSeriesType:"lineargauge",connectTickMarks:0,standaloneInit:!0},v.lineargauge);v("thermometer",{friendlyName:"Thermometer Gauge",creditLabel:X,defaultSeriesType:"thermometer",rendererId:"thermometer",connectTickMarks:0,tickMarkDistance:0,standaloneInit:!0,realtimeEnabled:!0,
isDataLabelBold:!0,defaultPlotShadow:0,alignCaptionWithCanvas:0,defaultPaletteOptions:za(V({},ta),{thmBorderColor:["545454","60634E","415D6F","845001","68001B"],thmFillColor:["999999","ADB68F","A2C4C8","FDB548","FF7CA0"]}),preSeriesAddition:function(a,e){var c=a.chart,d=e.chart,b=this.colorManager,f;f=this.numberFormatter;var m=h(d.showhovereffect);c.thmOriginX=h(d.thmoriginx,d.gaugeoriginx);c.thmOriginY=h(d.thmoriginy,d.gaugeoriginy);c.thmBulbRadius=h(f.getCleanValue(d.thmbulbradius,!0));c.thmHeight=
h(f.getCleanValue(h(d.thmheight,d.gaugeheight),!0));c.gaugeFillColor=q(d.gaugefillcolor,d.thmfillcolor,b.getColor("thmFillColor"));c.gaugeFillAlpha=h(d.gaugefillalpha,d.thmfillalpha,Qa);0!==m&&(m||d.thmfillhovercolor||d.plotfillhovercolor||d.thmfillhoveralpha||d.plotfillhoveralpha||0===d.thmfillhoveralpha)&&(c.plotHoverEffects={},c.plotHoverEffects.enabled=!0,f=q(d.thmfillhovercolor,d.plotfillhovercolor,"{dark-10}"),c.plotHoverEffects.thmFillHoverColor=/\{/.test(f)?b.parseColorMix(c.gaugeFillColor,
f)[0]:f,c.plotHoverEffects.thmFillHoverAlpha=q(d.thmfillhoveralpha,d.plotfillhoveralpha,c.gaugeFillAlpha));f=h(d.gaugeborderalpha,h(d.showgaugeborder,1)?40:0);c.gaugeBorderColor=G(q(d.gaugebordercolor,b.getColor("thmBorderColor")),f);c.gaugeBorderThickness=h(d.gaugeborderthickness,1);c.thmGlassColor=q(d.thmglasscolor,W(c.gaugeFillColor,30));c.use3DLighting=!h(d.use3dlighting,1)},getPointColorObj:function(a){return{code:q(a.gaugefillcolor,a.thmfillcolor,this.colorManager.getColor("thmFillColor")),
alpha:h(a.gaugefillalpha,a.thmfillalpha,100)}},getPointStub:v.linearscalegauge,placeDataLabels:v.linearscalegauge,manageTitleSpace:v.linearscalegauge,spaceManager:function(a,e,c,d){var b=a.chart,f=c-(b.marginRight+b.marginLeft),m=d-(b.marginTop+b.marginBottom),g=b.marginRight,p=b.marginLeft,n=b.marginTop,k=b.marginBottom;d=.3*f;var l=.3*m,s=b.thmOriginX,u=b.thmOriginY,t=b.thmBulbRadius,r=b.thmHeight,K=$(s),q=$(u),A=$(t),J=$(r),x=4===a.scale.axisPosition,z=0,F=0,C,D,T=0;a.title.alignWithCanvas||(m-=
T=this.manageTitleSpace(a,e,0,m/2));this.placeTickMark&&(f-=z=this.placeTickMark(a,2*h(t,4),l));A||(b.thmBulbRadius=t=Math.min(f/2,.13*h(r,m)),A=!0);A&&(D=.643*t,d=C=2*D,A=(2*t-C)/2,K?b.marginLeft=x?b.marginLeft+(F=s-D-z):b.marginLeft+(F=s-D):x?(b.marginLeft+=(c-p-g-A-C)/2-z/2,b.marginRight-=(c-p-g-A-C)/2-z/2,b.marginRight+=F=Math.min(t,f/2)-D):(b.marginLeft+=(c-p-g-A-C)/2-z/2,b.marginRight-=(c-p-g-A-C)/2-z/2,b.marginLeft+=F=Math.min(t,f/2)-D),f-=F);b.marginRight+=f-C;a.title.alignWithCanvas&&(m-=
T=this.manageTitleSpace(a,e,0,m/2));q&&(l=u-T+t);this.placeDataLabels&&(m-=this.placeDataLabels(a,d,l,n,g,k,p));J||(b.thmHeight=q?r=Math.max(u-T+t-D,3*t):r=Math.max(m-D,3*t));b.marginTop=q?b.marginTop+(u-T+t-r):b.marginTop+(m-r);e=1.766*t;b.marginBottom+=e;b.valuePadding+=e;b.thmHeight=b.plotHeight=r-e;this.postDataLabelsPlacement&&this.postDataLabelsPlacement(a,d,l)}},v.gaugebase);v("cylinder",{friendlyName:"Cylinder Gauge",creditLabel:X,defaultSeriesType:"cylinder",connectTickMarks:0,rendererId:"cylinder",
tickMarkDistance:2,standaloneInit:!0,charttopmargin:10,chartbottommargin:10,chartrightmargin:10,chartleftmargin:10,isDataLabelBold:!0,realtimeEnabled:!0,alignCaptionWithCanvas:0,defaultPaletteOptions:za(V({},ta),{cylFillColor:["CCCCCC","ADB68F","E1F5FF","FDB548","FF7CA0"],periodColor:["EEEEEE","ECEEE6","E6ECF0","FFF4E6","FFF2F5"]}),preSeriesAddition:function(a,e){var c=a.chart,d=e.chart,b=this.colorManager,f=h(d.showhovereffect);c.cylFillColor=q(d.gaugefillcolor,d.cylfillcolor,b.getColor("cylFillColor"));
c.cylFillAlpha=q(d.gaugefillalpha,d.cylfillalpha,100);0!==f&&(f||d.cylfillhovercolor||d.plotfillhovercolor||d.cylfillhoveralpha||d.plotfillhoveralpha||0===d.cylfillhoveralpha)&&(c.plotHoverEffects={},c.plotHoverEffects.enabled=!0,f=q(d.cylfillhovercolor,d.plotfillhovercolor,"{dark-10}"),c.plotHoverEffects.cylFillHoverColor=/\{/.test(f)?b.parseColorMix(c.cylFillColor,f)[0]:f,c.plotHoverEffects.cylFillHoverAlpha=q(d.cylfillhoveralpha,d.plotfillhoveralpha,c.cylFillAlpha));c.cylGlassColor=q(d.cylglasscolor,
"FFFFFF");c.cyl3DLighting=h(d.use3dlighting,"1")},getPointColorObj:function(a){return{code:q(a.gaugefillcolor,a.thmfillcolor,this.colorManager.getColor("cylFillColor")),alpha:h(a.gaugefillalpha,a.thmfillalpha,100)}},getPointStub:v.linearscalegauge,placeDataLabels:v.linearscalegauge,manageTitleSpace:v.linearscalegauge,spaceManager:function(a,e,c,d){var b=a.chart,f=e.chart,m=c-(b.marginRight+b.marginLeft),g=d-(b.marginTop+b.marginBottom),p=b.marginRight,n=b.marginLeft,k=b.marginTop,l=b.marginBottom,
s=.2*m,u=.3*g,t=h(f.cylyscale,30),r=this.scaleFactor,K=this.numberFormatter;a.title.alignWithCanvas||(g-=this.manageTitleSpace(a,e,m/2,g/2));this.placeTickMark&&(m-=this.placeTickMark(a,s,u));this.placeDataLabels&&(g-=this.placeDataLabels(a,s,u,k,p,l,n)+8,b.valuePadding+=8);this.postDataLabelsPlacement&&this.postDataLabelsPlacement(a,s,u);b.cylHeight=B(f.cylheight);if(50<t||0>t)t=30;b.cylYScale=t/=100;p=Math.max(La(m,1.2*g)/2,5);p=h(B(K.getCleanValue(f.cylradius,!0))*r,p);b.marginLeft=h(B(f.cyloriginx)*
r,b.marginLeft);b.marginLeft+=m/2-p;b.marginRight=c-(b.marginLeft+2*p);a.title.alignWithCanvas&&(g-=this.manageTitleSpace(a,e,m/2,g/2));a=g-p*t*2;K=h(B(K.getCleanValue(f.cylheight,!0))*r,a);t=b.yScaleRadius=p*t;a=b.cylinderTotalHeight=2*t+K;g=g-a+b.marginTop;b.marginTop=h(B(f.cyloriginy)*r-K,t+g);b.marginBottom=d-(b.marginTop+K);b.cylRadius=p;b.cylHeight=K;b.yScaleRadius=t}},v.gaugebase);v("angulargauge",{friendlyName:"Angular Gauge",standaloneInit:!0,drawAnnotations:!0,defaultSeriesType:"angulargauge",
creditLabel:X,rendererId:"angular",isAngular:!0,eiMethods:v.lineargauge.eiMethods,multiValueGauge:!0,realtimeEnabled:!0,defaultPaletteOptions:za(V({},ta),{dialColor:["999999,ffffff,999999","ADB68F,F3F5DD,ADB68F","A2C4C8,EDFBFE,A2C4C8","FDB548,FFF5E8,FDB548","FF7CA0,FFD1DD,FF7CA0"],dialBorderColor:["999999","ADB68F","A2C4C8","FDB548","FF7CA0"],pivotColor:["999999,ffffff,999999","ADB68F,F3F5DD,ADB68F","A2C4C8,EDFBFE,A2C4C8","FDB548,FFF5E8,FDB548","FF7CA0,FFD1DD,FF7CA0"],pivotBorderColor:["999999","ADB68F",
"A2C4C8","FDB548","FF7CA0"]}),subTitleFontSizeExtender:0,charttopmargin:5,chartrightmargin:5,chartbottommargin:5,chartleftmargin:5,defaultPlotShadow:1,gaugeBorderColor:"{dark-20}",gaugeBorderThickness:1,updateSnapPoints:function(a){v.gaugebase.updateSnapPoints.apply(this,arguments);var e=a.series[0],c=this.snapLiterals;c.gaugestartangle=a.chart.gaugeStartAngle/cb;c.gaugeendangle=a.chart.gaugeEndAngle/cb;c.chartcenterx=a.chart.origW/2;c.chartcentery=a.chart.origH/2;c.gaugecenterx=e.gaugeOriginX;c.gaugecentery=
e.gaugeOriginY;c.gaugeinnerradius=e.gaugeInnerRadius;c.gaugeouterradius=e.gaugeOuterRadius;c.dial=function(c){var b=a.series[0],f=c[1]||c[0],e=(c=b.data[Number(c[0])||0])&&c.graphic;if(e){e=e.matrix;switch(f){case "startx":b=b.gaugeOriginX+e.x(-c.rearExtension,0);break;case "starty":b=b.gaugeOriginY+e.y(-c.rearExtension,0);break;case "endx":b=b.gaugeOriginX+e.x(c.radius,0);break;case "endy":b=b.gaugeOriginY+e.y(c.radius,0);break;default:b=0}return b}return 0}},preSeriesAddition:function(a,e){var c=
e.chart,d=h(c.gaugescaleangle,180),b=h(c.gaugestartangle),c=h(c.gaugeendangle),f=$(b),m=Ka?.001:.01,g=$(c);if(360<d||-360>d)d=0<d?360:-360;if(360<c||-360>c)c%=360;if(360<b||-360>b)b%=360;if(f&&g){if(d=b-c,360<d||-360>d)d%=360,c=b-d}else if(f){if(c=b-d,360<c||-360>c)c%=360,b+=0<c?-360:360}else if(g){if(b=c+d,360<b||-360>b)b%=360,c+=0<b?-360:360}else 360===d?(b=180,c=-180):-360===d?c=b=-180:(b=90+d/2,c=b-d);360===Math.abs(d)&&(d+=0<d?-m:m,c=b-d);c=360-c;b=360-b;if(360<b||360<c)b-=360,c-=360;a.chart.gaugeStartAngle=
b*cb;a.chart.gaugeEndAngle=c*cb;a.chart.gaugeScaleAngle=-d*cb},series:function(a,e){var c={data:[],colorByPoint:!0},d=a.chart,b=this.colorRangeGetter,f=(b=b&&b.colorArr)&&b.length,m=e[P],g=this.numberFormatter,p=this.colorManager,n,k,l,s=c.showValue=h(d.showvalue,d.showrealtimevalue,0),u=this.scaleFactor,t=0,r=a.dials&&a.dials.dial,K,E,A=h(d.showhovereffect),J,x,z,F,C,D,T,pa,I,w,H,N,v,Aa,L=h(d.editmode,0),y,Q,ib,O,Sa,Z,ga,tb,Eb,aa,na;y=t=h(B(d.pivotradius)*u,5);c.pivotRadius=y;Q=0;ib=r&&r.length;
aa=0;ib||(Q=-1,ib=0,r=[]);for(0!==A&&(A||d.dialborderhovercolor||d.dialborderhoveralpha||0===d.dialborderhoveralpha||d.dialborderhoverthickness||0===d.dialborderhoverthickness||d.dialbghovercolor||d.plotfillhovercolor||d.dialbghoveralpha||d.plotfillhoveralpha||0===d.dialbghoveralpha)&&(A=1);Q<ib;Q+=1){O=r[Q]||{};n=g.getCleanValue(O.value);this.pointValueWatcher&&this.pointValueWatcher(n);Sa=h(O.rearextension,0);t=Math.max(t,Sa*u);l=g.dataLabels(n);Z=B(l,M);tb=h(O.showvalue,s);Eb=h(B(O.valuey)*u);
ga=q(O.tooltext,O.hovertext)?!0:!1;tb&&!$(Eb)&&(aa+=1);k=(k=B(U(q(O.tooltext,O.hovertext,m.tooltext))))?$a(k,[1,2],{formattedValue:l},O,d):Z;v=q(O.color,O.bgcolor,p.getColor("dialColor"));C=h(O.alpha,O.bgalpha,100);Aa=S({FCcolor:{color:v,alpha:C,angle:90}});K=q(O.bordercolor,p.getColor("dialBorderColor"));na=h(O.borderalpha,100);l=G(K,na);E=h(O.borderthickness,1);pa=h(O.radius);I=h(O.basewidth);H=h(O.topwidth,0);w=h(O.baseradius,0);J=h(O.showhovereffect,A);if(0!==J&&(J||O.borderhovercolor||O.borderhoveralpha||
0===O.borderhoveralpha||O.borderhoverthickness||0===O.borderhoverthickness||O.bghovercolor||O.bghoveralpha||0===O.bghoveralpha)){J=!0;N={};T={};x=q(O.borderhovercolor,d.dialborderhovercolor,"{dark-10}");F=h(O.borderhoveralpha,d.dialborderhoveralpha,na);if(z=h(O.borderhoverthickness,d.dialborderhoverthickness,E))N.stroke=l,D=/\{/.test(x),T.stroke=G(D?p.parseColorMix(K,x)[0]:x,F);z!==E&&(T["stroke-width"]=z,N["stroke-width"]=E);K=q(O.bghovercolor,d.dialbghovercolor,d.plotfillhovercolor,"{dark-10}");
C=h(O.bghoveralpha,d.dialbghoveralpha,d.plotfillhoveralpha,C);N.fill=Aa;K=(x=/\{/.test(K))?p.parseColorMix(v,K).join():K;x={FCcolor:{color:K,alpha:C,angle:90}};T.fill=S(x)}c.data.push({rolloverProperties:{enabled:J,hasHoverSizeChange:void 0,hoverRadius:h(NaN*u),baseHoverWidth:h(NaN*u,1.6*y),topHoverWidth:h(NaN*u),rearHoverExtension:h(NaN*u),hoverFill:x,hoverAttr:T,outAttr:N},_tooltext:q(O.tooltext,O.hovertext),y:n,id:q(O.id,Q),color:Aa,showValue:tb,editMode:h(O.editmode,L),borderColor:l,shadowAlpha:na,
borderThickness:E,baseWidth:h(I*u,1.6*y),topWidth:h(H*u),baseRadius:h(w*u),rearExtension:Sa*u,valueX:h(B(O.valuex)*u),valueY:Eb,radius:h(pa*u),link:q(O.link,M),isLabelString:ga,toolText:k,displayValue:tb?q(Z," "):M,doNotSlice:!0})}c.displayValueCount=aa;c.compositPivotRadius=t;e.series[0]=c;f&&this.pointValueWatcher&&h(d.includecolorrangeinlimits,this.includeColorRangeInLimits)&&(c=h(b[0].minvalue),$(c)&&this.pointValueWatcher(c),c=h(b[f-1].maxvalue),$(c)&&this.pointValueWatcher(c))},postSeriesAddition:function(a,
e){var c=e.chart,d=a.series[0],b=this.colorManager,f;d.valueBelowPivot=h(c.valuebelowpivot,0);d.gaugeFillMix=c.gaugefillmix;d.gaugeFillRatio=c.gaugefillratio;void 0===d.gaugeFillMix&&(d.gaugeFillMix="{light-10},{light-70},{dark-10}");void 0===d.gaugeFillRatio?d.gaugeFillRatio=",6":""!==d.gaugeFillRatio&&(d.gaugeFillRatio=","+d.gaugeFillRatio);f=b.parseColorMix(q(c.pivotfillcolor,c.pivotcolor,c.pivotbgcolor,b.getColor("pivotColor")),q(c.pivotfillmix,"{light-10},{light-30},{dark-20}"));d.pivotFillAlpha=
b.parseAlphaList(q(c.pivotfillalpha,Qa),f.length);d.pivotFillRatio=b.parseRatioList(q(c.pivotfillratio,bb),f.length);d.pivotFillColor=f.join();d.pivotFillAngle=h(c.pivotfillangle,0);d.isRadialGradient="radial"==q(c.pivotfilltype,"radial").toLowerCase();d.showPivotBorder=h(c.showpivotborder,0);d.pivotBorderThickness=h(c.pivotborderthickness,1);d.pivotBorderColor=G(q(c.pivotbordercolor,b.getColor("pivotBorderColor")),1==d.showPivotBorder?q(c.pivotborderalpha,Qa):bb);this.parseColorMix=b.parseColorMix;
this.parseAlphaList=b.parseAlphaList;this.parseRatioList=b.parseRatioList},spaceManager:function(a,e,c,d){var b=a.chart,f=e.chart,m=a.scale,g=a.series[0],p=g.displayValueCount,n=m.tickValues.style,k=h(parseInt(n.lineHeight,10),12),l=h(parseInt(n.fontSize,10),10),s=.8*l,u=.1*k,t=Ka?0:.1*k,r=h(parseInt(a.plotOptions.series.dataLabels.style.lineHeight,10),12),K=c-(b.marginRight+b.marginLeft),q=d-(b.marginTop+b.marginBottom),A=this.scaleFactor,J=g.compositPivotRadius,x,z,F=b.gaugeStartAngle,C=b.gaugeEndAngle,
D,T=p*r+2+g.pivotRadius,pa=0,I=g.valueBelowPivot,w,H,N,v,Aa,L,y,Q,G,O,M,Z,ga,S,P,aa,na,da,ra,ja,V,W,U,R,fa,ba,Y,va,X,ea,ha,ca,ma,la,oa,qa,ta;D=/^\d+\%$/.test(f.gaugeinnerradius)?parseInt(f.gaugeinnerradius,10)/100:.7;q-=this.titleSpaceManager(a,e,K,q/2);I||(pa=T,T=0);g.gaugeOuterRadius=h(Math.abs(B(f.gaugeouterradius)*A));g.gaugeInnerRadius=h(Math.abs(B(f.gaugeinnerradius)*A),g.gaugeOuterRadius*D);var sa=b.gaugeStartAngle,ya=b.gaugeEndAngle,Oa=q,Ea=g.gaugeOuterRadius,Va=h(B(f.gaugeoriginx)*A-b.marginLeft),
Ca=h(B(f.gaugeoriginy)*A-b.marginTop),ka=Math.max(J,l),ua=T,wa=pa,Ha=$(Ea),Ia=$(Va),La=$(Ca),Da=2*Math.PI,xa=Math.PI,za=Math.PI/2,Ga=xa+za,Na,Qa=Va,$a=Ca,Ra,gb,Ta,Fa,Wa,Ya=!1,Za,bb,db,fb,Xa,Ua,eb,Ba,Pa,hb,jb=sa%Da;0>jb&&(jb+=Da);(ka=ka||0)&&ka<K/2&&ka<Oa/2&&(Ya=!0);ua>Oa/2&&(ua=Oa/2);wa>Oa/2&&(wa=Oa/2);Za=Math.cos(sa);bb=Math.sin(sa);db=Math.cos(ya);fb=Math.sin(ya);gb=Math.min(Za,db,0);Fa=Math.max(Za,db,0);Ta=Math.min(bb,fb,0);Wa=Math.max(bb,fb,0);if(!Ha||!Ia||!La){hb=ya-sa;Ua=jb+hb;if(Ua>Da||0>Ua)Fa=
1;if(0<hb){if(jb<za&&Ua>za||Ua>Da+za)Wa=1;if(jb<xa&&Ua>xa||Ua>Da+xa)gb=-1;if(jb<Ga&&Ua>Ga||Ua>Da+Ga)Ta=-1}else{if(jb>za&&Ua<za||Ua<-Ga)Wa=1;if(jb>xa&&Ua<xa||Ua<-xa)gb=-1;if(jb>Ga&&Ua<Ga||Ua<-za)Ta=-1}Ia?Ha||(Ba=K-Va,Pa=-Va,Na=gb?Math.min(Ba/Fa,Pa/gb):Ba/Fa):(eb=Fa-gb,Xa=K/eb,Va=-Xa*gb,Na=Xa,Ya&&(K-Va<ka?(Va=K-ka,Ba=K-Va,Pa=-Va,Na=gb?Math.min(Ba/Fa,Pa/gb):Ba/Fa):Va<ka&&(Va=ka,Ba=K-Va,Pa=-Va,Na=gb?Math.min(Ba/Fa,Pa/gb):Ba/Fa)),Qa=Va);La?Ha||(Ba=Oa-Ca,Pa=-Ca,Na=Math.min(Na,Ta?Math.min(Ba/Wa,Pa/Ta):Ba/
Wa)):(eb=Wa-Ta,Xa=Oa/eb,Ca=-Xa*Ta,Ya&&(Oa-Ca<ka?(Ca=Oa-ka,Ba=Oa-Ca,Pa=-Ca,Na=Math.min(Na,Ta?Math.min(Ba/Wa,Pa/Ta):Ba/Wa)):Ca<ka&&(Ca=ka,Ba=Oa-Ca,Pa=-Ca,Na=Math.min(Na,Ta?Math.min(Ba/Wa,Pa/Ta):Ba/Wa))),Oa-Ca<ua?(Ca=Oa-ua,Ba=Oa-Ca,Pa=-Ca,Na=Math.min(Na,Ta?Math.min(Ba/Wa,Pa/Ta):Ba/Wa)):Ca<wa&&(Ca=wa,Ba=Oa-Ca,Pa=-Ca,Na=Math.min(Na,Ta?Math.min(Ba/Wa,Pa/Ta):Ba/Wa)),Na=Math.min(Na,Xa),$a=Ca);Ra=Na;0>=Ra&&(Ra=Math.min(K/2,Oa/2))}x=g.gaugeOriginX=Qa;z=g.gaugeOriginY=$a;w=m.majorTM;H=0;N=w.length;Aa=a.labels.smartLabel;
M=m.min;Z=m.max-m.min;na=K-x;da=q-z;ra=m.placeValuesInside;ja=Math.cos(89.98*cb);V=-ja;W=$(g.gaugeOuterRadius);U=m.tickValueDistance;R=m.showTickValues;fa=m.showLimits;ba=h(g.gaugeOuterRadius,Ra);Y=h(g.gaugeInnerRadius,ba*D);va=ba;X=.2*ba;oa=1.5*k;ta=(C-F)/Z;if(R||fa)for(ra?Y>U+k?ea=Y-U:(ea=Y,U=0):(va+=U,W||(X+=U)),Aa.setStyle(n);H<N;H+=1)if(O=w[H],qa=F+(O.value-M)*ta,ga=Math.cos(qa),S=Math.sin(qa),v=O.displayValue,L=Aa.getOriSize(v),y=L.width,Q=L.height,G=Q/2,0<y&&0<Q)if(O.x=0,ra)O.align=ga>ja?ab:
ga<V?Ja:Ma,O.isString&&(P=ea*ga,ha=Math.abs(P),ha<y&&(L=Aa.getSmartText(v,Math.max(ha,k),oa),O.displayValue=L.text,L.tooltext&&(O.originalText=L.tooltext),Q=L.height,G=Q/2)),ga>ja||ga<V?(O.y=l-G+t,O.y-=.4*Q*S):O.y=s-(0>S?0:Q-u);else if(O.align=ga>ja?Ja:ga<V?ab:Ma,P=va*ga,aa=va*S,W||(0<aa?(la=G+G*S,da<aa+la&&(aa=da-la,va=Math.max(aa/S,X))):0>aa&&(la=G-G*S,z<-aa+la&&(aa=la-z,va=Math.max(aa/S,X)))),ga>ja)P+y>na&&(W?O.isString&&(L=Aa.getSmartText(v,na-P,oa),O.displayValue=L.text,L.tooltext&&(O.originalText=
L.tooltext),Q=L.height,G=Q/2):(P=na-y,va=Math.max(P/ga,X),P=va*ga,O.isString&&P+y>na&&(L=Aa.getSmartText(v,na-P,oa),O.displayValue=L.text,L.tooltext&&(O.originalText=L.tooltext),Q=L.height,G=Q/2,y=L.width,P=na-y,va=Math.max(P/ga,X)))),O.y=l-G+t+.4*Q*S;else if(ga<V)y-P>x&&(W?O.isString&&(L=Aa.getSmartText(v,x+P,oa),O.displayValue=L.text,L.tooltext&&(O.originalText=L.tooltext),Q=L.height,G=Q/2):(P=y-x,va=Math.max(P/ga,X),P=va*ga,O.isString&&y-P>x&&(L=Aa.getSmartText(v,x+P,oa),O.displayValue=L.text,
L.tooltext&&(O.originalText=L.tooltext),y=L.width,Q=L.height,G=Q/2,P=y-x,va=Math.max(P/ga,X)))),O.y=l-G+t+.4*Q*S;else{0<S?(ca=da,ma=Q+aa):(ca=z,ma=Q-aa);if(!W){if(ma>ca&&(va=Math.max(ca-Q,X),ma=Q+va),O.isString&&ma>ca||y>K)L=Aa.getSmartText(v,K,Math.max(ca-X,k)),O.displayValue=L.text,L.tooltext&&(O.originalText=L.tooltext),Q=L.height,va=Math.max(ca-Q,X)}else if(O.isString&&ma>ca||y>K)L=Aa.getSmartText(v,K,Math.max(Q-ma+ca,k)),O.displayValue=L.text,L.tooltext&&(O.originalText=L.tooltext),Q=L.height;
O.y=s-(0<S?0:Q-u)}W||(g.gaugeOuterRadius=ra?va:va-U,0>=g.gaugeOuterRadius&&(g.gaugeOuterRadius=Math.abs(X)));g.gaugeInnerRadius=h(g.gaugeInnerRadius,g.gaugeOuterRadius*D)}},v.gaugebase);v("drawingpad",{friendlyName:"DrawingPad Component",standaloneInit:!0,defaultSeriesType:"drawingpad",
rendererId:"drawingpad",defaultPlotShadow:1,drawAnnotations:!0,chartleftmargin:0,charttopmargin:0,chartrightmargin:0,chartbottommargin:0,chart:function(){V(this.dataObj.chart,{bgcolor:this.dataObj.chart.bgcolor||"#ffffff",bgalpha:this.dataObj.chart.bgalpha||"100"});return this.base.chart.apply(this,arguments)},series:function(){V(this.hcJSON,{legend:{enabled:!1},chart:{plotBackgroundColor:xa,plotBorderColor:xa},series:[{data:[]}]})},spaceManager:function(){},creditLabel:X},v.bulb);v("funnel",{friendlyName:"Funnel Chart",
standaloneInit:!0,defaultSeriesType:"funnel",sliceOnLegendClick:!0,defaultPlotShadow:1,subTitleFontSizeExtender:0,tooltippadding:3,drawAnnotations:!0,isDataLabelBold:!1,formatnumberscale:1,rendererId:"funnel",alignCaptionWithCanvas:0,defaultPaletteOptions:za(V({},ta),{paletteColors:y.defaultPaletteOptions.paletteColors}),preSeriesAddition:function(a,e){var c=e.chart,d=this.colorManager,b=a.plotOptions.series.dataLabels;b.connectorWidth=h(c.smartlinethickness,1);b.connectorColor=G(q(c.smartlinecolor,
d.getColor("baseFontColor")),h(c.smartlinealpha,100));h(c.showlegend,0)?(a.legend.enabled=!0,a.legend.reversed=!Boolean(h(c.reverselegend,0))):a.legend.enabled=!1;a.plotOptions.series.point.events.legendItemClick=c.interactivelegend===bb?ob:function(){this.slice()}},series:function(a,e,c){a.data&&0<a.data.length&&(a=this.point(c,{data:[],colorByPoint:!0,showInLegend:!0},a.data,a.chart,e))&&e.series.push(a)},pointHoverOptions:function(a,e,c){var d=h(a.showhovereffect,e.showhovereffect),b={enabled:d},
f={};void 0===d&&(d=b.enabled=void 0!==q(a.hovercolor,e.plotfillhovercolor,a.hoveralpha,e.plotfillhoveralpha,a.borderhovercolor,e.plotborderhovercolor,a.borderhoverthickness,e.plotborderhoverthickness,a.borderhoveralpha,e.plotborderhoveralpha));if(d){b.highlight=h(a.highlightonhover,e.highlightonhover);b.color=q(a.hovercolor,e.plotfillhovercolor);b.alpha=q(a.hoveralpha,e.plotfillhoveralpha,c.alpha);b.borderColor=q(a.borderhovercolor,e.plotborderhovercolor,c.borderColor);b.borderThickness=h(a.borderhoverthickness,
e.plotborderhoverthickness,c.borderWidth);b.borderAlpha=q(a.borderhoveralpha,e.plotborderhoveralpha,c.borderAlpha);0!==b.highlight&&void 0===b.color&&(b.highlight=1);b.color=q(b.color,c.color).replace(/,+?$/,M);if(1===b.highlight){a=b.color.split(/\s{0,},\s{0,}/);e=a.length;for(c=0;c<e;c+=1)a[c]=W(a[c],70);b.color=a.join(",")}f={color:b.color,alpha:b.alpha,borderColor:G(b.borderColor,b.borderAlpha),borderWidth:b.borderThickness}}return{enabled:d,options:b,rolloverOptions:f}},point:function(a,e,c,
d,b){a=b[P];var f=0,m=M,g=[],p=q(d.plotborderthickness,Fb),n=!0,k=!1,l=M,s=b.chart,u=this.isPyramid,t=h(d.showpercentintooltip,1),r=h(d.showlabels,1),K=h(d.showvalues,1),E=h(d.showpercentvalues,d.showpercentagevalues,0),A=q(d.tooltipsepchar,d.hovercapsepchar,Nb),J=q(d.labelsepchar,A),x=q(d.plotbordercolor,d.piebordercolor),z=this.smartLabel,F=this.numberFormatter,C=c.length,D,T=this.colorManager,s=s.issliced=h(d.issliced,0),pa=0,I=h(d.showvalueinlegend,0),Yb=h(d.showlabelinlegend,1),H=h(d.valuebeforelabelinlegend,
0),N=h(d.showvalueaspercentinlegend,1),v=q(d.legendsepchar,", "),Aa=b.plotOptions.series.dataLabels.style,L={apply:d.showshadow==Fb,opacity:1},ia,Q,ib,O,S,Z,ga,V,X,aa,na,da,ra,ja,R;e.isPyramid=u;ra=e.streamlinedData=h(d.streamlineddata,1);e.is2d=h(d.is2d,0);e.isHollow=h(d.ishollow,ra?1:0);na=h(d.percentofprevious,0);aa=h(this.isPyramid?d.pyramidyscale:d.funnelyscale);e.labelDistance=Math.abs(h(d.labeldistance,d.nametbdistance,50));e.showLabelsAtCenter=h(d.showlabelsatcenter,0);e.yScale=0<=aa&&40>=
aa?aa/200:.2;r||K||(b.plotOptions.series.dataLabels.enabled=!1,!1===b.tooltip.enabled&&(n=!1));e.useSameSlantAngle=h(d.usesameslantangle,ra?0:1);for(b=0;b<C;b+=1)ia=c[b],c[b].vline||(ia.cleanValue=aa=F.getCleanValue(ia.value,!0),null!==aa&&(k=!0,R=R||aa,g.push(ia),f+=aa,R=Math.max(R,aa)));if(k){e.valueSum=f;c=F.dataLabels(f);C=g.length;!u&&ra&&g.sort(function(a,b){return b.cleanValue-a.cleanValue});u||ra||e.data.push({showInLegend:!1,y:f,name:"",shadow:L,smartTextObj:D,color:Q,alpha:ib,borderColor:G(O,
S),borderWidth:p,link:B(ia.link),style:y.parsexAxisStyles(ia,{},d,Aa,Q),displayValue:M,doNotSlice:0===h(d.enableslicing,1)});for(b=0;b<g.length;b+=1){ia=g[b];k=ia.cleanValue;da=b?g[b-1].value:k;C=U(q(ia.label,ia.name,M));D=z.getOriSize(C);Q=b&&!u&&ra?b-1:b;Q=q(ia.color,T.getPlotColor(Q));ib=q(ia.alpha,d.plotfillalpha,Qa);O=q(ia.bordercolor,x,W(Q,25)).split(w)[0];S=1!=d.showplotborder?bb:q(ia.borderalpha,d.plotborderalpha,d.pieborderalpha,"80");L.opacity=Math.max(ib,S)/100;if(aa=h(ia.issliced,s))pa+=
1,a.preSliced=aa;ja=u||!ra?f:na?da:R;n&&(ga=F.percentValue(k/ja*100),V=F.dataLabels(k)||M,Z=1===r?C:M,m=1===h(ia.showvalue,K)?1===E?ga:V:M,m=(X=B(U(ia.displayvalue)))?X:m!==M&&Z!==M?Z+J+m:q(Z,m)||M,ra&&(l=na?ga:F.percentValue(k/da*100)),Z=B(U(q(ia.tooltext,a.tooltext))),void 0!==Z?Z=$a(Z,[1,2,3,7,14,24,25,37],{formattedValue:V,label:C,percentValue:na?F.percentValue(k/R*100):ga,sum:c,unformattedSum:f,percentOfPrevValue:l},ia,d):(Z=1===t?ga:V,Z=C!==M?C+A+Z:Z));da=Yb?C:M;I&&(ja=N?F.legendPercentValue(k/
ja*100):F.legendValue(k),da=H?ja+(da&&v+da):(da&&da+v)+ja);ja=this.pointHoverOptions(ia,d,{color:Q,alpha:ib,borderColor:O,borderAlpha:S,borderWidth:p});D={displayValue:m,style:y.parsexAxisStyles(ia,{},d,Aa,Q),categoryLabel:C,toolText:Z,showInLegend:da!==M,y:k,name:da,shadow:L,smartTextObj:D,color:Q,alpha:ib,borderColor:G(O,S),borderWidth:p,link:B(ia.link),isSliced:aa,doNotSlice:0===h(d.enableslicing,1),tooltipConstraint:this.tooltipConstraint,hoverEffects:ja.enabled&&ja.options,rolloverProperties:ja.enabled&&
ja.rolloverOptions};b||u||!ra||(D.showInLegend=!1);e.data.push(D)}f||(e.data=[]);e.labelMaxWidth=0;e.noOFSlicedElement=pa;return e}return null},spaceManager:function(a,e,c,d){var b=this.smartLabel,f=e.chart,m=a.chart,g=q(f.legendposition,mb).toLowerCase(),p=c-(m.marginRight+m.marginLeft);d-=m.marginTop+m.marginBottom;var n=this.isPyramid,k=0,l=0,s,u=a.series[0],t,r,K,E,A,J,x,z,F,C,D,T,pa,I,w,H,N,v,y,L,G;if(u){t=this._tempSnap={top3DSpace:0,bottom3DSpace:0,topLabelSpace:0,rightLabelSpace:0};a.legend.enabled&&
(g===ab?p-=this.placeLegendBlockRight(a,e,p/2,d,!0):d-=this.placeLegendBlockBottom(a,e,p,d/2,!0));g=.1*d;s=h(f.slicingdistance,g);g=s>2*g?0:s;f=Math.min(2*(d-g),p);m.marginTop+=g/2;m.marginBottom+=g/2;u.SlicingDistance=s;l=u.data;x=l.length;z=n?0:1;g=u.labelDistance+3;s=u.showLabelsAtCenter;T=Math.min(f,.3*p);E=p-T;pa=p-T-g;w=0;H=(r=l[0])&&l[0].y?l[0].y:1;N=u.valueSum?u.valueSum:1;v=n?0:1;y=.8/H;L=1==u.useSameSlantAngle;D=(G=!n&&!u.streamlinedData)?l[0].y-l[1].y:0;!n&&r&&l[0].displayValue&&(F=l[0],
r=a.plotOptions.series.dataLabels.style,I=h(Gb(parseFloat(r.lineHeight)+r.borderPadding+r.borderThickness),10),b.setStyle(r),K=b.getSmartText(F.displayValue,p,I),F.displayValue=K.text,K.tooltext&&(F.originalText=K.tooltext),F.labelWidht=b.getOriSize(K.text).width,m.marginTop+=t.topLabelSpace=I+4);for(;z<x;z+=1)F=l[z],r=F.style,I=h(Gb(parseFloat(r.lineHeight)+r.borderPadding+r.borderThickness),10),b.setStyle(r),s?b.getSmartText(F.displayValue,p,I):(J=n?(r=D+F.y/2)?r/N:1:G?.2+y*D:F.y?L?F.y/H:Math.sqrt(F.y/
H):1,r=T*J,C=pa+(T-r)/2,K=b.getSmartText(F.displayValue,C,I),F.displayValue=K.text,K.tooltext&&(F.originalText=K.tooltext),w=Math.max(w,K.width),0<E&&(K=0<K.width?C-K.width:C+g,r=1/(J+1)*(r+2*K+T),E=Math.min(E,r-T)),D+=G?-(l[z+1]&&l[z+1].y||0):F.y);F&&(A=n?1:G?.2:F.y?L?F.y/H:Math.sqrt(F.y/H):1);E=T+E;E>f&&(E=f);D=G?l[0].y-l[1].y:0;if(!s)for(z=n?0:1,x=l.length;z<x;z+=1)F=l[z],J=n?(r=D+F.y/2)?r/N:1:G?.2+y*D:F.y?L?F.y/H:kb(F.y/H):1,r=E*J,C=pa+(T-r)/2,K=b.getSmartText(F.displayValue,C,I),k=ya(k,.5*r+
K.width+g),D+=G?-(l[z+1]&&l[z+1].y||0):F.y;0<w?(t.rightLabelSpace=p-E,l=k-(.5*c-m.marginRight),0<l&&(m.marginRight+=l,m.marginLeft-=l),m.marginRight+=.5*t.rightLabelSpace,m.marginLeft+=.5*t.rightLabelSpace,p-=a.title.alignWithCanvas?t.rightLabelSpace:0):g=0;u.labelDistance=u.connectorWidth=g;this.titleSpaceManager(a,e,p,d/2);(s||!w)&&f<p&&(m.marginLeft+=.5*(p-f-g),m.marginRight+=.5*(p-f-g));u.is2d||(m.marginTop+=t.top3DSpace=E*u.yScale*v/2,m.marginBottom+=t.bottom3DSpace=E*u.yScale*A/2)}},updateSnapPoints:function(){v.gaugebase.updateSnapPoints.apply(this,
arguments);var a=this.snapLiterals,e=this._tempSnap||{};a.plotwidth=a.canvaswidth;a.plotsemiwidth=a.canvaswidth/2;a.plotheight=a.canvasheight+e.top3DSpace+e.bottom3DSpace;a.plotstartx=a.canvasstartx;a.plotstarty=a.canvasstarty-e.top3DSpace;a.plotendx=a.canvasendx;a.plotendy=a.canvasendy+e.bottom3DSpace;a.canvaswidth+=e.rightLabelSpace;a.canvasheight=a.plotheight+e.topLabelSpace;a.canvasstarty=a.plotstarty-e.topLabelSpace;a.canvasendy=a.plotendy;a.canvasendx+=e.rightLabelSpace},eiMethods:{sliceDataItem:function(a){var e=
this.jsVars.hcObj,c;if(e&&e.series&&(c=e.series[0])&&c.data&&c.data[a]&&c.data[a].slice)return c.data[c.xIncrement-1-a].slice()}},useSortedData:!0,creditLabel:X},v.gaugebase);v("pyramid",{friendlyName:"Pyramid Chart",subTitleFontSizeExtender:0,drawAnnotations:!0,standaloneInit:!0,defaultSeriesType:"pyramid",defaultPlotShadow:1,useSortedData:!1,isPyramid:1,creditLabel:X,rendererId:"pyramid"},v.funnel);v("sparkbase",{defaultPlotShadow:0,useSortedData:!1,subTitleFontSizeExtender:0,subTitleFontWeight:0,
drawAnnotations:!0,showYAxisValues:0,numdivlines:0,chartrightmargin:3,chartleftmargin:3,charttopmargin:3,chartbottommargin:3,decimals:2,showTrendlineLabel:0,zeroplanethickness:0,tooltippadding:1,useScaleRecursively:!0,showTrendlineLabels:0,showAxisLimitGridLines:0,styleApplicationDefinition_font:v.gaugebase.styleApplicationDefinition_font,defaultPaletteOptions:za(V({},ta),{paletteColors:[["555555","A6A6A6","CCCCCC","E1E1E1","F0F0F0"],["A7AA95","C4C6B7","DEDFD7","F2F2EE"],["04C2E3","66E7FD","9CEFFE",
"CEF8FF"],["FA9101","FEB654","FED7A0","FFEDD5"],["FF2B60","FF6C92","FFB9CB","FFE8EE"]],bgColor:["FFFFFF","CFD4BE,F3F5DD","C5DADD,EDFBFE","A86402,FDC16D","FF7CA0,FFD1DD"],bgAngle:[270,270,270,270,270],bgRatio:["0,100","0,100","0,100","0,100","0,100"],bgAlpha:["100","60,50","40,20","20,10","30,30"],canvasBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],canvasBgAngle:[0,0,0,0,0],canvasBgAlpha:["100","100","100","100","100"],canvasBgRatio:["","","","",""],canvasBorderColor:["BCBCBC","BEC5A7","93ADBF",
"C97901","FF97B1"],toolTipBgColor:["FFFFFF","FFFFFF","FFFFFF","FFFFFF","FFFFFF"],toolTipBorderColor:["545454","545454","415D6F","845001","68001B"],baseFontColor:["333333","60634E","025B6A","A15E01","68001B"],trendColor:["666666","60634E","415D6F","845001","68001B"],plotFillColor:["666666","A5AE84","93ADBF","C97901","FF97B1"],borderColor:["767575","545454","415D6F","845001","68001B"],borderAlpha:[50,50,50,50,50],periodColor:["EEEEEE","ECEEE6","E6ECF0","FFF4E6","FFF2F5"],winColor:["666666","60634E",
"025B6A","A15E01","FF97B1"],lossColor:["CC0000","CC0000","CC0000","CC0000","CC0000"],drawColor:["666666","A5AE84","93ADBF","C97901","FF97B1"],scorelessColor:["FF0000","FF0000","FF0000","FF0000","FF0000"]}),preSeriesAddition:function(a,e){var c=a.plotOptions.series.dataLabels.style,d=a.chart,b=e.chart,c={fontFamily:c.fontFamily,fontSize:c.fontSize,lineHeight:c.lineHeight,fontWeight:c.fontWeight,fontStyle:c.fontStyle},f,m,g,p;if("sparkwinloss"==this.name&&(f=e.data||e.dataset&&e.dataset[0]&&e.dataset[0].data,
m={w:1,l:-1,d:.1},0<(g=f&&f.length)))for(;g;)g-=1,p=f[g],p.value=m[p.value.toLowerCase()];d.borderWidth=h(b.showborder,this.showBorder,0)?h(b.borderthickness,1):0;d.plotBorderWidth=h(b.canvasborderthickness,1);f=d.openColor=qa(q(b.opencolor,"0099FF"));m=d.closeColor=qa(q(b.closecolor,"0099FF"));d.highColor=qa(q(b.highcolor,"00CC00"));d.lowColor=qa(q(b.lowcolor,"CC0000"));d.openHoverColor=G(qa(q(b.openhovercolor,b.anchorhovercolor,b.plotfillhovercolor,W(f,70))),h(b.openhoveralpha,b.anchorhoveralpha,
b.plotfillhoveralpha,100));d.closeHoverColor=G(qa(q(b.closehovercolor,b.anchorhovercolor,b.plotfillhovercolor,W(m,70))),h(b.closehoveralpha,b.anchorhoveralpha,b.plotfillhoveralpha,100));d.highHoverColor=G(qa(q(b.highhovercolor,b.anchorhovercolor,b.plotfillhovercolor,W(d.highColor,70))),h(b.highhoveralpha,b.anchorhoveralpha,b.plotfillhoveralpha,100));d.lowHoverColor=G(qa(q(b.lowhovercolor,b.anchorhovercolor,b.plotfillhovercolor,W(d.lowColor,70))),h(b.lowhoveralpha,b.anchorhoveralpha,b.plotfillhoveralpha,
100));this.forceHoverEnable=q(b.openhovercolor,b.closehovercolor,b.highhovercolor,b.lowhovercolor,b.openhoveralpha,b.closehoveralpha,b.highhoveralpha,b.lowhoveralpha,b.winhovercolor,b.losshovercolor,b.drawhovercolor,b.scorelesshovercolor);a.chart.openValue={style:V({},c)};Da(a.chart.openValue.style);a.chart.openValue.style.color=f;a.chart.closeValue={style:V({},c)};Da(a.chart.openValue.style);a.chart.closeValue.style.color=m;a.chart.highLowValue={style:V({},c)};this.parseStyles(a);0===this.showCanvas&&
(d.plotBackgroundColor=xa);this.showCanvasBorder||(d.plotBorderWidth=0);d.useRoundEdges||(d.plotShadow=0);b.zeroplanethickness=q(b.zeroplanethickness,this.zeroplanethickness);delete b.yaxisname;delete b.xaxisname;b.showlabels=q(b.showlabels,bb)},spaceManager:function(a,e,c,d){var b=a[P],f=this.smartLabel||b.smartLabel,m=e.chart,g=a.series[0],p=a.chart,n=c-(p.marginRight+p.marginLeft),k=h(m.canvasleftmargin),l=h(m.canvasrightmargin),s=a.valuePadding=h(m.valuepadding,2),u=a.plotOptions.series.dataLabels.style,
t=parseInt(u.lineHeight,10),r=n,K=b=0,E,A;if(g){d=Ab(a,e,.7*n,d,void 0,c,d,this);r-=d.left+d.right;n=c-(p.marginRight+p.marginLeft);A=E=g=0;f.setStyle(u);$(p.openValue.label)&&(f.setStyle(p.openValue.style),t=h(parseInt(p.openValue.style.lineHeight,10),10),u=f.getSmartText(p.openValue.label,r,1.5*t),0<u.width&&(b=g=u.width+s,r-=g));$(p.closeValue.label)&&(f.setStyle(p.closeValue.style),t=h(parseInt(p.closeValue.style.lineHeight,10),10),u=f.getSmartText(p.closeValue.label,r,1.5*t),0<u.width&&(K=E=
u.width+s,r-=E));$(p.highLowValue.label)&&(f.setStyle(p.highLowValue.style),t=h(parseInt(p.highLowValue.style.lineHeight,10),10),f=f.getSmartText(p.highLowValue.label,r,1.5*t),0<f.width&&(K+=A=f.width+s));p.marginRight+=A+E;p.marginLeft+=g;$(k)?(p.spacingLeft=p.marginLeft=k,p.spacingLeft-=d.left+g):p.marginLeft+=d.left;$(l)?(p.spacingRight=p.marginRight=l,p.spacingRight-=d.right+A+E):p.marginRight+=d.right;this.xAxisMinMaxSetter(a,e,n);p=a.xAxis;l=p.min;n=p.max;k=h(m.periodlength,0);m=G(q(m.periodcolor,
this.colorManager.getColor("periodColor")),h(m.periodalpha,100));s=1;if(0<k)for(;l<=n;l+=k)s?(p.plotBands.push({color:m,from:l,to:Math.min(n,l+k),zIndex:1}),s=0):s=1;Bb(a,e,c,b,K,this)}}},Ob);fb={realtimeEnabled:!0,canvasPaddingModifiers:null,linearDataParser:v.gaugebase.linearDataParser,eiMethods:za({},v.gaugebase.eiMethods),decimals:2,prepareRealtimeValueText:function(){var a=this.hcJSON,e=this.hcJSON[P],c=e.rtLabel,d=a.chart.realtimeValueSeparator,b=new RegExp(d+"$","g");c&&c.label&&(e=
e.realtimeValues.join(d).replace(b,M),c.label.text=e,a.xAxis.plotLines&&(a.xAxis.plotLines[0]=c))},chart:function(){var a=this.dataObj.chart,e=this.numberFormatter,c,d,b,f=h(a.showrealtimevalue,1),m=h(a.realtimevaluepadding),g,p,a=this.dataObj.chart;a.adjustdiv="0";f&&(a.xaxisname=a.xaxisname?"<br/>"+a.xaxisname:"<br/>");c=v.msareabase.chart.apply(this,arguments);b=c.chart;d=c[P];g=c.series;d.isDual?(d._userPMin=h(a.pyaxisminvalue),d._userPMax=h(a.pyaxismaxvalue),d._userSMin=h(a.syaxisminvalue),d._userSMax=
h(a.syaxismaxvalue)):(d._userMin=h(a.yaxisminvalue),d._userMax=h(a.yaxismaxvalue));b.dataStreamURL=q(a.datastreamurl,"");b.refreshInterval=h(a.refreshinterval,1);b.updateInterval=h(a.updateinterval,b.refreshInterval);b.clearInterval=h(a.clearchartinterval,0);b.dataStamp=a.datastamp;b.useMessageLog=h(a.usemessagelog,0);b.messageLogWPercent=La(h(a.messagelogwpercent,80),100);b.messageLogHPercent=La(h(a.messageloghpercent,70),100);b.messageLogShowTitle=h(a.messagelogshowtitle,1);b.messageLogTitle=q(a.messagelogtitle,
"Message Log");b.messageLogColor=q(a.messagelogcolor,"#fbfbfb");b.messageGoesToJS=h(a.messagegoestojs,0);b.messageGoesToLog=h(a.messagegoestolog,1);b.messageJSHandler=q(a.messagejshandler,"");b.messagePassAllToJS=h(a.messagepassalltojs,0);b.messageLogIsCancelable=h(a.messagelogiscancelable,1);b.alwaysShowMessageLogMenu=h(a.alwaysshowmessagelogmenu,b.useMessageLog);b.showRTMenuItem=h(a.showrtmenuitem,0);b.showRealtimeValue=f;b.realtimeValueSeparator=q(a.realtimevaluesep,", ");b.realtimeValuePadding=
m;b.realtimeValueFont=q(a.realtimevaluefont,"");b.realtimeValueFontBold=q(a.realtimevaluefontbold,0);b.realtimeValueFontColor=q(a.realtimevaluefontcolor,"");b.realtimeValueFontSize=h(a.realtimevaluefontsize,"");if(f){if(!d.realtimeValues)for(d.realtimeValues=[],f=0,m=g.length;f<m;f++)a=g[f],p=(p=a.data)&&p.length&&p[p.length-1]&&p[p.length-1].y,d.realtimeValues[f]=e.dataLabels(p,a.yAxis);d.rtLabel||(e=V({},d.outCanvasStyle),e.fontWeight=b.realtimeValueFontBold?"bold":"normal",b.realtimeValueFontColor&&
(e.color=b.realtimeValueFontColor.replace(db,eb)),b.realtimeValueFontSize&&(e.fontSize=b.realtimeValueFontSize+hb),b.realtimeValueFont&&(e.fontFamily=b.realtimeValueFont),g=h(parseInt(e.fontSize,10),10),d.rtLabel={color:fa,alwaysVisible:!0,isTrend:!0,value:(d.x.catCount-1)/2,width:.01,label:{align:Ma,textAlign:Ma,rotation:0,textVAlign:Fa,text:" ",x:0,y:.8*g+(c.xAxis.title.margin|0),style:e}},c.xAxis.plotLines.splice(0,0,d.rtLabel))}b.showRTMenuItem?(c.callbacks||(c.callbacks=[])).push(this.drawRTMenuButtons):
b.useMessageLog&&b.alwaysShowMessageLogMenu&&b.messageGoesToLog&&(c.callbacks||(c.callbacks=[])).push(this.drawMLMenuButtons);this.dataObj.alerts&&(this.hcJSON.alerts=this.parseAlertObj(this.dataObj.alerts));return c},parseAlertObj:function(a){var e=this.numberFormatter,c=a&&a.alert,d=c.length,b={alert:[]},f,m,g,p,n;for(a=0;a<d;a+=1)p=c[a],f=e.getCleanValue(p.minvalue),m=e.getCleanValue(p.maxvalue),g=q(p.action,""),p=q(p.param,""),null!==f&&null!==m&&""!==g&&(f>m&&(n=m,m=f,f=n),b.alert.push({minvalue:f,
maxvalue:m,param:p,action:g}));return b},drawMLMenuButtons:function(){var a=this.options,e=a.chart,c=this.menu||(this.menu=[]),d=this.toolbar,a=a[P],b;c.push(b=Ea({chart:this,basicStyle:a&&a.outCanvasStyle||this.outCanvasStyle||{},items:[{text:"Show Log",visibility:"hidden",onclick:function(){y&&y.messageLogger&&y.messageLogger.open();b.showItem(4);b.hideItem(3)}},{text:"Hide Log",visibility:"hidden",onclick:function(){y&&y.messageLogger&&y.messageLogger.close();b.showItem(3);b.hideItem(4)}}],position:{x:e.spacingLeft,
y:this.chartHeight-e.spacingBottom+(e.showFormBtn||e.showRestoreBtn?10:-15)}}));b.hideItem(1);this.elements.configureButton=d.add("loggerIcon",function(a,c){return function(){b.visible?b.hide():b.show({x:a,y:c+1})}}(),{x:e.spacingLeft,y:this.chartHeight-e.spacingBottom+(e.showFormBtn||e.showRestoreBtn?10:-15),tooltip:"Show & Hide Message"})},drawRTMenuButtons:function(){var a=this.logic,e=a.chartInstance,c=this.options,d=c.chart,b=d&&d.alwaysShowMessageLogMenu,f=this.menu||(this.menu=[]),m=this.toolbar,
c=(c=c[P])&&c.outCanvasStyle||this.outCanvasStyle||{},g,p=e.isUpdateActive||a.eiMethods.isUpdateActive,p=p&&p.call(e);f.push(g=Ea({chart:this,basicStyle:c,items:[{text:"Stop Update",visibility:p?rb:"hidden",onclick:function(){g.hideItem(0);g.showItem(1);e.stopUpdate()}},{text:"Start Update",visibility:p?"hidden":rb,onclick:function(){g.hideItem(1);g.showItem(0);e.restartUpdate()}},{text:"Clear Chart",onclick:function(){e.clearChart()}},{text:"Show Log",visibility:"hidden",onclick:function(){y&&y.messageLogger&&
y.messageLogger.open();g.showItem(4);g.hideItem(3)}},{text:"Hide Log",visibility:"hidden",onclick:function(){y&&y.messageLogger&&y.messageLogger.close();g.showItem(3);g.hideItem(4)}}],position:{x:d.spacingLeft,y:this.chartHeight-d.spacingBottom+(d.showFormBtn||d.showRestoreBtn?10:-15)}}));h(a.dataObj.chart.allowclear,1)||g.hideItem(2);g.hideItem(0);g.hideItem(1);!b&&g.hideItem(3);g.hideItem(4);g.showItem(p?0:1);this.elements.configureButton=m.add("configureIcon",function(a,b){return function(){g.visible?
g.hide():g.show({x:a,y:b+1})}}(),{x:d.spacingLeft,y:this.chartHeight-d.spacingBottom+(d.showFormBtn||d.showRestoreBtn?10:-15),tooltip:"Manage RealTime Update"})},shiftPlotLines:function(a,e,c,d){var b,f,m=[],g=d[0],p=g&&g.RTValueArr,n=p&&p.length||0,k=(d=d[1])&&d.RTValueArr,l=k&&k.length||0,s=a&&a.length||0,u;c=h(c,-.5);for(u=0;u<s;u+=1)if(b=a[u],b.isGrid||b.isVline)if(f=b.value+=e,f<c||f===c&&b.isVline)a.splice(u,1),b.isGrid&&m.push(b),u-=1,s-=1;if(g&&p&&n)for(p.splice(0,-e),n=p.length,delete g.min,
delete g.max,u=0;u<n;u+=1)(a=p[u])&&void 0!==a.min&&(!1===g.min<a.min&&(g.min=a.min),!1===g.max>a.max&&(g.max=a.max));if(d&&k&&l)for(k.splice(0,-e),l=k.length,delete d.min,delete d.max,u=0;u<l;u+=1)(a=k[u])&&void 0!==a.min&&(!1===d.min<a.min&&(d.min=a.min),!1===d.max>a.max&&(d.max=a.max));return m},configureAxis:function(a){var e=a[P],c=a.xAxis,d=e.x,b=e.axisGridManager,f=d.catCount,m=e.oriCatTmp,g=e[0],p=g&&g.RTValueArr,n=e[1],k=n&&n.RTValueArr,l=this.dataObj,s=l.chart||(l.chart={}),l=a.series,u=
l[0].data.length,s=this.numDisplaySets=h(s.numdisplaysets,ya(u,15)),t=c.plotLines,r=t&&t.length||0,q=[],E=this.chartInstance.jsVars._reflowData,A;E.hcJSON&&(A=E.hcJSON[P])&&(g.min=A[0]&&A[0].min,g.max=A[0]&&A[0].max,n.min=A[1]&&A[1].min,n.max=A[1]&&A[1].max);n=((this.dataObj.categories||(this.dataObj.categories=[{category:[]}]))[0]||(this.dataObj.categories[0]={category:[]})).category||(this.dataObj.categories[0].category=[]);0===f&&(this.chartInstance.jsVars._forceReflow=!0);g=s-u;if(0<g){for(;r--;)t[r].value+=
g;for(c.plotLines=[];g--;)q[g]={y:null},b.addXaxisCat(c,g,g," ",{},{},{}),p&&p.unshift(null),k&&k.unshift(null),m.unshift(null),n.unshift({label:" "});c.plotLines=c.plotLines.reverse().concat(t)}else g&&(this.shiftPlotLines(c.plotLines,g,-.5,e),m.splice(0,-g));for(g=l.length;g--;)c=l[g],e=c.data,c.data=q.concat(e.slice(-s));this.needsRedraw=0===f;d.catCount=s;return v.msareabase.configureAxis&&v.msareabase.configureAxis.apply(this,arguments)},postSeriesAddition:function(a,e,c,d,b){e=a[P];c=e.isBar;
d=a.chart.rotateValues&&!c?270:0;var f=e[0],m=f.RTValueArr,g=f&&f.stacking100Percent,p,n,k,l,h,u,t,r,q;if(this.isStacked&&m&&(e.showStackTotal||g))for(b=b||0,u=a.series,t=V({},a.plotOptions.series.dataLabels.style),r=parseFloat(t.fontSize),q=!f.stacking100Percent,t.color=a.plotOptions.series.dataLabels.color,f=m.length;b<f;b+=1)if(n=m[b])if(h=(n.n||0)+(n.p||0),e.showStackTotal&&(p=b,n=0>h?n.n:n.p,a.xAxis.plotLines.push({value:p,width:0,isVline:q,isTrend:!q,zIndex:4,_isStackSum:1,_catPosition:b,label:{align:Ma,
textAlign:270===d?0>h?ab:Ja:Ma,offsetScale:q?n:void 0,offsetScaleIndex:0,rotation:d,style:t,verticalAlign:Fa,y:c?0:0>h?270===d?4:r:-4,x:0,text:e.numberFormatter.yAxis(h)}})),g)for(n=0,p=u.length;n<p;n+=1)if(u[n].data){k=u[n].data[b];if(k.y||0===k.y)l=k.y/h*100,k.y=l,k.showPercentValues&&(k.displayValue=this.numberFormatter.percentValue(l)),k.showPercentInToolTip&&(k.toolText=k.toolText+parseInt(100*l,10)/100+"%");if(k.previousY||0===k.previousY)k.previousY=k.previousY/h*100}},pointValueWatcher:function(a,
e,c,d,b){if(null!==e){var f=a[P];a=f[c||(c=0)];var m;a||(a=f[c]={});c=a.RTValueArr;c||(c=a.RTValueArr=[]);(f=c[b])||(f=c[b]={});d&&(0<=e?f.p?(m=f.p,e=f.p+=e):f.p=e:f.n?(m=f.n,e=f.n+=e):f.n=e);!1===f.max>e&&(f.max=e,!1===a.max>e&&(a.max=e));!1===f.min<e&&(f.min=e,!1===a.min<e&&(a.min=e));return m}},realtimeUpdate:function(a,e){var c=this.hcJSON,d=this.dataObj,b=d.chart,f="0"===b.allowclear?0:1,m=c[P],g=this.numberFormatter,p=m.x,n=p._labelY,k=p._labelX,l=p._yShipment,s=p._isStagger,u=p._rotation,t=
p._textAlign,r=p._adjustedPx,q=p._staggerLines,E=p._labelHeight,A,J=m.axisGridManager,x=p.catCount,z=this.renderer,F=this.chartInstance.jsVars,C=a.values,D=a.labels||[],T=a.showLabels||[],w=a.colors,I=a.toolTexts,v=a.links,H=c.xAxis,N="0"===d.chart.showlabels,y=c.chart.showRealtimeValue,G=d.categories,L=F._reflowData,ia=[],Q=h(m._startIndex,0),S=p.stepValue,p=a.dimension>x?x:a.dimension,O=x-p,ia=[],Sa=a.vlines,Z,ga,W,R,aa,na,da,ra,ja,X,$=new Date,ba,Y,fa,ca,ea,va;a.clear&&f&&this.realtimeUpdate({dimension:this.numDisplaySets,
values:[],labels:[]},0<a.dimension);if(a.dimension){c.plotOptions.series.animation=!1;Sa?(Z=a.vlineColors||[],ga=a.vlineLabels||[],W=a.vlineThickness||[],R=a.vlineDashed||[]):Sa=[];G||(G=d.categories=[]);G[0]?G[0].category||(G[0].category=[]):G[0]={category:[]};G=G[0].category;ia=this.shiftPlotLines(H.plotLines,-p,-.5,m);for(f=ia.length;f--;)(X=ia[f]).label&&(aa=X.label,aa.text="0"===T[f]||N?"":U(D[f]||M),A=O+f,X.value=A,na=x+f+Q,(A=0===na%S)?(aa.style=H.labels.style,aa.y=s?n+na/S%q*E:l,aa.x=k+(u?
r:0),aa.rotation=u,aa.textAlign=t):aa.style=H.steppedLabels.style,H.plotLines.push(V({},X)),G.shift(),G.push({label:aa.text})),"1"===Sa[f]&&J.addVline(H,{color:Z[f]&&decodeURIComponent(Z[f]),label:ga[f]&&decodeURIComponent(ga[f]),thickness:W[f]&&decodeURIComponent(W[f]),dashed:R[f]&&decodeURIComponent(R[f])},O+f,c);ia=[];m._startIndex=(p+Q)%(s?S*q:S);Q=c.series&&c.series.length;p&&m.oriCatTmp.splice(0,p);m._skipValueWatcher=!1;for(f=0;f<Q;f+=1){Z=c.series[f];W=C&&C[f]||[];R=w&&w[f]||[];S=v&&v[f]||
[];O=I&&I[f]||[];T=Z.yAxis||0;m._rtCounter||(m._rtCounter=1);!ia[f]&&(ia[f]=[]);J=ia[f];ga=Z.data;da=ga.length;N=da-p;for(G=0;N<da;N+=1,G+=1)Sa=decodeURIComponent(B(W[G],null)),ja=g.getCleanValue(Sa),aa=decodeURIComponent(D[G]||""),m.oriCatTmp[N]=aa,ga.shift(),Sa=Z._dataParser({value:Sa,label:aa,color:R&&R[G]&&decodeURIComponent(R[G]),link:S&&S[G]&&decodeURIComponent(S[G]),tooltext:O&&O[G]&&decodeURIComponent(O[G])},N,ja),Sa.y=ja,ga.push(Sa),J.push(Sa),Sa.previousY=this.pointValueWatcher(c,ja,T,this.isStacked,
N);y&&(m.realtimeValues[f]=g.dataLabels(ja,Z.yAxis))}m._rtCounter+=p;this.postSeriesAddition(c,void 0,void 0,void 0,da-p);y&&this.prepareRealtimeValueText();g=c.yAxis[0];C=m[0];I=h(this.isStacked?0:this.setAdaptiveYMin,b.setadaptiveymin,0);w=D=!I;v=(g.max-g.min)/4;if(m.isDual){if(C.max>g.max||C.min<g.min||(!w||0!==g.min)&&g.min!==m._userPMin&&C.min-g.min>v||(!D||0!==g.max)&&g.max!==m._userPMax&&g.max-C.max>v)F._forceReflow=!0,m._skipValueWatcher=!0;g=c.yAxis[1];C=m[1];w=D=!h(b.setadaptivesymin,I);
v=(g.max-g.min)/4;if(C.max>g.max||C.min<g.min||(!w||0!==g.min)&&g.min!==m._userSMin&&C.min-g.min>v||(!D||0!==g.max)&&g.max!==m._userSMax&&g.max-C.max>v)F._forceReflow=!0,m._skipValueWatcher=!0}else if(C.max>g.max||C.min<g.min||(!w||0!==g.min)&&g.min!==m._userMin&&C.min-g.min>v||(!D||0!==g.max)&&g.max!==m._userMax&&g.max-C.max>v)F._forceReflow=!0,m._skipValueWatcher=!0;ba=m[0]&&m[0].RTValueArr;Y=m[1]&&m[1].RTValueArr;F._forceReflow&&(g=c.yAxis[0],C=m[0],fa=m[0]&&m[0].min,ca=m[0]&&m[0].max,ea=m[1]&&
m[1].min,va=m[1]&&m[1].max,G=g.min,Q=g.max,v=h(m.numdivlines,b.numdivlines,this.numdivlines,4),y=b.adjustdiv!==bb,da=h(m._userMax,m._userPMax),ja=h(m._userMin,m._userPMin),f=h(b.showyaxisvalues,b.showyaxisvalue,1),J=h(b.showlimits,f),T=h(b.showdivlinevalue,b.showdivlinevalues,f),N=h(parseInt(b.yaxisvaluesstep,10),parseInt(b.yaxisvaluestep,10),1),N=1>N?1:N,this.axisMinMaxSetter(g,C,da,ja,D,w,v,y),g.plotLines=[],g.plotBands=[],g.labels.enabled=g.labels._enabled,g.gridLineWidth=g._gridLineWidth,g.alternateGridColor=
g._alternateGridColor,this.configurePlotLines(b,c,g,C,J,T,N,m.numberFormatter,!1),G===g.min&&Q===g.max&&(ra=!0),m.isDual?(da=m._userSMax,ja=m._userSMin,I=h(b.setadaptivesymin,I),w=D=!I,J=h(b.showsecondarylimits,J),T=h(b.showdivlinesecondaryvalue,f),g=c.yAxis[1],C=m[1],G=g.min,Q=g.max,this.axisMinMaxSetter(g,C,da,ja,D,w,v,y),g.plotLines=[],g.plotBands=[],g.labels.enabled=g.labels._enabled,g.gridLineWidth=g._gridLineWidth,g.alternateGridColor=g._alternateGridColor,this.configurePlotLines(b,c,g,C,J,
T,N,m.numberFormatter,!0),G===g.min&&Q===g.max&&ra&&(F._forceReflow=!1)):ra&&(F._forceReflow=!1),d.trendlines&&Za(d.trendlines,c.yAxis,m,m.isDual,this.isBar));L.hcJSON&&(b=L.hcJSON[P],delete L.hcJSON[P],V(c.series,L.hcJSON.series,!0),L.hcJSON[P]=b,b=null);V(L,{preReflowAdjustments:function(){this.dataObj.categories=d.categories},postReflowAdjustments:function(){var a,b=c.series,d=b&&b.length;this.hcJSON.xAxis.plotLines=H.plotLines;this.hcJSON._FCconf[0].RTValueArr=ba;this.hcJSON._FCconf[1].RTValueArr=
Y;if(b)for(a=0;a<d;a+=1)this.hcJSON.series[a].data=b[a].data},postHCJSONCreation:function(a){V(a,{_FCconf:{0:{min:fa,max:ca},1:{min:ea,max:va},_skipValueWatcher:!0,realtimeValues:m.realtimeValues,rtvHTMLWrapper:m.rtvHTMLWrapper}},!0)},hcJSON:{_FCconf:{_userMax:m._userMax,_userMin:m._userMin,_userPMax:m._userPMax,_userSMax:m._userSMax,_userPMin:m._userPMin,_userSMin:m._userSMin,_chartState:m._chartState,_rtCounter:m._rtCounter,_startIndex:m._startIndex,oriCatTmp:m.oriCatTmp,x:{catCount:x,_labelY:n,
_labelX:k,_yShipment:l,_isStagger:s,_rotation:u,_textAlign:t,_adjustedPx:r,_staggerLines:q,_labelHeight:E},0:{min:h(fa,m[0]&&m[0].min),max:h(ca,m[0]&&m[0].max)},1:{min:h(ea,m[1]&&m[1].min),max:h(va,m[1]&&m[1].max)}}}},!0);if(!e){F._forceReflow&&(F._forceReflow=!1,g=c.yAxis[0],n=g.plotBands.concat(g.plotLines),Ha(g,n),z.yAxis[0].realtimeUpdateY(g.min,g.max),m.isDual&&(g=c.yAxis[1],n=g.plotBands.concat(g.plotLines),Ha(g,n),z.yAxis[1].realtimeUpdateY(g.min,g.max)),this.containerElement.resizeTo());z.xAxis[0].realtimeUpdateX(p);
f=0;for(N=ia.length;f<N;f+=1)z.plots[f]&&z.plots[f].realtimeUpdate&&z.plots[f].realtimeUpdate(p,F._forceReflow);this.realtimeDrawingLatency=new Date-$}}},extractTrendLines:function(a){var e=a.plotLines;a=a.plotBands;for(var c,d=e.length,b=[],f=[];d;)c=d-1,c=e[c],c.isTrend&&f.push(c),d-=1;for(d=a.length;d;)c=d-1,e=a[c],e.isTrend&&b.push(e),d-=1;return{trendLines:f,trendBands:b}}};za(fb.eiMethods,{clearChart:function(a){a=a&&a.toString&&a.toString();this.feedData("clear=1");y.raiseEvent("ChartCleared",
{source:a},this,[this.id,a])},getDataJSON:function(){return this.jsVars._rtLastUpdatedData||{values:[]}},getData:function(){var a=this.jsVars.hcObj.options,e=a[P].oriCatTmp,c,d=[],b,f,m,g;if(!a||!a.series)return d;a=a.series;b=[];for(m=a.length;m--;)for(c=a[m],b[c.index]=c.name,f=c.data,g=e.length;g--;)c=d[g]||(d[g]=[e[g]]),c[m+1]=f[g].y;b.unshift(null);d.unshift(b);return d}});v("realtimearea",za({friendlyName:"Realtime Data Streaming Area Chart",standaloneInit:!0,multisetRealtime:!0,defaultPlotShadow:1,
creditLabel:X,rendererId:"realtimecartesian"},fb),v.msareabase);v("realtimecolumn",za({friendlyName:"Realtime Data Streaming Column Chart",standaloneInit:!0,multisetRealtime:!0,creditLabel:X,rendererId:"realtimecartesian"},fb),v.mscolumn2dbase);v("realtimeline",za({friendlyName:"Realtime Data Streaming Line Chart",standaloneInit:!0,multisetRealtime:!0,creditLabel:X,rendererId:"realtimecartesian"},fb),v.mslinebase);v("realtimelinedy",za({friendlyName:"Realtime Data Streaming Dual Y-Axis Line Chart",
standaloneInit:!0,multisetRealtime:!0,isDual:!0,creditLabel:X,series:v.mscombibase,rendererId:"realtimecartesian"},fb),v.mslinebase);v("realtimestackedarea",{friendlyName:"Realtime Data Streaming Stacked Area Chart",isStacked:!0,showSum:0,areaAlpha:100,creditLabel:X},v.realtimearea);v("realtimestackedcolumn",{friendlyName:"Realtime Data Streaming Column Chart",isStacked:!0,creditLabel:X},v.realtimecolumn);Ib=function(a,e){return a.minvalue-e.minvalue};Ya.prototype={getColorObj:function(a){for(var e=
this.colorArr,c=0,d=e.length,b,f,m={};c<d;c+=1){m.index=c;b=e[c];f=e[c+1];if(a<b.minvalue)return m.nextObj=b,m;if(a>=b.minvalue&&a<=b.maxvalue)return m.colorObj=b,f&&a==f.minvalue&&(m.nextObj=f,m.isOnMeetPoint=!0),m;m.prevObj=b}m.index=c-1;return m},getColorRangeArr:function(a,e){var c,d=this.colorArr,b,f,m=[],g,p;if(!this.defaultAsigned&&(a>e&&(c=a,a=e,e=c),a<e&&(b=this.getColorObj(a),f=this.getColorObj(e),b&&f))){c=a;b=b.index;for(f=f.index;b<=f;b+=1)g=V({},d[b]),g.minvalue!==c&&(g.minvalue=c),
m.push(g),p=g,c=g.maxvalue;p.maxvalue=e}return m}};Ya.prototype.constructor=Ya;Jb=function(){var a={fluidHRatio:!0,fluidColor:!0,fluidAlpha:!0,fluidFill:!0},e=[],c=0,d=function(a){c=Boolean(a)?a.duration:0},b=function(b,d){var f,n,k=this,l,s,u=!1,t=!1,r=this._3dAttr;Ra(b)&&$(d)&&(f=b,b={},b[f]=d);if(Ra(b))k=a[b]?k._3dAttr[b]:k._attr(b);else for(f in b)n=b[f],a[f]?("fluidFill"===f?(n&&n.linearGradient&&n.stops&&n.stops[0]&&(n=n.stops[0][1]),sb.test(n)?(s=new nb(n),l=s.get("hex"),s=100*s.get("a")):
n&&n.FCcolor?(l=n.FCcolor.color.split(w)[0],s=n.FCcolor.alpha.split(w)[0]):pb.test(n)&&(l=n.replace(db,eb)),r.fluidColor=q(l,r.fluidColor,"000000"),r.fluidAlpha=h(s,r.fluidAlpha,100),u=!0):"fluidColor"===f?(r.fluidColor=q(n,r.fluidColor,"000000"),u=!0):"fluidAlpha"===f?(r.fluidAlpha=h(n,r.fluidAlpha,100),u=!0):0<=n&&1>=n&&(r.fluidHRatio=n,t=!0),u&&(n=ea(r.fluidColor,r.is2D?80:70),k.fluid.attr({fill:G(n,r.fluidAlpha)}),k.fluidTop.attr({fill:G(n,r.fluidAlpha)}),k.topLight.attr({stroke:G(n,.4*r.fluidAlpha)}),
k.topLightBorder.attr({fill:S({FCcolor:{color:n+w+n,alpha:"40,0",ratio:"0,80",radialGradient:!0,cx:.5,cy:1,r:"70%"}})})),t&&(n=r.scaleY+r.h*(1-r.fluidHRatio),c?(k.fluid.animate({path:r.fluidPath.concat(["L",r.lx2,n,r.lx1,n,"Z"])},c,"easeIn"),k.fluidTop.animate({path:e.concat(["M",r.lx1,n,"A",r.lCylWidthHalf,1,0,1,0,r.lx2,n,"Z"])},c,"easeIn")):(k.fluid.attr({path:r.fluidPath.concat(["L",r.lx2,n,r.lx1,n,"Z"])}),k.fluidTop.attr({path:e.concat(["M",r.lx1,n,"A",r.lCylWidthHalf,1,0,1,0,r.lx2,n,"Z"])})))):
this._attr(f,n);return k},f=function(a,b,c){this.border.shadow(a,b,c)};return function(a,c,p,n,k,l,s,u,t,r,K,E,A){var J,x,z,F,C,D,T,v,I,y,H,N,B,M,L,ia;lb(a)&&(c=a.y,p=a.r,n=a.h,l=a.renderer,s=a.fluidHRatio,u=a.conColor,t=a.conBorderColor,r=a.conBorderThickness,K=a.fluidColor,E=a.fluidAlpha,A=a.is2D,a=a.x);0<=s&&1>=s||(s=0);u=q(u,"FFFFFF");t=q(t,"#000000");r=h(r,1);K=q(K,"000000");E=h(E,100);ia={x:a,y:c,r:p,h:n,renderer:l,fluidHRatio:s,conColor:u,conBorderColor:t,conBorderThickness:r,fluidStroke:3,
fluidColor:K,is2D:A,fluidAlpha:E};k._attr=k.attr;k.attr=b;k._setAnimate=d;k.shadow=f;k._3dAttr=ia;J=ea(u,80);K=ea(K,A?80:70);u=W(u,80);x=.643*p;z=.33*x;F=x-z;C=a-x;D=a+x;T=a-F;F=a+F;v=c+x;I=v+n;y=I+.766*p;H=c+z;n=v+n*(1-s);s=.9*x;N=p+s-x;B=a-s;M=a+s;y-=Math.abs(Math.sqrt(N*N-s*s));L=parseInt(a-.6*x,10);x=a+x/2;ia.fluidPath=["M",B,y,"A",N,N,0,1,0,M,y];ia.scaleY=v;ia.lx1=B;ia.lx2=M;ia.lCylWidthHalf=s;k.topLight=l.path(["M",B,v,"L",M,v],k).attr({"stroke-width":1,stroke:G(K,40)});k.topLightBorder=l.path(["M",
B,v,"L",M,v,M,H,B,H,"Z"],k).attr({"stroke-width":0,fill:S({FCcolor:{color:K+w+K,alpha:A?"0,0":"40,0",ratio:"0,80",radialGradient:!0,cx:.5,cy:1,r:"70%"}})});k.fluid=l.path(ia.fluidPath.concat(["L",M,n,B,n,"Z"]),k).attr({"stroke-width":0,fill:G(K,E)});k.fluidTop=l.path(e.concat(["M",B,n,"A",s,1,0,1,0,M,n,"Z"]),k).attr({"stroke-width":0,fill:G(K,E)});k.border=l.path(e.concat(["M",T,c,"A",z,z,0,0,0,C,H],["L",C,I],["A",p,p,0,1,0,D,I],["L",D,H],["A",z,z,0,0,0,F,c,"Z"]),k).attr({"stroke-width":r,stroke:t});
A||(k.bulbBorderLight=l.path(e.concat(["M",C,I,"A",p,p,0,0,1,D,I],["M",D,I,"A",p,p,0,0,0,C,I],["M",C,I,"A",p,p,0,1,0,D,I,"Z"]),k).attr({"stroke-width":0,stroke:"#00FF00",fill:S({FCcolor:{cx:.5,cy:.5,r:"50%",color:J+w+u,alpha:"0,50",ratio:"78,30",radialGradient:!0}})}),k.bulbTopLight=l.path(e.concat(["M",C,I,"A",p,p,0,0,1,D,I],["A",p,p,0,0,0,C,I],["A",p,p,0,1,0,D,I,"Z"]),k).attr({"stroke-width":0,fill:S({FCcolor:{cx:.3,cy:.1,r:"100%",color:u+w+J,alpha:"60,0",ratio:"0,30",radialGradient:!0}})}),k.bulbCenterLight=
l.path(e.concat(["M",C,I,"A",p,p,0,1,0,D,I],["A",p,p,0,0,0,C,I],["A",p,p,0,0,1,D,I,"Z"]),k).attr({"stroke-width":0,fill:S({FCcolor:{cx:.25,cy:.7,r:"100%",color:u+w+J,alpha:"80,0",ratio:"0,70",radialGradient:!0}})}),k.cylLeftLight=l.path(e.concat(["M",a,c,"L",T,c],["A",z,z,0,0,0,C,H],["L",C,I,a,I,"Z"]),k).attr({"stroke-width":0,fill:S({FCcolor:{color:u+w+J,alpha:"50,0",ratio:"0,80",angle:0}})}),k.cylRightLight=l.path(e.concat(["M",C,c,"L",F,c],["A",z,z,0,0,1,D,H],["L",D,I,C,I,"Z"]),k).attr({"stroke-width":0,
fill:S({FCcolor:{color:u+w+J+w+J,alpha:"50,0,0",ratio:"0,40,60",angle:180}})}),k.cylLeftLight1=l.path(["M",L,H,"L",C,H,C,I,L,I,"Z"],k).attr({"stroke-width":0,fill:S({FCcolor:{color:u+w+J,alpha:"60,0",ratio:"0,100",angle:180}})}),k.cylRightLight1=l.path(["M",L-.01,H,"L",x,H,x,I,L-.01,I,"Z"],k).attr({"stroke-width":0,fill:S({FCcolor:{color:u+w+J,alpha:"60,0",ratio:"0,100",angle:0}})}));return k}}();Kb=function(){var a={fluidHRatio:!0,color:!0,alpha:!0,fill:!0},e=[],c=0,d=function(a){c=Boolean(a)?a.duration:
0},b=function(b,d){var f,n,k=this,l,s,u=!1,t=!1,r=this._3dAttr,K,E,A,J,x,z,F,C;Ra(b)&&$(d)&&(f=b,b={},b[f]=d);if(Ra(b))k=a[b]?k._3dAttr[b]:k._attr(b);else for(f in b)n=b[f],a[f]?("fill"===f?(n&&n.linearGradient&&n.stops&&n.stops[0]&&(n=n.stops[0][1]),sb.test(n)?(s=new nb(n),l=s.get("hex"),s=100*s.get("a")):n&&n.FCcolor?(l=n.FCcolor.color.split(w)[0],s=n.FCcolor.alpha.split(w)[0]):pb.test(n)&&(l=n.replace(db,eb)),r.fluidColor=q(l,r.fluidColor,"000000"),r.fluidAlpha=h(s,r.fluidAlpha,100),u=!0):"color"===
f?(r.fluidColor=q(n,r.fluidColor,"000000"),u=!0):"alpha"===f?(r.fluidAlpha=h(n,r.fluidAlpha,100),u=!0):0<=n&&1>=n&&(r.fluidHRatio=n,t=!0),u&&(n=ea(r.fluidColor,70),K=W(r.fluidColor,70),A=ea(r.conColor,80),E=W(r.conColor,80),s=r.fluidAlpha,J=s+w+s,k.fluid.attr({"stroke-width":0,fill:S({FCcolor:{cx:.5,cy:0,r:"100%",color:K+w+n,alpha:J,ratio:"0,100",radialGradient:!0}})}),k.fluidTop.attr({"stroke-width":3,stroke:G(K,s),fill:S({FCcolor:{cx:.5,cy:.7,r:"100%",color:K+w+n,alpha:J,ratio:"0,100",radialGradient:!0}})}),
k.btnBorderLight.attr({fill:S({FCcolor:{color:E+w+A+w+E+w+E+w+A+w+n+w+A+w+E,alpha:"50,50,50,50,50,"+.7*s+",50,50",ratio:"0,15,0,12,0,15,43,15",angle:0}})})),t&&(A=r.x,n=r.r,K=r.fluidStroke,E=K/2,x=r.h*r.fluidHRatio,K=A-n,A+=n,J=K+E,z=A-E,F=r.y+r.h,x=F-x,C=n*r.r3dFactor,E=n-E,c?(k.fluid.animate({path:e.concat(["M",K,F],["A",n,ya(C,1),0,0,0,A,F],["L",A,x],["A",n,ya(C,1),0,0,0,K,x,"Z"])},c,"easeIn"),k.fluidTop.animate({path:e.concat(["M",J,x],["A",E,C,0,0,0,z,x],["L",z,x],["A",E,C,0,0,0,J,x,"Z"])},c,
"easeIn")):(k.fluid.attr({path:e.concat(["M",K,F],["A",n,C,0,0,0,A,F],["L",A,x],["A",n,C,0,0,1,K,x,"Z"])}),k.fluidTop.attr({path:e.concat(["M",J,x],["A",E,C,0,0,0,z,x],["L",z,x],["A",E,C,0,0,0,J,x,"Z"])})))):this._attr(f,n);return k},f=function(){};return function(a,c,p,n,k,l,s,u,t,r,K,E,A){var J,x,z,F,C,D,T,v,I,y,H,N,B,M,L,ia,Q,P;lb(a)&&(c=a.y,p=a.r,n=a.h,k=a.r3dFactor,l=a.parentGroup,s=a.renderer,u=a.fluidHRatio,t=a.conColor,r=a.conAlpha,K=a.fluidColor,E=a.fluidAlpha,a=a.x);k=h(k,.15);Ia.vml&&(k=
k||.001);0<=u&&1>=u||(u=0);t=q(t,"FFFFFF");r=h(r,30);K=q(K,"000000");E=h(E,100);r={x:a,y:c,r:p,h:n,r3dFactor:k,renderer:s,fluidHRatio:u,conColor:t,conAlpha:r,fluidStroke:3,fluidColor:K,fluidAlpha:E};l=s.group("graphic",l);l._attr=l.attr;l.attr=b;l._setAnimate=d;l.shadow=f;l._3dAttr=r;k*=p;r=p-1.5;J=c+n;n=J-n*u;u=a-p;x=a+p;z=u+1.5;F=x-1.5;C=u-2;D=x+2;T=p+2;v=k+2;I=J+4;y=I+.001;H=ea(t,80);N=ea(t,90);t=W(t,80);B=ea(K,70);K=W(K,70);M=ea(B,90);L=.85*p;ia=a-L;a+=L;Q=Math.sqrt((1-L*L/(p*p))*k*k);L=c+Q;Q=
J+Q;P=c-1;l.btnBorder=s.path(e.concat(["M",C,I],["A",T,v,0,0,0,D,I],["L",D,y],["A",T,v,0,0,0,C,y,"Z"]),l).attr({"stroke-width":4,stroke:G(H,80)});l.btnBorder1=s.path(e.concat(["M",u,I],["A",p,k,0,0,0,x,I],["L",x,y],["A",p,k,0,0,0,u,y,"Z"]),l).attr({"stroke-width":4,stroke:G(H,50)});l.btnBorderLight=s.path(e.concat(["M",u,J],["A",p,k,0,0,0,x,J],["A",p,k,0,0,0,u,J,"Z"]),l).attr({"stroke-width":0,fill:S({FCcolor:{color:t+w+H+w+t+w+t+w+H+w+B+w+H+w+t,alpha:"50,50,50,50,50,70,50,50",ratio:"0,15,0,12,0,15,43,15",
angle:0}})});C=A?t+w+H+w+t+w+H+w+N+w+N+w+H+w+t:t+w+H+w+H+w+H+w+H+w+H+w+H+w+t;l.back=s.path(e.concat(["M",u,J],["A",p,k,0,0,0,x,J],["L",x,c],["A",p,k,0,0,0,u,c,"Z"]),l).attr({"stroke-width":1,stroke:G(H,50),fill:S({FCcolor:{color:C,alpha:"30,30,30,30,30,30,30,30",ratio:"0,15,43,15,0,12,0,15",angle:0}})});C=A?K+w+B:B+w+B;l.fluid=s.path(e.concat(["M",u,J],["A",p,ya(k,1),0,0,0,x,J],["L",x,n],["A",p,ya(k,1),0,0,0,u,n,"Z"]),l).attr({"stroke-width":0,fill:S({FCcolor:{cx:.5,cy:0,r:"100%",color:C,alpha:E+
w+E,ratio:"0,100",radialGradient:!0}})});C=A?K+w+B:B+w+B;l.fluidTop=s.path(e.concat(["M",z,n],["A",r,k,0,0,0,F,n],["L",F,n],["A",r,k,0,0,0,z,n,"Z"]),l).attr({"stroke-width":2,stroke:A?G(K,E):G(M),fill:S({FCcolor:{cx:.5,cy:.7,r:"100%",color:C,alpha:E+w+E,ratio:"0,100",radialGradient:!0}})});C=A?t+w+H+w+t+w+t+w+H+w+t+w+H+w+t:H+w+H+w+H+w+H+w+H+w+H+w+H+w+H;l.front=s.path(e.concat(["M",u,J],["A",p,k,0,0,0,x,J],["L",x,c],["A",p,k,0,0,1,u,c,"Z"]),l).attr({"stroke-width":1,stroke:G(H,50),fill:S({FCcolor:{color:C,
alpha:"30,30,30,30,30,30,30,30",ratio:"0,15,0,12,0,15,43,15",angle:0}})});A&&(l.frontLight=s.path(e.concat(["M",u,J],["A",p,k,1,0,0,ia,Q],["L",ia,L],["A",p,k,0,0,1,u,c,"Z"]),l).attr({"stroke-width":0,stroke:"#"+H,fill:S({FCcolor:{color:C,alpha:"40,0",ratio:"0,100",angle:0}})}));A&&(l.frontLight1=s.path(e.concat(["M",a,Q],["A",p,k,0,0,0,x,J],["L",x,c],["A",p,k,1,0,0,a,L,"Z"]),l).attr({"stroke-width":0,stroke:"#"+H,fill:S({FCcolor:{color:C,alpha:"40,0",ratio:"0,100",angle:180}})}));l.cylinterTop=s.path(e.concat(["M",
u,P],["A",p,k,0,0,0,x,P],["L",x,P],["A",p,k,0,0,0,u,P,"Z"]),l).attr({"stroke-width":2,stroke:G(H,40)});return l}}();Lb=function(){var a={value:!0},e=0,c=function(a){e=Boolean(a)?a.duration:0},d=function(b,c){var d,p,n=this,k=this._3dAttr,l,h,u,t,r,q,E;Ra(b)&&$(c)&&(d=b,b={},b[d]=c);if(Ra(b))n=a[b]?n._3dAttr[b]:n._attr(b);else for(d in b)if(p=b[d],a[d]){if(p>=k.minValue&&p<=k.maxValue){k[d]=p;l=(p-k.minValue)/k.perLEDValueLength;p=la(l)*k.sizeGapSum-k.ledGap;if(k.LEDCase){h=n.colorArr;t=h.length;for(u=
0;u<t;u+=1)r=h[u],r.maxLEDNoFrac<=l?E=k.LEDLowerFN:q?E=k.LEDUpperFN:(E=void 0,q=r),E&&(r[E](),"show"===E&&r.attr(r.oriShapeArg));q||(q=r);q.show();q.attr(q.hoverShapeArg)}n.darkShade&&(l={},k.isXChange?(l.width=Math.ceil(k.w-p),k.isIncrement&&(l.x=k.x+p)):(l.height=Math.ceil(k.h-p),k.isIncrement&&(l.y=k.y+p)),e?n.darkShade.animate(l,e,"easeIn"):n.darkShade.attr(l))}}else this._attr(d,p);return n},b=function(){};return function(a,e,g,p,n,k,l,s,u,t,r,K,E,A,J,x,z,F,C,D,T){var w=function(a){var b=0,c,
d;return function(){b=0;for(c=a.colorArr.length;b<c;b+=1)d=a.colorArr[b],d.attr(d.data("rollover"))}},I=function(a){var b=0,c,d;return function(){b=0;for(c=a.colorArr.length;b<c;b+=1)d=a.colorArr[b],d.attr(d.data("rollout"))}},v,H,N,y,B,L,M,Q,P,O,V,Z,ga,R,X,aa,na,da,ra,ja,U,ba,Y,ca;lb(a)&&(e=a.y,g=a.w,p=a.h,n=a.wGroup,k=a.renderer,l=a.value,s=a.gaugeFillColor,u=a.gaugeBorderColor,t=a.gaugeBorderAlpha,r=a.gaugeBorderThickness,K=a.colorRangeManager,E=a.minValue,A=a.maxValue,J=a.useSameFillColor,x=a.useSameFillBgColor,
z=a.ledSize,F=a.ledGap,C=a.type,a=a.x);l>=E&&l<=A||(l=E);s=q(s,"FFFFFF");u=q(u,"000000").replace(db,eb);t=h(t,1);r=h(r,2);ca={x:a,y:e,w:g,h:p,wGroup:n,renderer:k,value:l,gaugeFillColor:s,gaugeBorderColor:u,gaugeBorderAlpha:t,gaugeBorderThickness:r,colorRangeManager:K,minValue:E,maxValue:A,ledGap:F,ledSize:z,type:C,useSameFillColor:J,useSameFillBgColor:x};n=k.group("graphic",n);n._attr=n.attr;n.attr=d;n._setAnimate=c;n.shadow=b;n._3dAttr=ca;K=K.getColorRangeArr(E,A);v=a;H=e;y=N=!0;B=2===C||4===C?p:
g;L=F+z;M=F/2;Q=M/2;P=B-z;O=A-E;A=0;V=K.length;R=ga=0;X=!1;na=aa="show";da=a;ra=e;ja=r/2;U=a-ja;ba=e-ja;Y=a+g+ja;ja=e+p+ja;J&&(R+=1,aa="hide");x&&(R+=2,na="hide");0>P?(J=1,z=B):(J=parseInt(P/L,10)+1,z+=P%L/J,L=z+F);x=O/J;n.colorArr=[];B=[];1===C?da+=L-F/2:2===C?(y=!1,ra+=L-F/2):3===C?(v=a+g,N=!1,da+=L-F/2):(H=e+p,y=N=!1,ra+=L-F/2);ca.ledGap=F;ca.ledSize=z;ca.sizeGapSum=L;ca.perLEDValueLength=x;ca.isIncrement=N;ca.isXChange=y;ca.LEDLowerFN=aa;ca.LEDUpperFN=na;(ca.LEDCase=R)&&(3===R?Z={x:a,y:e,width:g,
height:p}:X=!0);for(n.border=k.path(["M",U,ba,"L",Y,ba,Y,ja,U,ja,"Z"],n).attr({stroke:G(u,t),"stroke-width":r}).shadow({apply:D});A<V;A+=1)if((u=K[A])&&$(u.maxvalue)&&(t=la((u.maxvalue-E)/x),z=t-ga,ga=t,0<z)){r={r:0};X&&(Z={});z*=L;if(y)if(r.y=H,r.width=z-F,r.height=p,N?(r.x=v,v+=z):(r.x=v-r.width,v-=z),X&&(Z.width=r.x-a,N&&1===R||!N&&2===R?(Z.x=a,Z.width+=r.width):Z.width=g-Z.width),0===A||A===V-1){if(r.width+=Q,N&&A===V-1||!N&&0===A)r.x-=Q,r.width=Math.ceil(r.width)}else r.width+=M,r.x-=Q;else if(r.x=
v,r.width=g,r.height=z-F,N?(r.y=H,H+=z):(r.y=H-r.height,H-=z),X&&(Z.height=r.y-e,N&&1===R||!N&&2===R?(Z.y=e,Z.height+=r.height):Z.height=p-Z.height),0===A||A===V-1){if(r.height+=Q,N&&A===V-1||!N&&0===A)r.y-=Q,r.height=Math.ceil(r.height)}else r.height+=M,r.y-=Q;z=k.rect(r.x,r.y,r.width,r.height,n).attr({"stroke-width":0,fill:S({FCcolor:{color:q(u.code,"000000"),alpha:h(u.alpha,100)}})});z.oriShapeArg=r;z.hoverShapeArg=Z;z.maxLEDNo=t;z.maxLEDNoFrac=(u.maxvalue-E)/x;T&&(z.data("rollover",{"stroke-width":0,
fill:S({FCcolor:{color:ea(q(u.code,"000000"),80)+","+W(q(u.code,"000000"),80),alpha:h(u.alpha,100),angle:C%2?90:0}})}),z.data("rollout",{"stroke-width":0,fill:S({FCcolor:{color:q(u.code,"000000"),alpha:h(u.alpha,100)}})}));n.colorArr.push(z)}n.darkShade=k.rect(a,e,g,p,0,n).attr({"stroke-width":0,fill:G(s,50)});for(A=1;A<J;A+=1)y?(B.push("M",da,ra,"L",da,ra+p),da+=L):(B.push("M",da,ra,"L",da+g,ra),ra+=L);n.LEDGap=k.path(B,n).attr({stroke:G(s,100),"stroke-width":F});n.tracker=k.rect(a,e,g,p,0,n).attr({fill:fa});
T&&n.tracker.hover(w(n),I(n));n.attr({value:l});return n}}();v("renderer.drawingpad",{deleteme:function(a){this.container.innerHTML="called from drawingpad: "+a}},v["renderer.root"]);v("renderer.widgetbase",{drawLegend:function(){},drawGraph:function(){var a=this.elements,e=this.paper,c=this.layers,d=this.options,b=c.dataset;d.nativeMessage||(c.dataset||(b=a.widgetGroup=c.dataset=e.group("dataset"),c.tracker=e.group("hot"),c.tracker.insertAfter(c.dataset)),c.datalabels||(c.datalabels=e.group("datalabels").insertAfter(b)),
b.translate(this.canvasLeft,this.canvasTop),c.datalabels.translate(this.canvasLeft,this.canvasTop),d.tooltip&&!1!==d.tooltip.enabled&&e.tooltip(d.tooltip.style,d.tooltip.shadow,d.tooltip.constrain),this.drawWidget(),this.drawScale(),this.drawValue())},drawWidgetValue:function(){},drawValue:function(a,e){var c=this.options,d=e||c.plotOptions.series.animation,c=c.series&&c.series[0]&&c.series[0].data||[],b;if(c.length){if(a&&(b=a.length))for(;b--;)c[b]&&(c[b]=a[b]);this.drawWidgetValue(c,d);this.drawWidgetLabel(c,
d)}},drawWidgetLabel:function(a){var e=this.paper,c=this.options,d=c.chart,b=this.elements,f=this.layers;a=a[0];var f=f.datalabels||(f.datalabels=e.group("datalabels").insertAfter(f.dataset)),m=this.canvasWidth,g=this.canvasHeight,p=d.valuePadding,n=a.displayValue,k=h(d.yScaleRadius,0),c=c.plotOptions.series.dataLabels.style,l={fontFamily:c.fontFamily,fontSize:c.fontSize,lineHeight:c.lineHeight,fontWeight:c.fontWeight,fontStyle:c.fontStyle},g=g+p+k;null!==a.y&&!isNaN(a.y)&&$(n)&&n!==M&&(b.dataLabel?
b.dataLabel.attr({text:n}):b.dataLabel=e.text(f).attr({"vertical-align":"top",text:n,x:m/2,y:g,"text-anchor":sa[Ga],fill:c.color,title:a.originalText||"","text-bound":[c.backgroundColor,c.borderColor,c.borderThickness,c.borderPadding,c.borderRadius,c.borderDash]}).css(l),e=b.dataLabel.getBBox(),0>e.x+d.spacingLeft&&(e=e.width-d.spacingLeft,d.origW<e&&(e=d.origW-d.spacingLeft),b.dataLabel.attr({x:e/2})))},drawScale:function(){var a=this.paper,e=this.elements,c=this.layers.dataset,d=this.canvasWidth,
b=this.canvasHeight,f=this.options.scale,m=f.minorTM,g=f.min,p=f.max,n=f.majorTM,k=f.axisPosition,l=f.minorTMHeight,h=f.majorTMHeight,u=f.connectorColor,t=f.connectorThickness,r=f.minorTMColor,q=f.minorTMThickness,E=f.majorTMColor,A=f.majorTMThickness,J=f.tickMarkDistance,x=f.tickValueDistance,z=f.placeTicksInside,F=f.placeValuesInside,C=Math.max(h,l),c=e.scaleGroup||(e.scaleGroup=a.group("scale",c)),D=Ma,T=Ga,w=f.reverseScale,I=g,v=q/2,H=A/2,g=p-g,y=0,G=0,B=0,L=0,P=0,Q=0,S=0,O=0,R=0,Z=0,V=0,X=0,
W=0,aa=0,na=0,da=0;z?(J=-J,h=-h,l=-l,F?(C=-C,x=-x):C=-J):F&&(C=-J,x=-x);w&&(g=-g,I=p);switch(k){case 1:y=d/g;L=-J;Q=L-H;O=L-v;Z=L-h;X=L-l;aa=L-C-x;D=Ma;T=F?Fa:mb;break;case 2:G=b/g;B=J;P=B+H;S=B+v;R=B+h;V=B+l;W=B+C+x;na=d;D=F?ab:Ja;T=Ga;break;case 3:y=d/g;L=J;Q=L+H;O=L+v;Z=L+h;X=L+l;aa=L+C+x;da=b;D=Ma;T=F?mb:Fa;break;case 4:G=b/g,B=-J,P=B-H,S=B-v,R=B-h,V=B-l,W=B-C-x,D=F?Ja:ab,T=Ga}e.minorTM||(e.minorTM=[]);e.majorTM||(e.majorTM=[]);this.tmLabel||(e.tmLabel=[]);if(l)for(b=0,p=m.length;b<p;b+=1)k=m[b]-
I,d=k*y,k*=G,e.minorTM[b]=a.path(["M",d+S,k+O,"L",d+V,k+X],c).attr({"shape-rendering":qb[1>q],stroke:r,"stroke-linecap":"round","stroke-width":q});b=0;for(p=n.length;b<p;b+=1)m=n[b],k=m.value-I,r=m.displayValue,d=k*y,k*=G,l&&(e.majorTM[b]=a.path(["M",d+P,k+Q,"L",d+R,k+Z],c).attr({"shape-rendering":qb[1>A],stroke:E,"stroke-linecap":"round","stroke-width":A})),r!==M&&(S=0===b||b===p-1?f.limitValues.style:f.tickValues.style,q=m.labelX||0,e.tmLabel[b]=a.text(d+W+q,k+aa,r,c).attr({"text-anchor":sa[m.align||
D],"vertical-align":T,title:m.originalText||""}).css(S));t&&(e.tmConnector=a.path(["M",B,L,"L",g*y+B,g*G+L],c).attr({"shape-rendering":qb[1>t],stroke:u,"stroke-linecap":"round","stroke-width":t}));c.translate(na,da);return c},realtimeUpdate:function(a){if(a===this.lastUpdatedObj)return!1;var e=this.options,c=e.series,d=this.logic,c=c&&c[0]&&c[0].data,b=a.values||[],f=a.labels||[],m=a.toolTexts||[],g=a.showLabels||[],p=c&&c.length||0,h=[],k;if(p){for(;p--;)k={},void 0!==b[p]&&""!==b[p]?(k.value=b[p],
k.hasNewData=!0):k.value=c[p].y,f[p]&&(k.displayvalue=f[p],k.hasNewData=!0),m[p]&&(k.tooltext=m[p],k.hasNewData=!0),k.hasNewData&&(h[p]=d.getPointStub(k,p,e,this.definition)),"0"!=g[p]&&c[p].displayValue||(h[p].displayValue=M);h.length&&(this.lastUpdatedObj=a)&&this.drawValue(h);return Boolean(h.length)}}},v["renderer.root"]);v("renderer.bulb",{drawWidget:function(){var a=this.options,e=a.chart,c=this.paper,d=this.elements,b=e.gaugeRadius,a=a.series[0]&&a.series[0].data&&a.series[0].data[0]||{},f=
a.rolloverProperties||{},m={cx:e.gaugeOriginX,cy:e.gaugeOriginY,stroke:a.borderColor,"stroke-linecap":"round","stroke-width":a.borderWidth,r:e.animation?.001:b},g={r:b},p;null===a.y||isNaN(a.y)||(p=d.bulb=(p=d.bulb)?p.attr(m):c.circle(m,this.layers.dataset),e.animation&&p.animate(g,e.animation.duration,"easeIn"),f.enabled&&p.mouseover(function(){p.attr(f.hoverAttr);f.hoverAnimAttr&&p.animate(f.hoverAnimAttr,100,"easeIn")}).data("hoverAttr",f.hoverAttr).mouseout(function(){p.attr(f.outAttr);f.hoverAnimAttr?
p.animate(g,100,"easeIn"):p.attr(g)}).data("outAttr",f.outAttr))},drawWidgetValue:function(a){var e=this,c=e.elements;a=a[0];var d=a.rolloverProperties||{},b=d.hoverAttr,f=d.outAttr,m={fill:S(a.color),ishot:!0},c=c.bulb,g=c.data("hoverAttr"),p=c.data("outAttr");d.enabled&&(b&&b.stroke&&(g.stroke=b.stroke,p.stroke=f.stroke),b&&b.fill&&(g.fill=b.fill,p.fill=f.fill));c||e.drawWidget();d={value:a.y,displayValue:a.displayValue,toolText:a.toolText};null===a.y||isNaN(a.y)||c.attr(m).click(function(a){ca.call(this,
e,a)}).hover(function(a){ca.call(this,e,a,"DataPlotRollOver")},function(a){ca.call(this,e,a,"DataPlotRollOut")}).tooltip(a.toolText).data("eventArgs",d)},drawScale:function(){},drawWidgetLabel:function(a){var e=this.options.chart,c=this.paper,d=this.elements,b=this.layers,f=e.gaugeRadius,m=e.gaugeOriginX,g=e.gaugeOriginY;a=a[0];var p=d.dataLabel,h=e.dataLabels.style,k={fontFamily:h.fontFamily,fontSize:h.fontSize,lineHeight:h.lineHeight,fontWeight:h.fontWeight,fontStyle:h.fontStyle};b.datalabels||
(b.datalabels=c.group("datalabels").insertAfter(b.dataset));e.placeValuesInside?(e=g,b=Ga):(e=g+f+e.valuePadding,b=Fa);null===a.y||isNaN(a.y)||a.displayValue===M||(p||(d.dataLabel=p=c.text(this.layers.dataset)),p.attr({text:a.displayValue,"text-anchor":"middle",x:m,y:e,title:a.originalText||"","vertical-align":b,fill:h.color,"text-bound":[h.backgroundColor,h.borderColor,h.borderThickness,h.borderPadding,h.borderRadius,h.borderDash]}).css(k))}},v["renderer.widgetbase"]);v("renderer.thermometer",{drawWidget:function(){var a=
this.options,e=a.chart,c=this.paper,d=a.series[0].data[0],b=e.plotHoverEffects||{},f=e.thmBulbRadius,m=.643*f,g=new nb(d.color),p=g.get("hex").replace(db,M),g=100*g.get("a"),h;d.minValue=a.scale.min;d.maxValue=a.scale.max;h=this.elements.thermometer=Jb(0+m,0-m,f,e.thmHeight,this.layers.dataset,c,0,e.thmGlassColor,e.gaugeBorderColor,e.gaugeBorderThickness,p,g,e.use3DLighting);b.enabled&&h.data("hoverInAttrs",{fluidColor:b.thmFillHoverColor,fluidAlpha:b.thmFillHoverAlpha}).data("hoverOutAttrs",{fluidColor:p,
fluidAlpha:g}).hover(function(){h.attr(h.data("hoverInAttrs"))},function(){h.attr(h.data("hoverOutAttrs"))})},drawWidgetValue:function(a,e){var c=this,d=c.elements,b=c.options.scale,f=b.max,m=b.min,b=a[0],f=(h(b.y,m)-m)/(f-m),g;d.thermometer||c.drawWidget();b.fluidHRatio=f;m={value:b.y,displayValue:b.displayValue,toolText:b.toolText};e&&d.thermometer._setAnimate(e);d.thermometer.attr({fluidHRatio:f,ishot:!0}).click(function(a){ca.call(this,c,a)}).hover(function(a){ca.call(this,c,a,"DataPlotRollOver")},
function(a){ca.call(this,c,a,"DataPlotRollOut")}).data("eventArgs",m);if(b.toolText&&(g=d.thermometer.bottom)){do g.tooltip(b.toolText);while(g=g.next)}}},v["renderer.widgetbase"]);v("renderer.cylinder",{drawWidget:function(){var a=this.options,e=a.chart,c=e.plotHoverEffects||{},d=this.paper,b=this.elements,f=this.layers.dataset,m=a.scale,g=m.max,a=a.series[0].data[0],h,n;a.minValue=m.min;a.maxValue=g;b.cylinder=Kb(e.cylRadius,0,e.cylRadius,e.cylHeight,e.cylYScale,f,d,0,e.cylGlassColor,"100",e.cylFillColor,
e.cylFillAlpha,e.cyl3DLighting);c.enabled&&(h={color:c.cylFillHoverColor,alpha:c.cylFillHoverAlpha},n={color:e.cylFillColor,alpha:e.cylFillAlpha},b.cylinder.hover(function(){b.cylinder.attr(h)},function(){b.cylinder.attr(n)}))},drawWidgetValue:function(a,e){var c=this,d=c.elements,b=c.options.scale,f=b.max,m=b.min,b=a[0],f=(h(b.y,m)-m)/(f-m),g;d.cylinder||c.drawWidget();m={value:b.y,displayValue:b.displayValue,toolText:b.toolText};b.fluidHRatio=f;e&&d.cylinder._setAnimate(e);d.cylinder.attr({fluidHRatio:f,
ishot:!0}).click(function(a){ca.call(this,c,a)}).hover(function(a){ca.call(this,c,a,"DataPlotRollOver")},function(a){ca.call(this,c,a,"DataPlotRollOut")}).data("eventArgs",m);if(b.toolText&&(g=d.cylinder.bottom)){do g.tooltip(b.toolText);while(g=g.next)}}},v["renderer.widgetbase"]);v("renderer.led",{drawWidget:function(){var a=this.options,e=this.paper,c=this.logic,d=a.chart,b=this.elements,f=a.scale,m=f.max,g=f.min,a=a.series[0].data[0],h=this.layers.dataset;a.minValue=g;a.maxValue=m;b.led=Lb(0,
0,this.canvasWidth,this.canvasHeight,h,e,0,d.gaugeFillColor,d.gaugeBorderColor,d.gaugeBorderAlpha,d.gaugeBorderThickness,c.colorRangeGetter,g,m,d.useSameFillColor,d.useSameFillBgColor,d.ledSize,d.ledGap,c.isHorizontal?f.reverseScale?3:1:f.reverseScale?4:2,d.showShadow,d.plotHoverEffect)},drawWidgetValue:function(a,e){var c=this.elements,d=a[0].y;c.led||this.drawWidget();e&&c.led._setAnimate(e);c.led.attr({value:d})}},v["renderer.widgetbase"]);v("renderer.bullet",{drawWidget:function(){var a=this.options,
e=this.paper,c=this.logic,d=a.chart,b=a.scale,a=this.elements,f=this.layers.dataset,m=this.canvasWidth,g=this.canvasHeight,p=b.min,n=b.max,k=b&&b.trendPoint||[],l=d.colorRangeFillMix,s=d.colorRangeFillRatio,u=d.colorRangeBorderColor,t=d.colorRangeBorderAlpha,r=d.colorRangeBorderThickness,q=c.colorRangeGetter.getColorRangeArr(p,n),d=d.showShadow,E,A,J,x,z,F=c.colorManager,C,D,T;a.linear||(a.linear=E=e.group("colorrange",f),a.outerRect=e.rect(E));a.outerRect.attr({x:0,y:0,width:m,height:g,stroke:"none",
r:0});c=c.isHorizontal?b.reverseScale?3:1:b.reverseScale?4:2;1===c?(f=function(a,b){return{x:a*m/(n-p),y:0,width:(b-a)*m/(n-p),height:g}},A=270):2===c?(f=function(a,b){return{x:0,y:a*g/(n-p),width:m,height:(b-a)*g/(n-p)}},A=180):3===c?(f=function(a,b){return{x:m-b*m/(n-p),y:0,width:(b-a)*m/(n-p),height:g}},A=270):(f=function(a,b){return{x:0,y:g-b*g/(n-p),width:m,height:(b-a)*g/(n-p)}},A=180);a.colorRangeElems||(a.colorRangeElems=[]);c=0;for(b=q.length;c<b;c+=1)x=q[c],z=f(x.minvalue-p,x.maxvalue-p),
x.x=z.x,x.y=z.y,x.width=z.width,x.height=z.height,J=x.code,J=G(wa(J,u),t),d&&Math.max(x.alpha,t),C=F.parseColorMix(x.code,l),D=F.parseAlphaList(x.alpha,C.length),T=h(x.borderAlpha,t),x=D.split(w),x=ya.apply(Math,x),x=ya(r&&T||0,x),a.colorRangeElems[c]||(a.colorRangeElems[c]=e.rect(E)),a.colorRangeElems[c].attr({x:z.x,y:z.y,width:z.width,height:z.height,r:0,"stroke-width":r,stroke:J,fill:S({FCcolor:{color:C.toString(),ratio:s,alpha:D,angle:A}})}).shadow({apply:d,opacity:x/100});for(;a.colorRangeElems[c];)a.colorRangeElems[c].remove(),
a.colorRangeElems.splice(c,1);a.trendObjElems||(a.trendObjElems=[]);c=0;for(b=k.length;c<b;c+=1)l=k[c],z=f(l.startValue-p,l.endValue-p),l.isZone?(a.trendObjElems[c]||(a.trendObjElems[c]=e.rect(E)),a.trendObjElems[c].attr({x:z.x,y:z.y,width:0<z.width?z.width:0,height:0<z.height?z.height:0,r:0,fill:S({FCcolor:{color:l.color,alpha:l.alpha}})})):a.trendObjElems[c]=this.path(["M",z.x,z.y,"L",z.x,z.y+z.height],E).attr({stroke:G(l.color,l.alpha),"stroke-width":l.thickness,"stroke-dasharray":l.dashStyle});
for(;a.trendObjElems[c];)a.trendObjElems[c].remove(),a.trendObjElems.splice(c,1)},drawWidgetValue:function(a){var e=this,c=e.paper,d=e.layers.dataset,b=e.canvasWidth,f=e.canvasHeight,m=e.options.scale,g=m.max,p=m.min,n=g-p,k=a[0],l=a[1],s=m&&m.trendPoint||[],u,t,r=l.borderWidth,q=e.logic.isHorizontal,E;t=a.length;var A=0,J=0,x=0,z=0,F=p,C,D,T,w,I,v;q?(A=b/n,z=f/2):(J=f/n,x=b/2);m.reverseScale&&(A=-A,J=-J,F=g);for(;t--;)E=a[t],m=h(E.y,F)-F,E.plotX=E.origX=m*A+x,E.plotY=E.origY=m*J+z;for(t=s.length;t--;)E=
s[t],m=E.startValue-p,E.plotX=E.origX=m*A+x,E.plotY=E.origY=m*J+z;m=function(a){a=h(a,F)-F;return{x:a*A+x,y:a*J+z}}(Math.min(Math.max(p,0),g));$(k.y)&&(k.plotAsDot?(s=t=k.plotFillPercent/100*(q?f:b),a=k.plotX-t/2,g=k.plotY-s/2,q?(k.animInitAttr={x:m.x},k.animAttr={x:a}):(k.animInitAttr={y:m.y},k.animAttr={y:g})):(a=Math.min(k.plotX,m.x),g=Math.min(k.plotY,m.y),s=Math.abs(k.plotY-m.y),t=Math.abs(k.plotX-m.x),q?(k.animInitAttr={x:m.x,width:0},k.animAttr={x:a,width:t},s=k.plotFillPercent/100*f,g-=s/
2):(k.animInitAttr={y:m.y,height:0},k.animAttr={y:g,height:s},t=k.plotFillPercent/100*b,a-=t/2)),p={link:E.link,value:k.y,displayValue:k.displayValue,toolText:E.toolText},E.shapeType="rect",E.shapeArgs={x:a,y:g,height:s,width:t,endY:u,r:0},T=k.rolloverProperties||{},T.enabled&&void 0!==T.plotFillHoverPercent&&(T.showHoverAnimation?(C={},D={}):(C=T.hoverAttr,D=T.outAttr),k.plotAsDot?(C.width=C.height=T.plotFillHoverPercent/100*(q?f:b),C.x=k.plotX-C.width/2,C.y=k.plotY-C.width/2,D.width=D.height=t,
D.x=a,D.y=g):q?(C.height=T.plotFillHoverPercent/100*f,C.y=Math.min(k.plotY,m.y)-C.height/2,D.height=s,D.y=g):(C.width=T.plotFillHoverPercent/100*b,C.x=Math.min(k.plotX,m.x)-C.width/2,D.width=t,D.x=a)),E.graphic=c.rect(a,g,t,s,0,d).attr({fill:E.color,stroke:E.borderColor,ishot:!0,"stroke-width":E.borderWidth}).click(function(a){ca.call(this,e,a)}).hover(function(a){ca.call(this,e,a,"DataPlotRollOver");T.enabled&&(this.attr(T.hoverAttr),T.showHoverAnimation&&this.animate(C,100,"easeOut"))},function(a){ca.call(this,
e,a,"DataPlotRollOut");T.enabled&&(this.attr(T.outAttr),T.showHoverAnimation&&this.animate(D,100,"easeOut"))}).tooltip(E.toolText).data("eventArgs",p));$(l.y)&&(q?(t=f*l.targetFillPercent/100,s=t/2,k=a=l.plotX,p=g=l.plotY-s,u=l.plotY+s,s=t,t=r,E=a-r/2,m=[a+r,l.plotY]):(t=b*l.targetFillPercent/100,s=t/2,E=a=l.plotX-s,g=u=l.plotY,k=l.plotX+s,s=r,p=g-r/2,m=[l.plotX,g+r+10]),l.shapeType="rect",l.tooltipPos=m,l.trackerArgs={x:E,y:p,height:s,width:t,r:0},l.shapeArgs=["M",a,g,"L",k,u],l.animInitAttr={d:["M",
l.plotX,l.plotY,"L",l.plotX,l.plotY]},l.animAttr={d:l.shapeArgs},p={link:l.link,value:l.y,displayValue:l.displayValue,toolText:l.toolText},w=l.rolloverProperties||{},w.enabled&&void 0!==w.plotFillHoverPercent&&(w.showHoverAnimation?(v={},I={d:l.shapeArgs}):(v=w.hoverAttr,w.outAttr.d=l.shapeArgs),q?(t=f*l.plotFillHoverPercent/100,s=t/2,v.d=["M",a,l.plotY-s,"L",k,l.plotY+s]):(t=b*l.plotFillHoverPercent/100,s=t/2,v.d=["M",l.plotX-s,g,"L",l.plotX+s,u])),l.graphic=c.path(l.shapeArgs,d).attr({stroke:l.borderColor,
"stroke-width":r,"stroke-linecap":"round",ishot:!0,"shape-rendering":qb[1>r]}).click(function(a){ca.call(this,e,a)}).hover(function(a){ca.call(this,e,a,"DataPlotRollOver");w.enabled&&(this.attr(w.hoverAttr),w.showHoverAnimation&&this.animate(v,100,"easeOut"))},function(a){ca.call(this,e,a,"DataPlotRollOut");w.enabled&&(this.attr(w.outAttr),w.showHoverAnimation&&this.animate(I,100,"easeOut"))}).tooltip(l.toolText).data("eventArgs",p))}},v["renderer.widgetbase"]);v("renderer.hbullet",{drawWidgetLabel:function(a){var e=
this.options,c=this.layers,d=this.paper,b=c.datalabels;a=a[0];var f=this.canvasWidth,m=this.canvasHeight,g=e.chart.valuePadding,e=e.plotOptions.series.dataLabels.style,h={fontFamily:e.fontFamily,fontSize:e.fontSize,lineHeight:e.lineHeight,fontWeight:e.fontWeight,fontStyle:e.fontStyle};b||(b=c.datalabels=d.group("datalabels").insertAfter(c.dataset));c=f+g;void 0===a.y||isNaN(a.y)||a.displayValue===M||(a.dataLabel=d.text(c,m/2,a.displayValue,b).attr({"text-anchor":sa[Ja],title:a.originalText||"",fill:e.color,
"text-bound":[e.backgroundColor,e.borderColor,e.borderThickness,e.borderPadding,e.borderRadius,e.borderDash]}).css(h))}},v["renderer.bullet"]);v("renderer.hlinear",{drawWidget:function(){var a=this.options,e=this.paper,c=this.logic,d=a.chart,b=a.scale,a=this.elements,f=this.layers.dataset,m=this.canvasWidth,g=this.canvasHeight,p=b.min,n=b.max,b=b&&b.trendPoint||[],k=d.colorRangeFillMix,l=d.colorRangeFillRatio,s=d.colorRangeBorderColor,u=d.colorRangeBorderAlpha,t=d.colorRangeBorderThickness,r=c.colorRangeGetter.getColorRangeArr(p,
n),K=d.showShadow,E,A,J,x,z,F,C=this.pointOrientation={top:1,bottom:3},D=c.colorManager,T,v,I;a.linear||(a.linear=A=e.group("colorrange",f),a.outerRect=e.rect(A));a.outerRect.attr({x:0,y:0,width:m,height:g,stroke:"none",r:0});J=function(a,b){return{x:a*m/(n-p),y:0,width:(b-a)*m/(n-p),height:g}};a.colorRangeElems||(a.colorRangeElems=[]);c=0;for(E=r.length;c<E;c+=1)z=r[c],F=J(z.minvalue-p,z.maxvalue-p),z.x=F.x,z.y=F.y,z.width=F.width,z.height=F.height,x=z.code,x=G(wa(q(z.bordercolor,x),s),h(z.borderalpha,
u)),K&&Math.max(z.alpha,u),T=D.parseColorMix(z.code,k),v=D.parseAlphaList(z.alpha,T.length),z=h(z.borderAlpha,u),I=v.split(w),I=ya.apply(Math,I),I=ya(t&&z||0,I),a.colorRangeElems[c]||(a.colorRangeElems[c]=e.rect(A)),a.colorRangeElems[c].attr({x:F.x,y:F.y,width:F.width,height:F.height,r:0,"stroke-width":t,stroke:x,fill:S({FCcolor:{color:T.toString(),ratio:l,alpha:v,angle:270}})}).shadow({apply:K,opacity:I/100});for(;a.colorRangeElems[c];)a.colorRangeElems[c].remove(),a.colorRangeElems.splice(c,1);
a.trendObjElems||(a.trendObjElems=[]);c=0;for(E=b.length;c<E;c+=1)k=b[c],F=J(k.startValue-p,k.endValue-p),k.isZone?(a.trendObjElems[c]||(a.trendObjElems[c]=e.rect(A)),a.trendObjElems[c].attr({x:F.x,y:F.y,width:0<F.width?F.width:0,height:0<F.height?F.height:0,r:0,"stroke-width":0,fill:S({FCcolor:{color:k.color,alpha:k.alpha}})}).tooltip(k.tooltext)):a.trendObjElems[c]=e.path(["M",F.x,F.y,"L",F.x,F.y+F.height],A).attr({stroke:G(k.color,k.alpha),"stroke-width":k.thickness,"stroke-dasharray":k.dashStyle}).tooltip(k.tooltext),
k.useMarker&&(k.showOnTop?(s="bottom",l=0):(s="top",l=g),s=90*C[s],k.graphic=e.polypath(3,F.x,l,k.markerRadius,s,0,f).attr({fill:k.markerColor,stroke:k.markerBorderColor,"stroke-width":1}).shadow({apply:d.showShadow}).tooltip(k.tooltext));for(;a.trendObjElems[c];)a.trendObjElems[c].remove(),a.trendObjElems.splice(c,1)},drawWidgetValue:function(a,e){var c=a&&a.length||0,d=this.options.chart,b=this.pointOrientation,f={point:[],showPointerShadow:d.showPointerShadow},d=d.pointerOnOpp?"top":"bottom";for(this.dataById=
{};c--;)f.point[c]={startAngle:90*b[d]};this.drawPointerValues(null,e,f)},drawPointerValues:function(a,e,c){var d=this;a=d.layers.dataset;var b=d.options,f=d.elements,m=d.paper,g=b.scale,p=b.series&&b.series[0]&&b.series[0].data||[],n=d.canvasWidth,k=d.canvasHeight,k=b.chart.pointerOnOpp?k:0,l=b.chart.showPointerShadow,b=!1!==b.tooltip.enabled,s=(g.max-g.min)/n,u=g.min,t=g.max,r=p.length,q,E,A,J,x={pageX:0,pageY:0},z=function(a){E=d.fusionCharts.getDataJSON();this.dragStartX=a},F=function(){var a,
b=d.fusionCharts;(a=b&&b.jsVars)&&(a._rtLastUpdatedData=b.getDataJSON());ka.raiseEvent("RealTimeUpdateComplete",{data:"&value="+this.updatedValStr,updateObject:{values:[this.updatedValStr]},prevData:E.values,source:"editMode",url:null},b);try{ba.FC_ChartUpdated&&ba.FC_ChartUpdated(b.id)}catch(c){setTimeout(function(){throw c;},1)}this.graphic.tooltip(this.toolText)},C=function(a,b,c,e,f){a=yb&&(yb&&f.sourceEvent&&f.sourceEvent.touches&&f.sourceEvent.touches[0]||f)||x;b=h(this.y,g.min);e=b-(this.dragStartX-
c)*s;var k=0,m=[];e<g.min?e=g.min:e>g.max&&(e=g.max);for(;k<this.index;k+=1)m.push("");m.push(e);b!==e&&d.realtimeUpdate({values:m},{duration:0})&&(this.updatedValStr=m.join("|"),this.dragStartX=c||f.pageX||a.pageX)},D,w,v,I,y,H;I=function(a){ca.call(this,d,a)};y=function(a){var b=this.data("rolloverProperties");b.enabled&&(this.attr(b.hoverAttr),b.hoverAnimAttr&&this.animate(b.hoverAnimAttr,100,"easeIn"));ca.call(this,d,a,"DataPlotRollOver")};for(H=function(a){var b=this.data("rolloverProperties");
b.enabled&&(this.attr(b.outAttr),b.outAnimAttr&&this.animate(b.outAnimAttr,100,"easeIn"));ca.call(this,d,a,"DataPlotRollOut")};r--;)q=p[r],w=q.rolloverProperties||{},J=c&&c.point[r]&&c.point[r].startAngle||q._startAngle,J+=.2,f.pointers||(f.pointers=[]),f.pointers[r]||(void 0!==q.id&&(d.dataById[q.id]={index:r,point:q}),A=l?{opacity:Math.max(q.bgalpha,q.borderalpha)/100}:!1,D=q.editMode?void 0:q.link,v={link:D,value:q.y,displayValue:q.displayValue,toolText:q.toolText},q.graphic=f.pointers[r]=m.polypath(q.sides,
0,k||0,q.radius,J,0,a).attr({fill:q.color,stroke:q.borderColor,ishot:!0,r:q.radius,"stroke-width":q.borderWidth}).shadow(!!A,A&&A.opacity).click(I).hover(y,H).data("eventArgs",v).data("rolloverProperties",w),D&&q.graphic.css({cursor:"pointer",_cursor:"hand"}),q._startAngle=J,q.editMode&&(q.index=r,q.graphic.css({cursor:"pointer",_cursor:"hand"}).attr({ishot:!0}),q.graphic.drag(C,z,F,q,q,q))),q.graphic=f.pointers[r],b&&q.graphic.tooltip(q.toolText),e&&e.duration?q.graphic.animate({polypath:[q.sides,
n*(h(q.y,u)-u)/(t-u),k||0,q.radius,J,0]},e.duration,"easeIn"):q.graphic.attr({polypath:[q.sides,n*(h(q.y,u)-u)/(t-u),k||0,q.radius,J,0]})},drawWidgetLabel:function(a,e){var c=this.options,d=c.scale,b=this.layers,f=this.paper,m=c.chart,g=this.logic,b=b.datalabels||(b.datalabels=f.group("datalabels").insertAfter(b.dataset)),p=d.min,n=d.max,k=g.colorRangeGetter.getColorRangeArr(p,n),g=g.numberFormatter,l=m.colorRangeStyle.style||{},s,u=this.canvasWidth,t=this.canvasHeight,d=d&&d.trendPoint||[],r=m.pointerOnOpp,
K=m.valueInsideGauge;s=m.showGaugeLabels;var E=c.plotOptions.series.dataLabels.style,A,J,x,z,F,C,D,w,v;w=!1;var c=this.smartLabel,I,y,H;H=h(parseInt(E.fontHeight,10),parseInt(E.lineHeight,10),12);var G=m.valuePadding+.5*H,m=m.valuePadding,B=G,E={fontFamily:E.fontFamily,fontSize:E.fontSize,lineHeight:E.lineHeight,fontWeight:E.fontWeight,fontStyle:E.fontStyle},G=K===r?G-H/4:G+H/4;c.setStyle(E);y=c.getOriSize("W...").width;z=this.getPointerLabelXY=function(a,b,c,d){return{x:(a-p)*u/(n-p),y:c?b?t-d-G:
t+G:b?G:-(G+d),align:"middle"}};F=function(a,b){return{x:(a-p+(b-a)/2)*u/(n-p),y:t/2,width:(b-a)*u/(n-p),height:t}};if(a&&a.length)for(E=a.length;E--;)if(x=a[E],0!==x.showvalue&&x.displayValue!==M&&(I=c.getOriSize(x.displayValue),x.setWidth&&(I=c.getSmartText(x.displayValue,x.setWidth,I.height,!0)),C=this.getPointerLabelXY(x.y,K,r,I.height/2),x.isLabelString)){w=!1;for(v=1;!w;){D=a[E+v];if(!D)break;D.isLabelString?w=!0:v+=1}D&&(w=c.getOriSize(D.displayValue),A=z(D.y,K,r,w.height/2),v=A.x-w.width/
2-(C.x+I.width/2),A=A.x-C.x,0>v&&(J=I.width+v,J>A&&(x.setWidth=J=A),J>y?(C=x.setWidth&&x.setWidth<=J?c.getSmartText(x.displayValue,x.setWidth,I.height,!0):c.getSmartText(x.displayValue,J,I.height,!0),x.displayValue=C.text,C.tooltext&&(x.originalText=C.tooltext)):(C=c.getSmartText(x.displayValue,y,I.height,!0),x.displayValue=C.text,C.tooltext&&(x.originalText=C.tooltext),v=2*v+y-4),x.setWidth=null,J=w.width+v-4,D.setWidth=J>A?A:J>y?J:y));x.setWidth&&(C=c.getSmartText(x.displayValue,x.setWidth,I.height,
!0),x.displayValue=C.text,C.tooltext&&(x.originalText=C.tooltext),x.setWidth=null)}this.drawPointerLabels(null,e);l=l||{};c.setStyle(l);if(k&&s)for(E=0,r=k.length;E<r;E+=1)s=k[E],K=q(s.label,s.name),$(K)&&K!==M&&(C=F(s.minvalue,s.maxvalue),I=C.width-4>y&&C.height-4>H?c.getSmartText(K,C.width-4,C.height-4):c.getSmartText(K,C.width,C.height),f.text(b).attr({"text-anchor":Ga,title:I.tooltext||"","vertical-align":Ga,text:I.text,x:C.x,y:C.y,fill:l.color}).css(l));if(d)for(E=0,r=d.length;E<r;E+=1){k=d[E];
k.displayValue=q(k.displayValue,g.dataLabels(k.startValue));c.setStyle(k.style);H=c.getOriSize("Wg").height;I=c.getOriSize(k.displayValue);C=z(k.startValue,0,!k.showOnTop);k.setWidth&&(I=c.getSmartText(k.displayValue,k.setWidth,I.height,!0));w=!1;for(v=1;!w;){D=d[E+v];if(!D)break;D.showOnTop===k.showOnTop?w=!0:v+=1}D&&(w=c.getOriSize(D.displayValue),A=z(D.startValue,0,!D.showOnTop),v=A.x-w.width/2-(C.x+I.width/2),0>v&&(A=A.x-C.x,J=I.width+v,J>A&&(k.setWidth=J=A),J>y?(I=k.setWidth&&k.setWidth<=J?c.getSmartText(k.displayValue,
k.setWidth,I.height,!0):c.getSmartText(k.displayValue,I.width+v-4,I.height,!0),k.displayValue=I.text,I.tooltext&&(k.originalText=I.tooltext)):(I=c.getSmartText(k.displayValue,y,I.height,!0),k.displayValue=I.text,I.tooltext&&(k.originalText=I.tooltext),v=2*v+y-4),k.setWidth=null,J=w.width+v-4,D.setWidth=J>A?A:J>y?J:y));k.setWidth&&(I=c.getSmartText(k.displayValue,k.setWidth,I.height,!0),k.displayValue=I.text,I.tooltext&&(k.originalText=I.tooltext),k.setWidth=null);H=k.showOnTop?-(m+I.height/2):t+B;
l=k.isZone?F(k.startValue,k.endValue).x:C.x;k.dataLabel=f.text(0,H,k.displayValue,b).attr({"text-anchor":sa[C.align],title:k.originalText||""}).css(k.style);k.dataLabel.attr({x:l})}},drawPointerLabels:function(a,e){for(var c=this.layers.datalabels,d=this.paper,b=this.options,f=b.chart,m=f.pointerOnOpp,f=f.valueInsideGauge,g=this.smartLabel,h=b.series&&b.series[0]&&b.series[0].data||[],b=b.plotOptions.series.dataLabels.style,n=h.length,k={fontFamily:b.fontFamily,fontSize:b.fontSize,lineHeight:b.lineHeight,
fontWeight:b.fontWeight,fontStyle:b.fontStyle},l,s,u;n--;)s=h[n],l=s.displayValue,0!==s.showvalue&&l!==M&&(u=g.getOriSize(l),u=this.getPointerLabelXY(s.y,f,m,u.height/2),s.dataLabel?s.dataLabel.attr({text:l,title:s.originalText||""}):s.dataLabel=d.text(c).attr({"text-anchor":sa[u.align],title:s.originalText||"",text:l,x:0,y:u.y,fill:b.color,"text-bound":[b.backgroundColor,b.borderColor,b.borderThickness,b.borderPadding,b.borderRadius,b.borderDash]}).css(k),e&&e.duration?s.dataLabel.animate({x:u.x},
e.duration,"easeIn"):s.dataLabel.attr({x:u.x}))},realtimeUpdate:function(a,e){if(a===this.lastUpdatedObj)return!1;var c=this.options,d=c[P],b=c.series,f=this.numberFormatter,b=b&&b[0]&&b[0].data,m=a.values||[],g=a.labels||[],h=a.toolTexts||[],n=a.showLabels||[],k=b&&b.length||0,l,s,u=null,t=[],r;e=e||c.plotOptions.series.animation;if(k){for(;k--;)c={},r={},l=b[k],void 0!==m[k]&&""!==m[k]?(c.value=r.value=m[k],u=r.displayvalue=r.tooltext=f.dataLabels(r.value),r.hasNewData=!0):r.value=l.y,g[k]&&(r.displayvalue=
g[k],r.hasNewData=!0),"0"==n[k]&&(r.displayvalue=M,r.hasNewData=!0),s=B(U(q(l._tooltext,d.tooltext))),h[k]&&(s=B(U(h[k])),r.hasNewData=!0),r.hasNewData&&(t[k]=r,V(l,{y:r.value,displayValue:l.displayValue||"1"==n[k]?r.displayvalue:M,toolText:void 0!==s?$a(s,[1,2],{formattedValue:u},c):u}));t.length&&(this.lastUpdatedObj=a,this.drawPointerValues(b,e),this.drawPointerLabels(b,e));return Boolean(t.length)}}},v["renderer.widgetbase"]);v("renderer.angular",{drawWidget:function(){var a=this.options,e=a.chart,
c=a.scale,d=a.series[0],a=this.paper,b=this.elements,f=this.layers.dataset,m=d.gaugeOuterRadius,g=d.gaugeInnerRadius,p=d.gaugeFillRatio,n=e.gaugeBorderColor,k=e.gaugeBorderThickness,l=e.gaugeBorderAlpha,s=d.gaugeFillMix,u=d.gaugeOriginX,t=d.gaugeOriginY,r=e.gaugeStartAngle,K=e.gaugeEndAngle,E=e.showShadow,e=c.min,A=c.max,J=this.logic,x=J.colorRangeGetter.getColorRangeArr(e,A),z=0,F=x.length,C=A-e,K=K-r,D,v,y=r,I=Math.cos(r),B=Math.sin(r),H=u+m*I;v=t+m*B;var I=u+g*I,B=t+g*B,N,c=c.trendPoint,P;b.trendPointGroup||
(b.trendPointGroup=a.group("trendpoint",f));for(;z<F;z+=1)D=x[z],v=r+(Math.min(D.maxvalue,A)-e)/C*K,I=J.parseColorMix(D.code,s),B=J.parseAlphaList(D.alpha,I.length),H=J.parseRatioList(g/m*100+p,I.length),P=D.bordercolor,N=h(D.borderAlpha,l),P=P&&-1==P.indexOf("{")?G(P,N):J.parseColorMix(D.code,q(P,n))[0],P=G(P,N),D=B.split(w),D=ya.apply(Math,D),D=E?ya(k&&N||0,D):0,N=v,y>v&&(y+=v,v=y-v,y-=v),a.ringpath(u,t,m,g,y,v,f).attr({fill:S({FCcolor:{cx:u,cy:t,r:m,gradientUnits:"userSpaceOnUse",color:I.join(),
alpha:B,ratio:H,radialGradient:!0}}),"stroke-width":k,stroke:P}).shadow({apply:E,opacity:D/100}),y=N;b.tickMarkGroup||(b.tickMarkGroup=a.group("tickmark",f));b.trendMarkerGroup||(b.trendMarkerGroup=a.group("trendmarker",f));b.pointGroup||(b.pointGroup=a.group("pointers",f).translate(u,t));b.pivot||(b.pivot=a.circle(f));b.pivot.attr({cx:u,cy:t,r:d.pivotRadius,fill:S({FCcolor:d.isRadialGradient?{color:d.pivotFillColor,alpha:d.pivotFillAlpha,ratio:d.pivotFillRatio,radialGradient:!0,angle:d.pivotFillAngle,
cx:.5,cy:.5,r:"50%"}:{color:d.pivotFillColor,alpha:d.pivotFillAlpha,ratio:d.pivotFillRatio,radialGradient:!1,angle:d.pivotFillAngle}}),"stroke-width":d.pivotBorderThickness,stroke:d.pivotBorderColor}).shadow({apply:E});f=Math.cos(89.99*cb);p=-f;z=0;for(F=c.length;z<F;z+=1)d=c[z],E=d.isZone,s=r+(d.startValue-e)/C*K,n=h(d.radius,m),k=h(d.innerRadius,E?Math.max(g-15,0):g),l=h(d.trendValueDistance,0),I=Math.cos(s),B=Math.sin(s),H=u+n*I,v=t+n*B,I=u+k*I,B=t+k*B,E?(B=r+(d.endValue-e)/C*K,s>B&&(s+=B,B=s-
B,s-=B),d.graphic=a.ringpath(u,t,n,k,s,B,b.trendPointGroup).attr({fill:G(d.color,d.alpha),"stroke-width":d.showBorder?d.thickness:0,stroke:d.borderColor,"stroke-dasharray":d.dashStyle})):d.graphic=a.path(["M",H,v,"L",I,B],b.tickMarkGroup).attr({"stroke-width":d.showBorder?d.thickness:0,stroke:d.borderColor,"stroke-linecap":"round","stroke-dasharray":d.dashStyle}),d.useMarker&&(d.markerElement=a.polypath("3",H,v,d.markerRadius,(-s+Math.PI)/cb,0,b.trendMarkerGroup).attr({fill:d.markerColor,"stroke-width":1,
stroke:d.markerBorderColor}),""!==d.markerToolText&&d.markerElement.tooltip(d.markerToolText)),d.displayValue!==M&&(v=(d.endValue+d.startValue)/2,B=r+(v-e)/C*K,I=Math.cos(B),B=Math.sin(B),d.valueInside?(v=k-2-l,n=I>f?ab:I<p?Ja:Ma):(v=n+2+l,n=I>f?Ja:I<p?ab:Ma),H=u+v*I,v=t+v*B,k=d.style,d.textElement=a.text(b.trendMarkerGroup).attr({x:H,y:v,text:d.displayValue,title:d.originalText||"","text-anchor":sa[d.align||n],"vertical-align":Fa}).css(k),H=d.textElement.getBBox(),H=H.height,v=I>f||I<p?v+(-(H/2)+
.4*H*B*(d.valueInside?-1:1)):d.valueInside?v+-(0>B?0:H):v+-(0<B?0:H),d.textElement.attr({y:v}))},drawWidgetValue:function(a,e){var c=this,d=c.options,b=d.chart,f=d.scale,m=d.series[0],g=c.paper,p=c.elements,n=Number(m.gaugeOriginX),k=Number(m.gaugeOriginY),l=b.gaugeStartAngle,s=b.gaugeEndAngle,b=b.showShadow,d=!1!==d.tooltip.enabled,u=f.min,q=f.max,r=p.pointGroup,v=q-u,E=s-l,A=v/E,J=0,x,z,F,C,D,w,y,I=a&&a.length,B,H=Xb(l,s),G=Vb(c.container),M=function(a,b){var d;d=[n,k];d=Hb(d[1]-b+G.top,d[0]-a+
G.left);c.rotationStartAngle=d;B=c.fusionCharts.getDataJSON()},P=function(){var a=c.fusionCharts,b;(b=a&&a.jsVars)&&(b._rtLastUpdatedData=a.getDataJSON());ka.raiseEvent("RealTimeUpdateComplete",{data:"&value="+this.updatedValStr,updateObject:{values:[this.updatedValStr]},prevData:B.values,source:"editMode",url:null},a);try{ba.FC_ChartUpdated&&ba.FC_ChartUpdated(a.id)}catch(d){setTimeout(function(){throw d;},1)}},L=function(a,b,d,e){a=[n,k];d=Hb(a[1]-e+G.top,a[0]-d+G.left);e=c.rotationStartAngle;var g;
e=0>d&&0<e?wb(d)-c.rotationStartAngle:0<d&&0>e?wb(c.rotationStartAngle)-d:c.rotationStartAngle-d;e=this.y-e*A;a=[];b=0;g=this.index;e<f.min?e=f.min:e>f.max&&(e=f.max);for(;b<g;b+=1)a.push("");a.push(e);e!==this.value&&c.realtimeUpdate({values:a},{duration:0})&&(this.updatedValStr=a.join("|"),c.rotationStartAngle=d)},S,Q,R,O,V,Z,X,W,U,aa;void 0===c.dataById&&(c.dataById={});p.pointers||(p.pointers=[]);W=function(a){ca.call(this,c,a)};U=function(a){var b=this.data("rolloverProperties");ca.call(this,
c,a,"DataPlotRollOver");b.enabled&&(a=this.attr("transform"),this.attr("transform",""),this.attr(b.hoverAttr),this.attr("transform",a))};for(aa=function(a){var b=this.data("rolloverProperties");ca.call(this,c,a,"DataPlotRollOut");b.enabled&&(a=this.attr("transform"),this.attr("transform",""),this.attr(b.outAttr),this.attr("transform",a))};J<I;J+=1)s=a[J],Q=s.rolloverProperties||{},$(s.y)||(s.y=u,$(s.toolText)||(s.toolText=u)," "===s.displayValue&&(s.displayValue=u)),void 0!==s.id&&(c.dataById[s.id]=
{index:J,point:s}),s.index=J,x=h(s.radius,(Number(m.gaugeOuterRadius)+Number(m.gaugeInnerRadius))/2),z=s.baseWidth,w=z/2,F=s.topWidth,y=F/2,D=s.rearExtension,C=s.baseRadius,s.tooltipPos=[n,k],p.pointers[J]?C=p.pointers[J]:(S=s.editMode?void 0:s.link,R=["M",x,-y,"L",x,y,-D,w,-D,-w,"Z"],Q.hasHoverSizeChange&&(Q.outAttr.path=R,O=h(Q.hoverRadius,x),V=Q.baseHoverWidth,V/=2,Z=Q.topHoverWidth,Z/=2,X=Q.rearHoverExtension,Q.hoverAttr.path=["M",O,-Z,"L",O,Z,-X,V,-X,-V,"Z"]),S={link:S,value:s.y,displayValue:s.displayValue,
toolText:s.toolText},p.pointers[J]=F?g.path(R,r):g.trianglepath(x,y,-D,w,-D,-w,0,C,C,r),s.graphic=C=p.pointers[J],s.graphic.attr({fill:s.color,stroke:s.borderColor,ishot:!0,"stroke-width":s.borderThickness}).click(W).hover(U,aa).data("eventArgs",S).data("rolloverProperties",Q),(z||F||s.borderThickness)&&s.graphic.shadow({apply:b}),C._attr=C.attr,C.attr=H,C._Attr={tooltipPos:s.tooltipPos,cx:n,cy:k,toolTipRadius:x-D,color:s.color},x=l/cb,C.attr({angle:x}),s.editMode&&(s.index=J,s.graphic.css({cursor:"pointer",
_cursor:"hand"}).attr({ishot:!0}),s.graphic.drag(L,M,P,s,s,s))),s.y>=u&&s.y<=q&&(x=(s.y-u)/v*E,x=(l+x)/cb,C.attr({angle:x},null,e),d&&C.tooltip(s.toolText))},drawWidgetLabel:function(a){var e=this.paper,c=this.layers,d=c.datalabels,b=this.options,f=b.series[0],m=b.plotOptions.series.dataLabels.style,b=f.pivotRadius,g=h(parseInt(m.lineHeight,10),12),p=f.valueBelowPivot,n=f.gaugeOriginX,k={fontFamily:m.fontFamily,fontSize:m.fontSize,lineHeight:m.lineHeight,fontWeight:m.fontWeight,fontStyle:m.fontStyle},
l,s,u,q=f.gaugeOriginY+(p?g/2+b+2:-(g/2)-b-2);d||(d=c.datalabels=e.group("datalabels").insertAfter(c.dataset));Db(a,function(a,b){l=a.displayValue;u=a.valueY;s=h(a.valueX,n);$(u)||(u=p?q+g*b:q-g*b);$(l)&&l!==M&&(a.dataLabel?a.dataLabel.attr({text:l,title:a.originalText||""}):a.dataLabel=e.text(d).attr({x:s,y:u,text:l,"text-anchor":sa[Ma],title:a.originalText||"",fill:m.color,"text-bound":[m.backgroundColor,m.borderColor,m.borderThickness,m.borderPadding,m.borderRadius,m.borderDash]}).css(k))})},drawScale:function(){var a=
this.options,e=a.chart,c=a.scale,d=this.paper,b=this.elements,f=a.series[0],a=Number(f.gaugeOriginX),m=Number(f.gaugeOriginY),g=e.gaugeStartAngle,p=c.min,n=Number(f.gaugeInnerRadius),k=Number(f.gaugeOuterRadius),f=c.max-p,e=e.gaugeEndAngle-g,l=0,s=c.majorTM,u=c.minorTM,q=b.tickMarkGroup,r,v,E,A,J,x,z=Math.cos,F=Math.sin,C=Number(c.minorTMHeight),D=Number(c.majorTMHeight),w=c.placeTicksInside,l=c.placeValuesInside;J=c.tickValueDistance;var y,I,B=c.limitValues.style,H=c.tickValues.style,N=.75*h(parseInt(B.lineHeight,
10),12),M=.75*h(parseInt(H.lineHeight,10),12);w?(w=n,C=w+C,D=w+D):(w=k,C=w-C,D=w-D);y=l?n-J:k+J;b.majorTM||(b.majorTM=[]);b.tmLabel||(b.tmLabel=[]);l=0;for(n=s.length;l<n;l+=1)k=s[l],r=k.value,J=k.displayValue,x=(r-p)*e/f+g,I=z(x),x=F(x),r=a+w*I,v=m+w*x,E=a+D*I,A=m+D*x,b.majorTM[l]=d.path(["M",r,v,"L",E,A],q).attr({stroke:G(c.majorTMColor,c.majorTMAlpha),"stroke-width":c.majorTMThickness,"stroke-linecap":"round"}),""!==J&&(0===l||l===n-1?(E=B,v=m+y*x+(k.y||0)-N):(E=H,v=m+y*x+(k.y||0)-M),r=a+y*I+(k.x||
0),b.tmLabel[l]=d.text(r,v,J,q).attr({"text-anchor":sa[k.align||Ma],title:k.originalText||"","vertical-align":Fa}).css(E));b.minorTM||(b.minorTM=[]);l=0;for(n=u.length;l<n;l+=1)r=u[l],x=(r-p)*e/f+g,r=a+w*z(x),v=m+w*F(x),E=a+C*z(x),A=m+C*F(x),b.minorTM[l]=d.path(["M",r,v,"L",E,A],q).attr({stroke:G(c.minorTMColor,c.minorTMAlpha),"stroke-width":c.minorTMThickness,"stroke-linecap":"round"})},realtimeUpdate:function(a,e){if(a===this.lastUpdatedObj)return!1;var c=this.options,d=c[P],b=c.series,f=this.numberFormatter,
b=b&&b[0]&&b[0].data,m=a.values||[],g=a.labels||[],h=a.toolTexts||[],n=a.showLabels||[],k=b&&b.length||0,l,s,u=null,t=[],r,v;e=e||c.plotOptions.series.animation;if(k){for(;k--;)r={},c={},v=!1,l=b[k],s=l.id&&(l.id.toLowerCase&&l.id.toLowerCase()||l.id),void 0!==m[k]&&""!==m[k]&&(v=!0)||s&&a[s]?(c.value=r.value=v?m[k]:a[s],u=r.displayvalue=r.tooltext=f.dataLabels(r.value),r.hasNewData=!0):r.value=l.y,g[k]&&(r.displayvalue=g[k],r.hasNewData=!0),"0"==n[k]&&(r.displayvalue=M,r.hasNewData=!0),s=B(U(q(l._tooltext,
d.tooltext))),h[k]&&(s=B(U(h[k])),r.hasNewData=!0),r.hasNewData&&(t[k]=r,V(l,{y:r.value,displayValue:l.displayValue||"1"===n[k]?r.displayvalue:M,toolText:void 0!==s?$a(s,[1,2],{formattedValue:u},c):u}));t.length&&(this.lastUpdatedObj=a,this.drawWidgetValue(b,e),this.drawWidgetLabel(b,e));return Boolean(t.length)}}},v["renderer.widgetbase"]);v("renderer.funnel",{type:"funnel",pyramidFunnelShape:function(){var a={y:!0,R1:!0,R2:!0,h:!0,r3dFactor:!0,color:!0,opacity:!0,fill:!0,stroke:!0,strokeColor:!0,
strokeAlpha:!0,"stroke-width":!0},e=function(a,c,d,e,h,n,k,l,s,q){lb(a)&&(c=a.y,d=a.R1,e=a.R2,h=a.h,n=a.r3dFactor,k=a.is2D,q=a.isHollow,s=a.isFunnel,a=a.x);l=a-d;var t=a+d,r=a-e,v=a+e,E=c+h,A,w;if(k)A={silhuette:["M",l,c,"L",t,c,v,E,r,E,"Z"]},s||(A.lighterHalf=["M",l,c,"L",a,c,a,E,r,E,"Z"],A.darkerHalf=["M",a,c,"L",t,c,v,E,a,E,"Z"]);else if(s){r=a;v=c;c=d||.01;t=e||.01;a=q;l=c*n;n*=t;h=v+h;E=ma(t,2)-ma(c,2);d=-2*(ma(t,2)*v-ma(c,2)*h);e=ma(c*n,2)+ma(t*v,2)-ma(t*l,2)-ma(c*h,2);q=kb(ma(d,2)-4*E*e);e=
(-d+q)/(2*E);E=(-d-q)/(2*E);e<h&&e>v?w=E:E<h&&E>v&&(w=e);e=kb((ma(w-v,2)-ma(l,2))/ma(c,2));d=-e;E={x:la(ma(c,2)*e/(w-v)*100)/100,y:la(100*(ma(l,2)/(w-v)+v))/100};e={x:la(ma(t,2)*e/(w-h)*100)/100,y:la(100*(ma(n,2)/(w-h)+h))/100};q={x:la(ma(c,2)*d/(w-v)*100)/100,y:la(100*(ma(l,2)/(w-v)+v))/100};w={x:la(ma(t,2)*d/(w-h)*100)/100,y:la(100*(ma(n,2)/(w-h)+h))/100};E={topLeft:q,bottomLeft:w,topRight:E,bottomRight:e};for(A in E)if(isNaN(E[A].x)||isNaN(E[A].y))E[A].x="topLeft"===A||"bottomLeft"===A?-c:c,E[A].y=
"bottomRight"===A||"bottomLeft"===A?h:v;h=E.topLeft;d=E.bottomLeft;A=r+h.x;w=r+E.topRight.x;v=r+d.x;r+=E.bottomRight.x;h=h.y;d=d.y;E=["A",c,l,0,0,0,w,h];e=["A",c,l,0,1,1,w,h];q=["A",t,n,0,0,1,v,d];t=["A",t,n,0,1,0,v,d];t={front:["M",A,h].concat(E,["L",r,d],q,["Z"]),back:["M",A,h].concat(e,["L",r,d],t,["Z"]),silhuette:["M",A,h].concat(e,["L",r,d],q,["Z"])};a||(t.top=["M",A,h].concat(E,["L",w,h],["A",c,l,0,1,0,A,h],["Z"]));A=t}else A=d*n,w=e*n,h=La(5,d),d=La(2,2*A),e=La(2,d),n=e/n,A={top:["M",l,c,"L",
a,c+A,t,c,a,c-A,"Z"],front:["M",l,c,"L",a,c+A,t,c,v,E,a,E+w,r,E,"Z"],topLight:["M",l,c+.5,"L",a,c+A+.5,a,c+A-d,l+n,c,"Z"],topLight1:["M",t,c+.5,"L",a,c+A+.5,a,c+A-e,t-n,c,"Z"],silhuette:["M",l,c,"L",a,c-A,t,c,v,E,a,E+w,r,E,"Z"],centerLight:["M",a,c+A,"L",a,E+w,a-5,E+w,a-h,c+A,"Z"],centerLight1:["M",a,c+A,"L",a,E+w,a+5,E+w,a+h,c+A,"Z"]};return A},c=function(b,c){var d,g,p=this,n,k,l=!1,s=!1,q=this._3dAttr,t;Ra(b)&&$(c)&&(d=b,b={},b[d]=c);if(Ra(b))p=a[b]?this._3dAttr[b]:this._attr(b);else{for(d in b)g=
b[d],a[d]?(q[d]=g,"fill"===d?(g&&g.linearGradient&&g.stops&&g.stops[0]&&(g=g.stops[0][1]),sb.test(g)?(k=new nb(g),n=k.get("hex"),k=100*k.get("a")):g&&g.FCcolor?(n=g.FCcolor.color.split(w)[0],k=g.FCcolor.opacity.split(w)[0]):pb.test(g)&&(n=g.replace(db,eb),k=h(q.opacity,100)),q.color=n,q.opacity=k,s=!0):"color"===d||"opacity"===d?(q.fill=S(G(q.color,h(q.opacity,100))),s=!0):"stroke"===d||"strokeColor"===d||"strokeAlpha"===d?q.is2D&&("stroke"===d?(g&&g.linearGradient&&g.stops&&g.stops[0]&&(g=g.stops[0][1]),
sb.test(g)?(k=new nb(g),n=k.get("hex"),k=100*k.get("a")):g&&g.FCcolor?(n=g.FCcolor.color.split(w)[0],k=g.FCcolor.opacity.split(w)[0]):pb.test(g)&&(n=g.replace(db,eb),k=h(q.opacity,100)),q.strokeColor=n,q.strokeAlpha=k):q.stroke=G(q.strokeColor,h(q.strokeAlpha,100)),q.isFunnel?this.funnel2D.attr("stroke",q.stroke):this.borderElement.attr("stroke",q.stroke)):"stroke-width"===d?q.is2D&&(q.isFunnel?this.funnel2D.attr(d,g):this.borderElement.attr(d,g)):l=!0):this._attr(d,g);q.is2D?(l&&(n=e(q.x,q.y,q.R1,
q.R2,q.h,q.r3dFactor,q.is2D),p.shadowElement.attr({path:n.silhuette}),q.isFunnel?p.funnel2D.attr({path:n.silhuette}):(p.lighterHalf.attr({path:n.lighterHalf}),p.darkerHalf.attr({path:n.darkerHalf}),p.borderElement.attr({path:n.silhuette}))),s&&(q.isFunnel?p.funnel2D.attr("fill",S(G(q.color,h(q.opacity,100)))):(n=ea(q.color,80),k=W(q.color,80),p.lighterHalf.attr("fill",S(G(k,h(q.opacity,100)))),p.darkerHalf.attr("fill",S(G(n,h(q.opacity,100))))))):(l&&(n=e(q.x,q.y,q.R1,q.R2,q.h,q.r3dFactor,q.is2D),
p.shadowElement.attr("path",n.silhuette),q.isFunnel?(p.front.attr("path",n.front),p.back.attr("path",n.back),p.toptop&&n.top&&p.toptop.attr("path",n.top)):(p.front.attr("path",n.front),p.toptop.attr("path",n.top),p.topLight.attr("path",n.topLight),p.topLight1.attr("path",n.topLight1),p.centerLight.attr("path",n.centerLight),p.centerLight1.attr("path",n.centerLight1))),s&&(n=q.color,k=q.opacity,q.isFunnel?(s=W(n,60),l=ea(n,60),p.back.attr("fill",S({FCcolor:{color:l+w+s+w+n,alpha:k+w+k+w+k,ratio:"0,60,40",
angle:0}})),p.front.attr("fill",S({FCcolor:{color:n+w+s+w+l,alpha:k+w+k+w+k,ratio:"0,40,60",angle:0}})),p.toptop&&p.toptop.attr("fill",S({FCcolor:{color:s+w+l,alpha:k+w+k,ratio:"0,100",angle:-65}}))):(s=W(n,80),d=W(n,70),l=ea(n,80),g="0,"+k,t=n+w+d,q=5/(q.R1*q.r3dFactor)*100,p.centerLight.attr("fill",S({FCcolor:{color:t,alpha:g,ratio:"0,100",angle:0}})),p.centerLight1.attr("fill",S({FCcolor:{color:t,alpha:g,ratio:"0,100",angle:180}})),p.topLight.attr("fill",S({FCcolor:{color:d+w+d+w+n+w+n,alpha:k+
w+k+w+0+w+0,ratio:"0,50,"+q+w+(50-q),angle:-45}})),p.topLight1.attr("fill",S({FCcolor:{color:d+w+n+w+l,alpha:k+w+k+w+k,ratio:"0,50,50",angle:0}})),p.front.attr("fill",S({FCcolor:{color:n+w+n+w+l+w+l,alpha:k+w+k+w+k+w+k,ratio:"0,50,0,50",angle:0}})),p.toptop.attr("fill",S({FCcolor:{color:s+w+n+w+l+w+l,alpha:k+w+k+w+k+w+k,ratio:"0,25,30,45",angle:-45}})))))}return p},d=function(){var a=this.shadowElement;d&&a.shadow.apply(a,arguments)};return function(a,f,m,g,p,n,k,l,q,u,t){var r=this.layers.dataset;
lb(a)&&(f=a.y,m=a.R1,g=a.R2,p=a.h,n=a.r3dFactor,k=a.gStr,l=a.is2D,q=a.renderer,t=a.isHollow,u=a.isFunnel,a=a.x);n=h(n,.15);a={x:a,y:f,R1:m,R2:g,h:p,r3dFactor:n,is2D:l,isHollow:t,isFunnel:u,renderer:q};f=e(a);k=q.group(k,r);k.Shapeargs=f;k.shadowElement=q.path(f.silhuette,k).attr({fill:fa,stroke:"none"});k._attr=k.attr;k.attr=c;k.shadow=d;k._3dAttr=a;u?l?k.funnel2D=q.path(f.silhuette,k):(k.back=q.path(f.back,k).attr({"stroke-width":0,stroke:"none"}),k.front=q.path(f.front,k).attr({"stroke-width":0,
stroke:"none"}),f.top&&(k.toptop=q.path(f.top,k).attr({"stroke-width":0,stroke:"none"}))):l?(k.lighterHalf=q.path(f.lighterHalf,k).attr({"stroke-width":0}),k.darkerHalf=q.path(f.darkerHalf,k).attr({"stroke-width":0}),k.borderElement=q.path(f.silhuette,k).attr({fill:fa,stroke:"none"})):(k.front=q.path(f.front,k).attr({"stroke-width":0}),k.centerLight=q.path(f.centerLight,k).attr({"stroke-width":0}),k.centerLight1=q.path(f.centerLight1,k).attr({"stroke-width":0}),k.toptop=q.path(f.top,k).attr({"stroke-width":0}),
k.topLight=q.path(f.topLight,k).attr({"stroke-width":0}),k.topLight1=q.path(f.topLight1,k).attr({"stroke-width":0}));return k}}(),getPlotData:function(a){var e=this.datasets[0],c=e.data[a],d=e.userData||(e.userData=[]),e="y name color alpha borderColor borderWidth link displayValue toolText".split(" "),b;if(d[a])a=d[a];else{a=d[a]={};for(d=0;d<e.length;d++)a[b=e[d]]=c[b];a.value=a.y;a.label=a.name;delete a.y;delete a.name}return a},translate:function(){var a=this.datasets[0],e=a.data,c=this.canvasWidth/
2,d=this.canvasHeight,b=e.length-1,f=e[0],m=f&&e[b].y,g=f&&e[0].y,p,n,k,l,q=this.canvasTop,u=a.yScale,t=a.isHollow,r=a.is2d,v=0,E=this.paper,w={},J=a.streamlinedData,x=a.labelDistance,z=.8/d,F,C=0,D=c+this.canvasLeft,y=a.showLabelsAtCenter,B=.3*h(parseInt(this.options.plotOptions.series.dataLabels.style.fontSize,10),10);p=J?d/(g-m):g?d/g:d;n=c;Db(e,function(d,f){(d.x=f)?(d.isSliced&&(F=d.x,1<F&&!w[F]&&(w[F]=!0,C+=1),F<b&&(w[F+1]=!0,C+=1)),J?(k=1==a.useSameSlantAngle?g?c*d.y/g:c:g?c*kb(d.y/g):c,l=
p*(e[f-1].y-d.y)||1):(v+=l=p*e[f].y,k=c*(1-v*z)),d.shapeArgs={x:D,y:q,R1:n,R2:k,h:l||1,r3dFactor:u,isHollow:t,gStr:"point",is2D:r,renderer:E,isFunnel:!0},y?(d.labelAline="middle",d.labelX=D,d.labelY=(r?q:q+u*n)+l/2+B):(d.labelAline="start",d.labelX=D+x+k+3,d.labelY=q+B+l),q+=l,n=k):(k=1==a.useSameSlantAngle?g?c*e[0].y/g:c:g?c*kb(e[0].y/g):c,d.labelWidht>2*k?(d.labelAline="start",d.labelX=0):(d.labelAline="middle",d.labelX=D),d.labelY=(r?q:q-u*n)-B-3);d.plotX=D;d.plotY=q});a._temp={slicingGapPosition:w,
noOfGap:C}},drawPlotFunnel:function(a,e){this.translate();var c=this,d=a.items,b=a.data,f=c.options,h=f.plotOptions,g=c.elements.plots[0],p=h.series.dataLabels,n=c.paper,k=f.tooltip||{},k=k&&!1!==k.enabled,l,h=h.series.animation.duration||0,q=c.layers,u=q.tracker,q=q.datalabels||(q.datalabels=n.group("datalabels").insertAfter(q.dataset)),t=g.showLabelsAtCenter,r=e._temp||{},v=r.slicingGapPosition,r=r.noOfGap,E=e.SlicingDistance,w,J=E/2,x=0,f=f.chart.issliced,z=p.style,z={fontFamily:z.fontFamily,fontSize:z.fontSize,
lineHeight:z.lineHeight,fontWeight:z.fontWeight,fontStyle:z.fontStyle},F=function(a,b){return function(d){a.graphic.attr(b);ca.call(this,c,d,"DataPlotRollOver")}},C=function(a,b){return function(d){a.graphic.attr(b);ca.call(this,c,d,"DataPlotRollOut")}},D,y,B,I,G,H,N,M;if(!(B=c.datasets[0].streamlinedData&&2>b.length)){r&&(w=La(1.5*J,E/r),x=J);E=function(a){return function(){c.legendClick(a,!0,!1)}};J=function(a){return function(){return c.getEventArgs(a)}};M=function(a){return function(){a.attr({visibility:"visible"})}};
b&&b.length||(b=[]);g.singletonCase=B&&2==b.length||1==b.length;e.data||(e.data=[]);for(N=b.length;N--;)I=b[N],D=I.y,y=I.displayValue,l=I.toolText,H=!!I.link,G=f?0:I.isSliced,null!==D&&void 0!==D&&I.shapeArgs?((B=d[N])||(e.data[N].plot=B=d[N]={value:D,displayValue:y,sliced:!!G,chart:c,plotItems:d,seriesData:g,cursor:H?"pointer":"",x:I.x,index:N,graphic:c.pyramidFunnelShape(I.shapeArgs).attr({fill:I.color,opacity:0,"stroke-width":I.borderWidth,stroke:I.borderColor}),dataLabel:n.text(q).attr({text:y,
title:I.originalText||"",ishot:!0,cursor:H?"pointer":"",x:0,y:0}).css(z),trackerObj:n.path(u)},e.data[N].legendClick=E(B),e.data[N].getEventArgs=J(B),D=y={},I.hoverEffects&&(D={color:I.color,opacity:I.alpha,"stroke-width":I.borderWidth,stroke:I.borderColor},y=I.rolloverProperties,y={color:y.color,opacity:y.alpha,"stroke-width":y.borderWidth,stroke:y.borderColor}),!I.doNotSlice&&B.trackerObj.click(c.slice,B),B.trackerObj.mouseup(c.plotMouseUp,B),B.trackerObj.hover(F(B,y),C(B,D)),B.dataLabel.hover(F(B,
y),C(B,D)),k&&B.trackerObj.tooltip(l),!I.doNotSlice&&B.dataLabel.click(c.slice,B),B.dataLabel.mouseup(c.plotMouseUp,B),t&&0===N&&"funnel"==c.type&&g.streamlinedData||(B.connector=n.path(q).attr({"stroke-width":p.connectorWidth,stroke:p.connectorColor,ishot:!0,cursor:H?"pointer":""}).click(c.slice,B).mouseup(c.plotMouseUp,B).hover(F(B,y),C(B,D))),B.dy=0,r&&(x&&(B._startTranslateY=l="t0,"+x,B.dy=B.DistanceAvailed=x,B.graphic.attr({transform:l}),B.dataLabel.attr({transform:l}),B.connector.attr({transform:l})),
v[I.x]&&(x-=w))),h?(q.attr({visibility:"hidden"}),B.graphic.animate({opacity:I.alpha},h,"easeIn",N===b.length-1&&M(q))):B.graphic.attr({opacity:I.alpha})):e.data[N].plot=d[N]={dataLabel:n.text(q).attr({text:y,title:I.originalText||"",x:0,y:0}).css(z)};c.drawDataLabels();c.drawTracker(a,e)}},slice:function(a,e,c,d){var b=this.chart;a=b.datasets[0].SlicingDistance/2;c=e=0;var f=this.plotItems,h=f.length,g,p,n,k,l,q,u,t;q={hcJSON:{chart:{issliced:!1},series:[]}};q.hcJSON.series[0]={data:n=[]};d=this.sliced=
$(d)?d:!this.sliced;u=-a;t=function(a,c){return function(){ka.raiseEvent("SlicingEnd",{slicedState:a,data:b.getPlotData(c)},b.logic.chartInstance)}};for(e=0;e<h;e+=1)p=f[e],p!==this?(p.sliced=!1,n[e]={isSliced:!1},k=!1):(n[e]={isSliced:d},k=!0,l=e),p.graphic&&(g=p.dy,g=-g,d&&(p.x<this.x?(g+=u,c+=1):p.x==this.x?c?e==h-1&&(g+=.5*a):g+=.5*-a:g+=a),p.graphic.attr({transform:"t0,"+p.dy}),p.dy+=g,g={transform:"...t0,"+g},k&&ka.raiseEvent("SlicingStart",{slicedState:!d,data:b.getPlotData(l)},b.logic.chartInstance),
p.graphic.animate(g,300,"easeIn",k&&t(d,l)),p.dataLabel&&p.dataLabel.animate(g,300,"easeIn"),p.connector&&p.connector.animate(g,300,"easeIn"),p.trackerObj&&p.trackerObj.animate(g,300,"easeIn"),1==e&&!f[0].graphic&&f[0].dataLabel&&f[0].dataLabel.animate(g,300,"easeIn"));V(b.logic.chartInstance.jsVars._reflowData,q,!0)},drawDataLabels:function(){var a=this.datasets[0],e=a.data,c=this.options.plotOptions.series.dataLabels,d=this.elements.plots[0].items,b,f,m,g,p=a.showLabelsAtCenter,n=Number(c.style.lineHeight.split(/px/)[0]),
k=h(parseInt(c.style.fontSize,10),10),l=.3*k,q=.3*n,u,t,r,v,w,A=a.labelDistance,y,x;for(w=e.length-1;0<=w;w-=1)g=e[w],x=g.displayValue,c=d[w],f=g.labelY,b=g.labelX,m=g.labelAline,y=g.style,k=h(parseInt(y.fontSize,10),10),l=.3*k,k={fontFamily:y.fontFamily,fontSize:y.fontSize,lineHeight:y.lineHeight,fontWeight:y.fontWeight,fontStyle:y.fontStyle},p?f=0===w&&"funnel"==this.type&&a.streamlinedData?f-q+(d[1].DistanceAvailed||0):f-q+(c.DistanceAvailed||0):(v=r=f-l,void 0!==u&&void 0!==t&&t-r<n&&(v=t-n,f=
v+l),u=g.plotY,t=v,"undefined"===typeof x||x===M||0===w&&"funnel"==this.type&&a.streamlinedData||(g=b-3,l=g-A,g=["M",l,r,"L",g,v],c.connector.attr({path:g,"shape-rendering":r===v&&1>v?"crisp":""})),f=0===w&&"funnel"==this.type&&a.streamlinedData?f+(d[1].DistanceAvailed||0):v+(c.DistanceAvailed||0)),x!==M&&c.dataLabel.attr({transform:"t"+b+","+f,"text-anchor":sa[m],text:x,fill:y.color,"font-size":y.fontSize,"text-bound":[y.backgroundColor,y.borderColor,y.borderThickness,y.borderPadding,y.borderRadius,
y.borderDash]}).css(k)},drawTracker:function(a){var e=this.paper,c=a.items;a=a.data;for(var d,b,f=+new Date,h=a.length-1,g,p=this.layers.tracker,n;0<=h;h-=1)g=c[h],n=a[h],b=g.trackerObj,g.graphic&&(d=g.graphic.Shapeargs.silhuette,n={link:n.link,value:n.y,displayValue:n.displayValue,categoryLabel:n.categoryLabel,toolText:n.toolText},b?b.attr({path:d,isTracker:f,fill:fa,stroke:"none",transform:"t0,"+(g._startTranslateY||0),ishot:!0,cursor:g.cursor}):g.trackerObj=e.path(d,p).attr({isTracker:f,fill:fa,
stroke:"none",transform:"t0,"+(g._startTranslateY||0),ishot:!0,cursor:g.cursor}),b.data("eventArgs",n))},getEventArgs:function(a){return a.chart.getPlotData(a.index)},legendClick:function(a){var e=a.chart;e.slice.call(e.plots[0].items[a.index])},plotMouseUp:function(a){ca.call(this.trackerObj,this.chart,a)}},v["renderer.piebase"]);v("renderer.pyramid",{type:"pyramid",translate:function(){var a=this.datasets[0],e=a.data,c=this.canvasWidth/2,d=this.canvasHeight,b=e.length-1,f,m,g=this.canvasTop,p=a.yScale,
n=a.is2d,k=this.paper,l=a.valueSum?a.valueSum:1,q=0,u,t={},r=0,v=a.labelDistance,w=a.showLabelsAtCenter,A=.3*h(parseInt(this.options.plotOptions.series.dataLabels.style.fontSize,10),10),y=this.canvasLeft+c,x=d/l,z=0;Db(e,function(a,d){a.x=d;a.isSliced&&((u=a.x)&&!t[u]&&(t[u]=!0,r+=1),u<b&&(t[u+1]=!0,r+=1));q+=a.y;f=c*q/l;m=x*a.y;a.shapeArgs={x:y,y:g,R1:z,R2:f,h:m,r3dFactor:p,gStr:"point",is2D:n,renderer:k};w?(a.labelAline="middle",a.labelX=y,a.labelY=(n?g:g+p*z)+m/2+A):(a.labelAline="start",a.labelX=
y+v+(z+f)/2+3,a.labelY=g+A+m/2);g+=m;a.plotX=y;a.plotY=g-m/2;z=f});a._temp={slicingGapPosition:t,noOfGap:r}},drawPlotPyramid:function(a,e){this.translate();var c=this,d=a.items,b=a.data,f=c.options,h=f.plotOptions,g=c.elements.plots[0],p=c.datasets[0],n=h.series.dataLabels,k=g.showLabelsAtCenter,h=h.series.animation.duration||0,l=c.paper,q=f.tooltip||{},q=q&&!1!==q.enabled,u,t=c.layers,r=t.tracker,t=t.datalabels||(t.datalabels=l.group("datalabels").insertAfter(t.dataset)),v=p._temp||{},w=v.slicingGapPosition,
v=v.noOfGap,A=p.SlicingDistance,y,x=A/2,p=0,f=f.chart.issliced,z=n.style,z={fontFamily:z.fontFamily,fontSize:z.fontSize,lineHeight:z.lineHeight,fontWeight:z.fontWeight,fontStyle:z.fontStyle},F=function(a,b){return function(d){a.graphic.attr(b);ca.call(this,c,d,"DataPlotRollOver")}},C=function(a,b){return function(d){a.graphic.attr(b);ca.call(this,c,d,"DataPlotRollOut")}},D,B,G,I,M,H,N,P;H=function(a){return function(){c.legendClick(a,!0,!1)}};N=function(a){return function(){return c.getEventArgs(a)}};
P=function(a){return function(){a.attr({visibility:"visible"})}};v&&(y=La(1.5*x,A/v),p=x);b&&b.length||(b=[]);g.singletonCase=1==b.length;for(M=b.length;M--;)x=b[M],D=x.y,B=x.displayValue,u=x.toolText,G=!!x.link,I=f?0:x.isSliced,null!==D&&void 0!==D&&x.shapeArgs?((A=d[M])||(e.data[M].plot=A=d[M]={value:D,sliced:!!I,cursor:G?"pointer":"",chart:c,plotItems:d,seriesData:g,x:x.x,index:M,graphic:c.pyramidFunnelShape(x.shapeArgs).attr({fill:x.color,opacity:h?0:x.alpha,"stroke-width":x.borderWidth,stroke:x.borderColor}),
dataLabel:l.text(t).attr({text:B,title:x.originalText||"",ishot:!0,cursor:G?"pointer":"",x:0,y:0}).css(z),trackerObj:l.path(r)},D=B={},x.hoverEffects&&(D={color:x.color,opacity:x.alpha,"stroke-width":x.borderWidth,stroke:x.borderColor},B=x.rolloverProperties,B={color:B.color,opacity:B.alpha,"stroke-width":B.borderWidth,stroke:B.borderColor}),e.data[M].legendClick=H(A),e.data[M].getEventArgs=N(A),!x.doNotSlice&&A.trackerObj.click(c.slice,A),A.trackerObj.mouseup(c.plotMouseUp,A).hover(F(A,B),C(A,D)),
q&&A.trackerObj.tooltip(u),!x.doNotSlice&&A.dataLabel.click(c.slice,A),A.dataLabel.mouseup(c.plotMouseUp,A).hover(F(A,B),C(A,D)),k&&0===M&&"funnel"==c.type&&g.streamlinedData||(A.connector=l.path(t).attr({"stroke-width":n.connectorWidth,stroke:n.connectorColor,ishot:!0,cursor:G?"pointer":""}).click(c.slice,A).mouseup(c.plotMouseUp,A).hover(F(A,B),C(A,D))),A.dy=0,v&&(p&&(A._startTranslateY=u="t,0,"+p,A.dy=A.DistanceAvailed=p,A.graphic.attr({transform:u}),A.dataLabel.attr({transform:u}),A.connector.attr({transform:u})),
w[x.x]&&(p-=y))),h&&(t.attr("visibility","hidden"),A.graphic.animate({opacity:x.alpha},h,"easeIn",M===b.length-1&&P(t)))):e.data[M].plot=d[M]={dataLabel:l.text(t).attr({text:B,title:x.originalText||"",x:0,y:0}).css(z)};c.drawDataLabels();c.drawTracker(a,e)}},v["renderer.funnel"]);v("renderer.sparkline",{callbacks:[function(){if(!this.options.nativeMessage){var a=this.options,e=this.layers,c=this.paper,d=a.series[0]&&a.series[0].data&&a.series[0].data[0],b=e.limitlabels,f=this.smartLabel,a=a.chart,
h=a.highLowValue.highLabel,g=a.highLowValue.lowLabel,p=a.valuePadding,n=this.canvasHeight/2,k;d&&(b||(b=e.limitlabels=c.group("limitlabels").insertAfter(e.dataset)),b.translate(this.canvasLeft,this.canvasTop),$(a.openValue.label)&&(d.openValue=c.text(-p,n,a.openValue.label,b).attr({"text-anchor":sa[ab]}).css(a.openValue.style)),e=a.closeValue.label,k=this.canvasWidth+p,$(e)&&(d.closeValue=c.text(this.canvasWidth+p,n,e,b).attr({"text-anchor":sa[Ja]}).css(a.closeValue.style),f.setStyle(a.closeValue.style),
k+=f.getOriSize(e).width+p),$(h)&&(c.text(k,n,"[",b).attr({"text-anchor":sa[Ja]}).css(a.highLowValue.style),f.setStyle(a.highLowValue.style),k+=f.getOriSize("[").width+1,d.highLabel=c.text(k,n,h,b).attr({"text-anchor":sa[Ja]}).css(a.highLowValue.style).css({color:a.highColor}),k+=f.getOriSize(h).width+1),$(g)&&(c.text(k,n,"|",b).attr({"text-anchor":sa[Ja]}).css(a.highLowValue.style),k+=f.getOriSize("|").width+1,d.dataLabel=c.text(k,n,g,b).attr({"text-anchor":sa[Ja]}).css(a.highLowValue.style).css({color:a.lowColor}),
k+=f.getOriSize(g).width+1,c.text(k,n,"]",b).attr({"text-anchor":sa[Ja]}).css(a.highLowValue.style)))}}]},v["renderer.cartesian"]);v("renderer.sparkwinloss",{callbacks:[function(){if(!this.options.nativeMessage){var a=this.options,e=this.layers,c=this.paper,d=a.series[0]&&a.series[0].data&&a.series[0].data[0],b=e.limitlabels,f=a.plotOptions.series.dataLabels&&a.plotOptions.series.dataLabels.style||{},a=a.chart,h=a.closeValue.label,g={fontFamily:f.fontFamily,fontSize:f.fontSize,lineHeight:f.lineHeight,
fontWeight:f.fontWeight,fontStyle:f.fontStyle};d&&(b||(b=e.limitlabels=c.group("limitlabels").insertAfter(e.dataset)),b.translate(this.canvasLeft,this.canvasTop),$(h)&&h!==M&&(d.dataLabel=c.text(this.canvasWidth+a.valuePadding,this.canvasHeight/2,h,b).attr({"text-anchor":sa[Ja],fill:f.color,"text-bound":[f.backgroundColor,f.borderColor,f.borderThickness,f.borderPadding,f.borderRadius,f.borderDash]}).css(g)))}}]},v["renderer.cartesian"]);v("renderer.realtimecartesian",{updatePlotColumn:function(a,
e,c){var d=this,b=a.data,f=b.length,m=a.items,g=a.graphics||(a.graphics=[]),p=d.paper,n=d.layers,k=d.options,l=k.chart,q=!1!==(k.tooltip||{}).enabled,u=d.definition.chart,k=k.plotOptions.series,t=d.xAxis[e.xAxis||0],r=d.yAxis[e.yAxis||0],v=d.logic.isStacked,w=e.numColumns||1,A=e.columnPosition||0,y=l.canvasBorderOpacity=Ia.color(l.plotBorderColor).opacity,x=d.canvasBorderWidth,y=l.isCanvasBorder||(l.isCanvasBorder=0!==y&&0<x),z,x=!1===e.visible?"hidden":"visible",B=l.overlapColumns,C=t.getAxisPosition(0),
C=t.getAxisPosition(1)-C,D=u&&u.plotspacepercent,G=k.groupPadding,P=k.maxColWidth,u=h(u&&u.plotpaddingpercent),D=(1-.01*D)*C||La(C*(1-2*G),P*w),C=D/2,D=D/w,B=La(D-1,1<w?B||void 0!==u?0<u?D*u/100:0:4:0),w=D-B,A=A*D-C+B/2,C=r.max,D=r.min,B=0<C&&0<=D,u=0>=C&&0>D,C=0>C&&0>D?C:0<C&&0<D?D:0,l=h(l.useRoundEdges,0),I=n.dataset=n.dataset||p.group("dataset-orphan"),n=n.tracker,D=d.canvasTop,G=d.canvasLeft,P=d.canvasBottom,V=d.canvasRight,H,N,R,X,L,W,Q,U,O,ba,Z,ga,Y,ea,aa;Y=function(a,b){return function(c){a.attr(b);
ca.call(this,d,c,"dataplotrollover")}};ea=function(a,b){return function(c){a.attr(b);ca.call(this,d,c,"dataplotrollout")}};aa=function(a){ca.call(this,d,a)};v&&(Z=I.shadows||(I.shadows=p.group("shadows",I).toBack()));I=I.column=I.column||p.group("columns",I);if(ga=c.numUpdate||0)for(c=0;c<ga;c+=1)(H=m.shift())&&delete H._state,m.push(H);for(c=0;c<f;c+=1)if(O=c+ga,N=b[c],W=N.y,H=h(N.x,c),U=t.getAxisPosition(H)+A,H=m[c],L=N.toolText,R=N.link,X=N.displayValue||M,z=Rb(N.borderWidth)||0,Q={index:c,link:R,
value:W,displayValue:N.displayValue,categoryLabel:N.categoryLabel,toolText:L,id:a.userID,datasetIndex:a.index,datasetName:a.name,visible:a.visible},O>=f&&(H||(H=m[c]={index:c,value:W,width:w,graphic:null,dataLabel:null,tracker:null}),H&&(H.valueBelowPlot=0>W),O=ba={},N.hoverEffects&&(O={fill:S(N.color),stroke:S(N.borderColor),"stroke-width":z,"stroke-dasharray":N.dashStyle},ba=N.rolloverProperties,ba={fill:S(ba.color),stroke:S(ba.borderColor),"stroke-width":ba.borderWidth,"stroke-dasharray":ba.dashStyle}),
H.graphic||(H.graphic=p.rect(I).attr({visibility:x}),g.push(H.graphic),H.graphic.shadow(k.shadow&&N.shadow,Z)),H.graphic.attr({r:l,fill:S(N.color||""),stroke:S(N.borderColor||""),"stroke-width":z,"stroke-dasharray":N.dashStyle,"stroke-linejoin":"miter"}),H.tracker||(H.tracker=p.rect(n).attr({stroke:fa,fill:fa,visibility:x}),g.push(H.tracker)),H._attrHoverInFn&&H.tracker.unhover(H._attrHoverInFn,H._attrHoverOutFn),H._attrClickFn&&H.tracker.unclick(H._attrClickFn),H.tracker.attr({height:0,width:0,r:l,
"stroke-width":z,stroke:fa,cursor:R?"pointer":"",ishot:!0}).data("eventArgs",Q).click(H._attrClickFn=aa).hover(H._attrHoverInFn=Y(H.graphic,ba),H._attrHoverOutFn=ea(H.graphic,O)).tooltip(L)),H&&(H.index=c),null===W)H&&(H.graphic&&H.graphic.attr({height:0,"stroke-width":0}),H.tracker&&H.tracker.attr({height:0,"stroke-width":0}),H.dataLabel&&H.dataLabel.attr({text:""}));else if(Q=N.previousY,O=r.getAxisPosition(Q||C),N=r.getAxisPosition(W+(Q||0)),L=wb(N-O),0>W&&(N=O),Sb(N)<=D&&(L-=D-N-+y,N=D-+y),la(N+
L)>=P&&(L-=la(N+L)-P+ +!!z+ +y),1>=z&&(la(U)<=G&&(w+=U,U=G-z/2+ +!!z-+y,w-=U),la(U+w)>=V&&(w=V-U+z/2-+!!z+ +y)),O=Ia.crispBound(U,N,w,L,z),U=O.x,N=O.y,w=O.width,L=O.height,y&&!$(Q)&&(u?(z=N-(D-z/2),L+=z,N-=z):B&&(L=P-N+z/2)),1>=L&&(L=1,N+=0>W?0:-L),H&&H.graphic&&(H.graphic.attr({x:U,y:N,width:w,height:L}).data("BBox",O),H.dataLabel&&H.dataLabel.attrs.text!==X&&H.dataLabel.attr({text:X}),d.drawPlotColumnLabel(a,e,c,U,N),R||q))!v&&L<zb&&(N-=(zb-L)/2,L=zb),H.tracker&&H.tracker.attr({x:U,y:N,width:w,
height:L});return a},updatePlotLine:function(a,e,c){var d=this,b=d.paper,f=d.options,m=f.chart,g=f.plotOptions.series,p=a.items,n=a.graphics||(a.graphics=[]),k,l=d.xAxis[e.xAxis||0],q=d.yAxis[e.yAxis||0],u=!1!==(f.tooltip||{}).enabled,f=a.data,t=!1===e.visible?"hidden":"visible",r=f.length,v=g.connectNullData,y,A,B,x,z,F,C,D=null,G,P=e.lineWidth,I=e.color,R,H,N,V,W,L,X,Q,U,O,Y=d.layers,Z=Y.dataset=Y.dataset||b.group("dataset-orphan"),Y=Y.tracker,ga,$,ea,aa,na,da,ra,ja,ha,ma,la,ka,oa,qa;ma=function(a){ca.call(this,
d,a)};la=function(a){return function(b){d.hoverPlotAnchor(this,b,"DataPlotRollOver",a,d)}};ka=function(a){return function(b){d.hoverPlotAnchor(this,b,"DataPlotRollOut",a,d)}};qa=function(b,c,f,g,k,h,l,m,p){return function(){var h=f.imageUrl,q=f.imageScale,r=f.imageAlpha,s=l.imageHoverAlpha,v=l.imageHoverScale,w=this.width*q*.01,x=this.width*v*.01;U={x:b-this.width*q*.005,y:c-this.height*q*.005,width:w,height:this.height*q*.01,alpha:r};O={x:b-this.width*v*.005,y:c-this.height*v*.005,width:x,height:this.height*
v*.01,alpha:s};s=x>w?O:U;g.graphic&&g.graphic.attr(U).attr("src",h).css({opacity:.01*r}).data("alwaysInvisible",0===q).data("setRolloverProperties",l).data("setRolloverAttr",O).data("setRolloutAttr",U).data("anchorRadius",q).data("anchorHoverRadius",v);if(p||u||l)g.tracker.attr(s).attr({cursor:p?"pointer":"",stroke:fa,"stroke-width":f.lineWidth,fill:fa,ishot:!0,visibility:t}).data("eventArgs",k),d.drawTracker&&d.drawTracker.call(d,a,e,m);(ga=g.dataLabel=d.drawPlotLineLabel(a,e,m,b,c))&&n.push(ga)}};
oa=function(b,c,f,g,k,h,l,m){return function(){(ga=g.dataLabel=d.drawPlotLineLabel(a,e,m,b,c))&&n.push(ga)}};$=Z.line||(Z.line=b.group("line-connector",Z));ea=a.lineShadowLayer||(a.lineShadowLayer=b.group("connector-shadow",$));aa=a.anchorShadowLayer||(a.anchorShadowLayer=b.group("anchor-shadow",$));Z=a.lineLayer||(a.lineLayer=b.group("connector",$));$=a.anchorLayer||(a.anchorLayer=b.group("anchors",$));if(ra=c.numUpdate||0)for(c=0;c<ra;c+=1)(k=p.shift())&&delete k._state,p.push(k);for(c=0;c<r;c+=
1)if(da=c+ra,y=f[c],F=y.y,z=h(y.x,c),z=l.getAxisPosition(z),x=y.toolText,A=y.link,B=y.displayValue||M,H=y.marker||{},N=V=H.radius||0,na=H.shadow,W=H.lineWidth||0,L=H.fillColor||"",X=H.lineColor||"",k=H.imageUrl,ha=!!k,k=p[c],k._state||(k._state={}),da>=r&&(k||(k=p[c]={index:c,value:F,graphic:null,connector:null,dataLabel:null,tracker:null}),k.graphic&&"image"===k.graphic.type&&!ha&&(k.graphic&&k.graphic.remove(),k.tracker&&k.tracker.remove(),k.graphic=k.tracker=null),k.graphic||(k.graphic=(ha?b.image($):
b.polypath($)).attr({visibility:t}),n.push(k.graphic)),ha||k.graphic.attr({fill:S(L),"stroke-width":W,stroke:S(X)}),k.connector||(k.connector=b.path(Z).attr({visibility:t}),k.connector.shadow(g.shadow&&y.shadow,ea),n.push(k.connector)),k.connector.attr({"stroke-dasharray":R,stroke:S(G||I),"stroke-width":P,"stroke-linecap":"round","stroke-linejoin":2<P?"round":"miter"}),k.tracker||(k.tracker=(ha?b.rect(Y):b.circle(Y)).attr({stroke:fa,fill:fa,visibility:t}),n.push(k.tracker)),V=ya(V,Q&&Q.radius||0,
m.anchorTrackingRadius),ja={index:c,link:A,value:y.y,displayValue:y.displayValue,categoryLabel:y.categoryLabel,toolText:y.toolText,id:a.userID,datasetIndex:a.index,datasetName:a.name,visible:a.visible},k._attrClickFn&&k.tracker.unclick(k._attrClickFn),k._attrHoverInFn&&k.tracker.unhover(k._attrHoverInFn,k._attrHoverOutFn),k.tracker.attr({r:V,"stroke-width":W,stroke:fa,cursor:A?"pointer":"",ishot:!0}).data("eventArgs",ja).click(k._attrClickFn=ma).hover(k._attrHoverInFn=la(k),k._attrHoverOutFn=ka(k)).tooltip(x)),
k&&(k.index=c),null===F)k&&(k.graphic&&k.graphic.attr({polypath:[2,0,0,0,0,0],"stroke-width":0}),k.dataLabel&&k.dataLabel.attr({text:""}),k.connector&&k.connector.attr({path:"M-9999,-9999Lh-1","stroke-width":0}),k.tracker&&k.tracker.attr({r:0,"stroke-width":0})),0===v&&(D=null);else{G=q.getAxisPosition(F);if(H&&H.enabled)if(R=H.symbol.split("_"),F=k.graphic,U=O={},Q=y.rolloverProperties,ha)da>=r?(R=new ba.Image,R.onload=qa(z,G,H,k,ja,x,Q,c,A),R.onerror=oa(z,G,H,k,ja,x,Q,c),R.src=H.imageUrl):(O=F.data("setRolloverAttr"),
U=F.data("setRolloutAttr"),O&&(O.x=z-.5*O.width,O.y=G-.5*O.height,F&&F.stop(),k.dataLabel&&k.dataLabel.stop(),U.x=z-.5*U.width,U.y=G-.5*U.height,F.attr(U),k.tracker&&k.tracker.attr({x:U.x,y:U.y,fill:fa})));else{if(Q=y.rolloverProperties)U={polypath:[R[1]||2,z,G,N,H.startAngle,0],fill:S(H.fillColor),"stroke-width":H.lineWidth,stroke:S(H.lineColor)},Q=y.rolloverProperties,O={polypath:[Q.sides||2,z,G,Q.radius,Q.startAngle,Q.dip],fill:S(Q.fillColor),"stroke-width":Q.lineWidth,stroke:S(Q.lineColor)};F&&
F.attr({polypath:[R[1]||2,z,G,N,H.startAngle,0],visibility:0===N?"hidden":t}).data("isRealtime",!0).data("alwaysInvisible",0===N).data("setRolloverProperties",Q).data("setRolloverAttr",O).data("setRolloutAttr",U).data("anchorRadius",N).data("anchorHoverRadius",Q&&Q.radius).shadow(na||!1,aa);(A||u)&&k.tracker&&k.tracker.attr({cx:z,cy:G})}k.dataLabel&&k.dataLabel.attrs.text!=B&&k.dataLabel.attr({text:B});ga=d.drawPlotLineLabel(a,e,c,z,G);null!==D?(C=["M",C,w,D],C.push("L",z,w,G),(D=k.connector)&&D.attr({path:C,
"stroke-width":P})):k.connector&&k.connector.attr({path:"M-9999,-9999Lh-1","stroke-width":0});C=z;D=G;G=y.color;R=y.dashStyle||e.dashStyle}return a},updatePlotArea:function(a,e,c){var d=this,b=d.paper,f=d.options,m=f.chart,g=d.logic,p=f.plotOptions.series,n=a.items,k=a.graphics||(a.graphics=[]),l,q=d.xAxis[e.xAxis||0],u=d.yAxis[e.yAxis||0],t=u.axisData.reversed,r=g.isStacked,v=!1!==(f.tooltip||{}).enabled,f="0"===d.definition.chart.drawfullareaborder,g=a.data,y=!1===e.visible?"hidden":"visible",A=
g.length,B=p.connectNullData,x,z,F,C,D,G,P,I=u.max,R=u.min,t=u.getAxisPosition(0<I&&0<R?t?I:R:0>I&&0>R?t?R:I:t?I:0),I=null,H,R=e.lineWidth,N=e.dashStyle,V=S(e.lineColor),U=0,L,W,Q,X,O,Y,Z,$=[],ea=[],ha=[],aa=d.layers,na=aa.dataset=aa.dataset||b.group("dataset-orphan"),aa=aa.tracker,da,ma,ja,la,ka,oa,qa,ta,sa,ua,va,wa,xa,za;u.yBasePos=t;ua=function(a){ca.call(this,d,a)};va=function(a){return function(b){d.hoverPlotAnchor(this,b,"DataPlotRollOver",a,d)}};wa=function(a){return function(b){d.hoverPlotAnchor(this,
b,"DataPlotRollOut",a,d)}};xa=function(b,c,f,g,h,l,m,n,p){return function(){var l=f.imageUrl,q=f.imageScale,r=f.imageAlpha,s=m.imageHoverAlpha,t=m.imageHoverScale,u=this.width*q*.01,w=this.width*t*.01;Y={x:b-this.width*q*.005,y:c-this.height*q*.005,width:u,height:this.height*q*.01,alpha:r};Z={x:b-this.width*t*.005,y:c-this.height*t*.005,width:w,height:this.height*t*.01,alpha:s};s=w>u?Z:Y;g.graphic&&g.graphic.attr(Y).attr("src",l).css({opacity:.01*r}).data("alwaysInvisible",0===q).data("setRolloverProperties",
m).data("setRolloverAttr",Z).data("setRolloutAttr",Y).data("anchorRadius",q).data("anchorHoverRadius",t);if(p||v||m)g.tracker.attr(s).attr({cursor:p?"pointer":"",stroke:fa,"stroke-width":f.lineWidth,fill:fa,ishot:!0,visibility:y}).data("eventArgs",h),d.drawTracker&&d.drawTracker.call(d,a,e,n);(la=g.dataLabel=d.drawPlotLineLabel(a,e,n,b,c))&&k.push(la)}};za=function(b,c,f,g,h,l,m,n){return function(){(la=g.dataLabel=d.drawPlotLineLabel(a,e,n,b,c))&&k.push(la)}};r&&(ja=na.shadows||(na.shadows=b.group("shadows",
na).toBack()));da=na.line||(na.line=b.group("line-connector",na));a.lineShadowLayer||(a.lineShadowLayer=b.group("connector-shadow",da));na=a.anchorShadowLayer||(a.anchorShadowLayer=b.group("anchor-shadow",da));r=a.lineLayer||(a.lineLayer=b.group("connector",da));da=a.anchorLayer||(a.anchorLayer=b.group("anchors",da));if(oa=c.numUpdate||0)for(c=0;c<oa;c+=1)(l=n.shift())&&delete l._state,n.push(l);for(c=0;c<A;c+=1)ka=c+oa,x=g[c],D=x.y,l=h(x.x,c),H=q.getAxisPosition(l),C=x.toolText,z=x.link,F=x.displayValue||
M,L=x.marker||{},W=P=L.radius||0,ma=L.shadow,G=L.lineWidth||0,Q=L.fillColor||"",X=L.lineColor||"",ta=L.imageUrl,sa=!!ta,l=n[c],ka>=A&&(l||(l=n[c]={index:c,graphic:null,connector:null,dataLabel:null,tracker:null}),l.graphic&&"image"===l.graphic.type&&!sa&&(l.graphic&&l.graphic.remove(),l.tracker&&l.tracker.remove(),l.graphic=l.tracker=null),l.graphic||(l.graphic=(sa?b.image(da):b.polypath(da)).attr({visibility:y}),k.push(l.graphic)),sa||l.graphic.attr({fill:S(Q),"stroke-width":G,stroke:S(X)}),l.tracker||
(l.tracker=(sa?b.rect(aa):b.circle(aa)).attr({stroke:fa,fill:fa,visibility:y}),k.push(l.tracker)),P=ya(P,O&&O.radius||0,m.anchorTrackingRadius),qa={index:c,link:z,value:x.y,displayValue:x.displayValue,categoryLabel:x.categoryLabel,toolText:x.toolText,id:a.userID,datasetIndex:a.index,datasetName:a.name,visible:a.visible},l._attrHoverInFn&&l.tracker.unhover(l._attrHoverInFn,l._attrHoverOutFn),l._attrClickFn&&l.tracker.unclick(l._attrClickFn),l.tracker.attr({r:P,"stroke-width":G,cursor:z?"pointer":"",
ishot:!0}).data("eventArgs",qa).click(l._attrClickFn=ua).hover(l._attrHoverInFn=va(l),l._attrHoverOutFn=wa(l)).tooltip(C)),l&&(l.index=c),null===D?(l&&(l.graphic&&l.graphic.attr({polypath:[2,0,0,0,0,0],"stroke-width":0}),l.dataLabel&&l.dataLabel.attr({text:""}),l.tracker&&l.tracker.attr({r:0,"stroke-width":0})),0===B&&(I=null,0<U&&(1===U?$.splice(-8,8):($=$.concat(ea),$.push("Z")),ea=[]))):(z=x.link,G=x.previousY,P=(P=u.getAxisPosition(G)||null)||t,D=u.getAxisPosition(D+(G||0)),L&&L.enabled&&(G=L.symbol.split("_"),
Q=l.graphic,Y=Z={},O=x.rolloverProperties,sa&&Q?ka>=A?(ka=new ba.Image,ka.onload=xa(H,D,L,l,qa,C,O,c,z),ka.onerror=za(H,D,L,l,qa,C,O,c),ka.src=ta):(Z=Q.data("setRolloverAttr"),Y=Q.data("setRolloutAttr"),Q&&Q.stop(),l.dataLabel&&l.dataLabel.stop(),Z&&(Z.x=H-.5*Z.width,Z.y=D-.5*Z.height,Y.x=H-.5*Y.width,Y.y=D-.5*Y.height,Q.attr(Y),l.tracker&&l.tracker.attr({x:Y.x,y:Y.y,fill:fa}))):(O&&(Y={polypath:[G[1]||2,H,D,W,L.startAngle,0],fill:S(L.fillColor),"stroke-width":L.lineWidth,stroke:S(L.lineColor)},O=
x.rolloverProperties,Z={polypath:[O.sides||2,H,D,O.radius,O.startAngle,O.dip],fill:S(O.fillColor),"stroke-width":O.lineWidth,stroke:S(O.lineColor)}),Q&&Q.attr({polypath:[G[1]||2,H,D,W,L.startAngle,0],visibility:0===W?"hidden":y}).data("isRealtime",!0).data("alwaysInvisible",0===W).data("setRolloverProperties",O).data("setRolloverAttr",Z).data("setRolloutAttr",Y).data("anchorRadius",W).data("anchorHoverRadius",O&&O.radius).shadow(ma||!1,na),(z||v)&&l.tracker&&l.tracker.attr({cx:H,cy:D}))),l.dataLabel&&
l.dataLabel.attrs.text!==F&&l.dataLabel.attr({text:F}),la=d.drawPlotLineLabel(a,e,c,H,D),null===I?(ha.push("M",H,w,D),$.push("M",H,w,P),U=0):ha.push("L",H,w,D),$.push("L",H,w,D),ea.unshift("L",H,w,P),U++,I=D);0<U&&(1===U?$.splice(-8,8):($=$.concat(ea),$.push("Z")));a.graphic||(a.graphic=b.path(void 0).attr({"stroke-dasharray":N,"stroke-width":f?0:R,stroke:V,"stroke-linecap":"round","stroke-linejoin":2<R?"round":"miter"}).shadow(p.shadow&&x.shadow,ja),k.push(a.graphic));a.graphic.attr({path:$});f&&
(a.connector||(a.connector=b.path(r).attr({"stroke-dasharray":N,"stroke-width":R,stroke:V,"stroke-linecap":"round","stroke-linejoin":2<R?"round":"miter"}),k.push(a.connector)),a.connector.attr({path:ha}));return a}},v["renderer.cartesian"])},[3,2,0,"sr2"]]);
/*
 FusionCharts JavaScript Library
 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>

 @version 3.6.0
*/
FusionCharts.register("module",["private","modules.renderer.js-gradientlegend",function(){function hb(g,h,xa){var ma=g[0],J=g[1];g=g[2];ma+=(h[0]-ma)*xa;J+=(h[1]-J)*xa;h=g+(h[2]-g)*xa;return{hex:(z+(ma<<16|J<<8|h).toString(16)).slice(-6),rgb:[ma,J,h]}}function pb(g,h){return g.maxvalue-h.maxvalue}function fb(h){var z,xa,ma=h.colorRange||{},J=h.dataMin,u=h.dataMax,P=h.sortLegend||!1,v=h.mapByCategory||!1,F=h.defaultColor,ea=h.numberFormatter,A=ma.color;h=this.colorArr=[];var Q,ba,V;this.mapByCategory=
v;"1"===ma.mapbypercent&&(this.mapbypercent=!0);if("1"===ma.gradient&&!v){this.gradient=!0;xa=Hb(La(ma.startcolor,ma.mincolor,ma.code));P=Mb(Hb(La(xa,F,"CCCCCC")));v=this.scaleMin=Ta(ma.startvalue,ma.minvalue,this.mapbypercent?0:J);h.push({code:xa,maxvalue:v,label:H(ma.startlabel),codeRGB:Mb(xa)});if(A&&(z=A.length))for(J=0;J<z;J+=1)F=A[J],xa=Hb(La(F.color,F.code)),ba=Ta(F.value,F.maxvalue),V=Ta(F.minvalue),ba>v&&h.push({code:xa,maxvalue:ba,userminvalue:V,label:H(La(F.label,F.displayvalue)),codeRGB:Mb(xa)});
h.sort(pb);z=h.length;for(J=1;J<z;J+=1)F=h[J],xa=F.maxvalue-v,0<xa?(F.minvalue=v,F.range=xa,v=F.maxvalue):(h.splice(J,1),J-=1,z-=1);2<=h.length&&(this.scaleMax=v,h[J-1].label=La(ma.endlabel,h[J-1].label,h[J-1].displayvalue));1===h.length&&(ba=Ta(ma.maxvalue,this.mapbypercent?100:u),h.push({minvalue:v,maxvalue:ba,range:ba-v,label:ma.endlabel}),this.scaleMax=ba,delete h[0].code);ma=h[0];u=h[h.length-1];ma.code&&u.code||(xa=g(P),z=B((xa[2]=0,xa)),xa=B((xa[2]=100,xa)),ma.code||(ma.codeRGB=z,ma.code=da(z)),
u.code||(u.codeRGB=xa,u.code=da(xa)));z=h.length;for(J=1;J<z;J+=1)if(F=h[J],F.code){if(Q)for(u=F,V=ma.maxvalue,A=u.maxvalue-V;Q<J;Q+=1)P=h[Q],xa=hb(ma.codeRGB,u.codeRGB,(P.maxvalue-V)/A),P.code=xa.hex,P.codeRGB=xa.rgb;Q=null;ma=F}else Q=Q||J;if(void 0===this.scaleMin||void 0===this.scaleMax)this.noValidRange=!0}else if(A&&(z=A.length)){for(J=0;J<z;J+=1)F=A[J],xa=La(F.color,F.code),ba=Ta(F.maxvalue),V=Ta(F.minvalue),Q=La(F.label,F.displayvalue,v?ha:ea.dataLabels(V)+" - "+ea.dataLabels(ba)),(xa&&ba>
V||v&&Q)&&h.push({code:xa,maxvalue:ba,minvalue:V,label:H(Q),labelId:Q.toLowerCase()});h.length?P&&h.sort(pb):this.noValidRange=!0}}function A(g,h){return h?na(100*g)/100+"%":Ma(g,ha).toString()}var u=this,Z=u.hcLib,Qa=u.window,Qa=/msie/i.test(Qa.navigator.userAgent)&&!Qa.opera,Ta=Z.pluckNumber,z=Z.COLOR_BLACK,ac=Z.COLOR_GLASS,gb=Z.FC_CONFIG_STRING,h=Z.graphics,B=h.HSBtoRGB,g=h.RGBtoHSB,da=h.RGBtoHex,Mb=h.HEXtoRGB,F=Z.COMMASTRING,ha=Z.BLANKSTRING,H=Z.parseUnsafeString,ya=Z.graphics.convertColor,ea=
Z.POSITION_TOP,qb=Z.POSITION_MIDDLE,Sa=Z.POSITION_START,Qb=Z.POSITION_END,bc=Z.graphics.getDarkColor,rb=Z.graphics.getLightColor,La=Z.pluck,Ma=Z.getValidValue,ib=Z.toRaphaelColor,vb=Z.hasTouch,na=Math.round,Na=Math.max,V=Math.min,ra=Math.abs,Y,Ga,Cb,cc="rgba(192,192,192,"+(Qa?.002:1E-6)+")",Hb=function(g){return g&&g.replace(/^#?([a-f0-9]+)/ig,"$1")};fb.prototype={getColorObj:function(g){var h=this.colorArr,z=this.gradient?1:0,u=h[z],J;if(this.mapByCategory){for(g=H(g).toLowerCase();u;){if(u.labelId===
g)return{code:u.code,seriesIndex:z};z+=1;u=h[z]}return{outOfRange:!0}}if(this.gradient){if(this.scaleMin<=g&&this.scaleMax>=g){for(;u&&u.maxvalue<g;)z+=1,u=h[z];g=(g-u.minvalue)/u.range;return{code:hb(h[z-1].codeRGB,u.codeRGB,g).hex}}return{outOfRange:!0}}for(;u;){if(u.maxvalue>g&&u.minvalue<=g)return{code:u.code,seriesIndex:z};u.maxvalue===g&&(J=z);z+=1;u=h[z]}return(u=h[J])&&u.maxvalue===g?{code:u.code,seriesIndex:J}:{outOfRange:!0}}};fb.prototype.constructor=fb;Z.colorRange=fb;Y=Z.configureGradientLegendOptions=
function(g,h){var u=g.legend,F=h.chart;u.legendSliderBorderWidth=Ta(F.legendpointerborderthickness,1);u.legendSliderBorderColor=ya(La(F.legendpointerbordercolor,z),Ta(F.legendpointerborderalpha,100));u.legendSliderWidth=Ta(F.legendpointerwidth,F.legendpointerswidth,12);u.legendSliderHeight=Ta(F.legendpointerheight,F.legendpointersheight,12);u.legendColorBoxBorderColor=u.borderColor;u.legendColorBoxBorderWidth=u.borderWidth;u.legendScaleColor=ya(La(F.legendscalelinecolor,z),Ta(F.legendscalelinealpha,
100));u.legendScalePadding=Ta(F.legendscalepadding,4);u.legendScaleLineThickness=Ta(F.legendscalelinethickness,1);u.legendScaleTickDistance=Ta(F.legendscaletickdistance,6);u.itemStyle.cursor="default";u.interActivity=Ta(F.interactivelegend,1)};Z.placeGLegendBlockRight=function(g,h,z,u,J){this.configureLegendOptions(g,h.chart,!0,J,z);Y(g,h);J=this.snapLiterals||(this.snapLiterals={});var F=g[gb],P=this.smartLabel||F.smartLabel,v=g.legend,ea=g.chart.spacingRight,B,H,Q=v.textPadding=2,ba=2*Q,ra=v.title.padding,
na=0,da=0,ya=2*v.padding;h=Ta(h.chart.legendpadding,7)+v.borderWidth/2+1;var I=g.colorRange||{},Z=I.colorArr,Ia=I.mapbypercent,Ja=I.scaleMin,La=I.scaleMax-Ja,Ga=v.legendSliderWidth,ja=v.legendSliderHeight/2;H=v.legendScalePadding;var y=v.legendScaleTickDistance,Ka=v.itemStyle||{};B=Ta(parseInt(Ka.lineHeight,10)||12);var Ua=.75*B,Ca=z-ya,Da,qa,za=0,Xa,q,fa,Aa,Ha,Ea,Sa;u-=ya;if(!I.noValidRange&&Z&&1<(qa=Z.length)){qa-=1;v.title.text!==ha&&(P.setStyle(v.title.style),B=P.getSmartText(v.title.text,Ca,
Na(B,u/4)),v.title.text=B.text,na=B.width+ya,u-=da=B.height+ra);P.setStyle(Ka);B=P.lineHeight;Ca-=y+H+Ga;v.colorBoxX=Ga;ra=Na(B,Ca/2);Ca=V(Ca-ra-4,B);Xa=Na(B,u/2);Da=u/4;y=Z[0];y.scaleLabel=A(y.maxvalue,Ia);B=P.getSmartText(y.label,Da,Ca);y.label=B.text;Ka=B.height;y.labelY=Ua-B.height/2;H=P.getSmartText(y.scaleLabel,ra,Xa);y.scaleLabel=H.text;I=H.height/2;q=H.width;y.scaleLabelY=Ua-H.height/2;v.colorBoxY=Na(I,B.width+ba,ja)+da;y=Sa=Z[qa];y.scaleLabel=A(y.maxvalue,Ia);B=P.getSmartText(y.label,Da,
Ca);y.label=B.text;Ka=Na(Ka,B.height);y.labelY=Ua-B.height/2;H=P.getSmartText(y.scaleLabel,ra,Xa);y.scaleLabel=H.text;q=Na(q,H.width);Da=H.height/2;B=Na(B.width+ba,Da,ja);y.scaleLabelY=Ua-H.height/2;v.colorBoxHeight=ja=u-v.colorBoxY-B;Xa=ja-Da;fa=ja/La;Ha=V(ja-za,Xa-I)-4;for(Da=1;Da<qa;Da+=1)y=Z[Da],Aa=(y.maxvalue-Ja)*fa,B=P.getSmartText(y.label,2*V(Aa-za,ja-Aa),Ca),y.label=B.text,Ka=Na(Ka,B.height),y.labelY=Ua-B.height/2,B=B.width/2,y.scaleLabel=A(y.maxvalue,Ia),H=P.getSmartText(y.scaleLabel,ra,
2*V(Aa-I,Xa-Aa)),y.scaleLabel=H.text,q=Na(q,H.width),Ea=H.height/2,y.scaleLabelY=Ua-H.height/2,Ha=V(Ha,(Aa-Na(Ea+I,B+za)-4)*La/y.range),za=B+Aa,I=Ea+Aa;Ha=Na(V(Ha,(V(Xa-I,ja-za)-4)*La/Sa.range,.3*u),0);v.colorBoxHeight-=Ha;v.colorBoxWidth=Ka&&Ka+ba||15;v.height=v.totalHeight=u+da+ya-Ha;v.width=(q&&q+Q)+v.colorBoxWidth+Ga+v.legendScaleTickDistance+v.legendScalePadding+ya;v.width<na&&(v.colorBoxX+=(na-v.width)/2,v.width=na);v.width>z&&(v.width=z);J.legendstartx=F.width-ea-v.width;J.legendwidth=v.width;
J.legendendx=J.legendstartx+J.legendwidth;J.legendheight=v.height;h+=v.width;g.chart.marginRight+=h;return h}v.enabled=!1;return 0};Z.placeGLegendBlockBottom=function(g,h,z,u,J){this.configureLegendOptions(g,h.chart,!1,J,z);Y(g,h);J=this.snapLiterals||(this.snapLiterals={});var F=g[gb],B=this.smartLabel||F.smartLabel,v=g.legend,H=g.chart,ea=H.spacingBottom,ra=H.spacingLeft,H=H.spacingRight,Q,ba,na=v.textPadding=2,da=v.title.padding,ya=0,Z=0,I=2*v.padding;h=Ta(h.chart.legendpadding,7)+v.borderWidth/
2+1;var Ga=g.colorRange||{},Ia=Ga.colorArr,Ja=Ga.mapbypercent,Sa=Ga.scaleMin,Qa=Ga.scaleMax-Sa,ja=v.legendSliderWidth,y=v.legendSliderHeight,Ka=v.legendScalePadding,Ua=v.legendScaleTickDistance,Ca=v.itemStyle||{};Q=Ta(parseInt(Ca.lineHeight,10)||12);var Da=.75*Q,qa=u-I,za,Xa,q,fa,Aa=0,Ha,Ea,Ma;z-=I;if(!Ga.noValidRange&&Ia&&1<(Xa=Ia.length)){Xa-=1;v.title.text!==ha&&(B.setStyle(v.title.style),Q=B.getSmartText(v.title.text,z,qa/3),v.title.text=Q.text,ya=Q.width+I,qa-=Z=Q.height+da);B.setStyle(Ca);Q=
B.lineHeight;qa-=Ua+Ka+y;da=Na(Q,qa/2);Ca=V(qa-da-4,Q);za=z/4;fa=2*za;q=Ia[0];q.scaleLabel=A(q.maxvalue,Ja);Q=B.getSmartText(q.label,za,Ca);q.label=Q.text;qa=Q.height;q.labelY=Da-Q.height/2;ba=B.getSmartText(q.scaleLabel,fa,da);q.scaleLabel=ba.text;Ka=ba.width/2;Ua=ba.height;q.code||(q.code=La(v.minColor,"CCCCCC"));v.colorBoxX=Na(Ka,Q.width+na,ja);q=Ga=Ia[Xa];q.scaleLabel=A(q.maxvalue,Ja);Q=B.getSmartText(q.label,za,Ca);q.label=Q.text;qa=Na(qa,Q.height);q.labelY=Da-Q.height/2;ba=B.getSmartText(q.scaleLabel,
fa,da);q.scaleLabel=ba.text;Ua=Na(Ua,ba.height);q=ba.width/2;Q=Na(Q.width+na,q,ja);v.colorBoxWidth=ja=z-v.colorBoxX-Q;fa=ja-q;Ha=ja/Qa;Ma=V(ja-Aa,fa-Ka)-4;for(za=1;za<Xa;za+=1)q=Ia[za],Ea=(q.maxvalue-Sa)*Ha,Q=B.getSmartText(q.label,2*V(Ea-Aa,ja-Ea),Ca),q.label=Q.text,qa=Na(qa,Q.height),q.labelY=Da-Q.height/2,Q=Q.width/2,q.scaleLabel=A(q.maxvalue,Ja),ba=B.getSmartText(q.scaleLabel,2*V(Ea-Ka,fa-Ea),da),q.scaleLabel=ba.text,Ua=Na(Ua,ba.height),ba=ba.width/2,Ma=V(Ma,(Ea-Na(ba+Ka,Q+Aa)-4)*Qa/q.range),
Aa=Q+Ea,Ka=ba+Ea;Ma=Na(V(Ma,(V(fa-Ka,ja-Aa)-4)*Qa/Ga.range,.3*z),0);v.colorBoxWidth-=Ma;v.width=z+I-Ma;v.width<ya&&(v.colorBoxX+=(ya-v.width)/2,v.width=ya);v.colorBoxY=Z+y;v.colorBoxHeight=qa&&qa+2*na||15;v.height=v.totalHeight=(Ua&&Ua+na)+v.colorBoxHeight+Z+y+v.legendScaleTickDistance+v.legendScalePadding+I;v.height>u&&(v.height=u);J.legendstartx=ra+.5*(F.width-ra-H-v.width)+(v.x||0);J.legendwidth=v.width;J.legendendx=J.legendstartx+J.legendwidth;J.legendstarty=F.height-ea-v.height;J.legendheight=
v.height;J.legendendy=J.legendstarty+J.legendheight;h+=v.height;g.chart.marginBottom+=h;return h}v.enabled=!1;return 0};Ga=function(){return{point:this}};Cb=function(g){return na(100*g)/100};Z.rendererRoot.drawGradientLegendItem=function(g){var h=this,B=h.paper,H=h.options,J=h.canvasLeft,A=h.canvasTop,P=h.canvasWidth,v=h.canvasHeight,V=H.colorRange,da,Z,Q,ba,Y=H.legend,Ma=Ta(Y.padding,4),Qa=Y.itemStyle,H=Y.symbolStyle,hb=Y.interActivity,I=g.elements;g=I.elementGroup.trackTooltip(!0);var gb="vertical"===
Y.layout,Ia,Ja,jb,fb,ja,y,Ka=0,Ua=Y.lighting3d,Ca=Y.colorBoxWidth,Da=Y.colorBoxHeight,qa=Ca,za=Da,Xa={FCcolor:{color:ha,alpha:ha,angle:0,ratio:ha}},q=Xa.FCcolor,fa=Y.colorBoxX+Ma,Aa=Y.colorBoxY+Ma,Ha,Ea,pb=Y.legendColorBoxBorderColor,Mb=Y.legendColorBoxBorderWidth,ta=["M"],Hb=Y.legendScaleColor;y=Y.legendScalePadding;var Nb=Y.legendScaleLineThickness,sb=Nb%2/2;Z=Y.legendScaleTickDistance;var wb=Y.legendSliderWidth,Db=Y.legendSliderHeight;ja=za/2;ba=qa/2;var tb=wb/2,Wa=Db/2,Ob,Za,Eb;Ea=0;var Rb=rb("ABABAB",
50),Ma=bc("ABABAB",70),Y=ya("ABABAB",100),Ma=ya(Ma,100),Rb=ya(Rb,100),Fb,Fa={isFirst:!0},wa={},bb,ab,Gb,b;if(V&&(da=V.colorArr)&&1<(Q=da.length)){Fa.toolText=bb=jb=V.scaleMin;wa.toolText=ab=V=V.scaleMax;fb=V-jb;Fa.snapPX=wa.snapPX=0;Fa.tooltipConstraint=wa.tooltipConstraint="chart";Fa.getLabelConfig=wa.getLabelConfig=Ga;Fa.tooltipPos=[0,0];wa.tooltipPos=[0,0];wa.tooltipOffsetReference=Fa.tooltipOffsetReference={};wa.tooltipOffsetReference.left=Fa.tooltipOffsetReference.left+=J-20;wa.tooltipOffsetReference.top=
Fa.tooltipOffsetReference.top+=A;Gb=I.colorBox=B.group("colorBox",g);if(gb){Fa.tooltipPos[0]=wa.tooltipPos[0]=P+J;Ea=270;q.angle=90;J=fa-wb;P=fa+qa;A=Aa-Wa;Ia=Aa+Wa;J=na(fa-wb)+.5;P=na(fa)+.5;A=na(Aa-Wa)+.5;Ia=na(Aa+Wa)+.5;Ob=na(fa+qa)+.5;Eb=na(Aa-2)+.5;Ja=na(Aa+2)+.5;Ha=na(Aa)+.5;v=fa-tb/2;Za=na(v-Wa)+.5;v=na(v)+.5;ja=Aa-Wa/2;Wa=na(ja+Wa)+.5;ja=na(ja)+.5;Ca/=2;tb=["M",J,A,"L",P,A,P,Eb,Ob,Ha,P,Ja,P,Ia,J,Ia,"Z","M",Za,ja,"L",v,ja,"M",Za,Ha,"L",v,Ha,"M",Za,Wa,"L",v,Wa];Wa=["M",J+1,A,"L",J+1,Ia,"M",
Za,ja-1,"L",v,ja-1,"M",Za,Ha-1,"L",v,Ha-1,"M",Za,Wa-1,"L",v,Wa-1];ja=fa+qa+y;Ia=na(ja+Z)+sb;ja=na(ja)+sb;Ha=fa+ba;Za=Q-1;for(Z=0;Z<Q;Z+=1)ba=da[Z],P=(ba.maxvalue-jb)/fb,Ja=za*P+Aa,y=na(Ja)+sb,Z?(q.ratio+=F,q.color+=F,q.alpha+=F,ta.push("L",ja,y,Ia,y,"M",ja,y),Z===Za?(v=Qb,y=Ja+2):(v=qb,y=Ja)):(ta.push(ja,y,"L",Ia,y,"M",ja,y),v=Sa,y=Ja-2),q.ratio+=100*(P-Ka),q.color+=La(ba.code,z),q.alpha+=La(ba.alpha,100),Ka=P,ba.legendItem=B.text(g).attr({text:ba.label,x:Ha,y:y,"text-anchor":v,"vertical-align":qb}).rotate(Ea,
Ha,y).css(Qa),ba.legendSymbol=B.text(g).attr({text:ba.scaleLabel,x:Ia,y:Ja,"text-anchor":Sa,"vertical-align":qb}).css(Qa);Fa.xMin=wa.xMin=0;Fa.xMax=wa.xMax=0;Fa.yMin=wa.yMin=0;Fa.yMax=wa.yMax=za;Fa.x=wa.x=0;Fa.y=0;wa.y=za;da=Db+qa;Q=wb}else{Fa.tooltipPos[1]=wa.tooltipPos[1]=v+A;J=na(fa-tb)+.5;P=na(fa+tb)+.5;A=na(Aa-Db)+.5;Ia=na(Aa+za)+.5;Ob=na(fa-2)+.5;v=na(fa+2)+.5;Za=na(fa)+.5;Eb=na(Aa)+.5;Ja=Aa-Wa/2;Ha=na(Ja-Wa)+.5;Ja=na(Ja)+.5;Ea=fa-tb/2;ba=na(Ea+tb)+.5;Ea=na(Ea)+.5;Da/=2;tb=["M",J,A,"L",P,A,
P,Eb,v,Eb,Za,Ia,Ob,Eb,J,Eb,"Z","M",Ea,Ha,"L",Ea,Ja,"M",Za,Ha,"L",Za,Ja,"M",ba,Ha,"L",ba,Ja];Wa=["M",J,A+1,"L",P,A+1,"M",Ea-1,Ha,"L",Ea-1,Ja,"M",Za-1,Ha,"L",Za-1,Ja,"M",ba-1,Ha,"L",ba-1,Ja];y=Aa+za+y;Ea=na(y+Z)+sb;y=na(y)+sb;Ja=Aa+ja;Za=Q-1;for(Z=0;Z<Q;Z+=1)ba=da[Z],P=(ba.maxvalue-jb)/fb,Ia=qa*P+fa,ja=na(Ia)+sb,Z?(q.ratio+=F,q.color+=F,q.alpha+=F,ta.push("L",ja,y,ja,Ea,"M",ja,y),Z===Za?(v=Sa,ja=Ia+2):(v=qb,ja=Ia)):(ta.push(ja,y,"L",ja,Ea,"M",ja,y),v=Qb,ja=Ia-2),q.ratio+=100*(P-Ka),q.color+=La(ba.code,
z),q.alpha+=La(ba.alpha,100),Ka=P,ba.legendItem=B.text(g).attr({text:ba.label,x:ja,y:Ja,"text-anchor":v,"vertical-align":qb}).css(Qa),ba.legendSymbol=B.text(g).attr({text:ba.scaleLabel,x:Ia,y:Ea,"text-anchor":qb,"vertical-align":ea}).css(Qa);Fa.xMin=wa.xMin=0;Fa.xMax=wa.xMax=qa;Fa.yMin=wa.yMin=0;Fa.yMax=wa.yMax=0;Fa.y=wa.y=0;Fa.x=0;wa.x=qa;da=wb;Q=Db+za}I.colorBox=B.rect(Gb).attr({x:fa,y:Aa,width:qa,height:za,fill:ib(Xa),stroke:pb,strokeWidth:Mb});Ua&&(I.colorBoxEffect=B.rect(Gb).attr({x:fa,y:Aa,
width:Ca,height:Da,fill:ac,"stroke-width":0}));I.scale=B.path(g).attr({path:ta,stroke:Hb,"stroke-width":Nb});Fb=function(d,a,c,e,f){var p;gb?(p=a*fb/za+jb,e=0<a?e:e+a+.01):(p=d*fb/qa+jb,c=0<d?c:c+d+.01);d=Cb(p);f?(I.slider1.translate(c,e),I.slider1Effect.translate(c,e),I.slider1Tracker.toFront().translate(c,e).tooltip(d,null,null,!0),bb=p):(I.slider2.translate(c,e),I.slider2Effect.translate(c,e),I.slider2Tracker.toFront().translate(c,e).tooltip(d,null,null,!0),ab=p);hb&&(b=clearTimeout(b),b=setTimeout(function(){h.setScaleRange&&
h.setScaleRange(bb,ab)},100))};Ua=function(b,a){var c=0,e=c,f,p=this.isFirst,n=p?wa:Fa;if(gb){e=this._startY+a;0>=e&&(e=0);e>za&&(e=za);if(p?e>n.y:e<n.y)e=n.y;ra(e-this.y)>=(this.snapPX||0)&&(f=!0)}else{c=this._startX+b;0>=c&&(c=0);c>qa&&(c=qa);if(p?c>n.x:c<n.x)c=n.x;ra(c-this.x)>=(this.snapPX||0)&&(f=!0)}f&&(Fb(c,e,c-this.x,e-this.y,p),this.x=c,this.y=e)};Ca=function(){var b=this.isFirst;this._startX=this.x;this._startY=this.y;this._scaleStart=bb;this._scaleEnd=ab;u.raiseEvent("LegendPointerDragStart",
{pointerIndex:b?0:1,pointers:[{value:bb},{value:ab}],legendPointerHeight:Db,legendPointerWidth:wb},h.logic.chartInstance)};Da=function(){var b=this._scaleStart,a=this._scaleEnd;u.raiseEvent("LegendPointerDragStop",{pointerIndex:this.isFirst?0:1,pointers:[{value:bb},{value:ab}],legendPointerHeight:Db,legendPointerWidth:wb},h.logic.chartInstance);b===bb&&a===ab||u.raiseEvent("LegendRangeUpdated",{previousMinValue:b,previousMaxValue:a,minValue:bb,maxValue:ab},h.logic.chartInstance);delete this._scaleStart;
delete this._scaleEnd};Xa=Cb(jb);I.slider1=B.path(g).attr({path:tb,fill:Y,strokeWidth:1,stroke:Ma});I.slider1Effect=B.path(g).attr({path:Wa,fill:"none",strokeWidth:1,stroke:Rb});vb&&(J-=.5*(Na(30,da)-da),A-=.5*(Na(40,Q)-Q),da=Na(30,da),Q=Na(40,Q));I.slider1Tracker=B.rect(g).attr({ishot:!0,width:da,height:Q,x:J,y:A,fill:cc,stroke:"none"}).drag(Ua,Ca,Da,Fa,Fa,Fa).tooltip(Xa,null,null,!0).css(H);Xa=Cb(V);I.slider2=B.path(g).attr({path:tb,fill:Y,strokeWidth:1,stroke:Ma}).translate(wa.x,wa.y);I.slider2Effect=
B.path(g).attr({path:Wa,fill:"none",strokeWidth:1,stroke:Rb}).translate(wa.x,wa.y);I.slider2Tracker=B.rect(g).attr({ishot:!0,width:da,height:Q,x:J,y:A,fill:cc,stroke:"none"}).translate(wa.x,wa.y).css(H).drag(Ua,Ca,Da,wa,wa,wa).tooltip(Xa,null,null,!0)}}}]);
FusionCharts.register("module",["private","modules.renderer.js-powercharts",function(){function hb(b,d,a){var c=b.fcObj;A.hcLib.createChart(c,b.container,b.type,void 0,void 0,!1,!0);u.raiseEvent("chartUpdated",H({sourceEvent:a},d),c,[c.id])}function pb(b,d,a,c,e,f){var p=Pa.atan((d-c)/(b-a)),n=[];0>p&&(p=2*Pa.PI+p);if(c>d){if(a>=b&&p>Pa.PI||a<b&&p>Pa.PI)p-=Pa.PI}else if(a>=b&&p<Pa.PI&&0!==p||a<b&&p<Pa.PI)p+=Pa.PI;"undefined"==typeof f?(a=b+e*xa(p),e=d+e*$a(p)):(e=P(e)/2,f=P(f)/2,a=b+(e=b<a?e:-e),
e=d+e*Pa.tan(p),P(d-e)>P(f)&&(e=d+(f=d<c?f:-f),a=b+f/Pa.tan(p)));n.push("L",a,e,a+10*xa(p+.79),e+10*$a(p+.79),"M",a+10*xa(p-.79),e+10*$a(p-.79),"L",a,e);return n}function fb(b,d){var a;d._origAttr||(d._origAttr={});for(a in b)cc.test(a)||(d._origAttr[a]=b[a]);return d._origAttr}var A=this,u=A.hcLib,Z=u.Raphael,Qa=A.window,Ta=Qa.document,z=u.BLANKSTRING,ac=u.createTrendLine,gb=u.parseTooltext,h=u.pluck,B=u.getValidValue,g=u.pluckNumber,da=u.getFirstValue,Mb=u.getDefinedColor,F=u.parseUnsafeString,
ha=u.FC_CONFIG_STRING,H=u.extend2,ya=u.getDashStyle,ea=u.toRaphaelColor,qb=u.toPrecision,Sa=u.hasSVG,Qb=u.createContextMenu,bc=u.isIE,rb=u.regex.dropHash,La=u.HASHSTRING,Ma=function(b,d){var a;b||(b={});for(a in d)b[a]=d[a];return b},ib=u.each,vb=u.addEvent,na=u.removeEvent,Na=u.getTouchEvent,V=function(b){return void 0!==b&&null!==b},ra="rgba(192,192,192,"+(bc?.002:1E-6)+")",Y=u.TOUCH_THRESHOLD_PIXELS,Ga=u.CLICK_THRESHOLD_PIXELS,Cb=8===Qa.document.documentMode?"visible":"",cc=/^_/,Hb=u.BGRATIOSTRING,
Pa=Math,$a=Pa.sin,xa=Pa.cos,ma=Pa.round,J=Pa.min,Ya=Pa.max,P=Pa.abs,v=Pa.PI,jc=Pa.ceil,$b=Pa.floor,Ac=Pa.sqrt,Q=Pa.pow,ba=v/180,uc=2*v,ob=u.hasTouch,dc=ob?Y:Ga,ec=u.graphics.getColumnColor,I=u.getFirstColor,kc=u.setLineHeight,Ia=u.pluckFontSize,Ja=u.pluckColor,jb=u.getFirstAlpha,lc=u.graphics.getDarkColor,ja=u.graphics.getLightColor,y=u.graphics.convertColor,Ka=u.COLOR_TRANSPARENT,Ua=u.POSITION_CENTER,Ca=u.POSITION_TOP,Da=u.POSITION_BOTTOM,qa=u.POSITION_RIGHT,za=u.POSITION_LEFT,Xa=u.bindSelectionEvent,
q=u.chartAPI,fa=u.graphics.mapSymbolName,Ga=q.singleseries,Aa=u.COMMASTRING,Ha=u.ZEROSTRING,Ea=u.HUNDREDSTRING,$c=u.COMMASPACE,fc=u.getMouseCoordinate,Y=!/fusioncharts\.com$/i.test(Qa.location.hostname),ta=u.plotEventHandler,ad=A.xssEncode,Nb=u.SHAPE_RECT,sb=u.deltend,v=u.graphics,wb=v.parseColor,Db=v.getValidColor,tb=u.placeHorizontalAxis,Wa=u.placeVerticalAxis,Ob=u.stepYAxisNames,Za=u.adjustHorizontalCanvasMargin,Eb=u.adjustVerticalCanvasMargin,Rb=u.getDataParser,Fb={pageX:0,pageY:0},Fa,wa,bb,ab=
function(){this.data("move",!1);clearTimeout(this._longpressactive);delete this._longpressactive},Gb=u.createElement;u.eventList.chartupdated="FC_ChartUpdated";u.eventList.dataposted="FC_DataPosted";u.eventList.dataposterror="FC_DataPostError";u.eventList.datarestored="FC_DataRestored";A.addEventListener("rendered",function(b){b=b.sender;var d=b.__state,a=b.jsVars&&b.jsVars.instanceAPI;!d.listenersAdded&&a&&"function"===typeof a.getCollatedData&&(b.addEventListener(["chartupdated","dataupdated","rendered"],
function(a){delete a.sender.__state.hasStaleData}),d.listenersAdded=!0)});q("multilevelpie",{friendlyName:"Multi-level Pie Chart",standaloneInit:!0,defaultSeriesType:"multilevelpie",rendererId:"multiLevelPie",defaultPlotShadow:0,
series:function(){var b=this.dataObj,d=this.hcJSON,a=b.chart,c=d.series,e={},f=Boolean(g(a.usehovercolor,1)),p=y(h(a.hoverfillcolor,"FF5904"),g(a.hoverfillalpha,100)),n=parseInt(a.pieradius,10),t=0,l=!0;d.chart.plotBorderColor=0;d.chart.plotBackgroundColor=null;d.plotOptions.series.dataLabels.style=d.xAxis.labels.style;d.plotOptions.series.dataLabels.color=d.xAxis.labels.style.color;d.legend.enabled=!1;d.plotOptions.pie.allowPointSelect=!1;d.plotOptions.series.borderColor=y(h(a.plotbordercolor,a.piebordercolor,
"FFFFFF"),"0"!=a.showplotborder?h(a.plotborderalpha,a.pieborderalpha,100):0);d.plotOptions.series.borderWidth=g(a.pieborderthickness,a.plotborderthickness,1);d.plotOptions.pie.startingAngle=0;d.plotOptions.pie.size="100%";e.showLabels=g(a.showlabels,1);e.showValues=g(a.showvalues,0);e.showValuesInTooltip=g(a.showvaluesintooltip,a.showvalues,0);e.showPercentValues=g(a.showpercentvalues,a.showpercentagevalues,0);e.showPercentInTooltip=g(a.showpercentintooltip,0);e.toolTipSepChar=h(a.tooltipsepchar,
a.hovercapsepchar,$c);e.labelSepChar=h(a.labelsepchar,e.toolTipSepChar);e.tooltext=a.plottooltext;f&&(d.plotOptions.series.point.events={mouseOver:function(){for(var a=this,b=a.chart.plots,c,d;a;)a.graphic.attr({fill:p}),d=a.prevPointIndex,a=a.prevSeriesIndex,a=(c=b[a])&&c.items&&c.items[d]},mouseOut:function(){for(var a=this,b=a.chart.plots,c,d;a;)a.graphic.attr({fill:a.color}),d=a.prevPointIndex,a=a.prevSeriesIndex,a=(c=b[a])&&c.items&&c.items[d]}});d.chart.plotBorderWidth=0;b.category&&this.addMSPieCat(b.category,
0,0,100,h(a.plotfillalpha,a.piefillalpha,100),e,null);n=parseInt(a.pieradius,10);t=0;l=!0;n?(b=2*n/c.length,l=!1):b=parseInt(100/c.length,10);d.plotOptions.series.dataLabels.distance=0;d.plotOptions.series.dataLabels.placeLabelsInside=!0;for(d=0;d<c.length;d+=1)c[d].innerSize=t+(l?"%":""),c[d].size=(t+=b)+(l?"%":""),0===c[d].data[c[d].data.length-1].y&&c[d].data.pop()},spaceManager:function(b,d,a,c){var e=b[ha];this.titleSpaceManager(b,d,a-(e.marginLeftExtraSpace+e.marginRightExtraSpace+b.chart.marginRight+
b.chart.marginLeft),.4*(c-(e.marginBottomExtraSpace+e.marginTopExtraSpace+b.chart.marginBottom+b.chart.marginTop)))},addMSPieCat:function(b,d,a,c,e,f,p){var n=this.numberFormatter,t=this.colorManager,l,r,k=0,m=b.length-1,s,C,ga;l=this.hcJSON.series;var G=f.labelSepChar,x,w,Ba,D,q,u;void 0===this.colorCount&&(this.colorCount=0);0===d&&(this.colorCount=0);l[d]||(l[d]={data:[{toolText:!1,doNotSlice:!0,y:100,visible:!1,color:"rgba(255,255,255,0)"}]});l=l[d];(r=a-100+l.data[l.data.length-1].y)&&l.data.splice(l.data.length-
1,0,{toolText:!1,doNotSlice:!0,y:r,visible:!1,color:"rgba(255,255,255,0)"});l.data[l.data.length-1].y=100-c;for(C=0;C<=m;C+=1)s=b[C],s._userValue=n.getCleanValue(s.value,this.isValueAbs),s._value=g(s._userValue,1),k+=s._value;k=k||1;r=(c-a)/k;for(C=m;0<=C;C-=1)s=b[C],m=r*s._value,ga=F(h(s.label,s.name)),Ba=null!==s._userValue?n.dataLabels(s._userValue):z,D=n.percentValue(s._value/k*100),x=l.data.length-1,w=g(s.alpha,e),u=f.showLabels?ga:z,f.showValues&&(f.showPercentValues?u+=u!==z?G+D:D:void 0!==
Ba&&Ba!==z&&(u+=u!==z?G+Ba:Ba)),q=F(h(s.tooltext,s.hovertext,f.tooltext)),q===z?(q=ga,f.showValuesInTooltip&&(f.showPercentInTooltip?q+=q!==z?G+D:D:void 0!==Ba&&Ba!==z&&(q+=q!==z?G+Ba:Ba))):q=gb(q,[1,2,3,14],{percentValue:D,label:ga,formattedValue:Ba},s),l.data.splice(x,0,{prevPointIndex:p,prevSeriesIndex:d-1,displayValue:u,toolText:q,y:m,link:B(s.link),doNotSlice:!0,color:y(s.color||t.getPlotColor(),w),shadow:{opacity:.01*ma(50<w?w*w*w*1E-4:w*w*.01)}}),this.colorCount+=1,s.category&&this.addMSPieCat(s.category,
d+1,a,0===C?c:a+m,e,f,x),a+=m},isValueAbs:!0,creditLabel:Y},Ga);q("radar",{friendlyName:"Radar Chart",standaloneInit:!0,creditLabel:Y,defaultSeriesType:"radar",areaAlpha:50,spaceManager:function(b,d,a,c){b.chart.plotBorderWidth=0;b.chart.plotBackgroundColor=null;var e=b[ha],f=e.x,p=b.xAxis,n=b.yAxis[0],t=d.chart,n=g(t.labelpadding,t.labelxpadding,parseInt(n&&n.labels&&n.labels.style&&n.labels.style.fontSize||10,10));a-=e.marginLeftExtraSpace+e.marginRightExtraSpace+b.chart.marginRight+b.chart.marginLeft;
c-=e.marginBottomExtraSpace+e.marginTopExtraSpace+b.chart.marginBottom+b.chart.marginTop;e=this.colorManager;c-=this.titleSpaceManager(b,d,a,.4*c);p.min=g(f.min,0);p.max=g(f.max,f.catCount-1);p.gridLineColor=y(h(t.radarspikecolor,e.getColor("divLineColor")),g(t.radarspikealpha,t.radarinlinealpha,e.getColor("divLineAlpha")));p.gridLineWidth=g(t.radarspikethickness,1);p.showRadarBorder=g(t.showradarborder,1);p.radarBorderThickness=g(t.radarborderthickness,2);p.radarBorderColor=y(h(t.radarbordercolor,
e.getColor("divLineColor")),g(t.radarborderalpha,100));p.radarFillColor=y(h(t.radarfillcolor,e.getColor("altHGridColor")),g(t.radarfillalpha,e.getColor("altHGridAlpha")));b.legend.enabled&&(h(t.legendposition,Da).toLowerCase()!=qa?c-=this.placeLegendBlockBottom(b,d,a,c/2):a-=this.placeLegendBlockRight(b,d,a/3,c));d=g(t.radarradius);f=2*g(parseInt(p.labels.style.lineHeight,10),12);t=2*n;f=J(a-(100+t),c-(f+t));d=d||.5*f;a=J(.3*a,.3*c);d<a&&(d=a);b.chart.axisRadius=d;p.labels.labelPadding=n},anchorAlpha:"100",
showValues:0,isRadar:!0,rendererId:"radar"},q.msareabase);Ga={dragExtended:!0,defaultRestoreButtonVisible:1,spaceManager:function(b,d,a,c){var e=b[ha],f=b.chart,p=d.chart,n=e.outCanvasStyle,t=c-.3*(e.marginBottomExtraSpace+f.marginBottom+f.marginTop),l=0,r=0,e=this.smartLabel||e.smartLabel,k,m;f.formAction=B(p.formaction);f.formDataFormat=h(p.formdataformat,A.dataFormats.XML);f.formTarget=h(p.formtarget,"_self");f.formMethod=h(p.formmethod,"POST");f.submitFormAsAjax=g(p.submitformusingajax,1);f.showFormBtn=
g(p.showformbtn,1)&&f.formAction;f.formBtnTitle=h(p.formbtntitle,"Submit");f.formBtnBorderColor=h(p.formbtnbordercolor,"CBCBCB");f.formBtnBgColor=h(p.formbtnbgcolor,"FFFFFF");f.btnPadding=g(p.btnpadding,7);f.btnSpacing=g(p.btnspacing,5);f.formBtnStyle={fontSize:n.fontSize,fontFamily:n.fontFamily,fontWeight:"bold"};f.formBtnLabelFill=n.color;p.btntextcolor&&(f.formBtnLabelFill=p.btntextcolor.replace(rb,La));0<=(n=g(p.btnfontsize))&&(f.formBtnStyle.fontSize=n+"px");kc(f.formBtnStyle);f.showRestoreBtn=
g(p.showrestorebtn,this.defaultRestoreButtonVisible,1);f.showRestoreBtn&&(f.restoreBtnTitle=h(p.restorebtntitle,"Restore"),f.restoreBtnBorderColor=h(p.restorebtnbordercolor,f.formBtnBorderColor),f.restoreBtnBgColor=h(p.restorebtnbgcolor,f.formBtnBgColor),f.restoreBtnStyle={fontSize:f.formBtnStyle.fontSize,fontFamily:f.formBtnStyle.fontFamily,fontWeight:"bold"},f.restoreBtnLabelFill=f.formBtnLabelFill,p.restorebtntextcolor&&(f.restoreBtnLabelFill=p.restorebtntextcolor.replace(rb,La)),0<=(n=g(p.restorebtnfontsize))&&
(f.restoreBtnStyle.fontSize=n+"px"),kc(f.restoreBtnStyle));f.showLimitUpdateMenu=g(p.showlimitupdatemenu,1);f.showFormBtn&&(e.setStyle(f.formBtnStyle),k=e.getOriSize(f.formBtnTitle),l=k.height||0);f.showRestoreBtn&&(e.setStyle(f.restoreBtnStyle),m=e.getOriSize(f.restoreBtnTitle),l=Ya(m.height,l)||0);0<l&&(l+=f.btnPadding+4,l>t&&(f.btnPadding=Ya(f.btnPadding-l+t,0)/2,l=t));f.btnHeight=l;f.showFormBtn&&(r=k.width+l,f.formBtnWidth=g(p.formbtnwidth,r),f.formBtnWidth<k.width&&(f.formBtnWidth=r));f.showRestoreBtn&&
(r=m.width+l,f.restoreBtnWidth=g(p.restorebtnwidth,r),f.restoreBtnWidth<m.width&&(f.restoreBtnWidth=r));f.marginBottom+=l+f.btnPadding;f.spacingBottom+=l+f.btnPadding;(b.callbacks||(b.callbacks=[])).push(this.drawButtons);return this.placeVerticalXYSpaceManager.apply(this,arguments)},drawButtons:function(){var b=this.logic,d=this.paper,a=this.options.chart,c=a.btnSpacing,e=this.chartHeight-a.spacingBottom+a.btnPadding,f=this.chartWidth-a.spacingRight,p=this.layers.layerAboveDataset,n=0;a.showFormBtn&&
(this.submitBtn=d.button(f-a.formBtnWidth,e,a.formBtnTitle,void 0,{width:a.formBtnWidth,height:a.btnHeight,verticalPadding:1,horizontalPadding:15},p).labelcss(a.formBtnStyle).attr({fill:[I(a.formBtnBgColor),a.formBtnLabelFill],stroke:I(a.formBtnBorderColor)}).buttonclick(function(){b.chartInstance.submitData()}),n=a.formBtnWidth+c);a.showRestoreBtn&&(this.restoreBtn=d.button(f-a.restoreBtnWidth-n,e,a.restoreBtnTitle,void 0,{width:a.restoreBtnWidth,height:a.btnHeight,verticalPadding:1,horizontalPadding:15},
p).labelcss(a.restoreBtnStyle).attr({fill:[I(a.restoreBtnBgColor),a.restoreBtnLabelFill],stroke:I(a.restoreBtnBorderColor)}).buttonclick(function(){b.chartInstance.restoreData()}))},drawAxisUpdateUI:function(){var b=this,d=b.logic,a=b.elements,c=b.options,e=c.chart,f=c[ha],p=d.chartInstance,d=d.renderer,n=b.yAxis[0],g=n.axisData,l=n.poi,h=g.plotLines,k=b.container,m=c.chart.showRangeError,s=f.inCanvasStyle,c=b.toolbar||(b.toolbar=[]),n=b.menus||(b.menus=[]),C=Ma({outline:"none","-webkit-appearance":"none",
filter:"alpha(opacity=0)",position:"absolute",background:"transparent",border:"1px solid #cccccc",textAlign:"right",top:0,left:0,width:50,zIndex:20,opacity:0,borderRadius:0},s),ga,G;d&&!d.forExport&&(G=function(a,c,d){if(a===c+"")return null;c=d?p.setUpperLimit(a,!0):p.setLowerLimit(a,!0);!c&&m&&b.showMessage("Sorry! Not enough range gap to modify axis limit to "+(Number(a)||"0")+".<br />Please modify the data values to be within range.<br />&nbsp;<br />(click anywhere on the chart to close this message)",
!0);return c},ib(["max","min"],function(a){var c=l[a],d=c.label,f=h[c.index],c=d&&d.getBBox(),p,n,g,m,t,ga,q;if(c&&d){n=c.x+c.width-e.spacingLeft;g=e.marginLeft-n-(Sa?4:5);p=Gb("input",{type:"text",value:f.value,name:a||""},k,!0);Ma(C,{top:c.y+(Sa?-1:0)+"px",left:g+"px",width:n+"px"});for(m in C)p.style[m]=C[m];u.dem.listen(p,["focus","mouseup","blur","keyup"],[function(){var a={opacity:1,filter:"alpha(opacity=100)",color:s.color},b;this.value=f.value;for(b in a)this.style[b]=a[b];t=q=!0;d.hide()},
function(){var a=this;q&&(q=!1,ob||setTimeout(function(){a.select()},0))},function(){!0!==G(this.value,f.value,f.isMaxLabel)&&(this.style.opacity=0,this.style.filter="alpha(opacity=0)",d.show());bc&&Ta.getElementsByTagName("body")[0].focus&&Ta.getElementsByTagName("body")[0].focus();t=q=!1},function(a){var b=a.originalEvent.keyCode,c=this.value;13===b?(a=G(c,f.value,f.isMaxLabel),!1===a&&(this.style.color="#dd0000")):27===b&&(this.value=f.value,u.dem.fire(this,"blur",a))}]);p.setAttribute("isOverlay",
"true");Sa?(vb(b.container,"defaultprevented",ga=function(a){p.parentNode&&u.dem.fire(p,"blur",a)}),vb(b.container,"destroy",function(){na(b,"defaultprevented",ga);p.parentNode.removeChild(p)})):(vb(b.container,"mousedown",ga=function(a){a.srcElement!==p&&t&&u.dem.fire(p,"blur",a)}),vb(b.container,"destroy",function(){na(b.container,"mousedown",ga);p.parentNode.removeChild(p)}))}}),e.showLimitUpdateMenu&&(n.push(ga=Qb({chart:b,basicStyle:f.outCanvasStyle,items:[{text:"Increase Upper Limit",onclick:function(){p.setUpperLimit(g.max+
g.tickInterval,!0)}},{text:"Increase Lower Limit",onclick:function(){p.setLowerLimit(g.min+g.tickInterval,!0)}},{text:"Decrease Upper Limit",onclick:function(){p.setUpperLimit(g.max-g.tickInterval,!0)}},{text:"Decrease Lower Limit",onclick:function(){p.setLowerLimit(g.min-g.tickInterval,!0)}}],position:{x:e.spacingLeft,y:p.height-e.spacingBottom+(e.showFormBtn||e.showRestoreBtn?10:-15)}})),a.configureButton=c.add("configureIcon",function(a,b){return function(){ga.visible?ga.hide():ga.show({x:a,y:b+
1})}}(),{x:e.spacingLeft,y:p.height-e.spacingBottom+(e.showFormBtn||e.showRestoreBtn?10:-15),tooltip:"Change Y-Axis Limits"})))},getCollatedData:function(){var b=this.chartInstance,d=b.__state,a=b.jsVars,b=this.updatedDataObj||H({},b.getChartData(A.dataFormats.JSON)),c=a._reflowData,a=b.dataset,e=(c=c&&c.hcJSON&&c.hcJSON.series)&&c.length,f,p,n,g;if(void 0!==d.hasStaleData&&!d.hasStaleData&&this.updatedDataObj)return this.updatedDataObj;if(a&&c)for(;e--;)if(p=a[e]&&a[e].data,(f=(n=c[e]&&c[e].data)&&
n.length)&&p)for(;f--;)if(g=n[f])p[f].value=g.y;d.hasStaleData=!1;return this.updatedDataObj=b},eiMethods:{restoreData:function(){var b=this.jsVars,d=b.fcObj;b._reflowData={};delete b._reflowClean;A.hcLib.createChart(d,b.container,b.type,void 0,void 0,!1,!0);u.raiseEvent("dataRestored",{},d,[d.id]);return!0},submitData:function(){var b=this.jsVars,d=b.fcObj,a=d.__state,c=a._submitAjaxObj||(a._submitAjaxObj=new A.ajax),a=A.dataFormats.JSON,e=A.dataFormats.CSV,f=A.dataFormats.XML,b=b.instanceAPI,p=
b.hcJSON.chart,n=p.formAction,g=p.submitFormAsAjax,l,h,k,m,s;p.formDataFormat===a?(l=a,h=JSON.stringify(b.getCollatedData())):p.formDataFormat===e?(l=e,h=b.getCSVString&&b.getCSVString(),void 0===h&&(h=A.core.transcodeData(b.getCollatedData(),a,e))):(l=f,h=A.core.transcodeData(b.getCollatedData(),a,f));A.raiseEvent("beforeDataSubmit",{data:h},d,void 0,function(){g?(c.onError=function(a,b,c,e){u.raiseEvent("dataSubmitError",{xhrObject:b.xhr,url:e,statusText:a,httpStatus:b.xhr&&b.xhr.status?b.xhr.status:
-1,data:h},d,[d.id,a,b.xhr&&b.xhr.status])},c.onSuccess=function(a,b,e,f){u.raiseEvent("dataSubmitted",{xhrObject:c,response:a,url:f,data:h},d,[d.id,a])},k={},k["str"+l.toUpperCase()]=h,c.open&&c.abort(),c.post(n,k)):(m=Qa.document.createElement("span"),m.innerHTML='<form style="display:none" action="'+n+'" method="'+p.formMethod+'" target="'+p.formTarget+'"> <input type="hidden" name="strXML" value="'+ad(h)+'"><input type="hidden" name="dataFormat" value="'+l.toUpperCase()+'" /></form>',s=m.removeChild(m.firstChild),
Qa.document.body.appendChild(s),s.submit&&s.submit(),s.parentNode.removeChild(s),m=s=null)},function(){A.raiseEvent("dataSubmitCancelled",{data:h},d)})},getDataWithId:function(){for(var b=this.jsVars.instanceAPI.getCollatedData(),d=[[z]],a=b.dataset,b=b.categories&&b.categories[0]&&b.categories[0].category,c=a&&a.length||0,e=0,f,p,n,g,l,h;c--;)if(p=a[c])for(d[0][c+1]=p.id||p.seriesname,g=p.id||c+1,h=(p=p.data)&&p.length||0,l=0;l<h;l+=1){n=l+1;if(!d[n]){for(f=b&&b[l+e]||{};f.vline;)e+=1,f=b[l+e]||
{};f=f.label||f.name||z;d[n]=[f]}f=d[n];n=p[l].id||n+"_"+g;f[c+1]=[n,Number(p[l].value)]}return d},getData:function(b){var d=this.jsVars.instanceAPI.getCollatedData(),a=[[z]],c=d.dataset,e=d.categories&&d.categories[0]&&d.categories[0].category,f=c&&c.length||0,p=0,n,g,l;if(b)a=/^json$/ig.test(b)?d:A.core.transcodeData(d,"json",b);else for(;f--;)if(b=c[f])for(a[0][f+1]=c[f].seriesname,d=(b=c[f]&&c[f].data)&&b.length||0,l=0;l<d;l+=1){g=l+1;if(!a[g]){for(n=e&&e[l+p]||{};n.vline;)p+=1,n=e[l+p]||{};n=
n.label||n.name||z;a[g]=[n]}g=a[g];g[f+1]=Number(b[l].value)}return a},setYAxisLimits:function(b,d){var a=this.jsVars.instanceAPI,c=a.hcJSON,e=a.dataObj,f=e&&e.chart||{},c=c&&c.yAxis&&c.yAxis[0]||!1,p=!1;f.animation=!1;if(!c)return!1;void 0!==b&&b>a.highValue&&b!==c.max?(f.yaxismaxvalue=b,p=!0):(b=a.highValue>c.max?a.highValue:c.max,f.yaxismaxvalue=b);void 0!==d&&d<a.lowValue&&d!==c.min?(f.yaxisminvalue=d,p=!0):(d=a.lowValue<c.min?a.lowValue:c.min,f.yaxisminvalue=d);p&&a.updateChartWithData(e);return p},
getUpperLimit:function(){var b=this.jsVars.instanceAPI.hcJSON;return(b=b.yAxis&&b.yAxis[0])?b.max:void 0},setUpperLimit:function(b){return this.jsVars.fcObj.setYAxisLimits(b,void 0)},getLowerLimit:function(){var b=this.jsVars.instanceAPI.hcJSON;return(b=b.yAxis&&b.yAxis[0])?b.min:void 0},setLowerLimit:function(b){return this.jsVars.fcObj.setYAxisLimits(void 0,b)}},updateChartWithData:function(b){var d=this.chartInstance,a=d.jsVars,c=b&&b.chart;b=a._reflowData||(a._reflowData={});c={dataObj:{chart:{yaxisminvalue:g(c.yaxisminvalue),
yaxismaxvalue:g(c.yaxismaxvalue),animation:c.animation}}};H(b,c,!0);A.hcLib.createChart(d,a.container,a.type)},preSeriesAddition:function(){var b=this,d=b.hcJSON,a=b.dataObj.chart,c=d.chart;b.tooltipSepChar=d[ha].tooltipSepChar;c.allowAxisChange=g(a.allowaxischange,1);c.changeDivWithAxis=1;c.snapToDivOnly=g(a.snaptodivonly,0);c.snapToDiv=c.snapToDivOnly?1:g(a.snaptodiv,1);c.snapToDivRelaxation=g(a.snaptodivrelaxation,10);c.doNotSnap=g(a.donotsnap,0);c.doNotSnap&&(c.snapToDiv=c.snapToDivOnly=0);c.showRangeError=
g(a.showrangeerror,0);g(a.allowaxischange,1)&&(d.callbacks||(d.callbacks=[])).push(function(a){var c=this,d=arguments,n;vb(a.renderer.container,"destroy",function(){n&&(n=clearTimeout(n))});n=setTimeout(function(){b.drawAxisUpdateUI.apply(c,d);n=null},1)})},getTooltextCreator:function(){var b=arguments;return function(){var d=arguments,a=d.length,c,e,f;for(f=0;f<a;f+=1)void 0!==(e=d[f])&&void 0!==(c=b[f])&&(b[f]="object"===typeof c?H(c,e):e);return gb.apply(this,b)}},getPointStub:function(b,d,a,c,
e,f,p){var n=this.isDual,t=this.dataObj.chart;c=c[ha];var l=null===d?d:c.numberFormatter.dataLabels(d,1===p?!0:!1),r=B(F(h(b.tooltext,e.plottooltext,c.tooltext))),k=c.tooltipSepChar,m=e._sourceDataset;d=g(b.allowdrag,m.allowdrag,1);var m=g(b.allownegativedrag,m.allownegativedrag,e.allownegativedrag,1),s,C,ga,G,x=0,w=0,Ba,D;c.showTooltip?void 0!==r?(D=this.getTooltextCreator(r,[1,2,3,4,5,6,7],{yaxisName:F(n?p?t.syaxisname:t.pyaxisname:t.yaxisname),xaxisName:F(t.xaxisname),formattedValue:l,label:a},
b,t,e),e=D(),e===r&&(D=void 0,x=1)):null===l?e=!1:(c.seriesNameInToolTip&&(G=da(e&&e.seriesname)),e=G?G+k:z,Ba=e+=a?a+k:z,c.showPercentInToolTip?s=!0:e+=l):e=!1;g(b.showvalue,f)?void 0!==B(b.displayvalue)?(ga=F(b.displayvalue),w=1):c.showPercentValues?C=!0:ga=l:ga=z;b=h(b.link);return{displayValue:ga,categoryLabel:a,toolText:e,link:b,showPercentValues:C,showPercentInToolTip:s,allowDrag:d,allowNegDrag:m,_toolTextStr:Ba,_isUserValue:w,_isUserTooltip:x,_getTooltext:D}}};q("renderer.radar",{createRadarAxis:function(){var b=this.options,d=this.canvasLeft+this.canvasWidth/2,a=this.canvasTop+this.canvasHeight/2,c=b.xAxis,e=b.yAxis instanceof Array?b.yAxis[0]:b.yAxis,f=c.max-c.min+1,g=P(e.max-e.min),b=V(b.chart.axisRadius)?b.chart.axisRadius:J(d,a),h,t=Pa.PI/2,l={};0>b&&(b=J(d,a));h=2*Pa.PI/f;l.yTrans=b/g;l.xTrans=h;
l.yRange=g;l.startAngle=t;l.yMin=e.min;l.centerX=d;l.centerY=a;l.radius=b;l.categories=[];l.catLength=f;l.yAxis=e;l.xAxis=c;return this.radarAxis=l},drawRadarAxis:function(){var b=this.radarAxis,d=b.catLength,a=b.xAxis,c=b.yAxis,e=c.min,f=c.plotLines,p=f.length,n=a.plotLines,t=b.xTrans,l=b.yTrans,r=b.radius,k=b.startAngle,m=this.canvasLeft+this.canvasWidth/2,s=this.canvasTop+this.canvasHeight/2,q=this.paper,u=this.layers,v=u.dataset=u.dataset||q.group("orphan-dataset").trackTooltip(!0),x=u.layerBelowDataset=
u.layerBelowDataset||q.group("axisbottom").trackTooltip(!0),w=u.layerAboveDataset=u.layerAboveDataset||q.group("axistop").trackTooltip(!0),y=u.axisLines=u.axisLines||q.group("axis-lines",x),D=u.axisLabels=u.axisLabels||q.group("axis-labels",x),z=c.labels,c=2*Pa.PI,B=Pa.PI/2,E=Pa.PI+B,A=!1!==(this.options.tooltip||{}).enabled,F=["right","center","left"],K=a.labels,H=g(.9*parseInt(K.style&&K.style.fontSize,10),9)/2,K=r+K.labelPadding,J=[],I=["M"],M=[],V=this.logic.smartLabel,L,W,O,N,Q,X;x.insertBefore(v);
w.insertAfter(v);b.divline=[];for(Q=0;Q<p;Q+=1){M[Q]=["M"];x=!0;v=d;L=f[Q];X=L.tooltext;for(W=L.value;v--;)z=P(W-e)*l,O=m+z*xa(-(k+v*t)),N=s+z*$a(-(k+v*t)),M[Q].splice(M[Q].length,0,O,N),x&&(M[Q].push("L"),x=!1),0===v&&L.label&&(z=L.label,((w=z.text)||0===w)&&q.text(D).attr({text:w,x:O,y:N,"text-anchor":"right"===z.textAlign?"end":"left"===z.textAlign?"start":"middle","vertical-align":z.verticalAlign,rotation:z.rotation}).css(z.style));M[Q].push("Z");b.divline[Q]=q.path(M[Q],y).attr({stroke:L.color,
"stroke-width":L.width});A&&X&&q.path({stroke:ra,"stroke-width":Ya(L.width,dc),ishot:!0,path:M[Q]},u.tracker).toBack().tooltip(X)}x=!0;for(v=n.length;v--;)if(L=n[v],W=L.value,A=k+W*t,d=A%c,O=m+r*xa(-A),N=s+r*$a(-A),J.splice(J.length,0,"M",m,s,"L",O,N),I.splice(I.length,0,O,N),x&&(I.push("L"),x=!1),L.label&&(z=L.label,(w=z.text)||0===w)){f=d>B&&d<E?0:d==B||d==E?1:2;d=z.style;e={fontFamily:d.fontFamily,fontSize:d.fontSize,lineHeight:d.lineHeight,fontWeight:d.fontWeight,fontStyle:d.fontStyle};V.setStyle(e);
f="right"===F[f]?"end":"left"===F[f]?"start":"middle";p=m+K*xa(-A);l=s+K*$a(-A);L=parseInt(e.lineHeight,10);M=z.verticalAlign;switch(f){case "start":u=this.canvasLeft+this.canvasWidth-p;A=n[v-1];A=k+A.value*t;A=s+K*$a(-A)+H*$a(-A)+H;M=n[v+1===n.length?0:v+1];M=k+M.value*t;M=s+K*$a(-M)+H*$a(-M)+H;L=.5*(A-l)+.5*(l-M);M="middle";break;case "end":u=p-this.canvasLeft;A=n[v+1];A=k+A.value*t;A=s+K*$a(-A)+H*$a(-A)+H;M=n[v-1];M=k+M.value*t;M=s+K*$a(-M)+H*$a(-M)+H;L=.5*(A-l)+.5*(l-M);M="middle";break;default:u=
this.canvasWidth,l+=H*$a(-A)+H}w=V.getSmartText(w,u,L).text;q.text(D).attr({text:w,x:p,y:l,"text-anchor":f,"vertical-align":M,rotation:z.rotation,"text-bound":[d.backgroundColor,d.borderColor,d.borderThickness,d.borderPadding,d.borderRadius,d.borderDash]}).css(e)}I.push("Z");b.spikeGraph=q.path(J,y).attr({stroke:a.gridLineColor,"stroke-width":h(a.gridLineWidth,1)});a.showRadarBorder&&(b.borderGraph=q.path(I,y).toBack().attr({stroke:a.radarBorderColor,"stroke-width":h(a.radarBorderThickness,2),fill:a.radarFillColor}))},
drawPlotRadar:function(b,d){var a=this,c=a.paper,e=a.layers,f=e.dataset=e.dataset||c.group("orphan-dataset"),h=e.datalabels=e.datalabels||c.group("datalabels").insertAfter(f),n=e.tracker=e.tracker||c.group("hot").insertAfter(f),t=a.options,l=t.chart.anchorTrackingRadius,r=t.plotOptions.series,k=[],m=b.items||{},s=b.graphics=b.graphics||[],e=a.radarAxis,u=d.data||[],v=u.length,y,x,w=!1===d.visible,z=w?"hidden":"visible",r=isNaN(+r.animation)&&r.animation.duration||1E3*r.animation,D,A,B=!1!==(t.tooltip||
{}).enabled,E,H,F,K,I=f.radarGroup=f.radarGroup||c.group("connectors",f),J=f.marker=f.marker||c.group("anchors",f),Q=n.trackers=n.trackers||c.group("trackers",n),M=a.chartWidth,V=a.chartHeight,f=[],L,W,O,N,Y,X,R,ba,U,Z,da,fa,ha,aa,ja,ma,ka=(t=t.cursor)&&{cursor:t},na=q["renderer.cartesian"],oa,pa,qa;void 0===a.radarAxis&&(e=a.radarAxis=a.createRadarAxis(d),a.drawRadarAxis(d));D=e.yTrans;E=e.yMin;H=e.startAngle;A=e.xTrans;y=e.centerX;x=e.centerY;1<=v&&(X=[],ib(u,function(e,f){U=null;f?2>f&&X.push("L"):
X.push("M");m[f]=oa=k[f]={chart:a,index:f,value:e.y};if(null===e.y)X.push(y,x);else{R=Z=null;da=e.link;fa=e.tooltext||e.toolText;F=y+D*P(e.y-E)*xa(-(H+f*A));K=x+D*P(e.y-E)*$a(-(H+f*A));if(R=e.anchorElem)Y=g(R.attr("r"),W.radius),R.attr({x:F,y:K,r:Y});else if(W=e.marker,qa={index:f,link:da,value:e.y,displayValue:e.displayValue,categoryLabel:e.categoryLabel,toolText:fa,id:b.userID,datasetIndex:b.index,datasetName:b.name,visible:b.visible},W&&W.enabled)if(O=W.radius,ha=W.shadow,L=W.symbol.split("_"),
N="spoke"===L[0]?1:0,ja=ma={},aa=e.rolloverProperties,W.imageUrl)pa=new Qa.Image,pa.onload=function(e,f,g,h,k,l,p,m){return function(){var r=g.imageUrl,q=g.imageScale,t=g.imageAlpha,u=p.imageHoverAlpha,v=p.imageHoverScale,w=this.width*q*.01,x=this.width*v*.01;ja={x:e-this.width*q*.005,y:f-this.height*q*.005,width:w,height:this.height*q*.01,alpha:t};ma={x:e-this.width*v*.005,y:f-this.height*v*.005,width:x,height:this.height*v*.01,alpha:u};u=x>w?ma:ja;(h.graphic=R=c.image(r,J).attr(ja).css({opacity:.01*
t}).data("alwaysInvisible",0===q).data("setRolloverProperties",p).data("setRolloverAttr",ma).data("setRolloutAttr",ja).data("anchorRadius",q).data("anchorHoverRadius",v))&&s.push(R);if(da||B||p)Z=h.tracker=c.rect(n).attr(u).attr({cursor:da?"pointer":"",stroke:ra,"stroke-width":g.lineWidth,fill:ra,ishot:!0,visibility:z}).data("eventArgs",k).click(function(b){ta.call(this,a,b)}).hover(function(b){return function(c){na.hoverPlotAnchor(this,c,"DataPlotRollOver",b,a)}}(h),function(b){return function(c){na.hoverPlotAnchor(this,
c,"DataPlotRollOut",b,a)}}(h)).tooltip(l);(U=h.dataLabel=na.drawPlotLineLabel.call(a,b,d,m,e,f))&&s.push(U)}}(F,K,W,oa,qa,fa,aa,f),pa.onerror=function(c,e,f,g,h,k,l,p){return function(){(U=g.dataLabel=na.drawPlotLineLabel.call(a,b,d,p,c,e))&&s.push(U)}}(F,K,W,oa,qa,fa,aa,f),pa.src=W.imageUrl;else{aa&&(ja={polypath:[L[1]||2,F,K,O,W.startAngle,N],fill:ea(W.fillColor),"stroke-width":W.lineWidth,stroke:ea(W.lineColor)},ma={polypath:[aa.sides||2,F,K,aa.radius,aa.startAngle,aa.dip],fill:ea(aa.fillColor),
"stroke-width":aa.lineWidth,stroke:ea(aa.lineColor)});R=oa.graphic=c.polypath(L[1]||2,F,K,O,W.startAngle,null,J).attr({fill:ea(W.fillColor),"stroke-width":W.lineWidth,stroke:ea(W.lineColor),cursor:da?"pointer":"","stroke-linecap":"round","stroke-linejoin":"round",ishot:!0,visibility:0===O?"hidden":z}).data("alwaysInvisible",0===O).data("setRolloverProperties",aa).data("setRolloverAttr",ma).data("setRolloutAttr",ja).data("anchorRadius",O).data("anchorHoverRadius",aa&&aa.radius).shadow(ha);e.anchorElem=
R;if(da||B||aa)(Z=e.trackerElem)?(Y=g(Z.attr("r"),W.radius+1),Z.attr({x:F,y:K,r:Y})):(L||(L=W.symbol.split("_")),O=Ya(O,l,aa&&aa.radius||0),Z=c.circle(F,K,O,Q).attr({cursor:e.link?"pointer":"",stroke:ra,"stroke-width":1,fill:ra,ishot:!0,visibility:z}).css(ka)),e.trackerElem=Z;(Z=Z||R)&&Z.data("eventArgs",qa).click(function(b){ta.call(this,a,b)}).hover(function(b){return function(c){na.hoverPlotAnchor(this,c,"DataPlotRollOver",b,a)}}(oa),function(b){return function(c){na.hoverPlotAnchor(this,c,"DataPlotRollOut",
b,a)}}(oa)).tooltip(fa)}X.push(F,K);oa.dataLabel=U;oa.tracker=Z;W&&W.imageUrl||(U=na.drawPlotLineLabel.call(a,b,d,f,F,K));R&&s.push(R);U&&s.push(U);Z&&s.push(Z)}}),X.push("Z"),f=f.concat(X));f&&0<f.length&&(ba=b.graphic=c.path(f,I).attr({stroke:ea(d.lineColor.FCcolor),fill:ea(d.fillColor.FCcolor),"stroke-width":d.lineWidth,visibility:z}));r&&(a.animationCompleteQueue.push({fn:function(){J.show();h.attr({transform:"...t"+-M+","+-V})},scope:a}),J.hide(),h.attr({transform:"...t"+M+","+V}),I.scale(.01,
.01,y,x).animate({transform:"s1,1"},r,"normal",a.getAnimationCompleteFn()));ba&&s.push(ba);b.visible=!w},legendClick:function(b){q["renderer.cartesian"].legendClick.call(this,b)},getEventArgs:function(b){return q["renderer.cartesian"].getEventArgs.call(this,b)}},q["renderer.root"]);q("renderer.multiLevelPie",{drawPlotMultilevelpie:function(b,d){var a=this,c=b.items,e=b.data,f=a.options,h=f.plotOptions.series,n=a.layers,q=h.animation,l=h.dataLabels.style,r=h.shadow,k=g(b.moveDuration,q.duration,0),
m=h.borderWidth,s=h.borderColor,u=a.paper,f=(f=f.tooltip||{},!1!==f.enabled),v=(d.startAngle||0)%uc,y=uc/(d.valueTotal||100),x=a.canvasLeft+.5*a.canvasWidth,w=a.canvasTop+.5*a.canvasHeight,z,D,A,B,E,F,H,K,I,P,Q;D=J(a.canvasWidth,a.canvasHeight);var M,V=n.dataset,L=q.mainItem,W=q.animObj,O=function(b){ta.call(this.graphic,a,b,"DataPlotRollOver");h.point.events.mouseOver.call(this)},N=function(b){ta.call(this.graphic,a,b,"DataPlotRollOut");h.point.events.mouseOut.call(this)},Y=function(b){ta.call(this.graphic,
a,b,"DataPlotRollOver");h.point.events.mouseOver.call(this)},X=function(b){ta.call(this.graphic,a,b,"DataPlotRollOut");h.point.events.mouseOut.call(this)},R=function(){a.placeDataLabels(!1,c,b,d)};z=.5*(/%$/.test(d.size)?D*parseInt(d.size,10)/100:d.size);D=.5*(/%$/.test(d.innerSize)?D*parseInt(d.innerSize,10)/100:d.innerSize);d.metrics=[x,w,2*z,2*D];e&&e.length||(e=[]);M=n.datalabels||(n.datalabels=u.group("datalabels").insertAfter(V));P=I=v;for(Q=e.length;Q--;)B=e[Q],E=B.y,F=B.displayValue,n=B.toolText,
H=!!B.link,null!==E&&void 0!==E&&(P=I,I-=E*y,K=.5*(I+P),(A=c[Q])||(A=c[Q]={chart:a,link:B.link,value:E,angle:K,color:B.color,prevPointIndex:B.prevPointIndex,prevSeriesIndex:B.prevSeriesIndex,labelText:F,graphic:u.ringpath(x,w,z,D,v,v,V).attr({"stroke-width":B.borderWidth||m,stroke:B.borderColor||s,fill:ea(B.color),"stroke-dasharray":B.dashStyle,ishot:H,cursor:H?"pointer":""}).shadow(r&&!!B.shadow)},B={link:B.link,label:B.displayValue,toolText:B.toolText},A.graphic.mouseover(O,A),A.graphic.mouseout(N,
A),A.graphic.mouseup(a.plotMouseUp),A.graphic.data("plotItem",A),A.graphic.data("eventArgs",B),f&&A.graphic.tooltip(n),void 0!==F&&(A.dataLabel=u.text(M).css(l).attr({text:F,fill:l.color||"#000000",visibility:"hidden",ishot:H,cursor:H?"pointer":""}).mouseover(Y,A).mouseout(X,A).mouseup(a.plotMouseUp).data("plotItem",A).data("eventArgs",B),f&&A.dataLabel.tooltip(n))),k?L?A.graphic.animateWith(L,W,{ringpath:[x,w,z,D,I,P]},k,"easeIn",!Q&&R):(W=q.animObj=Z.animation({ringpath:[x,w,z,D,I,P]},k,"easeIn",
!Q&&R),L=q.mainItem=A.graphic.animate(W)):(A.graphic.attr({ringpath:[x,w,z,D,I,P]}),!Q&&R&&R()))},plotMouseUp:function(b){var d=this.data("plotItem");ta.call(this,d.chart,b)}},q["renderer.piebase"]);Z.addSymbol({resizeIcon:function(b,d,a){var c=g(a,15)/3,e=[];0>c&&(c=-c,a=-a,b+=a-c/2,d+=a-c/2);for(a=3;0<a;a-=1)e.push("M",b-c*a,d-3,"L",b-3,d-c*a);return e},closeIcon:function(b,d,a){var c=1.3*a,e=43*ba,f=48*ba,g=b+c*xa(e),e=d+c*$a(e),h=b+c*xa(f),q=d+c*$a(f),f=.71*(a-2);a=.71*(a-2);c=["A",c,c,0,1,0,
h,q];g=["M",g,e];g=g.concat(c);return g=g.concat(["M",b+f,d-a,"L",b-f,d+a,"M",b-f,d-a,"L",b+f,d+a])},configureIcon:function(b,d,a){a-=1;var c=.71*a,e=.71*(a+2),f=b-a,g=d-a,h=b+a;a=d+a;var q=b+.5,l=d+.5,r=b-.5,k=d-.5,m=f-2,s=g-2,u=h+2,v=a+2,y=b+c,x=d+c,w=b-c,c=d-c,z=b+e,A=d+e;b-=e;d-=e;return["M",f,l,"L",m,l,m,k,f,k,w-.25,c+.25,b-.25,d+.25,b+.25,d-.25,w+.25,c-.25,r,g,r,s,q,s,q,g,y-.25,c-.25,z-.25,d-.25,z+.25,d+.25,y+.25,c+.25,h,k,u,k,u,l,h,l,y+.25,x-.25,z+.25,A-.25,z-.25,A+.25,y-.25,x+.25,q,a,q,v,
r,v,r,a,w+.25,x+.25,b+.25,A+.25,b-.25,A-.25,w-.25,x-.25,"Z"]},axisIcon:function(b,d,a){a-=1;var c=.33*a,e=a/2,f=b-a,g=d-a,h=b+e;a=d+a;b-=e;e=d+c;d-=c;return["M",f,g,"L",h,g,h,a,f,a,"M",b,e,"L",h,e,"M",b,d,"L",h,d]},loggerIcon:function(b,d,a){a-=1;b-=a;d-=a;var c=b+2*a,e=b+2,f=c-2,g=d+2;a=g+a;var h=a+2;return["M",b,d,"L",c,d,c,g,f,g,f,a,c,a,c,h,b,h,b,a,e,a,e,g,b,g,b,d]}})},[3,2,1,"release"]]);
/*
 Carbon Theme v0.0.3
 FusionCharts JavaScript Library

 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>
*/
FusionCharts.register("theme",{name:"carbon",theme:{base:{chart:{paletteColors:"#444444,#666666,#888888,#aaaaaa,#cccccc,#555555,#777777,#999999,#bbbbbb,#dddddd",labelDisplay:"auto",baseFontColor:"#333333",baseFont:"Helvetica Neue,Arial",captionFontSize:"14",subcaptionFontSize:"14",subcaptionFontBold:"0",showBorder:"0",bgColor:"#ffffff",showShadow:"0",canvasBgColor:"#ffffff",showCanvasBorder:"0",useplotgradientcolor:"0",useRoundEdges:"0",showPlotBorder:"0",showAlternateHGridColor:"0",showAlternateVGridColor:"0",
toolTipColor:"#ffffff",toolTipBorderThickness:"0",toolTipBgColor:"#000000",toolTipBgAlpha:"80",toolTipBorderRadius:"2",toolTipPadding:"5",legendBgAlpha:"0",legendBorderAlpha:"0",legendShadow:"0",legendItemFontSize:"10",legendItemFontColor:"#666666",legendCaptionFontSize:"9",divlineAlpha:"100",divlineColor:"#999999",divlineThickness:"1",divLineIsDashed:"1",divLineDashLen:"1",divLineGapLen:"1",scrollheight:"10",flatScrollBars:"1",scrollShowButtons:"0",scrollColor:"#cccccc",showHoverEffect:"1",valueFontSize:"10",
showXAxisLine:"1",xAxisLineThickness:"1",xAxisLineColor:"#999999"},dataset:[{}],trendlines:[{}]},geo:{chart:{showLabels:"0",fillColor:"#444444",showBorder:"1",borderColor:"#eeeeee",borderThickness:"1",borderAlpha:"50",entityFillhoverColor:"#444444",entityFillhoverAlpha:"80",connectorColor:"#cccccc",connectorThickness:"1.5",markerFillHoverAlpha:"90"}},pie2d:{chart:{placeValuesInside:"0",use3dlighting:"0",valueFontColor:"#333333",captionPadding:"15"},data:function(c,a,b){a=window.Math;return{alpha:100-
(50<b?a.round(100/a.ceil(b/10)):20)*a.floor(c/10)}}},doughnut2d:{chart:{placeValuesInside:"0",use3dlighting:"0",valueFontColor:"#333333",centerLabelFontSize:"12",centerLabelBold:"1",centerLabelFontColor:"#333333",captionPadding:"15"},data:function(c,a,b){a=window.Math;return{alpha:100-(50<b?a.round(100/a.ceil(b/10)):20)*a.floor(c/10)}}},line:{chart:{lineThickness:"2"}},spline:{chart:{lineThickness:"2"}},column2d:{chart:{paletteColors:"#444444",valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},
bar2d:{chart:{paletteColors:"#444444",valueFontColor:"#ffffff",placeValuesInside:"1"}},column3d:{chart:{paletteColors:"#444444",valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},bar3d:{chart:{paletteColors:"#444444",valueFontColor:"#ffffff",placeValuesInside:"1"}},area2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},splinearea:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},mscolumn2d:{chart:{valueFontColor:"#ffffff",
placeValuesInside:"1",rotateValues:"1"}},mscolumn3d:{chart:{showValues:"0"}},msstackedcolumn2dlinedy:{chart:{showValues:"0"}},stackedcolumn2d:{chart:{showValues:"0"}},stackedarea2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},stackedbar2d:{chart:{showValues:"0"}},msstackedcolumn2d:{chart:{showValues:"0"}},mscombi3d:{chart:{showValues:"0"}},mscombi2d:{chart:{showValues:"0"}},mscolumn3dlinedy:{chart:{showValues:"0"}},stackedcolumn3dline:{chart:{showValues:"0"}},
stackedcolumn2dline:{chart:{showValues:"0"}},scrollstackedcolumn2d:{chart:{valueFontColor:"#ffffff"}},scrollcombi2d:{chart:{showValues:"0"}},scrollcombidy2d:{chart:{showValues:"0"}},logstackedcolumn2d:{chart:{showValues:"0"}},logmsline:{chart:{showValues:"0"}},logmscolumn2d:{chart:{showValues:"0"}},msstackedcombidy2d:{chart:{showValues:"0"}},scrollcolumn2d:{chart:{valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},pareto2d:{chart:{paletteColors:"#444444",showValues:"0"}},pareto3d:{chart:{paletteColors:"#444444",
showValues:"0"}},angulargauge:{chart:{pivotFillColor:"#ffffff",pivotRadius:"4",gaugeFillMix:"{light+0}",showTickValues:"1",majorTMHeight:"12",majorTMThickness:"2",majorTMColor:"#000000",minorTMNumber:"0",tickValueDistance:"10",valueFontSize:"24",valueFontBold:"1",gaugeInnerRadius:"50%",showHoverEffect:"0"},dials:{dial:[{baseWidth:"10",rearExtension:"7",bgColor:"#000000",bgAlpha:"100",borderColor:"#666666",bgHoverAlpha:"20"}]}},hlineargauge:{chart:{pointerFillColor:"#ffffff",gaugeFillMix:"{light+0}",
showTickValues:"1",majorTMHeight:"3",majorTMColor:"#000000",minorTMNumber:"0",valueFontSize:"18",valueFontBold:"1"},pointers:{pointer:[{}]}},bubble:{chart:{use3dlighting:"0",showplotborder:"0",showYAxisLine:"1",yAxisLineThickness:"1",yAxisLineColor:"#999999",showAlternateHGridColor:"0",showAlternateVGridColor:"0"},categories:[{verticalLineDashed:"1",verticalLineDashLen:"1",verticalLineDashGap:"1",verticalLineThickness:"1",verticalLineColor:"#000000",category:[{}]}],vtrendlines:[{line:[{alpha:"0"}]}]},
scatter:{chart:{use3dlighting:"0",showYAxisLine:"1",yAxisLineThickness:"1",yAxisLineColor:"#999999",showAlternateHGridColor:"0",showAlternateVGridColor:"0"},categories:[{verticalLineDashed:"1",verticalLineDashLen:"1",verticalLineDashGap:"1",verticalLineThickness:"1",verticalLineColor:"#000000",category:[{}]}],vtrendlines:[{line:[{alpha:"0"}]}]},boxandwhisker2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},thermometer:{chart:{gaugeFillColor:"#444444"}},
cylinder:{chart:{cylFillColor:"#444444"}},sparkline:{chart:{linecolor:"#444444"}},sparkcolumn:{chart:{plotFillColor:"#444444"}},sparkwinloss:{chart:{winColor:"#444444",lossColor:"#666666",drawColor:"#888888",scoreLessColor:"#aaaaaa"}},hbullet:{chart:{plotFillColor:"#444444",targetColor:"#666666"}},vbullet:{chart:{plotFillColor:"#444444",targetColor:"#666666"}}}});
/*
 Fint Theme v0.0.3
 FusionCharts JavaScript Library

 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>
*/
FusionCharts.register("theme",{name:"fint",theme:{base:{chart:{paletteColors:"#0075c2,#1aaf5d,#f2c500,#f45b00,#8e0000,#0e948c,#8cbb2c,#f3de00,#c02d00,#5b0101",labelDisplay:"auto",baseFontColor:"#333333",baseFont:"Helvetica Neue,Arial",captionFontSize:"14",subcaptionFontSize:"14",subcaptionFontBold:"0",showBorder:"0",bgColor:"#ffffff",showShadow:"0",canvasBgColor:"#ffffff",showCanvasBorder:"0",useplotgradientcolor:"0",useRoundEdges:"0",showPlotBorder:"0",showAlternateHGridColor:"0",showAlternateVGridColor:"0",
toolTipColor:"#ffffff",toolTipBorderThickness:"0",toolTipBgColor:"#000000",toolTipBgAlpha:"80",toolTipBorderRadius:"2",toolTipPadding:"5",legendBgAlpha:"0",legendBorderAlpha:"0",legendShadow:"0",legendItemFontSize:"10",legendItemFontColor:"#666666",legendCaptionFontSize:"9",divlineAlpha:"100",divlineColor:"#999999",divlineThickness:"1",divLineIsDashed:"1",divLineDashLen:"1",divLineGapLen:"1",scrollheight:"10",flatScrollBars:"1",scrollShowButtons:"0",scrollColor:"#cccccc",showHoverEffect:"1",valueFontSize:"10",
showXAxisLine:"1",xAxisLineThickness:"1",xAxisLineColor:"#999999"},dataset:[{}],trendlines:[{}]},geo:{chart:{showLabels:"0",fillColor:"#0075c2",showBorder:"1",borderColor:"#eeeeee",borderThickness:"1",borderAlpha:"50",entityFillhoverColor:"#0075c2",entityFillhoverAlpha:"80",connectorColor:"#cccccc",connectorThickness:"1.5",markerFillHoverAlpha:"90"}},pie2d:{chart:{placeValuesInside:"0",use3dlighting:"0",valueFontColor:"#333333",captionPadding:"15"},data:function(c,a,b){a=window.Math;return{alpha:100-
(50<b?a.round(100/a.ceil(b/10)):20)*a.floor(c/10)}}},doughnut2d:{chart:{placeValuesInside:"0",use3dlighting:"0",valueFontColor:"#333333",centerLabelFontSize:"12",centerLabelBold:"1",centerLabelFontColor:"#333333",captionPadding:"15"},data:function(c,a,b){a=window.Math;return{alpha:100-(50<b?a.round(100/a.ceil(b/10)):20)*a.floor(c/10)}}},line:{chart:{lineThickness:"2"}},spline:{chart:{lineThickness:"2"}},column2d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},
bar2d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1"}},column3d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},bar3d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1"}},area2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},splinearea:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},mscolumn2d:{chart:{valueFontColor:"#ffffff",
placeValuesInside:"1",rotateValues:"1"}},mscolumn3d:{chart:{showValues:"0"}},msstackedcolumn2dlinedy:{chart:{showValues:"0"}},stackedcolumn2d:{chart:{showValues:"0"}},stackedarea2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},stackedbar2d:{chart:{showValues:"0"}},msstackedcolumn2d:{chart:{showValues:"0"}},mscombi3d:{chart:{showValues:"0"}},mscombi2d:{chart:{showValues:"0"}},mscolumn3dlinedy:{chart:{showValues:"0"}},stackedcolumn3dline:{chart:{showValues:"0"}},
stackedcolumn2dline:{chart:{showValues:"0"}},scrollstackedcolumn2d:{chart:{valueFontColor:"#ffffff"}},scrollcombi2d:{chart:{showValues:"0"}},scrollcombidy2d:{chart:{showValues:"0"}},logstackedcolumn2d:{chart:{showValues:"0"}},logmsline:{chart:{showValues:"0"}},logmscolumn2d:{chart:{showValues:"0"}},msstackedcombidy2d:{chart:{showValues:"0"}},scrollcolumn2d:{chart:{valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},pareto2d:{chart:{paletteColors:"#0075c2",showValues:"0"}},pareto3d:{chart:{paletteColors:"#0075c2",
showValues:"0"}},angulargauge:{chart:{pivotFillColor:"#ffffff",pivotRadius:"4",gaugeFillMix:"{light+0}",showTickValues:"1",majorTMHeight:"12",majorTMThickness:"2",majorTMColor:"#000000",minorTMNumber:"0",tickValueDistance:"10",valueFontSize:"24",valueFontBold:"1",gaugeInnerRadius:"50%",showHoverEffect:"0"},dials:{dial:[{baseWidth:"10",rearExtension:"7",bgColor:"#000000",bgAlpha:"100",borderColor:"#666666",bgHoverAlpha:"20"}]}},hlineargauge:{chart:{pointerFillColor:"#ffffff",gaugeFillMix:"{light+0}",
showTickValues:"1",majorTMHeight:"3",majorTMColor:"#000000",minorTMNumber:"0",valueFontSize:"18",valueFontBold:"1"},pointers:{pointer:[{}]}},bubble:{chart:{use3dlighting:"0",showplotborder:"0",showYAxisLine:"1",yAxisLineThickness:"1",yAxisLineColor:"#999999",showAlternateHGridColor:"0",showAlternateVGridColor:"0",plotFillHoverColor:"#2b8ecf"},categories:[{verticalLineDashed:"1",verticalLineDashLen:"1",verticalLineDashGap:"1",verticalLineThickness:"1",verticalLineColor:"#000000",category:[{}]}],vtrendlines:[{line:[{alpha:"0"}]}]},
scatter:{chart:{use3dlighting:"0",showYAxisLine:"1",yAxisLineThickness:"1",yAxisLineColor:"#999999",showAlternateHGridColor:"0",showAlternateVGridColor:"0"},categories:[{verticalLineDashed:"1",verticalLineDashLen:"1",verticalLineDashGap:"1",verticalLineThickness:"1",verticalLineColor:"#000000",category:[{}]}],vtrendlines:[{line:[{alpha:"0"}]}]},boxandwhisker2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},thermometer:{chart:{gaugeFillColor:"#0075c2"}},
cylinder:{chart:{cylFillColor:"#0075c2"}},sparkline:{chart:{linecolor:"#0075c2"}},sparkcolumn:{chart:{plotFillColor:"#0075c2"}},sparkwinloss:{chart:{winColor:"#0075c2",lossColor:"#1aaf5d",drawColor:"#f2c500",scoreLessColor:"#f45b00"}},hbullet:{chart:{plotFillColor:"#0075c2",targetColor:"#1aaf5d"}},vbullet:{chart:{plotFillColor:"#0075c2",targetColor:"#1aaf5d"}}}});
/*
 Ocean Theme v0.0.3
 FusionCharts JavaScript Library

 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>
*/
FusionCharts.register("theme",{name:"ocean",theme:{base:{chart:{paletteColors:"#04476c,#4d998d,#77be99,#a7dca6,#cef19a,#0e948c,#64ad93,#8fcda0,#bbe7a0,#dcefc1",labelDisplay:"auto",baseFontColor:"#333333",baseFont:"Helvetica Neue,Arial",captionFontSize:"14",subcaptionFontSize:"14",subcaptionFontBold:"0",showBorder:"0",bgColor:"#ffffff",showShadow:"0",canvasBgColor:"#ffffff",showCanvasBorder:"0",useplotgradientcolor:"0",useRoundEdges:"0",showPlotBorder:"0",showAlternateHGridColor:"0",showAlternateVGridColor:"0",
toolTipColor:"#ffffff",toolTipBorderThickness:"0",toolTipBgColor:"#000000",toolTipBgAlpha:"80",toolTipBorderRadius:"2",toolTipPadding:"5",legendBgAlpha:"0",legendBorderAlpha:"0",legendShadow:"0",legendItemFontSize:"10",legendItemFontColor:"#666666",legendCaptionFontSize:"9",divlineAlpha:"100",divlineColor:"#999999",divlineThickness:"1",divLineIsDashed:"1",divLineDashLen:"1",divLineGapLen:"1",scrollheight:"10",flatScrollBars:"1",scrollShowButtons:"0",scrollColor:"#cccccc",showHoverEffect:"1",valueFontSize:"10",
showXAxisLine:"1",xAxisLineThickness:"1",xAxisLineColor:"#999999"},dataset:[{}],trendlines:[{}]},geo:{chart:{showLabels:"0",fillColor:"#04476c",showBorder:"1",borderColor:"#eeeeee",borderThickness:"1",borderAlpha:"50",entityFillhoverColor:"#04476c",entityFillhoverAlpha:"80",connectorColor:"#cccccc",connectorThickness:"1.5",markerFillHoverAlpha:"90"}},pie2d:{chart:{placeValuesInside:"0",use3dlighting:"0",valueFontColor:"#333333",captionPadding:"15"},data:function(c,a,b){a=window.Math;return{alpha:100-
(50<b?a.round(100/a.ceil(b/10)):20)*a.floor(c/10)}}},doughnut2d:{chart:{placeValuesInside:"0",use3dlighting:"0",valueFontColor:"#333333",centerLabelFontSize:"12",centerLabelBold:"1",centerLabelFontColor:"#333333",captionPadding:"15"},data:function(c,a,b){a=window.Math;return{alpha:100-(50<b?a.round(100/a.ceil(b/10)):20)*a.floor(c/10)}}},line:{chart:{lineThickness:"2"}},spline:{chart:{lineThickness:"2"}},column2d:{chart:{paletteColors:"#04476c",valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},
bar2d:{chart:{paletteColors:"#04476c",valueFontColor:"#ffffff",placeValuesInside:"1"}},column3d:{chart:{paletteColors:"#04476c",valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},bar3d:{chart:{paletteColors:"#04476c",valueFontColor:"#ffffff",placeValuesInside:"1"}},area2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},splinearea:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},mscolumn2d:{chart:{valueFontColor:"#ffffff",
placeValuesInside:"1",rotateValues:"1"}},mscolumn3d:{chart:{showValues:"0"}},msstackedcolumn2dlinedy:{chart:{showValues:"0"}},stackedcolumn2d:{chart:{showValues:"0"}},stackedarea2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},stackedbar2d:{chart:{showValues:"0"}},msstackedcolumn2d:{chart:{showValues:"0"}},mscombi3d:{chart:{showValues:"0"}},mscombi2d:{chart:{showValues:"0"}},mscolumn3dlinedy:{chart:{showValues:"0"}},stackedcolumn3dline:{chart:{showValues:"0"}},
stackedcolumn2dline:{chart:{showValues:"0"}},scrollstackedcolumn2d:{chart:{valueFontColor:"#ffffff"}},scrollcombi2d:{chart:{showValues:"0"}},scrollcombidy2d:{chart:{showValues:"0"}},logstackedcolumn2d:{chart:{showValues:"0"}},logmsline:{chart:{showValues:"0"}},logmscolumn2d:{chart:{showValues:"0"}},msstackedcombidy2d:{chart:{showValues:"0"}},scrollcolumn2d:{chart:{valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},pareto2d:{chart:{paletteColors:"#04476c",showValues:"0"}},pareto3d:{chart:{paletteColors:"#04476c",
showValues:"0"}},angulargauge:{chart:{pivotFillColor:"#ffffff",pivotRadius:"4",gaugeFillMix:"{light+0}",showTickValues:"1",majorTMHeight:"12",majorTMThickness:"2",majorTMColor:"#000000",minorTMNumber:"0",tickValueDistance:"10",valueFontSize:"24",valueFontBold:"1",gaugeInnerRadius:"50%",showHoverEffect:"0"},dials:{dial:[{baseWidth:"10",rearExtension:"7",bgColor:"#000000",bgAlpha:"100",borderColor:"#666666",bgHoverAlpha:"20"}]}},hlineargauge:{chart:{pointerFillColor:"#ffffff",gaugeFillMix:"{light+0}",
showTickValues:"1",majorTMHeight:"3",majorTMColor:"#000000",minorTMNumber:"0",valueFontSize:"18",valueFontBold:"1"},pointers:{pointer:[{}]}},bubble:{chart:{use3dlighting:"0",showplotborder:"0",showYAxisLine:"1",yAxisLineThickness:"1",yAxisLineColor:"#999999",showAlternateHGridColor:"0",showAlternateVGridColor:"0"},categories:[{verticalLineDashed:"1",verticalLineDashLen:"1",verticalLineDashGap:"1",verticalLineThickness:"1",verticalLineColor:"#000000",category:[{}]}],vtrendlines:[{line:[{alpha:"0"}]}]},
scatter:{chart:{use3dlighting:"0",showYAxisLine:"1",yAxisLineThickness:"1",yAxisLineColor:"#999999",showAlternateHGridColor:"0",showAlternateVGridColor:"0"},categories:[{verticalLineDashed:"1",verticalLineDashLen:"1",verticalLineDashGap:"1",verticalLineThickness:"1",verticalLineColor:"#000000",category:[{}]}],vtrendlines:[{line:[{alpha:"0"}]}]},boxandwhisker2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},thermometer:{chart:{gaugeFillColor:"#04476c"}},
cylinder:{chart:{cylFillColor:"#04476c"}},sparkline:{chart:{linecolor:"#04476c"}},sparkcolumn:{chart:{plotFillColor:"#04476c"}},sparkwinloss:{chart:{winColor:"#04476c",lossColor:"#4d998d",drawColor:"#77be99",scoreLessColor:"#a7dca6"}},hbullet:{chart:{plotFillColor:"#04476c",targetColor:"#4d998d"}},vbullet:{chart:{plotFillColor:"#04476c",targetColor:"#4d998d"}}}});
/*
 Zune Theme v0.0.3
 FusionCharts JavaScript Library

 Copyright FusionCharts Technologies LLP
 License Information at <http://www.fusioncharts.com/license>
*/
FusionCharts.register("theme",{name:"zune",theme:{base:{chart:{paletteColors:"#0075c2,#1aaf5d,#f2c500,#f45b00,#8e0000,#0e948c,#8cbb2c,#f3de00,#c02d00,#5b0101",labelDisplay:"auto",baseFontColor:"#333333",baseFont:"Helvetica Neue,Arial",captionFontSize:"14",subcaptionFontSize:"14",subcaptionFontBold:"0",showBorder:"0",bgColor:"#ffffff",showShadow:"0",canvasBgColor:"#ffffff",showCanvasBorder:"0",useplotgradientcolor:"0",useRoundEdges:"0",showPlotBorder:"0",showAlternateHGridColor:"0",showAlternateVGridColor:"0",
toolTipColor:"#ffffff",toolTipBorderThickness:"0",toolTipBgColor:"#000000",toolTipBgAlpha:"80",toolTipBorderRadius:"2",toolTipPadding:"5",legendBgAlpha:"0",legendBorderAlpha:"0",legendShadow:"0",legendItemFontSize:"10",legendItemFontColor:"#666666",legendCaptionFontSize:"9",divlineAlpha:"100",divlineColor:"#999999",divlineThickness:"1",divLineIsDashed:"1",divLineDashLen:"1",divLineGapLen:"1",scrollheight:"10",flatScrollBars:"1",scrollShowButtons:"0",scrollColor:"#cccccc",showHoverEffect:"1",valueFontSize:"10",
showXAxisLine:"1",xAxisLineThickness:"1",xAxisLineColor:"#999999"},dataset:[{}],trendlines:[{}]},geo:{chart:{showLabels:"0",fillColor:"#0075c2",showBorder:"1",borderColor:"#eeeeee",borderThickness:"1",borderAlpha:"50",entityFillhoverColor:"#0075c2",entityFillhoverAlpha:"80",connectorColor:"#cccccc",connectorThickness:"1.5",markerFillHoverAlpha:"90"}},pie2d:{chart:{placeValuesInside:"0",use3dlighting:"0",valueFontColor:"#333333",captionPadding:"15"},data:function(c,a,b){a=window.Math;return{alpha:100-
(50<b?a.round(100/a.ceil(b/10)):20)*a.floor(c/10)}}},doughnut2d:{chart:{placeValuesInside:"0",use3dlighting:"0",valueFontColor:"#333333",centerLabelFontSize:"12",centerLabelBold:"1",centerLabelFontColor:"#333333",captionPadding:"15"},data:function(c,a,b){a=window.Math;return{alpha:100-(50<b?a.round(100/a.ceil(b/10)):20)*a.floor(c/10)}}},line:{chart:{lineThickness:"2"}},spline:{chart:{lineThickness:"2"}},column2d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},
bar2d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1"}},column3d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},bar3d:{chart:{paletteColors:"#0075c2",valueFontColor:"#ffffff",placeValuesInside:"1"}},area2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},splinearea:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},mscolumn2d:{chart:{valueFontColor:"#ffffff",
placeValuesInside:"1",rotateValues:"1"}},mscolumn3d:{chart:{showValues:"0"}},msstackedcolumn2dlinedy:{chart:{showValues:"0"}},stackedcolumn2d:{chart:{showValues:"0"}},stackedarea2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},stackedbar2d:{chart:{showValues:"0"}},msstackedcolumn2d:{chart:{showValues:"0"}},mscombi3d:{chart:{showValues:"0"}},mscombi2d:{chart:{showValues:"0"}},mscolumn3dlinedy:{chart:{showValues:"0"}},stackedcolumn3dline:{chart:{showValues:"0"}},
stackedcolumn2dline:{chart:{showValues:"0"}},scrollstackedcolumn2d:{chart:{valueFontColor:"#ffffff"}},scrollcombi2d:{chart:{showValues:"0"}},scrollcombidy2d:{chart:{showValues:"0"}},logstackedcolumn2d:{chart:{showValues:"0"}},logmsline:{chart:{showValues:"0"}},logmscolumn2d:{chart:{showValues:"0"}},msstackedcombidy2d:{chart:{showValues:"0"}},scrollcolumn2d:{chart:{valueFontColor:"#ffffff",placeValuesInside:"1",rotateValues:"1"}},pareto2d:{chart:{paletteColors:"#0075c2",showValues:"0"}},pareto3d:{chart:{paletteColors:"#0075c2",
showValues:"0"}},angulargauge:{chart:{pivotFillColor:"#ffffff",pivotRadius:"4",gaugeFillMix:"{light+0}",showTickValues:"1",majorTMHeight:"12",majorTMThickness:"2",majorTMColor:"#000000",minorTMNumber:"0",tickValueDistance:"10",valueFontSize:"24",valueFontBold:"1",gaugeInnerRadius:"50%",showHoverEffect:"0"},dials:{dial:[{baseWidth:"10",rearExtension:"7",bgColor:"#000000",bgAlpha:"100",borderColor:"#666666",bgHoverAlpha:"20"}]}},hlineargauge:{chart:{pointerFillColor:"#ffffff",gaugeFillMix:"{light+0}",
showTickValues:"1",majorTMHeight:"3",majorTMColor:"#000000",minorTMNumber:"0",valueFontSize:"18",valueFontBold:"1"},pointers:{pointer:[{}]}},bubble:{chart:{use3dlighting:"0",showplotborder:"0",showYAxisLine:"1",yAxisLineThickness:"1",yAxisLineColor:"#999999",showAlternateHGridColor:"0",showAlternateVGridColor:"0"},categories:[{verticalLineDashed:"1",verticalLineDashLen:"1",verticalLineDashGap:"1",verticalLineThickness:"1",verticalLineColor:"#000000",category:[{}]}],vtrendlines:[{line:[{alpha:"0"}]}]},
scatter:{chart:{use3dlighting:"0",showYAxisLine:"1",yAxisLineThickness:"1",yAxisLineColor:"#999999",showAlternateHGridColor:"0",showAlternateVGridColor:"0"},categories:[{verticalLineDashed:"1",verticalLineDashLen:"1",verticalLineDashGap:"1",verticalLineThickness:"1",verticalLineColor:"#000000",category:[{}]}],vtrendlines:[{line:[{alpha:"0"}]}]},boxandwhisker2d:{chart:{valueBgColor:"#ffffff",valueBgAlpha:"90",valueBorderPadding:"-2",valueBorderRadius:"2"}},thermometer:{chart:{gaugeFillColor:"#0075c2"}},
cylinder:{chart:{cylFillColor:"#0075c2"}},sparkline:{chart:{linecolor:"#0075c2"}},sparkcolumn:{chart:{plotFillColor:"#0075c2"}},sparkwinloss:{chart:{winColor:"#0075c2",lossColor:"#1aaf5d",drawColor:"#f2c500",scoreLessColor:"#f45b00"}},hbullet:{chart:{plotFillColor:"#0075c2",targetColor:"#1aaf5d"}},vbullet:{chart:{plotFillColor:"#0075c2",targetColor:"#1aaf5d"}}}});
