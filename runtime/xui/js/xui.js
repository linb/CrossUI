var root,factory;root="undefined"!=typeof window?window:this,factory=function(){
/*!
* CrossUI(xui) JavaScript Library v3.0
* https://crossui.com
*
* Copyright ( 2004 ~ present) CrossUI.com
* Released under the MIT license
*
*/
var undefined,window=this,document=window.document,xui=window.xui=function(e,t){return xui.Dom.pack(e,t)};return xui.window=window,xui.Class=function(e,t,i){var r,n,o,a,u,s,l=[],c=xui.Class,d=xui.window,f=c._fun,p=c._reg,x=c._all,h=function(e){return(e+"").replace(/(\s*\/\*[^*]*\*+([^\/][^*]*\*+)*\/)|(\s*\/\/[^\n]*)|(\)[\s\S]*)/g,(function(e){return")"!=e.charAt(0)?"":e}))};if(i=i||{},!c._ignoreNSCache&&(u=xui.get(d,e.split(".")))&&"function"==typeof u&&u.$xuiclass$)return c._last=u;for((u=xui.get(d,["xui","$cache","SC"]))&&delete u[e],t=t?"string"==typeof t?[t]:t:[],a=0;u=t[a];a++)if(!(l[a]=xui.get(d,u.split("."))||xui.get(window,u.split("."))||xui&&xui.SC&&xui.SC(u)))throw new Error("errNoParent--"+u);if(i.Required)for("string"==typeof i.Required&&(i.Required=[i.Required]),a=0;u=i.Required[a];a++)if(!(xui.get(d,u.split("."))||xui&&xui.SC&&xui.SC(u)))throw new Error("errNoRequiredClass--"+u);n=l[0];var g=i.$Start||n&&n.$Start;for(a in xui.tryF(g,[],i),u={},r=i.Static||{})p[a]&&(u[a]=1);for(a in u)delete r[a];r.Before=i.Before||n&&n.Before,r.After=i.After||n&&n.After,r.$Start=g,r.$End=i.$End||n&&n.$End,r.__gc=i.__gc||r.__gc||n&&n.__gc||function(){xui.Class.__gc(this.$key)};var A=function(){xui.Class.$instanceCreated&&xui.Class.$instanceCreated(this),"function"==typeof this.initialize&&this.initialize()};if("function"==typeof i.Constructor)(o=f(i.Constructor,"Constructor",e,n||A,"constructor")).Constructor=h(i.Constructor);else if(n){var m=A,y=n.Constructor;y&&(m=new Function(y.slice(y.indexOf("(")+1,y.indexOf(")")).split(","),y.slice(y.indexOf("{")+1,y.lastIndexOf("}")))),(o=f(m,"Constructor",e,n.upper,"constructor")).Constructor=h(y)}else o=A;for(s=xui.fun(),a=l.length-1;u=l[a--];)xui.merge(s,u),xui.merge(s.prototype,u.prototype);if(o.KEY=o.$key=o.prototype.KEY=o.prototype.$key=e,c._wrap(o,r,0,s,"static"),(u=i.Instance)&&c._wrap(o.prototype,u,1,s.prototype,"instance"),c._inherit(o,s),c._inherit(o.prototype,s.prototype),s=null,!1===xui.tryF(o.Before,arguments,o))return!1;for(a=0;u=l[a];a++){for(var v,b=0,_=(u=u.$children||(u.$children=[])).length;b<_;b++)if(u[_]==e){v=!0;break}v||(u[u.length]=e)}if(o.$xui$=o.$xuiclass$=1,o.$children=[],o.$parent=l,o.prototype.constructor=o,o.prototype.$xui$=1,o[e]=o.prototype[e]=!0,s=u=xui.get(d,e.split(".")),xui.set(d,e.split("."),o),"[object Object]"==Object.prototype.toString.call(s))for(a in s)o[a]=s[a];return xui.tryF(o.After,[],o),xui.tryF(i.Initialize,[],o),xui.tryF(o.$End,[],o),xui.breakO([i.Static,i.Instance,i],2),e in x||(x[e]=x.length,x.push(e)),c._last=o},xui.Namespace=function(e){var t=e.split("."),i=xui.window;return xui.get(i,t)||(xui.Namespace._all[t[0]]=1)&&xui.set(i,t,{})},xui.Namespace._all={},xui.merge=function(e,t,i,r){var n,o;switch("function"==typeof i&&(o=i,i="fun"),i){case"fun":for(n in t)(r||t.hasOwnProperty(n))&&!0===o(t[n],n)&&(e[n]=t[n]);break;case"all":for(n in t)(r||t.hasOwnProperty(n))&&(e[n]=t[n]);break;case"with":for(n in t)(r||t.hasOwnProperty(n))&&e.hasOwnProperty(n)&&(e[n]=t[n]);break;default:for(n in t)!r&&!t.hasOwnProperty(n)||e.hasOwnProperty(n)||(e[n]=t[n])}return e},new function(){for(var e,t=0,i=["ms","moz","webkit","o"],r=window,n=0,o=i.length;n<o&&!r.requestAnimationFrame&&(e=i[n++]);)r.requestAnimationFrame=r[e+"RequestAnimationFrame"],r.cancelAnimationFrame=r[e+"CancelAnimationFrame"]||r[e+"CancelRequestAnimationFrame"];r.requestAnimationFrame=r.requestAnimationFrame||function(e,i){var r=(new Date).getTime(),n=Math.max(0,1e3/60-(r-t)),o=setTimeout((function(){e(r+n)}),n);return t=r+n,o},r.cancelAnimationFrame=r.cancelAnimationFrame||function(e){clearTimeout(e)},r.requestIdleCallback=r.requestIdleCallback||function(e){return setTimeout((function(){var t=Date.now();e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})}),1)},r.cancelIdleCallback=r.cancelIdleCallback||function(e){clearTimeout(e)}},new function(){var e=Object.prototype.toString;xui.merge(xui,{stamp:function(){return+new Date},rand:function(e,t){return(e||"")+parseInt(xui.stamp()*Math.random(),10).toString(36)+(t||"")},setTimeout:function(e,t){return!1===t||(t||0)>1e3/60?-1*setTimeout(e,t||0):requestAnimationFrame(e)},clearTimeout:function(e){e>=0?cancelAnimationFrame(e):clearTimeout(Math.abs(e))},fun:function(){return function(){}},exec:function(e,t,i){var r,n=document,o=n.getElementsByTagName("head")[0]||n.documentElement,a=n.createElement("script");return i&&(e="!function(){"+e+"}(xui.window)"),a.type="text/javascript",t&&((r=n.getElementById(t))&&r.parentNode==o&&o.removeChild(r),a.id=t),xui.browser.ie?a.text=e:a.appendChild(n.createTextNode(e)),o.appendChild(a),a.disalbed=!0,a.disabled=!1,t||o.removeChild(a),a},_s2a:function(e){return(e+"").replace(/^\[/,"").replace(/\]$/,"").split(/\s*[\[\]\.]\s*[\[\]\.]?\s*/)},get:function(e,t,i){if(!t)return e;if(!xui.isSet(e))return undefined;if(i&&(t=xui._s2a(t)),"string"==typeof t)return e[t];for(var r,n=0,o=t.length;n<o;)if((r=t[n++]+"")&&(!e||(e=r!=(r=r.replace("()",""))?"function"==typeof e[r]&&0!==r.indexOf("set")?e[r]():undefined:e[r])===undefined))return;return e},set:function(e,t,i,r){if(e){if(r&&(t=xui._s2a(t)),"string"!=typeof t){for(var n,o,a=0,u=t.length-1;a<u;)e=!e[n=t[a++]]||"object"!=(o=typeof e[n])&&"function"!=o?e[n]={}:e[n];t=t[u]}if(t!=(t=(t+"").replace("()",""))){if("function"==typeof e[t])return e[t](i),i}else{if(i!==undefined)return e[t]=i;t in e&&(e.hasOwnProperty&&e.hasOwnProperty(t)?delete e[t]:e[t]=undefined)}}},clonePath:function(e,t){var i,r,n=[],o=t.length;return xui.clone(e,(function(e,a,u,s){if(i=0,n[u-1]=a,n.splice(u),(r=n.length)>o)return s[a]=e,!1;for(;i<=r-1;){if(t[i]!==n[i])return s[a]=e,!1;i++}}))},tryF:function(e,t,i,r){return e&&"function"==typeof e?e.apply(i||{},t||[]):r},asyRun:function(e,t,i,r){return xui.setTimeout("string"==typeof e?function(){xui.exec(e)}:function(){e.apply(r,i||[]),e=i=null},t)},idleRun:function(e,t,i){return window.requestIdleCallback("string"==typeof e?function(){xui.exec(e)}:function(){e.apply(i,t||[]),e=t=null})},asyQueue:function(e,t,i,r,n){var o=xui.asyQueue;return o._asyQ=o._asyQ||(o._asyQ=[]),o._qSchedule=o._qSchedule||(o._qSchedule=function(){o._asyQTick||(o._asyQTick=xui.asyRun((function(){var e,t;try{for(;e=o._asyQ.shift();)e.fun.apply(e.scope,e.args),e.onOK&&e.onOK()}catch(e){t=e}if(o._asyQTick=!1,o._asyQ.length&&o._qSchedule(),t){if(!e.onKO)throw t;e.onKO(t)}})))}),o._asyQ.push({fun:e,args:t,scope:i,onOK:r,onKO:n}),o._qSchedule(),o._asyQTick},asyHTML:function(e,t,i,r){var n=document.createElement("div"),o=document.createDocumentFragment(),a=function(){for(var e=r||10;--e&&n.firstChild;)o.appendChild(n.firstChild);n.firstChild?xui.setTimeout(a,i):t(o)};n.innerHTML=e,a()},isEmpty:function(e){if(xui.isSet(e)){if(!0===e)return!1;if(xui.isNumb(e))return!1;if(xui.isHash(e)){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}return!!(xui.isArr(e)||xui.isStr(e)||xui.isArguments(e))&&0===e.length}return!0},resetRun:function(e,t,i,r,n){var o,a=xui.resetRun,u=a.$cache||(a.get=a.exists=function(e){return this.$cache[e]})&&(a.run=function(e,t){(t=this.$cache[e])&&(xui.clearTimeout(t.id),t.task(),delete this.$cache[e])})&&(a.cancel=function(e){xui.resetRun(e)})&&(a.$cache={});u[e]&&xui.clearTimeout(u[e].id),"function"==typeof t?(o=function(){delete u[e],t.apply(n||null,r||[])},u[e]={id:xui.setTimeout(o,i),task:o}):delete u[e]},observableRun:function(e,t,i,r){xui.Thread.observableRun(e,t,i,r)},breakO:function(e,t,i){var r,n=t||1,o=1+(i||0),a=xui.breakO,u="___gc_";if(e&&("object"==typeof e||"function"==typeof e)&&e!==window&&e!==document&&1!==e.nodeType){try{if(e.hasOwnProperty(u))return;e[u]=null}catch(e){return}try{for(r in e)if(e.hasOwnProperty(r)&&e[r]){"object"!=typeof e[r]&&"function"!=typeof e[r]||o<n&&a(e[r],n,o);try{e[r]=null}catch(e){}}}catch(e){return}e.length&&(e.length=0),delete e[u]}},each:function(e,t,i){for(var r in i=i||e,e)if(!1===t.call(i,e[r],r,e))break;return e},compareVar:function(e,t,i,r){return e===t||(xui.isObj(e)||xui.isObj(t)?xui.isDate(e)&&xui.isDate(t)||xui.isReg(e)&&xui.isReg(t)?e+""==t+"":!!(xui.isHash(e)&&xui.isHash(t)||xui.isArr(e)&&xui.isArr(t)||xui.isArguments(e)&&xui.isArguments(t))&&(e=xui.serialize(e,0,0,i||5,r||300),t=xui.serialize(t,0,0,i||5,r||300),-1==e.indexOf(xui.$_outofmilimted)&&-1==t.indexOf(xui.$_outofmilimted)&&e===t):void 0)},compareNumber:function(e,t,i){return xui.toFixedNumber(e,i)===xui.toFixedNumber(t,i)},toFixedNumber:function(e,t){xui.isSet(t)||(t=2);var i,r,n,o,a=Math.abs(e),u=""+Math.round(a*Math.pow(10,t));if(/\D/.test(u))i=""+a;else{for(;u.length<1+t;)u="0"+u;n=u.substring(0,r=u.length-t),(o=u.substring(r))&&(o="."+o),i=n+o}return parseFloat((e<0?"-":"")+i)},toNumeric:function(e,t,i,r){return xui.isNumb(e)||(e=parseFloat((e+"").replace(/\s*(e\+|[^0-9])/g,(function(e,t,i){return"e+"==t||"E+"==t||0==i&&"-"==t?t:t==r?".":""})))||0),xui.isSet(t)&&t>=0&&(e=xui.toFixedNumber(e,t)),e},formatNumeric:function(e,t,i,r,n,o){return xui.isSet(t)&&(t=parseInt(t,10)),t=t||0===t?t:0,i=xui.isSet(i)?i:",",r=r||".",-1==(e=""+parseFloat(e)).indexOf("e")&&(t>=0&&(e=xui.toFixedNumber(e,t)+""),e=e.split(r),!1!==n&&(e[1]?e[1].length:0)<t&&(e[1]=(e[1]||"")+xui.str.repeat("0",t-(e[1]?e[1].length:0))),e[0]=e[0].split("").reverse().join("").replace(/(\d{3})(?=\d)/g,"$1"+i).split("").reverse().join(""),e=e.join(r)),o&&-1!=e.indexOf(r)?e.replace(new RegExp("["+r+"]?0+$"),""):e},replace:function(e,t,i,r){if(!e)return"";var n,o,a,u,s,l,c=[],d=[],f=arguments.callee,p=f.reg3||(f.reg3=/\$\d/),x=f.reg4||(f.reg4=/^\$\d+$/),h=f.reg5||(f.reg5=/'/),g=f.reg6||(f.reg6=/\\./g),A=f.reg11||(f.reg11=/(['"])\1\+(.*)\+\1\1$/);return xui.isArr(t)?r=i:t=[t,i],xui.isArr(t[0])||(t=[t]),xui.arr.each(t,(function(e){if(u="string"==typeof e[0]?e[0]:e[0].source,s=e[1]||"",o=new RegExp("("+u+")|[\\s\\S]").exec(" ").length-2,"function"!=typeof s&&p.test(s))if(x.test(s))(a=parseInt(s.slice(1),10))<=o&&(s=a);else{for(l=h.test(s.replace(g,""))?'"':"'",n=o;n+1;)s=s.split("$"+n).join(l+"+a[o+"+n--+"]+"+l);s=new Function("a,o","return"+l+s.replace(A,"$1")+l)}c.push(u||"^$"),d.push([s,o,typeof s])})),e.replace(new RegExp("("+c.join(")|(")+")",r?"gim":"gm"),(function(){var e,t=1,i=0,r=arguments;if(!r[0])return"";for(;e=d[i++];)if(r[t])switch(e[2]){case"function":return e[0](r,t,i-1);case"number":return r[e[0]+t];default:return e[0]}else t+=e[1]+1}))},copy:function(e,t){return xui.clone(e,t,1)},clone:function(e,t,i,r){if(r=r||0,e&&(xui.isHash(e)||xui.isArr(e))){if(xui.isObj(e)){var n,o,a=xui.clone,u=xui.isArr(e),s=u?[]:{},l=0;if(xui.isSet(i)){if(i<=0)return e}else i=100;if(u)for(o=e.length;l<o;l++)"function"==typeof t&&!1===t.call(e,e[l],l,r+1,s)||(s[s.length]=(n=e[l])&&i&&(xui.isHash(n)||xui.isArr(n))?a(n,t,i-1,r+1):n);else for(l in e)(!0===t?"_"!=l.charAt(0):!1===t?"_"!=l.charAt(0)&&"$"!=l.charAt(0):"function"!=typeof t||!1!==t.call(e,e[l],l,r+1,s))&&(s[l]=(n=e[l])&&i&&(xui.isHash(n)||xui.isArr(n))?a(n,t,i-1,r+1):n);return s}return e}return e},deepEquals:function(e,t,i,r,n){if(xui.isSet(i)||(i=100),xui.isSet(n)||(n=1),e===t)return!0;if(!(e instanceof Object&&t instanceof Object))return!1;if(e.constructor!==t.constructor)return!1;for(var o in e)if((!r||!r(o))&&e.hasOwnProperty(o)){if(!t.hasOwnProperty(o))return!1;if(e[o]!==t[o]){if("object"!=typeof e[o])return!1;if(!(xui.isHash(e[o])&&xui.isHash(t[o])&&xui.isEmpty(e[o])&&xui.isEmpty(t[o])||xui.isArr(e[o])&&xui.isArr(t[o])&&0===e[o].length&&0===t[o].length||xui.isFun(e[o])&&xui.isFun(t[o])&&(e[o]===t[o]||e[o]+""==t[o]+"")))if(n>=i){if(e[o]!==t[o])return!1}else if(!xui.deepEquals(e[o],t[o],i,r,n+1))return!1}}for(var o in t)if(t.hasOwnProperty(o)&&!e.hasOwnProperty(o))return!1;return e+""==t+""},filter:function(e,t,i){if(!i&&e&&xui.isArr(e)){var r,n=[];for(o=0,r=e.length;o<r;o++)n[n.length]=e[o];for(e.length=0,o=0,r=n.length;o<r;o++)"function"==typeof t&&!1===t.call(n,n[o],o)||(e[e.length]=n[o])}else{var o,a={};for(o in e)(!0===t?"_"==o.charAt(0):!1===t?"_"==o.charAt(0)||"$"==o.charAt(0):"function"==typeof t&&!1===t.call(e,e[o],o))&&(a[o]=1);for(o in a)delete e[o]}return e},toArr:function(e,t){if(!e)return[];var i=[];if("boolean"==typeof t)for(var r in e)i[i.length]=t?r:e[r];else if(xui.isHash(e))for(var r in e)i.push({key:r,value:e[r]});else if("string"==typeof e)i=e.split(t||",");else{r=0;for(var n=e.length;r<n;++r)i[r]=e[r]}return i},toUTF8:function(e){return e.replace(/[^\x00-\xff]/g,(function(e,t){return"\\u"+((t=e.charCodeAt())<16?"000":t<256?"00":t<4096?"0":"")+t.toString(16)}))},fromUTF8:function(e){return e.replace(/\\u([0-9a-f]{3})([0-9a-f])/g,(function(e,t,i){return String.fromCharCode(16*parseInt(t,16)+parseInt(i,16))}))},urlEncode:function(e){var t,i,r,n=[],o=[];for(t in e)n[i=n.length]=o[o.length]=encodeURIComponent(t),((r=e[t])||0===r)&&(n[i]+="="+encodeURIComponent("string"==typeof r?r:xui.serialize(r)));return n=xui.arr.stableSort(n,(function(e,t,i,r){return o[i]>o[r]?1:o[i]==o[r]?0:-1})),n.join("&")},urlDecode:function(e,t){if(!e)return t?"":{};for(var i,r={},n=e.split("&"),o=0,a=n.length;o<a;o++){i=n[o].split("=");try{r[decodeURIComponent(i[0])]=decodeURIComponent(i[1]||"")}catch(e){r[i[0]]=i[1]||""}}return t?r[t]:r},getUrlParams:function(e){var t=(e||location.href).replace(/^[^#]*[#!]+|^[^#]*$/,"");return-1!=t.indexOf("?")&&(t=t.split("?")[1]),-1!=t.indexOf("=")?xui.urlDecode(t):{}},getUrlPath:function(e){var t=(e||location.href).replace(/^[^#]*[#!]+|^[^#]*$/,"");return-1!=t.indexOf("?")?t=t.split("?")[0]:-1==t.indexOf("=")||(t=""),"/"+decodeURIComponent(t).replace(/^\//,"").replace(/\/$/,"")},preLoadImage:function(e,t,i){if(xui.isArr(e)){for(var r=0,n=e.length;r<n;r++)xui.preLoadImage(e[r],t,i);return n}var o=document.createElement("img");return o.style.cssText="position:absolute;left:-999px;top:-999px",o.width=o.height=2,o.onload=function(){"function"==typeof t&&t.call(this),this.onload=this.onerror=null,document.body.removeChild(this)},o.onerror=function(){"function"==typeof i&&i.call(this),this.onload=this.onerror=null,document.body.removeChild(this)},document.body.appendChild(o),o.src=e,1},isDefined:function(e){return e!==undefined},isNull:function(e){return null===e},isSet:function(e){return e!==undefined&&null!==e&&NaN!==e},isObj:function(e){return!!e&&("object"==typeof e||"function"==typeof e)},isHash:function(t){return!!t&&"[object Object]"==e.call(t)&&t.constructor&&/^\s*function\s+Object\(\s*\)/.test(t.constructor.toString())&&!Object.prototype.hasOwnProperty.call(t,"callee")},isBool:function(e){return"boolean"==typeof e},isNumb:function(e){return"number"==typeof e&&isFinite(e)},isFinite:function(e){return(e||0===e)&&isFinite(e)&&!isNaN(parseFloat(e))},isDate:function(t){return"[object Date]"===e.call(t)&&isFinite(+t)},isFun:function(t){return"[object Function]"===e.call(t)},isAsyncFun:function(t){return"[object AsyncFunction]"===e.call(t)},isArr:function(t){return"[object Array]"===e.call(t)},isReg:function(t){return"[object RegExp]"===e.call(t)},isStr:function(t){return"[object String]"===e.call(t)},isFile:function(t){return"[object File]"===e.call(t)},isArguments:function(t){return t&&("[object Arguments]"===e.call(t)||Object.prototype.hasOwnProperty.call(t,"callee"))},isEvent:function(t){return t&&(/^(\[object ([A-Z][a-z]+)Event\])|(\[object Event\])$/.test(e.call(t))||xui.isHash(t)&&!(!t.$xuievent&&!t.$xuieventpara))},isElem:function(e){return!(!e||1!==e.nodeType)},isNaN:function(e){return"number"==typeof e&&e!=+e},str:{startWith:function(e,t){return 0===e.indexOf(t)},endWith:function(e,t){var i=e.length-t.length;return i>=0&&e.lastIndexOf(t)===i},repeat:function(e,t){return new Array(t+1).join(e)},initial:function(e){return e.charAt(0).toUpperCase()+e.substring(1)},trim:function(e){return e?e.replace(/^(\s|\uFEFF|\xA0)+|(\s|\uFEFF|\xA0)+$/g,""):e},ltrim:function(e){return e?e.replace(/^(\s|\uFEFF|\xA0)+/,""):e},rtrim:function(e){return e?e.replace(/(\s|\uFEFF|\xA0)+$/,""):e},toDom:function(e){var t=xui.$getGhostDiv(),i=[];t.innerHTML=e;for(var r=0,n=t.childNodes,o=n.length;r<o;r++)i[i.length]=n[r];return t=null,xui(i)}},arr:{fastSortObject:function(e,t){if(!e||e.length<2)return e;for(var i,r,n,o,a=e.length,u=[],s=(a+"").length,l=Object.prototype,c=0;c<s;c++)u[c]=new Array(s-c).join("0");for(var d=0;d<a;d++)r=d+"","object"==typeof(n=e[d])&&(n._xui_$s$=(xui.isSet(o=t.call(n,d))?o:"")+u[r.length-1]+r);try{i=l.toString,l.toString=function(){return this.hasOwnProperty("_xui_$s$")?this._xui_$s$:i.call(this)},e.sort()}finally{for(l.toString=i,d=0;d<a;d++)"object"==typeof e[d]&&delete e[d]._xui_$s$}return e},stableSort:function(e,t){if(e&&e.length>1){for(var i=0,r=e.length,n=[],o=[];i<r;i++)o[i]=e[n[i]=i];for(xui.isFun(t)?n.sort((function(i,r){return t.call(e,e[i],e[r],i,r)||(i>r?1:-1)})):n.sort((function(t,i){return e[t]>e[i]?1:e[t]<e[i]?-1:t>i?1:-1})),i=0;i<r;i++)e[i]=o[n[i]];n.length=o.length=0}return e},subIndexOf:function(e,t,i){if(i===undefined)return-1;for(var r=0,n=e.length;r<n;r++)if(e[r]&&e[r][t]===i)return r;return-1},removeFrom:function(e,t,i){return e.splice(t,i||1),e},removeValue:function(e,t){for(var i=e.length-1;i>=0;i--)e[i]===t&&e.splice(i,1);return e},intersection:function(e,t){for(var i=0,r=0,n=[];i<e.length&&r<t.length;)e[i]<t[r]?i++:(e[i]>t[r]||(n.push(e[i]),i++),r++);return n},insertAny:function(e,t,i,r){var n,o=e.length;return r=!xui.isArr(t)||r,0===i?r?e.unshift(t):e.unshift.apply(e,t):((!i||i<0||i>o)&&(i=o),i!=o&&(n=e.splice(i,o-i)),r?e[e.length]=t:e.push.apply(e,t),n&&e.push.apply(e,n)),i},indexOf:function(e,t){for(var i=0,r=e.length;i<r;i++)if(e[i]===t)return i;return-1},each:function(e,t,i,r){var n,o,a=e;if(!a)return a;if(!xui.isArr(a)){if(!xui.isArr(a._nodes))return a;a=a._nodes,r===undefined&&(r=1)}if(o=a.length,i=i||e,r)for(n=o-1;n>=0&&!1!==t.call(i,a[n],n,a);n--);else for(n=0;n<o&&!1!==t.call(i,a[n],n,a);n++);return e},removeDuplicate:function(e,t){var i=e.length,r=e.concat();e.length=0;for(var n=i-1;n>=0;n--)(t?this.subIndexOf(r,t,r[n][t])===n:this.indexOf(r,r[n])===n)&&e.push(r[n]);return e.reverse()}},_scope_set:function(e){window.get&&(xui._scope_bak=window.get),xui._scope_datamap=e,window.get=function(e){if(e){var t,i=(e=""+e).indexOf("."),r=-1==i?e:e.substr(0,i),n=-1==i?null:e.substr(i+1,e.length);return(t=xui._scope_datamap)&&(t=t[r])&&(n?t[n]:t)}}},_scope_clear:function(e){(e=xui._scope_bak)&&(window.get=e,delete xui._scope_bak,delete xui._scope_datamap)}})},new function(){var reg1=/(\s*\/\*[^*]*\*+([^\/][^*]*\*+)*\/)|(\s*\/\/[^\n]*)|(\)[\s\S]*)/g,reg2=/^\s*(\([\w,\s]*\)|\s*[\w]+\s*)\s*=>\s*([\s\S]*)\s*$/,AsyncFunction;try{AsyncFunction=eval("Object.getPrototypeOf(async function(){}).constructor")}catch(e){}xui.merge(xui.fun,{body:function(e){var t=(""+e).replace(/^async\s+/,"").replace(reg1,(function(e){return")"!=e.charAt(0)?"":e})),i=reg2.exec(t);return i?"{"==i[2][0]?i[2].slice(1,-1):i[2]:t.slice(t.indexOf("{")+1,t.lastIndexOf("}"))},args:function(e){var t=(""+e).replace(/^async\s+/,"").replace(reg1,(function(e){return")"!=e.charAt(0)?"":e})),i=reg2.exec(t);return(t=xui.str.trim(i?"("==i[1][0]?i[1].slice(1,-1):i[1]:t.slice(t.indexOf("(")+1,t.indexOf(")"))).split(/\s*,\s*/))[0]?t:[]},clone:function(e){return xui.isAsyncFun(e)&&AsyncFunction?new AsyncFunction(xui.fun.args(e),xui.fun.body(e)):new Function(xui.fun.args(e),xui.fun.body(e))}})},xui.merge(xui.Class,{_reg:{$key:1,$parent:1,$children:1,KEY:1,Static:1,Instance:1,Constructor:1,Initialize:1},_reg2:{nodeType:1,constructor:1,prototype:1,toString:1,valueOf:1,hasOwnProperty:1,isPrototypeOf:1,propertyIsEnumerable:1,toLocaleString:1},_all:[],_fun:function(e,t,i,r,n){return e.$name$=t,e.$original$=i,n&&(e.$type$=n),r&&e!==r&&(e.upper=r),e},_other:["toString","valueOf"],_o:{},_inherit:function(e,t,i){var r,n,o=this._reg;for(r in t)r in e||!i&&o[r]||"$"==r.charAt(0)||(n=t[r])&&n.$xui$||(e[r]=n)},_wrap:function(e,t,i,r,n){var o,a,u,s=this,l=e.KEY,c=s._reg,d=s._reg2,f=s._fun,p=s._other;for(o in t)d[o]||!i&&c[o]||(u=t[o],e[o]="function"!=typeof u?u:f(u,o,l,"function"==typeof r[o]&&r[o],n));for(a=0;o=p[a++];)(u=t[o])&&u==s._o[o]||(e[o]="function"!=typeof u?u:f(u,o,l,"function"==typeof r[o]&&r[o],n))},__gc:function(e){var t=xui.Class._all;if(e){"object"==typeof e&&(e=e.KEY||"");var i,r,n,o=xui.get(window,e.split("."));if(o){if((i=xui.get(window,["xui","$cache","SC"]))&&delete i[e],o.$parent&&(o.$parent.length=0),i=o.$children){for(a=0;n=i[a];a++)(n=xui.get(window,n.split(".")))&&n.__gc&&n.__gc();i.length=0}for(a in o)if("upper"!=a&&"function"==typeof o[a])for(r in o[a])o[a].hasOwnProperty(r)&&delete o[a][r];for(a in xui.breakO(o),o=o.prototype)if("upper"!=a&&"function"==typeof o[a])for(r in o[a])o[a].hasOwnProperty(r)&&delete o[a][r];xui.breakO(o),xui.set(window,e.split("."))}t.splice(t[e],1),delete t[e]}else for(var a=t.length-1;a>0;a--)xui.Class.__gc(t[a])},destroy:function(e){xui.Class.__gc(e)}}),xui.merge(xui,{version:3,versionDate:"02/03/2022",$DEFAULTHREF:"javascript:;",$IEUNSELECTABLE:function(){return xui.browser.ie?' onselectstart="return false;" ':""},SERIALIZEMAXLAYER:99,SERIALIZEMAXSIZE:9999,$localeKey:"en",$localeDomId:"xlid",$dateFormat:"",$rand:"_rnd_",$ver:"_v_",_rnd:function(e){return xui.debugMode||e?xui.$rand+"="+xui.rand():xui.production_version?xui.$ver+"="+xui.production_version:null},_debugPre:function(e){return(e=xui.toArr(e))[0]="%c ["+e[0]+"@xui]",xui.arr.insertAny(e,"color:#0000ff; font-style: italic;",1),e},_debugInfo:function(){xui.debugMode&&xui.isDefined(window.console)&&"function"==typeof console.log&&console.log.apply(console,xui._debugPre(arguments))},_debugGroup:function(){xui.debugMode&&xui.isDefined(window.console)&&"function"==typeof console.group?console.group.apply(console,xui._debugPre(arguments)):xui._debugInfo.apply(xui,arguments)},_debugGroupEnd:function(){xui.debugMode&&xui.isDefined(window.console)&&"function"==typeof console.groupEnd?console.groupEnd():xui._debugInfo.apply(xui,arguments)},SpaceUnit:"em",$us:function(e){return xui.browser.ie6||xui.browser.ie7?e?-2:-1:"px"==(e=e?e._spaceUnit||e.properties&&e.properties.spaceUnit:"")?-2:"em"==e?2:"px"==xui.SpaceUnit?-1:"em"==xui.SpaceUnit?1:0},debugMode:!0,Locale:{},constant:{},$cache:{thread:{},SC:{},clsByURI:{},fetching:{},hookKey:{},hookKeyUp:{},snipScript:{},subscribes:{},ghostDiv:[],data:{},callback:{},functions:{},domPurgeData:{},profileMap:{},reclaimId:{},template:{},UIKeyMapEvents:{},droppable:{},unique:{}},subscribe:function(e,t,i,r){if(null!==e&&e!==undefined&&null!==t&&t!==undefined&&"function"==typeof i){var n,o=xui.$cache.subscribes;return o[e]=o[e]||[],-1!=(n=xui.arr.subIndexOf(o[e],"id",t))&&xui.arr.removeFrom(o[e],n),o[e].push({id:t,receiver:i,asy:!!r})}},unsubscribe:function(e,t){var i,r=xui.$cache.subscribes;t?r[e]&&-1!=(i=xui.arr.subIndexOf(r[e],"id",t))&&xui.arr.removeFrom(r[e],i):null===e||e===undefined?r={}:delete r[e]},publish:function(e,t,i,r){var n=xui.$cache.subscribes;if(null===e||e===undefined)for(var o in n)xui.arr.each(n[o],(function(e){if(!i||i===e.id||xui.isArr(i)&&-1!=xui.arr.indexOf(i,e.id)){if(!e.asy)return xui.tryF(e.receiver,t,r,!0);xui.asyRun(e.receiver,0,t,r)}}));else n[e]&&xui.arr.each(n[e],(function(e){if(!i||i===e.id||xui.isArr(i)&&-1!=xui.arr.indexOf(i,e.id)){if(!e.asy)return xui.tryF(e.receiver,t,r,!0);xui.asyRun(e.receiver,0,t,r)}}))},getSubscribers:function(e){return null===e||e===undefined?xui.$cache.subscribes:xui.$cache.subscribes[e]},setDateFormat:function(e){xui.$dateFormat=e},getDateFormat:function(e,t){return xui.isStr(t=e&&e.dateFormat)&&t||xui.isStr(t=e)&&t||xui.isStr(t=xui.$dateFormat)&&t||xui.isStr(t=xui.$cache.data.$DATE_FORMAT)&&t?t:"yyyy-mm-dd hh:mm:ss"},setFirstDayOfWeek:function(e){xui.$firstDayOfWeek=e},getFirstDayOfWeek:function(e,t){return xui.isNumb(t=e&&e.firstDayOfWeek)||xui.isNumb(t=e)||xui.isNumb(t=xui.$firstDayOfWeek)||xui.isNumb(t=xui.$cache.data.$DATE_WEEKFROM)?t:0},setAppLangKey:function(e){xui.$appLangKey=e},getAppLangKey:function(e){return xui.$appLangKey},getLang:function(){return xui.$localeKey},setLang:function(e,t,i){var r,n,o,a,u,s,l,c,d=xui.getRes,f=[];if(xui.$localeKey=e,n=document.getElementsByTagName?document.getElementsByTagName("span"):document.all&&document.all.tags?document.all.tags("span"):null){for(o=0;r=n[o];o++)r.id==xui.$localeDomId&&(f[f.length]=r);c=f.length,u=function(){var e=function(){for(a=f.splice(0,100),o=0;r=a[o];o++)r.className&&"string"==typeof(n=d(r.className))&&(r.innerHTML=n);f.length&&xui.setTimeout(e,0),xui.tryF(i,[f.length,c]),f.length||xui.tryF(t,[0,c])};e()},l="xui.Locale."+e,s=function(){var t=xui.$appLangKey;t?xui.include(l+"."+t,xui.getPath("Locale."+e,".js"),u,u):u()},xui.include(l+".inline.$_$",xui.getPath(l,".js"),s,s)}},getTheme:function(e,t){try{(t=document.createElement("xui")).className="setting-uikey",document.body.appendChild(t),e=xui(t).css("font-family").replace(/^'(.*)'$/,"$1").replace(/^"(.*)"$/,"$1"),document.body.removeChild(t)}catch(t){}finally{return e||"default"}},setTheme:function(e,t,i,r,n){e=(e||"default").replace(/^'(.*)'$/,"$1").replace(/^"(.*)"$/,"$1");var o=xui.getTheme();if(e!=o){var a=function(e){if("default"!=o){for(var i;i=xui.CSS.$getCSSValue(".setting-uikey","fontFamily",o);)i.disabled=!0,i.parentNode.removeChild(i),i=null;for(;(i=document.getElementById("theme:"+o))&&"link"==i.tagName.toLowerCase();)i.parentNode.removeChild(i)}!1!==t&&xui.CSS.adjustFont(),xui.Dom._scrollBarSize=null,xui.tryF(e)};if("default"==e)a(i);else{var u="theme:"+e,s=xui.getPath("xui.appearance."+e,"");n?xui.getFileAsync(s+"theme.css",(function(e){e=(e=xui.replace(e,[[/(\/\*[^*]*\*+([^\/][^*]*\*+)*\/)/,"$0"],[/\{[^}]*\}/,"$0"],[/([^\/{},]+)/,function(e){return xui.str.endWith(e[0],".setting-uikey")?e[0]:e[0].replace(/([^\s>]+)/,"$1"+n)}]])).replace(/url\(([^)]+)\)/g,"url("+s+"$1)"),xui.CSS._appendSS(xui("head"),e,u,!1)})):xui.CSS.includeLink(s+"theme.css",u);var l=0,c=function(){if(l++>2){if(c=l=null,!1!==xui.tryF(r))throw a(i),new Error("errLoadTheme:"+e)}else xui.getTheme()==e?(a(i),c=l=null):xui.asyRun(c,100*l)};c()}}else xui.Dom._scrollBarSize=null,xui.tryF(i)},reLayout:function(){xui.UI&&xui.UI.getAll().reLayout(!0)},_langParamReg:/\x24(\d+)/g,_langscMark:/[$@{][\S]+/,_langReg:/((\$)([^\w\(]))|((\$)([\w][\w\.-]*[\w]+))|((\$)\(([\w][\w\.]*[^)\n\r]+))\)|((\$)([^\s]))|((\@)([\w][\w\.]*[\w]+)(\@?))|((\@)([^\s])(\@?))|((\{)([~!@#$%^&*+-\/?.|:][\w\[\]]*|[\w\[\]]+(\(\))?(\.[\w\[\]]+(\(\))?)*)(\}))/g,_escapeMap:{$:"",".":"","-":"",")":"","@":""},_unescapeMap:{"":"$","":".","":"-","":")","":"@"},getRes:function(e){var t,i,r,n=arguments;if(xui.isStr(e))"$"==(e=e.replace(/\$([$.-])/g,(function(e,t){return xui._escapeMap[t]||e}))).charAt(0)&&(e=e.slice(1)),-1!=e.indexOf("-")?(r=e.split("-"),e=r[0],n=r):xui.isArr(n[1])&&(n=n[1]).unshift(e),(t=e.split("."))[t.length-1]=t[t.length-1].replace(/([\x01\x02\x03\x04])/g,(function(e){return xui._unescapeMap[e]}));else{if(!xui.isArr(e))return e;t=e}return"function"==(r=typeof(i=xui.get(xui.Locale[xui.$localeKey],t)))?i.apply(null,n):"object"==r?i:(i="string"==r?i.replace(/\$([$.-])/g,(function(e,t){return xui._escapeMap[t]||e})):t[t.length-1],(n.length>1?i.replace(xui._langParamReg,(function(e,t,i){return null===(i=n[+t+1])||i===undefined?e:i})):i).replace(/([\x01\x02\x03])/g,(function(e){return xui._unescapeMap[e]})))},wrapRes:function(e){if(!xui.isStr(e))return e;var t,i,r=e;return"$"==r.charAt(0)&&(arguments[0]=r.substr(1,r.length-1)),(t=e)==(i=xui.getRes.apply(null,arguments))&&(i=r),'<span id="'+xui.$localeDomId+'" class="'+t.replace(/([\x01\x02\x03\x04])/g,(function(e){return"$"+xui._unescapeMap[e]}))+'" '+xui.$IEUNSELECTABLE()+">"+i+"</span>"},adjustRes:function(e,t,i,r,n,o,a){return xui.isStr(e)?(t=t?xui.wrapRes:xui.getRes,e=e.replace(/\$([\$\.\-\)])/g,(function(e,t){return xui._escapeMap[t]||e})),(e=xui._langscMark.test(e)?e.replace(xui._langReg,(function(e,i,u,s,l,c,d,f,p,x,h,g,A,m,y,v,b,_,w,C,E,S,T,D,$,k){return"$"==u?r?e:s:"$"==c?r?e:t(d,n):"$"==p?r?e:t(x,n):"$"==g?r?e:t(A,n):"{"==T?(k=xui.SC.get("@"==y?v:"@"==w?C:D,o,a))||(xui.isSet(k)?k:""):e})):e).replace(/([\x01\x02\x03\x04])/g,(function(e){return xui._unescapeMap[e]}))):e},_feval:function(e,t){try{return new Function("","with(this){return "+e+"}").apply(t||{})}catch(e){return""}},adjustVar:function(e,t,i){var r;return"string"==typeof e?"{[]}"==e?[]:"{{}}"==e?{}:"{}"==e?"":"{true}"==e||"{false}"!=e&&("{NaN}"==e?NaN:"{null}"==e?null:"{undefined}"==e?undefined:"{now}"==e?new Date:(r=/^\s*\{\s*eval\s*\((.*)\)\s*\}\s*$/.exec(e))?this._feval(r[1],t||i):(r=/^\s*\{((-?\d\d*\.\d*)|(-?\d\d*)|(-?\.\d\d*))\}\s*$/.exec(e))?parseFloat(r[1]):(r=/^\s*\{([\w\.]+\([^)]*\))\s*\}\s*$/.exec(e))&&(t||i)&&xui.isHash(t||i)?new Function("try{return this."+r[1]+"}catch(e){}").call(t||i):(r=/^\s*\{([^}]+)\}\s*$/.exec(e))?xui.SC.get(r[1],t,i):xui.adjustRes(e,!1,!0,!0,null,t,i)):e},_getrpc:function(e,t,i){var r=i&&i.proxyType?i.proxyType.toLowerCase():"";return"sajax"==r||"jsonp"==r?xui.JSONP:"iajax"==r||"xdmi"==r?xui.XDMI:"ajax"==r?xui.Ajax:"fetch"==r?xui.Fetch:i&&"object"==typeof i.data&&function(e){if(!xui.isHash(e))return 0;for(var t in e)if(e[t]&&1==e[t].nodeType&&"INPUT"==e[t].nodeName||e[t]&&e[t].$xuiFileCtrl)return 1}(i.data)?xui.XDMI:i&&i.method&&"post"==i.method.toLowerCase()?xui.absIO.isCrossDomain(e)?xui.XDMI:xui.Ajax:xui.absIO.isCrossDomain(e)?xui.JSONP:xui.Ajax},request:function(e,t,i,r,n,o){return xui._getrpc(e,t,o).apply(null,arguments).start()},ajax:function(e,t,i,r,n,o){return xui.Ajax.apply(null,arguments).start()},jsonp:function(e,t,i,r,n,o){return xui.JSONP.apply(null,arguments).start()},xdmi:function(e,t,i,r,n,o){return xui.XDMI.apply(null,arguments).start()},fetch:function(e,t,i,r,n,o){return xui.Fetch.apply(null,arguments).start()},restGet:function(e,t,i,r,n,o){return o||(o={}),o.method="get",xui.Ajax(e,t,i,r,n,o).start()},restPost:function(e,t,i,r,n,o){return o||(o={}),o.method="post",xui.Ajax(e,t,i,r,n,o).start()},restPut:function(e,t,i,r,n,o){return o||(o={}),o.method="put",xui.Ajax(e,t,i,r,n,o).start()},restDelete:function(e,t,i,r,n,o){return o||(o={}),o.method="delete",xui.Ajax(e,t,i,r,n,o).start()},getFileSync:function(e,t,i,r){return xui.Ajax(e,xui._rnd(r&&r.force),t,i,null,xui.merge({asy:!1,rspType:r&&r.rspType||"text"},r,"without")).start()||null},getFileAsync:function(e,t,i,r,n){xui.Ajax(e,xui._rnd(n&&n.force),t,i,r,xui.merge({asy:!0,rspType:n&&n.rspType||"text"},n,"without")).start()},include:function(e,t,i,r,n,o){if(e&&xui.SC.get(e))xui.tryF(i);else{o=o||{};var a=xui._rnd(o.force);o.rspType="script",o.keepDomNode=1,n?(o.asy=!n,xui.Ajax(t,a,(function(t){try{xui.exec(t,e)}catch(e){xui.tryF(r,[e])}xui.tryF(i)}),r,0,o).start()):(o.checkKey=e,xui.JSONP(t,a,i,r,0,o).start())}},mailTo:function(e,t,i,r,n){xui.isHash(t)&&(n=t.bcc||"",r=t.cc||"",i=t.body||"",t=t.subject||"");var o="mailto:"+e+"?subject="+encodeURIComponent(xui.adjustRes(t||""))+"&body= "+encodeURIComponent(xui.adjustRes(i||""))+"&cc= "+(r||"")+"&bcc= "+(n||"");xui.XDMI(o).start()},fetchAlienClass:function(e,t,i,r,n,o,a){return(a=a||{}).alien=!0,this.fetchClass(e,t,i,r,n,o,a)},_getIdUri:function(e,t){var i,r,n,o;return xui.isHash(e)?(r=e.id,n=e.uri||e.url,delete(i=e.attrs||xui.copy(e)).id,delete i.uri,delete i.url):(o=/^\[([\w][\w\.]*[\w])\](.+)/.exec(e))?(r=o[1],n=o[2]):/^[\w][\w\.]*[\w]$/.test(e)?(r=e,n=xui.getPath(r,".js","js",t)):(n=e,r=xui.getClassName(n)),{id:r,uri:n,attrs:i}},fetchClass:function(e,t,i,r,n,o,a){!(a=a||{}).hasOwnProperty("appPath")&&window["/"]&&(a.appPath=window["/"]);var u,s=xui.$cache.clsByURI,l=xui.$cache.fetching,c=function(){for(var t in l[e][3])xui.Thread.abort(l[e][3][t]);l[e]&&(l[e][0].length=0,l[e][1].length=0,l[e][2].length=0,l[e][3].length=0,l[e].length=0,delete l[e]),l=null},d=xui._rnd(a.force),f=xui._getIdUri(e,a),p=f.id,x=f.attrs;e=f.uri,!n&&xui.isSet(f=p&&xui.SC.get(p)||s[e])?xui.tryF(t,[e,f&&f.KEY],f):l[e]?(t&&l[e][0].push(t),i&&l[e][1].push(i),r&&l[e][2].push(r),o&&(l[e][3].push(o),xui.Thread.suspend(o))):(l[e]=[t=t?[t]:[],i=i?[i]:[],r=r?[r]:[],[]],a.useAjax?xui.Ajax(e,d,(function(n){xui.Class._ignoreNSCache=1,xui.Class._last=null;var o=xui.getClassName(e);a.alien&&(u=xui.window,xui.window={});try{xui.exec(n,o)}catch(e){for(var l=0,d=i.length;l<d;l++)xui.tryF(i[l],[e]);xui.Class._last=null}if(xui.Class._last&&(f=s[e]=xui.Class._last),xui.Class._ignoreNSCache=xui.Class._last=null,p){if(f)for(l=0,d=t.length;l<d;l++)xui.tryF(t[l],[e,f&&f.KEY],f);else for(l=0,d=i.length;l<d;l++)xui.tryF(i[l],['"'+e+'" is not an xui class!']);var x=xui.getClassName(e);if(f&&x&&f.KEY!=x){var h="[xui] > The last class name in '"+e+"' should be '"+x+"', but it's '"+f.KEY+"'!";for(l=0,d=r.length;l<d;l++)xui.tryF(r[l],[h,e,x,f.KEY]);xui.log(h)}}else for(l=0,d=t.length;l<d;l++)xui.tryF(t[l],[e,f&&f.KEY],f);a.alien&&(xui.window=u),c()}),(function(){a.alien&&(xui.window=u),xui.Class._ignoreNSCache=xui.Class._last=null;for(var e=0,t=i.length;e<t;e++)xui.tryF(i[e],xui.toArr(arguments));c()}),o,{rspType:"text",asy:!a.sync}).start():(xui.Class._ignoreNSCache=1,xui.Class._last=null,a.alien&&(u=xui.window,xui.window={}),xui.JSONP(e,d,(function(){if(xui.Class._last&&(f=s[e]=xui.Class._last),xui.Class._ignoreNSCache=xui.Class._last=null,p){if(f)for(var n=0,o=t.length;n<o;n++)xui.tryF(t[n],[e,f&&f.KEY],f);else for(n=0,o=i.length;n<o;n++)xui.tryF(i[n],['"'+e+'" is not an xui class!']);var l=xui.getClassName(e);if(f&&l&&f.KEY!=l){var d="[xui] > The last class name in '"+e+"' should be '"+l+"', but it's '"+f.KEY+"'!";for(n=0,o=r.length;n<o;n++)xui.tryF(r[n],[d,e,l,f.KEY]);xui.log(d)}}else for(n=0,o=t.length;n<o;n++)xui.tryF(t[n],[e,f&&f.KEY],f);a.alien&&(xui.window=u),c()}),(function(){a.alien&&(xui.window=u),xui.Class._ignoreNSCache=xui.Class._last=null;for(var e=0,t=i.length;e<t;e++)xui.tryF(i[e],xui.toArr(arguments));c()}),o,{rspType:"script",keepDomNode:!a.noDomNode,attrs:x,asy:!a.sync}).start()))},fetchClasses:function(e,t,i,r,n,o,a,u){xui.arr.removeDuplicate(e);for(var s={},l=function(e,t,a){a[t]=xui.Thread(null,[function(t){xui.fetchClass(e,i,r,n,o,t,u)}])},c=0,d=e.length;c<d;c++)l(e[c],c,s);return xui.Thread.group(null,s,null,(function(){xui.Thread.suspend(a)}),(function(){!1!==xui.tryF(t,arguments,this)&&xui.Thread.resume(a)})).start()},_collectClassRequired:function(e,t,i,r){if(e.$xuiclass$){var n,o,a,u;if(xui.isArr(n=e.prototype.Dependencies))for(var s=0,l=n.length;s<l;s++)o=xui.isHash(n[s])&&n[s].id,a=xui.isHash(n[s])?n[s].uri:n[s],o&&!xui.Dom.byId(o)?i.push(n[s]):xui.querySelector('link[href="'+a+'"]').get(0)||i.push(n[s]);if(xui.isArr(n=e.prototype.Required))for(s=0,l=n.length;s<l;s++)xui.isArr(n[s])?-1==t.indexOf(n[s])&&t.push(n[s]):(o=(u=xui._getIdUri(n[s],r)).id,a=u.uri,o&&xui.isSet(xui.SC.get(o))||xui.$cache.clsByURI[a]||xui.$cache.fetching[a]||-1==t.indexOf(n[s])&&t.push(n[s]));if(e["xui.Module"]&&xui.isFun(n=e.prototype.iniComponents))try{(n+"").replace(/\bappend\s*\(\s*xui\s*\.\s*create\s*\(\s*['"]([\w.]+)['"]\s*[,)]/g,(function(e,i){return xui.SC.get(i)||-1==t.indexOf(i)&&t.push(i),e})).replace(/\.\s*(setRenderer|setModuleName)\s*\(\s*['"]([a-zA-Z]+([\w]+\.?)+[\w]+)['"]\s*\)/g,(function(e,i,r){return xui.SC.get(r)||-1==t.indexOf(r)&&t.push(r),e})).replace(/['"](renderer|cellRenderer)['"]\s*:\s*['"]([a-zA-Z]+([\w]+\.?)+[\w]+)['"]\s*/g,(function(e,i,r){return xui.SC.get(r)||-1==t.indexOf(r)&&t.push(r),e})).replace(/['"]newbies['"]\s*:\s*\{([^}]+)\}/g,(function(e,i,r){for(var n=0,o=(i=i.split(/\s*,\s*/)).length;n<o;n++)(r=i[n].split(/\s*:s*/))[1]&&(r=r[1].replace(/['"\s]/g,""),xui.SC.get(r)||t.push(r));return e}))}catch(e){}e["xui.Module"]&&e.prototype.functions&&xui.each(e.prototype.functions,(function(e){xui.isHash(e)&&e.newbies&&xui.isHash(e.newbies)&&xui.each(e.newbies,(function(e){xui.SC.get(e)||-1==t.indexOf(e)&&t.push(e)}))}))}},require:function(e,t,i,r,n,o,a,u){xui.isStr(e)&&(e=[e]);var s={},l=function(a,c){var d=[],f=[];xui.filter(a,(function(e){if(xui.isArr(e))return u&&!u.stopRecursive&&Array.prototype.push.apply(d,e),!1})),xui.fetchClasses(a,(function(){for(var i,r,n,o,p=0,x=e.length;p<x;p++)r=(i=xui._getIdUri(e[p],u)).id,n=i.uri,s[r||n]=r?xui.SC.get(r):null;if(u&&!u.stopRecursive){for(p=0,x=a.length;p<x;p++)(i=xui.SC.get(a[p]))&&i.$xuiclass$&&xui._collectClassRequired(i,d,f,u);if(f.length){for(var h=0,g=f.length;h<g;h++)r=o=null,xui.isHash(f[h])?(r=f[h].id||null,n=f[h].uri,delete(o=xui.copy(f[h])).id,delete o.uri):n=f[h],n&&xui.isStr(n)&&xui.trim(url).length>0&&(r&&!xui.Dom.byId(r)?xui.CSS.includeLink(n,r,!1,o):xui.querySelector('link[href="'+n+'"]').get(0)||xui.CSS.includeLink(n,r,!1,o));f=null}}return d.length?(l(d,c),d=null,!1):(l=null,!t||t.call(null,s))}),i,r,n,o,c,u)};l(e,a)},_m:[],main:function(e){-1==xui.arr.indexOf(xui._m,e)&&xui._m.push(e),xui.isDomReady&&xui._domReadyFuns()},getPath:function(e,t,i,r){if(e=e.split("."),i){for(var n=[e[0],i],o=1,a=e.length;o<a;o++)n.push(e[o]);e.length=0,e=n}var u,s,l=xui.ini,c=function(e){return e&&"/"!=e.slice(-1)?e+"/":e};return"xui"==e[0]?(e.shift(),e.length==(i?1:0)&&e.push("xui"),u=c(r&&r.xuiPath||l.path)):(e.length==1+(i?1:0)&&".js"==t&&e.push("index"),(u=c(r&&r.appPath))?((s=r&&r.verPath)&&(u+=c(s)),(s=r&&r.ver)&&(u+=c(s))):(u=c(l.appPath))&&((s=l.verPath)&&(u+=c(s)),(s=l.ver)&&(u+=c(s)))),u+e.join("/")+(t||"/")},getClassName:function(e){if(e&&xui.isStr(e)){var t,i=e.split("#")[0].split("?")[0].split(/\/js\//g),r=i.length;if(r>=2)return i[r-2]+"/"==xui.ini.path&&(i[r-2]="xui"),((t=(t=i[r-2].split(/\//g))[t.length-1])+((i=i[r-1].replace(/\.js$/i,""))?".":"")+i.replace(/\//g,".")).replace(/^([^.]+)\.index$/,"$1")}},log:xui.fun(),echo:xui.fun(),message:xui.fun(),getErrMsg:function(e,t){return(e&&(e.stack||e.stacktrace||(console&&console.trace?console.trace():null)||e.description||e.message||e.toString())).replace(/\n/g,t||"<br />")},_pool:[],getObject:function(e){return xui._pool["$"+e]},getObjectByAlias:function(e){var t,i=[],r=0;for(var n in xui._pool)"alias"in(t=xui._pool[n])&&t.alias===e&&(i.push(t),r++);return 0===r?null:1===r?i[0]:i},getObjectByRef:function(e){var t,i=[],r=0;for(var n in xui._pool)"ref"in(t=xui._pool[n])&&t.ref===e&&(i.push(t),r++);return 0===r?null:1===r?i[0]:i},_ghostDivId:"xui.ghost::",$getGhostDiv:function(){var e,t=xui.$cache.ghostDiv,i=0,r=t.length;do{e=t[i++]}while(i<r&&e&&e.firstChild);return e&&!e.firstChild||((e=document.createElement("div")).id=xui._ghostDivId,t.push(e)),e},$xid:0,$registerNode:function(e){var t,i,r=xui.$cache.domPurgeData;return e.$xid&&(i=r[e.$xid])&&i.element==e||((i=r[t="!"+xui.$xid++]||(r[t]={})).element=e,e.$xid=i.$xid=t),e=null,i},getId:function(e){return"string"==typeof e&&(e=document.getElementById(e)),e?window===e?"!window":document===e?"!document":e.$xid||"":""},getNode:function(e){return xui.use(e).get(0)},getNodeData:function(e,t){if(e)return xui.get(xui.$cache.domPurgeData["string"==typeof e?e:xui.getId(e)],t)},setData:function(e,t){return xui.set(xui.$cache.data,e,t)},getData:function(e){return xui.get(xui.$cache.data,e)},setNodeData:function(e,t,i){if(e)return xui.set(xui.$cache.domPurgeData["string"==typeof e?e:xui.getId(e)],t,i)},$purgeChildren:function(e){var t,i,r,n,o,a,u,s=xui.$cache,l=s.profileMap,c=(s.UIKeyMapEvents,s.domPurgeData),d=xui.Event,f=d.$eventhandler,p=d.$eventhandler3,x=xui.browser.ie&&e.all?e.all:e.getElementsByTagName("*"),h=x.length,g=[];for(t=0;t<h;t++)if(o=x[t]){if(n=o.$xid){if(r=c[n]){if(a=r.eHandlers)for(i in xui.browser.isTouch&&a.onxuitouchdown&&d._removeEventListener(o,"xuitouchdown",f),a)d._removeEventListener(o,i,f),d._removeEventListener(o,i,p);for(i in r)r[i]=null;delete c[n]}xui.browser.ie?o.removeAttribute("$xid"):delete o.$xid}if((u=o.id)&&u in l){if(!(r=l[u]))continue;if("!window"===(n=r.renderId)||"!document"===n)continue;r.__gc(!0,!0),g[g.length]=u,r.$domId&&r.$domId!=r.domId&&(g[g.length]=r.$domId)}}for(t=0;t<g.length;)delete l[g[t++]];for(t=e.childNodes.length-1;t>=0;t--)e.removeChild(e.childNodes[t])},create:function(e,t){var i,r,n;if(xui.isArr(e)){i=[];for(var o=0,a=e.length;o<a;o++)Array.prototype.push.apply(i,xui.create(e[o]).get());return xui(i)}if("string"==typeof e)if(n=xui.absBox.$type[e]){for(i=[],o=1,a=arguments.length;o<a;o++)i[o-1]=arguments[o];(r=new(xui.SC(n))(!1))._ini&&r._ini.apply(r,i)}else(n=xui.SC.get(e))&&n["xui.Module"]||"xui.Module"==t?n?r=new n:(r=new xui.UI.ModulePlaceHolder,xui.require(e,(function(e,t){for(t in e){var i=e[t];if(i&&i["xui.Module"]){var n=r.get(0);if(n)if(n.renderId){var o=new i;o.create((function(){r.replaceWithModule(o)}))}else n._module=new i}}}))):/^[\w-]+$/.test(e)?((r=document.createElement(e)).id="string"==typeof id?id:xui.id(),r=xui(r)):(/</.test(e)&&(r=xui.str.toDom(e)),r&&r.n0||(r=xui.str.toDom("<xui>"+e+"</xui>")));else e["xui.Module"]?(n=xui.SC.get(e.key))&&n["xui.Module"]?r=new n(e):(r=new xui.UI.ModulePlaceHolder,(n=e.events)&&r.setModuleEvents(n),(n=e.properties)&&r.setModuleProperties(n),e.moduleClass&&e.moduleXid&&(r.get(0).moduleClass=e.moduleClass,r.get(0).moduleXid=e.moduleXid),xui.require(e.key,(function(t){if(t&&t["xui.Module"]){var i=new t(e);i.create((function(){r.replaceWithModule(i)}))}}))):r=new(xui.SC(e.key))(e);return r["xui.absObj"]&&(n=r.n0)&&n.host&&n.host!=n&&n.alias&&r.setHost(n.host,n.alias,n.ref),r},query:function(){return xui.doc.query.apply(xui.doc,arguments)},querySelector:function(){return xui.doc.querySelector.apply(xui.doc,arguments)},querySelectorAll:function(){return xui.doc.querySelectorAll.apply(xui.doc,arguments)},use:function(e){var t=xui._tempBox||(xui._tempBox=xui()),i=t._nodes;return i[0]=e,1!=i.length&&(i.length=1),t}}),new function(){var e=xui.ini={rootModuleName:"_xui_root"};window.xui_ini&&xui.merge(e,window.xui_ini,"all");var t=window,i=navigator.userAgent.toLowerCase(),r=document,n=r&&r.documentMode,o=xui.browser={kde:/webkit/.test(i),applewebkit:/applewebkit/.test(i),opr:/opera/.test(i),ie:/msie/.test(i)&&!/opera/.test(i),newie:/trident\/.* rv:([0-9]{1,}[.0-9]{0,})/.test(i),gek:/mozilla/.test(i)&&!/(compatible|webkit)/.test(i),isStrict:r&&"CSS1Compat"==r.compatMode,isWebKit:/webkit/.test(i),isFF:/firefox/.test(i),isChrome:/chrome/.test(i),isSafari:!/chrome/.test(i)&&/safari/.test(i),isWin:/(windows|win32)/.test(i),isMac:/(macintosh|mac os x)/.test(i),isAir:/adobeair/.test(i),isLinux:/linux/.test(i),isSecure:0==location.href.toLowerCase().indexOf("https"),isTouch:!!(navigator.userAgent.match(/AppleWebkit.*Mobile.*/)||r&&"ontouchend"in r&&!/hp-tablet/.test(i)||t.DocumentTouch&&r instanceof t.DocumentTouch||t.PointerEvent||t.MSPointerEvent),isIOS:/iphone|ipad|ipod/.test(i),isAndroid:/android/.test(i),isBB:/blackberry/.test(i)||/BB[\d]+;.+\sMobile\s/.test(navigator.userAgent)},a=function(e,t){return t=i.split(t)[1].split("."),e+(o.ver=parseFloat(t.length>0&&isFinite(t[1])?t[0]+"."+t[1]:t[0]))};if(t.matchMedia&&"function"==typeof t.matchMedia?(o.isTouch=t.matchMedia("(any-pointer: coarse)").matches,o.deviceType=o.isTouch?t.matchMedia("(any-hover: hover)").matches||t.matchMedia("(any-pointer: fine)").matches?"hybrid":"touchOnly":"mouseOnly"):o.deviceType=o.isTouch?"touchOnly":"mouseOnly",xui.ini.fakeTouch&&"mouseOnly"==o.deviceType&&(o.fakeTouch=!0),xui.$secureUrl=o.isSecure&&o.ie?'javascript:""':"about:blank",xui.filter(o,(function(e){return!!e})),o.newie)o["newie"+(o.ver=n)]=!0,o.cssTag1="-ms-",o.cssTag2="ms";else if(o.ie){if(xui.isNumb(n)?o["ie"+(o.ver=n)]=!0:o[a("ie","msie ")]=!0,o.ie6){try{document.execCommand("BackgroundImageCache",!1,!0)}catch(e){}t.XMLHttpRequest=function(){return new ActiveXObject("Msxml2.XMLHTTP")}}(o.ie6||o.ie7)&&(o.ie67=1),(o.ie6||o.ie7||o.ie8)&&(o.ie678=1),o.cssTag1="-ms-",o.cssTag2="ms"}else o.gek?(o[a("gek",/.+\//)]=!0,o.cssTag1="-moz-",o.cssTag2="Moz"):o.opr?(o[a("opr","opera/")]=!0,o.cssTag1="-o-",o.cssTag2="O"):o.kde&&(o[a("kde","webkit/")]=!0,o.isSafari?/applewebkit\/4/.test(i)?o["safari"+(o.ver=2)]=!0:/version/.test(i)&&(o[a("safari","version/")]=!0):o.isChrome&&(o[a("chrome","chrome/")]=!0),o.isWebKit?(o.cssTag1="-webkit-",o.cssTag2="Webkit"):(o.cssTag1="-khtml-",o.cssTag2="Khtml"));if(o.isBB&&!o.ver&&(o.ver=parseFloat(i.split("/")[1].substring(0,3)),o["bb"+o.ver]=!0),!e.path)for(var u,s=document.getElementsByTagName("script"),l=/js\/xui(-[\w]+)?\.js$/,c=s.length;--c>=0;)if((u=s[c].src.split("#")[0].split("?")[0]).match(l)){e.path=u.replace(l,"").replace(/\(/g,"%28").replace(/\)/g,"%29");break}xui.merge(e,{appPath:location.href.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,""),dummy_tag:"$_dummy_$"},"without"),e.path||(e.path=e.appPath+"/xui/"),e.basePath||(e.basePath=e.path.replace(/xui\/$/,"").replace(/runtime\/$/,"")),e.releasePath=e.appPath,e.verPath&&(e.releasePath+=(e.verPath?e.verPath+"/":"")+(e.ver?e.ver+"/":""));var d=new Image;d.onload=d.onerror=function(){var e=xui.ini.path+"appearance/_oldbrowser/";1==this.width&&1==this.height||(document.documentElement.className+=" xui-nodatauri",xui.merge(xui.ini,{img_dd:e+"ondrag.gif",img_busy:e+"busy.gif",img_pic:e+"picture.png",img_handler:e+"handler.gif",img_bg:e+"bg.gif",img_blank:e+"bg.gif",img_touchcur:e+"touchcur.png"},"without")),d.onload=d.onerror=null},d.src="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",xui.merge(xui.ini,{img_dd:"data:image/gif;base64,R0lGODlhEABAAPcAAAAAAAEBAQICAgMDAwUFBAUFBQcHBwgICAkJCQwMDA8PDx4eHiQkJDAwMD8/P0JCQl1dXf///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAQAEAAAAj/AP8JHPigQQMHAxMOTAAAgIABAgAkUPgPQsMABAoQCNAQAISEFw0cMMCxI4CFAAIY+Eey4b+LCgSmXCnzpECVBf49AEBgJEWVBwg8WCCgQMuEQEkuYDBgo8uBIlsyeCCgJMWWAB68fPpP5cCOAhm6TLpV4teQI0tyrTgzrcmPChNoVIuAYsKCB+3qtQsgQt+/fgPb/Ce4MOCvEfb6HbhYb1/Eigc35ptYZmW7kw1rRgy48+S9oEOLHk26tGnRnlMzTl0Yst7Mgyk+tnzWpO3JfSPo3q274eXcfjv21rxbeHDBwE32VphbeHPmvYEvBzmc9+eXxa3Hxm69OHPbtk2zNO68WvNh2q8lb6fuuix434Ola5/Nvbt53tLhH8/unXpw49vlhx90/E2HmH3XyTcgSO91FBAAOw==",img_busy:"data:image/gif;base64,R0lGODlhEAAQAOMAAAQCBHx+fLy+vOTm5ERCRMTGxISGhAQGBISChMTCxOzq7FRSVMzKzP7+/gAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh+QQJCQANACwAAAAAEAAQAAAESrDJSau9OOvNe1VFonCFIBRcIiQJp7BjNySDxRjMNAQBUk+FAwCAaiR6gURhsUgYhgCEZIDgDRYEwqIALTZmNay2UTB4KwKmwBIBACH5BAkJAA8ALAAAAAAQABAAgwQCBHx+fLy+vERCRKSmpOTi5BQWFNTW1KyurIyKjMTCxERGRPTy9BwaHLSytP7+/gRE8MlJq7046827n47RIJwBAEZ5phsikg9TMNZBHBMj7PR0DEDco7ATFA6JhA04IEh0AgUjEQgomcLY7EG1PmzZClJpiQAAIfkECQkADQAsAAAAABAAEAAABEewyUmrtcywWxn4BTcZH4CIUlGGaFMYbOsuSywuBLHIuC4LNEFrkBjIBoEAwmhRFBKKRDKQuBQEgsIAoWRWEoJEleitRKGWCAAh+QQJCQAPACwAAAAAEAAQAIMEAgR8fny8vrxEQkSkpqTk4uQUFhTU1tSsrqyMiozEwsRERkT08vQcGhy0srT+/v4ERfDJ6UxDM2sDgHkHcWgT5x1DOpKIhRDpQJAaqtK1iJNHkqy7RyIQSAQlw+IR5APiGAXGkiGoSoOFqqBwpAoU1yA0vJxEAAAh+QQJCQANACwAAAAAEAAQAAAES7DJWdYqMzdmWFsEsTRDMkwMoFbhMgQBcjaGCiCCJQhwkEgFG2YyQMRmjYJhmCkhNVBFoqCAQgu7nzWTECS0W4k0UQ2bz+i0en2OAAAh+QQJCQAPACwAAAAAEAAQAIMEAgR8fny8vrxEQkSkpqTk4uQUFhTU1tSsrqyMiozEwsRERkT08vQcGhy0srT+/v4ERfDJeVI6M79DcApB8jAFQy3DUIEJI7zmQ6RDZx3FKxTSQWMTl0AR23Q0o5LEYWggkEgDAGCAaqRUawbRfGq/4LB4TC5DIwAh+QQJCQANACwAAAAAEAAQAAAER7DJqUpSM7eRRkuCUGjSgAQIJyQJ+QXwxWLkAKeuxnm5VCyLVk+yIBAWQ6IRmRQABclJwcCIMg4AwGhoyAIQyYJ3O5ySo9EIACH5BAkJAA8ALAAAAAAQABAAgwQCBHx+fLy+vERCRKSmpOTi5BQWFNTW1KyurIyKjMTCxERGRPTy9BwaHLSytP7+/gRG8MlJ62SFWcuE19tUeEIRXp4Cng+2hkeSHKyUBEFSP3e+x7Od5ECg1Q6LwcB4IigHBETD4NgcngcDAGCAFR9a7g5hMCAsEQA7",img_pic:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAJOgAACToB8GSSSgAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAA92SURBVHiczZt7fFTlmce/ZzKT66S5cQsChUC4yKVsFaEUYlAWi4ClfqTq6tYVrfVSy1W01roudPWj4H6ga6ygu3SpZdeu0iKIgLFoIZREBAIGSDDhHkLIhMncJzNz3v3jPScZkklyzkzYT5/5vJ9J5pzznvf3O8/7vM/zvM9RhBAkIoqiWAALYNNaMpCkHY4AIaBV+1aFEGpCN+xlURIhQAOfBKQCGUAmkI4kQUEC9wEewAv4gfDfEgnWeC9UFEVBPvk04BtAXyAXSUKqdloQCf4q4ABaAK+iKKG/FRLiJgAJPgUJuL/W+gHpAyBTBdEon74PqR2p2v0UJAmtZkjQCL9GRKLzlzgJiHr6KUAWkJMPgyfB8BkwdDjkW4DTcGU31B6D+jNgsUJSWF6nAJ6eSFAURcFJAWl8Cz9ZOKliPcd5iSAgFEVRkTzETURcNkCb+8lIlc8fDeN/CjO/D7f2gb5WsGoGIOSCli1QthEOfgE1yKlwCWhCTo+Y00HxKzeQyjsofO+aAxHqqWIR32I30rCGgEjcJAghTDek4csAhoyHO7fCe5ehQYCI1a6C869w8LvwPHA3UAwUAnlILbJc07+fIgTNiG4+VfwKyEfaH1vHPow2S1ysSVFSIHk2DJoKk/tJGxBTsiFrLIx6FeYXwY0a8IFIDbIDNk2rUAJKEal8BOR0e/fRrOBFpml9pANJsexET5IIAaIAlHtgUhbc0NPJmWCfCDe+Bt+fBqOJRYJTmaGBtxsYuY0fsRgYgLRDKYDFLAnxrgIqEJ4MDIZh1nbHp1vJgIwbYczLoD4P7IOTbQcrmEo2mzECXpc+FCI1L4D0MVq1sRmWRDQgMhWUTKmqhg1QJmRMhLFr4AdFuia8zmxu4j3MgJed5ZJEDlID0mlfZg1LXARoFlf9IzS0QoUwyXomZIyD0f8Kdw1/jNn8jNewkGZ6IE04iJBKu/dpSBOjJW5HSAihblCUsApVQi5pA8xcnwEZzmLGX1jLzVjj1MRTnEc+xCTa/YvrrwG6PCaEbyNsjMABs9d+VgT3bSctmBbnGAIEeJrdyIArrH2rmJiOkCABABUQcMEqAYeNXrPnVpi7A7wZcd9WsJZtHMaBNH5eZNxhPr4w6Pjorm90U9A8yR2Qch5GhOFAV86Q3v58KyLD062L09NH5U22ASuAx4F5wASgD9IOWLoab0xs3QH3+xkaibAyHOajcJjyQIC3Gxq4H2l0UpA2xAIo68HWBLcI+Or/AfxzwJPAAmAKMBiw4/PdQzi8nnC4nFBoB17vy3z++RhkIKYbScUQAeEwjwqBK9Zht5udK1cyFumGpugdb4P0Bhgfhr2dwBf3Avg3+Aj4OfAUcC8wDRjOW28VEgp9GBNIJOKhpmY50vHKoIPb3BX4BT3NDL+fc88+yzRkHqBtDV4ASZdgrArHosGnexME/zp/BlYCi4D7gOnACDZtGkckUtvjPC4tXappSpY+VWIS4HKRJwSXjcQSXi8XnniCmcigxK6TsB/SHDAlDOW9An4VB4H1wEvAo8BtwCg2bhxvCLwQgkDAye23/z0wlPYASon19P/BTEDl8XDxkUf4HjIeaCNhPdiKt/Ngqp9IvNAVFfHtxTj7wi7gbeBfgPuBSaxZc5Nh8Hr77W//DbhFG2s6YOlk7UMhXjdDgGYT6hcuZPY1JPi5HUHcz15REXOfQPwSgj+Guhvgv4EXgAd46KE5tLaeNjdKIfjss13AbGAM0oW3dvIDhCCl4289id1O/rp1/MfChUwAsjjGHVj5EEG62b4AFAFznoLv/gb6Q/IUyF8KE8dCDsXFfSkp2YDNNjSOrlOR6m9HWxU6usKKz8eRrCzzPesk1Exl3b5s/pkAaaSirQ/G+4kGn4lc3AdCagZ8c1BGxm0PvP/+4HBGRp75EQJHjtQjV60UtNWgkwYcPkypquKJp3+7nfxt97JsSCM+WpBBagTDzmkX4BkADIW0GV7viIfWrPEY7zFKgsEgGzee6vR7RxsApNTVscysHYhuzS6uDDlIMxcQuBGEEKjG5vwrIN4A8T8g/gKiBoQDRABECMQVcP9oxYpzCKGaGtWvf/1HYAnSiN6i8ZoSiwAbkFNfz5ZESHC00DSkAqcREoyAj2gtAKIWPD945pkLhknYt+8Q8CzwE2AuMBZpBG2dzkXO2vTsbL555gzbEyHhylWah5TT0h0JRsGrWguBaAFRCd55y5df6pGEsrJDWK3PA08jvcepSIcoHUiKRYCuBdmZmYyqrWXHdSRBvW0RLiPgda8yAiIIohnEIfDOWb68vksSysoOa+AXAQ/Qno3OpitHSCNB3/ToY7dz49dfs/M6kKAm/Ts7RsO6lVBrBHw0CQHtvEPgmRNLE/bu/Qqr9UVgMfAgcDsyBdeHqFR8l6PWSEgF+trtjO1lElTeYCvwnAWevgWW7oQ6I+CF9ns0CV+Cb240CXv21GC1rkFGjf8EzESm4/tqmNqCoS53hqK2v2xApt1O/8pKXi8oYFb3603X0uTk6k3VJJ3bSynPsB+ZzHDkgWMp5D4MP8+BiTbaA/quRGgthMyGnAHfi8uXt5TOmhUMzp69i0jEC9QDtfIwl5Cbs/o2fdtTjn0DeYKqXeD2eLg8+k/8/vOzVMVLQJ9scg6PJPSdLRxBbos5gAYHnF29cmX1iOZmb/WoUcf0/FZ3LoSe/LMhY9yhkL5qzZqsV2fN8g2JRNKQGaIQ0hvxaf9HosHrQLtt2n2SqGEml/FYqojsqeN4ItPh6lUai4tZBMwCxrJ69TgikWqEECk+X8P+wsJTzSC8mtXvaip0nA7NII6C9zdQWQjrkEmTecB4pPp33oYzMmLc3EoYN34EjQhLFZHSU9QkQkJLCw3z53M/jz46ndbWU9FHrR5P45ZRo47Vg3CDaDVIQhCEC0QdeLbCl38no8cFQBFQgIwDrERlhXoGLzcq3agIwog2Er5C3X2S2kRIONgw6ARe75lYR60uV9N7I0acO6+BMkpCSCPCAe49cGCKdIDmAZOQnnU6PWWE2g6GmK4tXEJLTXQm4QR18YCvduW3pLQ0NnZ3ltXpbN40cmS1URJ0IvTWAq59sL8IltG+DGYDth4J6AS+Iwm++Ek42ZLvSm6+5DBydpLL1fT7wsJaMyRENze4y2DvZHgYmT3ur9kCpUsC8DAAgaPL0CUBEk625LuSHfXNZvTF5nQ2by4sPK2T0JNhjFGfcOV92PRtmUobiKxriu0IAQoqW3rM2cQg4ZMeSIgHfLQmbBo58sR5zTCaJaERau6UgdAgjYDYGoCbvj2C75qESNkRjvU2eL31+fjj0r9C3SUQPs3oGSUgCIG9sGqcDITalsPOjpCNm7r1Zjp6I3q1kB3U3WwtnsTblZVURJ9W7cp3Twh/GW7Nze++6qM7KS+v8N111x9Ww6uX4ZBeCGA0M5IESf0hq0j+23bpNQQoiqKgkm1qYDoJ/8V2lrI/FCI4ZQolx49TBlDjzndNiBwKJQS+rOww06Z94AuF1K1wvgReCMFxM2khBUKZQKHcSA3rv3fWgEYqTQ/wbT7iCcqQvr0zEODS5Mm8uK1q2M4JHA205gzINd2nPvD9ZUcoLv6AcDgI+CLgKYW6Y/AzAUdMdBWKwL4T0CI0gVgEzKSOCLWGu32HHfyEfYCb9hK4i56HnvLfVVA1OpjZp5+JQV4jeeU7zj6/s2jQ4PxwCjKQcQCO0+BYCxUn4F4VvjDQlVBlUHR+vRC+a490XAHAxiFmIwxsaLzDDmTI+VNktqUIGMnq1eMIhWoSMXh55TvO/OplS2TtWsRbb3F54kQeQ26EDkGmtZNeAqsXJgm5IRvqwgCqETjph0diLvkxlsEkIJOj/JIwgZjAAwRYwwdIN/Mp5F5dEVBISckYPbDpDfC/+x2itBRRUUH9vHnMR25tZaFldE5BihOGqfC+KmsVVc0jjKgQUOFkCJa9BNZYt+uUD4iqAs1mCZN5jEX0YwzZ9OUKTZziPMsppZwmZCjuABqABkpKrDz++J+wWEYaU/LOklfx8dkln84dbE9XLXl5kJ8vW9++ANQvXszCzZupApxoiXchhLisKBm5cE8STFJk4OMX8JkKR6xC7O3qfrEIUDQtSEPW8A0A+pNEjlaQlISMq/3aIK4AjZSUJCcM/uDOs0s+mRMTfGYm2Gzg83HhySdZ+O67HIf23QchhEBRrC2QaYPUdAhfhdYcIVq6u2fMjJBGghUZOWXBNaVoOgFebQBOXnnFyooVH19v8BYLKAq43Vz44Q/5x507OYV8CEHirBfuLiWmV1+lILUhTfvbgiRAfxkiQCj0n1itC+IBDpB3cNe5JZ/cOcierlpyc2HgwK7B61JXx1+GD2cRcBn5IIJ0zPYYkO5SYirSYfBrN2hCLnH1yDnfBLjweot7E3z0k7fbY4MHKCigqKSEecgsbwZxFElCD1ViGpt6XlAvR/Vp3wEgRHLyDLM3bZMDByoXbLzTEQ1+4MB28MnJscHrMmEC30Gmutpqhc0OoccLRLuoQohIVJMlaYoy3uxNASgvr2T69P99Z4O62e3mC7PgAQYMYCjSPn0DLd1tdhiJ1gkqqGqz6avKyyuZNu0PhMPecBjHqlWsDoX43Ax4gJYWAkj1z6C9WMuUJFwoSSh0zNT5UeCBZqC+tZVz993Hc01NfGoUPEB1NQ20v65nshJBSuIE7Nu3GVV1Gjq3vPxoR/DAReCiy8WFqVNZdvYsnxoB7/fjf+01vkSGtaZLZHVJnIA77rhEdfULPZ5XXn6UoqJo8PqKcgW5ljudThpuvpklp0/zaU/drVvH9spKmpHGWN8EuT6lsl012jdnctm162n8/s6JzmAwyJtvfojF8hxyi/pB2vfq+iH9C6vW0oB+ycmM3bWLdaEQ/o63dblw/eIXvAs8A/wYmIPc788lKttrtCX05ii0OUypQC7Tp4/i4YdnM2zYOBQlnaNH69m06WsOHtSLmp1AI+1+hJtr3/LQ45BMoM/8+Yy7+25mFBQwyuuFQ4eo37CB6tOncdO+tXYRqUnNQECYfCGzNwjQ3eY05JLUD+mc6GW0oO0vaoNs0r69aOB17y1qQzYZadlztb70N1JtWn9BwKX11Yh8M1V/LdcUoETeHAWkn6Aoih4cgfQePciYPZoAD5IEN9KZCtPBddX6UmnXighyjrdo/UUT4EGS4Nbu3buxgOmO2qPIZK3p1eQKEmyrNvBWtI3frgas9RXdX4r2bUVa+3BUX60k8OJkrxEAnQau1+mDfJptzehgo6ZEdIvur1sijcj/AcgCrHU5y1W7AAAAAElFTkSuQmCC",img_handler:"data:image/gif;base64,R0lGODlhBAAEAPcAAAAAAGSMtP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH5BAEAAP8ALAAAAAAEAAQAAAgPAP8JFCDwX4B/BAUe/BcQADs=",img_touchcur:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAATCAMAAACqTK3AAAAAnFBMVEVKS0sAAAD6+vr39/fj4+OsrKxQUVHk5OTY2NjV1dVgYWHm5ube3t7c3NzV1dXT09PPz8/q6ur19fXNzc2/v7/v7+/u7u6QkJB1dnbt7e1SU1Pd3d3b29vW1tbU1NTT09Ps7Ozl5eXe39/e3t709PS7u7u5ublmZ2fp6enn5+fj4+Ph4eHg4ODc3Nzc3NzZ2dnZ2dnW1tbU1NTT09Pxrtv7AAAANHRSTlPmAP78+fHnyPf26NGiizAcBfr49fPu7e3q6Oedh08oDPr5+Pj38vLp3NfBuLGUkXRrSzgYlzzxjwAAAKFJREFUGNNl0NUOwzAMQFE7sDLzSmPm/f+/LY2atVXv45FlyQac1ZPnaCfLdgdqr4TF/KATq+nJS1gOXWZE35L8wlhAHw+bjuxAiCqyOgozGDKJC1hTGKeXgM52QnsN0DYmxM9iik0oFlMuWY6JVYCY8JHk5CvoSc2/LNY3edAlOCox0laSr1Eu92WrwlPPeaWE6Ru6u/soSfapyketXjjrB1sXCDrwyo6RAAAAAElFTkSuQmCC",img_bg:d.src,img_blank:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVQYV2NgYAAAAAMAAWgmWQ0AAAAASUVORK5CYII="},"without");var f=xui._domReadyFuns=function(){if(!xui.isDomReady&&(r.addEventListener?(r.removeEventListener("DOMContentLoaded",f,!1),t.removeEventListener("load",f,!1)):r.detachEvent&&(r.detachEvent("onreadystatechange",f),t.detachEvent("onload",f)),"touchOnly"!=xui.browser.deviceType&&!xui.Dom.getScrollBarSize()&&xui.UI)){var e=function(t){xui.arr.each(t,(function(t){(t=xui.SC.get(t))&&(t.$DataModel.overflow&&(t.$DataModel.overflow.ini="auto",t.$DataStruct.overflow="auto"),t.$children&&t.$children.length&&e(t.$children))}))};e(xui.UI.$children)}try{if(xui.ini.customStyle&&!xui.isEmpty(xui.ini.customStyle)){var i,n=[],o=xui.ini.customStyle;xui.each(o,(function(e,t){n.push(t+" : "+e+";")})),i=".xui-custom{\r\n"+n.join("\r\n")+"\r\n}",xui.CSS.addStyleSheet(i,"xui:css:custom",1)}for(var a=0,u=xui._m.length;a<u;a++)xui.tryF(xui._m[a]);xui._m.length=0,xui.History&&xui.History.activate(),xui.isDomReady=!0}catch(e){xui.asyRun((function(){throw e}))}};if(r.addEventListener)r.addEventListener("DOMContentLoaded",f,!1),t.addEventListener("load",f,!1);else{r.attachEvent("onreadystatechange",f),t.attachEvent("onload",f);var p=function(){if(!xui.isDomReady)try{r.activeElement.id,r.documentElement.doScroll("left"),f()}catch(e){xui.setTimeout(p,9)}};p()}var x=function(){xui.isDomReady||r.readyState&&!/in/.test(r.readyState)?xui.setTimeout(f,9):xui.setTimeout(x,9)};x()},new function(){xui._uriReg=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,xui._localReg=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,xui._curHref=function(e){try{return location.href}catch(t){return(e=document.createElement("a")).href="",e.href}}(),xui._localParts=xui._uriReg.exec(xui._curHref.toLowerCase())||[]},new function(){xui.pseudocode={getScope:function(e,t,i){return{temp:i,page:t,args:e,functions:xui.$cache.functions,constant:xui.constant,global:xui.$cache.data,getCookies:xui.Cookies.get,getFI:function(e){var t=xui.getUrlParams();return t&&t[e]}}},exec:function(e,t,i,r){var n,o,a,u,s,l,c,d,f,p,x,h=this,g=t.type||"other",A=function(e,t,i){switch(xui.str.trim(i)){case"=":case"is":return e===t;case"<>":case"is-not":case"!=":return e!==t;case"exists":case"defined":return xui.isDefined(e);case"not-exists":case"undefined":return!xui.isDefined(e);case"empty":return xui.isEmpty(e);case"non-empty":return!xui.isEmpty(e);case">":return parseFloat(e)>parseFloat(t);case"<":return parseFloat(e)<parseFloat(t);case">=":return parseFloat(e)>=parseFloat(t);case"<=":return parseFloat(e)<=parseFloat(t);case"inlist":return-1!==xui.arr.indexOf(xui.isArr(t)?t:(t+"").split(/[,;\s:|]+/),e);case"exlist":return-1==xui.arr.indexOf(xui.isArr(t)?t:(t+"").split(/[,;\s:|]+/),e);case"include":return-1!=(e+"").indexOf(t+"");case"exclude":return-1==(e+"").indexOf(t+"");case"begin":case"start":case"starts":return 0===(e+"").indexOf(t+"");case"end":case"ends":return(e+"").indexOf(t+"")===(e+"").length-(t+"").length;case"objhaskey":return"object"==typeof e&&t in e;case"objnokey":return"object"==typeof e&&!(t in e);case"arrhasvalue":return!!xui.isArr(e)&&-1!==xui.arr.indexOf(e,t);case"arrnovalue":return!!xui.isArr(e)&&-1==xui.arr.indexOf(e,t);case"objarrhaskey":return!!xui.isArr(e)&&-1!==xui.arr.subIndexOf(e,"id",t);case"objarrnokey":return!!xui.isArr(e)&&-1==xui.arr.subIndexOf(e,"id",t);default:return!1}},m=function(e,t){if("string"==typeof e){var i,r,n,a=e;xui.str.startWith(e,"[data]")&&(e=e.replace("[data]",""),r=1),e=xui.adjustVar(n=e,t),xui.isDefined(e)||(e=xui.adjustVar(n)),r&&"string"==typeof e?e=xui.unserialize(xui.getFileSync(e)):e&&xui.isStr(a)&&xui.isHash(e)&&(e.actions&&xui.isArr(e.actions)&&e.actions.length||e.return)?(a=(""+a).split(".functions"))&&2==a.length&&(a=xui.adjustVar(a[0]+"}",t))&&(n=e,e=function(){return xui.pseudocode._callFunctions(n,arguments,a,t.temp,null,"refer:"+(n.desc||n.id||""))}):e&&xui.isStr(a)&&xui.isFun(e)&&(a=a.replace(/\[(\d+)\]/,".$1"),(a=xui._s2a(a)).length>1?i=a.pop().replace(/[()}\s]/g,""):(i=a[0].replace(/[{()}\s]/g,""),a=["{window"]),a=a.join(".")+"}",a=xui.adjustVar(o=a,t),xui.isDefined(a)||(a=xui.adjustVar(o)),e=function(){return a[i].apply(a,arguments)})}else if(xui.isHash(e))for(var u in e)e[u]=m(e[u],t);else if(xui.isArr(e)){u=0;for(var s=e.length;u<s;u++)e[u]=m(e[u],t)}return e},y=t.redirection,v=t.target,b=t.method,_=xui.clone(t.args||t.params)||[],w=t.conditions||[],C=m(t.adjust,e)||null,E=xui.isSet(t.timeout)?parseInt(t.timeout,10):null,S=t.resetid||null,T='"'+t.desc+'"',D={type:g,target:v,method:b,args:_,pseudo:t,scope:e};if(-1!=b.indexOf("-")){n=b.split("-"),b=n[0];for(var $=1,k=n.length;$<k;$++)n[$]&&(_[$-1]=n[$])}for($=0,k=w.length;$<k;$++)if(x=w[$],!A(xui.isDefined(l=xui.adjustVar(x.left,e))?l:xui.adjustVar(x.left),xui.isDefined(c=xui.adjustVar(x.right,e))?c:xui.adjustVar(x.right),x.symbol))return"function"==typeof i?(xui._debugInfo.apply(xui,["pseudo",xui.str.repeat("  ",r||1),"//",T,D]),i()):void xui._debugInfo.apply(xui,["pseudo",xui.str.repeat("  ",r||1),"//",T,D]);if(y&&(s=y.split(":"))&&xui.isArr(s)&&(d=g,f=v,s[0]&&(g=s[0]),s[1]&&(v=s[1]),s[2]&&(b=s[2])),v&&b&&"none"!=v&&"none"!=b){for($=y?3:"other"!=g||"callback"!=v||"call"!=b&&"set"!=b?0:1,k=_.length;$<k;$++)_[$]=m(_[$],e);!y||"other"==g&&"callback"==v&&"call"==b||(_=_.slice(3));var I=function(){if(xui._debugInfo.apply(xui,["pseudo",xui.str.repeat("  ",r||1),T,D]),!1!==xui.tryF(h._Handlers,[g,b,_,C,v,t]))switch(g){case"page":if("switch"==b){xui.History._callbackTag||(xui.History._callbackTag=function(e,t){if(!t){var i=xui.urlDecode(e||"");return i.cls||(i.cls="App",i.cache=!0),xui("body").children().each((function(e){var t=xui.Module.getFromDom(e);t&&t._showed&&(i.cache?t.hide():t.destroy())})),xui.showModule(i.cls),!1}});var i={cls:v,cache:!!_[0]};return _[1]&&!xui.isEmpty(_[1])&&(i=xui.merge(i,_[1])),void xui.History.setFI(i,!0)}if("open"==b)return i={cls:v},_[0]&&!xui.isEmpty(_[0])&&(i=xui.merge(i,_[0])),void window.open("#!"+xui.urlEncode(i));var s;if(v&&"*"!=v){if(E=xui.get(window,v.split(".")))for(var l in E._cache){s=E._cache[l];break}}else s=e.page;if("destroy"==b)return void(s&&xui.isFun(n=xui.get(s,[b]))&&n.apply(s,_));if("show"==b&&_.unshift((function(e,t){e&&xui.message(e)})),s)xui.isFun(n=xui.get(s,[b]))&&n.apply(s,_);else{var c=e.temp._module_funs_=e.temp._module_funs_||{},x=c[v]=c[v]||[];x.push((function(e,t){xui.isFun(t=xui.get(e,[b]))&&t.apply(e,_)})),1===x.length&&xui.getModule(v,(function(t,i){if(!t){if(i)for(var r=0,n=x.length;r<n;r++)x[r].call(null,i);x.length=0,c=x=null,delete e.temp._module_funs_[v]}}))}break;case"control":case"module":var A,m;if("{"==v.charAt(0)&&(n=xui.adjustVar(v,e))&&(xui.isFun(n.getRef)&&(m=n.getRef()),xui.isFun(n.getAlias)&&(A=n.getAlias())),A||m)if("disable"==b||"enable"==b)m&&xui.isFun(n=xui.get(e.page,[m,"setDisabled"]))?n.apply(e.page[m],["disable"==b,!0]):A&&xui.isFun(n=xui.get(e.page,[A,"setDisabled"]))&&n.apply(e.page[A],["disable"==b,!0]);else{if("setProperties"==b){var y=xui.merge(_[0],_[1],"all");_[1]=null,(a=y)&&(a.CA&&(m&&xui.isFun(n=xui.get(e.page,[m,"setCustomAttr"]))?n.apply(e.page[m],[a.CA]):A&&xui.isFun(n=xui.get(e.page,[A,"setCustomAttr"]))&&n.apply(e.page[A],[a.CA]),delete a.CA),a.CC&&(m&&xui.isFun(n=xui.get(e.page,[m,"setCustomClass"]))?n.apply(e.page[m],[a.CC]):A&&xui.isFun(n=xui.get(e.page,[A,"setCustomClass"]))&&n.apply(e.page[A],[a.CC]),delete a.CC),a.CS&&(m&&xui.isFun(n=xui.get(e.page,[m,"setCustomStyle"]))?n.apply(e.page[m],[a.CS]):A&&xui.isFun(n=xui.get(e.page,[A,"setCustomStyle"]))&&n.apply(e.page[A],[a.CS]),delete a.CS))}else"show"==b&&_.unshift((function(e,t){e&&xui.message(e)}));m&&xui.isFun(n=xui.get(e.page,[m,b]))?n.apply(e.page[m],_):A&&xui.isFun(n=xui.get(e.page,[A,b]))&&n.apply(e.page[A],_)}break;case"other":switch(v){case"url":switch(b){case"close":window.close();break;case"open":xui.Dom.submit(_[0],_[1],_[2],_[3]);break;case"mailTo":xui.mailTo.apply(xui,_);break;case"selectFile":xui.Dom.selectFile.apply(xui.Dom,_);break;case"readText":xui.getFileAsync.apply(xui,_);break;case"readJSON":_[4]={rspType:"json"},xui.getFileAsync.apply(xui,_)}break;case"msg":"busy"==b||"free"==b?xui.isFun(n=xui.get(xui.Dom,[b]))&&n.apply(xui.Dom,_):"console"==b&&xui.isDefined(window.console)&&"function"==typeof console.log?console.log.apply(console,_):xui.isFun(n=xui.get(xui,[b]))&&n.apply(xui,_);break;case"var":if(_[0].length){var w=_[1];if(_[2]&&(w=xui.get(w,xui._s2a(_[2]))),C)switch(C){case"serialize":w=xui.serialize(w);break;case"unserialize":w=xui.unserialize(w);break;case"stringify":w=xui.stringify(w);break;default:"function"==typeof C&&(w=C(w))}xui.set(e,xui._s2a(b+"."+xui.str.trim(_[0])),w)}break;case"callback":switch(b){case"setCookies":_[0]&&!xui.isEmpty(_[0])&&xui.Cookies.set(_[0]);break;case"setFI":_[0]&&!xui.isEmpty(_[0])&&xui.History.setFI(_[0],!0,!0);break;case"set":xui.set(e,xui._s2a("temp."+xui.str.trim(_[0])),_[1]);break;case"call":var E;if("page"==d&&(p=e.page,E=xui.get(window,f.split("."))))for(var l in E._cache){e.page=E._cache[l];break}var S,$,k,I=_.slice(3);if(n=_[0],xui.isStr(n)&&/^\{[\w][\w.]*[\w](\([^)]*\))?\}$/.test(n.replace(/\s/g,"").replace(/\[(\d+)\]/,".$1"))&&(n=n.replace(/\[(\d+)\]/,".$1"),(n=xui._s2a(n)).length>1?a=n.pop().replace(/[()}\s]/g,""):(a=n[0].replace(/[{()}\s]/g,""),n=["{window"]),n=n.join(".")+"}",n=xui.adjustVar(o=n,e),xui.isDefined(n)||(n=xui.adjustVar(o)),n&&n[a]))if(xui.isFun(n[a]))S=1;else if((n[a].actions&&xui.isArr(n[a].actions)&&n[a].actions.length||n[a].return)&&(n=n[a],$=1,I&&I.length&&n.params&&n.params.length)){l=0;for(var F=I.length;l<F;l++)(k=n.params[l]&&n.params[l].type)&&(I[l]="String"==k?xui.isSet(I[l])?I[l]+"":I[l]:"Number"==k?parseFloat(I[l])||0:"Boolean"==k?!!I[l]:I[l])}S?n=n[a].apply(n,I):$&&((u=(""+t.args[0]).split(".functions"))&&2==u.length&&(u=xui.adjustVar(u[0]+"}",e)),n=h._callFunctions(n,I,u||e.page,e.temp,null,"nested:"+(n.desc||n.id||""),(r||1)+1)),(S||$)&&_[1]&&_[2]&&xui.get(e,xui._s2a(_[1]))&&xui.set(e,xui._s2a(_[1]+"."+_[2]),n),p&&(e.page=p,p=null)}}}};null!==E?S?xui.resetRun(S,I,E):xui.asyRun(I,E):I()}return t.return},apply:function(e,t,i){var r=xui.$cache.functions;return xui.isStr(e)&&(e=r&&r[e]),xui.isObj(e)?xui.pseudocode._callFunctions(e,t||[],i||this):null},_callFunctions:function(e,t,i,r,n,o,a){r=r||{};var u,s,l,c,d=this,f=0,p=e.actions||e||[],x=e.return,h=e.newbies,g=1==p.length&&("function"==typeof p[0]||"string"==typeof p[0]),A=d.getScope(t,i,r),m=function(e){var t;xui.isStr(this)&&(A.temp[this+""]=e||"");for(var r=f,o=p.length;r<o;r++)if(f=r+1,u=p[r],i&&"string"==typeof u&&(u=i[u]),n&&"string"==typeof u&&(u=n[u]),"function"==typeof u){if(!1===(t=xui.tryF(u,A.args,A.page))){f=r;break}}else if(xui.isHash(u)){if(u.disabled)continue;if("onOK"in u||"onKO"in u){var s,l=function(e,t,i){if(m)return xui.isStr(i)&&(A.temp[i]=!0),!1!==s&&m.apply(e,t||[])};"onOK"in u&&((u.args||u.params||(u.args=[]))[parseInt(u.onOK,10)||0]=function(){l&&l("okData",arguments,u.okFlag)}),"onKO"in u&&((u.args||u.params||(u.args=[]))[parseInt(u.onKO,10)||0]=function(){l&&l("koData",arguments,u.koFlag)}),s=d.exec(A,u,l,a);break}if(!1===d.exec(A,u,null,a)){xui._debugInfo("pseudo",xui.str.repeat("  ",a||1),"The action returns false to stop the follow-up actions!"),f=r;break}}return f==r&&(f=m=null),t};if(!g&&(xui._debugGroup("pseudo",xui.str.repeat("  ",(a||1)-1),'"'+o+'"',{pseudo:e},{scope:A}),xui._debugInfo("pseudo",xui.str.repeat("  ",(a||1)-1),"{"),h))for(var y in r.newbies={},h)(l=xui.create(h[y])).setHost&&A.page&&l.setHost(A.page,l.getAlias()+"-"+xui.rand()),r.newbies[y]=l;return c=m(),x?(x=xui.adjustVar(s=x,A),xui.isDefined(x)||(x=xui.adjustVar(s))):x=c,g||(xui._debugInfo("pseudo",xui.str.repeat("  ",a||1),"return",x),xui._debugInfo("pseudo",xui.str.repeat("  ",(a||1)-1),"}"),xui._debugGroupEnd("pseudo",xui.str.repeat("  ",(a||1)-1))),x}}},new function(){var M={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\","/":"\\/","\v":"\\u000b"},H={"@window":"window","@this":"this"},A1=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/:/[\\\"\x00-\x1f\x7f-\xff]/,A2=/\uffff/.test("")?/[\\\"\x00-\x1f\x7f-\uffff]/g:/[\\\"\x00-\x1f\x7f-\xff]/g,D=/^(-\d+|\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})(?:\.(\d{1,3}))?((?:[+-](\d{2})(\d{2}))|Z)?$/,E=function(e,t,i,r,n,o,a){for(t in a||(a=[e]),e)"string"==(i=typeof(r=e[t]))&&(r=D.exec(r))?(o="Z"!=(n=r[8]&&r[8].charAt(0))?("-"==n?-1:1)*(60*(+r[9]||0))+(+r[10]||0):0,(o+=(n=new Date(+r[1],+r[2]-1,+r[3],+r[4],+r[5],+r[6],+r[7]||0)).getTimezoneOffset())&&n.setTime(n.getTime()+6e4*o),e[t]=n):"object"==i&&e[t]&&(xui.isHash(e[t])||xui.isArr(e[t]))&&-1==xui.arr.indexOf(a,e[t])&&(E(e[t],0,0,0,0,0,a),a.push(e[t]));return e},F="function",N="number",L="boolean",S="string",O="object",T={},PS=function(e,t){return("000"+(e||0)).slice(-t)},Z=((a=-(new Date).getTimezoneOffset()/60)>0?"+":"-")+(1==(a=""+Math.abs(a)).length?"0":"")+a+"00",a,safeW;T[void 0]=function(){return"null"},T[L]=function(e){return String(e)},T[N]=function(e){return(e||0===e)&&isFinite(e)?String(e):"null"},T[S]=function(e){return H[e]||'"'+(A1.test(e)?e.replace(A2,(function(e,t){return(t=M[e])?t:"\\u"+((t=e.charCodeAt())<16?"000":t<256?"00":t<4096?"0":"")+t.toString(16)})):e)+'"'},T[O]=function(e,t,i,r,n,o,a){var u={prototype:1,constructor:1,toString:1,valueOf:1,toLocaleString:1,propertyIsEnumerable:1,isPrototypeOf:1,hasOwnProperty:1};if(r=r||1,n=n||0,o=o||xui.SERIALIZEMAXLAYER,a=a||xui.SERIALIZEMAXSIZE,r>o||n>a)return xui.$_outofmilimted;if(n++,e){var s,l,c,d,f=[],p=[];if(e===window)return"window";if(e===document)return"document";if(!(typeof e!=O&&typeof e!=F||xui.isFun(e.constructor)))return e.nodeType?"document.getElementById('"+e.id+"')":"$alien";if(xui.isArr(e)){for(f[0]="[",c=e.length,l=0;l<c;++l)"function"==typeof t&&0==t.call(e,e[l],l,p)||(xui.isNaN(d=e[l])?p[p.length]="NaN":xui.isNull(d)?p[p.length]="null":xui.isDefined(d)?(s=T[typeof d])&&typeof(d=s(d,t,i,r+1,n,o,a))==S&&(p[p.length]=d):p[p.length]="undefined");f[2]="]"}else if(xui.isDate(e))switch(i){case"utc":return'"'+PS(e.getUTCFullYear(),4)+"-"+PS(e.getUTCMonth()+1,2)+"-"+PS(e.getUTCDate(),2)+"T"+PS(e.getUTCHours(),2)+":"+PS(e.getUTCMinutes(),2)+":"+PS(e.getUTCSeconds(),2)+"."+PS(e.getUTCMilliseconds(),3)+'Z"';case"gmt":return'"'+PS(e.getFullYear(),4)+"-"+PS(e.getMonth()+1,2)+"-"+PS(e.getDate(),2)+"T"+PS(e.getHours(),2)+":"+PS(e.getMinutes(),2)+":"+PS(e.getSeconds(),2)+"."+PS(e.getMilliseconds(),3)+Z+'"';case"date":return"new Date("+[e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()].join(",")+")";default:return'"'+xui.Date.format(e,i||"yyyy-mm-dd hh:mm:ss")+'"'}else{if(xui.isReg(e))return String(e);if(typeof e.serialize==F&&(e=e.serialize()),typeof e!=O)return String(e);if(e.nodeType)return"document.getElementById('"+e.id+"')";for(l in f[0]="{",e)u[l]||(!0===t?"_"==l.charAt(0):"function"==typeof t&&!1===t.call(e,e[l],l,p))||(xui.isNaN(d=e[l])?p[p.length]=T.string(l)+":NaN":xui.isNull(d)?p[p.length]=T.string(l)+":null":xui.isDefined(d)?(s=T[typeof d])&&typeof(d=s(d,t,i,r+1,n,o,a))==S&&(p[p.length]=T.string(l)+":"+d):p[p.length]=T.string(l)+":undefined");f[2]="}"}return f[1]=p.join(", "),f[0]+f[1]+f[2]}return"null"},T[F]=function(e){return e.$path?e.$path:String(e)},xui.$_outofmilimted='"..."',xui.serialize=function(e,t,i,r,n){return xui.isNaN(e)?"NaN":xui.isNull(e)?"null":xui.isDefined(e)?T[typeof e](e,t,xui.getDateFormat(i),0,0,r,n)||"":"undefined"},xui.stringify=function(e,t,i,r,n){return xui.fromUTF8(xui.serialize(e,t,xui.getDateFormat(i),0,0,r,n))},xui.unserialize=function(str,dateformat){if("string"!=typeof str)return str;if(!str)return!1;if(!safeW){var ifr=document.createElement(xui.browser.ie&&xui.browser.ver<9?"<iframe>":"iframe"),w,d;for(var i in document.body.appendChild(ifr),w="contentWindow"in ifr?ifr.contentWindow:"window"in ifr?ifr.window:(d=ifr.contentDocument||ifr.document).defaultView||d.parentWindow,safeW={},w)safeW[i]=null;document.body.removeChild(ifr)}str="({ _ : (function(){ with(this){ return ("+str+"); } }).call(safeW) })";try{str=eval(str)}catch(e){return!1}return xui.getDateFormat(dateformat)&&E(str),str=str._,str}},new function(){xui.id=function(){var e=this;if(e.constructor!==xui.id||e.a)return(xui.id._||(xui.id._=new xui.id)).next();e.a=[-1],e.b=[""],e.value=""},xui.id.prototype={constructor:xui.id,_chars:"abcdefghijklmnopqrstuvwxyz".split(""),next:function(e){var t,i,r,n=this;if(e=e||0===e?e:n.b.length-1,(t=n.a[e])>=25)if(t=0,0===e){for(n.a.splice(0,0,1),n.b.splice(0,0,"a"),r=n.a.length,i=1;i<r;++i)n.a[i]=0,n.b[i]="0";++e}else n.next(e-1);else++t;return n.a[e]=t,n.b[e]=n._chars[t],n.value=n.b.join("")}}},xui.Class("xui.Thread",null,{Constructor:function(e,t,i,r,n,o,a){var u=arguments.callee.upper;u&&u.call(this),u=null;var s=this,l=arguments.callee,c=xui.$cache.thread;if(s.constructor!==l||s.id)return new l(e,t,i,r,n,o,a);"string"!=typeof e&&(e="$"+s.constructor.$xid++),s.id=e,s.profile=c[e]||(c[e]={id:e,_start:!1,time:0,_left:0,_asy:.1,index:0,tasks:t||[],delay:i||0,callback:r,onStart:n,onEnd:o,cache:{},status:"ini",cycle:!!a,instance:s})},Instance:{_fun:xui.fun(),__gc:function(){var e=xui.$cache.thread,t=e[this.id];if(t)for(var i in delete e[this.id],t.tasks.length=0,t)t[i]=null},_task:function(){var e=this,t=e.profile;if(t&&t.status&&t.tasks){t._asy=.1;var i,r,n={},o=t.tasks[t.index],a=typeof o;if("function"==a)n.task=o;else if("object"==a)for(r in o)n[r]=o[r];if("function"!=typeof n.callback&&(n.callback=t.callback),"function"==typeof n.task&&(n.args=n.args||[],n.args=n.args.concat([t.id,t.tasks,t.index])),t.index++,t.time=xui.stamp(),"function"==typeof n.task&&(i=xui.tryF(n.task,n.args||[t.id,t.tasks,t.index],n.scope||e,null)),t.status){if(n.id&&(t.cache[n.id]=i),n.callback&&!1===xui.tryF(n.callback,[t.id,t.tasks,t.index],e,!0))return e.abort("callback");"run"===t.status&&e.start()}}},start:function(e,t){var i=this,r=i.profile;if(r.__delaycb&&(xui.tryF(r.__delaycb,[r.id],i),delete r.__delaycb),t&&(r.__delaycb=t),!1===r._start&&(r._start=!0,r.onStart)){var n=xui.tryF(r.onStart,[r.id],i);if(!1===n)return i.abort("start");if(!0===n)return;if(xui.isNumb(n))return void i.suspend(n)}if(r.status="run",!r.tasks.length)return i.abort("empty");if(r.index>=r.tasks.length){if(!0!==r.cycle)return i.abort("normal");i.profile.index=0}var o=r.tasks[r.index],a="number"==typeof o?o:o&&"number"==typeof o.delay?o.delay:r.delay;return r._left=e||0===e?e:a,.1!=r._asy&&xui.clearTimeout(r._asy),r._asy=xui.asyRun(i._task,r._left,[],i),r.time=xui.stamp(),i},suspend:function(e,t){var i,r=this.profile;if("pause"!=r.status)return r.status="pause",.1!==r._asy&&(xui.clearTimeout(r._asy),r.index>0&&r.index--),i=r._left-(xui.stamp()-r.time),r._left=i>=0?i:0,Number(e)&&this.resume(e,t),this},resume:function(e,t){var i=this,r=i.profile;return"run"==r.status||(e=e===undefined?r._left:!0===e?r.delay:!1===e?0:Number(e)||0,r.status="run",i.start(e,t)),i},abort:function(e){var t=this.profile;if("stop"!=t.status){t.status="stop";var i=t.onEnd,r=t.id;xui.clearTimeout(t._asy),this.__gc(),xui.tryF(i,[r,e])}},links:function(e){var t=this.profile,i=t.onEnd;return t.id,t.onEnd=function(t,r){xui.tryF(i,[t,r]),e.start()},this},insert:function(e,t){var i,r=this,n=r.profile.tasks,o=n.length;return xui.isArr(e)||(e=[e]),(t=t||r.profile.index)<0&&(t=-1),-1==t?Array.prototype.push.apply(n,e):(t>o&&(t=o),i=n.splice(t,o-t),n.push.apply(n,e),n.push.apply(n,i)),r},getCache:function(e){return this.profile.cache[e]},setCache:function(e,t){return this.profile.cache[e]=t,this},isAlive:function(){return!!xui.$cache.thread[this.id]},getStatus:function(){return this.profile.status}},After:function(){for(var e=this,t=function(t){e[t]=function(e){var i;if(xui.$cache.thread[e])return(i=xui.Thread(e))[t].apply(i,Array.prototype.slice.call(arguments,1))}},i="start,suspend,resume,abort,links,insert,isAlive,getStatus".split(","),r=0,n=i.length;r<n;r++)t(i[r])},Static:{$asFunction:1,$xid:1,__gc:function(){xui.$cache.thread={}},get:function(e){return(e=xui.$cache.thread[e])&&e.instance},isAlive:function(e){return!!xui.$cache.thread[e]},observableRun:function(e,t,i,r){var n=xui.Thread,o=xui.Dom;xui.isArr(e)||(e=[e]),xui.$cache.thread[i]?("function"==typeof t&&e.push(t),n.insert(i,e)):n(i,e,0,null,(function(e){o&&o.busy(e,r)}),(function(e){xui.tryF(t,arguments,this),o&&o.free(e)})).start()},group:function(e,t,i,r,n){var o={},a=xui.Thread,u=function(e,t,r){if("string"==typeof e&&(e=a(e)),e){var n=function(){var e=arguments.callee;xui.tryF(e.onEnd,arguments,this),e.onEnd=null,delete o[t],xui.tryF(i,[t,r],this),xui.isEmpty(o)&&a.resume(r)};n.onEnd=e.profile.onEnd,e.profile.onEnd=n,e.start()}};for(var s in t)o[s]=1;return a(e,[function(e){if(!xui.isEmpty(t))for(var i in a.suspend(e),t)u(t[i],i,e)}],0,null,r,n)},repeat:function(e,t,i,r){return xui.Thread(null,[null],t||0,e,i,r,!0).start()}}}),xui.Class("xui.absIO",null,{Constructor:function(e,t,i,r,n,o){var a=arguments.callee.upper;a&&a.call(this),a=null,"object"==typeof e?o=e:(o=o?xui.copy(o):{},xui.merge(o,{uri:e,query:t,onSuccess:i,onFail:r,threadid:n}));var u=this,s=arguments.callee,l=u.constructor;if(l!==s||u.id)return new s(o);xui.merge(o,{id:o.id||""+l._id++,uid:""+l.uid++,uri:o.uri?xui.adjustRes(o.uri,0,1,1):"",username:o.username||undefined,password:o.password||undefined,query:o.query||o.params||"",data:o.data||o.body||"",contentType:o.contentType||"",Accept:o.Accept||"",headers:o.headers||o.header||null,asy:!1!==o.asy,scriptType:o.scriptType},"all"),o.method=(o.method||l.method).toUpperCase();for(var c="retry,timeout,reqType,rspType,optimized,customQS".split(","),d=0,f=c.length;d<f;d++)o[c[d]]=c[d]in o?o[c[d]]:l[c[d]],"string"==typeof o[c[d]]&&(o[c[d]]=o[c[d]].toLowerCase());return xui.merge(u,o,"all"),"xml"==u.reqType&&(u.method="POST"),l.events&&xui.merge(u,l.events),u.query=u.customQS(u.query,o&&o.exData),"object"==typeof u.query&&"xml"!=u.reqType&&(u.query=xui.copy(u.query,(function(e){return e!==undefined}))),!u._useForm&&xui.isHash(u.query)&&"xml"!=u.reqType&&(u.query=l._buildQS(u.query,"json"==u.reqType)),u._status="init",u},Instance:{_fun:xui.fun(),_flag:0,_response:!1,_txtresponse:"",_retryNo:0,_time:function(){var e=this;e.constructor,e._clear(),e._retryNo<e.retry?(e._retryNo++,xui.tryF(e.onRetry,[e._retryNo],e),e.start()):!1!==xui.tryF(e.onTimeout,[],e)&&e._onError(new Error("Request timeout: "+e.timeout+"ms"))},_onEnd:function(){var e=this;"end"!=e._status&&(e._status="end",0!=e._flag&&(xui.clearTimeout(e._flag),e._flag=0),xui.Thread.resume(e.threadid),xui.tryF(e.$onEnd,[],e),xui.tryF(e.onEnd,[],e),e._clear())},_onStart:function(){var e=this;e._status="started",xui.Thread.suspend(e.threadid),xui.tryF(e.$onStart,[],e),xui.tryF(e.onStart,[],e)},_onResponse:function(){var e=this;!1!==xui.tryF(e.beforeSuccess,[e._response,e.rspType,e.threadid],e)&&xui.tryF(e.onSuccess,[e._response,e.rspType,e.threadid],e),e._onEnd()},_handleTimeout:function(){var e=this,t=function(){e&&"started"==e._status&&(e.controller&&e.controller.abort(),e._time())},i=function(){e.timeoutHandler?xui.confirm(timeoutHandler.title||"Time out",xui.adjustRes(timeoutHandler.message||"The request timed out ( {timeout} ms ), do you want to wait another round ( {timeout} ms) ?",!1,!0,!1,null,e),(function(){e&&"started"==e._status&&(e._flag=xui.asyRun(i,e.timeout))}),t):t()};e._flag=xui.asyRun(i,e.timeout)},_onError:function(e,t,i,r){var n=this;!1!==xui.tryF(n.beforeFail,[e,n.threadid,t,i,r],n)&&xui.tryF(n.onFail,[e,n.rspType,n.threadid,t,i,r],n),n._onEnd()},getStatus:function(){return this._status},isAlive:function(){return"end"!=this._status},abort:function(){this._onEnd()}},Static:{$abstract:!0,get:function(e,t,i,r,n,o){return(o=o||{}).method="GET",this.apply(this,arguments).start()},post:function(e,t,i,r,n,o){return(o=o||{}).method="POST",this.apply(this,arguments).start()},_id:1,uid:1,method:"GET",retry:0,timeout:6e4,reqType:"form",rspType:"json",optimized:!1,callback:"callback",_buildQS:function(e,t){return e=xui.clone(e,(function(e,t){return!(xui.isNaN(e)||!xui.isDefined(e)||xui.isFile(e))})),t?(t=xui.serialize(e))&&encodeURIComponent(t):xui.urlEncode(e)},customQS:function(e,t){return t&&("string"==typeof e?e=(e||"")+"&"+xui.urlEncode(t):xui.merge(e,t,"all")),e},_if:function(e,t,i){var r,n,o=xui.browser.ie&&xui.browser.ver<9,a=o?"<iframe "+(t?"name='xui_xdmi:"+t+"'":"")+(i?" onload='xui.XDMI._o(\""+t+"\")'":"")+">":"iframe",u=e.createElement(a);return t&&(u.id=u.name="xui_xdmi:"+t),!o&&i&&(u.onload=i),u.style.display="none",e.body.appendChild(u),[u,r="contentWindow"in u?u.contentWindow:"window"in u?u.window:(n=u.contentDocument||u.document).defaultView||n.parentWindow,r.document]},isCrossDomain:function(e){var t=xui._localParts;e=e.replace(/#.*$/,"").replace(/^\/\//,t[1]+"//");var i=xui._uriReg.exec((e||"").toLowerCase());return!(!i||i[1]===t[1]&&i[2]===t[2]&&(i[3]||("http:"===i[1]?80:443))===(t[3]||("http:"===t[1]?80:443)))},groupCall:function(e,t,i,r,n){var o,a=function(e,t,i){i[t]=xui.Thread(null,[function(t){e.threadid=t,e.start()}])};for(o in e)a(e[o],o,e);return xui.Thread.group(null,e,t,(function(){xui.Thread.suspend(n),xui.tryF(i,arguments,this)}),(function(){xui.tryF(r,arguments,this),xui.Thread.resume(n)})).start()}}}),xui.Class("xui.Fetch","xui.absIO",{Instance:{withCredentials:!0,credentials:"include",_init:"method,headers,body,referrer,referrerPolicy,mode,credentials,cache,redirect,integrity,keepalive,signal".split(","),start:function(){var e=this;if(!1!==xui.tryF(e.beforeStart,[],e)){if(!e._retryNo&&e.query&&(e.uri=e.uri.split("#")[0].split("?")[0]+"?"+e.query,e.query=null),e._retryNo||e._onStart(),e.data)if(xui.isHash(e.data))if(xui.isEmpty(e.data))e.body=null;else if("json"==e.reqType)e.body=JSON.stringify(e.data),xui.set(e,["headers","Content-type",'"application/json']);else{var t=new FormData;xui.each(e.data,(function(e,i){xui.isFile(e)?t.append(i,e,e.name):t.append(i,e)})),e.body=t}else e.body=e.data;e.controller||(e.controller=new AbortController,e.signal=e.controller.signal),xui.get(e,["headers","Authorization"])&&!e.credentials&&(e.credentials="include");var i,r,n,o,a,u={};if(xui.arr.each(e._init,(function(t){e.hasOwnProperty(t)&&e[t]&&(u[t]=e[t])})),!1!==xui.tryF(e.beforeSend,[e.uri,u],e))return fetch(e.uri,u).then((function(t){var r;i=t,o=t.status,a=t.statusText,n=t.ok;try{switch(e.rspType.toLowerCase()){case"arraybuffer":r=t.arrayBuffer();break;case"formData":r=t.formData();break;case"json":r=t.json();break;case"text":r=t.text();break;case"blob":r=t.blob();break;default:throw new Error("Unsupported rspType -- "+rspType)}}catch(e){return void(n=!1)}return r})).then((function(t){try{n?(e._response=t,e._onResponse()):e._onError(t,o,a,t)}catch(e){r=e}})).catch((function(t){"AbortError"!==t.name&&e._onError(t,o,a,i)})).finally((function(){if(r)throw r})),e.timeout>0&&e._handleTimeout(),e;e._onEnd()}else e._onEnd()},abort:function(){var e=this;e.controller&&e.controller.abort(),arguments.callee.upper.call(e)},_clear:function(){}}}),xui.Class("xui.Ajax","xui.absIO",{Instance:{_XML:null,_unsafeHeader:"Accept-Charset,Accept-Encoding,Access-Control-Request-Headers,Access-Control-Request-Method,Connection,Content-Length,Cookie,Cookie2,Date,DNT,Expect,Host,Keep-Alive,Origin,Referer,TE,Trailer,Transfer-Encoding,Upgrade,User-Agent,Via".toLowerCase().split(","),_isunsafe:function(e){return xui.browser.isWebKit&&(xui.str.startWith("Proxy-",e)||xui.str.startWith("Sec-",e)||-1!==xui.arr.indexOf(this._unsafeHeader,e.toLowerCase()))},_header:function(e,t){this._isunsafe(e)||this._XML&&this._XML.setRequestHeader(e,t)},start:function(){var e=this;if(!1!==xui.tryF(e.beforeStart,[],e)){!e._retryNo&&e.query&&(e.uri=e.uri.split("#")[0].split("?")[0]+"?"+e.query,e.query=null),e._retryNo||e._onStart();try{if(e._XML=new window.XMLHttpRequest,e.asy&&(e._XML.onreadystatechange=function(){e&&e._XML&&4==e._XML.readyState&&(e._complete.apply(e),e._clear())}),e.data)if(xui.isHash(e.data))if(xui.isEmpty(e.data))e.body=null;else{var t=new FormData;xui.each(e.data,(function(e,i){xui.isFile(e)?t.append(i,e,e.name):t.append(i,e)})),e.body=t}else e.body=e.data;if(e.username&&e.password?e._XML.open(e.method,e.uri,e.asy,e.username,e.password):e._XML.open(e.method,e.uri,e.asy),e.onUploadProgress&&request.upload&&e._XML.upload.addEventListener("progress",e._uploadProgress=function(t){xui.tryF(e.onUploadProgress,[t.loaded/t.total*100,t.loaded,t.total,t],e)}),e.onDownloadProgress&&(e._XML.onprogress=function(t){xui.tryF(e.onDownloadProgress,[t.loaded/t.total*100,t.loaded,t.total,t],e)}),e._header("Accept",e.Accept?e.Accept:"json"==e.rspType?"application/json,text/javascript,*/*;q=0.01":"xml"==e.rspType?"text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8":"*/*"),!xui.absIO.isCrossDomain(e.uri)&&(e._header("Content-type",e.contentType?e.contentType:("xml"==e.reqType?"text/xml; ":"json"==e.reqType?"application/json; ":"POST"==e.method?"application/x-www-form-urlencoded; ":"")+"charset="+(e.charset||"UTF-8")),e._header("X-Requested-With","XMLHttpRequest"),e.optimized))try{e._header("User-Agent",null),e._header("Accept-Language",null),e._header("Connection","keep-alive"),e._header("Keep-Alive",null),e._header("Cookie",null),e._header("Cookie","")}catch(e){}try{xui.isHash(e.headers)&&xui.each(e.headers,(function(t,i){e._header(i,t)}))}catch(e){}if(!1===xui.tryF(e.beforeSend,[e._XML],e))return void e._onEnd();try{e._XML.send(e.body||null)}catch(e){}if(!e.asy)return e._complete();e._XML&&e.timeout>0&&e._handleTimeout()}catch(t){e._onError(t)}return e}e._onEnd()},abort:function(){var e=this;e._XML&&(e._XML.abort(),e._clear()),arguments.callee.upper.call(e)},_clear:function(){var e=this;e._XML&&(e._XML.onreadystatechange=e._XML.onprogress=e._fun,e._uploadProgress&&e._XML.upload.removeEventListener("progress",e._uploadProgress),e._uploadProgress=e._XML=null)},_complete:function(){var e,t=this,i=t._XML.status,r=t._XML.statusText;return t._txtresponse="xml"==t.rspType?t._XML.responseXML:t._XML.responseText,t._response="blob"==t.rspType||"document"==t.rspType||"arraybuffer"==t.rspType?t._XML.response:"json"==t.rspType?/^\s*\</.test(t._txtresponse)&&(e=xui.XML.xml2json(xui.XML.parseXML(t._txtresponse)))&&e.data?e.data:!1===(e=xui.unserialize(t._txtresponse))?t._txtresponse:e:t._txtresponse,!i&&xui._localReg.test(xui._localParts[1])&&(i=t._XML.responseText?200:404),1223==i&&(i=204),i>=200&&i<300||304==i?t._onResponse():i===undefined||i<10?t._onError(new Error("Network problems--"+i),i,r,t._response):t._onError(new Error("XMLHTTP returns--"+i),i,r,t._response),t._response}},Static:{$asFunction:1}}),xui.Class("xui.JSONP","xui.absIO",{Instance:{start:function(){var e,t,i=this,r=i.constructor,n=!1;if(!1!==xui.tryF(i.beforeStart,[],i)){i._retryNo||i._onStart(),"script"==i.rspType&&(i.retry=0),e=i.id,r._pool[e]?r._pool[e].push(i):r._pool[e]=[i],r.No["_"+e]=function(t){r.$response(t,e)};var o=document,a=function(){n||(n=!0,"script"==i.rspType?"string"==typeof i.checkKey?xui.setTimeout((function(){xui.exec("!function(t){if(t=xui.get(xui.JSONP,['_pool','"+e+"',0])) {if(xui.SC.get('"+i.checkKey+"'))t._onResponse();else t._loaded();}}()")}),!1):i._onResponse():i._loaded())};t=i.node=o.createElement("script");var u=i.uri;i.query&&(u=u.split("#")[0].split("?")[0]+"?"+i.query),t.src=u,t.type=i.scriptType||"text/javascript",t.charset=i.charset||"UTF-8",t.async=!!i.asy,i.attrs&&xui.each(i.attrs,(function(e,i){t.setAttribute(i,e)})),t.onload=t.onreadystatechange=function(){if(!n){var e=this.readyState;e&&"loaded"!=e&&"complete"!=e||a(),"interactive"==e&&xui.browser.opr&&xui.Thread.repeat((function(){return!n&&(/loaded|complete/.test(document.readyState)?(a(),!1):void 0)}),50)}},"onerror"in t&&(t.onerror=function(e){i._clear(),i._onError(new Error("Not Found - "+u)),i=null}),(i.keepDomNode?o.getElementsByTagName("head")[0]:o.body).appendChild(t),t=null,i.timeout>0&&i._handleTimeout()}else i._onEnd()},_clear:function(){var e=this,t=e.node,i=e.constructor,r=e.id,n=i._pool;if(n[r]&&(n[r].length=0,delete n[r]),delete i.No["_"+r],t){if(e.node=t.onload=t.onreadystatechange=t.onerror=null,!e.keepDomNode){var o=document.createElement("div");o.appendChild(t.parentNode&&t.parentNode.removeChild(t)||t),xui.browser.ie?xui.asyRun((function(){o.innerHTML=t.outerHTML="",xui.isEmpty(n)&&(i._id=1),n=i=t=o=null})):xui.asyRun((function(){o.innerHTML="",t=o=null,xui.isEmpty(n)&&(i._id=1)}))}}else xui.isEmpty(n)&&(i._id=1)},_loaded:function(){var e=this;xui.asyRun((function(){e.id&&e.constructor._pool[e.id]&&e._onError(new Error("JSONP return script doesn't match"))}),500)}},Static:{$asFunction:1,_pool:{},No:{},$response:function(e,t){var i;if(e&&(i=this._pool[t]))for(var r=0,n=i.length;r<n;r++)i[r]._response=e,i[r]._onResponse();else this._onError(new Error("JSONP return value formatting error--"+e))},customQS:function(e,t){var i=this.constructor.callback,r="script"!=this.rspType;return"string"==typeof e?(e=(e||"")+(r?"&"+i+"=xui.JSONP.No._"+this.id:""),t&&(e=(e||"")+(r?"&"+xui.urlEncode(t):""))):r&&(e[i]="xui.JSONP.No._"+this.id,t&&xui.merge(e,t,"all")),e}}}),xui.Class("xui.XDMI","xui.absIO",{Instance:{_useForm:!0,start:function(){var e,t,i,r,n,o,a,u=this,s=window,l=u.constructor;if(!1!==xui.tryF(u.beforeStart,[],u)){u._retryNo||u._onStart(),t=u.id,l._pool[t]?l._pool[t].push(u):l._pool[t]=[u];var c=l._if(document,t,a);u.node=c[0],u.frm=c[1],(o=u.form=document.createElement("form")).style.display="none",s.postMessage?(u._msgcb=function(e){if(u.node&&e.source===u.frm)if(e=e.data,"json"==u.rspType&&(e=xui.unserialize(e)||e),e&&(i=l._pool[u.id]))for(var t=0,r=i.length;t<r;t++)i[t]._response=e,i[t]._onResponse();else u._clear(),u._onError(new Error("XDMI return value formatting error"))},s.addEventListener?s.addEventListener("message",u._msgcb,!1):s.attachEvent("onmessage",u._msgcb)):u._onload=a=function(e){if(!u.OK&&u.node){var t,i,r=u.node.contentWindow,n=xui.XDMI;if(xui.browser.opr)try{if("about:blank"==r.location)return}catch(e){}u.OK=1;var o=0;try{r.name===undefined&&(o=1)}catch(e){o=1}o&&r.location.replace(n._getDummy()+"#"+xui.ini.dummy_tag);var a=function(){var e,o=0;try{r.name===undefined&&(o=1)}catch(e){o=1}if(o)return xui.asyRun(a);if("xui_xdmi:"+u.id==r.name)return u._clear(),void u._onError(new Error("XDMI no return value"));if((e=r.name)&&(t=xui.unserialize(e))&&(i=n._pool[u.id]))for(var s=0,l=i.length;s<l;s++)i[s]._response=t,i[s]._onResponse();else u._clear(),u._onError(new Error("XDMI return value formatting error, or no matched 'id'-- "+e))};a()}},u.data=u.data||{},u.query&&(xui.merge(u.data,u.query,"without"),u.query=null),o.action=u.uri,o.method=u.method,o.target="xui_xdmi:"+t,r=u.data||{};var d,f=[];for(e in r)r[e]&&r[e]["xui.UIProfile"]&&r[e].$xuiFileCtrl?(d=r[e].boxing().getUploadObj())&&(f.push({id:r[e].$xid,file:d}),d.id=d.name=e,o.appendChild(d),n=!0):r[e]&&1==r[e].nodeType?(r[e].id=r[e].name=e,o.appendChild(r[e]),n=!0):xui.isDefined(r[e])&&((i=document.createElement("textarea")).id=i.name=e,i.value="string"==typeof r[e]?r[e]:xui.serialize(r[e],(function(e){return e!==undefined})),o.appendChild(i));n&&(u.method="POST",o.enctype="multipart/form-data",o.encoding&&(o.encoding=o.enctype)),document.body.appendChild(o),o.submit(),f.length&&xui.arr.each(f,(function(e,t){(t=xui.getObject(e.id))&&t["xui.UIProfile"]&&t.boxing()&&t.boxing().setUploadObj&&t.boxing().setUploadObj(e.file)})),i=o=null,u.timeout>0&&u._handleTimeout()}else u._onEnd()},_clear:function(){var e=this,t=e.node,i=e.form,r=e.constructor,n=window,o=document.createElement("div"),a=e.id,u=r._pool;if(u[a]&&(u[a].length=0,delete u[a]),t&&n.postMessage)n.removeEventListener?n.removeEventListener("message",e._msgcb,!1):n.detachEvent("onmessage",e._msgcb),e._msgcb=null;else if(xui.browser.gek&&t)try{t.onload=null;var s=t.contentWindow.document;s.write(" "),s.close()}catch(e){}e.form=e.node=e.frm=null,t&&o.appendChild(t.parentNode.removeChild(t)),i&&o.appendChild(i.parentNode.removeChild(i)),o.innerHTML="",xui.isEmpty(u)&&(r._id=1),i=o=null}},Static:{$asFunction:1,method:"POST",_pool:{},_o:function(e){var t=this._pool[e],i=t[t.length-1];xui.tryF(i._onload)},_getDummy:function(e){var t,i,r=this,n=(e=e||window).document,o=xui.ini,a=xui.browser,u=r.isCrossDomain;if(r.dummy)return r.dummy;if(o.dummy)return r.dummy=o.dummy;if(u(o.path)||n.getElementById("xui:img:bg")||((i=n.createElement("img")).id="xui:img:bg",i.src=o.img_bg,i.style.display="none",n.body.appendChild(i),i=null),i=n.getElementById("xui:img:bg"))return r.dummy=i.src.split("#")[0];for(var s=0,l=(t=n.getElementsByTagName("img")).length;s<l;s++)if((i=t[s]).src&&!u(i.src))return r.dummy=i.src.split("#")[0];if(a.gek)for(s=0,l=(t=n.getElementsByTagName("link")).length;s<l;s++)if("stylesheet"==(i=t[s]).rel&&!u(i.href))return r.dummy=i.href.split("#")[0];try{if(e!=e.parent&&(e=e.parent)&&!u(""+e.document.location.href))return r._getDummy(e)}catch(e){}return"/favicon.ico"},customQS:function(e,t){var i=this.constructor.callback,r=window;return"string"==typeof e&&(e=xui.urlDecode(e)),r.postMessage?e[i]=e.parentDomain=r.location.origin||r.location.protocol+"//"+r.location.hostname+(r.location.port?":"+r.location.port:""):e[i]="window.name",t&&xui.merge(e,t,"all"),e}}}),new function(){xui.SAjax=xui.JSONP,xui.IAjax=xui.XDMI,"fetch"in window||(xui.Fetch=xui.Ajax)},xui.Class("xui.SC",null,{Constructor:function(e,t,i,r,n,o){var a=arguments.callee.upper;a&&a.call(this),a=null;var u,s=xui.$cache.SC;return(u=s[e]||(s[e]=xui.get(xui.window,e.split("."))))?xui.tryF(t,[e,null,r],u):((n=n||{}).$cb=t,i&&(n.threadid=r),u=s[e]=xui.SC._call(e||"",n,i,o)),u},Static:{$asFunction:1,__gc:function(e){xui.$cache.SC={}},beforeGetScript:function(e,t,i){},get:function(e,t,i,r){if("string"==typeof e)return e=xui._s2a(e),t&&(r=xui.get(t,e)),i&&r===undefined&&(r=xui.get(i,e)),r===undefined&&(r=xui.get(xui.window,e)),r},_call:function(e,t,i,r){i=!!i;var n,o,a,u,s=xui.SC.get,l=xui.$cache.snipScript,c=function(t,i,r){var n,o=this,a=this.uri;if(t&&!s(e))if(o.$p)(o.$cache||l)[o.$tag]=t;else try{xui.exec(t,e)}catch(e){xui.asyRun((function(){throw e}))}n=xui.Class._last,xui.Class._ignoreNSCache=xui.Class._last=null,xui.tryF(o.$cb,[o.$tag,t,r],s(e)||n||{}),!s(e)&&n&&n.KEY!=e&&xui.log("[xui] > '"+e+"' doesn't in '"+a+"'. The last class '"+n.KEY+"' was triggered.")},d=function(e,t,i){var r=this;xui.tryF(r.$cb,[null,null,r.threadid],r)};return r||!(o=s(e))?(!r&&(n=l[e])&&(i=!1,c.call({$cb:t.$cb},n),delete l[e]),(r||!(o=s(e)))&&(t=t||{},a=xui.getPath(e,".js","js",t),t.$tag=e,xui.Class._ignoreNSCache=1,xui.Class._last=null,i&&!t.$p?(t.rspType="script",u=xui.JSONP):(t.asy=i,u=xui.Ajax),!1!==xui.SC.beforeGetScript(a,c,d)&&u(a,xui._rnd(t.force),c,d,null,t).start(),i||(o=s(e)))):t.$cb&&c.call(t),o},loadSnips:function(e,t,i,r,n,o,a){if(e&&e.length){var u,s={};o=xui.merge(o||{},{$p:1,$cache:t||xui.$cache.snipScript});for(var l=0,c=e.length;l<c;l++)s[e[l]]=1;for((i||r)&&(o.$cb=function(e){i&&xui.tryF(i,arguments,this),delete s[e||this.$tag],xui.isEmpty(s)&&(xui.tryF(r,[n]),r=null,xui.Thread.resume(n))}),xui.Thread.suspend(n),l=0;u=e[l++];)this._call(u,xui.merge({$tag:u},o,a),!0)}else xui.tryF(r,[n])},runInBG:function(e,t,i,r){var n,o,a=0,u=this;xui.Thread(null,[function(t){for(;e.length>a&&(o=u.get(n=e[a++])););o||u._call(n,{threadid:t},!0),e.length<a&&xui.Thread.abort(t),e.length==a&&a++}],1e3,t,i,r,!0).start()},execSnips:function(e){var t,i=e||xui.$cache.snipScript;for(t in i)try{xui.exec(i[t],t)}catch(e){xui.asyRun((function(){throw e}))}i={}},groupCall:function(e,t,i,r,n,o){if(e){var a=this;a.execSnips(),xui.Thread.suspend(r),a.loadSnips(e,0,i,(function(){a.execSnips(),xui.tryF(t,[r]),t=null,xui.Thread.resume(r)}),null,n,o)}else xui.tryF(t,[r])}}}),xui.Class("xui.absBox",null,{Constructor:function(){var e=arguments.callee.upper;e&&e.call(this),e=null,this._nodes=[],this.Class=this.constructor},Before:function(e){var t=xui.absBox;t&&((t=t.$type)[e.replace("xui.","")]=t[e]=e)},Instance:{__gc:function(){this.each((function(e){xui.tryF(e.__gc)})),this._nodes=0},_get:function(e){var t=this._nodes;return xui.isNumb(e)?t[e]:t},_empty:function(){return this._nodes.length=0,this},getProfile:function(e){return e?this._nodes:this._nodes[0]},get:function(e){return this._get(e)},size:function(){return this._nodes.length},_each:function(e,t,i){var r,n,o=this,a=o._nodes,u=a.length;if(i)for(r=u;r>=0&&(!(n=a[r])||!1!==e.call(t||o,n,r));r--);else for(r=0;r<u&&(!(n=a[r])||!1!==e.call(t||o,n,r));r++);return n=null,o},each:function(e,t,i){return this._each(e,t,i)},isEmpty:function(){return!this._nodes.length},merge:function(e){if(this==xui.win||this==xui.doc||this==xui("body")||this==xui("html"))return this;var t,i=this,r=i.constructor,n=0,o=i._nodes;if((e=e._nodes).length){for(;t=e[n++];)o[o.length]=t;i._nodes=r._unique(o)}return i},reBoxing:function(e,t){var i=this,r=xui.absBox.$type[e||"Dom"];return r?r==i.KEY?i:(r=xui.SC(r))?r.pack(i._nodes,t):void 0:xui.UI.pack([])}},Static:{$abstract:!0,$type:{},pack:function(e,t){var i=new this(!1);return i._nodes=e?!1===t?xui.isArr(e)?e:[e]:"function"==typeof this._ensureValues?this._ensureValues(e):xui.isArr(e)?e:[e]:[],i.n0=i._nodes[0],i},_unique:function(e){for(var t,i,r={},n=[],o=0,a=e.length;o<a;o++)n[o]=e[o];for(e.length=0,o=0;t=n[o++];)r[i="string"==typeof t?t:t.$xid]||(r[i]=1,e.push(t));return e},plugIn:function(e,t){return this.prototype[e]=t,this}}}),xui.Class("xui.absProfile",null,{Constructor:function(){var e=arguments.callee.upper;e&&e.call(this),e=null,this.$xid||(this.$xid=xui.absProfile.$xid.next()),this._$cache={},this._alias_pool={},this._ref_pool={},this._links={},this.link(xui._pool,"xui")},Instance:{__gc:function(){this.unLinkAll(),this._links=null,this._$cache=this._alias_pool=this._ref_pool=null},getId:function(){return this.$xid},getUid:function(e){return this.key+":"+this.$xid+(e?":"+e:"")},link:function(e,t,i,r){return xui.absProfile.prototype.$link(this,e,t,i,r)},$link:function(e,t,i,r,n){var o="$"+e.$xid;return r=r||e,t[o]&&e.unLink(i),t[o]=r,xui.isArr(t)&&xui.arr.insertAny(t,r,n,!0),e._links[i]=t,e},unLink:function(e){return xui.absProfile.prototype.$unLink(this,e)},$unLink:function(e,t){var i,r,n="$"+e.$xid;if(e._links&&(i=e._links[t]))return xui.isArr(i)&&-1!=(r=xui.arr.indexOf(i,i[n]))&&xui.arr.removeFrom(i,r),delete i[n],delete e._links[t],r},unLinkAll:function(){return xui.absProfile.prototype.$unLinkAll(this)},$unLinkAll:function(e){var t,i,r="$"+e.$xid,n=e._links;for(i in n)t=n[i],xui.isArr(t)&&xui.arr.removeValue(t,t[r]),delete t[r];return e._links={},e},getModule:function(e){var t,i=this,r=function(e){if(e.moduleClass&&e.moduleXid){var t=xui.SC.get(e.moduleClass);if(t&&(t=t.getInstance(e.moduleXid)))return r(t)}return e};if(i.moduleClass&&i.moduleXid&&(t=xui.SC.get(i.moduleClass))&&(t=t.getInstance(i.moduleXid)))return e?r(t):t},getParent:function(){return this.parent&&this.parent.boxing()},getContainerId:function(){return this.childrenId},getByRef:function(e){return(e=this._ref_pool[e])&&e.boxing()}},Static:{$xid:new xui.id,$abstract:!0}}),xui.Class("xui.Profile","xui.absProfile",{Constructor:function(e,t,i,r,n,o,a){var u=arguments.callee.upper,s=xui.toArr(arguments);u.apply(this,s),u=null;var l=this;xui.merge(l,a),l.key=t||l.key||"",l.alias=i||l.alias||"",l.properties=n?xui.copy(n):l.properties||{},l.events=o?xui.copy(o):l.events||{},l.host=e||l.host||l,l.Class=l.constructor,l.box=r||l.box,l._dftProps={},l.events&&(l.setEvents(l.events),delete l.events)},Instance:{setEvents:function(e,t){var i=this.box.$EventHandlers;if(xui.isHash(e))return xui.merge(this,e,"all",(function(e,t){return i[t]}));i[e]&&(this[e]=t)},getEvents:function(e){if(e)return this[e];var t=this,i={};return xui.each(t.box.$EventHandlers,(function(e,r){t[r]&&(i[r]=t[r])})),i},getProperties:function(e){var t=this,i=t.properties;return xui.isFun(t._propGetter)&&(i=t._propGetter(i)),xui.isFun(t.propGetter)&&(i=t.propGetter(i)),e?i[e]:xui.copy(i)},setProperties:function(e,t){var i=this;xui.isHash(e)?(xui.merge(e,i.box.$DataStruct,(function(t,i){i in e||(e[i]=xui.isObj(t)?xui.clone(t):t)})),i.properties=e,xui.isFun(i._propSetAction)&&i._propSetAction(e),xui.isFun(i.propSetAction)&&i.propSetAction(e)):i.properties[e]=t},_applySetAction:function(e,t,i,r,n,o){return e.call(this,t,i,r,n,o)},__gc:function(){var e,t=this,i=xui.toArr(arguments);if(t.$beforeDestroy&&(xui.each(t.$beforeDestroy,(function(e){xui.tryF(e,i,t)})),delete t.$beforeDestroy),xui.tryF(t.$ondestory,i,t),t.onDestroy&&t.boxing().onDestroy(),t.destroyTrigger&&t.destroyTrigger(),t.alias&&t.host&&(e=t.host[t.alias])&&(e=e._nodes)&&(0===e.length||1===e.length&&e[0]==t)){try{t.alias in t.host&&delete t.host[t.alias]}catch(e){t.host[t.alias]=void 0}t.host._alias_pool&&t.alias in t.host._alias_pool&&delete t.host._alias_pool[t.alias]}if(t.ref&&t.host&&(e=t.host[t.ref])&&(e=e._nodes)&&(0===e.length||1===e.length&&e[0]==t)){try{t.ref in t.host&&delete t.host[t.ref]}catch(e){t.host[t.ref]=void 0}t.host._ref_pool&&t.ref in t.host._ref_pool&&delete t.host._ref_pool[t.ref]}xui.absProfile.prototype.__gc.call(this),xui.tryF(t.clearCache,[],t),t.destroyed=!0,t.$afterDestroy&&(xui.each(t.$afterDestroy,(function(e){xui.tryF(e,i,t)})),delete t.$afterDestroy),t.afterDestroy&&t.boxing().afterDestroy(t),xui.breakO([t.properties,t.events,t],2),t._dftProps=null,t.destroyed=!0},boxing:function(){var e,t=this;return t.box?((e=t.Instace)&&e.get(0)==t&&1==e._nodes.length||(e=t.Instace=t.box.pack([t],!1)),e):null},serialize:function(e,t){var i,r=this,n=(i=r.box._beforeSerialized)?i(r):r,o={alias:n.alias,key:n.key,host:n.host};n.ref&&(o.ref=n.ref),o.host===r?delete o.host:n.host&&!t&&(!1!==e?o.host="@this":delete o.host);var a={},u=n.box.$DataStruct,s=n.box[n.$inDesign?"__resetDftProp_in_Desinger":"__resetDftProp"],l=xui.absObj.$specialChars;xui.merge(a,n.properties,(function(e,t){return(s&&t in s?s:u)[t]!==e&&!l[t.charAt(0)]})),xui.isEmpty(a)||(o.properties=a),xui.isEmpty(i=this.getEvents())||(o.events=i);var c=n.box.$EventHandlers;return xui.filter(o.events,(function(e,t){return e!=c[t]})),xui.isEmpty(o.events)&&delete o.events,!1===e?o:xui.serialize(o)}}}),xui.Class("xui.absObj","xui.absBox",{Constructor:function(){var e=arguments.callee.upper,t=xui.toArr(arguments);if(e.apply(this,t),e=null,!1!==t[0]&&"function"==typeof this._ini)return this._ini.apply(this,t)},Before:function(e,t,i){return xui.absBox.$type[e]=e,!0},After:function(){var e,t,i,r,n,o,a,u,s,l=this,c=arguments.callee;for(l._nameId=l._refId=0,l._nameTag=l.$nameTag||l.KEY.replace("xui.","").replace(/\./g,"_").toLowerCase(),l._cache=[],n=c.a1||(c.a1=xui.toArr("$Keys,$DataStruct,$EventHandlers,$DataModel")),a=0;s=n[a++];){if(i={},(t=l.$parent)&&(o=t.length))for(;o--;)xui.merge(i,t[o][s]);l[s]=i}for(l.setDataModel(l.DataModel),l._DataModel=l.DataModel,delete l.DataModel,l.setEventHandlers(l.EventHandlers),delete l.EventHandlers,n=c.a5||(c.a5=xui.toArr("BeforeRenderTrigger,RenderTrigger,LayoutTrigger")),a=0;s=n[a++];){if(e=[],(t=l.$parent)&&(u=t.length))for(o=0;o<u;o++)(r=(r=t[o])["$"+s])&&e.push.apply(e,r);l[s]&&e.push(l[s]),xui.arr.stableSort(e,(function(e,t){return(e=e.$order||0)>(t=t.$order||0)?1:e==t?0:-1})),l["$"+s]=e,delete l[s]}},Static:{$abstract:!0,$specialChars:{_:1,$:1},DataModel:{name:"",desc:"",tag:"",tagVar:{ini:{},action:function(){var e=this.properties.renderer;e&&/^\s*[a-zA-Z]+([\w]+\.?)+[\w]+\s*$/.test(e)&&this.boxing().refresh()}},propBinder:{hidden:1,ini:{}},dataBinder:{ini:"",set:function(e){var t=this,i=t.properties,r=i.dataBinder;r&&xui.DataBinder._unBind(r,t),i.dataBinder=e,xui.DataBinder._bind(e,t)}},dataField:{ini:""}},get:function(e){return this.pack([this._cache[e||0]])},getAll:function(){return this.pack(this._cache)},pickAlias:function(){return xui.absObj.$pickAlias(this)},pickRef:function(){return xui.absObj.$pickRef(this)},$pickAlias:function(e){for(var t,i=e._nameTag+"_",r=e._cache;t=i+ ++e._nameId;){for(var n=0,o=r.length;n<o;n++)if(r[n].alias===t){t=-1;break}if(-1!=t)return t}},$pickRef:function(e){for(var t,i="$"+e._nameTag+"_",r=e._cache;t=i+ ++e._refId;){for(var n=0,o=r.length;n<o;n++)if(r[n].ref===t){t=-1;break}if(-1!=t)return t}},setDataModel:function(e){var t,i,r,n,o,a,u=this,s=xui.absObj.$specialChars,l=u.$DataStruct,c=u.$DataModel,d=u.prototype;if(e&&e.$blacklist){for(var f in l)f in e.$blacklist&&delete l[f];for(var f in c)f in e.$blacklist&&delete c[f];delete e.$blacklist}for(f in e)if(c[f]||(c[f]={}),null===(r=e[f])||undefined===r)a=xui.str.initial(f),delete l[f],delete c[f],d[t="get"+a]&&d[t].$auto$&&delete d[t],d[t="set"+a]&&d[t].$auto$&&delete d[t];else{for(t in"object"==(i=typeof r)&&r.constructor==Object||(r={ini:r}),l[f]="ini"in r?r.ini:f in l?l[f]:"",i=c[f])t in r||(r[t]=i[t]);c[f]=r}return xui.each(e,(function(e,t){if(null!==e&&undefined!==e&&!s[t.charAt(0)]){if(a=xui.str.initial(t),n="set"+a,null===e.set||e&&(e.readonly||e.inner))delete d[n];else{var i=e.set;o=d[n],d[n]="function"!=typeof i&&"function"==typeof o?o:xui.Class._fun((function(e,r,n,o){return this.each((function(a){var u;if(a.properties&&(delete a._dftProps[t],r||c[t]&&c[t].$spaceunit&&a.$forceu&&"auto"!=e&&(u=xui.$us(a),e=a.$forceu(e,2==u?"em":-2==u?"px":null)),(a.properties[t]!==e||r)&&(!a.$beforePropSet||!1!==a.$beforePropSet(t,e,r,n,o)))){var s=a.properties[t];if(!a.beforePropertyChanged||!1!==a.boxing().beforePropertyChanged(a,t,e,s)){if("function"==typeof i)i.call(a,e,r,n,o);else{var l=xui.get(a.box.$DataModel,[t,"action"]);a.properties[t]=e,"function"==typeof l&&!1===a._applySetAction(l,e,s,r,n,o)&&(a.properties[t]=s)}a.afterPropertyChanged&&a.boxing().afterPropertyChanged(a,t,e,s),a.$afterPropertyChanged&&xui.tryF(a.$afterPropertyChanged,[a,t,e,s],a)}}}))}),n,u.KEY,null,"instance"),d[n]!==o&&(d[n].$auto$=1)}if(n="get"+a,e&&e.inner)delete d[n];else{var r=e.get;o=d[n],d[n]="function"!=typeof r&&"function"==typeof o?o:xui.Class._fun((function(){var e=this.get(0),i=xui.toArr(arguments),n=function(){return"function"==typeof r?r.apply(e,i):e.properties[t]};return"function"==typeof e.$beforePropGet?e.$beforePropGet(t,n):n()}),n,u.KEY,null,"instance"),d[n]!==o&&(d[n].$auto$=1)}}})),u},setEventHandlers:function(e){var t=this;return xui.each(e,(function(e,i){if(null===e)delete t.$EventHandlers[i],delete t.prototype[i];else{t.$EventHandlers[i]=e;var r=function(e){var t,r=arguments.length;if(1==r&&("function"==typeof e||"string"==typeof e||xui.isHash(e)||xui.isArr(e)))return this.each((function(t){t.renderId&&t.clearCache(),t.box._addEventHanlder&&t.box._addEventHanlder(t,i,e),t[i]=e}));if(1==r&&null===e)return this.each((function(e){e.clearCache(),e.box._removeEventHanlder&&e.box._removeEventHanlder(e,i,e[i]),delete e[i]}));var n=[],o=this.get(0);if(o){var a=o[i],u=o.host||o;if(a&&(!xui.isArr(a)||a.length)){if(o.$inDesign&&!xui.get(o,["host","_PASSEVTS",o.alias,i]))return;for(o.$lastEvent=i,arguments[0]!=o&&(n[0]=o),t=0;t<r;t++)n[n.length]=arguments[t];return(xui.isStr(a)||xui.isFun(a))&&(a=[a]),xui.isArr(a.actions||a)&&xui.isNumb(t=(a.actions||a)[0].event)&&(n[t]=n[t]?xui.Event.getEventPara(n[t]):{}),xui.pseudocode._callFunctions(a,n,u,null,o.$holder,(u&&u.alias||o.$holder&&o.$holder.alias)+"."+o.alias+"."+i)}}};r.$event$=1,r.$original$=e.$original$||t.KEY,r.$name$=i,r.$type$="event",t.plugIn(i,r)}})),t},unserialize:function(e,t){"string"==typeof e&&(e=xui.unserialize(e));var i=function(e){xui.isArr(e)&&(e=e[0]),delete e.serialId,e.children&&xui.arr.each(e.children,i)},r=[];return xui.arr.each(e,(function(e){t||i(e),r.push(new(xui.SC(e.key))(e).get(0))})),this.pack(r,!1)}},Instance:{clone:function(){var e=[],t=arguments,i=function(e){delete e.alias,delete e.ref;for(var r=0;r<t.length;r++)delete e[t[r]];var n;if(e.children)for(r=0;n=e.children[r];r++)i(n[0])};return this.each((function(t){t=t.serialize(!1,!0),i(t),e.push(t)})),this.constructor.unserialize(e)},serialize:function(e,t){var i=[];return this.each((function(e){i[i.length]=e.serialize(!1,t)})),!1===e?i:1==i.length?" new "+i[0].key+"("+xui.serialize(i[0])+")":"xui.UI.unserialize("+xui.serialize(i)+")"},getProperties:function(e){var t,i={},r=this.get(0).properties;if(!0===e)return xui.copy(r);if("string"==typeof e)return r[e];for(var n in r)"function"==typeof this[t="get"+xui.str.initial(n)]&&(i[n]=this[t].call(this));return i},setProperties:function(e,t,i){if("string"==typeof e){var r={};r[e]=t,e=r}return this.each((function(t){xui.each(e,(function(e,r){var n="set"+xui.str.initial(r),o=t.boxing();o&&"function"==typeof o[n]?o[n].call(o,e,!!i):t.properties[r]=e}))}))},getEvents:function(e){return this.get(0).getEvents(e)},setEvents:function(e,t){if("string"==typeof e){var i={};i[e]=t,e=i}return this.each((function(t){var i=t.boxing();xui.each(e,(function(e,t){"function"==typeof i[t]&&i[t].call(i,e)}))}))},alias:function(e){return e?this.setAlias(e):this.getAlias()},ref:function(e){return e?this.setRef(e):this.getRef()},host:function(e,t,i){return e?this.setHost(e,t,i):this.getHost()},setHost:function(e,t,i){return this._setHostAlias(e,t,i)},detachHost:function(){var e=this.get(0),t=e.host,i=e.ref,r=e.alias;if(t){if(e.host=null,r){try{r in t&&delete t[r]}catch(e){t[r]=void 0}t._alias_pool&&r in t._alias_pool&&delete t._alias_pool[r]}if(i){try{i in t&&delete t[i]}catch(e){t[i]=void 0}t._ref_pool&&i in t._ref_pool&&delete t._ref_pool[i]}}},_setHostAlias:function(e,t,i){var r,n,o=this,a=this.get(0),u=a.host,s=a.ref,l=a.alias;if(i&&s&&s!==i)throw new Error("Can not set the reference again");if(!e&&!t||u===e&&l===t&&s===i)return o;if(t&&(n=e||u)&&t in n&&xui.isSet(n[t])&&n[t]!==o){try{r=xui.get(n[t],["xui.absObj"])}catch(e){r=!1}if(!r)throw new Error("The host includes a member '"+t+"' already")}if(i&&(n=e||u)&&i in n&&n[i]!==o){try{r=xui.get(n[t],["xui.absObj"])}catch(e){r=!1}if(!r)throw new Error("The host includes a refrence member '"+i+"' already")}if(u&&l){try{l in u&&delete u[l]}catch(e){u[l]=void 0}xui.isHash(u._alias_pool)&&l in u._alias_pool&&delete u._alias_pool[l]}if(e?a.host=e:e=a.host,t?a.alias=t:t=a.alias,i&&s!==i&&(a.ref=i),e!==a){if(u==e&&l&&l!==t){try{l in e&&delete e[l]}catch(t){e[l]=void 0}xui.isHash(e._alias_pool)&&l in e._alias_pool&&delete e._alias_pool[l],a.box&&a.box._syncAlias&&a.box._syncAlias(a,l,t)}t&&(e[t]=o,xui.isHash(e._alias_pool)&&(e._alias_pool[t]=o.get(0))),i&&s!==i&&xui.isHash(e._ref_pool)&&(e._ref_pool[i]=o.get(0))}return o},setAlias:function(e){return this._setHostAlias(null,e)},getAlias:function(){return this.get(0).alias},setRef:function(e){return this._setHostAlias(null,null,e)},getRef:function(){return this.get(0).ref},getHost:function(){return this.get(0).host},reBindProp:function(e,t,i,r){var n,o,a,u;r||(t=t||xui._scope_set,i=i||xui._scope_clear);try{r||t.call(this,e),this.each((function(e){(n=e.properties).propBinder&&!xui.isEmpty(n.propBinder)&&(o=e.boxing(),xui.each(n.propBinder,(function(t,i){if(xui.isDefined(u=xui.isFun(t)?t(e):xui.adjustVar(t))&&!1!==xui.tryF(o._reBindProp,[e,u,i,t],o))switch(i){case"CA":o.setCustomAttr(u);break;case"CC":o.setCustomClass(u);break;case"CS":o.setCustomStyle(u);break;default:xui.isFun(o[a="set"+xui.str.initial(i)])&&o[a](u,!0)}})))}))}catch(e){r||i.call(this)}return this}}}),xui.Class("xui.Timer","xui.absObj",{Instance:{_ini:function(e,t,i){var r,n,o,a,u=this,s=u.constructor;for(var l in e&&e["xui.Profile"]?o=(r=e).alias:(e&&e.key&&xui.absBox.$type[e.key]?(n=e,e=null,o=n.alias):o=null,r=new xui.Profile(i,u.$key,o,s,e,t,n)),r._n=r._n||[],a=s.$DataStruct)l in r.properties||(r.properties[l]=r._dftProps[l]="object"==typeof a[l]?xui.copy(a[l]):a[l]);return r.link(s._cache,"self"),u._nodes.push(r),r.Instace=u,u.n0=r,u._after_ini&&u._after_ini(r,o),u},_after_ini:function(e){e.$inDesign||xui.asyRun((function(){e&&e.box&&e.properties.autoStart&&e.boxing().start()}))},destroy:function(){this.each((function(e){e._threadid&&xui.Thread.abort(e._threadid),e.__gc()}))},start:function(){return this.each((function(e){if(!e.$inDesign)if(e._threadid)xui.Thread.resume(e._threadid);else{var t=e.properties,i=e.boxing(),r=xui.Thread.repeat((function(t){return(!e.$onTime||!1!==e.$onTime(e,t))&&(!e.onTime||!1!==i.onTime(e,t))&&void 0}),t.interval,(function(t){e.onStart&&i.onStart(e,t)}),(function(t){e.onEnd&&i.onEnd(e,t)}));e._threadid=r.id}}))},suspend:function(){return this.each((function(e){e._threadid&&xui.Thread.suspend(e._threadid),e.onSuspend&&e.boxing().onSuspend(e,e._threadid)}))},getParent:function(){return this.parent&&this.parent.boxing()},getContainerId:function(){return this.childrenId}},Static:{_objectProp:{tagVar:1,propBinder:1},_beforeSerialized:function(e){var t={};xui.merge(t,e,"all");var i=t.properties=xui.clone(e.properties,!0);if(e.box._objectProp)for(var r in e.box._objectProp)r in i&&i[r]&&(xui.isHash(i[r])||xui.isArr(i[r]))&&xui.isEmpty(i[r])&&delete i[r];return t},DataModel:{autoStart:!0,interval:1e3},EventHandlers:{onTime:function(e,t){},onStart:function(e,t){},onSuspend:function(e,t){},onEnd:function(e,t){}}}}),xui.Class("xui.MessageService","xui.absObj",{Instance:{_ini:xui.Timer.prototype._ini,_after_ini:function(e){if(!e.$inDesign){var t,i=e.properties;(t=i.recipientType||i.msgType)&&e.boxing().setRecipientType(t,!0)}},destroy:function(){this.each((function(e){if(!e.$inDesign){var t,i=e.$xid;(t=e.properties.msgType)&&xui.arr.each(t.split(/[\s,;:]+/),(function(e){xui.unsubscribe(e,i)})),e.__gc()}}))},broadcast:function(e,t,i,r,n,o,a,u,s,l,c){return this.each((function(d){var f=d.boxing();xui.arr.each(e.split(/[\s,;:]+/),(function(e){xui.publish(e,[t,i,r,n,o,a,u,s,l,function(){xui.tryF(c,xui.toArr(arguments)),d.onReceipt&&d.boxing().onReceipt.apply(f,[d,e,xui.toArr(arguments)])}],null,f)}))}))},getParent:xui.Timer.prototype.getParent,getContainerId:xui.Timer.prototype.getContainerId},Static:{_objectProp:xui.Timer._objectProp,_beforeSerialized:xui.Timer._beforeSerialized,DataModel:{dataBinder:null,dataField:null,recipientType:{ini:"",set:function(e){var t,i=this,r=i.properties,n=i.$xid;(t=r.recipientType)&&xui.arr.each(t.split(/[\s,;:]+/),(function(e){xui.unsubscribe(e,n)})),(t=r.recipientType=e||"")&&xui.arr.each(t.split(/[\s,;:]+/),(function(e){xui.subscribe(e,n,(function(){var e=xui.toArr(arguments),t=i.boxing();e.unshift(i),i.onMessageReceived&&t.onMessageReceived.apply(t,e)}),r.asynReceive)}))}},asynReceive:!1},EventHandlers:{onMessageReceived:function(e,t,i,r,n,o,a,u,s,l,c){},onReceipt:function(e,t,i){}}}}),xui.Class("xui.ExcelFormula",null,{Static:{MAXCOUNT:256,Supported:function(){var flatten=function(e){for(var t,i=[],r=0,n=(e=xui.toArr(e)).length;r<n;r++)xui.isArr(t=e[r])?i=i.concat(t):i.push(t);return i};return{SUM:function(){for(var e,t,i=0,r=flatten(arguments),n=0,o=r.length;n<o;++n)"number"==typeof(e=r[n])?i+=e:"string"==typeof e&&(t=parseFloat(e),xui.isNaN(t)||(i+=t));return i},AVERAGE:function(){for(var e,t,i=0,r=flatten(arguments),n=0,o=r.length;n<o;++n)"number"==typeof(e=r[n])?i+=e:"string"==typeof e&&(t=parseFloat(e),xui.isNaN(t)||(i+=t));return i/o},COUNT:function(){for(var e,t=0,i=flatten(arguments),r=0,n=i.length;r<n;++r)"string"!=(e=typeof i[r])&&"number"!==e||t++;return t},MIN:function(){return Math.min.apply(Math,flatten(arguments))},MAX:function(){return Math.max.apply(Math,flatten(arguments))},ROUND:function(){return Math.round.apply(Math,arguments)},FIXED:function(){return xui.toFixedNumber.apply(xui,arguments)},CHOOSE:function(){var e=arguments;return xui.isNumb(e[0])&&e[e[0]]||""},CONCATENATE:function(){return flatten(arguments).join("")},ABS:function(e){return Math.abs(e)},ISNUMBER:function(e){return xui.isFinite(e)},NOW:function(){return new Date},TODAY:function(){return xui.Date.getTimSpanStart(new Date,"DAY")},IF:function(a,b,c){return eval(a)?b:c},AND:function(){return!!eval(xui.toArr(arguments).join("&&"))},OR:function(){return!!eval(xui.toArr(arguments).join("||"))},NOT:function(e){return!e}}}(),toColumnChr:function(e){var t="";for(e-=1;e>=0;)t=String.fromCharCode(e%26+97)+t,e=Math.floor(e/26)-1;return t.toUpperCase()},toColumnNum:function(e){e=e.split("");for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),i=0,r=e.length-1,n=0;i<e.length;i+=1,r-=1)n+=Math.pow(t.length,r)*(t.indexOf(e[i])+1);return n},toCoordinate:function(e,t,i){var r,n,o=e.toUpperCase();return t||0===t||(t=-1),r=parseInt(o.match(/[0-9]+/)[0],10)+t,n=this.toColumnNum(o.match(/[A-Z]+/)[0])+t,i?[r,n]:{col:n,row:r}},toCellId:function(e,t,i){return this.toColumnChr(e+(i||1))+(t+(i||1))},getCellRanges:function(e,t,i,r){var n=this,o=/[A-Z]+/,a=/[0-9]+/;o.test(e)||(e="A"+e),a.test(e)||(e+="1"),o.test(t)||(t=n.toColumnChr(i||n.MAXCOUNT)+t),a.test(t)||(t+=r||n.MAXCOUNT);var u,s,l=n.toCoordinate(e,0),c=n.toCoordinate(t,0),d=l.col,f=c.col,p=l.row,x=c.row,h=[];if(d<f)for(s=d;s<=f;s++)if(p<x)for(u=p;u<=x;u++)h.push(n.toColumnChr(s)+u);else for(u=p;u>=x;u--)h.push(n.toColumnChr(s)+u);else for(s=d;s>=f;s--)if(p<x)for(u=p;u<=x;u++)h.push(n.toColumnChr(s)+u);else for(u=p;u>=x;u--)h.push(n.toColumnChr(s)+u);return h},validate:function(formula){var str;if(xui.isFun(formula))str=formula+"";else{if(!/^\s*\=\s*/.test(formula))return!1;str=formula.replace(/^\s*\=\s*/,"")}if(str=str.replace(/(\b)([\?_])([0-9]+\b)/g,"1").replace(/(\b[A-Z]+)([\?_])(\b)/g,"1"),/function\s*\(/.test(str))try{str=xui.fun.body(str),new Function("",str)}catch(e){return xui._debugInfo("throw","#VALUE! ",formula,str,e),!1}else{var fake=function(){return 1},reg=new RegExp(xui.toArr(this.Supported,!0).join("|"),"g");if(str=xui.replace(str,[[/"(\\.|[^"\\])*"/,"1"],[/'(\\.|[^'\\])*'/,"1"],[/\{[^}]+\}/,"1"],[/([A-Z\d]+\s*\:\s*[A-Z\d]+)/,"1"],[/([A-Z]+[\d]+)/,"1"],[/[=<>]+/g,function(e){return"="==e[0]?"==":"<>"==e[0]?"!=":e[0]}]]),/[A-Z_$]/.test(str.replace(reg,"")))return!1;str=str.replace(reg,"fake");try{eval(str)}catch(e){return xui._debugInfo("throw","#VALUE! ",formula,str,e),!1}}return!0},getRefCells:function(e,t,i){return this._parse(e,!1,t,i)},parse:function(e){return this._parse(e,null)},calculate:function(e,t,i,r){return this._parse(e,t||!0,i,r)},_parse:function(formula,cellsMap,colLimited,rowLimited){var ret,ns=this,Supported=ns.Supported,RANGE=function(e,t,i){for(var r=ns.getCellRanges(t,i,colLimited,rowLimited),n=0,o=r.length;n<o;n++)r[n]=e[r[n]];return r},doParse=function(formula,CELLS){var cellHash,rtn,str=formula,f=function(e){if(e[8])return cellHash&&(e[8]in cellHash||(cellHash[e[8]]=1)),'CELLS["'+e[8]+'"]';if(e[6]&&e[7]){if(cellHash)for(var t=ns.getCellRanges(e[6],e[7],colLimited,rowLimited),i=0,r=t.length;i<r;i++)t[i]in cellHash||(cellHash[t[i]]=1);return'RANGE(CELLS, "'+e[6]+'","'+e[7]+'")'}return e[10]&&e[11]?'Supported["'+e[10]+'"]'+e[11]:void 0};if(cellHash={},!ns.validate(str))return!1;if(xui.isFun(str)?str+="":str=str.replace(/^\s*\=\s*/,""),/function\s*\(/.test(str)){str=xui.fun.body(str),str=xui.replace(str,[[/\/\*[^*]*\*+([^\/][^*]*\*+)*\//,"$0"],[/\/\/[^\n]*/,"$0"],[/\/(\\[\/\\]|[^*\/])(\\.|[^\/\n\\])*\/[gim]*/,"$0"],[/"(\\.|[^"\\])*"/,"$0"],[/'(\\.|[^'\\])*'/,"$0"],[/\b([A-Z]+[\d]+)\b/,function(e){return cellHash[e[0]]=1,e[0]}]]);try{if(!1===cellsMap)rtn=cellHash;else{!0===cellsMap&&(cellsMap={});var pre="var map=arguments[0]";xui.each(cellHash,(function(e,t){pre+=", \n",pre+=t+" = map['"+t+"']"})),str=pre+";\n"+str,rtn=xui.isHash(cellsMap)?new Function("",str).call(null,CELLS,formula):str}}catch(e){xui._debugInfo("throw","#VALUE! ",formula,str,e)}finally{return rtn}}else{str=xui.replace(str,[[/"(\\.|[^"\\])*"/,"$0"],[/'(\\.|[^'\\])*'/,"$0"],[/([A-Z\d]+)\s*\:\s*([A-Z\d]+)/,f],[/[A-Z]+[\d]+/,f],[/([A-Z]+)(\s*\()/,f],[/[=<>]+/g,function(e){return"="==e[0]?"==":"<>"==e[0]?"!=":e[0]}]]);try{!1===cellsMap?rtn=cellHash:(!0===cellsMap&&(cellsMap={}),rtn=xui.isHash(cellsMap)?eval(str):str)}catch(e){xui._debugInfo("throw","#VALUE! ",formula,str,e)}finally{return rtn}}};return ret=doParse(formula,cellsMap),!xui.isNaN(ret)&&ret}}}),xui.Class("xui.APICaller","xui.absObj",{Instance:{_ini:xui.Timer.prototype._ini,_after_ini:function(e,t,i){var r=e.box,n=e.properties.name;n&&r._pool[n]!==e&&(r._pool[n]=e)},destroy:function(){this.each((function(e){if(!e.destroyed){var t=e.box,i=e.properties.name;i&&delete t._pool[i],e.__gc()}}))},setQueryData:function(e,t){return this.each((function(i){t?xui.set(i.properties.queryData,(t||"").split("."),e):i.properties.queryData=e||{}}))},setQueryArgs:function(e,t){return this.each((function(i){t?xui.set(i.properties.queryArgs,(t||"").split("."),e):i.properties.queryArgs=e||{}}))},invoke:function(e,t,i,r,n,o,a){var u=this,s=u.constructor,l=u.get(0),c=l.properties,d=xui.$cache.functions,f=d["$APICaller:beforeInvoke"],p=d["$APICaller:beforeData"],x=d["$APICaller:onError"];if(!(xui.isFun(f)&&!1===f(l,c.requestId)||xui.isHash(f)&&xui.isArr(f.actions)&&!1===xui.pseudocode._callFunctions(f,[l,c.requestId],u.getHost(),null,null,"$APICaller:beforeInvoke"))){var h=c.responseType,g=c.requestType,A=c.requestId,m=c.queryURL,y=c.proxyType.toLowerCase(),v=c.queryUserName,b=c.queryPassword,_=c.queryData,w=xui.clone(c.queryArgs),C=c.oAuth2Token,E=xui.clone(c.queryOptions),S=xui.clone(c.queryHeader),T=c.requestDataSource,D=c.responseDataTarget,$=c.responseCallback;if(m=xui.adjustVar(m),"sajax"==y?y="jsonp":"iajax"==y&&(y="xdmi"),"FORM"!=g&&"JSON"!=g||(w="string"==typeof w?xui.unserialize(w):w),w||(w={}),c.avoidCache){for(var k=0,I="_rand_";w.hasOwnProperty(I);)I="_rand_"+ ++k;w[I]=xui.rand()}if(T&&T.length)for(var k in T){var F,M,N=T[k];switch(N.type){case"databinder":if(B=xui.DataBinder.getFromName(N.name)){if("force"!==n&&!B.updateDataFromUI())return;M=(N.path||"").split("."),xui.isHash(F=xui.get(w,M))?xui.merge(F,B.getData(),"without"):xui.set(w,M,B.getData())}break;case"form":if((B=xui.get(l,["host",N.name]))&&B.Class["xui.absContainer"]&&B.getRootNode()){if(!("force"===n||B.checkValid()&&B.checkRequired()))return;M=(N.path||"").split("."),xui.isHash(F=xui.get(w,M))?xui.merge(F,B.getFormValues(),"without"):xui.set(w,M,B.getFormValues())}}}var P={header:{}};if(xui.isEmpty(S)||xui.merge(P.header,S),E.header&&!xui.isEmpty(E.header)&&(xui.merge(P.header,E.header),delete E.header),("SOAP"==h||"SOAP"==g)&&(s.WDSLCache||(s.WDSLCache={}),!s.WDSLCache[m])){var O=xui.SOAP.getWsdl(m,(function(e){l.afterInvoke&&l.boxing().afterInvoke(l,e,A),xui.isFun(x)?x(e,A,l):xui.isHash(x)&&xui.isArr(x.actions)&&xui.pseudocode._callFunctions(x,[e,A,l],u.getHost(),null,null,"$APICaller:onError"),l.onError&&l.boxing().onError(l,e,A),xui.tryF(t,arguments,this),xui.tryF(r,arguments,this)}));if(!O)return;s.WDSLCache[m]=O}switch(h){case"TEXT":P.rspType="text";break;case"JSON":P.rspType="json";break;case"XML":y="ajax",P.rspType="xml";break;case"SOAP":y="ajax",P.rspType="xml";var R=xui.SOAP.getNameSpace(s.WDSLCache[m]),L=(R.lastIndexOf("/")!=R.length-1?R+"/":R)+(w.methodName||"");P.header.SOAPAction=L}switch(g){case"FORM":w="string"==typeof w?xui.unserialize(w):w;break;case"JSON":P.reqType="json","auto"==c.queryMethod&&(P.method="POST"),w="string"==typeof w?w:xui.urlEncode(w);break;case"XML":P.reqType="xml",y="ajax",P.method="POST",v&&b&&(P.username=v,P.password=b,P.header.Authorization="Basic "+s._toBase64(v+":"+b)),w="string"==typeof w?w:xui.XMLRPC.wrapRequest(w);break;case"SOAP":P.reqType="xml",y="ajax",P.method="POST",v&&b&&(P.username=v,P.password=b,P.header.Authorization="Basic "+s._toBase64(v+":"+b)),w="string"==typeof w?w:xui.SOAP.wrapRequest(w,s.WDSLCache[m])}C&&(P.header.Authorization="Bearer "+C),"ajax"!=y&&(P.asy=!0),"jsonp"==y&&(P.method="GET"),"asy"in(a=a||{})||(a.asy=!!c.queryAsync),"method"in a||"auto"==c.queryMethod||(a.method=c.queryMethod),"onEnd"in a||(a.onEnd=r),"onStart"in a||(a.onStart=i),xui.merge(a,E),xui.merge(a,P,"all"),a.proxyType=y,_&&(a.data=_),xui.isEmpty(a.header)&&delete a.header,a.timeout=xui.isNumb(E.timeout)?E.timeout:xui.isNumb(c.timeout)?c.timeout:s.timeout;var B,H={};xui.isEmpty(c.fakeCookies)||(a.$onStart=function(){xui.each(c.fakeCookies,(function(e,t){xui.isSet(B=xui.Cookies.get(t))&&(H[t]=B,xui.Cookies.remove(t))})),xui.Cookies.set(c.fakeCookies,1,"/")}),xui.isEmpty(c.fakeCookies)||(a.$onEnd=function(){xui.each(c.fakeCookies,(function(e,t){xui.Cookies.remove(t)})),xui.Cookies.set(H),c.autoDestroy&&u.destroy()});var j=xui._getrpc(m,w,a).apply(null,[m,w,function(t){var i;return"XML"!=h&&"SOAP"!=h||xui.isHash(t)||(xui.isStr(t)&&(t=xui.XML.parseXML(t)),"XML"==h?t=xui.XMLRPC.parseResponse(t):"SOAP"==h&&(t=xui.SOAP.parseResponse(t,w.methodName,s.WDSLCache[m]))),l.afterInvoke&&(i=l.boxing().afterInvoke(l,t,A),xui.isSet(i)&&(t=i),i=null),(!xui.isFun(p)||!1!==p(t,A,l))&&(!xui.isHash(p)||!xui.isArr(p.actions)||!1!==xui.pseudocode._callFunctions(p,[t,A,l],u.getHost(),null,null,"$APICaller:beforeData"))&&(!l.beforeData||!1!==l.boxing().beforeData(l,t,A))&&(D&&D.length&&xui.arr.each(D,(function(e){var i,r=e.path?xui.get(t,e.path.split(".")):t;switch(e.type){case"alert":r=xui.stringify(r),xui.Coder&&(r=xui.Coder.formatText(r)),alert(r);break;case"log":xui.log(r,l);break;case"databinder":(i=xui.DataBinder.getFromName(e.name))&&(i.setData(r),i.updateDataToUI());break;case"form":(i=xui.get(l,["host",e.name]))&&i.Class["xui.absContainer"]&&i.setFormValues(r)}})),$&&$.length&&xui.arr.each($,(function(e){var i,r;"host"===e.type?(i=u.getHost())&&(i=i.functions)&&(i=i[e.name])&&(r=u.getHost()):(i=xui.$cache.functions[e.name])&&(r=null),i&&i.actions&&xui.isArr(i.actions)&&xui.pseudocode._callFunctions(i,[t,l],r,null,null,(r&&r.alias)+"."+u.alias+"."+e.name)})),l.onData&&l.boxing().onData(l,t,A),void xui.tryF(e,arguments,this))},function(e,i,r,n,o,a){l.afterInvoke&&l.boxing().afterInvoke(l,e,A),D&&D.length&&xui.arr.each(D,(function(t,i){switch(t.type){case"alert":e=xui.stringify(e),xui.Coder&&(e=xui.Coder.formatText(e)),alert(e);break;case"log":xui.log(e)}})),xui.isFun(x)?x(e,A,l,n,o,a):xui.isHash(x)&&xui.isArr(x.actions)&&xui.pseudocode._callFunctions(x,[e,A,l,n,o,a],u.getHost(),null,null,"$APICaller:onError"),l.onError&&l.boxing().onError(l,e,A,n,o,a),xui.tryF(t,arguments,this)},o,a]);if(l._rpc=j,!l.beforeInvoke||!1!==l.boxing().beforeInvoke(l,A))if("busy"==n)xui.observableRun((function(e){j.threadid=e,j.start()}));else{if("return"==n)return j;j.start()}}},getRPCInstance:function(){var e=this.get(0);return e&&e._rpc},start:function(){var e=this.getRPCInstance();e&&e.getStatus&&"started"!=e.getStatus()&&e.start()},abort:function(){var e=this.getRPCInstance();e&&e.getStatus&&"started"==e.getStatus()&&e.abort()},getStatus:function(){var e=this.getRPCInstance();return e&&e.getStatus&&e.getStatus()}},Static:{WDSLCache:{},$nameTag:"api",timeout:6e4,_pool:{},_objectProp:{tagVar:1,propBinder:1,queryArgs:1,queryData:1,queryHeader:1,queryOptions:1,fakeCookies:1,requestDataSource:1,responseDataTarget:1,responseCallback:1},destroyAll:function(){this.pack(xui.toArr(this._pool,!1),!1).destroy(),this._pool={}},getFromName:function(e){var t=this._pool[e];return t&&t.boxing()},_toBase64:function(e){var t,i,r,n,o,a,u,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=[],c=0;do{n=(t=e.charCodeAt(c++))>>2,o=(3&t)<<4|(i=e.charCodeAt(c++))>>4,a=(15&i)<<2|(r=e.charCodeAt(c++))>>6,u=63&r,isNaN(i)?a=u=64:isNaN(r)&&(u=64),l.push(s.charAt(n)+s.charAt(o)+s.charAt(a)+s.charAt(u))}while(c<e.length);return l.join("")},_beforeSerialized:xui.Timer._beforeSerialized,DataModel:{dataBinder:null,dataField:null,requestId:"",queryAsync:!0,queryURL:"",avoidCache:!0,oAuth2Token:"",queryUserName:"",queryPassword:"",timeout:null,queryMethod:{ini:"GET",listbox:["auto","GET","POST","PUT","DELETE","HEAD","PATCH","OPTIONS"]},requestType:{ini:"FORM",listbox:["JSON","FORM","XML","SOAP","BLOB","STREAM","ASIS"]},responseType:{ini:"JSON",listbox:["JSON","TEXT","XML","SOAP","FORMDATA","BLOB","ARRAYBUFFER"]},requestDataSource:{ini:[]},responseDataTarget:{ini:[]},responseCallback:{ini:[]},queryArgs:{ini:{}},queryData:{ini:{}},queryHeader:{ini:{}},queryOptions:{ini:{}},fakeCookies:{ini:{}},proxyType:{ini:"FETCH",listbox:["auto","AJAX","JSONP","XDMI","FETCH"]},name:{set:function(e){var t=this,i=t.properties.name,r=t.box._pool,n=r[i],o=r[e];r[t.properties.name=e]=t,o&&!n&&(t._n=o._n),n&&delete r[i]}},proxyInvoker:{inner:!0,trigger:function(){var e=this.get(0).properties,t=e.responseDataTarget,i=e.responseCallback,r=function(r){e.responseDataTarget=t,e.responseCallback=i,r=xui.stringify(r),xui.Coder&&(r=xui.Coder.formatText(r)),alert(r)};e.responseDataTarget=[],e.responseCallback=[],this.invoke(r,r)}},autoDestroy:!1},EventHandlers:{beforeInvoke:function(e,t){},afterInvoke:function(e,t,i){},onData:function(e,t,i){},beforeData:function(e,t,i){},onError:function(e,t,i,r,n,o){}}}}),xui.Class("xui.MQTT","xui.absObj",{Instance:{_ini:xui.Timer.prototype._ini,_after_ini:function(e){var t=e.properties,i=function(){xui.asyRun((function(){e.$inDesign||e.host&&e.host.$inDesign||t.autoConn&&e.boxing().connect()}))};xui.get(window,"Paho.Client")?i():xui.include("Paho.Client",t.libCDN,(function(){e&&e.box&&i&&i()}),null,!1,{cache:!0})},destroy:function(){this.each((function(e){e.$inDesign||(e.boxing().disconnect(),e.__gc())}))},getParent:xui.Timer.prototype.getParent,getContainerId:xui.Timer.prototype.getContainerId,connect:function(){var e,t,i=this.get(0),r=i.properties,n=xui.str.trim(r.path),o=xui.str.trim(r.server);n.length&&"/"!=n[0]&&(n="/"+n),(e=i.$mqtt=new window.Paho.Client(o,parseInt(r.port,10),n,r.clientId)).onConnected=function(e){i.onConnSuccess&&i.boxing().onConnSuccess(i,e)},e.onConnectionLost=function(e){i&&i.box&&(i.boxing()._clear(),i.onConnLost&&i.boxing().onConnLost(i,e))},e.onMessageDelivered=function(e){i.onMsgDelivered&&i.boxing().onMsgDelivered(i,e.payloadString,e)},e.onMessageArrived=function(e){i.onMsgArrived&&i.boxing().onMsgArrived(i,e.payloadString,e)};var a={cleanSession:r.cleanSession,useSSL:r.useSSL,onSuccess:function(){i.$mqtt_connected=1,i.$mqtt_subed={},r&&r.autoSub&&xui.arr.each(r.subscribers,(function(e){var t=e.topic||e+"",r=xui.isHash(e)?xui.copy(e):{};delete r.topic,r.qos=parseInt(r.qos)||0,i.boxing().subscribe(t,r)}))},onFailure:function(e){i&&i.box&&(i.onConnFailed?i.boxing().onConnFailed(i,e):xui.log(e.errorMessage+"["+e.errorCode+"]"),i.boxing()._clear())}};if((t=r.timeout)&&(a.timeout=t),(t=r.userName)&&(a.userName=t),(t=r.password)&&(a.password=t),(t=r.keepAliveInterval)&&(a.keepAliveInterval=t),r.willTopic&&r.willMessage){var u=new window.Paho.Message(r.willMessage);u.destinationName=r.willTopic,u.qos=parseInt(r.willQos)||0,u.retained=r.willRetained,a.willMessage=u}e.connect(a)},_clear:function(){var e=this.get(0),t=e.$mqtt;t&&(delete t.onConnected,delete t.onConnectionLost,delete t.onMessageDelivered,delete t.onMessageArrived),delete e.$mqtt_connected,delete e.$mqtt_subed,delete e.$mqtt},disconnect:function(){var e=this.get(0),t=e.$mqtt;t&&e.$mqtt_connected&&t.disconnect(),this._clear()},subscribe:function(e,t){var i=this.get(0),r=i.properties,n=i.$mqtt;if(n&&i.$mqtt_connected){var o=xui.isHash(t)?xui.copy(t):{};i.$mqtt_subed||(i.$mqtt_subed={}),o.qos=parseInt(o.qos)||0,o.onSuccess=function(){i.$mqtt_subed[e]=new Date,i.onSubSuccess&&i.boxing().onSubSuccess(i,e)},o.onFailure=function(t){delete i.$mqtt_subed[e],i.onSubFailed&&i.boxing().onSubFailed(i,t,e)},o.timeout=r.timeout,n.subscribe(e,o)}},unsubscribe:function(e,t){var i=this.get(0),r=i.properties,n=i.$mqtt;if(n&&i.$mqtt_connected&&i.$mqtt_subed&&i.$mqtt_subed[e]){var o=xui.isHash(t)?xui.copy(t):{};o.onSuccess=function(){delete i.$mqtt_subed[e],i.onUnsubSuccess&&i.boxing().onUnsubSuccess(i,e)},o.onFailure=function(t){i.onUnsubFailed&&i.boxing().onUnsubFailed(i,t,e)},o.timeout=r.timeout,n.unsubscribe(e,o)}},publish:function(e,t,i,r){var n=this.get(0),o=(n.properties,n.$mqtt);o&&n.$mqtt_connected&&n.$mqtt_subed&&n.$mqtt_subed[e]&&o.publish(e,"string"==typeof t?t:xui.stringify(t),parseInt(i)||0,r||!1)}},Static:{_objectProp:{tagVar:1,propBinder:1,subscribers:1},_beforeSerialized:xui.Timer._beforeSerialized,DataModel:{dataBinder:null,dataField:null,libCDN:"https://cdn.jsdelivr.net/npm/paho-mqtt@1.1.0/paho-mqtt-min.js",autoConn:!0,autoSub:!0,subscribers:[],server:"broker.mqttdashboard.com",port:"8000",path:"mqtt",clientId:"xui_mqtt_client",timeout:30,userName:"",password:"",keepAliveInterval:60,cleanSession:!0,useSSL:!1,reconnect:!0,willTopic:"",willMessage:"",willQos:{ini:0,listbox:[0,1,2]},willRetained:!1},EventHandlers:{onConnSuccess:function(e,t){},onConnFailed:function(e,t){},onConnLost:function(e,t){},onSubSuccess:function(e,t){},onSubFailed:function(e,t,i){},onUnsubSuccess:function(e,t){},onUnsubFailed:function(e,t,i){},onMsgDelivered:function(e,t,i){},onMsgArrived:function(e,t,i){}}}}),xui.Class("xui.DataBinder","xui.absObj",{Instance:{_ini:xui.Timer.prototype._ini,destroy:function(){this.each((function(e){var t=e.box,i=e.properties.name;xui.arr.each(e._n,(function(e){e&&t._unBind(i,e)})),delete t._pool[i],e.__gc()}))},setHost:function(e,t,i){return e&&t&&this.setName(t),arguments.callee.upper.apply(this,arguments)},isDirtied:function(){for(var e=this.constructor._getBoundElems(this.get(0)),t=0,i=e.length;t<i;t++){var r,n=e[t];if(n.box["xui.absValue"]&&(r=n.boxing()).getUIValue()+" "!=r.getValue()+" ")return!0}return!1},checkValid:function(e){var t=!0,i=this.get(0);return!!this.checkRequired(e)&&(xui.absValue.pack(this.constructor._getBoundElems(i),!1).each((function(r){if(!r.boxing().checkValid()){if(!e)return r.beforeInputAlert&&!1===r.boxing().prf.beforeInputAlert(i,r,"invalid")||xui.alert("$inline.invalid",xui.getRes("$inline.invalid")+(r.properties.labelCaption?" : "+r.properties.labelCaption:""),(function(){r&&r.renderId&&r.boxing().activate()})),t=!1;t=!1}})),t)},checkRequired:function(e){var t,i=!0,r=this.get(0);return xui.absValue.pack(this.constructor._getBoundElems(r),!1).each((function(n){if(n.properties.required&&!(t=n.boxing().getUIValue())&&0!==t){if(!e)return n.beforeInputAlert&&!1===n.boxing().prf.beforeInputAlert(r,n,"required")||xui.alert("$inline.required",xui.getRes("$inline.required")+(n.properties.labelCaption?" : "+n.properties.labelCaption:""),(function(){n&&n.renderId&&n.boxing().activate()})),i=!1;i=!1}})),i},getUI:function(e){var t;return e?xui.arr.each(this.constructor._getBoundElems(this.get(0)),(function(i){var r=i.properties;if((r.dataField||r.name||i.alias)==e)return t=i.boxing(),!1})):t=xui.UI.pack(this.constructor._getBoundElems(this.get(0)),!1),t},getUIValue:function(e,t){var i=this.get(0),r={};return xui.arr.each(this.constructor._getBoundElems(i),(function(i){if(i.box["xui.absValue"]){var n,o=i.properties,a=i.boxing(),u=a.getUIValue(),s=o.dataField||o.name||i.alias;t&&u+" "==a.getValue()+" "||(a.getCaption?(-1!=s.indexOf(":")&&(n=s.split(":")),n&&n[0]&&n[1]?(r[n[0]]=u,r[n[1]]=a.getCaption()):e?xui.set(r,s,{value:u,caption:a.getCaption()},!0):xui.set(r,s,u,!0)):xui.set(r,s,u,!0))}})),r},getDirtied:function(e){return this.getUIValue(e,!0)},getData:function(e,t,i){var r=this.get(0);(r.$inDesign||t)&&(r.properties.data={},this.updateDataFromUI(!1,!1,!1,null,null,i,!1));var n=r.properties.data;return xui.isSet(e)?xui.get(n,e,!0):n},setData:function(e,t,i){var r=this.get(0),n=r.properties;return!1===e?xui.each(n.data,(function(e,t){n.data[t]=null})):xui.isSet(e)?xui.isHash(e)?n.data=e:xui.set(n.data,e,t,!0):n.data={},(r.$inDesign||i)&&this.updateDataToUI(),this},resetValue:function(){return xui.arr.each(this.constructor._getBoundElems(this.get(0)),(function(e,t){(t=e.properties.value)!==e.properties.$UIvalue&&e.boxing().resetValue(t)})),this},clearValue:function(){return xui.absValue.pack(this.constructor._getBoundElems(this.get(0)),!1).resetValue(null),this},updateValue:function(){return xui.absValue.pack(this.constructor._getBoundElems(this.get(0)),!1).updateValue(),this},updateDataFromUI:function(e,t,i,r,n,o,a){var u,s=this,l=s.get(0),c=l.properties,d={};if(!o){if(!s.checkValid())return!1;if(!s.checkRequired())return!1}return xui.merge(d,c.data,(function(e,t){return!n||n===t||!!xui.isArr(n)&&-1!=xui.arr.indexOf(n,t)})),xui.arr.each(s.constructor._getBoundElems(l),(function(r){var o,a,u=r.properties,s=(r.box.$EventHandlers,r.boxing()),l=u.dataField||u.name||r.alias;if("function"==typeof s.setCaption&&-1!=l.indexOf(":")&&(o=l.split(":"))[1]&&o[2]&&(l=o[0],a=o[1]),!n||n===l||xui.isArr(n)&&-1!=xui.arr.indexOf(n,l)){var c,f=r.boxing(),p=r.box["xui.absValue"]?f.getUIValue(xui.isBool(i)?i:r.__returnArray):null,x=xui.get(d,l,!0);if(xui.isHash(x)){var h=x.properties,g=x.theme,A=x.CC,m=x.CA,y=x.CS;h&&delete x.properties,g&&delete x.theme,m&&delete x.CA,A&&delete x.CC,y&&delete x.CS,xui.filter(x,(function(e,t){return!!(t in u)})),xui.isEmpty(x)||xui.each(x,(function(e,t){t in u&&(x[t]=u[t])})),xui.isHash(h)&&(xui.filter(h,(function(e,t){return t in u&&!(t in x)})),xui.isEmpty(h)||(xui.each(h,(function(e,t){t in u&&(h[t]=u[t])})),x.properties=h)),g&&(x.theme=r.theme),m&&(x.CA=xui.clone(r.CA,!0)),A&&(x.CC=xui.clone(r.CC,!0)),y&&(x.CS=xui.clone(r.CS,!0)),"caption"in u&&f.getCaption&&(a?d[a]=f.getCaption():("caption"in x||t)&&(h&&"caption"in h?h.caption=f.getCaption():x.caption=f.getCaption())),xui.isDefined(p)&&"value"in u&&(h&&"value"in h?h.value=p:x.value=p)}else r.box["xui.UI.ComboInput"]&&"file"==u.type?x=r:"caption"in u?(c="function"==typeof f.getCaption?f.getCaption():u.caption,a?(x=p,d[a]=c):x=t?!c&&!p||c==p?p:{value:p,caption:c}:p):x=p,xui.set(d,l,x,!0);!1!==e&&r.renderId&&r.box["xui.absValue"]&&f.updateValue()}})),r&&(d=xui.tryF(r,[d,l],this)),!a&&l.afterUpdateDataFromUI&&(u=this.afterUpdateDataFromUI(l,d),xui.isHash(u)&&(d=u),u=null),xui.merge(l.properties.data,d,"all"),!0},updateDataToUI:function(e,t,i){var r,n,o,a,u,s,l,c,d,f,p=this,x=p.get(0),h=x.properties,g={};return xui.merge(g,h.data,(function(e,i){return!t||t===i||!!xui.isArr(t)&&-1!=xui.arr.indexOf(t,i)})),e&&(g=xui.tryF(e,[g,x],p)),!i&&x.beforeUpdateDataToUI&&(f=p.beforeUpdateDataToUI(x,g),xui.isHash(f)&&(g=f),f=null),xui.arr.each(p.constructor._getBoundElems(x),(function(e){a=e.properties,e.box.$EventHandlers,r=a.dataField||a.name||e.alias,"function"==typeof e.boxing().setCaption&&-1!=r.indexOf(":")&&(n=r.split(":"))[1]&&n[2]&&(r=n[0],o=n[1]),(!t||t===r||xui.isArr(t)&&-1!=xui.arr.indexOf(t,r))&&g&&xui.isDefined(xui.get(g,r,!0))&&(u=xui.clone(xui.get(g,r,!0),null,2),d=s=undefined,l=e.boxing(),xui.isHash(u)?((c=u.properties)&&(xui.filter(c,(function(e,t){return t in a})),s=o&&c[o]||(xui.isSet(c.caption)?c.caption:null),d=xui.isSet(c.value)?c.value:null,delete c.caption,delete c.value,xui.isEmpty(c)||l.setProperties(c),delete u.properties),(c=u.theme)&&("function"==typeof l.setTheme&&l.setTheme(c),delete u.theme),(c=u.CS)&&(xui.isEmpty(c)||l.setCustomStyle(c),delete u.CS),(c=u.CC)&&(xui.isEmpty(c)||l.setCustomClass(c),delete u.CC),(c=u.CA)&&(xui.isEmpty(c)||l.setCustomAttr(c),delete u.CA),xui.isEmpty(u)||(xui.filter(u,(function(e,t){return t in a||t in u})),xui.isEmpty(u)||(s=xui.isSet(s)?s:o&&c[o]||xui.isSet(u.caption)?u.caption:null,d=xui.isSet(d)?d:xui.isSet(u.value)?u.value:null,delete u.caption,delete u.value,xui.isEmpty(u)||l.setProperties(u)))):(d=u,s=o&&c[o]||undefined),xui.isDefined(d)&&xui.isFun(l.resetValue)&&(l.resetValue(d),e.__returnArray=xui.isArr(d)),xui.isDefined(s)&&xui.isFun(l.setCaption)&&xui.tryF(l.setCaption,[s,!0],l))})),p}},Static:{$nameTag:"databinder",_pool:{},_objectProp:{tagVar:1,propBinder:1,data:1},destroyAll:function(){this.pack(xui.toArr(this._pool,!1),!1).destroy(),this._pool={}},getFromName:function(e){var t=this._pool[e];return t&&t.boxing()},_beforeSerialized:xui.Timer._beforeSerialized,_getBoundElems:function(e){var t=[];return xui.arr.each(e._n,(function(e){e.behavior.PanelKeys?xui.absValue.pack(e.boxing().getChildren(null,!0)).each((function(e){t.push(e)})):e.box["xui.absValue"]&&t.push(e)})),xui.arr.removeDuplicate(t)},_bind:function(e,t){if(e){var i,r=this._pool[e];r||((i=new xui.DataBinder).setName(e),r=i.get(0)),t&&-1==xui.arr.indexOf(r._n,t)&&t.link(r._n,"databinder."+e)}},_unBind:function(e,t){t&&t.box&&this._pool[e]&&t.unLink("databinder."+e)},DataModel:{dataBinder:null,dataField:null,name:{set:function(e){var t=this,i=t.properties.name,r=t.box._pool,n=r[i],o=r[e];if(r[t.properties.name=e]=t,n&&!o&&t._n.length)for(var a=0,u=t._n.length;a<u;a++)xui.set(t._n[a],["properties","dataBinder"],e);o&&!n&&(t._n=o._n),n&&delete r[i]}},data:{ini:{}}},EventHandlers:{beforeInputAlert:function(e,t,i){},beforeUpdateDataToUI:function(e,t){},afterUpdateDataFromUI:function(e,t){}}}}),xui.Class("xui.Event",null,{Constructor:function(e,t,i,r){var n,o,a,u,s,l=xui.Event,c=window,d=document,f=0,p=xui.DragDrop;if(!(e=e||c.event)||!(a=t))return a=t=null,!1;t=null;var x=e.type,h=e.$xuievent,g=e.$xuitype,A=e.$xuiall;if(xui.browser.fakeTouch&&"click"==x&&xui.getData(["!document","$fakescrolling"]))return!1;if("xuitouchdown"==x&&(x="mousedown",h=1,A=0,g="beforeMousedown"),"mouseover"==x||"mouseout"==x){if(1!=(f=p&&p._profile.isWorking?1:2)&&i)return a=null,l.$FALSE;if(!l._handleMouseHover(e,a,1==f))return a=null,l.$FALSE;1==f&&(u=p&&p._dropElement)}else if((s=l._tabHookStack).length&&l._kb[x]&&9==(e.$key||e.keyCode||e.charCode)&&!1===l._handleTabHook(l.getSrc(e),s=s[s.length-1]))return void(a=null);if(n=r||l.getId(a),s=l._getProfile(n)){if("DOMMouseScroll"==x&&(x="mousewheel"),"mousedown"==x||"mousewheel"==x)xui.tryF(xui.Dom._blurTrigger,[s,e]);else if("resize"==x&&(x="size",xui.browser.ie&&c===a)){var m=xui.browser.contentBox&&d.documentElement.clientWidth||d.body.clientWidth,y=xui.browser.contentBox&&d.documentElement.clientHeight||d.body.clientHeight;if(s._w==m&&s._h==y)return void(a=null);s._w=m,s._h=y}var v,b,_,w=!0,C=[];for(v=0;v<=2&&(1!=f||0===v||e.$force);++v)2==f&&0===v||(_=l._type[x+v]||(l._type[x+v]=l._getEventName(x,v)),h&&!A&&_!==g||s._getEV(C,n,_,a.$xid));return b=function(e,t){for(var i,r=0;i=arguments.callee.tasks[r++];)if(!1===i(s,e,t))return!1;return!0},b.tasks=C,w=b(e,a.$xid),c===a&&"size"==x&&xui.asyRun((function(){b(e,a.$xid),b.tasks.length=0,delete b.tasks,b=a=null}),150),p?"drag"==x?p._onDrag=b:"dragover"==x&&(p._onDragover=b):"size"!==x&&(b.tasks.length=0,delete b.tasks,b=null),1==f&&("mouseover"==x&&p._dropElement==a.$xid&&u&&u!=a.$xid&&(l({type:"mouseout",target:o=xui.use(u).get(0),$xui:!0,$xuitype:"beforeMouseout",preventDefault:function(e){xui.Event.stopDefault(e)},stopPropagation:function(e){xui.Event.stopBubble(e)}},o),p.setDropElement(a.$xid)),"mouseout"==x&&!p._dropElement&&u&&u==a.$xid&&(l._preDroppable=n,xui.asyRun((function(){delete xui.Event._preDroppable}))),a.$xid==p._dropElement&&(w=!1)),!1===w&&l.stopBubble(e),w}},Static:{$FALSE:!!xui.browser.opr&&undefined,_type:{},_kb:{keydown:1,keypress:1,keyup:1},_reg:/(-[\w]+)|([\w]+$)/g,$eventhandler:function(){return xui.Event(arguments[0],this)},$eventhandler2:function(){return xui.Event(arguments[0],this,1)},$eventhandler3:function(){var e=arguments[0],t=xui.Event.getSrc(e||window.event),i=xui.Event(e,t);return!1===i?i:t!==this?xui.Event(e,this):void 0},$lastMouseupTime:0,$dblcInterval:500,$lastClickFunMark:0,_events:"mouseover,mouseout,mouseleave,mouseenter,mousedown,mouseup,mousemove,mousewheel,wheel,click,dblclick,contextmenu,keydown,keypress,keyup,scroll,blur,focus,load,unload,beforeunload,abort,change,select,submit,reset,error,move,size,dragbegin,drag,dragstop,dragleave,dragenter,dragover,drop,touchstart,touchmove,touchend,touchcancel,mspointerdown,mspointermove,mspointerup,mspointercancel,pointerdown,pointermove,pointerup,pointercancel".split(","),_addEventListener:function(e,t,i){var r,n,o,a,u,s=function(e){return e.replace(/^on|before|after/,"").toLowerCase()};if(e.addEventListener){var l=!1;try{var c=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("test",null,c)}catch(e){}return e.addEventListener(s(t),i,!!l&&{passive:!1}),!0}return u=!0,a=s(a=t),"function"==typeof e[t=u||!{touchstart:1,touchmove:1,touchend:1,touchcancel:1}[a]?"on"+a:a]&&(r=e[t],n=i,o=function(){for(var e=arguments.callee._funs,t=0,i=e.length;t<i;t++)e[t].apply(this,arguments)},o._funs=r._funs||[r],r._funs=null,o._funs.push(n),i=o),e[t]=i,!0},_removeEventListener:function(e,t,i){var r,n,o=function(e){return e.replace(/^on|before|after/,"").toLowerCase()};if(e.removeEventListener){var a=!1;try{var u=Object.defineProperty({},"passive",{get:function(){a=!0}});window.addEventListener("test",null,u)}catch(e){}return e.removeEventListener(o(t),i,!!a&&{passive:!1}),!0}return n=!0,r=o(r=t),e[t=n||!{touchstart:1,touchmove:1,touchend:1,touchcancel:1}[r]?"on"+r:r]===i?(e[t]=null,!0):!(!e[t]||!e[t]._funs||-1==xui.arr.indexOf(e[t]._funs,i)||(xui.arr.removeValue(e[t]._funs,i),0))},simulateEvent:function(e,t,i,r){i=i||{},e[0]&&(e=e[0]),xui.tryF(xui.Event.$eventsforSimulation[r||t],[e,t,i])},_getEventName:function(e,t){return(e=this._map1[e])&&(0===t||1==t||2==t?e[t]:e)},_getProfile:function(e,t,i){return e&&"string"==typeof e&&((t=(i=xui.$cache.profileMap)[e])?t["xui.UIProfile"]?t:(i=i[e.replace(this._reg,"")])?i:t:i[e.replace(this._reg,"")])},_handleTabHook:function(e,t){if(e===document)return!0;var i=e,r=i.tabIndex;do{if(xui.getId(i)==t[0])return i=e=null,!0}while(i&&(i=i.parentNode)&&i!==document&&i!==window);return xui.tryF(t[1],[t[0],r],e),i=e=null,!1},_handleMouseHover:function(e,t,i){if(t==document)return t=null,!0;var r=("mouseover"==e.type?e.fromElement:e.toElement)||e.relatedTarget;if(i&&"mouseover"==e.type&&this._preDroppable)try{do{if(r&&r.id&&r.id==this._preDroppable)return t=r=null,!0}while(r&&(r=r.parentNode)&&r!==document&&r!==window)}catch(e){}if(xui.browser.gek)try{do{if(r==t)return t=r=null,!1}while(r&&(r=r.parentNode))}catch(i){r=xui([t]);var n=this.getPos(e),o=r.offset(),a=r.cssSize(),u=n.left<o.left||n.left>o.left+a.width||n.top<o.top||n.top>o.top+a.height;return t=r=null,"mouseover"==e.type?!u:u}else do{if(r==t)return t=r=null,!1}while(r&&(r=r.parentNode));return t=r=null,!0},_tabHookStack:[],pushTabOutTrigger:function(e,t){return this._tabHookStack.push([xui(e)._nodes[0],t]),this},popTabOutTrigger:function(e){return e?this._tabHookStack=[]:this._tabHookStack.pop(),this},getSrc:function(e){var t;return(t=e.target||e.srcElement||null)&&xui.browser.kde&&3==t.nodeType?t.parentNode:t},getId:function(e){return window===e?"!window":document===e?"!document":e.id},getBtn:function(e){return xui.browser.ie?4==e.button?"middle":2==e.button?"right":"left":2==e.which?"middle":3==e.which?"right":"left"},getPos:function(e,t){if(e=e||window.event,xui.browser.isTouch&&e.changedTouches&&e.changedTouches[0]&&(e=e.changedTouches[0]),"pageX"in e){var i=t?1:xui.ini.$zoomScale||1;return{left:e.pageX/i,top:e.pageY/i}}var r,n=document,o=n.documentElement,a=n.body,u=(xui.isSet(r=o&&o.scrollLeft)||xui.isSet(r=a&&a.scrollLeft)?r:0)-(xui.isSet(r=o.clientLeft)?r:0),s=(xui.isSet(r=o&&o.scrollTop)||xui.isSet(r=a&&a.scrollTop)?r:0)-(xui.isSet(r=o.clientTop)?r:0);return{left:e.clientX+u,top:e.clientY+s}},getKey:function(e){if(e&&e.$xuievent)return e;var t,i=[],r=(e=e||window.event).$key||e.keyCode||e.charCode||0;if("string"==typeof r)i[0]=r;else{var n=String.fromCharCode(r),o=e.type;if("keypress"==o&&r>=33&&r<=128||r>=48&&r<=57||r>=65&&r<=90)i[0]=n;else{if(!(t=arguments.callee.map)){t=arguments.callee.map={};for(var a="3,enter,8,backspace,9,tab,12,numlock,13,enter,19,pause,20,capslock,27,esc,32, ,33,pageup,34,pagedown,35,end,36,home,37,left,38,up,39,right,40,down,44,printscreen,45,insert,46,delete,50,down,52,left,54,right,56,up,91,win,92,win,93,apps,96,0,97,1,98,2,99,3,100,4,101,5,102,6,103,7,104,8,105,9,106,*,107,+,109,-,110,.,111,/,112,f1,113,f2,114,f3,115,f4,116,f5,117,f6,118,f7,119,f8,120,f9,121,f10,122,f11,123,f12,144,numlock,145,scroll,186,;,187,=,189,-,190,.,191,/,192,`,219,[,220,\\,221,],222,',224,meta,63289,numlock,63276,pageup,63277,pagedown,63275,end,63273,home,63234,left,63232,up,63235,right,63233,down,63272,delete,63302,insert,63236,f1,63237,f2,63238,f3,63239,f4,63240,f5,63241,f6,63242,f7,63243,f8,63244,f9,63245,f10,63246,f11,63247,f12,63248,print".split(","),u=1,s=a.length;u<s;u+=2)t[a[u-1]]=a[u];a.length=0,t[188]=","}i[0]=t[r]||n}}return(e.modifiers?e.modifiers&Event.CONTROL_MASK:e.ctrlKey||e.ctrlLeft||17==r||57391==r)?(17!=r&&57391!=r||(i[0]=""),i.push("1")):i.push(""),(e.modifiers?e.modifiers&Event.SHIFT_MASK:e.shiftKey||e.shiftLeft||16==r||57390==r)?(16!=r&&57390!=r||(i[0]=""),i.push("1")):i.push(""),e.modifiers||!e.altKey&&!e.altLeft&&18!=r&&57388!=r?i.push(""):(18!=r&&57388!=r||(i[0]=""),i.push("1")),i[0]=i[0],i.key=i[0],i.keyCode=r,i.code=e.code,i.okey=e.key,i.type=o,i.ctrlKey=!!i[1],i.shiftKey=!!i[2],i.altKey=!!i[3],i.e=e,"keypress"==o?this.$keydownchar&&this.$keydownchar.length>1&&(i.key=this.$keydownchar):"keydown"==o?i[0].length>1?this.$keydownchar=i[0]:this.$keydownchar&&(this.$keydownchar=null):"keyup"==o&&this.$keydownchar&&(this.$keydownchar=null),i},getEventPara:function(e,t){t||(t=xui.Event.getPos(e));var i=this.getKey(e),r={button:this.getBtn(e),pageX:t&&t.left,pageY:t&&t.top,key:i.key,code:e.code,okey:e.key,keyCode:i.keyCode,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,altKey:i.altKey,$xuieventpara:!0};for(var n in e)"$"==n.charAt(0)&&(r[n]=e[n]);return r},stopBubble:function(e){(e=e||window.event).stopPropagation&&e.stopPropagation(),"cancelBubble"in e&&(e.cancelBubble=!0),this.stopDefault(e)},stopDefault:function(e){(e=e||window.event).preventDefault?e.preventDefault():"returnValue"in e&&(e.returnValue=!1)},_kbh:function(e,t,i,r,n,o,a,u,s,l){if(t){if(a=a||("string"==typeof o?o:null),e[t=(t||"").toLowerCase()+":"+(i?"1":"")+":"+(r?"1":"")+":"+(n?"1":"")]=e[t]||[],"function"==typeof o)return a?(delete e[t][a],xui.arr.removeValue(e[t],a)):a=xui.rand(),e[t][a]=[o,u,s,l],e[t].push(a),a;a?(delete e[t][a],xui.arr.removeValue(e[t],a)):delete e[t]}return this},keyboardHook:function(e,t,i,r,n,o,a,u,s){return this._kbh(xui.$cache.hookKey,e,t,i,r,n,o,a,u,s)},keyboardHookUp:function(e,t,i,r,n,o,a,u,s){return this._kbh(xui.$cache.hookKeyUp,e,t,i,r,n,o,a,u,s)},getWheelDelta:function(e){return e.wheelDelta?e.wheelDelta/120:-e.detail/3},$TAGNAMES:{select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"},_supportCache:{},isSupported:function(e,t){var i=this._supportCache,r=(t?t.tagName.toLowerCase():"div")+":"+e;if(r in i)return i[r];t=t||document.createElement(this.$TAGNAMES[e]||"div");var n=(e="on"+e)in t;return n||(t.setAttribute||(t=document.createElement("div")),t.setAttribute&&(t.setAttribute(e,""),n="function"==typeof t[e],void 0!==t[e]&&(t[e]=undefined),t.removeAttribute(e))),t=null,i[r]=n},_simulateMousedown:function(e){if(!e.touches)return!0;var t=xui.Event,i=e.changedTouches[0];return e.touches.length>1||(t.__simulatedMousedownNode=i.target,t.isSupported("mousedown")?t._xuitouchdowntime=xui.setTimeout((function(){t._xuitouchdowntime=0,t.simulateEvent(i.target,"xuitouchdown",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY},"mousedown")}),100):t.simulateEvent(i.target,"mousedown",{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY})),!0},_simulateMouseup:function(e){if(!e.touches)return!0;var t=xui.Event,i=(new Date).getTime(),r=i-t.$lastMouseupTime,n=e.changedTouches[0];return t._xuitouchdowntime&&xui.clearTimeout(t._xuitouchdowntime),t.__simulatedMouseupNode=n.target,t.isSupported("mouseup")||t.simulateEvent(n.target,"mouseup",{screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY}),t.__simulatedMouseupNode===t.__simulatedMousedownNode&&(t.isSupported("click")||t.simulateEvent(n.target,"click",{screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY}),r<=t.$dblcInterval&&xui.asyRun((function(){t.$lastMouseupTime=0,t.simulateEvent(n.target,"dblclick",{screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY})}))),t.__simulatedMouseupNode=t.__simulatedMousedownNode=null,t.$lastMouseupTime=i,!0},stopPageTouchmove:function(){xui.Event._addEventListener(document,xui.browser.ie&&xui.browser.ver>=11?"pointermove":xui.browser.ie&&xui.browser.ver>=10?"MSPointerMove":"touchmove",xui.Event.stopDefault)},allowPageTouchmove:function(){xui.Event._removeEventListener(document,xui.browser.ie&&xui.browser.ver>=11?"pointermove":xui.browser.ie&&xui.browser.ver>=10?"MSPointerMove":"touchmove",xui.Event.stopDefault)}},Initialize:function(){var e,t,i,r=this,n=window,o=document,a={move:null,size:null,drag:null,dragstop:null,dragover:null,mousewheel:null,dragbegin:"onmousedown",dragenter:"onmouseover",dragleave:"onmouseout",drop:"onmouseup"},u=["before","on","after"];e=r._map1={},xui.arr.each(r._events,(function(t){i=xui.str.initial(t),e[t]=[u[0]+i,u[1]+i,u[2]+i]})),e=r._eventMap={},t=r._eventHandler={},xui.arr.each(r._events,(function(r){i=xui.str.initial(r),e[r]=e[u[1]+r]=e[u[0]+i]=e[u[1]+i]=e[u[2]+i]=r,t[r]=t[u[1]+r]=t[u[0]+i]=t[u[1]+i]=t[u[2]+i]=r in a?a[r]:"on"+r})),r._addEventListener(n,"resize",r.$eventhandler),r._addEventListener(n,"DOMMouseScroll",r.$eventhandler3),xui.browser.isTouch&&(r._addEventListener(o,xui.browser.ie&&xui.browser.ver>=11?"pointerdown":xui.browser.ie&&xui.browser.ver>=10?"MSPointerDown":"touchstart",r._simulateMousedown),r._addEventListener(o,xui.browser.ie&&xui.browser.ver>=11?"pointerup":xui.browser.ie&&xui.browser.ver>=10?"MSPointerUp":"touchend",r._simulateMouseup),r._addEventListener(o,"xuitouchdown",r.$eventhandler)),r._addEventListener(n,"mousewheel",r.$eventhandler3);var s=function(e,t,i){"textevent"===t&&(t="keypress"),xui.merge(i,{bubbles:!0,cancelable:!0,view:n,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:0},"without");var r=i.bubbles,a=i.cancelable,u=i.view,s=i.ctrlKey,l=i.altKey,c=i.shiftKey,d=i.metaKey,f=i.keyCode,p=i.charCode,x=null;if(o.createEvent){try{(x=o.createEvent("KeyEvents")).initKeyEvent(t,r,a,u,s,l,c,d,f,p)}catch(e){try{x=o.createEvent("Events")}catch(e){x=o.createEvent("UIEvents")}finally{x.initEvent(t,r,a),x.view=u,x.altKey=l,x.ctrlKey=s,x.shiftKey=c,x.metaKey=d,x.keyCode=f,x.charCode=p}}e.dispatchEvent(x)}else{if(!o.createEventObject)throw t+" cant be simulated in "+navigator.userAgent;(x=o.createEventObject()).bubbles=r,x.cancelable=a,x.view=u,x.ctrlKey=s,x.altKey=l,x.shiftKey=c,x.metaKey=d,x.keyCode=p>0?p:f,e.fireEvent("on"+t,x)}},l=function(e,t,i){i=i||{},xui.merge(i,{bubbles:!0,cancelable:!0,view:n,detail:1,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,screenX:0,screenY:0,clientX:0,clientY:0,button:0,relatedTarget:null},"without");var r=i.bubbles,a=i.cancelable,u=i.view,s=i.detail,l=i.ctrlKey,c=i.altKey,d=i.shiftKey,f=i.metaKey,p=i.screenX,x=i.screenY,h=i.clientX,g=i.clientY,A=i.button,m=i.relatedTarget,y=null;if(o.createEvent)(y=o.createEvent("MouseEvents")).initMouseEvent?y.initMouseEvent(t,r,a,u,s,p,x,h,g,l,c,d,f,A,m):((y=o.createEvent("UIEvents")).initEvent(t,r,a),y.view=u,y.detail=s,y.screenX=p,y.screenY=x,y.clientX=h,y.clientY=g,y.ctrlKey=l,y.altKey=c,y.metaKey=f,y.shiftKey=d,y.button=A,y.relatedTarget=m),m&&!y.relatedTarget&&("mouseout"===t?y.toElement=m:"mouseover"===t&&(y.fromElement=m)),e.dispatchEvent(y);else{if(!o.createEventObject)throw t+" cant be simulated in "+navigator.userAgent;switch((y=o.createEventObject()).bubbles=r,y.cancelable=a,y.view=u,y.detail=s,y.screenX=p,y.screenY=x,y.clientX=h,y.clientY=g,y.ctrlKey=l,y.altKey=c,y.metaKey=f,y.shiftKey=d,A){case 0:y.button=1;break;case 1:y.button=4;break;case 2:break;default:y.button=0}y.relatedTarget=m,e.fireEvent("on"+t,y)}},c=function(e,t,i){xui.merge(i,{bubbles:!0,cancelable:"submit"===t,view:n,detail:1},"without");var r=i.bubbles,a=i.cancelable,u=i.view,s=i.detail,l=null;if(o.createEvent)(l=o.createEvent("UIEvents")).initUIEvent(t,r,a,u,s),e.dispatchEvent(l);else{if(!o.createEventObject)throw t+" cant be simulated in "+navigator.userAgent;(l=o.createEventObject()).bubbles=r,l.cancelable=a,l.view=u,l.detail=s,e.fireEvent("on"+t,l)}},d=function(e,t,i){xui.merge(i,{bubbles:!0,cancelable:!0,detail:2,view:n,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,scale:1,rotation:0},"without");var r,a=i.bubbles,u=i.cancelable,s=i.detail,l=i.view,c=i.screenX,d=i.screenY,f=i.clientX,p=i.clientY,x=i.ctrlKey,h=i.altKey,g=i.shiftKey,A=i.metaKey,m=i.scale,y=i.rotation;(r=o.createEvent("GestureEvent")).initGestureEvent(t,a,u,l,s,c,d,f,p,x,h,g,A,e,m,y),e.dispatchEvent(r)},f=function(e,t,i){if("touchstart"===t||"touchmove"===t){if(!i.touches||!i.touches.length)throw new Error("No touch object in touches.")}else if(!("touchend"!==t||i.changedTouches&&i.changedTouches.length))throw new Error("No touch object in changedTouches.");xui.merge(i,{bubbles:!0,cancelable:"touchcancel"!==t,detail:1,view:n,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,screenX:0,screenY:0,clientX:0,clientY:0,scale:1,rotation:0},"without");var r,a=i.bubbles,u=i.detail,s=i.view,l=i.scale,c=i.rotation,d=i.touches,f=i.targetTouches,p=i.changedTouches,x=i.ctrlKey,h=i.altKey,g=i.shiftKey,A=i.metaKey,m=i.screenX,y=i.screenY,v=i.clientX,b=i.clientY,_="touchcancel"!=t&&i.cancelable;if(!o.createEvent)throw t+" cant be simulated in "+navigator.userAgent;if(xui.browser.isAndroid)xui.browser.ver<4?((r=o.createEvent("MouseEvents")).initMouseEvent(t,a,_,s,u,m,y,v,b,x,h,g,A,0,e),r.touches=d,r.targetTouches=f,r.changedTouches=p):(r=o.createEvent("TouchEvent")).initTouchEvent(d,f,p,t,s,m,y,v,b,x,h,g,A);else{if(!xui.browser.isIOS)throw t+" cant be simulated in "+navigator.userAgent;if(!(xui.browser.ver>=2))throw t+" cant be simulated in "+navigator.userAgent;(r=o.createEvent("TouchEvent")).initTouchEvent(t,a,_,s,u,m,y,v,b,x,h,g,A,d,f,p,l,c)}e.dispatchEvent(r)};r.$eventsforSimulation={click:l,dblclick:l,mouseover:l,mouseout:l,mouseenter:l,mouseleave:l,mousedown:l,mouseup:l,mousemove:l,pointerover:l,pointerout:l,pointerdown:l,pointerup:l,pointermove:l,MSPointerOver:l,MSPointerOut:l,MSPointerDown:l,MSPointerUp:l,MSPointerMove:l,keydown:s,keyup:s,keypress:s,submit:c,blur:c,change:c,focus:c,resize:c,scroll:c,select:c,touchstart:f,touchmove:f,touchend:f,touchcancel:f,gesturestart:d,gesturechange:d,gestureend:d}}}),xui.Class("xui.CSS",null,{Static:{_r:xui.browser.ie?"rules":"cssRules",_baseid:"xui:css:base",_firstid:"xui:css:first",_lastid:"xui:css:last",_reg1:/\.(\w+)\[CLASS~="\1"\]/g,_reg2:/\[ID"([^"]+)"\]/g,_reg3:/\*([.#])/g,_reg4:/\s+/g,_reg5:/\*\|/g,_reg6:/(\s*,\s*)/g,_rep:function(e){var t=this;return e.replace(t._reg1,".$1").replace(t._reg2,"#$1").replace(t._reg3,"$1").replace(t._reg4," ").replace(t._reg5,"").replace(t._reg6,",").toLowerCase()},_appendSS:function(e,t,i,r,n){var o=document.createElement("style");if(o.type="text/css",i&&(o.id=i),xui.browser.ie&&o.styleSheet&&"cssText"in o.styleSheet)o.styleSheet.cssText=t||"";else try{o.appendChild(document.createTextNode(t||""))}catch(e){o.styleSheet.cssText=t||""}return n&&xui(o).attr(n),r?xui(e).prepend(o):xui(e).append(o),o},_createCss:function(e,t,i){var r,n,o=this._getHead(),a=this._firstid,u=this._lastid;if((r=document.createElement("style")).type="text/css",r.id=e,t)if(xui.browser.ie&&r.styleSheet&&"cssText"in r.styleSheet)r.styleSheet.cssText=t||"";else try{r.appendChild(document.createTextNode(t||""))}catch(e){r.styleSheet.cssText=t||""}if(i)o.appendChild(r);else{for(n=document.getElementById(a)||o.firstChild;(n=n.nextSibling)&&!/^(script|link|style)$/i.test(""+n.tagName););n||(n=document.getElementById(u))?o.insertBefore(r,n):o.appendChild(r)}return r},_getCss:function(e,t,i){return document.getElementById(e)||this._createCss(e,t,i)},_getBase:function(){return this._getCss(this._baseid)},_getFirst:function(){return this._getCss(this._firstid)},_getLast:function(){return this._getCss(this._lastid,null,!0)},_getHead:function(){return this._head||(this._head=document.getElementsByTagName("head")[0]||document.documentElement)},_check:function(){if(xui.browser.ie){for(var e,t=0,i=0,r=this._getHead().childNodes;e=r[i++];)"text/css"==e.type&&t++;return t>20}},get:function(e,t){for(var i,r=0,n=this._getHead().childNodes;i=n[r++];)if("text/css"==i.type&&e in i&&i[e]==t)return i},addStyleSheet:function(e,t,i,r){var n,o=this,a=o._getHead();if(t&&(t=t.replace(/[^\w\-\_\.\:]/g,"_"))&&(n=o.get("id",t))){if(!r)return n;n.disabled=!0,a.removeChild(n)}return o._check()?function(e,t){var i=t?o._getLast():o._getBase();return i.styleSheet.cssText+=e,i}(e,i):function(e,t,i){var r=document.createElement("style");if(r.type="text/css",t&&(r.id=t),xui.browser.ie&&r.styleSheet&&"cssText"in r.styleSheet)r.styleSheet.cssText=e||"";else try{r.appendChild(document.createTextNode(e||""))}catch(t){r.styleSheet.cssText=e||""}return-1===i?a.firstChild?a.insertBefore(r,a.firstChild):a.appendChild(r):1===i?a.appendChild(r):a.insertBefore(r,i?o._getLast():o._getBase()),r.disabled=!0,r.disabled=!1,r}(e,t,i)},includeLink:function(e,t,i,r){var n,o=this,a=o._getHead();return e&&(n=o.get("href",e))||((n=document.createElement("link")).type="text/css",n.rel="stylesheet",n.href=e,t&&(n.id=t),n.media="all",xui.each(r,(function(e,t){n.setAttribute(t,e)}))),a.insertBefore(n,i?o._getBase():o._getLast()),n.disabled=!0,n.disabled=!1,n},remove:function(e,t){var i=this._getHead();(t=this.get(e,t))&&(t.disabled=!0,i.removeChild(t))},replaceLink:function(e,t,i,r){var n,o,a=this,u=a._getHead(),s={};s[t]=r,n=a.includeLink(e,null,!1,s),(o=a.get(t,i))&&u.replaceChild(n,o),n.disabled=!0,n.disabled=!1},_build:function(e,t,i){var r="";return xui.each(t,(function(e,t){r+=t.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+e+";"})),i?r:e+"{"+r+"}"},setStyleRules:function(e,t,i){var r,n,o,a,u,s,l=this,c=!0,d=document.styleSheets;return e=xui.str.trim(e.replace(/\s+/g," ")),t&&i||(a=e.toLowerCase(),xui.arr.each(xui.toArr(d),(function(i){try{i[l._r]}catch(e){return}if(xui.arr.each(xui.toArr(i[l._r]),(function(e,d){if(e.selectorText&&!e.disabled)if(o=l._rep(e.selectorText),s=o.split(","),t){if(o==a)return r=e,!1;if(-1!=xui.arr.indexOf(s,a))return n=e,!1}else c=!1,-1!=xui.arr.indexOf(s,a)&&s.length>1?(s=xui.arr.removeFrom(s,xui.arr.indexOf(s,a)).join(","),u=e.cssText.slice(e.cssText.indexOf("{")+1,e.cssText.lastIndexOf("}")),i.insertRule?i.insertRule(s+"{"+u+"}",i[l._r].length):i.addRule&&i.addRule(s,u||"{}"),i.deleteRule?i.deleteRule(d):i.removeRule(d),i.disabled=!0,i.disabled=!1):o==a&&(i.deleteRule?i.deleteRule(d):i.removeRule(d),i.disabled=!0,i.disabled=!1)}),null,!0),r){c=!1;try{xui.each(t,(function(e,t){t=t.replace(/(-[a-z])/gi,(function(e,t){return t.charAt(1).toUpperCase()})),r.style[t]="function"==typeof e?e(r.style[t]):e}))}catch(e){}return i.disabled=!0,i.disabled=!1,!1}if(n)return c=!1,i.insertRule(l._build(e,t),i[l._r].length),i.disabled=!0,i.disabled=!1,!1}),null,!0)),(i||c)&&l._addRules(e,t),l},$getCSSValue:function(e,t,i,r){var n,o,a,u,s,l,c=this._r,d=document.styleSheets,f=d.length;for(e=xui.str.trim(e.replace(/\s+/g," ").toLowerCase()),u=f-1;u>=0;u--){try{o=d[u][c]}catch(e){continue}if(!d[u].disabled&&(o=d[u][c]))for(s=o.length-1;s>=0;s--)if((a=o[s]).selectorText&&!a.disabled&&(l=this._rep(a.selectorText),-1!=xui.arr.indexOf(l.split(/\s*,\s*/g),e)))if(t){if(i){if(i===a.style[t])return d[u].ownerNode||d[u].owningElement}else if((!r||r==d[u].ownerNode||d[u].owningElement)&&""!==a.style[t])return(a.style[t]||"").replace(/^\"|\"$/g,"")}else(n=n||[]).push(a)}return n},_addRules:function(e,t){var i=this,r=i._getLast(),n=r.sheet||r.styleSheet;return n.insertRule?n.insertRule(i._build(e,t),n[i._r].length):n.addRule&&n.addRule(e,i._build(e,t,!0)||"{}"),r.disabled=!0,r.disabled=!1,i},adjustFont:function(e,t,i,r){e&&xui("html").css("font-size",e),t&&xui("html").css("font-family",t),i&&xui("html").css("font-weight",i),r&&xui("html").css("font-style",r),this._dftEmStr="",this._getDftEmSize(!0),this._dftRemStr="",this._getDftRemSize(!0),xui.UI&&xui.UI.getAll().reLayout(!0)},_dftEmStr:"",_dftEm:0,_getDftEmSize:function(e){var t=this;if(e||!t._dftEm){var i,r=t.$getCSSValue(".xui-ui-ctrl","fontSize");if(!t._dftEmStr||t._dftEmStr!=r)if((i=parseFloat(r))&&t.$isPx(r))t._dftEm=i,t._dftEmStr=r;else if(i&&t.$isRem(r))t._dftEm=i*t._getDftRemSize(),t._dftEmStr=r;else{var n;xui("body").append(n=xui.create('<div class="xui-ui-ctrl" style="height:1em;visibility:hidden;position:absolute;border:0;margin:0;padding:0;left:-10000px;"></div>')),t._dftEm=n.get(0).offsetParent?n.get(0).offsetHeight:0,n.remove(),t._dftEmStr=t._dftEm+"px"}}return t._dftEm},$resetEm:function(){delete xui.CSS._dftEm},_dftRemStr:"",_dftRem:0,_getDftRemSize:function(e){var t=this;return!e&&t._dftRem||(t._dftRem=parseFloat(xui("html").css("font-size"))||16),t._dftRem},$resetRem:function(){delete xui.CSS._dftRem},$isEm:function(e){return e&&"auto"!=e?/^-?((\d\d*\.\d*)|(^\d\d*)|(^\.\d\d*))em$/i.test(xui.str.trim(e+"")):1==xui.$us()},$isRem:function(e){return e&&"auto"!=e?/^-?((\d\d*\.\d*)|(^\d\d*)|(^\.\d\d*))rem$/i.test(xui.str.trim(e+"")):1==xui.$us()},$isPx:function(e){return e&&"auto"!=e?/^-?((\d\d*\.\d*)|(^\d\d*)|(^\.\d\d*))px$/i.test(xui.str.trim(e+"")):1==xui.$us()},$em2px:function(e,t,i){return e=e&&"auto"!=e&&(xui.isFinite(e)||this.$isEm(e))?(parseFloat(e)||0)*(t?xui.isFun(t)?t():xui.isFinite(t)?t:xui(t)._getEmSize():this._getDftEmSize()||this._getDftEmSize()):e,i?Math.round(parseFloat(e)||0):e},$px2em:function(e,t,i){return e&&"auto"!=e&&(xui.isFinite(e)||this.$isPx(e))?(i?Math.round(parseFloat(e)||0):parseFloat(e)||0)/(t?xui.isFun(t)?t():xui.isFinite(t)?t:xui(t)._getEmSize():this._getDftEmSize()||this._getDftEmSize()):e},$rem2px:function(e,t){return e=e&&"auto"!=e&&(xui.isFinite(e)||this.$isRem(e))?(parseFloat(e)||0)*this._getDftRemSize():e,t?Math.round(parseFloat(e)||0):e},$px2rem:function(e,t){return e&&"auto"!=e&&(xui.isFinite(e)||this.$isPx(e))?(t?Math.round(parseFloat(e)||0):parseFloat(e)||0)/this._getDftRemSize():e},$em2rem:function(e,t){return e&&"auto"!=e&&(xui.isFinite(e)||this.$isEm(e))?(parseFloat(e)||0)*(t?xui.isFinite(t)?t:xui(t)._getEmSize():this._getDftEmSize()||this._getDftEmSize())/this._getDftRemSize():e},$rem2em:function(e,t){return e&&"auto"!=e&&(xui.isFinite(e)||this.$isRem(e))?(parseFloat(e)||0)*this._getDftRemSize()/(t?xui.isFinite(t)?t:xui(t)._getEmSize():this._getDftEmSize()||this._getDftEmSize()):e},$px:function(e,t,i){return e=!xui.isFinite(e)&&this.$isRem(e)?this.$rem2px(e,i):this.$isEm(e)?this.$em2px(e,t,i):e&&"auto"!=e?parseFloat(e)||0:e,i?Math.round(parseFloat(e)||0):e},$em:function(e,t,i){return xui.isFinite(e)||this.$isPx(e)?this.$px2em(e,t,i):this.$isRem(e)?this.$rem2em(e,t):e&&"auto"!=e?parseFloat(e)||0:e},$rem:function(e,t,i){return xui.isFinite(e)||this.$isPx(e)?this.$px2rem(e,i):this.$isEm(e)?this.$em2rem(e,t):e&&"auto"!=e?parseFloat(e)||0:e},$addpx:function(e,t,i){return"auto"==e?e:this.$isRem(e)?this.$px2rem(Math.round(this.$rem2px(e)+(parseFloat(t)||0)))+"rem":this.$isEm(e)?this.$px2em(Math.round(this.$em2px(e,!1,i)+(parseFloat(t)||0)))+"em":Math.round((parseFloat(e)||0)+(parseFloat(t)||0))+"px"},$forceu:function(e,t,i,r){return null===e||e===undefined||""===e||"auto"==e?e:(t?"rem"==t:0===xui.$us())?this.$rem(e,i,!1!==r)+"rem":(t?"em"==t:1==xui.$us())?this.$em(e,i,!1!==r)+"em":Math.round(this.$px(e,i,!1!==r))+"px"},$picku:function(e){return e&&"auto"!=e&&(e+"").replace(/[-\d\s.]*/g,"")||(1==xui.$us()?"em":"px")},$addu:function(e){return"auto"==e?e:xui.isFinite(e)||this.$isPx(e)?Math.round(parseFloat(e)||0)+"px":e+""}},Initialize:function(){var e=xui.browser,t=(e.gek?e.ver<3?(e.ver<3?"-moz-outline-offset:-1px !important;":"")+"display:-moz-inline-block;display:-moz-inline-box;display:inline-block;":"display:inline-block;":e.ie6?"display:inline-box;display:inline;":"display:inline-block;")+(e.ie?"zoom:1;":""),i=".xui-node{margin:0;padding:0;line-height:1.22;-webkit-text-size-adjust:none;}.xui-root-node-ini, .xui-node-willChange{visibility:hidden !important; content-visibility:hidden !important;}.xui-node-highlight{color:#000;}.xui-title-node{}.xuifont-hover, .xuicon-hover{ color: #686868; }"+(xui.browser.fakeTouch||"touchOnly"==xui.browser.deviceType?"":".xuifont-active, .xuicon-active{ color: #3393D2; }")+".xuifont-checked, .xuicon-checked{ color: #3393D2; }.xui-wrapper{color:#000;font-family:arial,helvetica,clean,sans-serif;font-style:normal;font-weight:normal;vertical-align:middle;}.xui-cover{cursor:wait;background:url("+xui.ini.img_bg+") transparent repeat;opacity:1;}.xui-node-table{border-collapse:collapse;border-spacing:0;empty-cells:show;font-size:inherit;"+(e.ie?"font:100%;":"")+"}.xui-node-fieldset,.xui-node-img{border:0;}.xui-node-ol,.xui-node-ul,.xui-node-li{list-style:none;}.xui-node-caption,.xui-node-th{text-align:left;}.xui-node-th{font-weight:normal;}.xui-node-q:before,.xui-node-q:after{content:'';}.xui-node-abbr,.xui-node-acronym{border:0;font-variant:normal;}.xui-node-sup{vertical-align:text-top;}.xui-node-sub{vertical-align:text-bottom;}.xui-node-input,.xui-node-textarea,.xui-node-select{cursor:text;font-family:inherit;font-size:inherit;font-weight:inherit;"+(e.ie?"font-size:100%;":"")+"}.xui-node-del,.xui-node-ins{text-decoration:none;}.xui-node-pre,.xui-node-code,.xui-node-kbd,.xui-node-samp,.xui-node-tt{font-family:monospace;"+(e.ie?"font-size:108%;":"")+"line-height:100%;}.xui-node-select,.xui-node-input,.xui-node-textarea{font-family:arial,helvetica,clean,sans-serif;border-width:1px;}"+(e.ie&&e.ver<=8?".xui-node-input{overflow:hidden;}":"")+".xui-node-a, .xui-node-a .xui-node{cursor:pointer;color:#0000ee;text-decoration:none;}.xui-node-a:hover, .xui-node-a:hover .xui-node{color:red}"+(e.gek?".xui-node-a:focus{outline-offset:-1px;"+(e.ver<3?"-moz-outline-offset:-1px !important":"")+"}":"")+".xui-node-span, .xui-node-div{border:0;}"+(e.ie&&e.ver<=8?"":".xui-node-span:not(.xui-showfocus):focus, .xui-node-div:not(.xui-showfocus):focus{outline:0;}.xui-showfocus:focus{outline-width: 1px;outline-style: dashed;}")+".xui-node-span, .xui-wrapper span"+(e.ie&&e.ver<=7?"":", .xui-v-wrapper:before, .xui-v-wrapper > .xui-v-node")+"{outline-offset:-1px;"+t+"}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6{font-size:100%;font-weight:normal;}.xui-node-h1{font-size:138.5%;}.xui-node-h2{font-size:123.1%;}.xui-node-h3{font-size:108%;}.xui-node-h1,.xui-node-h2,.xui-node-h3{margin:1em 0;}.xui-node-h1,.xui-node-h2,.xui-node-h3,.xui-node-h4,.xui-node-h5,.xui-node-h6,.xui-node-strong{font-weight:bold;}.xui-node-em{font-style:italic;}.xui-node-legend{color:#000;}"+(e.ie6?"#"+xui.$localeDomId+"{vertical-align:baseline;}":"")+".xui-nofocus:focus{outline:0;}.xui-cls-wordwrap{white-space: pre-wrap;word-break: break-all;"+(e.gek?"white-space: -moz-pre-wrap;":"")+(e.opr?"white-space: -pre-wrap;":"")+(e.opr?"white-space: -o-pre-wrap;":"")+(e.ie?"word-wrap: break-word;":"")+"}"+(e.ie&&e.ver<=8?"":".xui-v-wrapper:before{content:'';height:100%;font-size:0;vertical-align:middle;}.xui-v-wrapper > .xui-v-node{vertical-align:middle;}.xui-v-top > .xui-v-wrapper:before{vertical-align:top;}.xui-v-top > .xui-v-wrapper > .xui-v-node{vertical-align:top;}.xui-v-bottom > .xui-v-wrapper:before{vertical-align:bottom;}.xui-v-bottom > .xui-v-wrapper > .xui-v-node{vertical-align:bottom;}")+".xui-node-tips{background-color:#FDF8D2;}.xuifont, .xuicon{font-size:1.3333333333333333em;line-height:1em;}.xuicon{margin: 0 .25em;"+t+"}.xuicon:before{height:1em;width:1em;}.xui-ui-ctrl, .xui-ui-reset{font-family:arial,helvetica,clean,sans-serif; font-style:normal; font-weight:normal; vertical-align:middle; color:#000; }.xui-ui-reset{font-size: inherit;}.xui-ui-ctrl{cursor:default;font-size:.875rem;}.xui-title-node{font-size:1.1667em  !important;}.xui-svg-container{position:absolute;left:0;top:0;right:0;bottom:0;width:100%;height:100%;overflow:visible;z-index:2;pointer-events:none;}.xui-svg-container * {pointer-events: auto;}.setting-uikey{font-family:'default'}";this.addStyleSheet(i,"xui.CSS")}}),xui.Class("xui.DomProfile","xui.absProfile",{Constructor:function(e){var t=arguments.callee.upper;t&&t.call(this),t=null,xui.$cache.profileMap[this.domId=e]=this},Instance:{__gc:function(){delete xui.$cache.profileMap[this.domId]},_getEV:function(e,t,i){var r=xui.$cache.profileMap[t];if(r&&(r=r.events)&&(r=r[i]))for(var n=0,o=r.length;n<o;n++)"function"==typeof r[r[n]]&&(e[e.length]=r[r[n]])}},Static:{get:function(e){return xui.$cache.profileMap[e]},$abstract:!0}}),xui.Class("xui.Dom","xui.absBox",{Instance:{get:function(e){var t,i=xui.$cache.domPurgeData,r=this._nodes;if(xui.isNumb(e))return(t=r[e])&&(t=i[t])&&t.element;for(var n=[],o=r.length,a=0;a<o;a++)n[n.length]=(t=i[r[a]])&&t.element;return n},each:function(e,t){var i,r,n=this,o=xui.$cache.domPurgeData,a=n._nodes,u=a.length;if(t)for(r=u;r>=0&&(!(i=o[a[r]])||!(i=i.element)||!1!==e.call(n,i,r));r--);else for(r=0;r<u&&(!(i=o[a[r]])||!(i=i.element)||!1!==e.call(n,i,r));r++);return i=null,n},serialize:function(){var e=[];return this.each((function(t){e[e.length]=t.id})),"xui(['"+e.join("','")+"'])"},xid:function(){return xui.getId(this.get(0))},id:function(e,t){var i,r,n=xui.$cache.profileMap;return"string"==typeof e?this.each((function(o){(r=o.id)!==e&&(!t&&(i=n[r])&&(n[e]=i,delete n[r]),o.id=e)})):this.get(0)&&this.get(0).id},$sum:function(e,t){var i,r,n=[];return this.each((function(o){if(i=e.apply(o,t||[]))if(xui.isArr(i))for(r=0;o=i[r];r++)n[n.length]=o;else n[n.length]=i})),xui(n)},children:function(){return this.$sum((function(){return xui.toArr(this.childNodes)}))},clone:function(e){return this.$sum((function(){var t,i=this.cloneNode(!!e),r=i.getElementsByTagName("*"),n=xui.browser.ie&&xui.browser.ver<9,o=0;for(n?i.removeAttribute("$xid"):delete i.$xid;t=r[o];o++)n?t.removeAttribute("$xid"):delete t.$xid;return i}),arguments)},$iterator:function(e,t,i,r,n){return this.$sum((function(e,t,i,r,n){var o=arguments.callee;if("function"!=typeof r){var a=r||0;r=function(e,t){return t==a}}for(var u,s,l=0,c=this,d=0;c&&(1!=c.nodeType||!0!==r(c,l++));)if("x"==e)c=t?c.nextSibling:c.previousSibling;else if("y"==e)c=t?o.call(1===t?c.lastChild:c.firstChild,"x",1!==t,!0,0,n):c.parentNode;else{if(i=!xui.isBool(i)||i,u=null,c=t?(s=i&&c.firstChild)||(s=c.nextSibling)?s:u=c.parentNode:(s=i&&c.lastChild)||(s=c.previousSibling)?s:u=c.parentNode,u){for(;!(u=t?c.nextSibling:c.previousSibling);)if(!(c=c.parentNode)){if(d)return null;d=!0,u=t?document.body.firstChild:document.body.lastChild;break}c=u}i=!0}return c}),arguments)},query:function(e,t,i){e=e||"*";var r="getElementsByTagName",n=arguments.callee,o=n.f1||(n.f1=function(e,t,i){var n=this[r](e),o=[];i.test(this[t])&&(o[o.length]=this);for(var a,u=0;a=n[u];u++)i.test(a[t])&&(o[o.length]=a);return o}),a=n.f2||(n.f2=function(e,t,i){var n=this[r](e),o=[];this[t]==i&&(o[o.length]=this);for(var a,u=0;a=n[u];u++)a[t]==i&&(o[o.length]=a);return o}),u=n.f3||(n.f3=function(e,t,i){var n=this[r](e),o=[];this[t]&&(o[o.length]=this);for(var a,u=0;a=n[u];u++)a[t]&&(o[o.length]=a);return o}),s=n.f4||(n.f4=function(e){return xui.toArr(this[r](e))}),l=n.f5||(n.f5=function(e,t){var i=this[r](e),n=[];t(this)&&(n[n.length]=this);for(var o,a=0;o=i[a];a++)t(o)&&(n[n.length]=o);return n});return this.$sum(t?"function"==typeof t?l:i?xui.isReg(i)?o:a:u:s,[e,t,i])},querySelector:function(e){return this.$sum((function(){return this.querySelector(e)}))},querySelectorAll:function(e){return this.$sum((function(){return xui.toArr(this.querySelectorAll(e))}))},$add:function(e,t,i){if((xui.isHash(t)||xui.isStr(t))&&(t=xui.create(t)),i?(i=xui(t),t=this):(t=xui(t),i=this),t._nodes.length){var r,n,o,a,u,s,l,c=i.get(0),d=t.get(),f=xui.Dom,p=xui.$cache.profileMap,x=[];if(t.each((function(e){(l=(n=e.id)&&(n=p[n])&&n.LayoutTrigger&&(c===xui("body").get(0)||"none"!=f.getStyle(c,"display"))&&n.LayoutTrigger)&&x.push([l,n])})),1==d.length)r=d[0];else for(r=document.createDocumentFragment(),o=0;a=d[o];o++)r.appendChild(a);for(xui.Dom.beforeNodeChange(),e.call(c,r),xui.Dom.afterNodeChange(),o=0;a=x[o];o++){for(u=0;s=a[0][u];u++)s.call(a[1]);a[1].onLayout&&a[1].boxing().onLayout(a[1])}x.length=0,c=a=r=null}return this},prepend:function(e,t){return this.$add((function(e){this.previousSibling!=e&&(this.firstChild?this.insertBefore(e,this.firstChild):this.appendChild(e))}),e,t)},append:function(e,t,i){return this.$add((function(e){(i||this!=e.parentNode)&&this.appendChild(e)}),e,t)},addPrev:function(e,t){return this.$add((function(e){this.firstChild!=e&&this.parentNode.insertBefore(e,this)}),e,t)},addNext:function(e,t){return this.$add((function(e){this.nextSibling!=e&&(this.nextSibling?this.parentNode.insertBefore(e,this.nextSibling):this.parentNode.appendChild(e))}),e,t)},contains:function(e){var t=!1;return this.each((function(i){if(i.contains&&i.contains(e))t=!0;else for(var r=e;r=r.parentNode;)if(r==i){t=!0;break}if(t)return!1})),t},replace:function(e,t){(xui.isHash(e)||xui.isStr(e))&&(e=xui.create(e)),e=xui(e);var i,r,n=this.get(0),o=e.get(),a=o.length;if(a>0&&(i=o[a-1])){for(xui.Dom.beforeNodeChange(),n.parentNode.replaceChild(i,n),r=0;r<a-1;r++)i.parentNode.insertBefore(o[r],i);xui.Dom.afterNodeChange(),t&&this.remove()}return n=i=null,e},swap:function(e){var t=this,i=xui.Dom.getEmptyDiv().html("*",!1);return(xui.isHash(e)||xui.isStr(e))&&(e=xui.create(e)),e=xui(e),t.replace(i,!1),e.replace(t,!1),i.replace(e,!1),i.get(0).innerHTML="",document.body.insertBefore(i.get(0),document.body.firstChild),t},remove:function(e,t,i){if(xui.Dom.beforeNodeChange(),!1===e)this.each((function(e,t){e.raphael&&e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}));else{var r=xui.$getGhostDiv();this.each((function(e){r.appendChild(e)}),!0);var n=function(){xui.$purgeChildren(r),i&&(xui.tryF(i),i=null),r=null};t?n():xui.asyRun(n)}return xui.Dom.afterNodeChange(),this},empty:function(e,t){return this.each((function(i){xui.Dom.beforeNodeChange(),xui.Dom.willChange(),xui([i]).html("",e,null,t),xui.Dom.unWillChange(),xui.Dom.afterNodeChange()}))},html:function(e,t,i,r,n){var o,a="",u=this.get(0);if(t=!1!==t,e!==undefined){if(u){if(3==u.nodeType)u.nodeValue=e;else{if(!u.firstChild&&""===e)return this;if(xui.Dom.beforeNodeChange(),xui.Dom.willChange(),t){var s=xui.$getGhostDiv();for(o=u.childNodes.length-1;o>=0;o--)s.appendChild(u.childNodes[o]);var l=function(){xui.$purgeChildren(s),n&&(xui.tryF(n),n=null),s=null};r?l():xui.asyRun(l)}var c;if(i){var d,f,p,x=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/gi,h=/\ssrc=([\'\"])(.*?)\1/i;for(c=[];d=x.exec(e);)(p=!!(f=d[1])&&f.match(h))&&p[2]?c.push([1,p[2]]):d[2]&&d[2].length>0&&c.push([2,d[2]]);e=e.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/gi,"")}u.innerHTML=e,c&&c.length>0&&xui.arr.each(c,(function(e){1==e[0]?xui.include(null,e[1]):xui.exec(e[1])})),xui.Dom.unWillChange(),xui.Dom.afterNodeChange()}u=null}return this}return u&&(a=3==u.nodeType?u.nodeValue:u.innerHTML,u=null),a},loadHtml:function(e,t,i){var r=this;"string"==typeof e&&(e={url:e}),xui.tryF(t),xui.Ajax(e.url,e.query,(function(e){var t=xui.create("div");t.html(e,!1,!0),r.append(t.children()),xui.tryF(i)}),(function(e){r.append("<div>"+e+"</div>"),xui.tryF(i)}),null,e.options).start()},loadIframe:function(e,t){"string"==typeof e&&(e={url:e});var i,r=t||"aiframe_"+xui.stamp();(i=xui.Dom.byId(t))&&xui(i).remove();var n=xui.browser.ie&&xui.browser.ver<9,o=document.createElement(n?"<iframe name='"+r+"'>":"iframe");o.id=o.name=r,o.src=e.url,o.frameBorder="0",o.marginWidth="0",o.marginHeight="0",o.vspace="0",o.hspace="0",o.allowTransparency="true",o.width="100%",o.height="100%",this.append(o),xui.Dom.submit(e.url,e.query,e.method,o.name,e.enctype)},outerHTML:function(e,t){var i=this,r="",n=i.get(0);if(n.id,e!==undefined){var o=i.replace(xui.str.toDom(e),!1);return i._nodes[0]=o._nodes[0],xui([n]).remove(t),i}if(xui.browser.gek){var a=xui.$getGhostDiv();a.appendChild(i.get(0).cloneNode(!0)),r=a.innerHTML,a.innerHTML="",a=null}else r=n.outerHTML;return n=null,r},text:function(e){return e!==undefined?(this.each((function(t){for(var i,r=t.childNodes.length-1;r>=0;r--)(i=t.childNodes[r])&&3==i.nodeType&&(i.nodeValue="");t.appendChild(document.createTextNode(e))})),this):(t=this.get(0))?t.textContent||t.innerText:"";var t},attr:function(e,t){var i=this,r=arguments.callee,n=r.map1||(r.map1={class:"className",readonly:"readOnly",tabindex:"tabIndex",for:"htmlFor",maxlength:"maxLength",cellspacing:"cellSpacing",rowspan:"rowSpan",value:"value"}),o=r.map2||(r.map2={href:1,src:1,style:1});if("object"==typeof e){for(var a in e)r.call(i,a,e[a]);return i}var u=xui.browser.ie&&"style"==e,s=!o[e=n[e]||e];if(t!==undefined)return i.each((function(i){if(xui.Dom.beforeNodeChange(),null===t){if(u)i.style.cssText="";else if(s)try{i[e]=null,1==i.nodeType&&i.removeAttribute(e)}catch(e){}}else t="style"==e?(t+"").replace(/[;]+/g,";").replace(/^;/,""):t,u?i.style.cssText=""+t:s?(i[e]=t,1==i.nodeType&&"value"!=e&&"string"==typeof t&&i.setAttribute(e,t)):i.setAttribute(e,t);xui.Dom.afterNodeChange()}));var l,c=i.get(0);return u?c.style.cssText:"selected"==e&&xui.browser.kde?c.parentNode.selectedIndex:(l=e in c&&s?c[e]:c.getAttribute(e,xui.browser.ie&&!s?2:undefined),c=null,"style"==e?(l||"").replace(/[;]+/g,";").replace(/^;/,""):l)},$touchscroll:function(e){if(xui.browser.fakeTouch||xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB)){var t={x:1,y:1,xy:1},i=this._nodes,r=function(e){var t=xui.getNodeData(e,"_wheelscroll");return t||xui.setNodeData(e,"_wheelscroll",t={}),t},n=function(e){var t=r(e);if((t._speedx||t._speedy)&&(new Date).getTime()-t._lastTime<50){var i,n={},o=e.scrollLeft,a=e.scrollTop;if(t._speedx&&(i=[Math.max(0,o),Math.max(0,o+Math.sign(t._speedx)*Math.min(50,Math.abs(t._speedx))*40)])[0]!==i[1]&&(n.scrollLeft=i),t._speedy&&(i=[Math.max(0,a),Math.max(0,a+Math.sign(t._speedy)*Math.min(50,Math.abs(t._speedy))*40)])[0]!==i[1]&&(n.scrollTop=i),!xui.isEmpty(n)){var u=xui.getNodeData(e,"_inthread");u&&(xui.Thread.abort(u),xui.setNodeData(e,"_inthread"),xui.setData(["!document","$fakescroll"])),xui(e).animate(n,null,null,2e3,null,"expoOut").start()}}t._opx=t._opy=t._ox=t._oy=t._lastTime=t._speedx=t._speedy=null};t[e]||(e=null),xui(i)[xui.browser.fakeTouch?"onMousedown":"onTouchstart"](t[e]?function(t,i,o){if(xui.DragDrop._profile.isWorking)return!0;if(!xui(o).scrollable("x")&&!xui(o).scrollable("y"))return!0;var a,u=xui(o).get(0),s=xui.getNodeData(u,"_inthread");s&&(xui.Thread.abort(s),xui.setNodeData(u,"_inthread"));var l=r(u);if(xui.browser.fakeTouch){if("left"!==xui.Event.getBtn(i))return!0;a=i}else{if(i.touches.length>1)return!0;a=i.touches[0]}return u&&("xy"!=e&&"x"!=e||(l._ox=u.scrollLeft,l._opx=a.pageX),"xy"!=e&&"y"!=e||(l._oy=u.scrollTop,l._opy=a.pageY)),!xui.browser.fakeTouch||(xui.setData(["!document","$fakescroll"],o),xui.doc.onMouseup((function(e,t,i){xui.setData(["!document","$fakescroll"]),xui.asyRun((function(){xui.setData(["!document","$fakescrolling"])})),xui.doc.onMouseup(null,"touchscroll"),n(u)}),"touchscroll"),!0)}:null,"touchscroll"),xui(i)[xui.browser.fakeTouch?"onMousemove":"onTouchmove"](t[e]?function(t,i,n){if(xui.DragDrop._profile.isWorking)return!0;if(xui.browser.fakeTouch&&xui.getData(["!document","$fakescroll"])!=n)return!0;var o,a,u,s=xui(n).get(0);if(xui.browser.fakeTouch){if("left"!==xui.Event.getBtn(i))return!0;o=i}else{if(i.touches.length>1)return!0;o=i.touches[0]}if(s){var l=r(s);return l._lastTime=(new Date).getTime(),a=s.scrollLeft,u=s.scrollTop,"xy"!=e&&"x"!=e||(s.scrollLeft=l._ox+l._opx-o.pageX,a==s.scrollLeft?(l._ox=s.scrollLeft,l._opx=o.pageX):l._speedx=s.scrollLeft-a),"xy"!=e&&"y"!=e||(null===l._oy&&(l._oy=s.scrollTop+l._opy),s.scrollTop=l._oy+l._opy-o.pageY,u==s.scrollTop?(l._oy=s.scrollTop,l._opy=o.pageY):l._speedy=s.scrollTop-u),xui.browser.fakeTouch&&(a===s.scrollLeft&&u===s.scrollTop||xui.setData(["!document","$fakescrolling"],1)),a==s.scrollLeft&&u==s.scrollTop}}:null,"touchscroll"),xui(i).onTouchend(t[e]?function(e,t,i){return!!xui.DragDrop._profile.isWorking||t.touches.length>1||void n(xui(i).get(0))}:null,"touchscroll")}return this},isDisplayed(){var e=this.get(0);return e&&!!e.offsetParent},isScrollBarShowed:function(e){var t=this.get(0);if(t&&t.offsetParent)return"y"==e?(t.offsetWidth||0)>(t.clientWidth||0):(t.offsetHeight||0)>(t.clientHeight||0)},scrollable:function(e){return 0!==this[e="x"==e?"scrollLeft":"scrollTop"]()||(this[e](1),0!==this[e]()&&(this[e](0),!0))},scrollIntoView:function(e){return this.each((function(t){xui.Dom.willChange(t,"scroll-position"),t.scrollIntoView({behavior:e?"instant":"smooth",block:"nearest",inline:"start"}),xui.Dom.unWillChange(t)}))},css:function(e,t,i){return"object"==typeof e||t!==undefined?(this.each((function(i){xui.Dom.setStyle(i,e,t)})),(xui.browser.fakeTouch||xui.browser.isTouch&&(xui.browser.isAndroid||xui.browser.isBB))&&("overflow"!=e&&"overflow-x"!=e&&"overflow-y"!=e||("auto"==t||"scroll"==t?this.$touchscroll("overflow"==e?"xy":"overflow-x"==e?"x":"y"):this.$touchscroll(null))),this):xui.Dom.getStyle(this.get(0),e,i)},_getEmSize:function(e){return this.get(0)?(parseFloat(xui.Dom.getStyle(this.get(0),"fontSize",!0))||xui.CSS._getDftEmSize())*(e||1):null},rotate:function(e){if(xui.isSet(e))return e=parseFloat(e)||0,(e%=360)<0&&(e+=360),this.each((function(t){if(t.raphael&&t.id){var i=xui.Event._getProfile(t.id);(i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))&&t.transform("r"+e)}else{e+="deg";var r=t.style.transform||"";/rotate\([^)]*\)/i.test(r)?r=r.replace(/(rotate\()([^)]+)/i,"$1"+e):r+=" rotate("+e+")",xui.Dom.setStyle(t,"transform",r)}}));var t=this.get(0);if(t.raphael&&t.id){var i=xui.Event._getProfile(t.id);if((i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))){t=t.transform(),t=xui.isArr(t)?t.length?t.join():"":t?window.Raphael.parseTransformString(t).join():"";var r=/r,([-\d.]+)/i.exec(t);return e=r?parseFloat(r[1]||0):0,(e%=360)<0&&(e+=360),e}return 0}return(r=/rotate\(([-\d.]+)/i.exec(t.style.transform))?parseFloat(r[1]||0):0},scaleX:function(e){if(xui.isSet(e))return this.each((function(t){if(e=parseFloat(e),t.raphael&&t.id){e=e||0;var i,r=xui.Event._getProfile(t.id);(r=r&&r.parent&&r.parent._paper)&&(t=r.getById(t.raphaelid))&&((i=xui.clone(window.Raphael.parseTransformString(t.transform()),!0))&&i[0]&&"s"==i[0][0]?i[0][1]=e:(i=i||[]).unshift(["s",e,1]),t.transform(i))}else{xui.isNaN(e)&&(e=1);var n=t.style.transform||"";/(scale\()([^,]+),([^)]+)/i.test(n)?n=n.replace(/(scale\()([^,]+),([^)]+)/i,"$1"+e+",$3"):/scale\([-\d.]*\)/i.test(n)?n=n.replace(/scale\([-\d.]*\)/i,"scale("+e+",1)"):n+=" scale("+e+",1)",xui.Dom.setStyle(t,"transform",n)}}));var t=this.get(0);if(t.raphael&&t.id){e=1;var i=xui.Event._getProfile(t.id);return(i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))&&xui.arr.each(window.Raphael.parseTransformString(t.transform()),(function(t){"s"==t[0]&&(e*=t[1])})),e}var r=/(scale\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return r?parseFloat(r[2]||1):(r=/scale\(([-\d.]*)\)/i.exec(this.get(0).style.transform))?r[1]:1},scaleY:function(e){if(xui.isSet(e))return this.each((function(t){if(e=parseFloat(e),t.raphael&&t.id){e=e||0;var i,r=xui.Event._getProfile(t.id);(r=r&&r.parent&&r.parent._paper)&&(t=r.getById(t.raphaelid))&&((i=xui.clone(window.Raphael.parseTransformString(t.transform()),!0))&&i[0]&&"s"==i[0][0]?i[0][2]=e:(i=i||[]).unshift(["s",1,e]),t.transform(i))}else{xui.isNaN(e)&&(e=1);var n=t.style.transform||"";/(scale\()([^,]+),([^)]+)/i.test(n)?n=n.replace(/(scale\()([^,]+),([^)]+)/i,"$1$2,"+e):/scale\([-\d.]*\)/i.test(n)?n=n.replace(/scale\([-\d.]*\)/i,"scale(1,"+e+")"):n+=" scale(1,"+e+")",xui.Dom.setStyle(t,"transform",n)}}));var t=this.get(0);if(t.raphael&&t.id){e=1;var i=xui.Event._getProfile(t.id);return(i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))&&xui.arr.each(window.Raphael.parseTransformString(t.transform()),(function(t){"s"==t[0]&&(e*=t[2])})),e}var r=/(scale\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return r?parseFloat(r[3]||1):(r=/scale\(([-\d.]*)\)/i.exec(this.get(0).style.transform))?r[1]:1},translateX:function(e){if(xui.isSet(e))return this.each((function(t){if(t.raphael&&t.id){e=parseFloat(e)||0;var i,r=xui.Event._getProfile(t.id);(r=r&&r.parent&&r.parent._paper)&&(t=r.getById(t.raphaelid))&&((i=xui.clone(window.Raphael.parseTransformString(t.transform()),!0))&&i.length&&i[i.length-1]&&"t"==i[i.length-1][0]?i[i.length-1][1]=e:(i=i||[]).push(["t",e,0]),t.transform(i))}else{e=xui.CSS.$addu(e);var n=t.style.transform||"";/translate\([^)]*\)/i.test(n)?n=n.replace(/(translate\()([^,]+),([^)]+)/i,"$1"+e+",$3"):n+=" translate("+e+",0)",xui.Dom.setStyle(t,"transform",n)}}));var t=this.get(0);if(t.raphael&&t.id){e=0;var i=xui.Event._getProfile(t.id);return(i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))&&xui.arr.each(window.Raphael.parseTransformString(t.transform()),(function(t){"t"==t[0]&&(e+=t[1])})),e}var r=/(translate\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return r?(r[2]||"").replace(/\s/g,""):""},translateY:function(e){if(xui.isSet(e))return this.each((function(t){if(t.raphael&&t.id){e=parseFloat(e)||0;var i,r=xui.Event._getProfile(t.id);(r=r&&r.parent&&r.parent._paper)&&(t=r.getById(t.raphaelid))&&((i=xui.clone(window.Raphael.parseTransformString(t.transform()),!0))&&i.length&&i[i.length-1]&&"t"==i[i.length-1][0]?i[i.length-1][2]=e:(i=i||[]).push(["t",0,e]),t.transform(i))}else{e=xui.CSS.$addu(e);var n=t.style.transform||"";/translate\([^)]*\)/i.test(n)?n=n.replace(/(translate\()([^,]+),([^)]+)/i,"$1$2,"+e):n+=" translate(0,"+e+")",xui.Dom.setStyle(t,"transform",n)}}));var t=this.get(0);if(t.raphael&&t.id){e=0;var i=xui.Event._getProfile(t.id);return(i=i&&i.parent&&i.parent._paper)&&(t=i.getById(t.raphaelid))&&xui.arr.each(window.Raphael.parseTransformString(t.transform()),(function(t){"t"==t[0]&&(e+=t[2])})),e}var r=/(translate\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return r?(r[3]||"").replace(/\s/g,""):""},skewX:function(e){if(xui.isSet(e))return xui.isFinite(e)&&(e+="deg"),this.each((function(t){var i=t.style.transform||"";/skew\([^)]*\)/i.test(i)?i=i.replace(/(skew\()([^,]+),([^)]+)/i,"$1"+(e||0)+",$3"):i+=" skew("+e+",0deg)",xui.Dom.setStyle(t,"transform",i)}));var t=/(skew\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return t?parseFloat(t[2]||0):0},skewY:function(e){if(xui.isSet(e))return xui.isFinite(e)&&(e+="deg"),this.each((function(t){var i=t.style.transform||"";/skew\([^)]*\)/i.test(i)?i=i.replace(/(skew\()([^,]+),([^)]+)/i,"$1$2,"+(e||0)):i+=" skew(0deg,"+e+")",xui.Dom.setStyle(t,"transform",i)}));var t=/(skew\()([^,]+),([^)]+)/i.exec(this.get(0).style.transform);return t?parseFloat(t[3]||0):0},caret:function(e,t){var i=this.get(0),r=i.nodeName.toLowerCase(),n=typeof e,o=xui.browser.ie;if(/^(input|textarea)$/i.test(r)&&("input"!=r||"text"==i.type.toLowerCase()||"password"==i.type.toLowerCase())){if(i.focus(),"number"==n)return o?((u=i.createTextRange()).collapse(!0),u.moveEnd("character",t),u.moveStart("character",e),u.select()):(i.focus(),i.setSelectionRange(e,t)),this;if("string"==n){var a,u=this.caret(),s=0,l=0,c=i.value,d=/\r/g;return o&&(s=(s=c.substr(0,u[0]).match(d))&&s.length||0,l=(l=e.match(d))&&l.length||0),xui.browser.opr&&(l=(s=(s=e.match(/\n/g))&&s.length||0)-(l=(l=e.match(/\r\n/g))&&l.length||0),s=0),i.value=c.substr(0,u[0])+e+c.substr(u[1],c.length),a=u[0]-s+l+e.length,this.caret(a,a),a}if(o&&document.selection){var f;if(s=(u=document.selection.createRange()).text.length,"input"==r.toLowerCase())return u.moveStart("character",-i.value.length),[(f=u.text.length)-s,f];var p=u.duplicate();return p.moveToElementText(i),p.setEndPoint("EndToEnd",u),[(f=p.text.length)-s,f]}return[i.selectionStart,i.selectionEnd]}},show:function(e,t,i,r,n){var o,a,u;return this.each((function(s){if(1==s.nodeType){var l=xui.getNodeData(s,"_inthread");l&&(xui.Thread.abort(l),xui.setNodeData(s,"_inthread")),xui.Dom.beforeNodeChange(),o=s.style,(u=xui.getNodeData(s))._xuihide&&("_left"in u&&o.left!=(a=u._left)&&(o.left=a),"_top"in u&&o.top!=(a=u._top)&&(o.top=a),"_position"in u&&o.position!=(a=u._position)&&(o.position=a),"visible"!=o.visibility&&(o.visibility="visible"),xui(s).removeClass("xui-ui-hidden"),u._xuihide=0),xui.isSet(e)&&(o.left=e),xui.isSet(t)&&(o.top=t),(r=n?null:r||xui.get(xui.UIProfile.getFromDom(s),["properties","showEffects"]))&&(r=xui.Dom._getEffects(r,1)),r?xui.Dom._vAnimate(s,r,i):i&&i(),xui.Dom.afterNodeChange()}}))},hide:function(e,t,i){var r,n;return this.each((function(o){if(1==o.nodeType){var a=xui.getNodeData(o,"_inthread");a&&(xui.Thread.abort(a),xui.setNodeData(o,"_inthread")),r=o.style,n=xui.getNodeData(o);var u=function(){1!==n._xuihide&&(n._position=r.position,n._visibility=r.visibility,n._top=r.top,n._left=r.left,n._xuihide=1),xui.Dom.beforeNodeChange(),xui(o).addClass("xui-ui-hidden"),"absolute"!=r.position&&(r.position="absolute"),r.visibility="hidden",xui.Dom.afterNodeChange(),e&&e()};(t=i?null:t||xui.get(xui.UIProfile.getFromDom(o),["properties","hideEffects"]))&&(t=xui.Dom._getEffects(t,0)),t?xui.Dom._vAnimate(o,t,u):u()}}))},cssRegion:function(e,t){var i=this;if("object"==typeof e){var r,n=i.get(0),o=xui.Dom,a=o._setUnitStyle,u={};xui.Dom.beforeNodeChange(),xui.Dom.willChange(n,"left, top, width, height");for(var s=0,l=o._boxArr;r=l[s++];)u[r]=r in e&&null!==e[r]&&a(n,r,e[r]);return xui.Dom.unWillChange(n),xui.Dom.afterNodeChange(),t&&((a=o.$hasEventHandler)(n,"onsize")&&(u.width||u.height)&&i.onSize(!0,{width:u.width,height:u.height}),a(n,"onmove")&&(u.left||u.top)&&i.onMove(!0,{left:u.left,top:u.top})),i}var c=t,d=e?i.offset(null,c):i.cssPos(),f=i.cssSize();return{left:d.left,top:d.top,width:f.width,height:f.height}},cssSize:function(e,t){var i,r,n,o=this,a=o.get(0),u=xui.Dom,s=u._setUnitStyle;return a?(e?(xui.Dom.beforeNodeChange(),xui.Dom.willChange(a,"width, height"),r=null!==e.width&&s(a,"width",e.width),n=null!==e.height&&s(a,"height",e.height),xui.Dom.unWillChange(a),xui.Dom.afterNodeChange(),t&&(r||n)&&u.$hasEventHandler(a,"onsize")&&o.onSize(!0,{width:r,height:n}),i=o):i={width:o._W(a,1)||0,height:o._H(a,1)},i):e?o:{}},cssPos:function(e,t){var i,r,n,o=this.get(0),a=xui.Dom,u=xui.CSS,s=a._setUnitStyle;return e?(xui.Dom.beforeNodeChange(),xui.Dom.willChange(o,"left, top"),i=null!=e.left&&s(o,"left",e.left),r=null!==e.top&&s(o,"top",e.top),xui.Dom.unWillChange(o),xui.Dom.afterNodeChange(),t&&(i||r)&&a.$hasEventHandler(o,"onmove")&&this.onMove(!0,{left:i,top:r}),n=this):(s=a.getStyle,n={left:u.$px(s(o,"left"),o),top:u.$px(s(o,"top"),o)}),o=null,n},offset:function(e,t,i){var r,n,o=xui.browser,a=this,u=a.get(0),s=u,l=u.parentNode,c=u.offsetParent,d=u.ownerDocument,f=d.documentElement,p=d.body,x=/^inline|table.*$/i,h=xui.Dom.getStyle,g="fixed"==h(u,"position"),A=arguments.callee,m=A.add||(A.add=function(e,t,i){e.left+=parseFloat(t)||0,e.top+=parseFloat(i)||0}),y=A.border||(A.border=function(e,t){m(t,h(e,"borderLeftWidth"),h(e,"borderTopWidth"))}),v=A.TTAG||(A.TTAG={TABLE:1,TD:1,TH:1}),b=A.HTAG||(A.HTAG={BODY:1,HTML:1}),_=A.posDiff||(A.posDiff=function(e,t){var i=e.cssPos(),r=e.offset(null,t);return{left:r.left-i.left,top:r.top-i.top}});if(t=t?xui(t).get(0):d,e){if(null===e.left&&null===e.top)return a;var w=_(a,t);a.cssPos({left:null===e.left?null:e.left-w.left,top:null===e.top?null:e.top-w.top}),r=a}else{if(!(xui.browser.ie||xui.browser.gek&&xui.browser.ver<=3)||xui.browser.gek&&u===document.body||!u.getBoundingClientRect){for(m(e={left:0,top:0},u.offsetLeft,u.offsetTop);c&&c!=t&&c!=t.offsetParent;)m(e,c.offsetLeft,c.offsetTop),(o.kde||o.gek&&!v[c.nodeName])&&y(c,e),g||"fixed"!=h(c,"position")||(g=!0),"BODY"!=c.nodeName&&(s="BODY"==c.nodeName?s:c),c=c.offsetParent;for(;l&&l.nodeName&&l!=t&&!b[l.nodeName];)x.test(h(l,"display"))||m(e,-l.scrollLeft,-l.scrollTop),o.gek&&"visible"!=h(l,"overflow")&&y(l,e),l=l.parentNode;o.gek&&"absolute"!=h(s,"position")&&m(e,-p.offsetLeft,-p.offsetTop),g&&m(e,f.scrollLeft||p.scrollLeft||0,f.scrollTop||p.scrollTop||0)}else if(e={left:(n=xui.Dom.$getBoundingClientRect(u,i)).left,top:n.top},1==t.nodeType&&t!==document.body)m(e,-(n=xui.Dom.$getBoundingClientRect(t,i)).left+t.scrollLeft,-n.top+t.scrollTop);else{var C=xui.Dom.getEmptyDiv();C.css({left:0,top:0,position:"absolute","content-visibility":""});var E=xui.Dom.$getBoundingClientRect(C.get(0),i);C.css({left:xui.Dom.HIDE_VALUE,top:xui.Dom.HIDE_VALUE,"content-visibility":"hidden"}),m(e,-E.left,-E.top)}r=e}return r},hasClass:function(e){var t,i,r=xui.isReg(e),n=xui.Dom._getClass(this.get(0)).split(/\s+/);if(!r)return-1!=xui.arr.indexOf(n,e+"");for(t=0,i=n.length;t<i;t++)if(e.test(n[t]))return!0;return!1},addClass:function(e){if(!e)return this;var t,i,r,n,o,a=arguments.callee,u=a.reg||(a.reg=/\s+/),s=(e+"").split(u);return s.length?this.each((function(e){for(o=0,t=xui.Dom._getClass(e).split(u),n=[],i=0,r=t.length;i<r;i++)t[i]&&n.push(t[i]);for(i=0,r=s.length;i<r;i++)s[i]&&-1==xui.arr.indexOf(t,s[i])&&(o=1,n.push(s[i]));o&&xui.Dom._setClass(e,n.join(" "))})):this},removeClass:function(e){var t,i,r,n,o,a=xui.isReg(e),u=arguments.callee,s=u.reg||(u.reg=/\s+/);return a||(o=(e+"").split(s)).length?this.each((function(u){if(n=0,t=xui.Dom._getClass(u).split(s),a)xui.filter(t,(function(t,i){if(e.test(t))return n=1,!1}));else for(i=0,r=o.length;i<r;i++)-1!=xui.arr.indexOf(t,o[i])&&(n=1,xui.arr.removeValue(t,o[i]));n&&xui.Dom._setClass(u,t.join(" "))})):this},replaceClass:function(e,t){var i,r;return this.each((function(n){r=(i=xui.Dom._getClass(n)).replace(e,t),i!=r&&xui.Dom._setClass(n,r)}))},tagClass:function(e,t){var i=this,r=arguments.callee,n=r["_r1_"+e]||(r["_r1_"+e]=new RegExp("(xui-[-\\w]+"+e+"((-[w]*)+|$))")),o=r._r2||(r._r2=/(xui-[-\w]+)/g);i.removeClass(n);var a=(t=!1!==t)?i.replaceClass(o,"$1 $1"+e):i;return!xui.__iefix2||"-checked"!=e&&"-fold"!=e&&"-expand"!=e||this.each((function(i){var r=xui.Dom._getClass(i).split(/\s+/);-1==xui.arr.indexOf(r,"xuifont")&&-1==xui.arr.indexOf(r,"xuicon")||xui.arr.each(r,(function(r){if(xui.__iefix2[r+(t?"":e)]&&xui.__iefix2[t?r.replace(new RegExp(e+"$"),""):r])return xui(i).html(xui.__iefix2[r.replace(new RegExp(e+"$"),"")+(t?e:"")]),!1}))})),a},$addEventHandler:function(e){var t,i=xui.Event,r=i.$eventhandler;return this.each((function(n){3!=n.nodeType&&(xui.setNodeData(n,["eHandlers","on"+i._eventMap[e]],r),(t=i._eventHandler[e])&&(xui.setNodeData(n,["eHandlers",t],r),i._addEventListener(n,i._eventMap[e],r),xui.browser.isTouch&&"onmousedown"==t&&(xui.setNodeData(n,["eHandlers","onxuitouchdown"],r),i._addEventListener(n,"xuitouchdown",r))))}))},$removeEventHandler:function(e){var t,i=xui.Event,r=i.$eventhandler,n=i.$eventhandler3;return this.each((function(o){(t=i._eventHandler[e])&&(i._removeEventListener(o,t,r),i._removeEventListener(o,t,n),xui.browser.isTouch&&"onmousedown"==t&&i._removeEventListener(o,"xuitouchdown",r)),(o=xui.getNodeData(o,"eHandlers"))&&(delete o[t="on"+i._eventMap[e]],xui.browser.isTouch&&"onmousedown"==t&&delete o.onxuitouchdown)}))},$addEvent:function(e,t,i,r){var n,o,a,u,s,l=xui.Event,c=xui.arr.removeValue,d=xui.arr.insertAny;return r||0===r||(r=-1),i="string"==typeof i?"$"+i:undefined,this.$addEventHandler(e).each((function(f){3!=f.nodeType&&((n=l.getId(f))||f===window||f===document||(n=f.id=xui.Dom._pickDomId()),(o=xui.$cache.profileMap[n])||(o=new xui.DomProfile(n)),a=o.events||(o.events={}),s=a[e]||(a[e]=[]),i===undefined&&(s.length=0,s=a[e]=[],r=-1,i="_"),s[i]=t,c(s,i),-1==r?s[s.length]=i:d(s,i,r),xui.Event&&(o=xui.Event._getProfile(n))&&(a=o.$_egetter)&&(u=a[n+"+"+e])&&(u.length=0,delete a[n+"+"+e]))})),this},$removeEvent:function(e,t,i){var r,n,o,a,u=xui.Event,s=xui.$cache.profileMap,l=u._eventMap[e];return this.each((function(c){(a=u.getId(c))&&(r=s[a])&&(n=r.events)&&(i?xui.arr.each(u._getEventName(l),(function(e){delete n[e]})):"string"==typeof t?(t="$"+t,(o=n[e])&&(delete o[t],-1!=xui.arr.indexOf(o,t)&&xui.arr.removeValue(o,t))):delete n[e],xui.Event&&(r=xui.Event._getProfile(a))&&(n=r.$_egetter)&&(o=n[a+"+"+e])&&(o.length=0,delete n[a+"+"+e]))})),this},$getEvent:function(e,t){var i;if(i=xui.Event.getId(this.get(0))){if(t)return xui.get(xui.$cache.profileMap,[i,"events",e,"$"+t]);var r=[],n=xui.get(xui.$cache.profileMap,[i,"events",e]);return xui.arr.each(n,(function(e,t){r[r.length]={o:n[e]}})),r}},$clearEvent:function(){return this.each((function(e,t){var i,r=xui.Event,n=r.$eventhandler,o=r.$eventhandler3;(t=r.getId(e))&&(t=xui.$cache.profileMap[t])&&(t.events&&(xui.each(t.events,(function(t,a){(i=xui.Event._eventMap[a])&&(r._removeEventListener(e,i,n),r._removeEventListener(e,i,o))})),xui.breakO(t.events,2),delete t.events),xui.set(xui.$cache.domPurgeData,[e.$xid,"eHandlers"],{}))}))},$fireEvent:function(e,t){var i,r,n=xui.Event._eventMap[e],o="on"+n,a=arguments.callee,u=(xui.Event.$eventhandler,a.f1||(a.f1=function(){this.returnValue=!1})),s=a.f2||(a.f2=function(){this.cancelBubble=!0});return this.each((function(a){if(i=xui.getNodeData(a,["eHandlers",o]))if("blur"==n||"focus"==n)try{a[n]()}catch(e){}else r=xui.copy(t),xui.merge(r,{type:n,target:a,button:1,$xuievent:!0,$xuitype:e,preventDefault:u,stopPropagation:s},"all"),i.call(a,r)}))},nativeEvent:function(e){return this.each((function(t){if(3!==t.nodeType&&8!==t.nodeType)try{t[e]()}catch(e){}}))},$canFocus:function(){var e,t,i=arguments.callee,r=xui.Dom.getStyle,n=i.map||(i.map={a:1,input:1,select:1,textarea:1,button:1,object:1});return!!((t=this.get(0))&&t.offsetParent&&t.focus&&((e=n[t.nodeName.toLowerCase()])&&!(parseInt(t.tabIndex,10)<=-1)||!e&&parseInt(t.tabIndex,10)>=(xui.browser.ie?1:0))&&"hidden"!=r(t,"visibility"))},focus:function(e){var t=this;if(e||t.$canFocus())try{t.get(0).focus()}catch(e){}return t},blur:function(){var e=this.get(0);e&&(e.blur(),document.activeElement===e&&xui.asyRun((function(){xui("body").append(e=xui.create("<button style='position:absolute;width:1px;height:1px;left:-1000px;'></button>")),e.focus(),e.remove()})))},setSelectable:function(e){return this.removeClass("xui-ui-selectable").removeClass("xui-ui-unselectable"),this.addClass(e?"xui-ui-selectable":"xui-ui-unselectable"),this.each((function(t){xui.browser.ie&&xui.browser.ver<10&&xui.setNodeData(t,"_onxuisel",e?"true":"false")}))},contentBox:function(e){return xui.browser.ie||xui.browser.opr?!/BackCompat|QuirksMode/.test((e||document).compatMode):"content-box"==(this.css("box-sizing")||this.css("-moz-box-sizing"))},setInlineBlock:function(){var e=this;return xui.browser.gek?xui.browser.ver<3?e.css("display","-moz-inline-block").css("display","-moz-inline-box").css("display","inline-block"):e.css("display","inline-block"):xui.browser.ie&&xui.browser.ver<=6?e.css("display","inline-block").css({display:"inline",zoom:"1"}):e.css("display","inline-block"),e},topZindex:function(e){var t,i,r,n,o=1e3,a=0,u=this.get(0),s=u.offsetParent||u.parentNode;if(!xui.browser.ie||s&&"HTML"!=(s.nodeName+"").toUpperCase()||(s=xui("body").get(0)),1!=u.nodeType||!s)return 1;for(i=s.childNodes,t=0;r=i[t];t++)n=r.style,r==u||1!=r.nodeType||!r.$xid||n&&"none"==n.display||n&&"hidden"==n.visibility||r.zIndexIgnore||xui.getNodeData(r,"zIndexIgnore")||(o=o>(a=parseInt(n&&n.zIndex,10)||0)?o:a);return++o>=xui.Dom.TOP_ZINDEX&&(xui.Dom.TOP_ZINDEX=o+1),e?(u.style.zIndex=o,this):o>(a=parseInt(u.style.zIndex,10)||0)?o:a},nextFocus:function(e,t,i,r){e=!xui.isBool(e)||e;var n=this.get(0),o=this.$iterator("",e,t,(function(e){return e!==n&&(!r||e.id&&r.test(e.id))&&xui([e]).$canFocus()}));return o.isEmpty()||!1===i||o.focus(),n=null,o},fullScreen:function(e){var t=this.get(0),i=document;if(t){t===i&&(t=i.documentElement);var r=!1!==e?t.requestFullScreen||t.webkitRequestFullScreen||t.mozRequestFullScreen||t.msRequestFullScreen:i.exitFullscreen||i.mozCancelFullScreen||i.webkitExitFullscreen||i.webkitExitFullscreen;if(r)r.call(!1!==e?t:i);else if(void 0!==window.ActiveXObject){var n=new ActiveXObject("WScript.Shell");null!==n&&n.SendKeys("{F11}")}}},animate:function(e,t,i,r,n,o,a,u,s,l,c){var d=this,f={left:1,top:1,right:1,bottom:1,width:1,height:1},p=xui.$cache.profileMap[d.id()],x=p?p["xui.DomProfile"]?xui(p):p.boxing():null,h=xui.CSS,g=xui.Dom.$AnimateEffects,A=function(e,t,i,r){return f[i]&&t&&xui.isFun(t[r="get"+xui.str.initial(i)])?t[r](i):e[i]?e[i]():e.css(i)};if(e){xui.each(e,(function(t,i){xui.isFun(t)||(xui.isArr(t)&&1!==t.length||(t=[A(d,x,i),t]),e[i]=t)}));var m=e;e=xui.clone(e),r=(n||0)>0?16*n:r||200,l=l||1,-1!=(o||"").indexOf("-")&&(o=o.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()}))),o=o in g?o:"circIn";var y,v=d.get(0),b=function(t){var i,n,a,p,A,m,b=xui.stamp()-y;if(b>=r&&(b=r),xui.each(e,(function(e,t){i=g[o](r,b),"function"==typeof e?e.call(d,i):(A=e[0],m=e[1],n=e[2],xui.str.endWith(t.toLowerCase(),"color")?i=function(e,t,i){return"string"!=typeof e||"string"!=typeof t?"#fff":i<0?e:i>1?t:(e=(r=function(e){return"#"!=e.charAt(0)?"#"+e:e})(e),t=r(t),n=function(e,t,i){return parseInt(e.slice(t,i),16)||0},"#"+(a=function(e,t,i,r){var n=e[r]+Math.round(parseFloat(i*(t[r]-e[r]))||0);return(n<16?"0":"")+n.toString(16)})(e=(o=function(e){return{red:n(e,1,3),green:n(e,3,5),blue:n(e,5,7)}})(e),t=o(t),i,"red")+a(e,t,i,"green")+a(e,t,i,"blue"));var r,n,o,a}(A,m,i):(xui.isFinite(m)||(n=m.replace(/[-\d.]*/,""),a=n||"px",xui.isFinite(A)||(p=A.replace(/[-\d.]*/,"")||"px")!=a&&("em"==p&&"px"==a?A=h.$em2px(A,v):"px"==p&&"em"==a&&(A=h.$px2em(A,v)))),A=parseFloat(A)||0,m=parseFloat(m)||0,i=xui.toFixedNumber(A+(m-A)*i,6)),function(e,t,i,r,n){f[i]&&t&&xui.isFun(t[n="set"+xui.str.initial(i)])?t[n](r):e[i]?e[i](r):e.css(i,r)}(d,x,t,i+=n||u||""))})),b==r)return s&&!c?(y=xui.stamp(),c=1,xui.each(e,(function(e,t){xui.isFun(e)||(t=e[0],e[0]=e[1],e[1]=t)}))):(-1==l||l>0)&&(y=xui.stamp(),l>0&&(l-=1),c&&(c=0,xui.each(e,(function(e,t){xui.isFun(e)||(t=e[0],e[0]=e[1],e[1]=t)})))),l||xui.Thread.abort(t,"normal"),!1},_=[b],w=xui.getNodeData(v,"_inthread");w&&xui.Thread.isAlive(w)&&(xui.Thread.abort(w,"force"),xui.setNodeData(v,"_inthread",null));var C=xui.getNodeData(v,"_animationreset");return"function"==typeof C&&(C(),xui.setNodeData(v,"_animationreset",null)),xui.Thread(!a||xui.Thread.get(a)?xui.id():a,_,0,null,(function(i){return xui.setNodeData(v,"_inthread",i),y=xui.stamp(),xui.setNodeData(v,"_animationreset",(function(){xui.merge(e,m,"all"),y=xui.stamp(),b()})),xui.tryF(t,arguments,this)}),(function(e,t){v&&v.$xid&&(xui.setNodeData(v,"_inthread",null),xui.setNodeData(v,"_animationreset",null)),"force"!=t&&xui.tryF(i,arguments,this)}),!0)}i&&xui.tryF(i)},pop:function(e,t,i,r,n){var o=this,a=xui.stamp()+":"+o.xid();return o.popToTop(e,t||"outer",i).setBlurTrigger(a,(function(){"function"==typeof r?xui.tryF(r):o.hide()}),n),a},popUp:function(e,t,i,r,n){return this.pop.apply(this,arguments)},popToTop:function(e,t,i,r,n,o){var a=this;return(i=xui(i)).isEmpty()&&(i=xui("body")),a.css({position:"absolute",display:"block",zIndex:xui.Dom.TOP_ZINDEX++,visibility:"hidden"}),i.append(a),e&&a.cssPos(xui.Dom.getPopPos(e,t,a,i)),a.css({visibility:"visible"}),a.removeClass("xui-ui-hidden"),(n=o?null:n||xui.get(xui.UIProfile.getFromDom(a),["properties","showEffects"]))&&(n=xui.Dom._getEffects(n,1)),n?xui.Dom._vAnimate(a,n,r):r&&r(),this},hoverPop:function(e,t,i,r,n,o,a,u){e=xui(e),a&&(a=xui.Dom._getEffects(a,1)),u&&(u=xui.Dom._getEffects(u,0)),xui.isDefined(t)||(t="outer");var s=o||this.xid()+":"+e.xid(),l=this;return this.onMouseover(null===t?null:function(r,o,u){o.$force||(xui.resetRun(s,null),xui.getData([s,"$ui.hover.pop"])&&xui.getNodeData(e.get(0)||"empty","$ui.hover.parent")==u||(xui.setData([s,"$ui.hover.pop"],1),xui.setNodeData(e.get(0)||"empty","$ui.hover.parent",u),i&&!1===i(r,e,o,u)||xui(u).isDisplayed()&&(e.popToTop("cursor"==t?o:u,t,n,a),e.onMouseover((function(){l.onMouseover(!0)}),"hoverPop").onMouseout((function(){l.onMouseout(!0)}),"hoverPop"))))},s).onMouseout(null===t?null:function(t,i,n){i.$force||xui.resetRun(s,(function(){xui.setData([s,"$ui.hover.pop"]),xui.setNodeData(e.get(0)||"empty","$ui.hover.parent",0),r&&!1===r(t,e,i,n,"host")||(e.hide(null,u),e.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop"))}))},s),e&&e.onMouseover(null===t?null:function(e){e.$force||xui.resetRun(s,null)},s).onMouseout(null===t?null:function(t,i,n){i.$force||xui.resetRun(s,(function(){xui.setData([s,"$ui.hover.pop"]),xui.setNodeData(e.get(0)||"empty","$ui.hover.parent",0),r&&!1===r(t,e,i,n,"pop")||(e.hide(null,u),e.onMouseover(null,"hoverPop").onMouseout(null,"hoverPop"))}))},s),e.css("display","none"),this},setBlurTrigger:function(e,t,i,r){var n,o=document,a=xui.Dom._blurTrigger||(xui.Dom._blurTrigger=function(e,t){var i,r,n,o,a,u=xui.Event.getPos(t),s=arguments.callee.arr,l=xui.Event.getSrc(t),c=xui.copy(s);xui.arr.each(c,(function(e){i=!0,(a=s[e].target)?a.each((function(e){if(e!==window&&e!==document&&!xui.Dom.byId(e.id))return i=!1})):i=!1,i||(delete s[e],xui.arr.removeValue(s,e))})),c=xui.copy(s),xui.arr.each(c,(function(e){if(a=s[e]){if(i=!0,a.target.contains(l)?i=!1:a.target.each((function(e){if(e.parentNode&&(n=e.offsetParent?e.offsetWidth:0)&&(o=e.offsetParent?e.offsetHeight:0)&&(r=xui([e]).offset(),u.left>=r.left&&u.top>=r.top&&u.left<=r.left+n&&u.top<=r.top+o))return i=!1})),!i&&!xui.isFun(a.trigger))return!1;if(i)delete s[e],xui.arr.removeValue(s,e),xui.tryF(a.trigger,[u,t],a.target),a=null;else if(a.stopNext)return!1}}),null,!0),l=null,c.length=0}),u=a.arr||(a.arr=[]);return u[e]&&(!0===t&&(xui.tryF(u[e].trigger),t=!1),delete u[e],xui.arr.removeValue(u,e)),t&&(i?(i["xui.Dom"]?n=i:xui.isArr(i)&&((n=xui())._nodes=i),n.merge(this)):n=this,n.each((function(e){e.id||e===window||e===document||(e.id=xui.Dom._pickDomId())})),u[e]={trigger:t,target:n,stopNext:!r},u.push(e),o.onmousedown||(o.onmousedown=xui.Event.$eventhandler),o=a=null),this},$firfox2:function(){if(!xui.browser.gek2)return this;var e=this;return e.css("overflow","hidden"),xui.asyRun((function(){e.css("overflow","auto")})),e},ieRemedy:function(){if(xui.browser.ie&&xui.browser.ver<=6){for(var e,t=this.get(),i=[],r=[],n=t.length,o=0;o<n;o++)e=t[o].style,xui.isSet(t[o].$ieRemedy)||xui.isSet(e.width)&&(t[o].$ieRemedy=e.width,e.width=(xui.CSS.$px(t[o].$ieRemedy,t[o])||0)+1+"px");xui.asyRun((function(){for(var e=0;e<n;e++)xui.isSet(t[e].$ieRemedy)&&(t[e].style.width=t[e].$ieRemedy,t[e].removeAttribute("$ieRemedy"));t.length=i.length=r.length=0}))}return this}},Static:{HIDE_VALUE:"-10000px",TOP_ZINDEX:1e4,_boxArr:xui.toArr("width,height,left,top,right,bottom"),_cursor:{},_pickDomId:function(){var e;do{e="xui_"+xui.id()}while(document.getElementById(e));return e},_map:{html:1,head:1,body:1},fixPng:function(e){if(xui.browser.ie&&xui.browser.ver<=6){if("IMG"==e.nodeName&&-1!=e.src.toLowerCase().search(/\.png$/)){var t=e.style;t.height=e.height,t.width=e.width,t.backgroundImage="none";var i=((t.filter?t.filter+",":"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+e.src+"', sizingMethod='image')").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,", ");xui.browser.ie8&&(t.msfilter=i),t.filter=i,e.src=xui.ini.img_bg}var r=(e.currentStyle.backgroundImage||t.backgroundImage||"").toLowerCase().match(/^url[("']+(.*\.png[^\)"']*)[\)"']+[^\)]*$/i);r&&(t.backgroundImage="none",i=((t.filter?t.filter+",":"")+"progid:DXImageTransform.Microsoft.AlphaImageLoader(enabled=true, src="+r[1]+"', sizingMethod='crop')").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/[,\s]+/g,", "),xui.browser.ie8&&(t.msfilter=i),t.filter=i)}},_getTag:function(e){return e?e.$xid?e.$xid:1==e.nodeType?xui.$registerNode(e).$xid:0:0},_ensureValues:function(e){var t,i,r=this._map,n=[],o=e===window?["!window"]:e===document?["!document"]:xui.isArr(e)?e:"[object NodeList]"==e||"[object HTMLCollection]"==e?xui.toArr(e):e["xui.Dom"]?e._nodes:e._toDomElems?e._toDomElems():"function"==typeof e?e():[e];for(i=0;i<o.length;i++)(t=(t=o[i])?t===window?"!window":t===document?"!document":"string"==typeof t||t["xui.DomProfile"]&&(t=t.domId)?"!"==t.charAt(0)?t:this._getTag(r[t]?document.getElementsByTagName(t)[0]:document.getElementById(t)):(t=o[i])["xui.UIProfile"]||t["xui.Template"]?(t.renderId||t.boxing().render())&&t.renderId:this._getTag(t):0)&&(n[n.length]=t);return n.length<=1?n:this._unique(n)},_getClass:function(e){return"string"==typeof e.className&&e.className||"string"==typeof e.className.baseVal&&e.className.baseVal||void 0!==e.getAttribute&&e.getAttribute("class")||""},_setClass:function(e,t){xui.Dom.beforeNodeChange(),"string"==typeof e.className?e.className=t:"string"==typeof e.className.baseVal?e.className.baseVal=t:void 0!==e.getAttribute&&e.setAttribute(t),xui.Dom.afterNodeChange()},cancelBlurTrigger:function(e,t){var i=xui.Dom._blurTrigger&&xui.Dom._blurTrigger.arr;if(i)if(e)i[e]&&(t||i[e].trigger&&xui.tryF(i[e].trigger,[],i[e].target),xui.arr.removeValue(i,e),delete i[e]);else{for(var r in t||xui.arr.each(i,(function(e){i[e].trigger&&xui.tryF(i[e].trigger,[],i[e].target)})),i)delete i[r];i.length=0}},getPopPos:function(e,t,i,r){var n={left:0,top:0};if(e){if(xui.isEvent(e))return xui.Event.getPos(e);var o,a,u,s,l;if((r=xui(r)).isEmpty()&&(r=xui("body")),e["xui.UI"]||e["xui.UIProfile"]||e["xui.Dom"]||1==e.nodeType||"string"==typeof e?("function"!=typeof t&&(t=(t||12)+""),u=(a=xui(e)).offset(null,r),o={left:u.left,top:u.top,width:a.offsetWidth(),height:a.offsetHeight()}):("function"!=typeof t&&(t=t?"3":"0"),s="0"==t?0:8,o=e.region||{left:e.left-s,top:e.top-s,width:2*s,height:2*s}),s=r.get(0)===document.body||r.get(0)===document||r.get(0)===window?xui.win:r,(l={}).left=s.scrollLeft(),l.top=s.scrollTop(),l.width=s.width()+l.left,l.height=s.height()+l.top,s==xui.win&&xui.ini.$zoomScale)for(var c in l)l[c]/=xui.ini.$zoomScale;if("function"==typeof t)n=t(o,l,i,s);else{var d=t.split(":"),f=i?i.offsetWidth():0,p=i?i.offsetHeight():0,x=d[0].split(/-/g),h=parseInt(d[1])||0;if(t=d[0],2==x.length){var g=x[0];switch(x[1]){case"outertop":n.top=o.top-p;break;case"top":n.top=o.top;break;case"middle":n.top=o.top+o.height/2-p/2;break;case"bottom":n.top=o.top+o.height-p;break;default:n.top=o.top+o.height}switch(g){case"outerleft":n.left=o.left-f;break;case"left":n.left=o.left;break;case"center":n.left=o.left+o.width/2-f/2;break;case"right":n.left=o.left+o.width-f;break;default:n.left=o.left+o.width}}else{var A=function(e){var t,i;switch(e){case"2":t=!0,i=!1;break;case"3":t=i=!1;break;case"4":t=i=!0;break;default:t=!1,i=!0}t?o.top+p<l.height?n.top=o.top:n.top=o.top+o.height-p:o.top+o.height+p<l.height?n.top=o.top+o.height:n.top=o.top-p,i?o.left+f<l.width?n.left=o.left:n.left=o.left+o.width-f:o.left+o.width+f<l.width?n.left=o.left+o.width:n.left=o.left-f,n.left+f>l.width&&(n.left=l.width-f),n.left<l.left&&(n.left=l.left),n.top+p>l.height&&(n.top=l.height-p),n.top<l.top&&(n.top=l.top)};"12"==(t="inner"==t?"4":"outer_tb"==t?"1":"outer_lr"==t?"2":"outer"==t?"12":t)?(A("1"),n.top<o.top+o.height&&n.top+p>o.top&&A("2")):"21"==t?(A("2"),n.left<o.left+o.width&&n.left+f>o.left&&A("1")):A(t)}h&&(n.left+=h,n.top+=h,n.width-=2*h,n.height-=2*h)}return n}return n},_scrollBarSize:0,getScrollBarSize:function(e){var t,i=this;return!e&&i._scrollBarSize||(xui("body").append(t=xui.create('<div style="width:50px;height:50px;content-visibility:hidden;visibility:hidden;position:absolute;margin:0;padding:0;left:-100%;top:-100%;overflow:scroll;"></div>')),i._scrollBarSize=t.get(0).offsetWidth-t.get(0).clientWidth,t.remove()),i._scrollBarSize},_dpi:0,getDPI:function(e){var t,i=this;return!e&&i._dpi||(xui("body").append(t=xui.create('<div style="width:1in;height:1in;content-visibility:hidden;visibility:hidden;position:absolute;margin:0;padding:0;left:-100%;top:-100%;overflow:scroll;"></div>')),i._dpi=t.get(0).offsetParent?t.get(0).offsetHeight:0,t.remove()),i._dpi},getStyle:function(e,t,i){if(!e||1!=e.nodeType)return"";if("rotate"==t)return xui(e).rotate();var r,n,o=xui.Dom,a=xui.Dom._css3prop,u=e.style;if("opacity"==t&&!o.css3Support("opacity")&&xui.browser.ie&&(n=t="filter"),r=u[t],i||!r||"initial"===r){var s,l,c,d=xui.Dom.getStyle,f=xui.browser,p=d.map||(d.map={float:1,cssFloat:1,styleFloat:1}),x=d._c1||(d._c1={}),h=d._c2||(d._c2={}),g=(d._c3||(d._c3={}),x[t]||(x[t]=t.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()})))),A=h[g]||(h[g]=g.replace(/([A-Z])/g,"-$1").toLowerCase()),m=g;if(0===m.indexOf("border")&&(m=m.replace(/[-]?(left|top|right|bottom)/gi,"")),-1!=xui.arr.indexOf(a,m)){if(!o.css3Support(g))return"";"textShadow"!=g&&(l=f.cssTag2+A.charAt(0).toUpperCase()+A.substr(1),c=f.cssTag1+A)}p[g]&&(g=xui.browser.ie?"styleFloat":"cssFloat"),r=(s=document.defaultView)&&s.getComputedStyle?(s=s.getComputedStyle(e,null))?s.getPropertyValue(A)||c&&s.getPropertyValue(c):"":e.currentStyle?e.currentStyle[g]||e.currentStyle[A]||l&&(e.currentStyle[l]||e.currentStyle[c]):u&&(u[g]||l&&u[l])||""}return!n&&xui.browser.ie678&&(("fontSize"==t||"font-size"==A)&&/%/.test(r)&&e.parentNode?r=(e.parentNode.currentStyle[t]||e.parentNode.currentStyle[A])*(parseFloat(r)||0):xui.CSS.$isEm(r)&&(r=xui.CSS.$px(r,e))),n?r?(parseFloat(r.match(/alpha\(opacity=(.*)\)/)[1])||0)/100:1:r||""},$getBoundingClientRect:function(e,t){var i,r=e.getBoundingClientRect();if(!t&&(i=xui.ini.$transformScale))for(var n in r)r[n]/=i;return r},$transformIE:function(e,t){var i=e.style,r=(i.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Matrix\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" "));if(xui.browser.ie8&&(i.msfilter=r),i.filter=r,i.marginTop=i.marginLeft="",t){var n=function(){var e,t=Math.PI/180,i=function(e,t,i,r,n,o){var a={};return a.m11=xui.isSet(e)?parseFloat(e):1,a.m12=xui.isSet(t)?parseFloat(t):0,a.m21=xui.isSet(i)?parseFloat(i):0,a.m22=xui.isSet(r)?parseFloat(r):1,a.dx=xui.isSet(n)?parseFloat(n):0,a.dy=xui.isSet(o)?parseFloat(o):0,a},r=function(e,t){var i={};return i.m11=o(e.m11*t.m11+e.m21*t.m12,10),i.m12=o(e.m12*t.m11+e.m22*t.m12,10),i.m21=o(e.m11*t.m21+e.m21*t.m22,10),i.m22=o(e.m12*t.m21+e.m22*t.m22,10),i.dx=o(t.dx+e.dx,10),i.dy=o(t.dy+e.dy,10),i},n=function(e){return t*e},o=function(e,t){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)};this.rotate=function(t){var o=xui.isSet(t)?parseFloat(n(parseFloat(t))):0,a=i(Math.cos(o),-Math.sin(o),Math.sin(o),Math.cos(o),0,0);e=r(a,e)},this.translate=function(t,n){var o=i(1,0,0,1,parseFloat(t),parseFloat(n));e=r(o,e)},this.translateX=function(e){this.translate(e,0)},this.translateY=function(e){this.translate(0,e)},this.scale=function(t,n){var o=i(xui.isSet(t)?parseFloat(t):1,0,0,xui.isSet(n)?parseFloat(n):1,0,0);e=r(o,e)},this.scaleX=function(e){this.scale(e,1)},this.scaleY=function(e){this.scale(1,e)},this.skew=function(t,o){t=xui.isSet(t)?parseFloat(n(parseFloat(t))):0,o=xui.isSet(o)?parseFloat(n(parseFloat(o))):0;var a=i(1,Math.tan(t),Math.tan(o),1,0,0);e=r(a,e)},this.skewX=function(e){this.skew(e,0)},this.skewY=function(e){this.skew(0,e)},this.matrix=function(t,n,o,a,u,s){e=r(i(t,n,o,a,u,s),e)},this.getMatrix=function(){return e},this.getFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+e.m11+", M12="+e.m12+", M21="+e.m21+", M22="+e.m22+", Dx="+e.dx+", Dy="+e.dy+", SizingMethod='auto expand')"},this.getX=function(){return e.dx},this.getY=function(){return e.dy},this.reset=function(){e=i(1,0,0,1,0,0)},this.reset()},o=function(e){for(var t=new n,i=e.match(/[A-z]+\([^\)]+/g)||[],r=0;r<i.length;r++){var o,a=i[r].split("("),u=a[0],s=a[1];switch(u){case"rotate":t.rotate(s);break;case"scale":o=s.split(","),t.scale(o[0],o[1]);break;case"scaleX":t.scaleX(s);break;case"scaleY":t.scaleY(s);break;case"skew":o=s.split(","),t.skew(o[0],o[1]);break;case"skewX":t.skewX(s);break;case"skewY":t.skewY(s);break;case"translate":o=s.split(","),t.translate(o[0],o[1]);break;case"translateX":t.translateX(s);break;case"translateY":t.translateY(s)}}return t}(t),a=e.offsetParent?e.offsetWidth:0,u=e.offsetParent?e.offsetHeight:0,s=o.getFilter();if(r=((i.filter?i.filter+",":"")+s).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(i.msfilter=r),i.filter=r,e.getBoundingClientRect){var l=o.getX(),c=o.getY(),d=xui.Dom.$getBoundingClientRect(e),f=d.right-d.left,p=d.bottom-d.top;i.marginLeft=Math.round(parseFloat((a-f)/2+10+l))+"px",i.marginTop=Math.round(parseFloat((u-p)/2+10+c))+"px"}i.transform=t}},$textShadowIE:function(e,t,i){var r=e.style;if(t){a=function(e,t,r,n){return(i?"":"progid:DXImageTransform.Microsoft.Chroma(Color=#cccccc) ")+"progid:DXImageTransform.Microsoft.DropShadow(Color="+n+", OffX="+e+", OffY="+t+") "+(parseFloat(r)>0?"progid:DXImageTransform.Microsoft.Glow(Strength="+r+", Color="+n+")":"")};var n=t.match(/([\d\.-]+)px\s+([\d\.-]+)px(\s+([\d\.-]+)px)?(\s+([#\w]+))?/);if(n){var o=((r.filter?r.filter+",":"")+a(n[1],n[2],n[4],n[6]||"#000000")).replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" "));xui.browser.ie8&&(r.msfilter=o),r.filter=o,i||(r.backgroundColor="#C5C5C5")}}else{var a=function(e){return(e||"").replace(/progid\:DXImageTransform\.Microsoft\.(Chroma|DropShadow|Glow)\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" "))},u=r.filter;u&&(xui.browser.ie8&&(r.msfilter=a(u)),r.filter=a(u)),i||(r.backgroundColor="")}},$setGradients:function(e,t,i){i=i||xui.browser;var r=this,n=i.ver,o="0123456789ABCDEF",a=function(e,t){return e=parseInt(e*t,10)||0,o.charAt(((e=e>255||e<0?0:e)-e%16)/16)+o.charAt(e%16)},u=function(e){return e=e.split(""),16*o.indexOf(e[0].toUpperCase())+o.indexOf(e[1].toUpperCase())};window.btoa=window.btoa||function(e){if(!/([^\u0000-\u00ff])/.test(e)){for(var t,i,r,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=[];o<e.length;){switch(t=e.charCodeAt(o),r=(o+1)%3){case 1:a.push(n.charAt(t>>2));break;case 2:a.push(n.charAt((3&i)<<4|t>>4));break;case 0:a.push(n.charAt((15&i)<<2|t>>6)),a.push(n.charAt(63&t))}i=t,o++}return 1==r?(a.push(n.charAt((3&i)<<4)),a.push("==")):2==r&&(a.push(n.charAt((15&i)<<2)),a.push("=")),a.join("")}};var s=function(e,t,i,r,n,o){if(t){o=o||1;var a="svg:"+xui.id(),u="0%",s="0%",l=100*o+"%";if(xui.isObj(t))u=t.left||u,s=t.left||s;else switch(t){case"T":u="50%",s="0%";break;case"B":u="50%",s="100%";break;case"L":u="0%",s="50%";break;case"R":u="100%",s="50%";break;case"LT":u="0%",s="0%";break;case"RT":u="100%",s="0%";break;case"RB":u="100%",s="100%";break;case"LB":u="0%",s="100%";break;case"C":u="50%",s="50%"}for(var c='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><radialGradient id="'+a+'" gradientUnits="userSpaceOnUse" cx="'+u+'" cy="'+s+'" r="'+l+'">',d=0,f=i.length;d<f;d++)c+='<stop stop-color="'+i[d].clr+'" offset="'+i[d].pos+'" '+(xui.isSet(i[d].opacity)?' stop-opacity="'+i[d].opacity+'"':"")+" />";c+='</radialGradient><rect x="-50" y="-50" width="101" height="101" fill="url(#'+a+')" /></svg>',e.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(c)+'")'}else e.style.backgroundImage=""},l=t?(t.type||t||"linear").toLowerCase():null,c=t?t.rate||1:null,d=t?(t.shape||"circle").toLowerCase():null,f=t?(t.size||"farthest-corner").toLowerCase():null,p=t?t.orient:null,x=t?t.stops:null;if("linear"!=l&&(l="radial"),x){if(!(x.length>1))return;xui.arr.stableSort(x,(function(e,t){return(e=parseFloat(e.pos)||0)>(t=parseFloat(t.pos)||0)?1:e==t?0:-1}))}i.ie678&&("linear"==l?function(e,t,i){var n;if(e&&1==e.nodeType&&e.style){var o=e.style;if(t){var u=i[0].clr,s=i[i.length-1].clr,l=1;switch(i[0].opacity&&(u=u.replace("#","#"+a(i[0].opacity,255))),i[i.length-1].opacity&&(s=s.replace("#","#"+a(i[i.length-1].opacity,255))),t){case"LT":case"RT":case"LB":case"RB":return void function(e,t,i){var n,o="xui.s-ie8gdfix";if(e&&1==e.nodeType&&e.style){var a=e.style,u=r.getStyle(e,"overflow"),s=r.getStyle(e,"display");if("hidden"!=u&&r.setStyle(e,"overflow","hidden"),"block"!=s&&"relative"!=s&&r.setStyle(e,"display","relative"),t){var l=i[0].clr,c=i[i.length-1].clr,d=e.offsetWidth||0,f=e.offsetHeight||0,p=Math.min(d,f),x=0,h=p,g=0,A=p;switch(t){case"LT":x=0,g=0,h=p,A=p;break;case"RT":x=p,g=0,h=0,A=p;break;case"LB":x=0,g=p,h=p,A=0;break;case"RB":x=p,g=p,h=0,A=0}var m=document.createElement("div"),y=m.style;m.id=o,y.position="absolute",y.zIndex="0",y.top=0,y.left=0,y.width=d,y.height=f,y.backgroundColor=l;var v=i[0].opacity?100*parseFloat(i[0].opacity):100;n=((y.filter?y.filter+",":"")+"progid:DXImageTransform.Microsoft.Alpha(style=1, opacity="+v+", finishopacity=0, startX="+x+",finishX="+h+",startY="+g+",finishY="+A+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(y.msfilter=n),y.filter=n,e.firstChild?e.insertBefore(m,e.firstChild):e.appendChild(m),a.backgroundColor=c,i[i.length-1].opacity&&(n=((a.filter?a.filter+",":"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+100*parseFloat(i[i.length-1].opacity)+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(a.msfilter=n),a.filter=n)}else{var b,_=e.childNodes,w=_.length;for(b=0;b<w;b++)if(1==_[b].nodeType&&_[b].id==o){e.removeChild(_[b]);break}a.backgroundColor="",n=(a.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(a.msfilter=n),a.filter=n}}}(e,t,i);case"L":l=1;break;case"R":l=1,n=u,u=s,s=n;break;case"T":l=0;break;case"B":l=0,n=u,u=s,s=n}n=((o.filter?o.filter+",":"")+"progid:DXImageTransform.Microsoft.Gradient(StartColorstr='"+u+"',EndColorstr='"+s+"',GradientType="+l+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(o.msfilter=n),o.filter=n}else{n=(o.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Gradient\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(o.msfilter=n),o.filter=n;var c,d=e.childNodes,f=d.length;for(c=0;c<f;c++)if(1==d[c].nodeType&&"xui.s-ie8gdfix"==d[c].id){e.removeChild(d[c]);break}o.backgroundColor="",n=(o.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(o.msfilter=n),o.filter=n}}}(e,p,x):function(e,t,i,n,o,a){var u,s="xui.s-ie8gdfix";if(e&&1==e.nodeType&&e.style){var l=e.style,c=r.getStyle(e,"overflow"),d=r.getStyle(e,"display");if("hidden"==c&&("block"==d||"relative"==d))if(t){a=a||1;var f=i[0].clr,p=i[i.length-1].clr,x=e.offsetParent?e.offsetWidth:0,h=e.offsetParent?e.offsetHeight:0,g=x*a*2,A=h*a*2;"circle"==n&&(g=A=Math.min(g,A)),E=-g/2;var m=g,y=A;if(u=-A/2,xui.isObj(t))E=t.left||Math.round(parseFloat(E)||0)+"px",u=t.top||Math.round(parseFloat(u)||0)+"px";else{switch(t){case"LT":E=-g/2,u=-A/2;break;case"T":E=(x-g)/2,u=-A/2;break;case"RT":E=x-g/2,u=-A/2;break;case"L":E=-g/2,u=(h-A)/2;break;case"C":E=(x-g)/2,u=(h-A)/2;break;case"R":E=x-g/2,u=(h-A)/2;break;case"LB":E=-g/2,u=h-A/2;break;case"B":E=(x-g)/2,u=h-A/2;break;case"RB":E=x-g/2,u=h-A/2}E+="px",u+="px"}var v=document.createElement("div"),b=v.style;v.id=s,b.position="absolute",b.zIndex="0",b.top=u,b.left=E,b.width=Math.round(parseFloat(m)||0)+"px",b.height=Math.round(parseFloat(y)||0)+"px",b.backgroundColor=f;var _=i[0].opacity?100*parseFloat(i[0].opacity):100;u=((b.filter?b.filter+",":"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+_+", finishopacity=0, style=2)").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(b.msfilter=u),b.filter=u,e.firstChild?e.insertBefore(v,e.firstChild):e.appendChild(v),l.backgroundColor=p,i[i.length-1].opacity&&(u=((l.filter?l.filter+",":"")+"progid:DXImageTransform.Microsoft.Alpha(opacity="+100*parseFloat(i[i.length-1].opacity)+")").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(l.msfilter=u),l.filter=u)}else{var w,C=e.childNodes,E=C.length;for(w=0;w<E;w++)if(1==C[w].nodeType&&C[w].id==s){e.removeChild(C[w]);break}l.backgroundColor="",u=(l.filter||"").replace(/progid\:DXImageTransform\.Microsoft\.Alpha\([^)]+\)/gi,"").replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" ")),xui.browser.ie8&&(l.msfilter=u),l.filter=u}}}(e,p,x,d,0,c)),(i.ie9||i.opr&&n<11.1)&&("linear"==l?function(e,t,i){if(t){var r="svg"+xui.id(),n="0%",o="0%",a="0%",u="100%";switch(t){case"T":n="50%",o="0%",a="50%",u="100%";break;case"B":n="50%",o="100%",a="50%",u="0%";break;case"L":n="0%",o="50%",a="100%",u="50%";break;case"R":n="100%",o="50%",a="0%",u="50%";break;case"LT":n="0%",o="0%",a="100%",u="100%";break;case"RT":n="100%",o="0%",a="0%",u="100%";break;case"RB":a="0%",u="0%",n="100%",o="100%";break;case"LB":n="0%",o="100%",a="100%",u="0%"}for(var s='<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><linearGradient id="'+r+'" gradientUnits="userSpaceOnUse" x1="'+n+'" y1="'+o+'" x2="'+a+'" y2="'+u+'">',l=0,c=i.length;l<c;l++)s+='<stop stop-color="'+i[l].clr+'" offset="'+i[l].pos+'" '+(xui.isSet(i[l].opacity)?' stop-opacity="'+i[l].opacity+'"':"")+"/>";s+='</linearGradient><rect x="0" y="0" width="1" height="1" fill="url(#'+r+')" /></svg>',e.style.backgroundImage='url("data:image/svg+xml;base64,'+window.btoa(s)+'")'}else e.style.backgroundImage=""}(e,p,x):s(e,p,x,0,0,c)),(i.gek&&n>=3.6||i.isChrome&&n>=10||i.isSafari&&n>=5.1||i.ie&&n>=10||i.opr&&n>=11.1)&&("linear"==l?function(e,t,r){var n=[],o=[],a=e.style;if(xui.arr.each(r,(function(e){var t=e.clr;xui.isSet(e.opacity)&&"#"==t.charAt(0)&&(t=t.slice(1),t="rgba("+u(t.substr(0,2))+","+u(t.substr(2,2))+","+u(t.substr(4,2))+","+(parseFloat(e.opacity)||1)+")"),n.push(t+" "+e.pos),i.isWebKit&&o.push("color-stop("+e.pos+","+t+")")})),t){var s="to bottom",l="top",c="left top, left bottom";switch(t){case"LT":s="135deg",l="-45deg",c="left top, right bottom";break;case"T":s="to bottom",l="top",c="left top, left bottom";break;case"RT":s=l="-135deg",c="right top, left bottom";break;case"L":s="to right",l="left",c="left top, right top";break;case"R":s="to left",l="right",c="right top, left top";break;case"LB":s=l="45deg",c="left bottom, right top";break;case"B":s="to top",l="bottom",c="left bottom, left top";break;case"RB":s="-45deg",l="135deg",c="right bottom, left top";break;default:s=t,l=t,c="left top, right bottom"}i.isWebKit&&(a.backgroundImage="-webkit-gradient(linear,"+c+", "+o.join(",")+")");var d="linear-gradient({#},"+n.join(",")+")";i.cssTag1&&(a.backgroundImage=i.cssTag1+d.replace("{#}",l)),a.backgroundImage=d.replace("{#}",s)}else a.backgroundImage=""}(e,p,x):i.opr&&n<12?s(e,p,x,0,0,c):function(e,t,r,n,o){var a=[],s=[],l=e.style;if(xui.arr.each(r,(function(e){var t=e.clr;xui.isSet(e.opacity)&&"#"==t.charAt(0)&&(t=t.slice(1),t="rgba("+u(t.substr(0,2))+","+u(t.substr(2,2))+","+u(t.substr(4,2))+","+(parseFloat(e.opacity)||1)+")"),a.push(t+" "+e.pos),i.isWebKit&&s.push("color-stop("+e.pos+","+t+")")})),t){var c;if(xui.isObj(t))c=t.left+" "+t.top;else switch(t){case"LT":default:c="left top";break;case"T":c="center top";break;case"RT":c="right top";break;case"L":c="left center";break;case"C":c="center center";break;case"R":c="right center";break;case"LB":c="left bottom";break;case"B":c="center bottom";break;case"RB":c="right bottom"}i.isWebKit&&(l.backgroundImage="-webkit-gradient(radial,"+c+", 0px, "+c+", 100%,"+s.join(",")+")");var d="radial-gradient("+c+","+n+" "+o+","+a.join(",")+")";i.cssTag1&&(l.backgroundImage=i.cssTag1+d),l.backgroundImage="radial-gradient("+o+" "+n+" at "+c+","+a.join(",")+")"}else l.backgroundImage=""}(e,p,x,d,f))},$setZoom:function(e,t,i,r,n){t=parseFloat(t),(xui.isNaN(t)||t<=0)&&(t="");var o=xui.browser,a={};a[o.cssTag1+"transform"]=a.transform=""===t?"":(xui.isNumb(i)&&xui.isNumb(r)?"translate("+i+"px,"+r+"px) ":"")+"scale("+t+","+t+")",a[o.cssTag1+"transform-origin"]=a["transform-origin"]=""===t?"":n||"0 0 0",xui(e).css(a)},_vAnimate:function(e,t,i){if(t&&t.endpoints&&!xui.isEmpty(t.endpoints)){var r=t.endpoints,n={},o={};return e=xui(e),xui.each(r,(function(e,t){xui.isFun(e)||(n[t]=e[0],o[t]=e[1])})),e.animate(r,(function(t){e.css(n)}),(function(t){e.css(o),i&&xui.tryF(i)}),t.duration,0,t.type).start()}i&&xui.tryF(i)},$adjustCss:function(e,t){var i={nodeType:1,style:{}},r=i.style;if(xui.Dom.setStyle(i,e),t){var n=[];return xui.browser.ie&&8==xui.browser.ver&&(r.filter&&(r["-ms-filter"]=r.filter),"none"==r["background-image"]&&(r["background-image"]="url(about:blank)")),xui.each(r,(function(e,t){n.push(t.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+e)})),n.join(";").replace(/[;]+/g,";")}return r},_cssfake:{rotate:1,scaleX:1,scaleY:1,translateX:1,translateY:1,skewX:1,skewY:1},setStyle:function(e,t,i){if("rotate"==t)return xui(e).rotate(i),this;var r=xui.Dom,n=xui.Dom._css3prop,o=xui.browser,a=r._cssfake,u=e.style;if(1==e.nodeType)if("string"==typeof t)if(a[t])xui(e)[t](i);else{var s,l=this.getStyle,c=l._c1||(l._c1={}),d=l._r1||(l._r1=/alpha\([^\)]*\)/gi),f=l.map||(l.map={float:1,cssFloat:1,styleFloat:1}),p=t=c[t]||(c[t]=t.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()})));if(0===p.indexOf("border")&&(p=p.replace(/[-]?(left|top|right|bottom)/gi,"")),"$gradient"==t)return r.$setGradients(e,i);if("$zoom"==t)return r.$setZoom(e,i);if("opacity"==t){if(i=(i=xui.isFinite(i)?parseFloat(i)>1?1:parseFloat(i)<=0?0:parseFloat(i):1)>.9999?"":i,!r.css3Support("opacity")&&o.ie){""===i&&(i=1),u.opacity=i,u.zoom=1,i="alpha(opacity="+100*i+")";var x=(u.filter||"").replace(d,"");i=(x?x+",":"")+i,t="filter",8==o.ver&&(s="msfilter")}}else if(-1!=xui.arr.indexOf(n,p)){if(!r.css3Support(t)){if(o.ie&&o.ver<9)switch(t){case"transform":xui.Dom.$transformIE(e,i);break;case"boxShadow":xui.Dom.$textShadowIE(e,i,!0)}return"textShadow"==t&&o.ie&&o.ver<10&&xui.Dom.$textShadowIE(e,i),this}o.cssTag2&&"textShadow"!=t&&(s=o.cssTag2+t.charAt(0).toUpperCase()+t.substr(1))}else f[t]&&(t=o.ie?"styleFloat":"cssFloat");"filter"==t&&(i=i.replace(/(^[\s,]*)|([\s,]*$)/g,"").replace(/,[\s]+/g,","+(8==xui.browser.ver?"":" "))),xui.Dom.beforeNodeChange(),u[t]=i,s&&(u[s]=i),xui.Dom.afterNodeChange()}else for(var h in t)arguments.callee.call(this,e,h,t[h])},_css3prop:"opacity,textShadow,animationName,columnCount,flexWrap,boxDirection,backgroundSize,perspective,boxShadow,borderImage,borderRadius,boxReflect,transform,transition,contentVisibility,willChange".split(","),_css3Support:{},css3Support:function(e){var t=this._css3Support;if((e=e.replace("$","").replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()})))in t)return t[e];var i=document.createElement("div"),r=i.style,n=!1,o=xui.browser,a=function(e){return e=e.replace(/\-(\w)/g,(function(e,t){return t.toUpperCase()})),r[e]!==undefined||!(!xui.browser.cssTag2||(e=xui.browser.cssTag2+e.charAt(0).toUpperCase()+e.substr(1),r[e]===undefined))};switch(i.id="xui_css3_"+xui.stamp(),0===e.indexOf("border")&&(e=e.replace(/[-]?(left|top|right|bottom)/gi,"")),e){case"opacity":case"textShadow":n=""===r[e];break;case"generatedContent":var u="tmp_css3_test"+xui.id(),s="#"+i.id+"{line-height:auto;margin:0;padding:0;border:0;font:0/0 a}#"+i.id+":after{content:'a';visibility:hidden;line-height:auto;margin:0;padding:0;border:0;font:3px/1 a}";xui.CSS.addStyleSheet(s,u),xui("body").append(i);var l=i.offsetParent?i.offsetHeight:0;xui.CSS.remove("id",u),xui(i.id).remove(i),n=l>=3;break;case"fontFace":if(o.ie&&o.ver>=6)n=!0;else{u="tmp_css3_test"+xui.id(),s='@font-face{font-family:"font";src:url("https://")}';var c=xui.CSS.addStyleSheet(s,u),d=c.sheet||c.styleSheet,f=d?d.cssRules&&d.cssRules[0]?d.cssRules[0].cssText:d.cssText||"":"";n=/src/i.test(f)&&0===f.indexOf("@font-face"),xui.CSS.remove("id",u)}break;case"rgba":r.cssText="background-color:rgba(0,0,0,0.1)",n=-1!=r.backgroundColor.indexOf("rgba");break;case"hsla":r.cssText="background-color:hsla(120,40%,100%,.5)",n=-1!=r.backgroundColor.indexOf("hsla")||-1!=r.backgroundColor.indexOf("rgba");break;case"multiplebgs":r.cssText="background:url(//:),url(//:),red url(//:)",n=/(url\s*\(.*?){3}/.test(r.background);break;case"gradient":var p="background-image:",x="-webkit-gradient(linear,left top,right bottom,from(#000),to(#fff));",h=[p,A="linear-gradient(left top,#000,#fff);"];xui.browser.cssTag1&&(h.push(p),h.push(xui.browser.cssTag1+A)),xui.browser.isWebKit&&(h.push(p),h.push(x)),r.cssText=h.join(""),n=!!r.backgroundImage;break;case"transform3d":var g=a("perspective");if(g&&"webkitPerspective"in document.documentElement.style){u="tmp_css3_test"+xui.id(),s="@media (transform-3d),(-webkit-transform-3d){#"+i.id+"{font:0/0;line-height:0;margin:0;padding:0;border:0;left:9px;position:absolute;height:3px;}}",xui.CSS.addStyleSheet(s,u),xui("body").append(i),x=i.offsetLeft;var A=i.offsetHeight;xui.CSS.remove("id",u),xui(i.id).remove(i),n=9===x&&3===A}n=g;break;default:n=a(e)}return t[e]=n},beforeNodeChange:function(e,t){document.documentElement&&"hidden"!=document.documentElement.style.contentVisibility&&this.css3Support("contentVisibility")&&(document.documentElement.style.contentVisibility="hidden")},afterNodeChange:function(e){document.documentElement&&"hidden"==document.documentElement.style.contentVisibility&&(document.documentElement.style.contentVisibility="")},willChange:function(e,t){e&&e.style&&this.css3Support("willChange")&&(e.style.willChange=t||"contents")},unWillChange:function(e){e&&e.style&&this.css3Support("willChange")&&(e.style.willChange="")},supportPromise:function(){var e=xui.Dom;if("$supportPromise"in e)return e.$supportPromise;try{return new Promise((function(e,t){})),e.$supportPromise=!0}catch(e){}return e.$supportPromise=!1},supportDropzone:function(){if("$supportDropzone"in xui.Dom)return xui.Dom.$supportDropzone;var e=document.createElement("div");return xui.Dom.$supportDropzone=("draggable"in e||"ondragstart"in e&&"ondrop"in e)&&"FileReader"in window},$AnimateEffects:{linear:function(e,t){return 1/e*t},sineIn:function(e,t){return-1*Math.cos(t/e*(Math.PI/2))+1},sineOut:function(e,t){return Math.sin(t/e*(Math.PI/2))},sineInOut:function(e,t){return-.5*(Math.cos(Math.PI*t/e)-1)},quadIn:function(e,t){return(t/=e)*t},quadOut:function(e,t){return-1*(t/=e)*(t-2)},quadInOut:function(e,t){return(t/=e/2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(e,t){return(t/=e)*t*t},cubicOut:function(e,t){return(t=t/e-1)*t*t+1},cubicInOut:function(e,t){return(t/=e/2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quartIn:function(e,t){return(t/=e)*t*t*t},quartOut:function(e,t){return-1*((t=t/e-1)*t*t*t-1)},quartInOut:function(e,t){return(t/=e/2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quintIn:function(e,t){return(t/=e)*t*t*t*t},quintOut:function(e,t){return(t=t/e-1)*t*t*t*t+1},quintInOut:function(e,t){return(t/=e/2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},expoIn:function(e,t){return 0==t?0:Math.pow(2,10*(t/e-1))},expoOut:function(e,t){return t==e?1:1-Math.pow(2,-10*t/e)},expoInOut:function(e,t){return 0==t?0:t==e?1:(t/=e/2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*--t))},circIn:function(e,t){return-1*(Math.sqrt(1-(t/=e)*t)-1)},circOut:function(e,t){return Math.sqrt(1-(t=t/e-1)*t)},circInOut:function(e,t){return(t/=e/2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},bounceIn:function(e,t){return 1-xui.Dom.$AnimateEffects.bounceOut(e,e-t)},bounceOut:function(e,t){var i=7.5625;return(t/=e)<1/2.75?i*t*t:t<2/2.75?i*(t-=1.5/2.75)*t+.75:t<2.5/2.75?i*(t-=2.25/2.75)*t+.9375:i*(t-=2.625/2.75)*t+.984375},bounceInOut:function(e,t){return t<e/2?.5*xui.Dom.$AnimateEffects.bounceIn(e,2*t):.5*xui.Dom.$AnimateEffects.bounceOut(e,2*t-e)+.5},backIn:function(e,t){var i=1.70158;return(t/=e)*t*((i+1)*t-i)},backOut:function(e,t){var i=1.70158;return(t=t/e-1)*t*((i+1)*t+i)+1},backInOut:function(e,t){var i=1.70158;return(t/=e/2)<1?t*t*((1+(i*=1.525))*t-i)*.5:.5*((t-=2)*t*((1+(i*=1.525))*t+i)+2)},elasticIn:function(e,t,i,r,n){if(0==t)return 0;if(1==(t/=e))return 1;if(n||(n=.3*e),!r||r<1){r=1;var o=n/4}else o=n/(2*Math.PI)*Math.asin(1/r);return-r*Math.pow(2,10*(t-=1))*Math.sin((t*e-o)*(2*Math.PI)/n)},elasticOut:function(e,t,i,r,n){if(0==t)return 0;if(1==(t/=e))return 1;if(n||(n=.3*e),!r||r<1){r=1;var o=n/4}else o=n/(2*Math.PI)*Math.asin(1/r);return r*Math.pow(2,-10*t)*Math.sin((t*e-o)*(2*Math.PI)/n)+1},elasticInOut:function(e,t,i,r,n){if(0==t)return 0;if(2==(t/=e/2))return 1;if(n||(n=e*(.3*1.5)),!r||r<1){r=1;var o=n/4}else o=n/(2*Math.PI)*Math.asin(1/r);return t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*e-o)*(2*Math.PI)/n)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t*e-o)*(2*Math.PI)/n)*.5+1}},$preDefinedAnims:{blinkAlert:{endpoints:{opacity:[1,0]},duration:200,restore:!0,times:3},blinkAlertLoop:{endpoints:{opacity:[1,0]},duration:500,restore:!0,times:-1},rotateAlert:{endpoints:{rotate:[0,360]},duration:400,restore:!1},rotateAlertLoop1:{endpoints:{rotate:[0,360]},duration:2e3,restore:!1,times:-1},rotateAlertLoop2:{endpoints:{rotate:[0,-360]},duration:2e3,returned:!1,times:-1},zoomAlert:{endpoints:{scaleX:[1,1.1],scaleY:[1,1.1]},duration:100,restore:!0,times:3},translateXAlert:{endpoints:{translateX:[0,5]},duration:100,restore:!0,times:3},translateYAlert:{endpoints:{translateY:[0,5]},duration:100,restore:!0,times:3}},$preDefinedEffects:{Classic:[{type:"circOut",duration:200,endpoints:{opacity:[0,1],scaleX:[.75,1],scaleY:[.75,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],scaleX:[1,.75],scaleY:[1,.75]}}],Blur:[{type:"circOut",duration:200,endpoints:{opacity:[0,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0]}}],Drop:[{type:"circOut",duration:200,endpoints:{opacity:[0,1],translateY:["-25%","0%"],scaleY:[.5,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],translateY:["0%","-25%"],scaleY:[1,.5]}}],"From Below":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],scaleX:[0,1],scaleY:[0,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],scaleX:[1,0],scaleY:[1,0]}}],"From Above":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],scaleX:[2,1],scaleY:[2,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],scaleX:[1,2],scaleY:[1,2]}}],"Slide In LR":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],translateX:["-150%","0%"]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],translateX:["0%","150%"]}}],"Slide In TB":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],translateY:["-150%","0%"]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],translateY:["0%","150%"]}}],"Flip V":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],scaleY:[0,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],scaleY:[1,0]}}],"Flip H":[{type:"circOut",duration:200,endpoints:{opacity:[0,1],scaleX:[0,1]}},{type:"circIn",duration:200,endpoints:{opacity:[1,0],scaleX:[1,0]}}]},_getEffects:function(e,t){return e&&"string"==typeof e&&(e=(e=this.$preDefinedEffects[e])?t?e[0]:e[1]:null),e&&xui.browser.ie&&xui.browser.ver<=8&&xui.filter(e,(function(e,t){return!!xui.Dom._cssfake[t]})),e},_setUnitStyle:function(e,t,i){if(!e||1!=e.nodeType)return!1;var r=e.style;return!(!i&&0!==i||(!(i=xui.CSS.$addu(i))||"width"!=t&&"height"!=t||"-"!=i.charAt(0)||(i="0"),r[t]==i)||(r[t]=i,0))},_emptyDivId:"xui.empty:",getEmptyDiv:function(e,t){var i,r,n,o=1,a=0,u=document,s=e&&(e=xui(e)).get(0)||u.body,l=function(e){e.id=i,xui([e]).attr("style","position:absolute;content-visibility:hidden;visibility:hidden;overflow:visible;left:"+xui.Dom.HIDE_VALUE+";top:"+xui.Dom.HIDE_VALUE+";")};for(t=t||1,e=s==u.body?"":e.n0.replace("!","");;){if(i=this._emptyDivId+e+":"+o,!(n=xui.Dom.byId(i)))return l(n=u.createElement("div")),s.firstChild?s.insertBefore(n,s.firstChild):s.appendChild(n),r=xui([n]),s=n=null,r;if((!n.firstChild||3==n.firstChild.nodeType&&!n.firstChild.nodeValue)&&++a==t)return xui([n]);o++}s=n=null},setCover:function(e,t,i,r,n){var o,a,u=arguments.callee,s="xui.temp:cover:",l="xui.temp:message:",c="string"==typeof e||"function"==typeof e?e:"";if((o=xui(s)).isEmpty()&&(xui("body").prepend(o=xui.create('<button id="'+s+'" class="xui-node xui-node-div xui-cover xui-cover-global xui-custom" style="position:absolute;display:none;text-align:center;left:0;top:0;border:0;padding:0;margin:0;padding-top:2em;"><div id="'+l+'" class="xui-node xui-node-div xui-coverlabel xui-custom"></div></button>')),o.setSelectable(!1),xui.setNodeData(o.get(0),"zIndexIgnore",1)),xui.Dom.byId(l)&&(a=xui(l)),e){"string"==typeof t&&(u._label=t);var d=xui.win;u._showed||(o.css({zIndex:10*xui.Dom.TOP_ZINDEX,display:"",width:d.scrollWidth()+"px",height:d.scrollHeight()+"px",cursor:r||"progress"}),i?o.addClass("xuicon xui-icon-loading"):o.removeClass("xuicon xui-icon-loading"),u._showed=!0),o.query("style").remove(!1),n&&xui.CSS._appendSS(o.get(0),".xui-cover-global{"+n+"}","",!0),c&&("function"==typeof c?c(o,a):a&&a.html(c+"",!1))}else{if("string"==typeof u._label&&u._label!==t)return;u._showed&&(a&&a.empty(!1),o.css({zIndex:0,cursor:"",display:"none"}),o.query("style").remove(!1),u._showed=!1),delete u._label}},byId:function(e){return document.getElementById(e||"")},$hasEventHandler:function(e,t){return xui.getNodeData(e,["eHandlers",t])},submit:function(e,t,i,r,n){t=xui.isHash(t)?t:{},t=xui.clone(t,(function(e){return e!==undefined})),e=e||"",r=r||("mailto"==e.substring(0,6).toLowerCase()?"_self":"_blank");var o=[];if(xui.isEmpty(t))window.open(e,r);else{var a,u=[];xui.each(t,(function(e,i){e&&e["xui.UIProfile"]&&e.$xuiFileCtrl&&(a=e.boxing().getUploadObj())&&(u.push({id:e.$xid,file:a}),a.id=a.name=i,t[i]=a)})),"get"==(i=i||(a?"post":"get")).toLowerCase()?window.open(e+"?"+xui.urlEncode(t),r):(xui.each(t,(function(e,t){xui.isDefined(e)&&!xui.isElem(e)&&o.push('<textarea name="'+t+'">'+("object"==typeof e?xui.serialize(e):e)+"</textarea>")})),o.push('<input type="hidden" name="rnd" value="'+xui.rand()+'">'),o=xui.str.toDom('<form target="'+r+'" action="'+e+'" method="'+i+(n?'" enctype="'+n:"")+'">'+o.join("")+"</form>"),xui.Dom.getEmptyDiv().append(o),u.length&&xui.arr.each(u,(function(e,t){o.append(e.file)})),o.get(0).submit(),o.remove(),o=null),u.length&&xui.arr.each(u,(function(e,t){(t=xui.getObject(e.id))&&t["xui.UIProfile"]&&t.boxing()&&t.boxing().setUploadObj&&t.boxing().setUploadObj(e.file)}))}},selectFile:function(e,t,i){var r=document.createElement("input");if(r.type="file",t&&(r.accept=t),i&&(r.multiple="multiple"),r.onchange=function(t){var i=t.target||window.event.srcElement;xui.tryF(e,[this,i.files[0],i.files],this)},window.ActiveXObject||"ActiveXObject"in window){var n=document.createElement("div");r.appendChild(n),n.click(),r.removeChild(n)}else r.click()},busy:function(e,t,i,r,n){xui.Dom.setCover(t||!0,e,i,r,n)},free:function(e){xui.Dom.setCover(!1,e)},animate:function(e,t,i,r,n,o,a,u,s,l,c){var d=document.createElement("div");return xui.merge(e,{position:"absolute",left:this.HIDE_VALUE,zIndex:this.TOP_ZINDEX++}),xui.Dom.setStyle(d,e),document.body.appendChild(d),xui([d]).animate(t,i,(function(){xui.tryF(r),d.parentNode&&d.parentNode.removeChild(d),d=null}),n,o,a,u,s,l,c)},$enableEvents:function(e){xui.isArr(e)||(e=[e]);var t,i=this;xui.arr.each(e,(function(e){t=function(t,i,r){if("function"==typeof t)return this.$addEvent(e,t,i,r);if(null===t)return this.$removeEvent(e,i,r);var n=arguments[1]||{};return n.$xuiall=!0===arguments[0],this.$fireEvent(e,n)},t.$event$=1,i.plugIn(e,t)}))}},After:function(e){var t=this;xui.each({parent:["y",!1],prev:["x",!1],next:["x",!0],first:["y",!0],last:["y",1]},(function(e,i){t.plugIn(i,(function(t){return this.$iterator(e[0],e[1],!0,t||1)}))})),xui.arr.each(xui.toArr("offsetLeft,offsetTop,scrollWidth,scrollHeight"),(function(e){t.plugIn(e,(function(){var t=this.get(0),i=document;if(t==window||t==i){if("scrollWidth"==e||"scrollHeight"==e){var r=i.documentElement,n=i.body;return Math.max(r[e],n[e])}t=xui.browser.contentBox?i.documentElement:i.body}return t[e]}))}));var i="padding",r="margin",n="border",o="inner",a="offset",u="outer",s="width",l="height",c="Width",d="Height",f="Top",p="Left",x="top",h="left",g="right",A="bottom",m="Right",y="Bottom";xui.arr.each([["_"+i+"H",i+f,i+y],["_"+i+"W",i+p,i+m],["_"+n+"H",n+f+c,n+y+c],["_"+n+"W",n+p+c,n+m+c],["_"+r+"W",r+p,r+m],["_"+r+"H",r+f,r+y]],(function(e){var i,r=xui.Dom.getStyle;t.plugIn(e[0],(function(t){return t=t||"both",i=this.get(0),("both"==t||"left"==t||"top"==t?xui.CSS.$px(r(i,e[1]),i):0)+("both"==t||"right"==t||"bottom"==t?xui.CSS.$px(r(i,e[2]),i):0)||0}))})),xui.arr.each([["_W",s,"_"+i+"W","_"+n+"W","_"+r+"W",o+c,a+c],["_H",l,"_"+i+"H","_"+n+"H","_"+r+"H",o+d,a+d]],(function(e){var i=function(t,r,n,o){var a,u,s,l=t.style,c=xui.browser.contentBox,d=xui.Dom.getStyle,f=xui.Dom._setUnitStyle,p=typeof n;if("undefined"==p||"boolean"==p){if(!0===n&&(a="none"==d(t,"display")||!t.offsetParent)){var x,h,g,A=xui.Dom.getEmptyDiv().html("*",!1);xui([t]).swap(A),x=l.visibility,h=(h=l.position)||"",x=x||"",g=(g=l.display)||"",l.visibility="hidden",l.position="absolute",l.display="block"}switch(s=xui([t]),r){case 1:u=d(t,e[1]),!isNaN(parseFloat(u))&&!/%$/.test(u)||o||(u=i(t,2,undefined,!0)-(c?s[e[2]]():0)),u=xui.CSS.$px(u,t)||0;break;case 2:t===document||t===window?u=xui(t)[e[1]]():(u=t[e[6]])?u-=s[e[3]]():o||(u=i(t,1,undefined,!0)+(c?s[e[2]]():0));break;case 3:t===document||t===window?u=xui(t)[e[1]]():(u=t[e[6]])||(u=i(t,1,n,!0)+(c?s[e[2]]():0)+s[e[3]]());break;case 4:u=i(t,3,n),u+=s[e[4]]()}return a&&(l.display=g,l.position=h,l.visibility=x,s.swap(A),A.empty(!1)),parseFloat(u)||0}switch(r){case 1:if(f(t,e[1],n)&&xui.Dom.$hasEventHandler(t,"onsize")){var m={};m[e[1]]=1,xui([t]).onSize(!0,m)}break;case 2:i(t,1,n-(c?xui([t])[e[2]]():0));break;case 3:i(t,1,n-(s=xui([t]))[e[3]]()-(c?s[e[2]]():0));break;case 4:i(t,1,n-(s=xui([t]))[e[4]]()-s[e[3]]()-(c?s[e[2]]():0))}};t.plugIn(e[0],i)})),xui.arr.each([[o+c,"_W",2],[a+c,"_W",3],[u+c,"_W",4],[o+d,"_H",2],[a+d,"_H",3],[u+d,"_H",4]],(function(e){t.plugIn(e[0],(function(t){var i=typeof t;return"undefined"==i||"boolean"==i?this[e[1]](this.get(0),e[2],t):this.each((function(i){this[e[1]](i,e[2],t)}))}))})),xui.arr.each([[h+"By",h],[x+"By",x],[g+"By",g],[A+"By",A],[s+"By",s],[l+"By",l]],(function(e){t.plugIn(e[0],(function(t,i){if(0===t)return this;var r,n,o=e[1];return this.each((function(e){if(r=xui.use(e.$xid)[o](),r=(parseFloat(r)||0)+t,"width"!=o&&"height"!=o||(r=r>0?r:0),e.style[o]=xui.CSS.$forceu(r,null,e),i){(n={})[o]=1;var a=xui.Dom.$hasEventHandler;"left"!=o&&"top"!=o&&"top"!=o&&"bottom"!=o||!a(e,"onmove")||xui([e]).onMove(!0,n),"width"!=o&&"height"!=o||!a(e,"onsize")||xui([e]).onSize(!0,n)}}),this)}))})),xui.arr.each(["scrollLeft","scrollTop"],(function(e){t.plugIn(e,(function(t){var i,r=document.documentElement,n=document.body;return t!==undefined?this.each((function(i){i===window||i===document?(r&&r[e]!==t&&(r[e]=t),n&&n[e]!==t&&(n[e]=t)):i&&i[e]!==t&&(i[e]=t)})):(i=this.get(0))?i===window||i===document?window["scrollTop"==e?"pageYOffset":"pageXOffset"]||r[e]||n[e]||0:i[e]:0}))})),xui.arr.each([h,x,g,A,s,l],(function(e){t.plugIn(e,(function(t){var i,r,n=this,o=n.get(0),a=xui.browser,u=typeof t,s=document;if(o&&3!=o.nodeType){if("undefined"==u||"boolean"==u){if("width"==e&&(i="Width")||"height"==e&&(i="Height")){if(s===o)return Math.max(s.body["scroll"+i],s.body["offset"+i],s.documentElement["scroll"+i],s.documentElement["offset"+i]);if(window===o)return a.opr?Math.max(s.body["client"+i],window["inner"+i]):a.kde?window["inner"+i]:xui.browser.contentBox&&s.documentElement["client"+i]||s.body["client"+i]}return r=o.style,"auto"==(t="width"==e?xui.CSS.$isPx(r.width)&&parseFloat(r.width)||n._W(o,1,t):"height"==e?xui.CSS.$isPx(r.height)&&parseFloat(r.height)||n._H(o,1,t):xui.Dom.getStyle(o,e,!0))||""===t?t:t||0}var l,c=xui.Dom._setUnitStyle,d=xui.CSS.$addu(t);return n.each((function(i){1==i.nodeType&&i.style[e]!==d&&("width"==e?n._W(i,1,t):"height"==e?n._H(i,1,t):c(i,e,t)&&("top"!=e&&"left"!=e&&"right"!=e&&"bottom"!=e||!xui.Dom.$hasEventHandler(o,"onmove")||((l={})[e]=1,xui([i]).onMove(!0,l))))}))}}))})),xui.arr.each(xui.Event._events,(function(e){xui.arr.each(xui.Event._getEventName(e),(function(e){t.$enableEvents(e)}))}))},Initialize:function(){var e=window,t=document;xui.browser.contentBox=xui(t.documentElement).contentBox(),xui.set(xui.$cache.domPurgeData,"!window",{$xid:"!window",element:e}),xui.set(xui.$cache.domPurgeData,"!document",{$xid:"!document",element:t}),xui.win=xui(["!window"],!1),xui.doc=xui(["!document"],!1),xui.frame=xui.win,xui.busy=xui.Dom.busy,xui.free=xui.Dom.free,xui.$inlineBlock=xui.browser.gek?xui.browser.ver<3?["-moz-inline-block","-moz-inline-box","inline-block"]:["inline-block"]:xui.browser.ie&&xui.browser.ver<=6?["inline-block","inline"]:["inline-block"];var i=function(e,t,i,r){var n,o,a,u,s,l=xui.Event,c={},d=l.getKey(t);if(d){if(1==d[0].length&&(d[0]=d[0].toLowerCase()),(s=i[d.join(":")])&&(xui.arr.each(s,(function(e,t){if(n=s[e]){if(n[3]&&("function"==typeof n[3]?!1===n[3]():!xui(n[3]).size()))return delete s[e],void(c[t]=1);if(!1===(a=xui.tryF(n[0],n[1]||[s,t,e],n[2])))return o=1,!1;!0===a&&(delete s[e],c[t]=1)}}),null,!0),xui.filter(s,(function(e,t){return!c[t]})),o))return l.stopBubble(t),!1;if(!r&&xui.UIProfile){var f=document.activeElement;if(document.documentElement!==f&&("INPUT"==f.tagName||"TEXTAREA"==f.tagName||"BUTTON"==f.tagName)){var p=xui.UIProfile.getFromDom(f);p&&("esc"==d.key?p.onEsc&&p.boxing().onEsc(p):"enter"==d.key&&p.onEnter&&p.boxing().onEnter(p))}}xui.Module&&xui.arr.each(xui.Module._cache,(function(e){if(e._evsClsBuildIn&&"onHookKey"in e._evsClsBuildIn){if((xui.isFun(u=e._evsClsBuildIn.onHookKey)||xui.isArr(u)&&u[0].type)&&!1===e.fireEvent("onHookKey",[e,d,r,t]))return!1}else if(e._evsPClsBuildIn&&"onHookKey"in e._evsPClsBuildIn&&(xui.isFun(u=e._evsPClsBuildIn.onHookKey)||xui.isArr(u)&&u[0].type)&&!1===e.fireEvent("onHookKey",[e,d,r,t]))return!1}))}return!0};xui.doc.onKeydown((function(e,t){xui.Event.$keyboard=xui.Event.getKey(t),i(0,t,xui.$cache.hookKey,!0)}),"document").onKeyup((function(e,t){delete xui.Event.$keyboard,i(0,t,xui.$cache.hookKeyUp,!1)}),"document"),xui.doc.onClick((function(e,t,i){var r,n,o=xui.Event.getSrc(t),a=0;do{if("A"==o.nodeName){r=!0;break}if(++a>8)break}while(o=o.parentNode);if(r){if(n=xui.str.trim(o.href||"").toLowerCase(),xui.History){var u=location.href.split("#")[0];xui.Event.getKey(t).shiftKey||"left"!=xui.Event.getBtn(t)||0!=n.indexOf(u+"#")&&0!=n.indexOf("#")||xui.History.setFI(o.href.replace(u,""))}if(xui.browser.ie&&(0==n.indexOf("javascript:")||-1!==n.indexOf("#")))return!1}}),"hookA",0);var r=function(e,t){for(e=window.event.srcElement;e&&e.nodeName&&"BODY"!=e.nodeName&&"HTML"!=e.nodeName;){if(t=xui.getNodeData(e,"_onxuisel"))return"false"!=t;if("INPUT"==e.nodeName||"TEXTAREA"==e.nodeName)break;e=e.parentNode}return!0};xui.browser.ie&&xui.browser.ver<10&&t.body&&xui.Event._addEventListener(t.body,"selectstart",r),xui.win.afterUnload(xui._destroy=function(){var i,n=xui.browser.ie&&xui.browser.ver<=8,o=xui.Event,a=function(e,t){e[t]=undefined,n||delete e[t]};for(var u in xui.History&&xui.History._checker&&o._removeEventListener(e,"hashchange",xui.History._checker),o._removeEventListener(t.body,"selectstart",r),o._removeEventListener(e,"resize",o.$eventhandler),o._removeEventListener(e,"mousewheel",o.$eventhandler3),o._removeEventListener(t,"mousewheel",o.$eventhandler3),o._removeEventListener(e,"DOMMouseScroll",o.$eventhandler3),xui.browser.isTouch&&(o._removeEventListener(t,xui.browser.ie&&e.PointerEvent?"pointerdown":xui.browser.ie&&e.MSPointerEvent?"MSPointerDown":"touchstart",o._simulateMousedown),o._removeEventListener(t,xui.browser.ie&&xui.browser.ver>=11?"pointerup":xui.browser.ie&&xui.browser.ver>=10?"MSPointerUp":"touchend",o._simulateMouseup)),i=xui.$cache.domPurgeData)i[u].eHandlers&&xui(u).$clearEvent();for(var u in i=xui._pool)i[u]&&i[u].destroy&&i[u].destroy(1,1),i[u]&&i[u].Instace&&i[u].Instace.destroy&&i[u].Instace.destroy(1,1);if(a(e,xui.ini.rootModuleName),e.Raphael&&e.Raphael._in_xui&&a(e,"Raphael"),xui.SC.__gc(),xui.Thread.__gc(),xui.Class.__gc(),/xui\.Class\.apply/.test(e.Class)&&a(e,"Class"),i=xui.Namespace._all)for(var u in i)a(e,i[u]);xui.breakO(xui.$cache,2),xui.breakO([xui.Class,xui],3),a(e,"xui_ini"),a(e,"xui"),e=t=null},"window",-1)}}),xui.Class("xui.Template","xui.absProfile",{Constructor:function(e,t,i,r){var n=arguments.callee.upper,o=xui.toArr(arguments);n.apply(this,o),n=null;var a=this;return a.$domId=a.KEY+":"+(a.serialId=a._pickSerialId())+":",a.domId="string"==typeof r?r:a.$domId,a._links={},a.template={root:[["<div></div>"],[]]},a.properties={},a.events={},a.$template={},a.link(a.constructor._cache,"self").link(xui._pool,"xui"),a.Class=a.constructor,a.box=a.constructor,a.boxing=function(){return this},e&&a.setTemplate("string"==typeof e?{root:e}:e),i&&a.setEvents(i),t&&a.setProperties(t),a},Instance:{renderId:null,__gc:function(){var e=this,t=xui.$cache.reclaimId;e.$noReclaim?delete e.$noReclaim:(t[e.KEY]||(t[e.KEY]=[])).push(e.serialId),delete xui.$cache.profileMap[e.domId],delete xui.$cache.profileMap[e.$domId],e.unLinkAll(),xui.breakO([e.properties,e.event,e],2)},_reg0:/^\w[\w_-]*$/,show:function(e){return e||(e=xui("body")),(e=xui(e)).append(this),this},getRootNode:function(){return xui.getNodeData(this.renderId,"element")},getRoot:function(){return xui([this.renderId],!1)},setDomId:function(e){var t=this,i=xui.$cache.profileMap,r=t._reg0;return"string"==typeof e&&r.test(e)&&!document.getElementById(e)&&(t.domId!=t.$domId&&delete i[t.domId],t.domId=e,t.renderId&&(t.getRootNode().id=e),i[t.$domId]&&(i[e]=t)),t},destroy:function(){if(this.renderId){var e=this.getRootNode();xui.$purgeChildren(e),e.parentNode&&e.parentNode.removeChild(e),e=null}else this.__gc()},setEvents:function(e,t){var i=this;return"object"==typeof e?i.events=e:i.events[e]=t,i},setTemplate:function(e,t){var i,r=this,n=r.template,o=r.$template;if("object"==typeof e){for(var a in r.template=e,i={},e)i[a||"root"]=r._buildTemplate(e[a]);r.$template=i}else"string"==typeof t?o[e]=r._buildTemplate(n[e]=t):o.root=r._buildTemplate(n.root=e);return r},setProperties:function(e,t){var i=this;return"object"==typeof e?i.properties=e:i.properties[e]=t,i},getItem:function(e){var t=xui.getNodeData(e);if(t){var i=t.tpl_evid,r=t.tpl_evkey;if(i&&r){var n=arguments.callee,o=n.f||(n.f=function(e,t,i){var r,n,a,u;for(a in e)if(n=e[a],xui.isArr(n)&&(t==a||0===t.indexOf((e.tpl_evkey||a)+".")))for(r=0;u=n[r];r++){if(u.tpl_evkey==t&&u.id==i)return u;if(u=o(u,t,i))return u}});return o(this.properties,r,i)}}},_pickSerialId:function(){var e=xui.$cache.reclaimId[this.KEY];return e&&e[0]?e.shift():this.constructor._ctrlId.next()},render:function(){var e=this;if(!e.renderId){var t=xui.$getGhostDiv();xui.$cache.profileMap[e.domId]=xui.$cache.profileMap[e.$domId]=this,t.innerHTML=e.toHtml();var i,r,n,o,a,u,s,l,c,d=e.events,f=xui.Event._eventHandler,p=t.getElementsByTagName("*"),x=(e.$domId,xui.Event.$eventhandler);if(r=p.length){for(i=0;i<r;i++)if(1==(a=p[i]).nodeType&&(u=a.getAttribute("tpl_evkey"),s=a.getAttribute("tpl_evid"),null!==u&&null!==s)){if((c=xui.$registerNode(a)).tpl_evkey=u,c.tpl_evid=s,l=d[u])for(n in c=c.eHandlers||(c.eHandlers={}),l)c[n]=x,(o=f[n])&&(c[o]=x,xui.Event._addEventListener(a,o,x));a.removeAttribute("tpl_evkey"),a.removeAttribute("tpl_evid")}t.firstChild.$xid||xui.$registerNode(t.firstChild),e.renderId=t.firstChild.$xid}a=t=null}return e},refresh:function(){var e=this;if(e.renderId){var t=document.createElement("span"),i=e.getRootNode(),r=xui.$cache.profileMap;delete r[e.domId],delete r[e.$domId],i.parentNode&&i.parentNode.replaceChild(t,i),e.destroy(),delete e.renderId,e.render(),t.parentNode&&t.parentNode.replaceChild(e.getRootNode(),t),t=i=null}return e},renderOnto:function(e){var t,i,r,n=this,o="style";"string"==typeof e&&(e=document.getElementById(e)),t=e.id||n.domId,n.renderId||n.render(),i=n.getRootNode(),e.parentNode.replaceChild(i,e),i.tabIndex!==e.tabIndex&&(i.tabIndex=e.tabIndex),e.className&&(i.className+=e.className),xui.browser.ie&&(r=e.style.cssText)?i.style.cssText+=r+"":(r=e.getAttribute(o))&&i.setAttribute(o,(i.getAttribute(o)||"")+r),this.setDomId(t)},toHtml:function(e){var t=xui.copy(e||this.properties||{});return t.tpl_evkey="root",this._doTemplate(t)},_reg1:/([^{}]*)\{([\w]+)\}([^{}]*)/g,_reg2:/\[event\]/g,_buildTemplate:function(e){if("string"==typeof e){var t=[[],[]],i=t[0],r=t[1];return(e=e.replace(this._reg2,' tpl_evid="{id}" tpl_evkey="{tpl_evkey}" ')).replace(this._reg1,(function(e,t,n,o){return t&&(i[i.length]=t),r[i.length]=i[i.length]=n,o&&(i[i.length]=o),""})),t}return e},_getEV:function(e,t,i,r){var n=xui.getNodeData(r);if(n){var o=this.events,a=n.tpl_evkey,u=a&&o&&o[a]||o,s=u&&u[i];s&&e.push(s)}},_reg3:/(^\s*<\w+)(\s|>)(.*)/,_doTemplate:function(e,t,i){if(!e)return"";var r,n,o,a=this,u=arguments.callee,s=xui.isArr(e),l=a.$template,c=l[t||"root"],d=!i;if(i=i||[],s){"function"!=typeof c&&(c=u);for(var f=0;n=e[f++];)n.tpl_evkey=t,c.call(a,n,t,i)}else if("function"==typeof c)c.call(a,e,t,i);else{t=t?t+".":"";for(var p=c[0],x=c[1],h=(f=0,p.length);f<h;f++)(o=x[f])?o in e&&(n="function"==typeof e[o]?e[o].call(a,o,e):e[o],l[r=t+o]?u.call(a,n,r,i):i[i.length]=n):i[i.length]=p[f]}return d?i.join("").replace(a._reg3,'$1 id="'+a.$domId+'" $2$3'):void 0},serialize:function(){var e=this,t=xui.serialize,i=xui.absObj.$specialChars,r=xui.isEmpty(e.properties)?null:xui.clone(e.properties,(function(e,t){return!i[(t+"").charAt(0)]}));return"new xui.Template("+t(e.template||null)+","+t(r)+","+t(xui.isEmpty(e.events)?null:e.events)+","+t(e.$domId!=e.domId?e.domId:null)+")"}},Static:{getFromDom:function(e){if((e="string"==typeof e?e:e&&e.id)&&(e=xui.$cache.profileMap[e])&&e["xui.Template"])return e.boxing()},_cache:[],_ctrlId:new xui.id}}),xui.Class("xui.DragDrop",null,{Static:{_eh:"_dd",_id:"xui.dd:proxy:",_idi:"xui.dd:td:",_type:{blank:1,move:1,shape:1,deep_copy:1,copy:1,icon:1,none:1},_Icons:{none:"0 0",move:"0 -16px",link:"0 -32px",add:"0 -48px"},_profile:{},_left:function(e){var t=this.$proxySize,i=this._profile;if(i.magneticDistance>0&&i.xMagneticLines.length)for(var r=i.xMagneticLines.length;r--;)if(Math.abs(e+t-i.xMagneticLines[r])<=i.magneticDistance)return i.xMagneticLines[r]-t;return i.widthIncrement>1?Math.floor((e+t)/i.widthIncrement)*i.widthIncrement-t:e},_top:function(e){var t=this.$proxySize,i=this._profile;if(i.magneticDistance>0&&i.yMagneticLines.length)for(var r=i.yMagneticLines.length;r--;)if(Math.abs(e+t-i.yMagneticLines[r])<=i.magneticDistance)return i.yMagneticLines[r]-t;return i.heightIncrement>1?Math.floor((e+t)/i.heightIncrement)*i.heightIncrement-t:e},_ini:function(e){var t=this,i=t._profile,r=xui.win;t._box={width:r.width()+r.scrollLeft(),height:r.height()+r.scrollTop()},i.ox=i.x,i.oy=i.y,(t._proxy=e)&&(t._proxystyle=e.get(0).style,t._profile.curPos=t._cssPos=t._proxy.cssPos(),t._cssPos_x=i.x-t._cssPos.left,t._cssPos_y=i.y-t._cssPos.top,i.restrictedLeft=i.x-(i.maxLeftOffset||0),i.restrictedRight=i.x+(i.maxRightOffset||0),i.restrictedTop=i.y-(i.maxTopOffset||0),i.restrictedBottom=i.y+(i.maxBottomOffset||0),t._proxyLeft=t._pre.left=t._cssPos.left,t._proxyTop=t._pre.top=t._cssPos.top,"move"!==i.dragType&&(t._proxy.css("zIndex",10*xui.Dom.TOP_ZINDEX),xui.setNodeData(t._proxy.get(0),"zIndexIgnore",1)))},_reset:function(){var e=this,t=null,i=!1;return xui.tryF(e.$reset),e.setDropFace(),e._resetProxy(),e.$proxySize=50,e.$mousemove=e.$mouseup=e.$onselectstart=e.$ondragstart="*",e._cursor="",e._pre={},e._proxyLeft=e._proxyTop=e._cssPos_x=e._cssPos_y=0,e._stop=i,e._onDrag&&e._onDrag.tasks&&(e._onDrag.tasks.length=0,delete e._onDrag.tasks),e._onDragover&&e._onDragover.tasks&&(e._onDragover.tasks.length=0,delete e._onDragover.tasks),e._c_droppable&&(e._c_droppable.length=0),e._c_droppable=e._c_dropactive=e._cssPos=e._box=e._dropElement=e._source=e._proxy=e._proxystyle=e._onDrag=e._onDragover=t,e._profile={$id:xui.rand(),dragType:"shape",dragCursor:"move",targetReposition:!0,dragIcon:xui.ini.img_dd,magneticDistance:0,xMagneticLines:[],yMagneticLines:[],widthIncrement:0,heightIncrement:0,dragDefer:0,horizontalOnly:i,verticalOnly:i,maxBottomOffset:t,maxLeftOffset:t,maxRightOffset:t,maxTopOffset:t,targetNode:t,targetCSS:t,dragKey:t,dragData:t,targetLeft:t,targetTop:t,targetWidth:t,targetHeight:t,targetOffsetParent:t,targetCallback:t,tagVar:t,shadowFrom:t,proxyNode:t,x:0,y:0,ox:0,oy:0,curPos:{},offset:{},isWorking:i,restrictedLeft:t,restrictedRight:t,restrictedTop:t,restrictedBottom:t,dropElement:t},e.__touchingfordd=0,e},abort:function(){this._stop=!0},_end:function(e){var t,i,r=this,n=window,o=document,a=o.body;return xui.browser.isTouch&&(t=xui.browser.ie&&n.PointerEvent?"onpointermove":xui.browser.ie&&n.MSPointerEvent?"onmspointermove":"ontouchmove",i=xui.browser.ie&&n.PointerEvent?"onpointerup":xui.browser.ie&&n.MSPointerEvent?"onmspointerup":"ontouchend"),r._proxy&&r._unpack(),"*"!=r.$onselectstart&&(a.onselectstart=r.$onselectstart),"*"!=r.$ondragstart&&(o.ondragstart=r.$ondragstart),"*"!=r.$mousemove&&(o.onmousemove=r.$mousemove),"*"!=r.$mouseup&&(o.onmouseup=r.$mouseup),xui.browser.isTouch&&("*"!=r.$touchmove&&(o[t]=r.$touchmove),"*"!=r.$touchend&&(o[i]=r.$touchend)),e||xui.tryF(r.DDEnd),r},startDrag:function(e,t,i,r,n){var o,a=this,u=window;if(a._profile.isWorking)return!1;if(a._end(!0)._reset(),a._profile.isWorking=!0,a.__touchingfordd="xuitouchdown"==e.type,i=xui.isHash(i)?i:{},e=e||u.event,"left"!==xui.Event.getBtn(e))return!0;a._source=i.targetNode=xui(t),a._cursor=a._source.css("cursor"),(o=i.targetNode.get(0))&&!o.id&&(o.id=xui.Dom._pickDomId(),o=null),a._defer=i.dragDefer=xui.isNumb(i.dragDefer)?i.dragDefer:0,!0===i.dragCursor&&(i.dragCursor=a._cursor),"string"==typeof i.dragIcon&&(i.dragType="icon");var s,l,c=document,d=c.body,f=xui.Event.getPos(e),p="onmousemove",x="onmouseup";xui.browser.isTouch&&(s=xui.browser.ie&&u.PointerEvent?"onpointermove":xui.browser.ie&&u.MSPointerEvent?"onmspointermove":"ontouchmove",l=xui.browser.ie&&u.PointerEvent?"onpointerup":xui.browser.ie&&u.MSPointerEvent?"onmspointerup":"ontouchend"),i.x=f.left,i.y=f.top,i.dragKey=r||i.dragKey||null,i.dragData=n||i.dragData||null;var h=xui.Event.getSrc(e);if(a._start=function(e){var t=a._profile;if(xui.merge(t,i,"with"),a._source.beforeDragbegin(),a._stop)return a._end()._reset(),!1;if(xui.Event&&(o=a._source.get(0))&&(xui.Event._preDroppable=o.id,o=null),"icon"==t.dragType&&(t.targetReposition=!1),a._ini("none"==t.dragType?null:a._pack(f,t.targetNode)),i.x>=a._box.width||i.y>=a._box.height)return a._end()._reset(),!0;if(a.onDragBegin&&a.onDragBegin(),a._source.onDragbegin(),xui.tryF(a.DDBegin),t.dragDefer<1&&(a.$mousemove=c[p],a.$mouseup=c[x],xui.browser.isTouch&&(a.$touchmove=c[s],a.$touchend=c[l])),xui.browser.ie&&xui.setTimeout((function(){h.releaseCapture&&h.releaseCapture()})),c[p]=a.$onDrag,c[x]=a.$onDrop,xui.browser.isTouch&&(c[s]=a.$onDrag,c[l]=a.$onDrop),a._source.afterDragbegin(),t.dragDefer>0&&a.$onDrag.call(a,e),xui.browser.isTouch&&a.__touchingfordd){a._c_droppable=[];var r=xui.$cache.droppable[t.dragKey],n=[];xui.arr.each(r,(function(e){if(xui.use(e).get(0)){var t,i=xui.use(e),r=i.offsetHeight(),o=i.offsetWidth(),u=i.css("visibility");o&&r&&"hidden"!=u&&((t=i.offset()).width=o,t.height=r,t.id=e,a._c_droppable.unshift(t))}else n.push(e)})),n.length&&xui.arr.each(n,(function(e){xui.arr.removeValue(r,e)}))}},xui.browser.ie&&(a.$ondragstart=c.ondragstart,a.$onselectstart=d.onselectstart,c.ondragstart=d.onselectstart=null,c.selection&&c.selection.empty))try{c.selection.empty()}catch(e){}if(xui.Event.stopBubble(e),i.targetNode.get(0)!==c&&i.targetNode.onMousedown(!0,xui.Event.getEventPara(e,f)),i.dragDefer<1)return xui.tryF(a._start,[e],a),!1;a.$mouseup=c[x],c[x]=function(e){return xui.DragDrop._end()._reset(),xui.tryF(document.onmouseup,[e],null,!0)},xui.browser.isTouch&&(a.$touchend=c[l],c[l]=c[x]);var g={};a.$mousemove=c[p],c[p]=function(e){var t=xui.Event.getPos(e);if(t.left!==g.left||t.top!==g.top)return g=t,--a._defer<=0&&xui.DragDrop._start(e),!1},xui.browser.isTouch&&(a.$touchmove=c[s],c[s]=c[p])},$onDrag:function(e){var t=xui.DragDrop,i=t._profile;if(t.$SimulateMousemoveInMobileDevice)return!1;if(e=e||window.event,!i.isWorking||t._stop)return t.$onDrop(e),!0;var r=xui.Event.getPos(e);if(i.x=r.left,i.y=r.top,!i.isWorking)return!1;if(t._proxy?(t._proxystyle.contentVisibility="hidden",i.verticalOnly||(t._proxyLeft=Math.floor(t._left((null!==i.maxLeftOffset&&i.x<=i.restrictedLeft?i.restrictedLeft:null!==i.maxRightOffset&&i.x>=i.restrictedRight?i.restrictedRight:i.x)-t._cssPos_x)),t._proxyLeft-t._pre.left&&(t._proxystyle.left=Math.round(parseFloat(t._proxyLeft))+"px"),t._pre.left=t._proxyLeft,i.curPos.left=t._proxyLeft+t.$proxySize),i.horizontalOnly||(t._proxyTop=Math.floor(t._top((null!==i.maxTopOffset&&i.y<=i.restrictedTop?i.restrictedTop:null!==i.maxBottomOffset&&i.y>=i.restrictedBottom?i.restrictedBottom:i.y)-t._cssPos_y)),t._proxyTop-t._pre.top&&(t._proxystyle.top=Math.round(parseFloat(t._proxyTop))+"px"),t._pre.top=t._proxyTop,i.curPos.top=t._proxyTop+t.$proxySize),t._proxystyle.contentVisibility=""):(i.curPos.left=i.x,i.curPos.top=i.y),1!=t._onDrag&&(t._onDrag?t._onDrag(e,t._source._get(0)):(t._onDrag=1,t._source.onDrag(!0,xui.Event.getEventPara(e,r)))),xui.browser.isTouch&&t.__touchingfordd&&t._c_droppable)for(var n=0,o=t._c_droppable.length;n<o;n++){var a=t._c_droppable[n],u=xui.use(a.id).get(0),s=t._c_dropactive,l=xui.use(s).get(0);if(i.x>=a.left&&i.y>=a.top&&i.x<=a.left+a.width&&i.y<=a.top+a.height){if(s==a.id){var c=e.changedTouches[0];t.$SimulateMousemoveInMobileDevice=1,xui.Event.simulateEvent(u,"mousemove",{screenX:c.screenX,screenY:c.screenY,clientX:c.clientX,clientY:c.clientY}),delete t.$SimulateMousemoveInMobileDevice}else xui.Event.simulateEvent(u,"mouseover",{screenX:i.left,screenY:i.top,clientX:i.left,clientY:i.top}),t._c_dropactive=a.id,s&&l&&xui.Event.simulateEvent(l,"mouseout",{screenX:i.left,screenY:i.top,clientX:i.left,clientY:i.top});break}if(s==a.id){l&&xui.Event.simulateEvent(l,"mouseout",{screenX:i.left,screenY:i.top,clientX:i.left,clientY:i.top}),t._c_dropactive=null;break}}return!1},$onDrop:function(e){var t=xui.DragDrop,i=t._profile,r=xui.Event;if(e=e||window.event,t._end(),i.isWorking){t.setDropFace();var n=t._source.onDragstop(!0,r.getEventPara(e));t._dropElement&&xui.use(t._dropElement).onDrop(!0,r.getEventPara(e))}return t._reset(),r.stopBubble(e),xui.tryF(document.onmouseup,[e]),!!n},setDropElement:function(e){return this._profile.dropElement=this._dropElement=e,this},getProfile:function(){var e=this,t=e._profile;return t.offset=e._proxy?{x:e._proxyLeft-t.ox+e._cssPos_x,y:e._proxyTop-t.oy+e._cssPos_y}:{x:t.x-t.ox,y:t.y-t.oy},t},setDropFace:function(e,t){var i,r,n=this,o='<div style="position:absolute;z-index:'+xui.Dom.TOP_ZINDEX+";font-size:0;line-height:0;border-",a=":dashed 1px #ff6600;",u=n._Region,s=n._rh,l="backgroundColor";return u&&u.parent()&&u.remove(!1),n._R&&(n._R.css(l,n._RB),delete n._R,delete n._RB),e?(u&&u.get(0)||(u=n._Region=xui.create(o+'top:solid 2px #ff6600;left:0;top:0;width:100%;height:0;"></div>'+o+"right"+a+'right:0;top:0;height:100%;width:0;"></div>'+o+"bottom"+a+'bottom:0;left:0;width:100%;height:0;"></div>'+o+"left"+a+'width:0;left:0;top:0;height:100%;"></div>'),s=n._rh=xui([u.get(1),u.get(3)])),u.get(0).style.contentVisibility="hidden",e=xui(e),xui.browser.ie6&&s.height("100%"),"block"==e.css("display")?(xui.setNodeData(u.get(0),"zIndexIgnore",1),e.append(u),u.top(i=e.scrollTop()).left(r=e.scrollLeft()),u.get(2).style.top="auto",u.get(1).style.left="auto",u.get(2).style.bottom="-"+i+"px",u.get(1).style.right="-"+r+"px",xui.browser.ie6&&!s.get(0).offsetHeight&&s.height(e.get(0).offsetHeight)):(n._RB=e.get(0).style[l],n._R=e,e.css(l,"#FA8072")),u.get(0).style.contentVisibility="",n.setDragIcon(t||"move")):n.setDragIcon("none"),n},setDragIcon:function(e){xui.resetRun("setDropFace",null);var t=this,i=t._profile,r=i.proxyNode,n=t._Icons;return r&&"icon"==i.dragType&&r.first(4).css("object"==typeof e?e:{backgroundPosition:n[e]||e}),t},_setProxy:function(e,t){var i,r,n=this,o=n._profile,a=xui.Dom;return a.byId(n._id)||xui("body").prepend(xui.create('<div id="'+n._id+'" style="left:0;top:0;border:0;font-size:0;line-height:0;padding:'+n.$proxySize+"px;position:absolute;background:url("+xui.ini.img_bg+') repeat;"><div style="font-size:0;line-height:0;" id="'+n._idi+'">'+(xui.browser.ie6?"&nbsp;":"")+"</div></div>")),i=xui(n._id),o.dragKey?(n.$proxySize=0,i.css("padding",0)):(t.left-=n.$proxySize,t.top-=n.$proxySize,o.targetOffsetParent||a.setCover(!0,null,!1,o.dragCursor)),(r=o.targetOffsetParent)&&xui(r).append(i),e?(xui(n._idi).empty(!1).append(e),o.proxyNode=e):o.proxyNode=xui(n._idi),i.css({display:"",zIndex:10*a.TOP_ZINDEX,cursor:o.dragCursor}).offset(t,r),xui.setNodeData(i.get(0),"zIndexIgnore",1),i},_resetProxy:function(){var e=this,t=e._profile,i=xui.Dom,r=e._id,n=e._idi;if(i.byId(r)){var o=xui(n),a=xui(r);xui.browser.ie6?o.html("&nbsp;"):o.empty(),o.attr("style","font-size:0;line-height:0;"),xui("body").prepend(a.css({zIndex:0,cursor:"",display:"none",padding:Math.round(parseFloat(e.$proxySize))+"px"})),t.proxyNode=e._proxystyle=null,i.setCover(!1)}},_pack:function(e,t){var i,r,n={},o={},a=this,u=a._profile;switch(null!==u.targetLeft&&null!==u.targetTop||(r=t.offset(null,u.targetOffsetParent)),n.left=null!==u.targetLeft?u.targetLeft:r.left,n.top=null!==u.targetTop?u.targetTop:r.top,u.dragType){case"deep_copy":case"copy":o.width=xui.isNumb(u.targetWidth)?u.targetWidth:t.cssSize().width||0,o.height=xui.isNumb(u.targetHeight)?u.targetHeight:t.cssSize().height||0;var s=t.clone("deep_copy"==u.dragType).css({position:"relative",margin:"0",left:"0",top:"0",right:"",bottom:"",cursor:u.dragCursor,cssFloat:"none"}).cssSize(o).id("",!0).css("opacity",.8);u.targetCallback&&u.targetCallback(s),s.query("*").id("",!0),u.targetCSS&&s.css(u.targetCSS),i=a._setProxy(s,n);break;case"shape":o.width=null!==u.targetWidth?u.targetWidth:t.offsetWidth(),o.height=null!==u.targetHeight?u.targetHeight:t.offsetHeight(),o.width-=2,o.height-=2,i=a._setProxy(xui.create("div").css({border:"dashed 1px",fontSize:"0",lineHeight:"0"}).cssSize(o),n);break;case"blank":i=a._setProxy(null,n);break;case"icon":n.left=xui.isNumb(u.targetLeft)?u.targetLeft:e.left+16,n.top=xui.isNumb(u.targetTop)?u.targetTop:e.top+16,r='<table border="0" class="xui-node xui-node-table"><tr><td valign="top"><span class="xui-node xui-node-span" style="background:url('+u.dragIcon+") no-repeat left top;width:"+(xui.isNumb(u.targetWidth)?u.targetWidth:16)+"px;height:"+(xui.isNumb(u.targetHeight)?u.targetHeight:16)+'px;" ></span></td><td id="xui:dd:shadow" '+(u.shadowFrom?'style="border:solid 1px #e5e5e5;background:#fff;font-size:12px;line-height:14px;"':"")+">"+(u.shadowFrom?xui(u.shadowFrom).clone(!0).css({left:"auto",top:"auto",right:"auto",bottom:"auto",position:"relative"}).outerHTML().replace(/\s*id\=[^\s\>]*/g,""):"")+"</td></tr></table>",i=a._setProxy(xui.create(r).css("opacity",.8),n);break;case"move":a.$proxySize=0,"absolute"!=(i=t).css("position")&&i.css("position","absolute").offset(n),i.css("cursor",u.dragCursor)}return i},_unpack:function(){var e,t=this,i=t._profile;i.targetReposition&&"move"!=i.dragType&&(e=xui(t._source))&&(e.isEmpty()||("absolute"!=e.css("position")&&e.css("position","absolute").cssPos(e.offset(null,e.get(0).offsetParent)),xui.browser.ie&&e.cssRegion({right:"",bottom:""}),e.offset(i.curPos,i.targetOffsetParent||document.body))),"move"==i.dragType&&t._source.css("cursor",t._cursor)},_unRegister:function(e,t){var i=this._eh;xui([e]).$removeEvent("beforeMouseover",i).$removeEvent("beforeMouseout",i).$removeEvent("beforeMousemove",i);var r=xui.getNodeData(e.$xid,["_dropKeys"]),n=xui.$cache.droppable;if(r)for(var o in r)n[o]&&xui.arr.removeValue(n[o],e.$xid);xui.setNodeData(e.$xid,["_dropKeys"])},_register:function(e,t){var i=this._eh;xui(e).beforeMouseover((function(e,t,i){var r=xui.DragDrop;(e=r._profile).dragKey&&xui.getNodeData(i,["_dropKeys",e.dragKey])&&(r.setDropElement(i),r._onDragover=null,xui.use(i).onDragenter(!0),r._dropElement&&xui.resetRun("setDropFace",r.setDropFace,0,[i],r))}),i).beforeMouseout((function(e,t,i){var r=xui.DragDrop;(e=r._profile).dragKey&&xui.getNodeData(i,["_dropKeys",e.dragKey])&&(xui.use(i).onDragleave(!0),r._dropElement==i&&(r.setDropElement(r._onDragover=null),xui.resetRun("setDropFace",r.setDropFace,0,[null],r)))}),i).beforeMousemove((function(e,t,i){var r=xui.DragDrop,n=r._onDragover,o=r._profile;1!=n&&r._dropElement==i&&o.dragKey&&xui.getNodeData(i,["_dropKeys",o.dragKey])&&(n?n(t,i):(r._onDragover=1,xui.use(i).onDragover(!0,xui.Event.getEventPara(t))))}),i);var r=xui.getNodeData(e.$xid,["_dropKeys"]),n=xui.$cache.droppable;if(r)for(var o in r)n[o]&&xui.arr.removeValue(n[o],e.$xid);for(var a={},u=t.split(/[^\w-]+/),s=(o=0,u.length);o<s;o++)a[u[o]]=1,n[u[o]]=n[u[o]]||[],n[u[o]].push(e.$xid);xui.setNodeData(e.$xid,["_dropKeys"],a)},attachNativeDrag:function(e,t,i,r,n){xui(e).attr("draggable","true");var o=function(n){if(n.dataTransfer.setData("text/plain",xui.serialize({dragKey:t,dragData:i})),n.dataTransfer.dropEffect="copy",r&&!1===r.call(e,n,t,i))return!1};return e.addEventListener("dragstart",o,!1),xui.isFun(n)&&e.addEventListener("dragend",n,!1),[o,n]},detachNativeDrag:function(e,t){var i=t[0],r=t[1];e.removeEventListener("dragstart",i,!1),xui.isFun(r)&&e.removeEventListener("dragend",r,!1)},attachNativeDrop:function(){var e=xui.DragDrop;if(e._attachedNativeDrop)return e._attachedNativeDrop;function t(t,i){i.srcElement&&(e._profile.x=i.clientX,e._profile.y=i.clientY,xui.Event.simulateEvent(i.srcElement,t,{screenX:i.screenX,screenY:i.screenY,clientX:i.clientX,clientY:i.clientY}))}function i(t,i){e._end()._reset(),e._profile.isWorking=!0,document.onmouseover=e.$onDrag,e._source={onDrag:function(){},onDragstop:function(){}},e._profile.dragKey=t,e._profile.dragData=i,xui.tryF(e.DDBegin)}function r(e){return e.$xid&&xui.getNodeData(e.$xid,["eHandlers","ondrop"])}function n(n){if(n.relatedTarget)r(n.srcElement)&&t("mouseover",n);else{var o=xui.unserialize(n.dataTransfer.getData("text/plain"));o?o.dragKey&&o.dragData?i(o.dragKey,o.dragData):console.log("No XUI DD dragKey or dragData in dataTransfer"):e._xui_dragging_data?(o=e._xui_dragging_data).dragKey&&o.dragData?i(o.dragKey,o.dragData):console.log("No XUI DD dragKey or dragData in dataTransfer"):console.log("Invalid XUI DD data format in dataTransfer")}}function o(i){i.relatedTarget?r(i.srcElement)&&t("mouseout",i):(e._end()._reset(),e._profile.isWorking=!1,document.onmouseover=null)}function a(t){e.$onDrop(t),document.onmouseover=null,delete e._xui_dragging_data}function u(i){if(i.preventDefault(),!r(i.srcElement))return i.dataTransfer.dropEffect="none",!1;t("mouseover",i),e._profile.dropElement?i.dataTransfer.dropEffect="copy":i.dataTransfer.dropEffect="none"}function s(t){if(t.data)try{var i=xui.unserialize(t.data);i&&"_xui_dragging_data"in i&&(i._xui_dragging_data?e._xui_dragging_data=i._xui_dragging_data:delete e._xui_dragging_data)}catch(t){}}return document.addEventListener("dragenter",n,!1),document.addEventListener("dragleave",o,!1),document.addEventListener("dragover",u,!1),document.addEventListener("drop",a,!1),window.addEventListener("message",s,!1),e._attachedNativeDrop=[n,o,u,a,s]},detachNativeDrop:function(e){var t=(e=e||dd._attachedNativeDrop)[0],i=e[1],r=e[2],n=e[3],o=e[4];document.removeEventListener("dragenter",t,!1),document.removeEventListener("dragleave",i,!1),document.removeEventListener("dragover",r,!1),document.removeEventListener("drop",n,!1),window.removeEventListener("message",o,!1),delete dd._attachedNativeDrop}},After:function(){this._reset(),xui.each({startDrag:function(e,t,i,r){return xui.DragDrop.startDrag(e,this.get(0),t,i||"",r||null),this},draggable:function(e,t,i,r,n){var o=this,a=xui.DragDrop;return(n=n?"function"==typeof n?xui.tryF(o.getTarget,[],this):xui(n):null)&&n.get(0)||(n=o),o.removeClass("xui-ui-selectable").addClass("xui-ui-unselectable"),e===undefined?e=!0:"object"==typeof e&&(t=e,e=!0),e?o.$addEvent("beforeMousedown",(function(e,o,a){if(xui.getId(xui.Event.getSrc(o))!=a)return!0;n.startDrag(o,t,i,r)}),a._eh,-1):o.$removeEvent("beforeMousedown",a._eh),o},droppable:function(e,t){e===undefined&&(e=!0),t=t||"default";var i=xui.DragDrop;return this.each((function(r){e?i._register(r,t):i._unRegister(r,t)}))}},(function(e,t){xui.Dom.plugIn(t,e)}))}}),xui.Class("xui.Cookies",null,{Static:{set:function(e,t,i,r,n,o){if(xui.isHash(e))for(var a in e)this.set(a,e[a],i,r,n,o);else"string"!=typeof t&&(t=xui.serialize(t)),document.cookie=escape(e+"")+"="+escape(t)+(i?"; expires="+new Date((new Date).getTime()+864e5*i).toGMTString():"")+(r?"; path="+r:"")+(n?"; domain="+n:"")+(o?"; secure":"");return this},get:function(e){var t,i,r,n,o=document.cookie.split("; "),a={};for(t=0;t<o.length;t++)if(r=(i=o[t].split("="))[1]?unescape(i[1]):"",a[i[0]]=(/^\s*\{[\s\S]*\}$/.test(n=r)||/^\s*\[[\s\S]*\]$/.test(n)?xui.unserialize(n):n)||r,e&&i[0]==escape(e))return a[i[0]];return e?null:a},remove:function(e){return this.set(e,"",-1).set(e,"/",-1)},clear:function(){xui.arr.each(document.cookie.split(";"),(function(e){xui.Cookies.remove(xui.str.trim(e.split("=")[0]))}))}}}),xui.Class("xui.History",null,{Static:{activate:function(){var e=this;if(!e._activited)switch(e._activited=1,e._lastFI=decodeURIComponent(location.hash),e._type){case"event":xui.Event._addEventListener(window,"hashchange",e._checker);break;case"iframe":document.body.appendChild(document.createElement('<iframe id="'+e._fid+'" src="about:blank" style="display: none;"></iframe>'));var t=document.getElementById(e._fid).contentWindow.document;t.open("javascript:'<html></html>'"),t.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+location.hash+"');<\/script></head><body></body></html>"),t.close();case"timer":e._itimer&&clearInterval(e._itimer),e._itimer=setInterval(e._checker,200)}},_fid:"xui:history",_type:xui.browser.ie&&xui.browser.ver<8?"iframe":"onhashchange"in window?"event":"timer",_callbackTag:null,_callbackArr:null,_inner_callback:null,_callback:function(e,t,i){var r,n,o=this;if(xui.arr.each(xui.Module._cache,(function(r){r._evsClsBuildIn&&"onFragmentChanged"in r._evsClsBuildIn?(xui.isFun(n=r._evsClsBuildIn.onFragmentChanged)||xui.isArr(n)&&n[0].type)&&r.fireEvent("onFragmentChanged",[r,e,t,i]):r._evsPClsBuildIn&&"onFragmentChanged"in r._evsPClsBuildIn&&(xui.isFun(n=r._evsPClsBuildIn.onFragmentChanged)||xui.isArr(n)&&n[0].type)&&r.fireEvent("onFragmentChanged",[r,e,t,i])})),!xui.isFun(o._callbackTag)||!1!==o._callbackTag(e,t,i)){if((r=o._callbackArr)&&xui.isArr(r))for(var a=0,u=r.length;a<u;a++)if(xui.isFun(r[a])&&!1===r[a](e,t,i))return;xui.isFun(o._inner_callback)&&o._inner_callback(e,t,i)}},setCallback:function(e){var t=this,i=location.hash;return i=i?"#"+encodeURIComponent((""+decodeURIComponent(i)).replace(/^#!?/,"")):"#",t._inner_callback=e,t._lastFI=decodeURIComponent(i),t._callback(decodeURIComponent(t._lastFI.replace(/^#!?/,"")),!0,e),t},_checker:function(e){var t=xui.History;switch(t._type){case"iframe":xui.isSet(e)&&(location.hash=e);case"event":case"timer":decodeURIComponent(location.hash)!=decodeURIComponent(t._lastFI)&&(t._lastFI=decodeURIComponent(location.hash),t._callback(decodeURIComponent(location.hash.replace(/^#(!)?/,""))))}},getFI:function(){return this._lastFI},setFI:function(e,t,i,r){var n,o=this,a=xui.getUrlPath(o.getFI());if(o.activate(),e?(xui.isHash(e)?n=e:(e=("#"!=e[0]?"#":"")+e,a=xui.getUrlPath(e),n=xui.getUrlParams(e)),i&&(n=xui.merge(n||{},xui.getUrlParams(),"without")),e="#"+a+(xui.isEmpty(n)?"":"?"+xui.urlEncode(n))):e="#",o._lastFI==decodeURIComponent(e))return!1;switch(o._type){case"iframe":var u=document.getElementById(o._fid).contentWindow.document;u.open("javascript:'<html></html>'"),u.write('<html><head><script type="text/javascript">parent.xui.History._checker(\''+e+"');<\/script></head><body></body></html>"),u.close();break;case"event":case"timer":r?location.replace(location.href.split("#")[0]+(o._lastFI=decodeURIComponent(e))):location.hash=o._lastFI=decodeURIComponent(e),!1!==t&&o._callback(decodeURIComponent(e.replace(/^#!?/,"")))}},getParams:function(e){var t=xui.getUrlParams(this.getFI());return e?t[e]:t},setParams:function(e,t,i,r){var n;xui.isHash(e)?n=e:(n={})[e]=xui.isHash(t)||xui.isArr(t)?xui.stringify(t):t,this.setFI(n,i,!1!==r)},getRouter:function(e){var t=xui.getUrlPath(this.getFI());return e?t.replace(/^\//,"").split("/"):t},getRouterArray:function(){return this.getRouter(!0)},setRouter:function(e,t,i,r,n){e=xui.isArr(e)?e.join("/"):e.replace(/^\//,"").replace(/\/$/,"");var o=this.getRouterArray();!t&&xui.str.startWith(o.join("/")+"/",e+"/")||this.setFI("#/"+e,r,n,!!i)}}}),xui.Class("xui.Tips",null,{Constructor:function(){return null},Initialize:function(){if(!xui.ini.disableTips){var e=xui.DragDrop,t=this;e&&(e.$reset=function(){t.hide()}),xui.browser.fakeTouch&&(t.HTMLTips=!1),t.HTMLTips?xui.CSS.addStyleSheet(".xui-tips{position:absolute;overflow:visible;visibility:hidden;left:-10000px;border-radius:1px;} .xui-tips-i{overflow:hidden;position:relative;}.xui-tips-i span{display:inline;}.xui-tips-c{padding:.125em .25em .25em .25em;}.xui-tips-c *{line-height:1.22em;}.xui-tips .xui-tips-c{border-radius:1px;}",this.KEY):t.MOVABLE=!1,xui.doc.afterMousedown((function(){t._cancel()}),"$Tips",-1).afterMousemove((function(i,r){if(!e._profile.isWorking){var n,o,a=xui.Event;(n=xui.resetRun.$cache)&&n.$Tips&&(t._pos=a.getPos(r)),t._from?(t._pos=a.getPos(r),t._showF(),xui.resetRun("$Tips3")):t.MOVABLE&&t._showed&&t._Node&&(n=a.getPos(r),(o=t._Node.style).contentVisibility="hidden",o.left=Math.min(t._tpl._ww-t._tpl._w,Math.max(0,Math.round((parseFloat(o.left)||0)+(n.left-t._pos.left),10)))+"px",o.top=Math.min(t._tpl._hh-t._tpl._h,Math.max(0,Math.round((parseFloat(o.top)||0)+(n.top-t._pos.top),10)))+"px",o.contentVisibility="",t._pos=n)}}),"$Tips",-1).afterMouseover((function(e,i){var r,n,o,a=xui.Event,u=a.$FALSE,s=a.getSrc(i),l=0,c=function(e){return t._markId&&t._cancel(),e};if(!s)return c(u);try{for(;s&&(!s.id||s.id==xui.$localeDomId)&&s.parentNode!==document&&l++<10;)s=s.parentNode;if(s&&!(r="string"==typeof s.id?s.id:null))return s=null,c(u)}catch(i){}if(n=a._getProfile(r)){if(n.box&&"xui.UIProfile"==n.KEY){if(n.properties.disableTips||n.behavior.disableTips)return s=null,c(!1);var d=n.behavior.NoTips;if(d)for(var f=0,p=d.length;f<p;f++)if(0===r.indexOf(n.keys[d[f]]))return c(!1);if(d=n.behavior.PanelKeys)for(f=0,p=d.length;f<p;f++)if(0===r.indexOf(n.keys[d[f]]))return c(!1);d=n.behavior.HoverEffected,o=n.onShowTips?r:r.replace(t._reg,(function(e,t){return d&&t in d?e:":"}))}if(t._markId&&o==t._markId)return u;t._markId=o,t._pos=a.getPos(i),t._activeNode=xui(s),t._activePrf=n,t._showed?(t._from=n,t._enode=r,t._showF()):t.HTMLTips?xui.resetRun("$Tips",(function(){t._from=n,t._enode=r,xui.resetRun("$Tips3",(function(){t._from&&t._showF()}))}),t.DELAYTIME):(t._from=n,t._enode=r,t._from&&t._showF())}else t._cancel();return s=null,u}),"$Tips",-1).afterMouseout((function(e,i){if(t._markId){var r,n=xui.Event,o=0,a=i.toElement||i.relatedTarget;if(a)try{for(;a&&(!a.id||a.id==xui.$localeDomId)&&a.parentNode!==document&&o++<10;)a=a.parentNode;a&&("string"!=typeof a.id||!a.id)&&(a=null,r=1)}catch(i){r=1}else r=1;return r&&t._cancel(),n.$FALSE}}),"$Tips",-1).afterMouseup((function(e,i){t._cancel()}),"$Tips",-1),this._Types={default:new function(){this.show=function(e,i,r){if(!xui.DragDrop._profile.isWorking&&i){var n,o="object"==typeof e?xui.Tips._getTipsTxt(e):e;if("function"==typeof o&&(o=o()),xui.Tips.HTMLTips){var a,u,s,l,c=this;if((a=c.node)&&a.get(0)||(a=c.node=xui.create('<div class="xui-node xui-node-div xui-tips  xui-ui-shadow xui-custom"><div class="xui-node xui-wrapper xui-node-div xui-tips-i xui-custom"></div></div>'),u=c._ruler=xui.create('<div class="xui-node xui-wrapper xui-node-div xui-tips  xui-ui-shadow xui-custom"><div class="xui-node xui-node-div xui-tips-i xui-custom"></div></div>'),c.n=a.first(),c._n=u.first(),xui("body").append(u)),u=c._ruler,document.body.lastChild!=a.get(0)&&xui("body").append(a,!1,!0),o+=""){var d=/^\s*\</.test(o);o=xui.adjustRes(o),xui.Tips._curTips=o,e.transTips&&d||(o='<div class="xui-ui-ctrl xui-node xui-node-div  xui-uiborder-flat xui-uicell-alt xui-node-tips xui-tips-c /*xif(t=xui.Tips._activePrf){ui-cls-wordwrap */xui-custom">'+o+"</div>"),c._n.get(0).innerHTML=o,c._ww=xui.frame.width(),c._hh=xui.frame.height(),s=Math.min(d?c._ww:t.MAXWIDTH,u.get(0).offsetWidth+2);var f=a.get(0).style,p=c.n.get(0),x=p.style;f.contentVisibility="hidden",f.visibility="hidden",p.innerHTML=o,xui.browser.ie?(f.width=x.width=(c._w=Math.round(s+s%2))+"px",l=p.offsetParent?p.offsetHeight:0,f.height=(c._h=Math.round(l-l%2))+"px"):(x.width=(c._w=Math.round(s))+"px",c._h=c.n.height()),a.removeClass("xui-ui-hidden"),f.contentVisibility="",!0===i?f.visibility="visible":a.popToTop(i instanceof window.Event||i["xui.UI"]||i["xui.UIProfile"]||i["xui.Dom"]||1==i.nodeType||"string"==typeof i?i:{left:i.left,top:i.top,region:{left:i.left,top:i.top-12,width:24,height:32}},1),f=x=p=null}else a.css("zIndex",0).hide()}else o+="",o=xui.adjustRes(o),xui.Tips._curTips=o,o=o.replace(/<[^>]*>/g,""),(n=xui.Tips._activePrf)&&(n.box&&n.box["xui.svg"]?n.boxing().setAttr("KEY",{title:o},!1):xui.Tips._activeNode.attr("title",o))}},this.hide=function(){if(xui.Tips.HTMLTips)this.node&&this.node.css("zIndex",0).hide();else{var e=xui.Tips._activePrf;e&&(e.box["xui.svg"]?e.boxing().setAttr("KEY",{title:null},!1):xui.Tips._activeNode.attr("title",null))}}}}}},Static:{_reg:/-([\w]+):/,MAXWIDTH:600,HTMLTips:!0,MOVABLE:!0,DELAYTIME:400,AUTOHIDETIME:5e3,_getTipsTxt:function(e){return e.desc||e.tips||e.caption||xui.getNodeData(xui.Tips._activeNode.get(0),"tips")},_showF:function(){if(!xui.ini.disableTips){var e=this,t=e._from,i=xui.Dom.byId(e._enode),r=e._pos,n=t.box,o=!0;if(e._from=e._enode=null,i&&t&&r){if(!1!=(o=!1!==((a=t.CF)&&(a=a.showTips)&&a(t,i,r)))&&n&&(o=!1!==(t._showTips&&t._showTips(t,i,r))),!1!==o&&n&&(o=!1!==(n._showTips&&n._showTips(t,i,r))),!1!==o)if((a=t)&&a.tips||a&&(a=a.properties)&&a.tips)e.show(r,a),o=!1;else if((a=t)&&(a=a.properties)&&a.autoTips&&"caption"in a&&""===a.tips)(a.caption||a.labelCaption)&&(e.show(r,{tips:a.caption||a.labelCaption}),o=!1);else{var a;(a=xui.Tips._activeNode.get(0))&&(a=xui.getNodeData(a,"tips"))&&(e.show(r,{tips:a}),o=!1)}!1!==o?e.hide():e.HTMLTips&&!e.MOVABLE&&xui.resetRun("$Tips2",e.hide,e.AUTOHIDETIME,null,e),i=r=t=null}}},getTips:function(){return this._curTips},setTips:function(e){this._curTips&&this._tpl&&this._tpl.show(e,!0)},setPos:function(e,t){var i=this;i.HTMLTips&&(i=i._Node)&&(i=i.style)&&((e||0===e)&&(i.left=Math.round(parseFloat(e))+"px"),(t||0===t)&&(i.top=Math.round(parseFloat(t))+"px"))},show:function(e,t,i){var r,n=this;n._pos=e,n._item!==t&&("string"==typeof t||t&&xui.Tips._getTipsTxt(t)?((r=n._tpl=n._Types[t.tipsTemplate]||n._Types.default).show(t,e,i),n._Node=r.node&&r.node.get(0),n._item=t,n._showed=!0):n._cancel())},hide:function(){var e=this;e._showed&&(e._tpl&&e._tpl.hide(),e._clear())},_cancel:function(){var e=this;e._markId&&(e._showed?e.hide():(xui.resetRun("$Tips"),xui.resetRun("$Tips3"),e._clear()))},_clear:function(){var e=this;e._Node=e._curTips=e._markId=e._activeNode=e._activePrf=e._from=e._tpl=e._item=e._showed=null}}}),xui},"function"==typeof define&&define.amd?define((function(){return factory.call(root)})):"object"==typeof module&&module.exports?module.exports=root&&root.document?factory.call(root):function(e){if(!e.document)throw new Error("xui requires a window with a document");return factory.call(e)}:root.xui=factory.call(root);